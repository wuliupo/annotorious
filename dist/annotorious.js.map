{
"version":3,
"file":"",
"lineCount":13927,
"mappings":"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",
"sources":[" [synthetic:base] "," [synthetic:util/defines] "," [synthetic:util/defineproperty] "," [synthetic:util/global] "," [synthetic:es6/symbol] "," [synthetic:es6/util/iteratorfromarray] "," [synthetic:util/polyfill] "," [synthetic:es6/array/values] ","node_modules/closure-builder/third_party/closure-library/closure/goog/base.js","node_modules/closure-builder/third_party/closure-library/closure/goog/debug/error.js","node_modules/closure-builder/third_party/closure-library/closure/goog/dom/nodetype.js","node_modules/closure-builder/third_party/closure-library/closure/goog/asserts/asserts.js","node_modules/closure-builder/third_party/closure-library/closure/goog/array/array.js","node_modules/closure-builder/third_party/closure-library/closure/goog/string/string.js","node_modules/closure-builder/third_party/closure-library/closure/goog/labs/useragent/util.js","node_modules/closure-builder/third_party/closure-library/closure/goog/object/object.js","node_modules/closure-builder/third_party/closure-library/closure/goog/labs/useragent/browser.js","node_modules/closure-builder/third_party/closure-library/closure/goog/labs/useragent/engine.js","node_modules/closure-builder/third_party/closure-library/closure/goog/labs/useragent/platform.js","node_modules/closure-builder/third_party/closure-library/closure/goog/reflect/reflect.js","node_modules/closure-builder/third_party/closure-library/closure/goog/useragent/useragent.js","node_modules/closure-builder/third_party/closure-library/closure/goog/dom/browserfeature.js","node_modules/closure-builder/third_party/closure-library/closure/goog/dom/htmlelement.js","node_modules/closure-builder/third_party/closure-library/closure/goog/dom/tagname.js","node_modules/closure-builder/third_party/closure-library/closure/goog/dom/asserts.js","node_modules/closure-builder/third_party/closure-library/closure/goog/dom/tags.js","node_modules/closure-builder/third_party/closure-library/closure/goog/string/typedstring.js","node_modules/closure-builder/third_party/closure-library/closure/goog/string/const.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/safescript.js","node_modules/closure-builder/third_party/closure-library/closure/goog/fs/url.js","node_modules/closure-builder/third_party/closure-library/closure/goog/i18n/bidi.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/trustedresourceurl.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/safeurl.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/safestyle.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/safestylesheet.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/safehtml.js","node_modules/closure-builder/third_party/closure-library/closure/goog/dom/safe.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/uncheckedconversions.js","node_modules/closure-builder/third_party/closure-library/closure/goog/math/math.js","node_modules/closure-builder/third_party/closure-library/closure/goog/math/coordinate.js","node_modules/closure-builder/third_party/closure-library/closure/goog/math/size.js","node_modules/closure-builder/third_party/closure-library/closure/goog/dom/dom.js","node_modules/closure-builder/third_party/closure-library/closure/goog/math/box.js","node_modules/closure-builder/third_party/closure-library/closure/goog/math/irect.js","node_modules/closure-builder/third_party/closure-library/closure/goog/math/rect.js","node_modules/closure-builder/third_party/closure-library/closure/goog/debug/entrypointregistry.js","node_modules/closure-builder/third_party/closure-library/closure/goog/debug/errorcontext.js","node_modules/closure-builder/third_party/closure-library/closure/goog/debug/debug.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/browserfeature.js","node_modules/closure-builder/third_party/closure-library/closure/goog/disposable/idisposable.js","node_modules/closure-builder/third_party/closure-library/closure/goog/disposable/disposable.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/eventid.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/event.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/eventtype.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/browserevent.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/listenable.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/listener.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/listenermap.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/events.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/eventhandler.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/eventtarget.js","node_modules/closure-builder/third_party/closure-library/closure/goog/dom/vendor.js","node_modules/closure-builder/third_party/closure-library/closure/goog/style/style.js","node_modules/closure-builder/third_party/closure-library/closure/goog/useragent/platform.js","node_modules/closure-builder/third_party/closure-library/closure/goog/useragent/product.js","node_modules/closure-builder/third_party/closure-library/closure/goog/useragent/product_isversion.js","node_modules/closure-builder/third_party/closure-library/closure/goog/style/bidi.js","node_modules/closure-builder/third_party/closure-library/closure/goog/fx/dragger.js","src/dom.js","src/events.js","node_modules/closure-builder/third_party/closure-library/closure/goog/functions/functions.js","node_modules/closure-builder/third_party/closure-library/closure/goog/iter/iter.js","node_modules/closure-builder/third_party/closure-library/closure/goog/structs/map.js","./node_modules/nanoid/index.browser.js","src/shape/point.js","src/shape/polygon.js","src/shape/rectangle.js","src/shape/shape.js","src/annotation.js","src/mediatypes/module.js","node_modules/closure-builder/third_party/closure-library/closure/goog/dom/classes.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/legacyconversions.js","node_modules/closure-builder/third_party/closure-library/closure/goog/structs/structs.js","node_modules/closure-builder/third_party/closure-library/closure/goog/uri/utils.js","node_modules/closure-builder/third_party/closure-library/closure/goog/uri/uri.js","node_modules/closure-builder/third_party/closure-library/closure/goog/soy/data.js","node_modules/closure-builder/third_party/closure-library/closure/goog/soy/soy.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/sanitizer/attributewhitelist.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/cssspecificity.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/sanitizer/noclobber.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/sanitizer/csssanitizer.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/sanitizer/elementweakmap.js","node_modules/closure-builder/third_party/closure-library/closure/goog/debug/logrecord.js","node_modules/closure-builder/third_party/closure-library/closure/goog/debug/logbuffer.js","node_modules/closure-builder/third_party/closure-library/closure/goog/debug/logger.js","node_modules/closure-builder/third_party/closure-library/closure/goog/log/log.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/sanitizer/safedomtreeprocessor.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/sanitizer/tagblacklist.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/sanitizer/tagwhitelist.js","node_modules/closure-builder/third_party/closure-library/closure/goog/html/sanitizer/htmlsanitizer.js","node_modules/closure-builder/third_party/closure-library/closure/goog/dom/classlist.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/keycodes.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/keyhandler.js","node_modules/closure-builder/third_party/closure-library/closure/goog/ui/idgenerator.js","node_modules/closure-builder/third_party/closure-library/closure/goog/ui/component.js","node_modules/closure-builder/third_party/closure-library/closure/goog/ui/componentutil.js","node_modules/closure-builder/third_party/closure-library/closure/goog/a11y/aria/roles.js","node_modules/closure-builder/third_party/closure-library/closure/goog/a11y/aria/attributes.js","node_modules/closure-builder/third_party/closure-library/closure/goog/a11y/aria/datatables.js","node_modules/closure-builder/third_party/closure-library/closure/goog/a11y/aria/aria.js","node_modules/closure-builder/third_party/closure-library/closure/goog/ui/controlrenderer.js","node_modules/closure-builder/third_party/closure-library/closure/goog/ui/registry.js","node_modules/closure-builder/third_party/closure-library/closure/goog/ui/control.js","node_modules/closure-builder/third_party/closure-library/closure/goog/ui/textarearenderer.js","node_modules/closure-builder/third_party/closure-library/closure/goog/ui/textarea.js","node_modules/closure-builder/third_party/closure-library/closure/goog/i18n/uchar.js","node_modules/closure-builder/third_party/closure-library/closure/goog/structs/inversionmap.js","node_modules/closure-builder/third_party/closure-library/closure/goog/i18n/graphemebreak.js","node_modules/closure-builder/third_party/closure-library/closure/goog/format/format.js","node_modules/closure-builder/third_party/closure-library/closure/goog/i18n/bidiformatter.js","node_modules/closure-builder/third_party/closure-templates/javascript/soyutils_usegoog.js","temp/closure-builder-1t4xnvr/templates/core_elements.soy.js","src/editor.js","src/hint.js","src/popup.js","src/mediatypes/annotator.js","src/mediatypes/image/image.viewer.js","src/events.ui.js","src/selection/rect_drag_selector.js","temp/closure-builder-1t4xnvr/templates/image_elements.soy.js","src/mediatypes/image/image.annotator.js","src/mediatypes/image/image.module.js","temp/closure-builder-1t4xnvr/templates/openlayers_elements.soy.js","node_modules/closure-builder/third_party/closure-library/closure/goog/events/mousewheelhandler.js","src/mediatypes/openlayers/openlayers.viewer.js","src/mediatypes/openlayers/openlayers.annotator.js","src/mediatypes/openlayers/openlayers.module.js","src/mediatypes/openseadragon/openseadragon.viewer.js","src/mediatypes/openseadragon/openseadragon.annotator.js","src/mediatypes/openseadragon/openseadragon.module.js","src/annotorious.js"],
"sourcesContent":["/*\n * Copyright 2012 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @fileoverview The base namespace for code injected by the compiler\n * at compile-time.\n *\n * @author nicksantos@google.com (Nick Santos)\n */\n\n/** @const */\nvar $jscomp = $jscomp || {};\n\n/** @const Locals for goog.scope */\n$jscomp.scope = {};\n","/*\n * Copyright 2017 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require base';\n\n\n/**\n * Whether to assume ES5 is available.  This enables removing several\n * internal polyfills, which must otherwise be detected at runtime.\n * @define {boolean}\n */\n$jscomp.ASSUME_ES5 = false;\n\n/**\n * Whether to skip the conformance check and simply use the polyfill always.\n * @define {boolean}\n */\n$jscomp.ASSUME_NO_NATIVE_MAP = false;\n\n/**\n * Whether to skip the conformance check and simply use the polyfill always.\n * @define {boolean}\n */\n$jscomp.ASSUME_NO_NATIVE_SET = false;\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Provides methods to polyfill native objects.\n * @suppress {reportUnknownTypes}\n */\n'require util/defines';\n\n\n/**\n * Polyfill for Object.defineProperty() method:\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty\n *\n * Refuses to define properties on Array.prototype and Object.prototype,\n * since we can't make them non-enumerable and this messes up peoples' for\n * loops.  Beyond this, we simply assign values and not worry\n * about enumerability or writeability.\n * @param {?} target\n * @param {string} property\n * @param {?} descriptor\n * @suppress {reportUnknownTypes}\n */\n$jscomp.defineProperty =\n    $jscomp.ASSUME_ES5 || typeof Object.defineProperties == 'function' ?\n    Object.defineProperty :\n    function(target, property, descriptor) {\n      descriptor = /** @type {!ObjectPropertyDescriptor} */ (descriptor);\n      // NOTE: This is currently never called with a descriptor outside\n      // the control of the compiler.  If we ever decide to polyfill either\n      // Object.defineProperty or Reflect.defineProperty for ES3, we should\n      // explicitly check for `get` or `set` on the descriptor and throw a\n      // TypeError, since it's impossible to properly polyfill it.\n      if (target == Array.prototype || target == Object.prototype) return;\n      target[property] = descriptor.value;\n    };\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Runtime code to store the global object.\n */\n'require base';\n'declare global';\n'declare window';\n\n\n/**\n * @param {!Object} maybeGlobal\n * @return {!Object} The global object.\n * @suppress {undefinedVars|reportUnknownTypes}\n */\n$jscomp.getGlobal = function(maybeGlobal) {\n  return (typeof window != 'undefined' && window === maybeGlobal) ?\n      maybeGlobal :\n      (typeof global != 'undefined' && global != null) ? global : maybeGlobal;\n};\n\n\n// TODO(sdh): This should be typed as \"the global object\", but there's not\n// currently any way to do this in the existing type system.\n/**\n * The global object. For browsers we could just use `this` but in Node that\n * doesn't work.\n * @const {?}\n */\n$jscomp.global = $jscomp.getGlobal(this);\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require util/defineproperty';\n'require util/global';\n\n/** @const {string} */\n$jscomp.SYMBOL_PREFIX = 'jscomp_symbol_';\n\n\n/**\n * Initializes the Symbol function.\n * @suppress {reportUnknownTypes}\n */\n$jscomp.initSymbol = function() {\n  // Only need to do this once. All future calls are no-ops.\n  $jscomp.initSymbol = function() {};\n\n  if (!$jscomp.global['Symbol']) {\n    $jscomp.global['Symbol'] = $jscomp.Symbol;\n  }\n};\n\n\n/**\n * Produces \"symbols\" (actually just unique strings).\n * @param {string=} opt_description\n * @return {symbol}\n */\n$jscomp.Symbol = /** @type {function(): !Function} */ (function() {\n  var counter = 0;\n  /**\n   * @param {string=} opt_description\n   * @return {symbol}\n   * @suppress {reportUnknownTypes}\n   */\n  function Symbol(opt_description) {\n    return /** @type {?} */ (\n        $jscomp.SYMBOL_PREFIX + (opt_description || '') + (counter++));\n  }\n  return Symbol;\n})();\n\n\n/**\n * Initializes Symbol.iterator (if it's not already defined) and adds a\n * Symbol.iterator property to the Array prototype.\n * @suppress {reportUnknownTypes}\n */\n$jscomp.initSymbolIterator = function() {\n  $jscomp.initSymbol();\n  var symbolIterator = $jscomp.global['Symbol'].iterator;\n  if (!symbolIterator) {\n    symbolIterator = $jscomp.global['Symbol'].iterator =\n        $jscomp.global['Symbol']('iterator');\n  }\n\n  if (typeof Array.prototype[symbolIterator] != 'function') {\n    $jscomp.defineProperty(\n        Array.prototype, symbolIterator, {\n          configurable: true,\n          writable: true,\n          /**\n           * @this {Array}\n           * @return {!IteratorIterable}\n           */\n          value: function() {\n            return $jscomp.arrayIterator(this);\n          }\n        });\n  }\n\n  // Only need to do this once. All future calls are no-ops.\n  $jscomp.initSymbolIterator = function() {};\n};\n\n\n/**\n * Returns an iterator from the given array.\n * @param {!Array<T>} array\n * @return {!IteratorIterable<T>}\n * @template T\n */\n$jscomp.arrayIterator = function(array) {\n  var index = 0;\n  return $jscomp.iteratorPrototype(function() {\n    if (index < array.length) {\n      return {\n        done: false,\n        value: array[index++],\n      };\n    } else {\n      return {done: true};\n    }\n  });\n};\n\n\n/**\n * Returns an iterator with the given `next` method.  Passing\n * all iterators through this function allows easily extending\n * the definition of `%IteratorPrototype%` if methods are ever\n * added to it in the future.\n *\n * @param {function(this: Iterator<T>): T} next\n * @return {!IteratorIterable<T>}\n * @template T\n * @suppress {reportUnknownTypes}\n */\n$jscomp.iteratorPrototype = function(next) {\n  $jscomp.initSymbolIterator();\n\n  var iterator = {next: next};\n  /**\n   * @this {IteratorIterable}\n   * @return {!IteratorIterable}\n   */\n  iterator[$jscomp.global['Symbol'].iterator] = function() { return this; };\n  return /** @type {!IteratorIterable} */ (iterator);\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Utilities for iterator-returning methods.\n */\n'require es6/symbol';\n\n\n/**\n * Creates an iterator from an array-like, with a transformation function.\n * @param {!IArrayLike<INPUT>} array\n * @param {function(number, INPUT): OUTPUT} transform\n * @return {!IteratorIterable<OUTPUT>}\n * @template INPUT, OUTPUT\n * @suppress {checkTypes|reportUnknownTypes}\n */\n$jscomp.iteratorFromArray = function(array, transform) {\n  $jscomp.initSymbolIterator();\n  // NOTE: IE8 doesn't support indexing from boxed Strings.\n  if (array instanceof String) array = array + '';\n  var i = 0;\n  var iter = {\n    next: function() {\n      if (i < array.length) {\n        var index = i++;\n        return {value: transform(index, array[index]), done: false};\n      }\n      iter.next = function() { return {done: true, value: void 0}; };\n      return iter.next();\n    }\n  };\n  iter[Symbol.iterator] = function() { return iter; };\n  return iter;\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview Provides methods to polyfill native objects.\n */\n'require util/defineproperty';\n'require util/global';\n\n\n/**\n * @param {string} target Qualified name of the class or method to polyfill,\n *     e.g. 'Array.prototype.includes' or 'Map'.\n * @param {?function(*): *} polyfill A function that takes the current browser\n *     implementation of the target and returns an optional new polyfill\n *     implementation.  If null is returned, then no polyfill will be added.  A\n *     null argument for this parameter indicates that the function will not be\n *     polyfilled, and is only useful for `build_polyfill_table.js` bookkeeping.\n * @param {string} fromLang The language level in which the target is expected\n *     to already be present in the browser.  The compiler requires that\n *     `languageOut < fromLang` before injecting a polyfill (i.e. if the\n *     specified output language already includes the feature then there's no\n *     need to polyfill it).\n * @param {string} toLang The language level required by the polyfill\n *     implementation.  The compiler will issue an error if a polyfill is\n *     required, but `languageOut < toLang`.  Additionally, the\n *     `build_polyfill_table.js` script audits the polyfill dependency tree to\n *     ensure that no polyfill with a lower `toLang` depends on one with a\n *     higher `toLang`.\n * @suppress {reportUnknownTypes}\n * @noinline\n * NOTE: We prevent inlining so RemoveUnusedPolyfills can always recognize this\n * call.\n */\n$jscomp.polyfill = function(target, polyfill, fromLang, toLang) {\n  if (!polyfill) return;\n  var obj = $jscomp.global;\n  var split = target.split('.');\n  for (var i = 0; i < split.length - 1; i++) {\n    var key = split[i];\n    if (!(key in obj)) obj[key] = {};  // Might want to be defineProperty.\n    obj = obj[key];\n  }\n  var property = split[split.length - 1];\n  var orig = obj[property];\n  var impl = polyfill(orig);\n  if (impl == orig || impl == null) return;\n  $jscomp.defineProperty(\n      obj, property, {configurable: true, writable: true, value: impl});\n};\n","/*\n * Copyright 2016 The Closure Compiler Authors.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n'require es6/util/iteratorfromarray';\n'require util/polyfill';\n\n// NOTE: Although Array.prototype.values was added to the 2015 edition of the\n// spec, we consider it an \"ES8\" feature because many browsers which are\n// otherwise ES6-compatible, have not implemented it due to web compatibility\n// issues. See https://bugs.chromium.org/p/chromium/issues/detail?id=615873\n$jscomp.polyfill('Array.prototype.values', function(orig) {\n  if (orig) return orig;\n\n  /**\n   * Returns an iterator of values of the given array.\n   *\n   * @this {!IArrayLike<VALUE>}\n   * @return {!IteratorIterable<VALUE>}\n   * @template VALUE\n   * @suppress {reportUnknownTypes}\n   */\n  var polyfill = function() {\n    return $jscomp.iteratorFromArray(this, function(k, v) { return v; });\n  };\n\n  return polyfill;\n}, 'es8', 'es3');\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Bootstrap for the Google JS Library (Closure).\n *\n * In uncompiled mode base.js will attempt to load Closure's deps file, unless\n * the global <code>CLOSURE_NO_DEPS</code> is set to true.  This allows projects\n * to include their own deps file(s) from different locations.\n *\n * Avoid including base.js more than once. This is strictly discouraged and not\n * supported. goog.require(...) won't work properly in that case.\n *\n * @provideGoog\n */\n\n\n/**\n * @define {boolean} Overridden to true by the compiler.\n */\nvar COMPILED = false;\n\n\n/**\n * Base namespace for the Closure library.  Checks to see goog is already\n * defined in the current scope before assigning to prevent clobbering if\n * base.js is loaded more than once.\n *\n * @const\n */\nvar goog = goog || {};\n\n/**\n * Reference to the global context.  In most cases this will be 'window'.\n * @const\n * @suppress {newCheckTypes}\n */\ngoog.global = this;\n\n\n/**\n * A hook for overriding the define values in uncompiled mode.\n *\n * In uncompiled mode, `CLOSURE_UNCOMPILED_DEFINES` may be defined before\n * loading base.js.  If a key is defined in `CLOSURE_UNCOMPILED_DEFINES`,\n * `goog.define` will use the value instead of the default value.  This\n * allows flags to be overwritten without compilation (this is normally\n * accomplished with the compiler's \"define\" flag).\n *\n * Example:\n * <pre>\n *   var CLOSURE_UNCOMPILED_DEFINES = {'goog.DEBUG': false};\n * </pre>\n *\n * @type {Object<string, (string|number|boolean)>|undefined}\n */\ngoog.global.CLOSURE_UNCOMPILED_DEFINES;\n\n\n/**\n * A hook for overriding the define values in uncompiled or compiled mode,\n * like CLOSURE_UNCOMPILED_DEFINES but effective in compiled code.  In\n * uncompiled code CLOSURE_UNCOMPILED_DEFINES takes precedence.\n *\n * Also unlike CLOSURE_UNCOMPILED_DEFINES the values must be number, boolean or\n * string literals or the compiler will emit an error.\n *\n * While any @define value may be set, only those set with goog.define will be\n * effective for uncompiled code.\n *\n * Example:\n * <pre>\n *   var CLOSURE_DEFINES = {'goog.DEBUG': false} ;\n * </pre>\n *\n * @type {Object<string, (string|number|boolean)>|undefined}\n */\ngoog.global.CLOSURE_DEFINES;\n\n\n/**\n * Returns true if the specified value is not undefined.\n *\n * @param {?} val Variable to test.\n * @return {boolean} Whether variable is defined.\n */\ngoog.isDef = function(val) {\n  // void 0 always evaluates to undefined and hence we do not need to depend on\n  // the definition of the global variable named 'undefined'.\n  return val !== void 0;\n};\n\n/**\n * Returns true if the specified value is a string.\n * @param {?} val Variable to test.\n * @return {boolean} Whether variable is a string.\n */\ngoog.isString = function(val) {\n  return typeof val == 'string';\n};\n\n\n/**\n * Returns true if the specified value is a boolean.\n * @param {?} val Variable to test.\n * @return {boolean} Whether variable is boolean.\n */\ngoog.isBoolean = function(val) {\n  return typeof val == 'boolean';\n};\n\n\n/**\n * Returns true if the specified value is a number.\n * @param {?} val Variable to test.\n * @return {boolean} Whether variable is a number.\n */\ngoog.isNumber = function(val) {\n  return typeof val == 'number';\n};\n\n\n/**\n * Builds an object structure for the provided namespace path, ensuring that\n * names that already exist are not overwritten. For example:\n * \"a.b.c\" -> a = {};a.b={};a.b.c={};\n * Used by goog.provide and goog.exportSymbol.\n * @param {string} name name of the object that this file defines.\n * @param {*=} opt_object the object to expose at the end of the path.\n * @param {Object=} opt_objectToExportTo The object to add the path to; default\n *     is `goog.global`.\n * @private\n */\ngoog.exportPath_ = function(name, opt_object, opt_objectToExportTo) {\n  var parts = name.split('.');\n  var cur = opt_objectToExportTo || goog.global;\n\n  // Internet Explorer exhibits strange behavior when throwing errors from\n  // methods externed in this manner.  See the testExportSymbolExceptions in\n  // base_test.html for an example.\n  if (!(parts[0] in cur) && typeof cur.execScript != 'undefined') {\n    cur.execScript('var ' + parts[0]);\n  }\n\n  for (var part; parts.length && (part = parts.shift());) {\n    if (!parts.length && goog.isDef(opt_object)) {\n      // last part and we have an object; use it\n      cur[part] = opt_object;\n    } else if (cur[part] && cur[part] !== Object.prototype[part]) {\n      cur = cur[part];\n    } else {\n      cur = cur[part] = {};\n    }\n  }\n};\n\n\n/**\n * Defines a named value. In uncompiled mode, the value is retrieved from\n * CLOSURE_DEFINES or CLOSURE_UNCOMPILED_DEFINES if the object is defined and\n * has the property specified, and otherwise used the defined defaultValue.\n * When compiled the default can be overridden using the compiler\n * options or the value set in the CLOSURE_DEFINES object.\n *\n * @param {string} name The distinguished name to provide.\n * @param {string|number|boolean} defaultValue\n */\ngoog.define = function(name, defaultValue) {\n  var value = defaultValue;\n  if (!COMPILED) {\n    var uncompiledDefines = goog.global.CLOSURE_UNCOMPILED_DEFINES;\n    var defines = goog.global.CLOSURE_DEFINES;\n    if (uncompiledDefines &&\n        // Anti DOM-clobbering runtime check (b/37736576).\n        /** @type {?} */ (uncompiledDefines).nodeType === undefined &&\n        Object.prototype.hasOwnProperty.call(uncompiledDefines, name)) {\n      value = uncompiledDefines[name];\n    } else if (\n        defines &&\n        // Anti DOM-clobbering runtime check (b/37736576).\n        /** @type {?} */ (defines).nodeType === undefined &&\n        Object.prototype.hasOwnProperty.call(defines, name)) {\n      value = defines[name];\n    }\n  }\n  goog.exportPath_(name, value);\n};\n\n\n/**\n * @define {boolean} DEBUG is provided as a convenience so that debugging code\n * that should not be included in a production. It can be easily stripped\n * by specifying --define goog.DEBUG=false to the Closure Compiler aka\n * JSCompiler. For example, most toString() methods should be declared inside an\n * \"if (goog.DEBUG)\" conditional because they are generally used for debugging\n * purposes and it is difficult for the JSCompiler to statically determine\n * whether they are used.\n */\ngoog.define('goog.DEBUG', true);\n\n\n/**\n * @define {string} LOCALE defines the locale being used for compilation. It is\n * used to select locale specific data to be compiled in js binary. BUILD rule\n * can specify this value by \"--define goog.LOCALE=<locale_name>\" as a compiler\n * option.\n *\n * Take into account that the locale code format is important. You should use\n * the canonical Unicode format with hyphen as a delimiter. Language must be\n * lowercase, Language Script - Capitalized, Region - UPPERCASE.\n * There are few examples: pt-BR, en, en-US, sr-Latin-BO, zh-Hans-CN.\n *\n * See more info about locale codes here:\n * http://www.unicode.org/reports/tr35/#Unicode_Language_and_Locale_Identifiers\n *\n * For language codes you should use values defined by ISO 693-1. See it here\n * http://www.w3.org/WAI/ER/IG/ert/iso639.htm. There is only one exception from\n * this rule: the Hebrew language. For legacy reasons the old code (iw) should\n * be used instead of the new code (he).\n *\n */\ngoog.define('goog.LOCALE', 'en');  // default to en\n\n\n/**\n * @define {boolean} Whether this code is running on trusted sites.\n *\n * On untrusted sites, several native functions can be defined or overridden by\n * external libraries like Prototype, Datejs, and JQuery and setting this flag\n * to false forces closure to use its own implementations when possible.\n *\n * If your JavaScript can be loaded by a third party site and you are wary about\n * relying on non-standard implementations, specify\n * \"--define goog.TRUSTED_SITE=false\" to the compiler.\n */\ngoog.define('goog.TRUSTED_SITE', true);\n\n\n/**\n * @define {boolean} Whether a project is expected to be running in strict mode.\n *\n * This define can be used to trigger alternate implementations compatible with\n * running in EcmaScript Strict mode or warn about unavailable functionality.\n * @see https://goo.gl/PudQ4y\n *\n */\ngoog.define('goog.STRICT_MODE_COMPATIBLE', false);\n\n\n/**\n * @define {boolean} Whether code that calls {@link goog.setTestOnly} should\n *     be disallowed in the compilation unit.\n */\ngoog.define('goog.DISALLOW_TEST_ONLY_CODE', COMPILED && !goog.DEBUG);\n\n\n/**\n * @define {boolean} Whether to use a Chrome app CSP-compliant method for\n *     loading scripts via goog.require. @see appendScriptSrcNode_.\n */\ngoog.define('goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING', false);\n\n\n/**\n * Defines a namespace in Closure.\n *\n * A namespace may only be defined once in a codebase. It may be defined using\n * goog.provide() or goog.module().\n *\n * The presence of one or more goog.provide() calls in a file indicates\n * that the file defines the given objects/namespaces.\n * Provided symbols must not be null or undefined.\n *\n * In addition, goog.provide() creates the object stubs for a namespace\n * (for example, goog.provide(\"goog.foo.bar\") will create the object\n * goog.foo.bar if it does not already exist).\n *\n * Build tools also scan for provide/require/module statements\n * to discern dependencies, build dependency files (see deps.js), etc.\n *\n * @see goog.require\n * @see goog.module\n * @param {string} name Namespace provided by this file in the form\n *     \"goog.package.part\".\n */\ngoog.provide = function(name) {\n  if (goog.isInModuleLoader_()) {\n    throw new Error('goog.provide cannot be used within a module.');\n  }\n  if (!COMPILED) {\n    // Ensure that the same namespace isn't provided twice.\n    // A goog.module/goog.provide maps a goog.require to a specific file\n    if (goog.isProvided_(name)) {\n      throw new Error('Namespace \"' + name + '\" already declared.');\n    }\n  }\n\n  goog.constructNamespace_(name);\n};\n\n\n/**\n * @param {string} name Namespace provided by this file in the form\n *     \"goog.package.part\".\n * @param {Object=} opt_obj The object to embed in the namespace.\n * @private\n */\ngoog.constructNamespace_ = function(name, opt_obj) {\n  if (!COMPILED) {\n    delete goog.implicitNamespaces_[name];\n\n    var namespace = name;\n    while ((namespace = namespace.substring(0, namespace.lastIndexOf('.')))) {\n      if (goog.getObjectByName(namespace)) {\n        break;\n      }\n      goog.implicitNamespaces_[namespace] = true;\n    }\n  }\n\n  goog.exportPath_(name, opt_obj);\n};\n\n\n/**\n * Returns CSP nonce, if set for any script tag.\n * @return {string} CSP nonce or empty string if no nonce is present.\n */\ngoog.getScriptNonce = function() {\n  if (goog.cspNonce_ === null) {\n    goog.cspNonce_ = goog.getScriptNonce_(goog.global.document) || '';\n  }\n  return goog.cspNonce_;\n};\n\n\n/**\n * According to the CSP3 spec a nonce must be a valid base64 string.\n * @see https://www.w3.org/TR/CSP3/#grammardef-base64-value\n * @private @const\n */\ngoog.NONCE_PATTERN_ = /^[\\w+/_-]+[=]{0,2}$/;\n\n\n/**\n * @private {?string}\n */\ngoog.cspNonce_ = null;\n\n\n/**\n * Returns CSP nonce, if set for any script tag.\n * @param {!Document} doc\n * @return {?string} CSP nonce or null if no nonce is present.\n * @private\n */\ngoog.getScriptNonce_ = function(doc) {\n  var script = doc.querySelector('script[nonce]');\n  if (script) {\n    // Try to get the nonce from the IDL property first, because browsers that\n    // implement additional nonce protection features (currently only Chrome) to\n    // prevent nonce stealing via CSS do not expose the nonce via attributes.\n    // See https://github.com/whatwg/html/issues/2369\n    var nonce = script['nonce'] || script.getAttribute('nonce');\n    if (nonce && goog.NONCE_PATTERN_.test(nonce)) {\n      return nonce;\n    }\n  }\n  return null;\n};\n\n\n/**\n * Module identifier validation regexp.\n * Note: This is a conservative check, it is very possible to be more lenient,\n *   the primary exclusion here is \"/\" and \"\\\" and a leading \".\", these\n *   restrictions are intended to leave the door open for using goog.require\n *   with relative file paths rather than module identifiers.\n * @private\n */\ngoog.VALID_MODULE_RE_ = /^[a-zA-Z_$][a-zA-Z0-9._$]*$/;\n\n\n/**\n * Defines a module in Closure.\n *\n * Marks that this file must be loaded as a module and claims the namespace.\n *\n * A namespace may only be defined once in a codebase. It may be defined using\n * goog.provide() or goog.module().\n *\n * goog.module() has three requirements:\n * - goog.module may not be used in the same file as goog.provide.\n * - goog.module must be the first statement in the file.\n * - only one goog.module is allowed per file.\n *\n * When a goog.module annotated file is loaded, it is enclosed in\n * a strict function closure. This means that:\n * - any variables declared in a goog.module file are private to the file\n * (not global), though the compiler is expected to inline the module.\n * - The code must obey all the rules of \"strict\" JavaScript.\n * - the file will be marked as \"use strict\"\n *\n * NOTE: unlike goog.provide, goog.module does not declare any symbols by\n * itself. If declared symbols are desired, use\n * goog.module.declareLegacyNamespace().\n *\n *\n * See the public goog.module proposal: http://goo.gl/Va1hin\n *\n * @param {string} name Namespace provided by this file in the form\n *     \"goog.package.part\", is expected but not required.\n * @return {void}\n */\ngoog.module = function(name) {\n  if (!goog.isString(name) || !name ||\n      name.search(goog.VALID_MODULE_RE_) == -1) {\n    throw new Error('Invalid module identifier');\n  }\n  if (!goog.isInGoogModuleLoader_()) {\n    throw new Error(\n        'Module ' + name + ' has been loaded incorrectly. Note, ' +\n        'modules cannot be loaded as normal scripts. They require some kind of ' +\n        'pre-processing step. You\\'re likely trying to load a module via a ' +\n        'script tag or as a part of a concatenated bundle without rewriting the ' +\n        'module. For more info see: ' +\n        'https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.');\n  }\n  if (goog.moduleLoaderState_.moduleName) {\n    throw new Error('goog.module may only be called once per module.');\n  }\n\n  // Store the module name for the loader.\n  goog.moduleLoaderState_.moduleName = name;\n  if (!COMPILED) {\n    // Ensure that the same namespace isn't provided twice.\n    // A goog.module/goog.provide maps a goog.require to a specific file\n    if (goog.isProvided_(name)) {\n      throw new Error('Namespace \"' + name + '\" already declared.');\n    }\n    delete goog.implicitNamespaces_[name];\n  }\n};\n\n\n/**\n * @param {string} name The module identifier.\n * @return {?} The module exports for an already loaded module or null.\n *\n * Note: This is not an alternative to goog.require, it does not\n * indicate a hard dependency, instead it is used to indicate\n * an optional dependency or to access the exports of a module\n * that has already been loaded.\n * @suppress {missingProvide}\n */\ngoog.module.get = function(name) {\n\n  return goog.module.getInternal_(name);\n};\n\n\n/**\n * @param {string} name The module identifier.\n * @return {?} The module exports for an already loaded module or null.\n * @private\n */\ngoog.module.getInternal_ = function(name) {\n  if (!COMPILED) {\n    if (name in goog.loadedModules_) {\n      return goog.loadedModules_[name].exports;\n    } else if (!goog.implicitNamespaces_[name]) {\n      var ns = goog.getObjectByName(name);\n      return ns != null ? ns : null;\n    }\n  }\n  return null;\n};\n\n\n/**\n * Types of modules the debug loader can load.\n * @enum {string}\n */\ngoog.ModuleType = {\n  ES6: 'es6',\n  GOOG: 'goog'\n};\n\n\n/**\n * @private {?{\n *   moduleName: (string|undefined),\n *   declareLegacyNamespace:boolean,\n *   type: goog.ModuleType\n * }}\n */\ngoog.moduleLoaderState_ = null;\n\n\n/**\n * @private\n * @return {boolean} Whether a is currently being initialized.\n */\ngoog.isInModuleLoader_ = function() {\n  return goog.isInGoogModuleLoader_() || goog.isInEs6ModuleLoader_();\n};\n\n\n/**\n * @private\n * @return {boolean} Whether a goog.module is currently being initialized.\n */\ngoog.isInGoogModuleLoader_ = function() {\n  return !!goog.moduleLoaderState_ &&\n      goog.moduleLoaderState_.type == goog.ModuleType.GOOG;\n};\n\n\n/**\n * @private\n * @return {boolean} Whether an es6 module is currently being initialized.\n */\ngoog.isInEs6ModuleLoader_ = function() {\n  var inLoader = !!goog.moduleLoaderState_ &&\n      goog.moduleLoaderState_.type == goog.ModuleType.ES6;\n\n  if (inLoader) {\n    return true;\n  }\n\n  var jscomp = goog.global['$jscomp'];\n\n  if (jscomp) {\n    // jscomp may not have getCurrentModulePath if this is a compiled bundle\n    // that has some of the runtime, but not all of it. This can happen if\n    // optimizations are turned on so the unused runtime is removed but renaming\n    // and Closure pass are off (so $jscomp is still named $jscomp and the\n    // goog.provide/require calls still exist).\n    if (typeof jscomp.getCurrentModulePath != 'function') {\n      return false;\n    }\n\n    // Bundled ES6 module.\n    return !!jscomp.getCurrentModulePath();\n  }\n\n  return false;\n};\n\n\n/**\n * Provide the module's exports as a globally accessible object under the\n * module's declared name.  This is intended to ease migration to goog.module\n * for files that have existing usages.\n * @suppress {missingProvide}\n */\ngoog.module.declareLegacyNamespace = function() {\n  if (!COMPILED && !goog.isInGoogModuleLoader_()) {\n    throw new Error(\n        'goog.module.declareLegacyNamespace must be called from ' +\n        'within a goog.module');\n  }\n  if (!COMPILED && !goog.moduleLoaderState_.moduleName) {\n    throw new Error(\n        'goog.module must be called prior to ' +\n        'goog.module.declareLegacyNamespace.');\n  }\n  goog.moduleLoaderState_.declareLegacyNamespace = true;\n};\n\n\n/**\n * Associate an ES6 module with a Closure namespace so that is available via\n * goog.require. This associates a namespace that acts like a goog.module - it\n * does not create any global names, it is merely available via goog.require.\n * goog.require will return the entire module as if it was import *'d. This\n * allows Closure files to reference ES6 modules.\n *\n * @param {string} namespace\n * @suppress {missingProvide}\n */\ngoog.module.declareNamespace = function(namespace) {\n  if (!COMPILED) {\n    if (!goog.isInEs6ModuleLoader_()) {\n      throw new Error(\n          'goog.module.declareNamespace may only be called from ' +\n          'within an ES6 module');\n    }\n    if (goog.moduleLoaderState_ && goog.moduleLoaderState_.moduleName) {\n      throw new Error(\n          'goog.module.declareNamespace may only be called once per module.');\n    }\n    if (namespace in goog.loadedModules_) {\n      throw new Error(\n          'Module with namespace \"' + namespace + '\" already exists.');\n    }\n  }\n  if (goog.moduleLoaderState_) {\n    // Not bundled - debug loading.\n    goog.moduleLoaderState_.moduleName = namespace;\n  } else {\n    // Bundled - not debug loading, no module loader state.\n    var jscomp = goog.global['$jscomp'];\n    if (!jscomp || typeof jscomp.getCurrentModulePath != 'function') {\n      throw new Error(\n          'Module with namespace \"' + namespace +\n          '\" has been loaded incorrectly.');\n    }\n    var exports = jscomp.require(jscomp.getCurrentModulePath());\n    goog.loadedModules_[namespace] = {\n      exports: exports,\n      type: goog.ModuleType.ES6,\n      moduleId: namespace\n    };\n  }\n};\n\n\n/**\n * Marks that the current file should only be used for testing, and never for\n * live code in production.\n *\n * In the case of unit tests, the message may optionally be an exact namespace\n * for the test (e.g. 'goog.stringTest'). The linter will then ignore the extra\n * provide (if not explicitly defined in the code).\n *\n * @param {string=} opt_message Optional message to add to the error that's\n *     raised when used in production code.\n */\ngoog.setTestOnly = function(opt_message) {\n  if (goog.DISALLOW_TEST_ONLY_CODE) {\n    opt_message = opt_message || '';\n    throw new Error(\n        'Importing test-only code into non-debug environment' +\n        (opt_message ? ': ' + opt_message : '.'));\n  }\n};\n\n\n/**\n * Forward declares a symbol. This is an indication to the compiler that the\n * symbol may be used in the source yet is not required and may not be provided\n * in compilation.\n *\n * The most common usage of forward declaration is code that takes a type as a\n * function parameter but does not need to require it. By forward declaring\n * instead of requiring, no hard dependency is made, and (if not required\n * elsewhere) the namespace may never be required and thus, not be pulled\n * into the JavaScript binary. If it is required elsewhere, it will be type\n * checked as normal.\n *\n * Before using goog.forwardDeclare, please read the documentation at\n * https://github.com/google/closure-compiler/wiki/Bad-Type-Annotation to\n * understand the options and tradeoffs when working with forward declarations.\n *\n * @param {string} name The namespace to forward declare in the form of\n *     \"goog.package.part\".\n */\ngoog.forwardDeclare = function(name) {};\n\n\n/**\n * Forward declare type information. Used to assign types to goog.global\n * referenced object that would otherwise result in unknown type references\n * and thus block property disambiguation.\n */\ngoog.forwardDeclare('Document');\ngoog.forwardDeclare('HTMLScriptElement');\ngoog.forwardDeclare('XMLHttpRequest');\n\n\nif (!COMPILED) {\n  /**\n   * Check if the given name has been goog.provided. This will return false for\n   * names that are available only as implicit namespaces.\n   * @param {string} name name of the object to look for.\n   * @return {boolean} Whether the name has been provided.\n   * @private\n   */\n  goog.isProvided_ = function(name) {\n    return (name in goog.loadedModules_) ||\n        (!goog.implicitNamespaces_[name] &&\n         goog.isDefAndNotNull(goog.getObjectByName(name)));\n  };\n\n  /**\n   * Namespaces implicitly defined by goog.provide. For example,\n   * goog.provide('goog.events.Event') implicitly declares that 'goog' and\n   * 'goog.events' must be namespaces.\n   *\n   * @type {!Object<string, (boolean|undefined)>}\n   * @private\n   */\n  goog.implicitNamespaces_ = {'goog.module': true};\n\n  // NOTE: We add goog.module as an implicit namespace as goog.module is defined\n  // here and because the existing module package has not been moved yet out of\n  // the goog.module namespace. This satisifies both the debug loader and\n  // ahead-of-time dependency management.\n}\n\n\n/**\n * Returns an object based on its fully qualified external name.  The object\n * is not found if null or undefined.  If you are using a compilation pass that\n * renames property names beware that using this function will not find renamed\n * properties.\n *\n * @param {string} name The fully qualified name.\n * @param {Object=} opt_obj The object within which to look; default is\n *     |goog.global|.\n * @return {?} The value (object or primitive) or, if not found, null.\n */\ngoog.getObjectByName = function(name, opt_obj) {\n  var parts = name.split('.');\n  var cur = opt_obj || goog.global;\n  for (var i = 0; i < parts.length; i++) {\n    cur = cur[parts[i]];\n    if (!goog.isDefAndNotNull(cur)) {\n      return null;\n    }\n  }\n  return cur;\n};\n\n\n/**\n * Globalizes a whole namespace, such as goog or goog.lang.\n *\n * @param {!Object} obj The namespace to globalize.\n * @param {Object=} opt_global The object to add the properties to.\n * @deprecated Properties may be explicitly exported to the global scope, but\n *     this should no longer be done in bulk.\n */\ngoog.globalize = function(obj, opt_global) {\n  var global = opt_global || goog.global;\n  for (var x in obj) {\n    global[x] = obj[x];\n  }\n};\n\n\n/**\n * Adds a dependency from a file to the files it requires.\n * @param {string} relPath The path to the js file.\n * @param {!Array<string>} provides An array of strings with\n *     the names of the objects this file provides.\n * @param {!Array<string>} requires An array of strings with\n *     the names of the objects this file requires.\n * @param {boolean|!Object<string>=} opt_loadFlags Parameters indicating\n *     how the file must be loaded.  The boolean 'true' is equivalent\n *     to {'module': 'goog'} for backwards-compatibility.  Valid properties\n *     and values include {'module': 'goog'} and {'lang': 'es6'}.\n */\ngoog.addDependency = function(relPath, provides, requires, opt_loadFlags) {\n  if (!COMPILED && goog.DEPENDENCIES_ENABLED) {\n    goog.debugLoader_.addDependency(relPath, provides, requires, opt_loadFlags);\n  }\n};\n\n\n\n\n// NOTE(nnaze): The debug DOM loader was included in base.js as an original way\n// to do \"debug-mode\" development.  The dependency system can sometimes be\n// confusing, as can the debug DOM loader's asynchronous nature.\n//\n// With the DOM loader, a call to goog.require() is not blocking -- the script\n// will not load until some point after the current script.  If a namespace is\n// needed at runtime, it needs to be defined in a previous script, or loaded via\n// require() with its registered dependencies.\n//\n// User-defined namespaces may need their own deps file. For a reference on\n// creating a deps file, see:\n// Externally: https://developers.google.com/closure/library/docs/depswriter\n//\n// Because of legacy clients, the DOM loader can't be easily removed from\n// base.js.  Work was done to make it disableable or replaceable for\n// different environments (DOM-less JavaScript interpreters like Rhino or V8,\n// for example). See bootstrap/ for more information.\n\n\n/**\n * @define {boolean} Whether to enable the debug loader.\n *\n * If enabled, a call to goog.require() will attempt to load the namespace by\n * appending a script tag to the DOM (if the namespace has been registered).\n *\n * If disabled, goog.require() will simply assert that the namespace has been\n * provided (and depend on the fact that some outside tool correctly ordered\n * the script).\n */\ngoog.define('goog.ENABLE_DEBUG_LOADER', true);\n\n\n/**\n * @param {string} msg\n * @private\n */\ngoog.logToConsole_ = function(msg) {\n  if (goog.global.console) {\n    goog.global.console['error'](msg);\n  }\n};\n\n\n/**\n * Implements a system for the dynamic resolution of dependencies that works in\n * parallel with the BUILD system. Note that all calls to goog.require will be\n * stripped by the compiler.\n * @see goog.provide\n * @param {string} namespace Namespace (as was given in goog.provide,\n *     goog.module, or goog.module.declareNamespace) in the form\n * \"goog.package.part\".\n * @return {?} If called within a goog.module or ES6 module file, the associated\n *     namespace or module otherwise null.\n */\ngoog.require = function(namespace) {\n  if (!COMPILED) {\n    // Might need to lazy load on old IE.\n    if (goog.ENABLE_DEBUG_LOADER) {\n      goog.debugLoader_.requested(namespace);\n    }\n\n    // If the object already exists we do not need to do anything.\n    if (goog.isProvided_(namespace)) {\n      if (goog.isInModuleLoader_()) {\n        return goog.module.getInternal_(namespace);\n      }\n    } else if (goog.ENABLE_DEBUG_LOADER) {\n      var moduleLoaderState = goog.moduleLoaderState_;\n      goog.moduleLoaderState_ = null;\n      try {\n        goog.debugLoader_.load_(namespace);\n      } finally {\n        goog.moduleLoaderState_ = moduleLoaderState;\n      }\n    }\n\n    return null;\n  }\n};\n\n\n/**\n * Path for included scripts.\n * @type {string}\n */\ngoog.basePath = '';\n\n\n/**\n * A hook for overriding the base path.\n * @type {string|undefined}\n */\ngoog.global.CLOSURE_BASE_PATH;\n\n\n/**\n * Whether to attempt to load Closure's deps file. By default, when uncompiled,\n * deps files will attempt to be loaded.\n * @type {boolean|undefined}\n */\ngoog.global.CLOSURE_NO_DEPS;\n\n\n/**\n * A function to import a single script. This is meant to be overridden when\n * Closure is being run in non-HTML contexts, such as web workers. It's defined\n * in the global scope so that it can be set before base.js is loaded, which\n * allows deps.js to be imported properly.\n *\n * The first parameter the script source, which is a relative URI. The second,\n * optional parameter is the script contents, in the event the script needed\n * transformation. It should return true if the script was imported, false\n * otherwise.\n * @type {(function(string, string=): boolean)|undefined}\n */\ngoog.global.CLOSURE_IMPORT_SCRIPT;\n\n\n/**\n * Null function used for default values of callbacks, etc.\n * @return {void} Nothing.\n */\ngoog.nullFunction = function() {};\n\n\n/**\n * When defining a class Foo with an abstract method bar(), you can do:\n * Foo.prototype.bar = goog.abstractMethod\n *\n * Now if a subclass of Foo fails to override bar(), an error will be thrown\n * when bar() is invoked.\n *\n * @type {!Function}\n * @throws {Error} when invoked to indicate the method should be overridden.\n */\ngoog.abstractMethod = function() {\n  throw new Error('unimplemented abstract method');\n};\n\n\n/**\n * Adds a `getInstance` static method that always returns the same\n * instance object.\n * @param {!Function} ctor The constructor for the class to add the static\n *     method to.\n * @suppress {missingProperties} 'instance_' isn't a property on 'Function'\n *     but we don't have a better type to use here.\n */\ngoog.addSingletonGetter = function(ctor) {\n  // instance_ is immediately set to prevent issues with sealed constructors\n  // such as are encountered when a constructor is returned as the export object\n  // of a goog.module in unoptimized code.\n  ctor.instance_ = undefined;\n  ctor.getInstance = function() {\n    if (ctor.instance_) {\n      return ctor.instance_;\n    }\n    if (goog.DEBUG) {\n      // NOTE: JSCompiler can't optimize away Array#push.\n      goog.instantiatedSingletons_[goog.instantiatedSingletons_.length] = ctor;\n    }\n    return ctor.instance_ = new ctor;\n  };\n};\n\n\n/**\n * All singleton classes that have been instantiated, for testing. Don't read\n * it directly, use the `goog.testing.singleton` module. The compiler\n * removes this variable if unused.\n * @type {!Array<!Function>}\n * @private\n */\ngoog.instantiatedSingletons_ = [];\n\n\n/**\n * @define {boolean} Whether to load goog.modules using `eval` when using\n * the debug loader.  This provides a better debugging experience as the\n * source is unmodified and can be edited using Chrome Workspaces or similar.\n * However in some environments the use of `eval` is banned\n * so we provide an alternative.\n */\ngoog.define('goog.LOAD_MODULE_USING_EVAL', true);\n\n\n/**\n * @define {boolean} Whether the exports of goog.modules should be sealed when\n * possible.\n */\ngoog.define('goog.SEAL_MODULE_EXPORTS', goog.DEBUG);\n\n\n/**\n * The registry of initialized modules:\n * The module identifier or path to module exports map.\n * @private @const {!Object<string, {exports:?,type:string,moduleId:string}>}\n */\ngoog.loadedModules_ = {};\n\n\n/**\n * True if the debug loader enabled and used.\n * @const {boolean}\n */\ngoog.DEPENDENCIES_ENABLED = !COMPILED && goog.ENABLE_DEBUG_LOADER;\n\n\n/**\n * @define {string} How to decide whether to transpile.  Valid values\n * are 'always', 'never', and 'detect'.  The default ('detect') is to\n * use feature detection to determine which language levels need\n * transpilation.\n */\n// NOTE(sdh): we could expand this to accept a language level to bypass\n// detection: e.g. goog.TRANSPILE == 'es5' would transpile ES6 files but\n// would leave ES3 and ES5 files alone.\ngoog.define('goog.TRANSPILE', 'detect');\n\n\n/**\n * @define {string} Path to the transpiler.  Executing the script at this\n * path (relative to base.js) should define a function $jscomp.transpile.\n */\ngoog.define('goog.TRANSPILER', 'transpile.js');\n\n\n/**\n * @package {?boolean}\n * Visible for testing.\n */\ngoog.hasBadLetScoping = null;\n\n\n/**\n * @return {boolean}\n * @package Visible for testing.\n */\ngoog.useSafari10Workaround = function() {\n  if (goog.hasBadLetScoping == null) {\n    var hasBadLetScoping;\n    try {\n      hasBadLetScoping = !eval(\n          '\"use strict\";' +\n          'let x = 1; function f() { return typeof x; };' +\n          'f() == \"number\";');\n    } catch (e) {\n      // Assume that ES6 syntax isn't supported.\n      hasBadLetScoping = false;\n    }\n    goog.hasBadLetScoping = hasBadLetScoping;\n  }\n  return goog.hasBadLetScoping;\n};\n\n\n/**\n * @param {string} moduleDef\n * @return {string}\n * @package Visible for testing.\n */\ngoog.workaroundSafari10EvalBug = function(moduleDef) {\n  return '(function(){' + moduleDef +\n      '\\n' +  // Terminate any trailing single line comment.\n      ';' +   // Terminate any trailing expression.\n      '})();\\n';\n};\n\n\n/**\n * @param {function(?):?|string} moduleDef The module definition.\n */\ngoog.loadModule = function(moduleDef) {\n  // NOTE: we allow function definitions to be either in the from\n  // of a string to eval (which keeps the original source intact) or\n  // in a eval forbidden environment (CSP) we allow a function definition\n  // which in its body must call `goog.module`, and return the exports\n  // of the module.\n  var previousState = goog.moduleLoaderState_;\n  try {\n    goog.moduleLoaderState_ = {\n      moduleName: '',\n      declareLegacyNamespace: false,\n      type: goog.ModuleType.GOOG\n    };\n    var exports;\n    if (goog.isFunction(moduleDef)) {\n      exports = moduleDef.call(undefined, {});\n    } else if (goog.isString(moduleDef)) {\n      if (goog.useSafari10Workaround()) {\n        moduleDef = goog.workaroundSafari10EvalBug(moduleDef);\n      }\n\n      exports = goog.loadModuleFromSource_.call(undefined, moduleDef);\n    } else {\n      throw new Error('Invalid module definition');\n    }\n\n    var moduleName = goog.moduleLoaderState_.moduleName;\n    if (goog.isString(moduleName) && moduleName) {\n      // Don't seal legacy namespaces as they may be used as a parent of\n      // another namespace\n      if (goog.moduleLoaderState_.declareLegacyNamespace) {\n        goog.constructNamespace_(moduleName, exports);\n      } else if (\n          goog.SEAL_MODULE_EXPORTS && Object.seal &&\n          typeof exports == 'object' && exports != null) {\n        Object.seal(exports);\n      }\n\n      var data = {\n        exports: exports,\n        type: goog.ModuleType.GOOG,\n        moduleId: goog.moduleLoaderState_.moduleName\n      };\n      goog.loadedModules_[moduleName] = data;\n    } else {\n      throw new Error('Invalid module name \\\"' + moduleName + '\\\"');\n    }\n  } finally {\n    goog.moduleLoaderState_ = previousState;\n  }\n};\n\n\n/**\n * @private @const\n */\ngoog.loadModuleFromSource_ = /** @type {function(string):?} */ (function() {\n  // NOTE: we avoid declaring parameters or local variables here to avoid\n  // masking globals or leaking values into the module definition.\n  'use strict';\n  var exports = {};\n  eval(arguments[0]);\n  return exports;\n});\n\n\n/**\n * Normalize a file path by removing redundant \"..\" and extraneous \".\" file\n * path components.\n * @param {string} path\n * @return {string}\n * @private\n */\ngoog.normalizePath_ = function(path) {\n  var components = path.split('/');\n  var i = 0;\n  while (i < components.length) {\n    if (components[i] == '.') {\n      components.splice(i, 1);\n    } else if (\n        i && components[i] == '..' && components[i - 1] &&\n        components[i - 1] != '..') {\n      components.splice(--i, 2);\n    } else {\n      i++;\n    }\n  }\n  return components.join('/');\n};\n\n\n/**\n * Provides a hook for loading a file when using Closure's goog.require() API\n * with goog.modules.  In particular this hook is provided to support Node.js.\n *\n * @type {(function(string):string)|undefined}\n */\ngoog.global.CLOSURE_LOAD_FILE_SYNC;\n\n\n/**\n * Loads file by synchronous XHR. Should not be used in production environments.\n * @param {string} src Source URL.\n * @return {?string} File contents, or null if load failed.\n * @private\n */\ngoog.loadFileSync_ = function(src) {\n  if (goog.global.CLOSURE_LOAD_FILE_SYNC) {\n    return goog.global.CLOSURE_LOAD_FILE_SYNC(src);\n  } else {\n    try {\n      /** @type {XMLHttpRequest} */\n      var xhr = new goog.global['XMLHttpRequest']();\n      xhr.open('get', src, false);\n      xhr.send();\n      // NOTE: Successful http: requests have a status of 200, but successful\n      // file: requests may have a status of zero.  Any other status, or a\n      // thrown exception (particularly in case of file: requests) indicates\n      // some sort of error, which we treat as a missing or unavailable file.\n      return xhr.status == 0 || xhr.status == 200 ? xhr.responseText : null;\n    } catch (err) {\n      // No need to rethrow or log, since errors should show up on their own.\n      return null;\n    }\n  }\n};\n\n\n/**\n * Lazily retrieves the transpiler and applies it to the source.\n * @param {string} code JS code.\n * @param {string} path Path to the code.\n * @return {string} The transpiled code.\n * @private\n */\ngoog.transpile_ = function(code, path) {\n  var jscomp = goog.global['$jscomp'];\n  if (!jscomp) {\n    goog.global['$jscomp'] = jscomp = {};\n  }\n  var transpile = jscomp.transpile;\n  if (!transpile) {\n    var transpilerPath = goog.basePath + goog.TRANSPILER;\n    var transpilerCode = goog.loadFileSync_(transpilerPath);\n    if (transpilerCode) {\n      // This must be executed synchronously, since by the time we know we\n      // need it, we're about to load and write the ES6 code synchronously,\n      // so a normal script-tag load will be too slow. Wrapped in a function\n      // so that code is eval'd in the global scope.\n      (function() {\n        eval(transpilerCode + '\\n//# sourceURL=' + transpilerPath);\n      }).call(goog.global);\n      // Even though the transpiler is optional, if $gwtExport is found, it's\n      // a sign the transpiler was loaded and the $jscomp.transpile *should*\n      // be there.\n      if (goog.global['$gwtExport'] && goog.global['$gwtExport']['$jscomp'] &&\n          !goog.global['$gwtExport']['$jscomp']['transpile']) {\n        throw new Error(\n            'The transpiler did not properly export the \"transpile\" ' +\n            'method. $gwtExport: ' + JSON.stringify(goog.global['$gwtExport']));\n      }\n      // transpile.js only exports a single $jscomp function, transpile. We\n      // grab just that and add it to the existing definition of $jscomp which\n      // contains the polyfills.\n      goog.global['$jscomp'].transpile =\n          goog.global['$gwtExport']['$jscomp']['transpile'];\n      jscomp = goog.global['$jscomp'];\n      transpile = jscomp.transpile;\n    }\n  }\n  if (!transpile) {\n    // The transpiler is an optional component.  If it's not available then\n    // replace it with a pass-through function that simply logs.\n    var suffix = ' requires transpilation but no transpiler was found.';\n    transpile = jscomp.transpile = function(code, path) {\n      // TODO(sdh): figure out some way to get this error to show up\n      // in test results, noting that the failure may occur in many\n      // different ways, including in loadModule() before the test\n      // runner even comes up.\n      goog.logToConsole_(path + suffix);\n      return code;\n    };\n  }\n  // Note: any transpilation errors/warnings will be logged to the console.\n  return transpile(code, path);\n};\n\n//==============================================================================\n// Language Enhancements\n//==============================================================================\n\n\n/**\n * This is a \"fixed\" version of the typeof operator.  It differs from the typeof\n * operator in such a way that null returns 'null' and arrays return 'array'.\n * @param {?} value The value to get the type of.\n * @return {string} The name of the type.\n */\ngoog.typeOf = function(value) {\n  var s = typeof value;\n  if (s == 'object') {\n    if (value) {\n      // Check these first, so we can avoid calling Object.prototype.toString if\n      // possible.\n      //\n      // IE improperly marshals typeof across execution contexts, but a\n      // cross-context object will still return false for \"instanceof Object\".\n      if (value instanceof Array) {\n        return 'array';\n      } else if (value instanceof Object) {\n        return s;\n      }\n\n      // HACK: In order to use an Object prototype method on the arbitrary\n      //   value, the compiler requires the value be cast to type Object,\n      //   even though the ECMA spec explicitly allows it.\n      var className = Object.prototype.toString.call(\n          /** @type {!Object} */ (value));\n      // In Firefox 3.6, attempting to access iframe window objects' length\n      // property throws an NS_ERROR_FAILURE, so we need to special-case it\n      // here.\n      if (className == '[object Window]') {\n        return 'object';\n      }\n\n      // We cannot always use constructor == Array or instanceof Array because\n      // different frames have different Array objects. In IE6, if the iframe\n      // where the array was created is destroyed, the array loses its\n      // prototype. Then dereferencing val.splice here throws an exception, so\n      // we can't use goog.isFunction. Calling typeof directly returns 'unknown'\n      // so that will work. In this case, this function will return false and\n      // most array functions will still work because the array is still\n      // array-like (supports length and []) even though it has lost its\n      // prototype.\n      // Mark Miller noticed that Object.prototype.toString\n      // allows access to the unforgeable [[Class]] property.\n      //  15.2.4.2 Object.prototype.toString ( )\n      //  When the toString method is called, the following steps are taken:\n      //      1. Get the [[Class]] property of this object.\n      //      2. Compute a string value by concatenating the three strings\n      //         \"[object \", Result(1), and \"]\".\n      //      3. Return Result(2).\n      // and this behavior survives the destruction of the execution context.\n      if ((className == '[object Array]' ||\n           // In IE all non value types are wrapped as objects across window\n           // boundaries (not iframe though) so we have to do object detection\n           // for this edge case.\n           typeof value.length == 'number' &&\n               typeof value.splice != 'undefined' &&\n               typeof value.propertyIsEnumerable != 'undefined' &&\n               !value.propertyIsEnumerable('splice')\n\n               )) {\n        return 'array';\n      }\n      // HACK: There is still an array case that fails.\n      //     function ArrayImpostor() {}\n      //     ArrayImpostor.prototype = [];\n      //     var impostor = new ArrayImpostor;\n      // this can be fixed by getting rid of the fast path\n      // (value instanceof Array) and solely relying on\n      // (value && Object.prototype.toString.vall(value) === '[object Array]')\n      // but that would require many more function calls and is not warranted\n      // unless closure code is receiving objects from untrusted sources.\n\n      // IE in cross-window calls does not correctly marshal the function type\n      // (it appears just as an object) so we cannot use just typeof val ==\n      // 'function'. However, if the object has a call property, it is a\n      // function.\n      if ((className == '[object Function]' ||\n           typeof value.call != 'undefined' &&\n               typeof value.propertyIsEnumerable != 'undefined' &&\n               !value.propertyIsEnumerable('call'))) {\n        return 'function';\n      }\n\n    } else {\n      return 'null';\n    }\n\n  } else if (s == 'function' && typeof value.call == 'undefined') {\n    // In Safari typeof nodeList returns 'function', and on Firefox typeof\n    // behaves similarly for HTML{Applet,Embed,Object}, Elements and RegExps. We\n    // would like to return object for those and we can detect an invalid\n    // function by making sure that the function object has a call method.\n    return 'object';\n  }\n  return s;\n};\n\n\n/**\n * Returns true if the specified value is null.\n * @param {?} val Variable to test.\n * @return {boolean} Whether variable is null.\n */\ngoog.isNull = function(val) {\n  return val === null;\n};\n\n\n/**\n * Returns true if the specified value is defined and not null.\n * @param {?} val Variable to test.\n * @return {boolean} Whether variable is defined and not null.\n */\ngoog.isDefAndNotNull = function(val) {\n  // Note that undefined == null.\n  return val != null;\n};\n\n\n/**\n * Returns true if the specified value is an array.\n * @param {?} val Variable to test.\n * @return {boolean} Whether variable is an array.\n */\ngoog.isArray = function(val) {\n  return goog.typeOf(val) == 'array';\n};\n\n\n/**\n * Returns true if the object looks like an array. To qualify as array like\n * the value needs to be either a NodeList or an object with a Number length\n * property. Note that for this function neither strings nor functions are\n * considered \"array-like\".\n *\n * @param {?} val Variable to test.\n * @return {boolean} Whether variable is an array.\n */\ngoog.isArrayLike = function(val) {\n  var type = goog.typeOf(val);\n  // We do not use goog.isObject here in order to exclude function values.\n  return type == 'array' || type == 'object' && typeof val.length == 'number';\n};\n\n\n/**\n * Returns true if the object looks like a Date. To qualify as Date-like the\n * value needs to be an object and have a getFullYear() function.\n * @param {?} val Variable to test.\n * @return {boolean} Whether variable is a like a Date.\n */\ngoog.isDateLike = function(val) {\n  return goog.isObject(val) && typeof val.getFullYear == 'function';\n};\n\n\n/**\n * Returns true if the specified value is a function.\n * @param {?} val Variable to test.\n * @return {boolean} Whether variable is a function.\n */\ngoog.isFunction = function(val) {\n  return goog.typeOf(val) == 'function';\n};\n\n\n/**\n * Returns true if the specified value is an object.  This includes arrays and\n * functions.\n * @param {?} val Variable to test.\n * @return {boolean} Whether variable is an object.\n */\ngoog.isObject = function(val) {\n  var type = typeof val;\n  return type == 'object' && val != null || type == 'function';\n  // return Object(val) === val also works, but is slower, especially if val is\n  // not an object.\n};\n\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. The unique ID is\n * guaranteed to be unique across the current session amongst objects that are\n * passed into `getUid`. There is no guarantee that the ID is unique or\n * consistent across sessions. It is unsafe to generate unique ID for function\n * prototypes.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {number} The unique ID for the object.\n */\ngoog.getUid = function(obj) {\n  // TODO(arv): Make the type stricter, do not accept null.\n\n  // In Opera window.hasOwnProperty exists but always returns false so we avoid\n  // using it. As a consequence the unique ID generated for BaseClass.prototype\n  // and SubClass.prototype will be the same.\n  return obj[goog.UID_PROPERTY_] ||\n      (obj[goog.UID_PROPERTY_] = ++goog.uidCounter_);\n};\n\n\n/**\n * Whether the given object is already assigned a unique ID.\n *\n * This does not modify the object.\n *\n * @param {!Object} obj The object to check.\n * @return {boolean} Whether there is an assigned unique id for the object.\n */\ngoog.hasUid = function(obj) {\n  return !!obj[goog.UID_PROPERTY_];\n};\n\n\n/**\n * Removes the unique ID from an object. This is useful if the object was\n * previously mutated using `goog.getUid` in which case the mutation is\n * undone.\n * @param {Object} obj The object to remove the unique ID field from.\n */\ngoog.removeUid = function(obj) {\n  // TODO(arv): Make the type stricter, do not accept null.\n\n  // In IE, DOM nodes are not instances of Object and throw an exception if we\n  // try to delete.  Instead we try to use removeAttribute.\n  if (obj !== null && 'removeAttribute' in obj) {\n    obj.removeAttribute(goog.UID_PROPERTY_);\n  }\n\n  try {\n    delete obj[goog.UID_PROPERTY_];\n  } catch (ex) {\n  }\n};\n\n\n/**\n * Name for unique ID property. Initialized in a way to help avoid collisions\n * with other closure JavaScript on the same page.\n * @type {string}\n * @private\n */\ngoog.UID_PROPERTY_ = 'closure_uid_' + ((Math.random() * 1e9) >>> 0);\n\n\n/**\n * Counter for UID.\n * @type {number}\n * @private\n */\ngoog.uidCounter_ = 0;\n\n\n/**\n * Adds a hash code field to an object. The hash code is unique for the\n * given object.\n * @param {Object} obj The object to get the hash code for.\n * @return {number} The hash code for the object.\n * @deprecated Use goog.getUid instead.\n */\ngoog.getHashCode = goog.getUid;\n\n\n/**\n * Removes the hash code field from an object.\n * @param {Object} obj The object to remove the field from.\n * @deprecated Use goog.removeUid instead.\n */\ngoog.removeHashCode = goog.removeUid;\n\n\n/**\n * Clones a value. The input may be an Object, Array, or basic type. Objects and\n * arrays will be cloned recursively.\n *\n * WARNINGS:\n * <code>goog.cloneObject</code> does not detect reference loops. Objects that\n * refer to themselves will cause infinite recursion.\n *\n * <code>goog.cloneObject</code> is unaware of unique identifiers, and copies\n * UIDs created by <code>getUid</code> into cloned results.\n *\n * @param {*} obj The value to clone.\n * @return {*} A clone of the input value.\n * @deprecated goog.cloneObject is unsafe. Prefer the goog.object methods.\n */\ngoog.cloneObject = function(obj) {\n  var type = goog.typeOf(obj);\n  if (type == 'object' || type == 'array') {\n    if (typeof obj.clone === 'function') {\n      return obj.clone();\n    }\n    var clone = type == 'array' ? [] : {};\n    for (var key in obj) {\n      clone[key] = goog.cloneObject(obj[key]);\n    }\n    return clone;\n  }\n\n  return obj;\n};\n\n\n/**\n * A native implementation of goog.bind.\n * @param {?function(this:T, ...)} fn A function to partially apply.\n * @param {T} selfObj Specifies the object which this should point to when the\n *     function is run.\n * @param {...*} var_args Additional arguments that are partially applied to the\n *     function.\n * @return {!Function} A partially-applied form of the function goog.bind() was\n *     invoked as a method of.\n * @template T\n * @private\n */\ngoog.bindNative_ = function(fn, selfObj, var_args) {\n  return /** @type {!Function} */ (fn.call.apply(fn.bind, arguments));\n};\n\n\n/**\n * A pure-JS implementation of goog.bind.\n * @param {?function(this:T, ...)} fn A function to partially apply.\n * @param {T} selfObj Specifies the object which this should point to when the\n *     function is run.\n * @param {...*} var_args Additional arguments that are partially applied to the\n *     function.\n * @return {!Function} A partially-applied form of the function goog.bind() was\n *     invoked as a method of.\n * @template T\n * @private\n */\ngoog.bindJs_ = function(fn, selfObj, var_args) {\n  if (!fn) {\n    throw new Error();\n  }\n\n  if (arguments.length > 2) {\n    var boundArgs = Array.prototype.slice.call(arguments, 2);\n    return function() {\n      // Prepend the bound arguments to the current arguments.\n      var newArgs = Array.prototype.slice.call(arguments);\n      Array.prototype.unshift.apply(newArgs, boundArgs);\n      return fn.apply(selfObj, newArgs);\n    };\n\n  } else {\n    return function() {\n      return fn.apply(selfObj, arguments);\n    };\n  }\n};\n\n\n/**\n * Partially applies this function to a particular 'this object' and zero or\n * more arguments. The result is a new function with some arguments of the first\n * function pre-filled and the value of this 'pre-specified'.\n *\n * Remaining arguments specified at call-time are appended to the pre-specified\n * ones.\n *\n * Also see: {@link #partial}.\n *\n * Usage:\n * <pre>var barMethBound = goog.bind(myFunction, myObj, 'arg1', 'arg2');\n * barMethBound('arg3', 'arg4');</pre>\n *\n * @param {?function(this:T, ...)} fn A function to partially apply.\n * @param {T} selfObj Specifies the object which this should point to when the\n *     function is run.\n * @param {...*} var_args Additional arguments that are partially applied to the\n *     function.\n * @return {!Function} A partially-applied form of the function goog.bind() was\n *     invoked as a method of.\n * @template T\n * @suppress {deprecated} See above.\n */\ngoog.bind = function(fn, selfObj, var_args) {\n  // TODO(nicksantos): narrow the type signature.\n  if (Function.prototype.bind &&\n      // NOTE(nicksantos): Somebody pulled base.js into the default Chrome\n      // extension environment. This means that for Chrome extensions, they get\n      // the implementation of Function.prototype.bind that calls goog.bind\n      // instead of the native one. Even worse, we don't want to introduce a\n      // circular dependency between goog.bind and Function.prototype.bind, so\n      // we have to hack this to make sure it works correctly.\n      Function.prototype.bind.toString().indexOf('native code') != -1) {\n    goog.bind = goog.bindNative_;\n  } else {\n    goog.bind = goog.bindJs_;\n  }\n  return goog.bind.apply(null, arguments);\n};\n\n\n/**\n * Like goog.bind(), except that a 'this object' is not required. Useful when\n * the target function is already bound.\n *\n * Usage:\n * var g = goog.partial(f, arg1, arg2);\n * g(arg3, arg4);\n *\n * @param {Function} fn A function to partially apply.\n * @param {...*} var_args Additional arguments that are partially applied to fn.\n * @return {!Function} A partially-applied form of the function goog.partial()\n *     was invoked as a method of.\n */\ngoog.partial = function(fn, var_args) {\n  var args = Array.prototype.slice.call(arguments, 1);\n  return function() {\n    // Clone the array (with slice()) and append additional arguments\n    // to the existing arguments.\n    var newArgs = args.slice();\n    newArgs.push.apply(newArgs, arguments);\n    return fn.apply(this, newArgs);\n  };\n};\n\n\n/**\n * Copies all the members of a source object to a target object. This method\n * does not work on all browsers for all objects that contain keys such as\n * toString or hasOwnProperty. Use goog.object.extend for this purpose.\n * @param {Object} target Target.\n * @param {Object} source Source.\n */\ngoog.mixin = function(target, source) {\n  for (var x in source) {\n    target[x] = source[x];\n  }\n\n  // For IE7 or lower, the for-in-loop does not contain any properties that are\n  // not enumerable on the prototype object (for example, isPrototypeOf from\n  // Object.prototype) but also it will not include 'replace' on objects that\n  // extend String and change 'replace' (not that it is common for anyone to\n  // extend anything except Object).\n};\n\n\n/**\n * @return {number} An integer value representing the number of milliseconds\n *     between midnight, January 1, 1970 and the current time.\n */\ngoog.now = (goog.TRUSTED_SITE && Date.now) || (function() {\n             // Unary plus operator converts its operand to a number which in\n             // the case of\n             // a date is done by calling getTime().\n             return +new Date();\n           });\n\n\n/**\n * Evals JavaScript in the global scope.  In IE this uses execScript, other\n * browsers use goog.global.eval. If goog.global.eval does not evaluate in the\n * global scope (for example, in Safari), appends a script tag instead.\n * Throws an exception if neither execScript or eval is defined.\n * @param {string} script JavaScript string.\n */\ngoog.globalEval = function(script) {\n  if (goog.global.execScript) {\n    goog.global.execScript(script, 'JavaScript');\n  } else if (goog.global.eval) {\n    // Test to see if eval works\n    if (goog.evalWorksForGlobals_ == null) {\n      try {\n        goog.global.eval('var _evalTest_ = 1;');\n      } catch (ignore) {\n      }\n      if (typeof goog.global['_evalTest_'] != 'undefined') {\n        try {\n          delete goog.global['_evalTest_'];\n        } catch (ignore) {\n          // Microsoft edge fails the deletion above in strict mode.\n        }\n        goog.evalWorksForGlobals_ = true;\n      } else {\n        goog.evalWorksForGlobals_ = false;\n      }\n    }\n\n    if (goog.evalWorksForGlobals_) {\n      goog.global.eval(script);\n    } else {\n      /** @type {!Document} */\n      var doc = goog.global.document;\n      var scriptElt =\n          /** @type {!HTMLScriptElement} */ (doc.createElement('SCRIPT'));\n      scriptElt.type = 'text/javascript';\n      scriptElt.defer = false;\n      // Note(user): can't use .innerHTML since \"t('<test>')\" will fail and\n      // .text doesn't work in Safari 2.  Therefore we append a text node.\n      scriptElt.appendChild(doc.createTextNode(script));\n      doc.head.appendChild(scriptElt);\n      doc.head.removeChild(scriptElt);\n    }\n  } else {\n    throw new Error('goog.globalEval not available');\n  }\n};\n\n\n/**\n * Indicates whether or not we can call 'eval' directly to eval code in the\n * global scope. Set to a Boolean by the first call to goog.globalEval (which\n * empirically tests whether eval works for globals). @see goog.globalEval\n * @type {?boolean}\n * @private\n */\ngoog.evalWorksForGlobals_ = null;\n\n\n/**\n * Optional map of CSS class names to obfuscated names used with\n * goog.getCssName().\n * @private {!Object<string, string>|undefined}\n * @see goog.setCssNameMapping\n */\ngoog.cssNameMapping_;\n\n\n/**\n * Optional obfuscation style for CSS class names. Should be set to either\n * 'BY_WHOLE' or 'BY_PART' if defined.\n * @type {string|undefined}\n * @private\n * @see goog.setCssNameMapping\n */\ngoog.cssNameMappingStyle_;\n\n\n\n/**\n * A hook for modifying the default behavior goog.getCssName. The function\n * if present, will receive the standard output of the goog.getCssName as\n * its input.\n *\n * @type {(function(string):string)|undefined}\n */\ngoog.global.CLOSURE_CSS_NAME_MAP_FN;\n\n\n/**\n * Handles strings that are intended to be used as CSS class names.\n *\n * This function works in tandem with @see goog.setCssNameMapping.\n *\n * Without any mapping set, the arguments are simple joined with a hyphen and\n * passed through unaltered.\n *\n * When there is a mapping, there are two possible styles in which these\n * mappings are used. In the BY_PART style, each part (i.e. in between hyphens)\n * of the passed in css name is rewritten according to the map. In the BY_WHOLE\n * style, the full css name is looked up in the map directly. If a rewrite is\n * not specified by the map, the compiler will output a warning.\n *\n * When the mapping is passed to the compiler, it will replace calls to\n * goog.getCssName with the strings from the mapping, e.g.\n *     var x = goog.getCssName('foo');\n *     var y = goog.getCssName(this.baseClass, 'active');\n *  becomes:\n *     var x = 'foo';\n *     var y = this.baseClass + '-active';\n *\n * If one argument is passed it will be processed, if two are passed only the\n * modifier will be processed, as it is assumed the first argument was generated\n * as a result of calling goog.getCssName.\n *\n * @param {string} className The class name.\n * @param {string=} opt_modifier A modifier to be appended to the class name.\n * @return {string} The class name or the concatenation of the class name and\n *     the modifier.\n */\ngoog.getCssName = function(className, opt_modifier) {\n  // String() is used for compatibility with compiled soy where the passed\n  // className can be non-string objects.\n  if (String(className).charAt(0) == '.') {\n    throw new Error(\n        'className passed in goog.getCssName must not start with \".\".' +\n        ' You passed: ' + className);\n  }\n\n  var getMapping = function(cssName) {\n    return goog.cssNameMapping_[cssName] || cssName;\n  };\n\n  var renameByParts = function(cssName) {\n    // Remap all the parts individually.\n    var parts = cssName.split('-');\n    var mapped = [];\n    for (var i = 0; i < parts.length; i++) {\n      mapped.push(getMapping(parts[i]));\n    }\n    return mapped.join('-');\n  };\n\n  var rename;\n  if (goog.cssNameMapping_) {\n    rename =\n        goog.cssNameMappingStyle_ == 'BY_WHOLE' ? getMapping : renameByParts;\n  } else {\n    rename = function(a) {\n      return a;\n    };\n  }\n\n  var result =\n      opt_modifier ? className + '-' + rename(opt_modifier) : rename(className);\n\n  // The special CLOSURE_CSS_NAME_MAP_FN allows users to specify further\n  // processing of the class name.\n  if (goog.global.CLOSURE_CSS_NAME_MAP_FN) {\n    return goog.global.CLOSURE_CSS_NAME_MAP_FN(result);\n  }\n\n  return result;\n};\n\n\n/**\n * Sets the map to check when returning a value from goog.getCssName(). Example:\n * <pre>\n * goog.setCssNameMapping({\n *   \"goog\": \"a\",\n *   \"disabled\": \"b\",\n * });\n *\n * var x = goog.getCssName('goog');\n * // The following evaluates to: \"a a-b\".\n * goog.getCssName('goog') + ' ' + goog.getCssName(x, 'disabled')\n * </pre>\n * When declared as a map of string literals to string literals, the JSCompiler\n * will replace all calls to goog.getCssName() using the supplied map if the\n * --process_closure_primitives flag is set.\n *\n * @param {!Object} mapping A map of strings to strings where keys are possible\n *     arguments to goog.getCssName() and values are the corresponding values\n *     that should be returned.\n * @param {string=} opt_style The style of css name mapping. There are two valid\n *     options: 'BY_PART', and 'BY_WHOLE'.\n * @see goog.getCssName for a description.\n */\ngoog.setCssNameMapping = function(mapping, opt_style) {\n  goog.cssNameMapping_ = mapping;\n  goog.cssNameMappingStyle_ = opt_style;\n};\n\n\n/**\n * To use CSS renaming in compiled mode, one of the input files should have a\n * call to goog.setCssNameMapping() with an object literal that the JSCompiler\n * can extract and use to replace all calls to goog.getCssName(). In uncompiled\n * mode, JavaScript code should be loaded before this base.js file that declares\n * a global variable, CLOSURE_CSS_NAME_MAPPING, which is used below. This is\n * to ensure that the mapping is loaded before any calls to goog.getCssName()\n * are made in uncompiled mode.\n *\n * A hook for overriding the CSS name mapping.\n * @type {!Object<string, string>|undefined}\n */\ngoog.global.CLOSURE_CSS_NAME_MAPPING;\n\n\nif (!COMPILED && goog.global.CLOSURE_CSS_NAME_MAPPING) {\n  // This does not call goog.setCssNameMapping() because the JSCompiler\n  // requires that goog.setCssNameMapping() be called with an object literal.\n  goog.cssNameMapping_ = goog.global.CLOSURE_CSS_NAME_MAPPING;\n}\n\n\n/**\n * Gets a localized message.\n *\n * This function is a compiler primitive. If you give the compiler a localized\n * message bundle, it will replace the string at compile-time with a localized\n * version, and expand goog.getMsg call to a concatenated string.\n *\n * Messages must be initialized in the form:\n * <code>\n * var MSG_NAME = goog.getMsg('Hello {$placeholder}', {'placeholder': 'world'});\n * </code>\n *\n * This function produces a string which should be treated as plain text. Use\n * {@link goog.html.SafeHtmlFormatter} in conjunction with goog.getMsg to\n * produce SafeHtml.\n *\n * @param {string} str Translatable string, places holders in the form {$foo}.\n * @param {Object<string, string>=} opt_values Maps place holder name to value.\n * @return {string} message with placeholders filled.\n */\ngoog.getMsg = function(str, opt_values) {\n  if (opt_values) {\n    str = str.replace(/\\{\\$([^}]+)}/g, function(match, key) {\n      return (opt_values != null && key in opt_values) ? opt_values[key] :\n                                                         match;\n    });\n  }\n  return str;\n};\n\n\n/**\n * Gets a localized message. If the message does not have a translation, gives a\n * fallback message.\n *\n * This is useful when introducing a new message that has not yet been\n * translated into all languages.\n *\n * This function is a compiler primitive. Must be used in the form:\n * <code>var x = goog.getMsgWithFallback(MSG_A, MSG_B);</code>\n * where MSG_A and MSG_B were initialized with goog.getMsg.\n *\n * @param {string} a The preferred message.\n * @param {string} b The fallback message.\n * @return {string} The best translated message.\n */\ngoog.getMsgWithFallback = function(a, b) {\n  return a;\n};\n\n\n/**\n * Exposes an unobfuscated global namespace path for the given object.\n * Note that fields of the exported object *will* be obfuscated, unless they are\n * exported in turn via this function or goog.exportProperty.\n *\n * Also handy for making public items that are defined in anonymous closures.\n *\n * ex. goog.exportSymbol('public.path.Foo', Foo);\n *\n * ex. goog.exportSymbol('public.path.Foo.staticFunction', Foo.staticFunction);\n *     public.path.Foo.staticFunction();\n *\n * ex. goog.exportSymbol('public.path.Foo.prototype.myMethod',\n *                       Foo.prototype.myMethod);\n *     new public.path.Foo().myMethod();\n *\n * @param {string} publicPath Unobfuscated name to export.\n * @param {*} object Object the name should point to.\n * @param {Object=} opt_objectToExportTo The object to add the path to; default\n *     is goog.global.\n */\ngoog.exportSymbol = function(publicPath, object, opt_objectToExportTo) {\n  goog.exportPath_(publicPath, object, opt_objectToExportTo);\n};\n\n\n/**\n * Exports a property unobfuscated into the object's namespace.\n * ex. goog.exportProperty(Foo, 'staticFunction', Foo.staticFunction);\n * ex. goog.exportProperty(Foo.prototype, 'myMethod', Foo.prototype.myMethod);\n * @param {Object} object Object whose static property is being exported.\n * @param {string} publicName Unobfuscated name to export.\n * @param {*} symbol Object the name should point to.\n */\ngoog.exportProperty = function(object, publicName, symbol) {\n  object[publicName] = symbol;\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * Usage:\n * <pre>\n * function ParentClass(a, b) { }\n * ParentClass.prototype.foo = function(a) { };\n *\n * function ChildClass(a, b, c) {\n *   ChildClass.base(this, 'constructor', a, b);\n * }\n * goog.inherits(ChildClass, ParentClass);\n *\n * var child = new ChildClass('a', 'b', 'see');\n * child.foo(); // This works.\n * </pre>\n *\n * @param {!Function} childCtor Child class.\n * @param {!Function} parentCtor Parent class.\n * @suppress {strictMissingProperties} superClass_ and base is not defined on\n *    Function.\n */\ngoog.inherits = function(childCtor, parentCtor) {\n  /** @constructor */\n  function tempCtor() {}\n  tempCtor.prototype = parentCtor.prototype;\n  childCtor.superClass_ = parentCtor.prototype;\n  childCtor.prototype = new tempCtor();\n  /** @override */\n  childCtor.prototype.constructor = childCtor;\n\n  /**\n   * Calls superclass constructor/method.\n   *\n   * This function is only available if you use goog.inherits to\n   * express inheritance relationships between classes.\n   *\n   * NOTE: This is a replacement for goog.base and for superClass_\n   * property defined in childCtor.\n   *\n   * @param {!Object} me Should always be \"this\".\n   * @param {string} methodName The method name to call. Calling\n   *     superclass constructor can be done with the special string\n   *     'constructor'.\n   * @param {...*} var_args The arguments to pass to superclass\n   *     method/constructor.\n   * @return {*} The return value of the superclass method/constructor.\n   */\n  childCtor.base = function(me, methodName, var_args) {\n    // Copying using loop to avoid deop due to passing arguments object to\n    // function. This is faster in many JS engines as of late 2014.\n    var args = new Array(arguments.length - 2);\n    for (var i = 2; i < arguments.length; i++) {\n      args[i - 2] = arguments[i];\n    }\n    return parentCtor.prototype[methodName].apply(me, args);\n  };\n};\n\n\n/**\n * Call up to the superclass.\n *\n * If this is called from a constructor, then this calls the superclass\n * constructor with arguments 1-N.\n *\n * If this is called from a prototype method, then you must pass the name of the\n * method as the second argument to this function. If you do not, you will get a\n * runtime error. This calls the superclass' method with arguments 2-N.\n *\n * This function only works if you use goog.inherits to express inheritance\n * relationships between your classes.\n *\n * This function is a compiler primitive. At compile-time, the compiler will do\n * macro expansion to remove a lot of the extra overhead that this function\n * introduces. The compiler will also enforce a lot of the assumptions that this\n * function makes, and treat it as a compiler error if you break them.\n *\n * @param {!Object} me Should always be \"this\".\n * @param {*=} opt_methodName The method name if calling a super method.\n * @param {...*} var_args The rest of the arguments.\n * @return {*} The return value of the superclass method.\n * @suppress {es5Strict} This method can not be used in strict mode, but\n *     all Closure Library consumers must depend on this file.\n * @deprecated goog.base is not strict mode compatible.  Prefer the static\n *     \"base\" method added to the constructor by goog.inherits\n *     or ES6 classes and the \"super\" keyword.\n */\ngoog.base = function(me, opt_methodName, var_args) {\n  var caller = arguments.callee.caller;\n\n  if (goog.STRICT_MODE_COMPATIBLE || (goog.DEBUG && !caller)) {\n    throw new Error(\n        'arguments.caller not defined.  goog.base() cannot be used ' +\n        'with strict mode code. See ' +\n        'http://www.ecma-international.org/ecma-262/5.1/#sec-C');\n  }\n\n  if (typeof caller.superClass_ !== 'undefined') {\n    // Copying using loop to avoid deop due to passing arguments object to\n    // function. This is faster in many JS engines as of late 2014.\n    var ctorArgs = new Array(arguments.length - 1);\n    for (var i = 1; i < arguments.length; i++) {\n      ctorArgs[i - 1] = arguments[i];\n    }\n    // This is a constructor. Call the superclass constructor.\n    return caller.superClass_.constructor.apply(me, ctorArgs);\n  }\n\n  if (typeof opt_methodName != 'string' && typeof opt_methodName != 'symbol') {\n    throw new Error(\n        'method names provided to goog.base must be a string or a symbol');\n  }\n\n  // Copying using loop to avoid deop due to passing arguments object to\n  // function. This is faster in many JS engines as of late 2014.\n  var args = new Array(arguments.length - 2);\n  for (var i = 2; i < arguments.length; i++) {\n    args[i - 2] = arguments[i];\n  }\n  var foundCaller = false;\n  for (var ctor = me.constructor; ctor;\n       ctor = ctor.superClass_ && ctor.superClass_.constructor) {\n    if (ctor.prototype[opt_methodName] === caller) {\n      foundCaller = true;\n    } else if (foundCaller) {\n      return ctor.prototype[opt_methodName].apply(me, args);\n    }\n  }\n\n  // If we did not find the caller in the prototype chain, then one of two\n  // things happened:\n  // 1) The caller is an instance method.\n  // 2) This method was not called by the right caller.\n  if (me[opt_methodName] === caller) {\n    return me.constructor.prototype[opt_methodName].apply(me, args);\n  } else {\n    throw new Error(\n        'goog.base called from a method of one name ' +\n        'to a method of a different name');\n  }\n};\n\n\n/**\n * Allow for aliasing within scope functions.  This function exists for\n * uncompiled code - in compiled code the calls will be inlined and the aliases\n * applied.  In uncompiled code the function is simply run since the aliases as\n * written are valid JavaScript.\n *\n *\n * @param {function()} fn Function to call.  This function can contain aliases\n *     to namespaces (e.g. \"var dom = goog.dom\") or classes\n *     (e.g. \"var Timer = goog.Timer\").\n */\ngoog.scope = function(fn) {\n  if (goog.isInModuleLoader_()) {\n    throw new Error('goog.scope is not supported within a module.');\n  }\n  fn.call(goog.global);\n};\n\n\n/*\n * To support uncompiled, strict mode bundles that use eval to divide source\n * like so:\n *    eval('someSource;//# sourceUrl sourcefile.js');\n * We need to export the globally defined symbols \"goog\" and \"COMPILED\".\n * Exporting \"goog\" breaks the compiler optimizations, so we required that\n * be defined externally.\n * NOTE: We don't use goog.exportSymbol here because we don't want to trigger\n * extern generation when that compiler option is enabled.\n */\nif (!COMPILED) {\n  goog.global['COMPILED'] = COMPILED;\n}\n\n\n//==============================================================================\n// goog.defineClass implementation\n//==============================================================================\n\n\n/**\n * Creates a restricted form of a Closure \"class\":\n *   - from the compiler's perspective, the instance returned from the\n *     constructor is sealed (no new properties may be added).  This enables\n *     better checks.\n *   - the compiler will rewrite this definition to a form that is optimal\n *     for type checking and optimization (initially this will be a more\n *     traditional form).\n *\n * @param {Function} superClass The superclass, Object or null.\n * @param {goog.defineClass.ClassDescriptor} def\n *     An object literal describing\n *     the class.  It may have the following properties:\n *     \"constructor\": the constructor function\n *     \"statics\": an object literal containing methods to add to the constructor\n *        as \"static\" methods or a function that will receive the constructor\n *        function as its only parameter to which static properties can\n *        be added.\n *     all other properties are added to the prototype.\n * @return {!Function} The class constructor.\n */\ngoog.defineClass = function(superClass, def) {\n  // TODO(johnlenz): consider making the superClass an optional parameter.\n  var constructor = def.constructor;\n  var statics = def.statics;\n  // Wrap the constructor prior to setting up the prototype and static methods.\n  if (!constructor || constructor == Object.prototype.constructor) {\n    constructor = function() {\n      throw new Error(\n          'cannot instantiate an interface (no constructor defined).');\n    };\n  }\n\n  var cls = goog.defineClass.createSealingConstructor_(constructor, superClass);\n  if (superClass) {\n    goog.inherits(cls, superClass);\n  }\n\n  // Remove all the properties that should not be copied to the prototype.\n  delete def.constructor;\n  delete def.statics;\n\n  goog.defineClass.applyProperties_(cls.prototype, def);\n  if (statics != null) {\n    if (statics instanceof Function) {\n      statics(cls);\n    } else {\n      goog.defineClass.applyProperties_(cls, statics);\n    }\n  }\n\n  return cls;\n};\n\n\n/**\n * @typedef {{\n *   constructor: (!Function|undefined),\n *   statics: (Object|undefined|function(Function):void)\n * }}\n */\ngoog.defineClass.ClassDescriptor;\n\n\n/**\n * @define {boolean} Whether the instances returned by goog.defineClass should\n *     be sealed when possible.\n *\n * When sealing is disabled the constructor function will not be wrapped by\n * goog.defineClass, making it incompatible with ES6 class methods.\n */\ngoog.define('goog.defineClass.SEAL_CLASS_INSTANCES', goog.DEBUG);\n\n\n/**\n * If goog.defineClass.SEAL_CLASS_INSTANCES is enabled and Object.seal is\n * defined, this function will wrap the constructor in a function that seals the\n * results of the provided constructor function.\n *\n * @param {!Function} ctr The constructor whose results maybe be sealed.\n * @param {Function} superClass The superclass constructor.\n * @return {!Function} The replacement constructor.\n * @private\n */\ngoog.defineClass.createSealingConstructor_ = function(ctr, superClass) {\n  if (!goog.defineClass.SEAL_CLASS_INSTANCES) {\n    // Do now wrap the constructor when sealing is disabled. Angular code\n    // depends on this for injection to work properly.\n    return ctr;\n  }\n\n  // Compute whether the constructor is sealable at definition time, rather\n  // than when the instance is being constructed.\n  var superclassSealable = !goog.defineClass.isUnsealable_(superClass);\n\n  /**\n   * @this {Object}\n   * @return {?}\n   */\n  var wrappedCtr = function() {\n    // Don't seal an instance of a subclass when it calls the constructor of\n    // its super class as there is most likely still setup to do.\n    var instance = ctr.apply(this, arguments) || this;\n    instance[goog.UID_PROPERTY_] = instance[goog.UID_PROPERTY_];\n\n    if (this.constructor === wrappedCtr && superclassSealable &&\n        Object.seal instanceof Function) {\n      Object.seal(instance);\n    }\n    return instance;\n  };\n\n  return wrappedCtr;\n};\n\n\n/**\n * @param {Function} ctr The constructor to test.\n * @return {boolean} Whether the constructor has been tagged as unsealable\n *     using goog.tagUnsealableClass.\n * @private\n */\ngoog.defineClass.isUnsealable_ = function(ctr) {\n  return ctr && ctr.prototype &&\n      ctr.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_];\n};\n\n\n// TODO(johnlenz): share these values with the goog.object\n/**\n * The names of the fields that are defined on Object.prototype.\n * @type {!Array<string>}\n * @private\n * @const\n */\ngoog.defineClass.OBJECT_PROTOTYPE_FIELDS_ = [\n  'constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable',\n  'toLocaleString', 'toString', 'valueOf'\n];\n\n\n// TODO(johnlenz): share this function with the goog.object\n/**\n * @param {!Object} target The object to add properties to.\n * @param {!Object} source The object to copy properties from.\n * @private\n */\ngoog.defineClass.applyProperties_ = function(target, source) {\n  // TODO(johnlenz): update this to support ES5 getters/setters\n\n  var key;\n  for (key in source) {\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\n      target[key] = source[key];\n    }\n  }\n\n  // For IE the for-in-loop does not contain any properties that are not\n  // enumerable on the prototype object (for example isPrototypeOf from\n  // Object.prototype) and it will also not include 'replace' on objects that\n  // extend String and change 'replace' (not that it is common for anyone to\n  // extend anything except Object).\n  for (var i = 0; i < goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length; i++) {\n    key = goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[i];\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\n      target[key] = source[key];\n    }\n  }\n};\n\n\n/**\n * Sealing classes breaks the older idiom of assigning properties on the\n * prototype rather than in the constructor. As such, goog.defineClass\n * must not seal subclasses of these old-style classes until they are fixed.\n * Until then, this marks a class as \"broken\", instructing defineClass\n * not to seal subclasses.\n * @param {!Function} ctr The legacy constructor to tag as unsealable.\n */\ngoog.tagUnsealableClass = function(ctr) {\n  if (!COMPILED && goog.defineClass.SEAL_CLASS_INSTANCES) {\n    ctr.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_] = true;\n  }\n};\n\n\n/**\n * Name for unsealable tag property.\n * @const @private {string}\n */\ngoog.UNSEALABLE_CONSTRUCTOR_PROPERTY_ = 'goog_defineClass_legacy_unsealable';\n\n\n// There's a bug in the compiler where without collapse properties the\n// Closure namespace defines do not guard code correctly. To help reduce code\n// size also check for !COMPILED even though it redundant until this is fixed.\nif (!COMPILED && goog.DEPENDENCIES_ENABLED) {\n\n  /**\n   * Tries to detect whether is in the context of an HTML document.\n   * @return {boolean} True if it looks like HTML document.\n   * @private\n   */\n  goog.inHtmlDocument_ = function() {\n    /** @type {!Document} */\n    var doc = goog.global.document;\n    return doc != null && 'write' in doc;  // XULDocument misses write.\n  };\n\n\n  /**\n   * We'd like to check for if the document readyState is 'loading'; however\n   * there are bugs on IE 10 and below where the readyState being anything other\n   * than 'complete' is not reliable.\n   * @return {boolean}\n   * @private\n   */\n  goog.isDocumentLoading_ = function() {\n    // attachEvent is available on IE 6 thru 10 only, and thus can be used to\n    // detect those browsers.\n    /** @type {!HTMLDocument} */\n    var doc = goog.global.document;\n    return doc.attachEvent ? doc.readyState != 'complete' :\n                             doc.readyState == 'loading';\n  };\n\n\n  /**\n   * Tries to detect the base path of base.js script that bootstraps Closure.\n   * @private\n   */\n  goog.findBasePath_ = function() {\n    if (goog.isDef(goog.global.CLOSURE_BASE_PATH) &&\n        // Anti DOM-clobbering runtime check (b/37736576).\n        goog.isString(goog.global.CLOSURE_BASE_PATH)) {\n      goog.basePath = goog.global.CLOSURE_BASE_PATH;\n      return;\n    } else if (!goog.inHtmlDocument_()) {\n      return;\n    }\n    /** @type {!Document} */\n    var doc = goog.global.document;\n    // If we have a currentScript available, use it exclusively.\n    var currentScript = doc.currentScript;\n    if (currentScript) {\n      var scripts = [currentScript];\n    } else {\n      var scripts = doc.getElementsByTagName('SCRIPT');\n    }\n    // Search backwards since the current script is in almost all cases the one\n    // that has base.js.\n    for (var i = scripts.length - 1; i >= 0; --i) {\n      var script = /** @type {!HTMLScriptElement} */ (scripts[i]);\n      var src = script.src;\n      var qmark = src.lastIndexOf('?');\n      var l = qmark == -1 ? src.length : qmark;\n      if (src.substr(l - 7, 7) == 'base.js') {\n        goog.basePath = src.substr(0, l - 7);\n        return;\n      }\n    }\n  };\n\n  goog.findBasePath_();\n\n  /** @struct @constructor @final */\n  goog.Transpiler = function() {\n    /** @private {?Object<string, boolean>} */\n    this.requiresTranspilation_ = null;\n  };\n\n\n  /**\n   * Returns a newly created map from language mode string to a boolean\n   * indicating whether transpilation should be done for that mode.\n   *\n   * Guaranteed invariant:\n   * For any two modes, l1 and l2 where l2 is a newer mode than l1,\n   * `map[l1] == true` implies that `map[l2] == true`.\n   *\n   * Note this method is extracted and used elsewhere, so it cannot rely on\n   * anything external (it should easily be able to be transformed into a\n   * standalone, top level function).\n   *\n   * @private\n   * @return {!Object<string, boolean>}\n   */\n  goog.Transpiler.prototype.createRequiresTranspilation_ = function() {\n    var /** !Object<string, boolean> */ requiresTranspilation = {'es3': false};\n    var transpilationRequiredForAllLaterModes = false;\n\n    /**\n     * Adds an entry to requiresTranspliation for the given language mode.\n     *\n     * IMPORTANT: Calls must be made in order from oldest to newest language\n     * mode.\n     * @param {string} modeName\n     * @param {function(): boolean} isSupported Returns true if the JS engine\n     *     supports the given mode.\n     */\n    function addNewerLanguageTranspilationCheck(modeName, isSupported) {\n      if (transpilationRequiredForAllLaterModes) {\n        requiresTranspilation[modeName] = true;\n      } else if (isSupported()) {\n        requiresTranspilation[modeName] = false;\n      } else {\n        requiresTranspilation[modeName] = true;\n        transpilationRequiredForAllLaterModes = true;\n      }\n    }\n\n    /**\n     * Does the given code evaluate without syntax errors and return a truthy\n     * result?\n     */\n    function /** boolean */ evalCheck(/** string */ code) {\n      try {\n        return !!eval(code);\n      } catch (ignored) {\n        return false;\n      }\n    }\n\n    var userAgent = goog.global.navigator && goog.global.navigator.userAgent ?\n        goog.global.navigator.userAgent :\n        '';\n\n    // Identify ES3-only browsers by their incorrect treatment of commas.\n    addNewerLanguageTranspilationCheck('es5', function() {\n      return evalCheck('[1,].length==1');\n    });\n    addNewerLanguageTranspilationCheck('es6', function() {\n      // Edge has a non-deterministic (i.e., not reproducible) bug with ES6:\n      // https://github.com/Microsoft/ChakraCore/issues/1496.\n      var re = /Edge\\/(\\d+)(\\.\\d)*/i;\n      var edgeUserAgent = userAgent.match(re);\n      if (edgeUserAgent && Number(edgeUserAgent[1]) < 15) {\n        return false;\n      }\n      // Test es6: [FF50 (?), Edge 14 (?), Chrome 50]\n      //   (a) default params (specifically shadowing locals),\n      //   (b) destructuring, (c) block-scoped functions,\n      //   (d) for-of (const), (e) new.target/Reflect.construct\n      var es6fullTest =\n          'class X{constructor(){if(new.target!=String)throw 1;this.x=42}}' +\n          'let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof ' +\n          'String))throw 1;for(const a of[2,3]){if(a==2)continue;function ' +\n          'f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()' +\n          '==3}';\n\n      return evalCheck('(()=>{\"use strict\";' + es6fullTest + '})()');\n    });\n    // TODO(joeltine): Remove es6-impl references for b/31340605.\n    // Consider es6-impl (widely-implemented es6 features) to be supported\n    // whenever es6 is supported. Technically es6-impl is a lower level of\n    // support than es6, but we don't have tests specifically for it.\n    addNewerLanguageTranspilationCheck('es6-impl', function() {\n      return true;\n    });\n    // ** and **= are the only new features in 'es7'\n    addNewerLanguageTranspilationCheck('es7', function() {\n      return evalCheck('2 ** 2 == 4');\n    });\n    // async functions are the only new features in 'es8'\n    addNewerLanguageTranspilationCheck('es8', function() {\n      return evalCheck('async () => 1, true');\n    });\n    addNewerLanguageTranspilationCheck('es9', function() {\n      return evalCheck('({...rest} = {}), true');\n    });\n    addNewerLanguageTranspilationCheck('es_next', function() {\n      return false;  // assume it always need to transpile\n    });\n    return requiresTranspilation;\n  };\n\n\n  /**\n   * Determines whether the given language needs to be transpiled.\n   * @param {string} lang\n   * @param {string|undefined} module\n   * @return {boolean}\n   */\n  goog.Transpiler.prototype.needsTranspile = function(lang, module) {\n    if (goog.TRANSPILE == 'always') {\n      return true;\n    } else if (goog.TRANSPILE == 'never') {\n      return false;\n    } else if (!this.requiresTranspilation_) {\n      this.requiresTranspilation_ = this.createRequiresTranspilation_();\n    }\n    if (lang in this.requiresTranspilation_) {\n      if (this.requiresTranspilation_[lang]) {\n        return true;\n      } else if (\n          goog.inHtmlDocument_() && module == 'es6' &&\n          !('noModule' in goog.global.document.createElement('script'))) {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      throw new Error('Unknown language mode: ' + lang);\n    }\n  };\n\n\n  /**\n   * Lazily retrieves the transpiler and applies it to the source.\n   * @param {string} code JS code.\n   * @param {string} path Path to the code.\n   * @return {string} The transpiled code.\n   */\n  goog.Transpiler.prototype.transpile = function(code, path) {\n    // TODO(johnplaisted): We should delete goog.transpile_ and just have this\n    // function. But there's some compile error atm where goog.global is being\n    // stripped incorrectly without this.\n    return goog.transpile_(code, path);\n  };\n\n\n  /** @private @final {!goog.Transpiler} */\n  goog.transpiler_ = new goog.Transpiler();\n\n  /**\n   * Rewrites closing script tags in input to avoid ending an enclosing script\n   * tag.\n   *\n   * @param {string} str\n   * @return {string}\n   * @private\n   */\n  goog.protectScriptTag_ = function(str) {\n    return str.replace(/<\\/(SCRIPT)/ig, '\\\\x3c/$1');\n  };\n\n\n  /**\n   * A debug loader is responsible for downloading and executing javascript\n   * files in an unbundled, uncompiled environment.\n   *\n   * This can be custimized via the setDependencyFactory method, or by\n   * CLOSURE_IMPORT_SCRIPT/CLOSURE_LOAD_FILE_SYNC.\n   *\n   * @struct @constructor @final @private\n   */\n  goog.DebugLoader_ = function() {\n    /** @private @const {!Object<string, !goog.Dependency>} */\n    this.dependencies_ = {};\n    /** @private @const {!Object<string, string>} */\n    this.idToPath_ = {};\n    /** @private @const {!Object<string, boolean>} */\n    this.written_ = {};\n    /** @private @const {!Array<!goog.Dependency>} */\n    this.loadingDeps_ = [];\n    /** @private {!Array<!goog.Dependency>} */\n    this.depsToLoad_ = [];\n    /** @private {boolean} */\n    this.paused_ = false;\n    /** @private {!goog.DependencyFactory} */\n    this.factory_ = new goog.DependencyFactory(goog.transpiler_);\n    /** @private @const {!Object<string, !Function>} */\n    this.deferredCallbacks_ = {};\n    /** @private @const {!Array<string>} */\n    this.deferredQueue_ = [];\n  };\n\n  /**\n   * @param {!Array<string>} namespaces\n   * @param {function(): undefined} callback Function to call once all the\n   *     namespaces have loaded.\n   */\n  goog.DebugLoader_.prototype.bootstrap = function(namespaces, callback) {\n    var cb = callback;\n    function resolve() {\n      if (cb) {\n        goog.global.setTimeout(cb, 0);\n        cb = null;\n      }\n    }\n\n    if (!namespaces.length) {\n      resolve();\n      return;\n    }\n\n    var deps = [];\n    for (var i = 0; i < namespaces.length; i++) {\n      var path = this.getPathFromDeps_(namespaces[i]);\n      if (!path) {\n        throw new Error('Unregonized namespace: ' + namespaces[i]);\n      }\n      deps.push(this.dependencies_[path]);\n    }\n\n    var require = goog.require;\n    var loaded = 0;\n    for (var i = 0; i < namespaces.length; i++) {\n      require(namespaces[i]);\n      deps[i].onLoad(function() {\n        if (++loaded == namespaces.length) {\n          resolve();\n        }\n      });\n    }\n  };\n\n\n  /**\n   * Loads the Closure Dependency file.\n   *\n   * Exposed a public function so CLOSURE_NO_DEPS can be set to false, base\n   * loaded, setDependencyFactory called, and then this called. i.e. allows\n   * custom loading of the deps file.\n   */\n  goog.DebugLoader_.prototype.loadClosureDeps = function() {\n    // Circumvent addDependency, which would try to transpile deps.js if\n    // transpile is set to always.\n    var relPath = 'deps.js';\n    this.depsToLoad_.push(this.factory_.createDependency(\n        goog.normalizePath_(goog.basePath + relPath), relPath, [], [], {},\n        false));\n    this.loadDeps_();\n  };\n\n\n  /**\n   * Notifies the debug loader when a dependency has been requested.\n   *\n   * @param {string} absPathOrId Path of the dependency or goog id.\n   * @param {boolean=} opt_force\n   */\n  goog.DebugLoader_.prototype.requested = function(absPathOrId, opt_force) {\n    var path = this.getPathFromDeps_(absPathOrId);\n    if (path &&\n        (opt_force || this.areDepsLoaded_(this.dependencies_[path].requires))) {\n      var callback = this.deferredCallbacks_[path];\n      if (callback) {\n        delete this.deferredCallbacks_[path];\n        callback();\n      }\n    }\n  };\n\n\n  /**\n   * Sets the dependency factory, which can be used to create custom\n   * goog.Dependency implementations to control how dependencies are loaded.\n   *\n   * @param {!goog.DependencyFactory} factory\n   */\n  goog.DebugLoader_.prototype.setDependencyFactory = function(factory) {\n    this.factory_ = factory;\n  };\n\n\n  /**\n   * Travserses the dependency graph and queues the given dependency, and all of\n   * its transitive dependencies, for loading and then starts loading if not\n   * paused.\n   *\n   * @param {string} namespace\n   * @private\n   */\n  goog.DebugLoader_.prototype.load_ = function(namespace) {\n    if (!this.getPathFromDeps_(namespace)) {\n      var errorMessage = 'goog.require could not find: ' + namespace;\n\n      goog.logToConsole_(errorMessage);\n      throw Error(errorMessage);\n    } else {\n      var loader = this;\n\n      var deps = [];\n\n      /** @param {string} namespace */\n      var visit = function(namespace) {\n        var path = loader.getPathFromDeps_(namespace);\n\n        if (!path) {\n          throw new Error('Bad dependency path or symbol: ' + namespace);\n        }\n\n        if (loader.written_[path]) {\n          return;\n        }\n\n        loader.written_[path] = true;\n\n        var dep = loader.dependencies_[path];\n        for (var i = 0; i < dep.requires.length; i++) {\n          if (!goog.isProvided_(dep.requires[i])) {\n            visit(dep.requires[i]);\n          }\n        }\n\n        deps.push(dep);\n      };\n\n      visit(namespace);\n\n      var wasLoading = !!this.depsToLoad_.length;\n      this.depsToLoad_ = this.depsToLoad_.concat(deps);\n\n      if (!this.paused_ && !wasLoading) {\n        this.loadDeps_();\n      }\n    }\n  };\n\n\n  /**\n   * Loads any queued dependencies until they are all loaded or paused.\n   *\n   * @private\n   */\n  goog.DebugLoader_.prototype.loadDeps_ = function() {\n    var loader = this;\n    var paused = this.paused_;\n\n    while (this.depsToLoad_.length && !paused) {\n      (function() {\n        var loadCallDone = false;\n        var dep = loader.depsToLoad_.shift();\n\n        var loaded = false;\n        loader.loading_(dep);\n\n        var controller = {\n          pause: function() {\n            if (loadCallDone) {\n              throw new Error('Cannot call pause after the call to load.');\n            } else {\n              paused = true;\n            }\n          },\n          resume: function() {\n            if (loadCallDone) {\n              loader.resume_();\n            } else {\n              // Some dep called pause and then resume in the same load call.\n              // Just keep running this same loop.\n              paused = false;\n            }\n          },\n          loaded: function() {\n            if (loaded) {\n              throw new Error('Double call to loaded.');\n            }\n\n            loaded = true;\n            loader.loaded_(dep);\n          },\n          pending: function() {\n            // Defensive copy.\n            var pending = [];\n            for (var i = 0; i < loader.loadingDeps_.length; i++) {\n              pending.push(loader.loadingDeps_[i]);\n            }\n            return pending;\n          },\n          /**\n           * @param {goog.ModuleType} type\n           */\n          setModuleState: function(type) {\n            goog.moduleLoaderState_ = {\n              type: type,\n              moduleName: '',\n              declareLegacyNamespace: false\n            };\n          },\n          /** @type {function(string, string, string=)} */\n          registerEs6ModuleExports: function(\n              path, exports, opt_closureNamespace) {\n            if (opt_closureNamespace) {\n              goog.loadedModules_[opt_closureNamespace] = {\n                exports: exports,\n                type: goog.ModuleType.ES6,\n                moduleId: opt_closureNamespace || ''\n              };\n            }\n          },\n          /** @type {function(string, ?)} */\n          registerGoogModuleExports: function(moduleId, exports) {\n            goog.loadedModules_[moduleId] = {\n              exports: exports,\n              type: goog.ModuleType.GOOG,\n              moduleId: moduleId\n            };\n          },\n          clearModuleState: function() {\n            goog.moduleLoaderState_ = null;\n          },\n          defer: function(callback) {\n            if (loadCallDone) {\n              throw new Error(\n                  'Cannot register with defer after the call to load.');\n            }\n            loader.defer_(dep, callback);\n          },\n          areDepsLoaded: function() {\n            return loader.areDepsLoaded_(dep.requires);\n          }\n        };\n\n        try {\n          dep.load(controller);\n        } finally {\n          loadCallDone = true;\n        }\n      })();\n    }\n\n    if (paused) {\n      this.pause_();\n    }\n  };\n\n\n  /** @private */\n  goog.DebugLoader_.prototype.pause_ = function() {\n    this.paused_ = true;\n  };\n\n\n  /** @private */\n  goog.DebugLoader_.prototype.resume_ = function() {\n    if (this.paused_) {\n      this.paused_ = false;\n      this.loadDeps_();\n    }\n  };\n\n\n  /**\n   * Marks the given dependency as loading (load has been called but it has not\n   * yet marked itself as finished). Useful for dependencies that want to know\n   * what else is loading. Example: goog.modules cannot eval if there are\n   * loading dependencies.\n   *\n   * @param {!goog.Dependency} dep\n   * @private\n   */\n  goog.DebugLoader_.prototype.loading_ = function(dep) {\n    this.loadingDeps_.push(dep);\n  };\n\n\n  /**\n   * Marks the given dependency as having finished loading and being available\n   * for require.\n   *\n   * @param {!goog.Dependency} dep\n   * @private\n   */\n  goog.DebugLoader_.prototype.loaded_ = function(dep) {\n    for (var i = 0; i < this.loadingDeps_.length; i++) {\n      if (this.loadingDeps_[i] == dep) {\n        this.loadingDeps_.splice(i, 1);\n        break;\n      }\n    }\n\n    for (var i = 0; i < this.deferredQueue_.length; i++) {\n      if (this.deferredQueue_[i] == dep.path) {\n        this.deferredQueue_.splice(i, 1);\n        break;\n      }\n    }\n\n    if (this.loadingDeps_.length == this.deferredQueue_.length &&\n        !this.depsToLoad_.length) {\n      // Something has asked to load these, but they may not be directly\n      // required again later, so load them now that we know we're done loading\n      // everything else. e.g. a goog module entry point.\n      while (this.deferredQueue_.length) {\n        this.requested(this.deferredQueue_.shift(), true);\n      }\n    }\n\n    dep.loaded();\n  };\n\n\n  /**\n   * @param {!Array<string>} pathsOrIds\n   * @return {boolean}\n   * @private\n   */\n  goog.DebugLoader_.prototype.areDepsLoaded_ = function(pathsOrIds) {\n    for (var i = 0; i < pathsOrIds.length; i++) {\n      var path = this.getPathFromDeps_(pathsOrIds[i]);\n      if (!path ||\n          (!(path in this.deferredCallbacks_) &&\n           !goog.isProvided_(pathsOrIds[i]))) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n\n  /**\n   * @param {string} absPathOrId\n   * @return {?string}\n   * @private\n   */\n  goog.DebugLoader_.prototype.getPathFromDeps_ = function(absPathOrId) {\n    if (absPathOrId in this.idToPath_) {\n      return this.idToPath_[absPathOrId];\n    } else if (absPathOrId in this.dependencies_) {\n      return absPathOrId;\n    } else {\n      return null;\n    }\n  };\n\n\n  /**\n   * @param {!goog.Dependency} dependency\n   * @param {!Function} callback\n   * @private\n   */\n  goog.DebugLoader_.prototype.defer_ = function(dependency, callback) {\n    this.deferredCallbacks_[dependency.path] = callback;\n    this.deferredQueue_.push(dependency.path);\n  };\n\n\n  /**\n   * Interface for goog.Dependency implementations to have some control over\n   * loading of dependencies.\n   *\n   * @record\n   */\n  goog.LoadController = function() {};\n\n\n  /**\n   * Tells the controller to halt loading of more dependencies.\n   */\n  goog.LoadController.prototype.pause = function() {};\n\n\n  /**\n   * Tells the controller to resume loading of more dependencies if paused.\n   */\n  goog.LoadController.prototype.resume = function() {};\n\n\n  /**\n   * Tells the controller that this dependency has finished loading.\n   *\n   * This causes this to be removed from pending() and any load callbacks to\n   * fire.\n   */\n  goog.LoadController.prototype.loaded = function() {};\n\n\n  /**\n   * List of dependencies on which load has been called but which have not\n   * called loaded on their controller. This includes the current dependency.\n   *\n   * @return {!Array<!goog.Dependency>}\n   */\n  goog.LoadController.prototype.pending = function() {};\n\n\n  /**\n   * Registers an object as an ES6 module's exports so that goog.modules may\n   * require it by path.\n   *\n   * @param {string} path Full path of the module.\n   * @param {?} exports\n   * @param {string=} opt_closureNamespace Closure namespace to associate with\n   *     this module.\n   */\n  goog.LoadController.prototype.registerEs6ModuleExports = function(\n      path, exports, opt_closureNamespace) {};\n\n\n  /**\n   * Sets the current module state.\n   *\n   * @param {goog.ModuleType} type Type of module.\n   */\n  goog.LoadController.prototype.setModuleState = function(type) {};\n\n\n  /**\n   * Clears the current module state.\n   */\n  goog.LoadController.prototype.clearModuleState = function() {};\n\n\n  /**\n   * Registers a callback to call once the dependency is actually requested\n   * via goog.require + all of the immediate dependencies have been loaded or\n   * all other files have been loaded. Allows for lazy loading until\n   * require'd without pausing dependency loading, which is needed on old IE.\n   *\n   * @param {!Function} callback\n   */\n  goog.LoadController.prototype.defer = function(callback) {};\n\n\n  /**\n   * @return {boolean}\n   */\n  goog.LoadController.prototype.areDepsLoaded = function() {};\n\n\n  /**\n   * Basic super class for all dependencies Closure Library can load.\n   *\n   * This default implementation is designed to load untranspiled, non-module\n   * scripts in a web broswer.\n   *\n   * For transpiled non-goog.module files {@see goog.TranspiledDependency}.\n   * For goog.modules see {@see goog.GoogModuleDependency}.\n   * For untranspiled ES6 modules {@see goog.Es6ModuleDependency}.\n   *\n   * @param {string} path Absolute path of this script.\n   * @param {string} relativePath Path of this script relative to goog.basePath.\n   * @param {!Array<string>} provides goog.provided or goog.module symbols\n   *     in this file.\n   * @param {!Array<string>} requires goog symbols or relative paths to Closure\n   *     this depends on.\n   * @param {!Object<string, string>} loadFlags\n   * @struct @constructor\n   */\n  goog.Dependency = function(\n      path, relativePath, provides, requires, loadFlags) {\n    /** @const */\n    this.path = path;\n    /** @const */\n    this.relativePath = relativePath;\n    /** @const */\n    this.provides = provides;\n    /** @const */\n    this.requires = requires;\n    /** @const */\n    this.loadFlags = loadFlags;\n    /** @private {boolean} */\n    this.loaded_ = false;\n    /** @private {!Array<function()>} */\n    this.loadCallbacks_ = [];\n  };\n\n\n  /**\n   * @param {function()} callback Callback to fire as soon as this has loaded.\n   * @final\n   */\n  goog.Dependency.prototype.onLoad = function(callback) {\n    if (this.loaded_) {\n      callback();\n    } else {\n      this.loadCallbacks_.push(callback);\n    }\n  };\n\n\n  /**\n   * Marks this dependency as loaded and fires any callbacks registered with\n   * onLoad.\n   * @final\n   */\n  goog.Dependency.prototype.loaded = function() {\n    this.loaded_ = true;\n    var callbacks = this.loadCallbacks_;\n    this.loadCallbacks_ = [];\n    for (var i = 0; i < callbacks.length; i++) {\n      callbacks[i]();\n    }\n  };\n\n\n  /**\n   * Whether or not document.written / appended script tags should be deferred.\n   *\n   * @private {boolean}\n   */\n  goog.Dependency.defer_ = false;\n\n\n  /**\n   * Map of script ready / state change callbacks. Old IE cannot handle putting\n   * these properties on goog.global.\n   *\n   * @private @const {!Object<string, function(?):undefined>}\n   */\n  goog.Dependency.callbackMap_ = {};\n\n\n  /**\n   * @param {function(...?):?} callback\n   * @return {string}\n   * @private\n   */\n  goog.Dependency.registerCallback_ = function(callback) {\n    var key = Math.random().toString(32);\n    goog.Dependency.callbackMap_[key] = callback;\n    return key;\n  };\n\n\n  /**\n   * @param {string} key\n   * @private\n   */\n  goog.Dependency.unregisterCallback_ = function(key) {\n    delete goog.Dependency.callbackMap_[key];\n  };\n\n\n  /**\n   * @param {string} key\n   * @param {...?} var_args\n   * @private\n   * @suppress {unusedPrivateMembers}\n   */\n  goog.Dependency.callback_ = function(key, var_args) {\n    if (key in goog.Dependency.callbackMap_) {\n      var callback = goog.Dependency.callbackMap_[key];\n      var args = [];\n      for (var i = 1; i < arguments.length; i++) {\n        args.push(arguments[i]);\n      }\n      callback.apply(undefined, args);\n    } else {\n      var errorMessage = 'Callback key ' + key +\n          ' does not exist (was base.js loaded more than once?).';\n      throw Error(errorMessage);\n    }\n  };\n\n\n  /**\n   * Starts loading this dependency. This dependency can pause loading if it\n   * needs to and resume it later via the controller interface.\n   *\n   * When this is loaded it should call controller.loaded(). Note that this will\n   * end up calling the loaded method of this dependency; there is no need to\n   * call it explicitly.\n   *\n   * @param {!goog.LoadController} controller\n   */\n  goog.Dependency.prototype.load = function(controller) {\n    if (goog.global.CLOSURE_IMPORT_SCRIPT) {\n      if (goog.global.CLOSURE_IMPORT_SCRIPT(this.path)) {\n        controller.loaded();\n      } else {\n        controller.pause();\n      }\n      return;\n    }\n\n    if (!goog.inHtmlDocument_()) {\n      goog.logToConsole_(\n          'Cannot use default debug loader outside of HTML documents.');\n      if (this.relativePath == 'deps.js') {\n        // Some old code is relying on base.js auto loading deps.js failing with\n        // no error before later setting CLOSURE_IMPORT_SCRIPT.\n        // CLOSURE_IMPORT_SCRIPT should be set *before* base.js is loaded, or\n        // CLOSURE_NO_DEPS set to true.\n        goog.logToConsole_(\n            'Consider setting CLOSURE_IMPORT_SCRIPT before loading base.js, ' +\n            'or seting CLOSURE_NO_DEPS to true.');\n        controller.loaded();\n      } else {\n        controller.pause();\n      }\n      return;\n    }\n\n    /** @type {!HTMLDocument} */\n    var doc = goog.global.document;\n\n    // If the user tries to require a new symbol after document load,\n    // something has gone terribly wrong. Doing a document.write would\n    // wipe out the page. This does not apply to the CSP-compliant method\n    // of writing script tags.\n    if (doc.readyState == 'complete' &&\n        !goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING) {\n      // Certain test frameworks load base.js multiple times, which tries\n      // to write deps.js each time. If that happens, just fail silently.\n      // These frameworks wipe the page between each load of base.js, so this\n      // is OK.\n      var isDeps = /\\bdeps.js$/.test(this.path);\n      if (isDeps) {\n        controller.loaded();\n        return;\n      } else {\n        throw Error('Cannot write \"' + this.path + '\" after document load');\n      }\n    }\n\n    if (!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING &&\n        goog.isDocumentLoading_()) {\n      var key = goog.Dependency.registerCallback_(function(script) {\n        if (!goog.DebugLoader_.IS_OLD_IE_ || script.readyState == 'complete') {\n          goog.Dependency.unregisterCallback_(key);\n          controller.loaded();\n        }\n      });\n      var nonceAttr = !goog.DebugLoader_.IS_OLD_IE_ && goog.getScriptNonce() ?\n          ' nonce=\"' + goog.getScriptNonce() + '\"' :\n          '';\n      var event =\n          goog.DebugLoader_.IS_OLD_IE_ ? 'onreadystatechange' : 'onload';\n      var defer = goog.Dependency.defer_ ? 'defer' : '';\n      doc.write(\n          '<script src=\"' + this.path + '\" ' + event +\n          '=\"goog.Dependency.callback_(\\'' + key +\n          '\\', this)\" type=\"text/javascript\" ' + defer + nonceAttr + '><' +\n          '/script>');\n    } else {\n      var scriptEl =\n          /** @type {!HTMLScriptElement} */ (doc.createElement('script'));\n      scriptEl.defer = goog.Dependency.defer_;\n      scriptEl.async = false;\n      scriptEl.type = 'text/javascript';\n\n      // If CSP nonces are used, propagate them to dynamically created scripts.\n      // This is necessary to allow nonce-based CSPs without 'strict-dynamic'.\n      var nonce = goog.getScriptNonce();\n      if (nonce) {\n        scriptEl.setAttribute('nonce', nonce);\n      }\n\n      if (goog.DebugLoader_.IS_OLD_IE_) {\n        // Execution order is not guaranteed on old IE, halt loading and write\n        // these scripts one at a time, after each loads.\n        controller.pause();\n        scriptEl.onreadystatechange = function() {\n          if (scriptEl.readyState == 'loaded' ||\n              scriptEl.readyState == 'complete') {\n            controller.loaded();\n            controller.resume();\n          }\n        };\n      } else {\n        scriptEl.onload = function() {\n          scriptEl.onload = null;\n          controller.loaded();\n        };\n      }\n\n      scriptEl.src = this.path;\n      doc.head.appendChild(scriptEl);\n    }\n  };\n\n\n  /**\n   * @param {string} path Absolute path of this script.\n   * @param {string} relativePath Path of this script relative to goog.basePath.\n   * @param {!Array<string>} provides Should be an empty array.\n   *     TODO(johnplaisted) add support for adding closure namespaces to ES6\n   *     modules for interop purposes.\n   * @param {!Array<string>} requires goog symbols or relative paths to Closure\n   *     this depends on.\n   * @param {!Object<string, string>} loadFlags\n   * @struct @constructor\n   * @extends {goog.Dependency}\n   */\n  goog.Es6ModuleDependency = function(\n      path, relativePath, provides, requires, loadFlags) {\n    goog.Es6ModuleDependency.base(\n        this, 'constructor', path, relativePath, provides, requires, loadFlags);\n  };\n  goog.inherits(goog.Es6ModuleDependency, goog.Dependency);\n\n\n  /** @override */\n  goog.Es6ModuleDependency.prototype.load = function(controller) {\n    if (goog.global.CLOSURE_IMPORT_SCRIPT) {\n      if (goog.global.CLOSURE_IMPORT_SCRIPT(this.path)) {\n        controller.loaded();\n      } else {\n        controller.pause();\n      }\n      return;\n    }\n\n    if (!goog.inHtmlDocument_()) {\n      goog.logToConsole_(\n          'Cannot use default debug loader outside of HTML documents.');\n      controller.pause();\n      return;\n    }\n\n    /** @type {!HTMLDocument} */\n    var doc = goog.global.document;\n\n    var dep = this;\n\n    // TODO(johnplaisted): Does document.writing really speed up anything? Any\n    // difference between this and just waiting for interactive mode and then\n    // appending?\n    function write(src, contents) {\n      if (contents) {\n        doc.write(\n            '<script type=\"module\" crossorigin>' + contents + '</' +\n            'script>');\n      } else {\n        doc.write(\n            '<script type=\"module\" crossorigin src=\"' + src + '\"></' +\n            'script>');\n      }\n    }\n\n    function append(src, contents) {\n      var scriptEl =\n          /** @type {!HTMLScriptElement} */ (doc.createElement('script'));\n      scriptEl.defer = true;\n      scriptEl.async = false;\n      scriptEl.type = 'module';\n      scriptEl.setAttribute('crossorigin', true);\n\n      // If CSP nonces are used, propagate them to dynamically created scripts.\n      // This is necessary to allow nonce-based CSPs without 'strict-dynamic'.\n      var nonce = goog.getScriptNonce();\n      if (nonce) {\n        scriptEl.setAttribute('nonce', nonce);\n      }\n\n      if (contents) {\n        scriptEl.textContent = contents;\n      } else {\n        scriptEl.src = src;\n      }\n\n      doc.head.appendChild(scriptEl);\n    }\n\n    var create;\n\n    if (goog.isDocumentLoading_()) {\n      create = write;\n      // We can ONLY call document.write if we are guaranteed that any\n      // non-module script tags document.written after this are deferred.\n      // Small optimization, in theory document.writing is faster.\n      goog.Dependency.defer_ = true;\n    } else {\n      create = append;\n    }\n\n    // Write 4 separate tags here:\n    // 1) Sets the module state at the correct time (just before execution).\n    // 2) A src node for this, which just hopefully lets the browser load it a\n    //    little early (no need to parse #3).\n    // 3) Import the module and register it.\n    // 4) Clear the module state at the correct time. Guarnteed to run even\n    //    if there is an error in the module (#3 will not run if there is an\n    //    error in the module).\n    var beforeKey = goog.Dependency.registerCallback_(function() {\n      goog.Dependency.unregisterCallback_(beforeKey);\n      controller.setModuleState(goog.ModuleType.ES6);\n    });\n    create(undefined, 'goog.Dependency.callback_(\"' + beforeKey + '\")');\n\n    // TODO(johnplaisted): Does this really speed up anything?\n    create(this.path, undefined);\n\n    var registerKey = goog.Dependency.registerCallback_(function(exports) {\n      goog.Dependency.unregisterCallback_(registerKey);\n      controller.registerEs6ModuleExports(\n          dep.path, exports, goog.moduleLoaderState_.moduleName);\n    });\n    create(\n        undefined,\n        'import * as m from \"' + this.path + '\"; goog.Dependency.callback_(\"' +\n            registerKey + '\", m)');\n\n    var afterKey = goog.Dependency.registerCallback_(function() {\n      goog.Dependency.unregisterCallback_(afterKey);\n      controller.clearModuleState();\n      controller.loaded();\n    });\n    create(undefined, 'goog.Dependency.callback_(\"' + afterKey + '\")');\n  };\n\n\n  /**\n   * Superclass of any dependency that needs to be loaded into memory,\n   * transformed, and then eval'd (goog.modules and transpiled files).\n   *\n   * @param {string} path Absolute path of this script.\n   * @param {string} relativePath Path of this script relative to goog.basePath.\n   * @param {!Array<string>} provides goog.provided or goog.module symbols\n   *     in this file.\n   * @param {!Array<string>} requires goog symbols or relative paths to Closure\n   *     this depends on.\n   * @param {!Object<string, string>} loadFlags\n   * @struct @constructor @abstract\n   * @extends {goog.Dependency}\n   */\n  goog.TransformedDependency = function(\n      path, relativePath, provides, requires, loadFlags) {\n    goog.TransformedDependency.base(\n        this, 'constructor', path, relativePath, provides, requires, loadFlags);\n    /** @private {?string} */\n    this.contents_ = null;\n  };\n  goog.inherits(goog.TransformedDependency, goog.Dependency);\n\n\n  /** @override */\n  goog.TransformedDependency.prototype.load = function(controller) {\n    var dep = this;\n\n    function fetch() {\n      dep.contents_ = goog.loadFileSync_(dep.path);\n\n      if (dep.contents_) {\n        dep.contents_ = dep.transform(dep.contents_);\n        if (dep.contents_) {\n          dep.contents_ += '\\n//# sourceURL=' + dep.path;\n        }\n      }\n    }\n\n    if (goog.global.CLOSURE_IMPORT_SCRIPT) {\n      fetch();\n      if (this.contents_ &&\n          goog.global.CLOSURE_IMPORT_SCRIPT('', this.contents_)) {\n        this.contents_ = null;\n        controller.loaded();\n      } else {\n        controller.pause();\n      }\n      return;\n    }\n\n    var isEs6 = this.loadFlags['module'] == goog.ModuleType.ES6;\n\n    function load() {\n      fetch();\n\n      if (!dep.contents_) {\n        // loadFileSync_ or transform are responsible. Assume they logged an\n        // error.\n        return;\n      }\n\n      if (isEs6) {\n        controller.setModuleState(goog.ModuleType.ES6);\n      }\n\n      var namespace;\n\n      try {\n        var contents = dep.contents_;\n        dep.contents_ = null;\n        goog.globalEval(contents);\n        if (isEs6) {\n          namespace = goog.moduleLoaderState_.moduleName;\n        }\n      } finally {\n        if (isEs6) {\n          controller.clearModuleState();\n        }\n      }\n\n      if (isEs6) {\n        // Due to circular dependencies this may not be available for require\n        // right now.\n        goog.global['$jscomp']['require']['ensure']([dep.path], function() {\n          controller.registerEs6ModuleExports(\n              dep.path, goog.global['$jscomp']['require'](dep.path), namespace);\n        });\n      }\n\n      controller.loaded();\n    }\n\n    // Do not fetch now; in FireFox 47 the synchronous XHR doesn't block all\n    // events. If we fetched now and then document.write'd the contents the\n    // document.write would be an eval and would execute too soon! Instead write\n    // a script tag to fetch and eval synchronously at the correct time.\n    function fetchInOwnScriptThenLoad() {\n      /** @type {!HTMLDocument} */\n      var doc = goog.global.document;\n\n      var key = goog.Dependency.registerCallback_(function() {\n        goog.Dependency.unregisterCallback_(key);\n        load();\n      });\n\n      doc.write(\n          '<script type=\"text/javascript\">' +\n          goog.protectScriptTag_('goog.Dependency.callback_(\"' + key + '\");') +\n          '</' +\n          'script>');\n    }\n\n    // If one thing is pending it is this.\n    var anythingElsePending = controller.pending().length > 1;\n\n    // If anything else is loading we need to lazy load due to bugs in old IE.\n    // Specifically script tags with src and script tags with contents could\n    // execute out of order if document.write is used, so we cannot use\n    // document.write. Do not pause here; it breaks old IE as well.\n    var useOldIeWorkAround =\n        anythingElsePending && goog.DebugLoader_.IS_OLD_IE_;\n\n    // Additionally if we are meant to defer scripts but the page is still\n    // loading (e.g. an ES6 module is loading) then also defer. Or if we are\n    // meant to defer and anything else is pending then defer (those may be\n    // scripts that did not need transformation and are just script tags with\n    // defer set to true, and we need to evaluate after that deferred script).\n    var needsAsyncLoading = goog.Dependency.defer_ &&\n        (anythingElsePending || goog.isDocumentLoading_());\n\n    if (useOldIeWorkAround || needsAsyncLoading) {\n      // Note that we only defer when we have to rather than 100% of the time.\n      // Always defering would work, but then in theory the order of\n      // goog.require calls would then matter. We want to enforce that most of\n      // the time the order of the require calls does not matter.\n      controller.defer(function() {\n        load();\n      });\n      return;\n    }\n\n    if (isEs6 && goog.inHtmlDocument_() && goog.isDocumentLoading_()) {\n      goog.Dependency.defer_ = true;\n      // TODO(johnplaisted): Externs are missing onreadystatechange for\n      // HTMLDocument.\n      /** @type {?} */\n      var doc = goog.global.document;\n      // Transpiled ES6 modules still need to load like regular ES6 modules,\n      // aka only after the document is interactive.\n      controller.pause();\n      var oldCallback = doc.onreadystatechange;\n      doc.onreadystatechange = function() {\n        if (doc.attachEvent ? doc.readyState == 'complete' :\n                              doc.readyState == 'interactive') {\n          doc.onreadystatechange = oldCallback;\n          load();\n          controller.resume();\n        }\n        if (goog.isFunction(oldCallback)) {\n          oldCallback.apply(undefined, arguments);\n        }\n      };\n    } else {\n      // Always eval on old IE.\n      if (goog.DebugLoader_.IS_OLD_IE_ || !goog.inHtmlDocument_() ||\n          !goog.isDocumentLoading_()) {\n        load();\n      } else {\n        fetchInOwnScriptThenLoad();\n      }\n    }\n  };\n\n\n  /**\n   * @param {string} contents\n   * @return {string}\n   * @abstract\n   */\n  goog.TransformedDependency.prototype.transform = function(contents) {};\n\n\n  /**\n   * Any non-goog.module dependency which needs to be transpiled before eval.\n   *\n   * @param {string} path Absolute path of this script.\n   * @param {string} relativePath Path of this script relative to goog.basePath.\n   * @param {!Array<string>} provides goog.provided or goog.module symbols\n   *     in this file.\n   * @param {!Array<string>} requires goog symbols or relative paths to Closure\n   *     this depends on.\n   * @param {!Object<string, string>} loadFlags\n   * @param {!goog.Transpiler} transpiler\n   * @struct @constructor\n   * @extends {goog.TransformedDependency}\n   */\n  goog.TranspiledDependency = function(\n      path, relativePath, provides, requires, loadFlags, transpiler) {\n    goog.TranspiledDependency.base(\n        this, 'constructor', path, relativePath, provides, requires, loadFlags);\n    /** @protected @const*/\n    this.transpiler = transpiler;\n  };\n  goog.inherits(goog.TranspiledDependency, goog.TransformedDependency);\n\n\n  /** @override */\n  goog.TranspiledDependency.prototype.transform = function(contents) {\n    return this.transpiler.transpile(contents, this.path);\n  };\n\n\n  /**\n   * A goog.module, transpiled or not. Will always perform some minimal\n   * transformation even when not transpiled to wrap in a goog.loadModule\n   * statement.\n   *\n   * @param {string} path Absolute path of this script.\n   * @param {string} relativePath Path of this script relative to goog.basePath.\n   * @param {!Array<string>} provides goog.provided or goog.module symbols\n   *     in this file.\n   * @param {!Array<string>} requires goog symbols or relative paths to Closure\n   *     this depends on.\n   * @param {!Object<string, string>} loadFlags\n   * @param {boolean} needsTranspile\n   * @param {!goog.Transpiler} transpiler\n   * @struct @constructor\n   * @extends {goog.TransformedDependency}\n   */\n  goog.GoogModuleDependency = function(\n      path, relativePath, provides, requires, loadFlags, needsTranspile,\n      transpiler) {\n    goog.GoogModuleDependency.base(\n        this, 'constructor', path, relativePath, provides, requires, loadFlags);\n    /** @private @const */\n    this.needsTranspile_ = needsTranspile;\n    /** @private @const */\n    this.transpiler_ = transpiler;\n  };\n  goog.inherits(goog.GoogModuleDependency, goog.TransformedDependency);\n\n\n  /** @override */\n  goog.GoogModuleDependency.prototype.transform = function(contents) {\n    if (this.needsTranspile_) {\n      contents = this.transpiler_.transpile(contents, this.path);\n    }\n\n    if (!goog.LOAD_MODULE_USING_EVAL || !goog.isDef(goog.global.JSON)) {\n      return '' +\n          'goog.loadModule(function(exports) {' +\n          '\"use strict\";' + contents +\n          '\\n' +  // terminate any trailing single line comment.\n          ';return exports' +\n          '});' +\n          '\\n//# sourceURL=' + this.path + '\\n';\n    } else {\n      return '' +\n          'goog.loadModule(' +\n          goog.global.JSON.stringify(\n              contents + '\\n//# sourceURL=' + this.path + '\\n') +\n          ');';\n    }\n  };\n\n\n  /**\n   * Whether the browser is IE9 or earlier, which needs special handling\n   * for deferred modules.\n   * @const @private {boolean}\n   */\n  goog.DebugLoader_.IS_OLD_IE_ =\n      !!(!goog.global.atob && goog.global.document && goog.global.document.all);\n\n\n  /**\n   * @param {string} relPath\n   * @param {!Array<string>|undefined} provides\n   * @param {!Array<string>} requires\n   * @param {boolean|!Object<string>=} opt_loadFlags\n   * @see goog.addDependency\n   */\n  goog.DebugLoader_.prototype.addDependency = function(\n      relPath, provides, requires, opt_loadFlags) {\n    provides = provides || [];\n    relPath = relPath.replace(/\\\\/g, '/');\n    var path = goog.normalizePath_(goog.basePath + relPath);\n    if (!opt_loadFlags || typeof opt_loadFlags === 'boolean') {\n      opt_loadFlags = opt_loadFlags ? {'module': goog.ModuleType.GOOG} : {};\n    }\n    var dep = this.factory_.createDependency(\n        path, relPath, provides, requires, opt_loadFlags,\n        goog.transpiler_.needsTranspile(\n            opt_loadFlags['lang'] || 'es3', opt_loadFlags['module']));\n    this.dependencies_[path] = dep;\n    for (var i = 0; i < provides.length; i++) {\n      this.idToPath_[provides[i]] = path;\n    }\n    this.idToPath_[relPath] = path;\n  };\n\n\n  /**\n   * Creates goog.Dependency instances for the debug loader to load.\n   *\n   * Should be overridden to have the debug loader use custom subclasses of\n   * goog.Dependency.\n   *\n   * @param {!goog.Transpiler} transpiler\n   * @struct @constructor\n   */\n  goog.DependencyFactory = function(transpiler) {\n    /** @protected @const */\n    this.transpiler = transpiler;\n  };\n\n\n  /**\n   * @param {string} path Absolute path of the file.\n   * @param {string} relativePath Path relative to closure\u2019s base.js.\n   * @param {!Array<string>} provides Array of provided goog.provide/module ids.\n   * @param {!Array<string>} requires Array of required goog.provide/module /\n   *     relative ES6 module paths.\n   * @param {!Object<string, string>} loadFlags\n   * @param {boolean} needsTranspile True if the file needs to be transpiled\n   *     per the goog.Transpiler.\n   * @return {!goog.Dependency}\n   */\n  goog.DependencyFactory.prototype.createDependency = function(\n      path, relativePath, provides, requires, loadFlags, needsTranspile) {\n\n    if (loadFlags['module'] == goog.ModuleType.GOOG) {\n      return new goog.GoogModuleDependency(\n          path, relativePath, provides, requires, loadFlags, needsTranspile,\n          this.transpiler);\n    } else if (needsTranspile) {\n      return new goog.TranspiledDependency(\n          path, relativePath, provides, requires, loadFlags, this.transpiler);\n    } else {\n      if (loadFlags['module'] == goog.ModuleType.ES6) {\n        return new goog.Es6ModuleDependency(\n            path, relativePath, provides, requires, loadFlags);\n      } else {\n        return new goog.Dependency(\n            path, relativePath, provides, requires, loadFlags);\n      }\n    }\n  };\n\n\n  /** @private @const */\n  goog.debugLoader_ = new goog.DebugLoader_();\n\n\n  /**\n   * Loads the Closure Dependency file.\n   *\n   * Exposed a public function so CLOSURE_NO_DEPS can be set to false, base\n   * loaded, setDependencyFactory called, and then this called. i.e. allows\n   * custom loading of the deps file.\n   */\n  goog.loadClosureDeps = function() {\n    goog.debugLoader_.loadClosureDeps();\n  };\n\n\n  /**\n   * Sets the dependency factory, which can be used to create custom\n   * goog.Dependency implementations to control how dependencies are loaded.\n   *\n   * Note: if you wish to call this function and provide your own implemnetation\n   * it is a wise idea to set CLOSURE_NO_DEPS to true, otherwise the dependency\n   * file and all of its goog.addDependency calls will use the default factory.\n   * You can call goog.loadClosureDeps to load the Closure dependency file\n   * later, after your factory is injected.\n   *\n   * @param {!goog.DependencyFactory} factory\n   */\n  goog.setDependencyFactory = function(factory) {\n    goog.debugLoader_.setDependencyFactory(factory);\n  };\n\n\n  if (!goog.global.CLOSURE_NO_DEPS) {\n    goog.debugLoader_.loadClosureDeps();\n  }\n\n\n  /**\n   * Bootstraps the given namespaces and calls the callback once they are\n   * available either via goog.require. This is a replacement for using\n   * `goog.require` to bootstrap Closure Javascript. Previously a `goog.require`\n   * in an HTML file would guarantee that the require'd namespace was available\n   * in the next immediate script tag. With ES6 modules this no longer a\n   * guarantee.\n   *\n   * @param {!Array<string>} namespaces\n   * @param {function(): ?} callback Function to call once all the namespaces\n   *     have loaded. Always called asynchronously.\n   */\n  goog.bootstrap = function(namespaces, callback) {\n    goog.debugLoader_.bootstrap(namespaces, callback);\n  };\n}\n","// Copyright 2009 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Provides a base class for custom Error objects such that the\n * stack is correctly maintained.\n *\n * You should never need to throw goog.debug.Error(msg) directly, Error(msg) is\n * sufficient.\n *\n */\n\ngoog.provide('goog.debug.Error');\n\n\n\n/**\n * Base class for custom error objects.\n * @param {*=} opt_msg The message associated with the error.\n * @constructor\n * @extends {Error}\n */\ngoog.debug.Error = function(opt_msg) {\n\n  // Attempt to ensure there is a stack trace.\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, goog.debug.Error);\n  } else {\n    var stack = new Error().stack;\n    if (stack) {\n      /** @override */\n      this.stack = stack;\n    }\n  }\n\n  if (opt_msg) {\n    /** @override */\n    this.message = String(opt_msg);\n  }\n\n  /**\n   * Whether to report this error to the server. Setting this to false will\n   * cause the error reporter to not report the error back to the server,\n   * which can be useful if the client knows that the error has already been\n   * logged on the server.\n   * @type {boolean}\n   */\n  this.reportErrorToServer = true;\n};\ngoog.inherits(goog.debug.Error, Error);\n\n\n/** @override */\ngoog.debug.Error.prototype.name = 'CustomError';\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Definition of goog.dom.NodeType.\n */\n\ngoog.provide('goog.dom.NodeType');\n\n\n/**\n * Constants for the nodeType attribute in the Node interface.\n *\n * These constants match those specified in the Node interface. These are\n * usually present on the Node object in recent browsers, but not in older\n * browsers (specifically, early IEs) and thus are given here.\n *\n * In some browsers (early IEs), these are not defined on the Node object,\n * so they are provided here.\n *\n * See http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1950641247\n * @enum {number}\n */\ngoog.dom.NodeType = {\n  ELEMENT: 1,\n  ATTRIBUTE: 2,\n  TEXT: 3,\n  CDATA_SECTION: 4,\n  ENTITY_REFERENCE: 5,\n  ENTITY: 6,\n  PROCESSING_INSTRUCTION: 7,\n  COMMENT: 8,\n  DOCUMENT: 9,\n  DOCUMENT_TYPE: 10,\n  DOCUMENT_FRAGMENT: 11,\n  NOTATION: 12\n};\n","// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities to check the preconditions, postconditions and\n * invariants runtime.\n *\n * Methods in this package should be given special treatment by the compiler\n * for type-inference. For example, <code>goog.asserts.assert(foo)</code>\n * will restrict <code>foo</code> to a truthy value.\n *\n * The compiler has an option to disable asserts. So code like:\n * <code>\n * var x = goog.asserts.assert(foo()); goog.asserts.assert(bar());\n * </code>\n * will be transformed into:\n * <code>\n * var x = foo();\n * </code>\n * The compiler will leave in foo() (because its return value is used),\n * but it will remove bar() because it assumes it does not have side-effects.\n *\n * @author agrieve@google.com (Andrew Grieve)\n */\n\ngoog.provide('goog.asserts');\ngoog.provide('goog.asserts.AssertionError');\n\ngoog.require('goog.debug.Error');\ngoog.require('goog.dom.NodeType');\n\n\n/**\n * @define {boolean} Whether to strip out asserts or to leave them in.\n */\ngoog.define('goog.asserts.ENABLE_ASSERTS', goog.DEBUG);\n\n\n\n/**\n * Error object for failed assertions.\n * @param {string} messagePattern The pattern that was used to form message.\n * @param {!Array<*>} messageArgs The items to substitute into the pattern.\n * @constructor\n * @extends {goog.debug.Error}\n * @final\n */\ngoog.asserts.AssertionError = function(messagePattern, messageArgs) {\n  goog.debug.Error.call(this, goog.asserts.subs_(messagePattern, messageArgs));\n\n  /**\n   * The message pattern used to format the error message. Error handlers can\n   * use this to uniquely identify the assertion.\n   * @type {string}\n   */\n  this.messagePattern = messagePattern;\n};\ngoog.inherits(goog.asserts.AssertionError, goog.debug.Error);\n\n\n/** @override */\ngoog.asserts.AssertionError.prototype.name = 'AssertionError';\n\n\n/**\n * The default error handler.\n * @param {!goog.asserts.AssertionError} e The exception to be handled.\n */\ngoog.asserts.DEFAULT_ERROR_HANDLER = function(e) {\n  throw e;\n};\n\n\n/**\n * The handler responsible for throwing or logging assertion errors.\n * @private {function(!goog.asserts.AssertionError)}\n */\ngoog.asserts.errorHandler_ = goog.asserts.DEFAULT_ERROR_HANDLER;\n\n\n/**\n * Does simple python-style string substitution.\n * subs(\"foo%s hot%s\", \"bar\", \"dog\") becomes \"foobar hotdog\".\n * @param {string} pattern The string containing the pattern.\n * @param {!Array<*>} subs The items to substitute into the pattern.\n * @return {string} A copy of `str` in which each occurrence of\n *     {@code %s} has been replaced an argument from `var_args`.\n * @private\n */\ngoog.asserts.subs_ = function(pattern, subs) {\n  var splitParts = pattern.split('%s');\n  var returnString = '';\n\n  // Replace up to the last split part. We are inserting in the\n  // positions between split parts.\n  var subLast = splitParts.length - 1;\n  for (var i = 0; i < subLast; i++) {\n    // keep unsupplied as '%s'\n    var sub = (i < subs.length) ? subs[i] : '%s';\n    returnString += splitParts[i] + sub;\n  }\n  return returnString + splitParts[subLast];\n};\n\n\n/**\n * Throws an exception with the given message and \"Assertion failed\" prefixed\n * onto it.\n * @param {string} defaultMessage The message to use if givenMessage is empty.\n * @param {Array<*>} defaultArgs The substitution arguments for defaultMessage.\n * @param {string|undefined} givenMessage Message supplied by the caller.\n * @param {Array<*>} givenArgs The substitution arguments for givenMessage.\n * @throws {goog.asserts.AssertionError} When the value is not a number.\n * @private\n */\ngoog.asserts.doAssertFailure_ = function(\n    defaultMessage, defaultArgs, givenMessage, givenArgs) {\n  var message = 'Assertion failed';\n  if (givenMessage) {\n    message += ': ' + givenMessage;\n    var args = givenArgs;\n  } else if (defaultMessage) {\n    message += ': ' + defaultMessage;\n    args = defaultArgs;\n  }\n  // The '' + works around an Opera 10 bug in the unit tests. Without it,\n  // a stack trace is added to var message above. With this, a stack trace is\n  // not added until this line (it causes the extra garbage to be added after\n  // the assertion message instead of in the middle of it).\n  var e = new goog.asserts.AssertionError('' + message, args || []);\n  goog.asserts.errorHandler_(e);\n};\n\n\n/**\n * Sets a custom error handler that can be used to customize the behavior of\n * assertion failures, for example by turning all assertion failures into log\n * messages.\n * @param {function(!goog.asserts.AssertionError)} errorHandler\n */\ngoog.asserts.setErrorHandler = function(errorHandler) {\n  if (goog.asserts.ENABLE_ASSERTS) {\n    goog.asserts.errorHandler_ = errorHandler;\n  }\n};\n\n\n/**\n * Checks if the condition evaluates to true if goog.asserts.ENABLE_ASSERTS is\n * true.\n * @template T\n * @param {T} condition The condition to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {T} The value of the condition.\n * @throws {goog.asserts.AssertionError} When the condition evaluates to false.\n */\ngoog.asserts.assert = function(condition, opt_message, var_args) {\n  if (goog.asserts.ENABLE_ASSERTS && !condition) {\n    goog.asserts.doAssertFailure_(\n        '', null, opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return condition;\n};\n\n\n/**\n * Fails if goog.asserts.ENABLE_ASSERTS is true. This function is useful in case\n * when we want to add a check in the unreachable area like switch-case\n * statement:\n *\n * <pre>\n *  switch(type) {\n *    case FOO: doSomething(); break;\n *    case BAR: doSomethingElse(); break;\n *    default: goog.asserts.fail('Unrecognized type: ' + type);\n *      // We have only 2 types - \"default:\" section is unreachable code.\n *  }\n * </pre>\n *\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @throws {goog.asserts.AssertionError} Failure.\n */\ngoog.asserts.fail = function(opt_message, var_args) {\n  if (goog.asserts.ENABLE_ASSERTS) {\n    goog.asserts.errorHandler_(\n        new goog.asserts.AssertionError(\n            'Failure' + (opt_message ? ': ' + opt_message : ''),\n            Array.prototype.slice.call(arguments, 1)));\n  }\n};\n\n\n/**\n * Checks if the value is a number if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {number} The value, guaranteed to be a number when asserts enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a number.\n */\ngoog.asserts.assertNumber = function(value, opt_message, var_args) {\n  if (goog.asserts.ENABLE_ASSERTS && !goog.isNumber(value)) {\n    goog.asserts.doAssertFailure_(\n        'Expected number but got %s: %s.', [goog.typeOf(value), value],\n        opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {number} */ (value);\n};\n\n\n/**\n * Checks if the value is a string if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {string} The value, guaranteed to be a string when asserts enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a string.\n */\ngoog.asserts.assertString = function(value, opt_message, var_args) {\n  if (goog.asserts.ENABLE_ASSERTS && !goog.isString(value)) {\n    goog.asserts.doAssertFailure_(\n        'Expected string but got %s: %s.', [goog.typeOf(value), value],\n        opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {string} */ (value);\n};\n\n\n/**\n * Checks if the value is a function if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Function} The value, guaranteed to be a function when asserts\n *     enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a function.\n */\ngoog.asserts.assertFunction = function(value, opt_message, var_args) {\n  if (goog.asserts.ENABLE_ASSERTS && !goog.isFunction(value)) {\n    goog.asserts.doAssertFailure_(\n        'Expected function but got %s: %s.', [goog.typeOf(value), value],\n        opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Function} */ (value);\n};\n\n\n/**\n * Checks if the value is an Object if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Object} The value, guaranteed to be a non-null object.\n * @throws {goog.asserts.AssertionError} When the value is not an object.\n */\ngoog.asserts.assertObject = function(value, opt_message, var_args) {\n  if (goog.asserts.ENABLE_ASSERTS && !goog.isObject(value)) {\n    goog.asserts.doAssertFailure_(\n        'Expected object but got %s: %s.', [goog.typeOf(value), value],\n        opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Object} */ (value);\n};\n\n\n/**\n * Checks if the value is an Array if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Array<?>} The value, guaranteed to be a non-null array.\n * @throws {goog.asserts.AssertionError} When the value is not an array.\n */\ngoog.asserts.assertArray = function(value, opt_message, var_args) {\n  if (goog.asserts.ENABLE_ASSERTS && !goog.isArray(value)) {\n    goog.asserts.doAssertFailure_(\n        'Expected array but got %s: %s.', [goog.typeOf(value), value],\n        opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Array<?>} */ (value);\n};\n\n\n/**\n * Checks if the value is a boolean if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {boolean} The value, guaranteed to be a boolean when asserts are\n *     enabled.\n * @throws {goog.asserts.AssertionError} When the value is not a boolean.\n */\ngoog.asserts.assertBoolean = function(value, opt_message, var_args) {\n  if (goog.asserts.ENABLE_ASSERTS && !goog.isBoolean(value)) {\n    goog.asserts.doAssertFailure_(\n        'Expected boolean but got %s: %s.', [goog.typeOf(value), value],\n        opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {boolean} */ (value);\n};\n\n\n/**\n * Checks if the value is a DOM Element if goog.asserts.ENABLE_ASSERTS is true.\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @return {!Element} The value, likely to be a DOM Element when asserts are\n *     enabled.\n * @throws {goog.asserts.AssertionError} When the value is not an Element.\n */\ngoog.asserts.assertElement = function(value, opt_message, var_args) {\n  if (goog.asserts.ENABLE_ASSERTS &&\n      (!goog.isObject(value) || value.nodeType != goog.dom.NodeType.ELEMENT)) {\n    goog.asserts.doAssertFailure_(\n        'Expected Element but got %s: %s.', [goog.typeOf(value), value],\n        opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {!Element} */ (value);\n};\n\n\n/**\n * Checks if the value is an instance of the user-defined type if\n * goog.asserts.ENABLE_ASSERTS is true.\n *\n * The compiler may tighten the type returned by this function.\n *\n * @param {?} value The value to check.\n * @param {function(new: T, ...)} type A user-defined constructor.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @throws {goog.asserts.AssertionError} When the value is not an instance of\n *     type.\n * @return {T}\n * @template T\n */\ngoog.asserts.assertInstanceof = function(value, type, opt_message, var_args) {\n  if (goog.asserts.ENABLE_ASSERTS && !(value instanceof type)) {\n    goog.asserts.doAssertFailure_(\n        'Expected instanceof %s but got %s.',\n        [goog.asserts.getType_(type), goog.asserts.getType_(value)],\n        opt_message, Array.prototype.slice.call(arguments, 3));\n  }\n  return value;\n};\n\n\n/**\n * Checks whether the value is a finite number, if goog.asserts.ENABLE_ASSERTS\n * is true.\n *\n * @param {*} value The value to check.\n * @param {string=} opt_message Error message in case of failure.\n * @param {...*} var_args The items to substitute into the failure message.\n * @throws {goog.asserts.AssertionError} When the value is not a number, or is\n *     a non-finite number such as NaN, Infinity or -Infinity.\n * @return {number} The value initially passed in.\n */\ngoog.asserts.assertFinite = function(value, opt_message, var_args) {\n  if (goog.asserts.ENABLE_ASSERTS &&\n      (typeof value != 'number' || !isFinite(value))) {\n    goog.asserts.doAssertFailure_(\n        'Expected %s to be a finite number but it is not.', [value],\n        opt_message, Array.prototype.slice.call(arguments, 2));\n  }\n  return /** @type {number} */ (value);\n};\n\n/**\n * Checks that no enumerable keys are present in Object.prototype. Such keys\n * would break most code that use {@code for (var ... in ...)} loops.\n */\ngoog.asserts.assertObjectPrototypeIsIntact = function() {\n  for (var key in Object.prototype) {\n    goog.asserts.fail(key + ' should not be enumerable in Object.prototype.');\n  }\n};\n\n\n/**\n * Returns the type of a value. If a constructor is passed, and a suitable\n * string cannot be found, 'unknown type name' will be returned.\n * @param {*} value A constructor, object, or primitive.\n * @return {string} The best display name for the value, or 'unknown type name'.\n * @private\n */\ngoog.asserts.getType_ = function(value) {\n  if (value instanceof Function) {\n    return value.displayName || value.name || 'unknown type name';\n  } else if (value instanceof Object) {\n    return /** @type {string} */ (value.constructor.displayName) ||\n        value.constructor.name || Object.prototype.toString.call(value);\n  } else {\n    return value === null ? 'null' : typeof value;\n  }\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities for manipulating arrays.\n *\n * @author arv@google.com (Erik Arvidsson)\n */\n\n\ngoog.provide('goog.array');\n\ngoog.require('goog.asserts');\n\n\n/**\n * @define {boolean} NATIVE_ARRAY_PROTOTYPES indicates whether the code should\n * rely on Array.prototype functions, if available.\n *\n * The Array.prototype functions can be defined by external libraries like\n * Prototype and setting this flag to false forces closure to use its own\n * goog.array implementation.\n *\n * If your javascript can be loaded by a third party site and you are wary about\n * relying on the prototype functions, specify\n * \"--define goog.NATIVE_ARRAY_PROTOTYPES=false\" to the JSCompiler.\n *\n * Setting goog.TRUSTED_SITE to false will automatically set\n * NATIVE_ARRAY_PROTOTYPES to false.\n */\ngoog.define('goog.NATIVE_ARRAY_PROTOTYPES', goog.TRUSTED_SITE);\n\n\n/**\n * @define {boolean} If true, JSCompiler will use the native implementation of\n * array functions where appropriate (e.g., `Array#filter`) and remove the\n * unused pure JS implementation.\n */\ngoog.define('goog.array.ASSUME_NATIVE_FUNCTIONS', false);\n\n\n/**\n * Returns the last element in an array without removing it.\n * Same as goog.array.last.\n * @param {IArrayLike<T>|string} array The array.\n * @return {T} Last item in array.\n * @template T\n */\ngoog.array.peek = function(array) {\n  return array[array.length - 1];\n};\n\n\n/**\n * Returns the last element in an array without removing it.\n * Same as goog.array.peek.\n * @param {IArrayLike<T>|string} array The array.\n * @return {T} Last item in array.\n * @template T\n */\ngoog.array.last = goog.array.peek;\n\n// NOTE(arv): Since most of the array functions are generic it allows you to\n// pass an array-like object. Strings have a length and are considered array-\n// like. However, the 'in' operator does not work on strings so we cannot just\n// use the array path even if the browser supports indexing into strings. We\n// therefore end up splitting the string.\n\n\n/**\n * Returns the index of the first element of an array with a specified value, or\n * -1 if the element is not present in the array.\n *\n * See {@link http://tinyurl.com/developer-mozilla-org-array-indexof}\n *\n * @param {IArrayLike<T>|string} arr The array to be searched.\n * @param {T} obj The object for which we are searching.\n * @param {number=} opt_fromIndex The index at which to start the search. If\n *     omitted the search starts at index 0.\n * @return {number} The index of the first matching array element.\n * @template T\n */\ngoog.array.indexOf = goog.NATIVE_ARRAY_PROTOTYPES &&\n        (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.indexOf) ?\n    function(arr, obj, opt_fromIndex) {\n      goog.asserts.assert(arr.length != null);\n\n      return Array.prototype.indexOf.call(arr, obj, opt_fromIndex);\n    } :\n    function(arr, obj, opt_fromIndex) {\n      var fromIndex = opt_fromIndex == null ?\n          0 :\n          (opt_fromIndex < 0 ? Math.max(0, arr.length + opt_fromIndex) :\n                               opt_fromIndex);\n\n      if (goog.isString(arr)) {\n        // Array.prototype.indexOf uses === so only strings should be found.\n        if (!goog.isString(obj) || obj.length != 1) {\n          return -1;\n        }\n        return arr.indexOf(obj, fromIndex);\n      }\n\n      for (var i = fromIndex; i < arr.length; i++) {\n        if (i in arr && arr[i] === obj) return i;\n      }\n      return -1;\n    };\n\n\n/**\n * Returns the index of the last element of an array with a specified value, or\n * -1 if the element is not present in the array.\n *\n * See {@link http://tinyurl.com/developer-mozilla-org-array-lastindexof}\n *\n * @param {!IArrayLike<T>|string} arr The array to be searched.\n * @param {T} obj The object for which we are searching.\n * @param {?number=} opt_fromIndex The index at which to start the search. If\n *     omitted the search starts at the end of the array.\n * @return {number} The index of the last matching array element.\n * @template T\n */\ngoog.array.lastIndexOf = goog.NATIVE_ARRAY_PROTOTYPES &&\n        (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.lastIndexOf) ?\n    function(arr, obj, opt_fromIndex) {\n      goog.asserts.assert(arr.length != null);\n\n      // Firefox treats undefined and null as 0 in the fromIndex argument which\n      // leads it to always return -1\n      var fromIndex = opt_fromIndex == null ? arr.length - 1 : opt_fromIndex;\n      return Array.prototype.lastIndexOf.call(arr, obj, fromIndex);\n    } :\n    function(arr, obj, opt_fromIndex) {\n      var fromIndex = opt_fromIndex == null ? arr.length - 1 : opt_fromIndex;\n\n      if (fromIndex < 0) {\n        fromIndex = Math.max(0, arr.length + fromIndex);\n      }\n\n      if (goog.isString(arr)) {\n        // Array.prototype.lastIndexOf uses === so only strings should be found.\n        if (!goog.isString(obj) || obj.length != 1) {\n          return -1;\n        }\n        return arr.lastIndexOf(obj, fromIndex);\n      }\n\n      for (var i = fromIndex; i >= 0; i--) {\n        if (i in arr && arr[i] === obj) return i;\n      }\n      return -1;\n    };\n\n\n/**\n * Calls a function for each element in an array. Skips holes in the array.\n * See {@link http://tinyurl.com/developer-mozilla-org-array-foreach}\n *\n * @param {IArrayLike<T>|string} arr Array or array like object over\n *     which to iterate.\n * @param {?function(this: S, T, number, ?): ?} f The function to call for every\n *     element. This function takes 3 arguments (the element, the index and the\n *     array). The return value is ignored.\n * @param {S=} opt_obj The object to be used as the value of 'this' within f.\n * @template T,S\n */\ngoog.array.forEach = goog.NATIVE_ARRAY_PROTOTYPES &&\n        (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.forEach) ?\n    function(arr, f, opt_obj) {\n      goog.asserts.assert(arr.length != null);\n\n      Array.prototype.forEach.call(arr, f, opt_obj);\n    } :\n    function(arr, f, opt_obj) {\n      var l = arr.length;  // must be fixed during loop... see docs\n      var arr2 = goog.isString(arr) ? arr.split('') : arr;\n      for (var i = 0; i < l; i++) {\n        if (i in arr2) {\n          f.call(/** @type {?} */ (opt_obj), arr2[i], i, arr);\n        }\n      }\n    };\n\n\n/**\n * Calls a function for each element in an array, starting from the last\n * element rather than the first.\n *\n * @param {IArrayLike<T>|string} arr Array or array\n *     like object over which to iterate.\n * @param {?function(this: S, T, number, ?): ?} f The function to call for every\n *     element. This function\n *     takes 3 arguments (the element, the index and the array). The return\n *     value is ignored.\n * @param {S=} opt_obj The object to be used as the value of 'this'\n *     within f.\n * @template T,S\n */\ngoog.array.forEachRight = function(arr, f, opt_obj) {\n  var l = arr.length;  // must be fixed during loop... see docs\n  var arr2 = goog.isString(arr) ? arr.split('') : arr;\n  for (var i = l - 1; i >= 0; --i) {\n    if (i in arr2) {\n      f.call(/** @type {?} */ (opt_obj), arr2[i], i, arr);\n    }\n  }\n};\n\n\n/**\n * Calls a function for each element in an array, and if the function returns\n * true adds the element to a new array.\n *\n * See {@link http://tinyurl.com/developer-mozilla-org-array-filter}\n *\n * @param {IArrayLike<T>|string} arr Array or array\n *     like object over which to iterate.\n * @param {?function(this:S, T, number, ?):boolean} f The function to call for\n *     every element. This function\n *     takes 3 arguments (the element, the index and the array) and must\n *     return a Boolean. If the return value is true the element is added to the\n *     result array. If it is false the element is not included.\n * @param {S=} opt_obj The object to be used as the value of 'this'\n *     within f.\n * @return {!Array<T>} a new array in which only elements that passed the test\n *     are present.\n * @template T,S\n */\ngoog.array.filter = goog.NATIVE_ARRAY_PROTOTYPES &&\n        (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.filter) ?\n    function(arr, f, opt_obj) {\n      goog.asserts.assert(arr.length != null);\n\n      return Array.prototype.filter.call(arr, f, opt_obj);\n    } :\n    function(arr, f, opt_obj) {\n      var l = arr.length;  // must be fixed during loop... see docs\n      var res = [];\n      var resLength = 0;\n      var arr2 = goog.isString(arr) ? arr.split('') : arr;\n      for (var i = 0; i < l; i++) {\n        if (i in arr2) {\n          var val = arr2[i];  // in case f mutates arr2\n          if (f.call(/** @type {?} */ (opt_obj), val, i, arr)) {\n            res[resLength++] = val;\n          }\n        }\n      }\n      return res;\n    };\n\n\n/**\n * Calls a function for each element in an array and inserts the result into a\n * new array.\n *\n * See {@link http://tinyurl.com/developer-mozilla-org-array-map}\n *\n * @param {IArrayLike<VALUE>|string} arr Array or array like object\n *     over which to iterate.\n * @param {function(this:THIS, VALUE, number, ?): RESULT} f The function to call\n *     for every element. This function takes 3 arguments (the element,\n *     the index and the array) and should return something. The result will be\n *     inserted into a new array.\n * @param {THIS=} opt_obj The object to be used as the value of 'this' within f.\n * @return {!Array<RESULT>} a new array with the results from f.\n * @template THIS, VALUE, RESULT\n */\ngoog.array.map = goog.NATIVE_ARRAY_PROTOTYPES &&\n        (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.map) ?\n    function(arr, f, opt_obj) {\n      goog.asserts.assert(arr.length != null);\n\n      return Array.prototype.map.call(arr, f, opt_obj);\n    } :\n    function(arr, f, opt_obj) {\n      var l = arr.length;  // must be fixed during loop... see docs\n      var res = new Array(l);\n      var arr2 = goog.isString(arr) ? arr.split('') : arr;\n      for (var i = 0; i < l; i++) {\n        if (i in arr2) {\n          res[i] = f.call(/** @type {?} */ (opt_obj), arr2[i], i, arr);\n        }\n      }\n      return res;\n    };\n\n\n/**\n * Passes every element of an array into a function and accumulates the result.\n *\n * See {@link http://tinyurl.com/developer-mozilla-org-array-reduce}\n *\n * For example:\n * var a = [1, 2, 3, 4];\n * goog.array.reduce(a, function(r, v, i, arr) {return r + v;}, 0);\n * returns 10\n *\n * @param {IArrayLike<T>|string} arr Array or array\n *     like object over which to iterate.\n * @param {function(this:S, R, T, number, ?) : R} f The function to call for\n *     every element. This function\n *     takes 4 arguments (the function's previous result or the initial value,\n *     the value of the current array element, the current array index, and the\n *     array itself)\n *     function(previousValue, currentValue, index, array).\n * @param {?} val The initial value to pass into the function on the first call.\n * @param {S=} opt_obj  The object to be used as the value of 'this'\n *     within f.\n * @return {R} Result of evaluating f repeatedly across the values of the array.\n * @template T,S,R\n */\ngoog.array.reduce = goog.NATIVE_ARRAY_PROTOTYPES &&\n        (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.reduce) ?\n    function(arr, f, val, opt_obj) {\n      goog.asserts.assert(arr.length != null);\n      if (opt_obj) {\n        f = goog.bind(f, opt_obj);\n      }\n      return Array.prototype.reduce.call(arr, f, val);\n    } :\n    function(arr, f, val, opt_obj) {\n      var rval = val;\n      goog.array.forEach(arr, function(val, index) {\n        rval = f.call(/** @type {?} */ (opt_obj), rval, val, index, arr);\n      });\n      return rval;\n    };\n\n\n/**\n * Passes every element of an array into a function and accumulates the result,\n * starting from the last element and working towards the first.\n *\n * See {@link http://tinyurl.com/developer-mozilla-org-array-reduceright}\n *\n * For example:\n * var a = ['a', 'b', 'c'];\n * goog.array.reduceRight(a, function(r, v, i, arr) {return r + v;}, '');\n * returns 'cba'\n *\n * @param {IArrayLike<T>|string} arr Array or array\n *     like object over which to iterate.\n * @param {?function(this:S, R, T, number, ?) : R} f The function to call for\n *     every element. This function\n *     takes 4 arguments (the function's previous result or the initial value,\n *     the value of the current array element, the current array index, and the\n *     array itself)\n *     function(previousValue, currentValue, index, array).\n * @param {?} val The initial value to pass into the function on the first call.\n * @param {S=} opt_obj The object to be used as the value of 'this'\n *     within f.\n * @return {R} Object returned as a result of evaluating f repeatedly across the\n *     values of the array.\n * @template T,S,R\n */\ngoog.array.reduceRight = goog.NATIVE_ARRAY_PROTOTYPES &&\n        (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.reduceRight) ?\n    function(arr, f, val, opt_obj) {\n      goog.asserts.assert(arr.length != null);\n      goog.asserts.assert(f != null);\n      if (opt_obj) {\n        f = goog.bind(f, opt_obj);\n      }\n      return Array.prototype.reduceRight.call(arr, f, val);\n    } :\n    function(arr, f, val, opt_obj) {\n      var rval = val;\n      goog.array.forEachRight(arr, function(val, index) {\n        rval = f.call(/** @type {?} */ (opt_obj), rval, val, index, arr);\n      });\n      return rval;\n    };\n\n\n/**\n * Calls f for each element of an array. If any call returns true, some()\n * returns true (without checking the remaining elements). If all calls\n * return false, some() returns false.\n *\n * See {@link http://tinyurl.com/developer-mozilla-org-array-some}\n *\n * @param {IArrayLike<T>|string} arr Array or array\n *     like object over which to iterate.\n * @param {?function(this:S, T, number, ?) : boolean} f The function to call for\n *     for every element. This function takes 3 arguments (the element, the\n *     index and the array) and should return a boolean.\n * @param {S=} opt_obj  The object to be used as the value of 'this'\n *     within f.\n * @return {boolean} true if any element passes the test.\n * @template T,S\n */\ngoog.array.some = goog.NATIVE_ARRAY_PROTOTYPES &&\n        (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.some) ?\n    function(arr, f, opt_obj) {\n      goog.asserts.assert(arr.length != null);\n\n      return Array.prototype.some.call(arr, f, opt_obj);\n    } :\n    function(arr, f, opt_obj) {\n      var l = arr.length;  // must be fixed during loop... see docs\n      var arr2 = goog.isString(arr) ? arr.split('') : arr;\n      for (var i = 0; i < l; i++) {\n        if (i in arr2 && f.call(/** @type {?} */ (opt_obj), arr2[i], i, arr)) {\n          return true;\n        }\n      }\n      return false;\n    };\n\n\n/**\n * Call f for each element of an array. If all calls return true, every()\n * returns true. If any call returns false, every() returns false and\n * does not continue to check the remaining elements.\n *\n * See {@link http://tinyurl.com/developer-mozilla-org-array-every}\n *\n * @param {IArrayLike<T>|string} arr Array or array\n *     like object over which to iterate.\n * @param {?function(this:S, T, number, ?) : boolean} f The function to call for\n *     for every element. This function takes 3 arguments (the element, the\n *     index and the array) and should return a boolean.\n * @param {S=} opt_obj The object to be used as the value of 'this'\n *     within f.\n * @return {boolean} false if any element fails the test.\n * @template T,S\n */\ngoog.array.every = goog.NATIVE_ARRAY_PROTOTYPES &&\n        (goog.array.ASSUME_NATIVE_FUNCTIONS || Array.prototype.every) ?\n    function(arr, f, opt_obj) {\n      goog.asserts.assert(arr.length != null);\n\n      return Array.prototype.every.call(arr, f, opt_obj);\n    } :\n    function(arr, f, opt_obj) {\n      var l = arr.length;  // must be fixed during loop... see docs\n      var arr2 = goog.isString(arr) ? arr.split('') : arr;\n      for (var i = 0; i < l; i++) {\n        if (i in arr2 && !f.call(/** @type {?} */ (opt_obj), arr2[i], i, arr)) {\n          return false;\n        }\n      }\n      return true;\n    };\n\n\n/**\n * Counts the array elements that fulfill the predicate, i.e. for which the\n * callback function returns true. Skips holes in the array.\n *\n * @param {!IArrayLike<T>|string} arr Array or array like object\n *     over which to iterate.\n * @param {function(this: S, T, number, ?): boolean} f The function to call for\n *     every element. Takes 3 arguments (the element, the index and the array).\n * @param {S=} opt_obj The object to be used as the value of 'this' within f.\n * @return {number} The number of the matching elements.\n * @template T,S\n */\ngoog.array.count = function(arr, f, opt_obj) {\n  var count = 0;\n  goog.array.forEach(arr, function(element, index, arr) {\n    if (f.call(/** @type {?} */ (opt_obj), element, index, arr)) {\n      ++count;\n    }\n  }, opt_obj);\n  return count;\n};\n\n\n/**\n * Search an array for the first element that satisfies a given condition and\n * return that element.\n * @param {IArrayLike<T>|string} arr Array or array\n *     like object over which to iterate.\n * @param {?function(this:S, T, number, ?) : boolean} f The function to call\n *     for every element. This function takes 3 arguments (the element, the\n *     index and the array) and should return a boolean.\n * @param {S=} opt_obj An optional \"this\" context for the function.\n * @return {T|null} The first array element that passes the test, or null if no\n *     element is found.\n * @template T,S\n */\ngoog.array.find = function(arr, f, opt_obj) {\n  var i = goog.array.findIndex(arr, f, opt_obj);\n  return i < 0 ? null : goog.isString(arr) ? arr.charAt(i) : arr[i];\n};\n\n\n/**\n * Search an array for the first element that satisfies a given condition and\n * return its index.\n * @param {IArrayLike<T>|string} arr Array or array\n *     like object over which to iterate.\n * @param {?function(this:S, T, number, ?) : boolean} f The function to call for\n *     every element. This function\n *     takes 3 arguments (the element, the index and the array) and should\n *     return a boolean.\n * @param {S=} opt_obj An optional \"this\" context for the function.\n * @return {number} The index of the first array element that passes the test,\n *     or -1 if no element is found.\n * @template T,S\n */\ngoog.array.findIndex = function(arr, f, opt_obj) {\n  var l = arr.length;  // must be fixed during loop... see docs\n  var arr2 = goog.isString(arr) ? arr.split('') : arr;\n  for (var i = 0; i < l; i++) {\n    if (i in arr2 && f.call(/** @type {?} */ (opt_obj), arr2[i], i, arr)) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n\n/**\n * Search an array (in reverse order) for the last element that satisfies a\n * given condition and return that element.\n * @param {IArrayLike<T>|string} arr Array or array\n *     like object over which to iterate.\n * @param {?function(this:S, T, number, ?) : boolean} f The function to call\n *     for every element. This function\n *     takes 3 arguments (the element, the index and the array) and should\n *     return a boolean.\n * @param {S=} opt_obj An optional \"this\" context for the function.\n * @return {T|null} The last array element that passes the test, or null if no\n *     element is found.\n * @template T,S\n */\ngoog.array.findRight = function(arr, f, opt_obj) {\n  var i = goog.array.findIndexRight(arr, f, opt_obj);\n  return i < 0 ? null : goog.isString(arr) ? arr.charAt(i) : arr[i];\n};\n\n\n/**\n * Search an array (in reverse order) for the last element that satisfies a\n * given condition and return its index.\n * @param {IArrayLike<T>|string} arr Array or array\n *     like object over which to iterate.\n * @param {?function(this:S, T, number, ?) : boolean} f The function to call\n *     for every element. This function\n *     takes 3 arguments (the element, the index and the array) and should\n *     return a boolean.\n * @param {S=} opt_obj An optional \"this\" context for the function.\n * @return {number} The index of the last array element that passes the test,\n *     or -1 if no element is found.\n * @template T,S\n */\ngoog.array.findIndexRight = function(arr, f, opt_obj) {\n  var l = arr.length;  // must be fixed during loop... see docs\n  var arr2 = goog.isString(arr) ? arr.split('') : arr;\n  for (var i = l - 1; i >= 0; i--) {\n    if (i in arr2 && f.call(/** @type {?} */ (opt_obj), arr2[i], i, arr)) {\n      return i;\n    }\n  }\n  return -1;\n};\n\n\n/**\n * Whether the array contains the given object.\n * @param {IArrayLike<?>|string} arr The array to test for the presence of the\n *     element.\n * @param {*} obj The object for which to test.\n * @return {boolean} true if obj is present.\n */\ngoog.array.contains = function(arr, obj) {\n  return goog.array.indexOf(arr, obj) >= 0;\n};\n\n\n/**\n * Whether the array is empty.\n * @param {IArrayLike<?>|string} arr The array to test.\n * @return {boolean} true if empty.\n */\ngoog.array.isEmpty = function(arr) {\n  return arr.length == 0;\n};\n\n\n/**\n * Clears the array.\n * @param {IArrayLike<?>} arr Array or array like object to clear.\n */\ngoog.array.clear = function(arr) {\n  // For non real arrays we don't have the magic length so we delete the\n  // indices.\n  if (!goog.isArray(arr)) {\n    for (var i = arr.length - 1; i >= 0; i--) {\n      delete arr[i];\n    }\n  }\n  arr.length = 0;\n};\n\n\n/**\n * Pushes an item into an array, if it's not already in the array.\n * @param {Array<T>} arr Array into which to insert the item.\n * @param {T} obj Value to add.\n * @template T\n */\ngoog.array.insert = function(arr, obj) {\n  if (!goog.array.contains(arr, obj)) {\n    arr.push(obj);\n  }\n};\n\n\n/**\n * Inserts an object at the given index of the array.\n * @param {IArrayLike<?>} arr The array to modify.\n * @param {*} obj The object to insert.\n * @param {number=} opt_i The index at which to insert the object. If omitted,\n *      treated as 0. A negative index is counted from the end of the array.\n */\ngoog.array.insertAt = function(arr, obj, opt_i) {\n  goog.array.splice(arr, opt_i, 0, obj);\n};\n\n\n/**\n * Inserts at the given index of the array, all elements of another array.\n * @param {IArrayLike<?>} arr The array to modify.\n * @param {IArrayLike<?>} elementsToAdd The array of elements to add.\n * @param {number=} opt_i The index at which to insert the object. If omitted,\n *      treated as 0. A negative index is counted from the end of the array.\n */\ngoog.array.insertArrayAt = function(arr, elementsToAdd, opt_i) {\n  goog.partial(goog.array.splice, arr, opt_i, 0).apply(null, elementsToAdd);\n};\n\n\n/**\n * Inserts an object into an array before a specified object.\n * @param {Array<T>} arr The array to modify.\n * @param {T} obj The object to insert.\n * @param {T=} opt_obj2 The object before which obj should be inserted. If obj2\n *     is omitted or not found, obj is inserted at the end of the array.\n * @template T\n */\ngoog.array.insertBefore = function(arr, obj, opt_obj2) {\n  var i;\n  if (arguments.length == 2 || (i = goog.array.indexOf(arr, opt_obj2)) < 0) {\n    arr.push(obj);\n  } else {\n    goog.array.insertAt(arr, obj, i);\n  }\n};\n\n\n/**\n * Removes the first occurrence of a particular value from an array.\n * @param {IArrayLike<T>} arr Array from which to remove\n *     value.\n * @param {T} obj Object to remove.\n * @return {boolean} True if an element was removed.\n * @template T\n */\ngoog.array.remove = function(arr, obj) {\n  var i = goog.array.indexOf(arr, obj);\n  var rv;\n  if ((rv = i >= 0)) {\n    goog.array.removeAt(arr, i);\n  }\n  return rv;\n};\n\n\n/**\n * Removes the last occurrence of a particular value from an array.\n * @param {!IArrayLike<T>} arr Array from which to remove value.\n * @param {T} obj Object to remove.\n * @return {boolean} True if an element was removed.\n * @template T\n */\ngoog.array.removeLast = function(arr, obj) {\n  var i = goog.array.lastIndexOf(arr, obj);\n  if (i >= 0) {\n    goog.array.removeAt(arr, i);\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * Removes from an array the element at index i\n * @param {IArrayLike<?>} arr Array or array like object from which to\n *     remove value.\n * @param {number} i The index to remove.\n * @return {boolean} True if an element was removed.\n */\ngoog.array.removeAt = function(arr, i) {\n  goog.asserts.assert(arr.length != null);\n\n  // use generic form of splice\n  // splice returns the removed items and if successful the length of that\n  // will be 1\n  return Array.prototype.splice.call(arr, i, 1).length == 1;\n};\n\n\n/**\n * Removes the first value that satisfies the given condition.\n * @param {IArrayLike<T>} arr Array or array\n *     like object over which to iterate.\n * @param {?function(this:S, T, number, ?) : boolean} f The function to call\n *     for every element. This function\n *     takes 3 arguments (the element, the index and the array) and should\n *     return a boolean.\n * @param {S=} opt_obj An optional \"this\" context for the function.\n * @return {boolean} True if an element was removed.\n * @template T,S\n */\ngoog.array.removeIf = function(arr, f, opt_obj) {\n  var i = goog.array.findIndex(arr, f, opt_obj);\n  if (i >= 0) {\n    goog.array.removeAt(arr, i);\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * Removes all values that satisfy the given condition.\n * @param {IArrayLike<T>} arr Array or array\n *     like object over which to iterate.\n * @param {?function(this:S, T, number, ?) : boolean} f The function to call\n *     for every element. This function\n *     takes 3 arguments (the element, the index and the array) and should\n *     return a boolean.\n * @param {S=} opt_obj An optional \"this\" context for the function.\n * @return {number} The number of items removed\n * @template T,S\n */\ngoog.array.removeAllIf = function(arr, f, opt_obj) {\n  var removedCount = 0;\n  goog.array.forEachRight(arr, function(val, index) {\n    if (f.call(/** @type {?} */ (opt_obj), val, index, arr)) {\n      if (goog.array.removeAt(arr, index)) {\n        removedCount++;\n      }\n    }\n  });\n  return removedCount;\n};\n\n\n/**\n * Returns a new array that is the result of joining the arguments.  If arrays\n * are passed then their items are added, however, if non-arrays are passed they\n * will be added to the return array as is.\n *\n * Note that ArrayLike objects will be added as is, rather than having their\n * items added.\n *\n * goog.array.concat([1, 2], [3, 4]) -> [1, 2, 3, 4]\n * goog.array.concat(0, [1, 2]) -> [0, 1, 2]\n * goog.array.concat([1, 2], null) -> [1, 2, null]\n *\n * There is bug in all current versions of IE (6, 7 and 8) where arrays created\n * in an iframe become corrupted soon (not immediately) after the iframe is\n * destroyed. This is common if loading data via goog.net.IframeIo, for example.\n * This corruption only affects the concat method which will start throwing\n * Catastrophic Errors (#-2147418113).\n *\n * See http://endoflow.com/scratch/corrupted-arrays.html for a test case.\n *\n * Internally goog.array should use this, so that all methods will continue to\n * work on these broken array objects.\n *\n * @param {...*} var_args Items to concatenate.  Arrays will have each item\n *     added, while primitives and objects will be added as is.\n * @return {!Array<?>} The new resultant array.\n */\ngoog.array.concat = function(var_args) {\n  return Array.prototype.concat.apply([], arguments);\n};\n\n\n/**\n * Returns a new array that contains the contents of all the arrays passed.\n * @param {...!Array<T>} var_args\n * @return {!Array<T>}\n * @template T\n */\ngoog.array.join = function(var_args) {\n  return Array.prototype.concat.apply([], arguments);\n};\n\n\n/**\n * Converts an object to an array.\n * @param {IArrayLike<T>|string} object  The object to convert to an\n *     array.\n * @return {!Array<T>} The object converted into an array. If object has a\n *     length property, every property indexed with a non-negative number\n *     less than length will be included in the result. If object does not\n *     have a length property, an empty array will be returned.\n * @template T\n */\ngoog.array.toArray = function(object) {\n  var length = object.length;\n\n  // If length is not a number the following it false. This case is kept for\n  // backwards compatibility since there are callers that pass objects that are\n  // not array like.\n  if (length > 0) {\n    var rv = new Array(length);\n    for (var i = 0; i < length; i++) {\n      rv[i] = object[i];\n    }\n    return rv;\n  }\n  return [];\n};\n\n\n/**\n * Does a shallow copy of an array.\n * @param {IArrayLike<T>|string} arr  Array or array-like object to\n *     clone.\n * @return {!Array<T>} Clone of the input array.\n * @template T\n */\ngoog.array.clone = goog.array.toArray;\n\n\n/**\n * Extends an array with another array, element, or \"array like\" object.\n * This function operates 'in-place', it does not create a new Array.\n *\n * Example:\n * var a = [];\n * goog.array.extend(a, [0, 1]);\n * a; // [0, 1]\n * goog.array.extend(a, 2);\n * a; // [0, 1, 2]\n *\n * @param {Array<VALUE>} arr1  The array to modify.\n * @param {...(IArrayLike<VALUE>|VALUE)} var_args The elements or arrays of\n *     elements to add to arr1.\n * @template VALUE\n */\ngoog.array.extend = function(arr1, var_args) {\n  for (var i = 1; i < arguments.length; i++) {\n    var arr2 = arguments[i];\n    if (goog.isArrayLike(arr2)) {\n      var len1 = arr1.length || 0;\n      var len2 = arr2.length || 0;\n      arr1.length = len1 + len2;\n      for (var j = 0; j < len2; j++) {\n        arr1[len1 + j] = arr2[j];\n      }\n    } else {\n      arr1.push(arr2);\n    }\n  }\n};\n\n\n/**\n * Adds or removes elements from an array. This is a generic version of Array\n * splice. This means that it might work on other objects similar to arrays,\n * such as the arguments object.\n *\n * @param {IArrayLike<T>} arr The array to modify.\n * @param {number|undefined} index The index at which to start changing the\n *     array. If not defined, treated as 0.\n * @param {number} howMany How many elements to remove (0 means no removal. A\n *     value below 0 is treated as zero and so is any other non number. Numbers\n *     are floored).\n * @param {...T} var_args Optional, additional elements to insert into the\n *     array.\n * @return {!Array<T>} the removed elements.\n * @template T\n */\ngoog.array.splice = function(arr, index, howMany, var_args) {\n  goog.asserts.assert(arr.length != null);\n\n  return Array.prototype.splice.apply(arr, goog.array.slice(arguments, 1));\n};\n\n\n/**\n * Returns a new array from a segment of an array. This is a generic version of\n * Array slice. This means that it might work on other objects similar to\n * arrays, such as the arguments object.\n *\n * @param {IArrayLike<T>|string} arr The array from\n * which to copy a segment.\n * @param {number} start The index of the first element to copy.\n * @param {number=} opt_end The index after the last element to copy.\n * @return {!Array<T>} A new array containing the specified segment of the\n *     original array.\n * @template T\n */\ngoog.array.slice = function(arr, start, opt_end) {\n  goog.asserts.assert(arr.length != null);\n\n  // passing 1 arg to slice is not the same as passing 2 where the second is\n  // null or undefined (in that case the second argument is treated as 0).\n  // we could use slice on the arguments object and then use apply instead of\n  // testing the length\n  if (arguments.length <= 2) {\n    return Array.prototype.slice.call(arr, start);\n  } else {\n    return Array.prototype.slice.call(arr, start, opt_end);\n  }\n};\n\n\n/**\n * Removes all duplicates from an array (retaining only the first\n * occurrence of each array element).  This function modifies the\n * array in place and doesn't change the order of the non-duplicate items.\n *\n * For objects, duplicates are identified as having the same unique ID as\n * defined by {@link goog.getUid}.\n *\n * Alternatively you can specify a custom hash function that returns a unique\n * value for each item in the array it should consider unique.\n *\n * Runtime: N,\n * Worstcase space: 2N (no dupes)\n *\n * @param {IArrayLike<T>} arr The array from which to remove\n *     duplicates.\n * @param {Array=} opt_rv An optional array in which to return the results,\n *     instead of performing the removal inplace.  If specified, the original\n *     array will remain unchanged.\n * @param {function(T):string=} opt_hashFn An optional function to use to\n *     apply to every item in the array. This function should return a unique\n *     value for each item in the array it should consider unique.\n * @template T\n */\ngoog.array.removeDuplicates = function(arr, opt_rv, opt_hashFn) {\n  var returnArray = opt_rv || arr;\n  var defaultHashFn = function(item) {\n    // Prefix each type with a single character representing the type to\n    // prevent conflicting keys (e.g. true and 'true').\n    return goog.isObject(item) ? 'o' + goog.getUid(item) :\n                                 (typeof item).charAt(0) + item;\n  };\n  var hashFn = opt_hashFn || defaultHashFn;\n\n  var seen = {}, cursorInsert = 0, cursorRead = 0;\n  while (cursorRead < arr.length) {\n    var current = arr[cursorRead++];\n    var key = hashFn(current);\n    if (!Object.prototype.hasOwnProperty.call(seen, key)) {\n      seen[key] = true;\n      returnArray[cursorInsert++] = current;\n    }\n  }\n  returnArray.length = cursorInsert;\n};\n\n\n/**\n * Searches the specified array for the specified target using the binary\n * search algorithm.  If no opt_compareFn is specified, elements are compared\n * using <code>goog.array.defaultCompare</code>, which compares the elements\n * using the built in < and > operators.  This will produce the expected\n * behavior for homogeneous arrays of String(s) and Number(s). The array\n * specified <b>must</b> be sorted in ascending order (as defined by the\n * comparison function).  If the array is not sorted, results are undefined.\n * If the array contains multiple instances of the specified target value, any\n * of these instances may be found.\n *\n * Runtime: O(log n)\n *\n * @param {IArrayLike<VALUE>} arr The array to be searched.\n * @param {TARGET} target The sought value.\n * @param {function(TARGET, VALUE): number=} opt_compareFn Optional comparison\n *     function by which the array is ordered. Should take 2 arguments to\n *     compare, and return a negative number, zero, or a positive number\n *     depending on whether the first argument is less than, equal to, or\n *     greater than the second.\n * @return {number} Lowest index of the target value if found, otherwise\n *     (-(insertion point) - 1). The insertion point is where the value should\n *     be inserted into arr to preserve the sorted property.  Return value >= 0\n *     iff target is found.\n * @template TARGET, VALUE\n */\ngoog.array.binarySearch = function(arr, target, opt_compareFn) {\n  return goog.array.binarySearch_(\n      arr, opt_compareFn || goog.array.defaultCompare, false /* isEvaluator */,\n      target);\n};\n\n\n/**\n * Selects an index in the specified array using the binary search algorithm.\n * The evaluator receives an element and determines whether the desired index\n * is before, at, or after it.  The evaluator must be consistent (formally,\n * goog.array.map(goog.array.map(arr, evaluator, opt_obj), goog.math.sign)\n * must be monotonically non-increasing).\n *\n * Runtime: O(log n)\n *\n * @param {IArrayLike<VALUE>} arr The array to be searched.\n * @param {function(this:THIS, VALUE, number, ?): number} evaluator\n *     Evaluator function that receives 3 arguments (the element, the index and\n *     the array). Should return a negative number, zero, or a positive number\n *     depending on whether the desired index is before, at, or after the\n *     element passed to it.\n * @param {THIS=} opt_obj The object to be used as the value of 'this'\n *     within evaluator.\n * @return {number} Index of the leftmost element matched by the evaluator, if\n *     such exists; otherwise (-(insertion point) - 1). The insertion point is\n *     the index of the first element for which the evaluator returns negative,\n *     or arr.length if no such element exists. The return value is non-negative\n *     iff a match is found.\n * @template THIS, VALUE\n */\ngoog.array.binarySelect = function(arr, evaluator, opt_obj) {\n  return goog.array.binarySearch_(\n      arr, evaluator, true /* isEvaluator */, undefined /* opt_target */,\n      opt_obj);\n};\n\n\n/**\n * Implementation of a binary search algorithm which knows how to use both\n * comparison functions and evaluators. If an evaluator is provided, will call\n * the evaluator with the given optional data object, conforming to the\n * interface defined in binarySelect. Otherwise, if a comparison function is\n * provided, will call the comparison function against the given data object.\n *\n * This implementation purposefully does not use goog.bind or goog.partial for\n * performance reasons.\n *\n * Runtime: O(log n)\n *\n * @param {IArrayLike<?>} arr The array to be searched.\n * @param {function(?, ?, ?): number | function(?, ?): number} compareFn\n *     Either an evaluator or a comparison function, as defined by binarySearch\n *     and binarySelect above.\n * @param {boolean} isEvaluator Whether the function is an evaluator or a\n *     comparison function.\n * @param {?=} opt_target If the function is a comparison function, then\n *     this is the target to binary search for.\n * @param {Object=} opt_selfObj If the function is an evaluator, this is an\n *     optional this object for the evaluator.\n * @return {number} Lowest index of the target value if found, otherwise\n *     (-(insertion point) - 1). The insertion point is where the value should\n *     be inserted into arr to preserve the sorted property.  Return value >= 0\n *     iff target is found.\n * @private\n */\ngoog.array.binarySearch_ = function(\n    arr, compareFn, isEvaluator, opt_target, opt_selfObj) {\n  var left = 0;            // inclusive\n  var right = arr.length;  // exclusive\n  var found;\n  while (left < right) {\n    var middle = (left + right) >> 1;\n    var compareResult;\n    if (isEvaluator) {\n      compareResult = compareFn.call(opt_selfObj, arr[middle], middle, arr);\n    } else {\n      // NOTE(dimvar): To avoid this cast, we'd have to use function overloading\n      // for the type of binarySearch_, which the type system can't express yet.\n      compareResult = /** @type {function(?, ?): number} */ (compareFn)(\n          opt_target, arr[middle]);\n    }\n    if (compareResult > 0) {\n      left = middle + 1;\n    } else {\n      right = middle;\n      // We are looking for the lowest index so we can't return immediately.\n      found = !compareResult;\n    }\n  }\n  // left is the index if found, or the insertion point otherwise.\n  // ~left is a shorthand for -left - 1.\n  return found ? left : ~left;\n};\n\n\n/**\n * Sorts the specified array into ascending order.  If no opt_compareFn is\n * specified, elements are compared using\n * <code>goog.array.defaultCompare</code>, which compares the elements using\n * the built in < and > operators.  This will produce the expected behavior\n * for homogeneous arrays of String(s) and Number(s), unlike the native sort,\n * but will give unpredictable results for heterogeneous lists of strings and\n * numbers with different numbers of digits.\n *\n * This sort is not guaranteed to be stable.\n *\n * Runtime: Same as <code>Array.prototype.sort</code>\n *\n * @param {Array<T>} arr The array to be sorted.\n * @param {?function(T,T):number=} opt_compareFn Optional comparison\n *     function by which the\n *     array is to be ordered. Should take 2 arguments to compare, and return a\n *     negative number, zero, or a positive number depending on whether the\n *     first argument is less than, equal to, or greater than the second.\n * @template T\n */\ngoog.array.sort = function(arr, opt_compareFn) {\n  // TODO(arv): Update type annotation since null is not accepted.\n  arr.sort(opt_compareFn || goog.array.defaultCompare);\n};\n\n\n/**\n * Sorts the specified array into ascending order in a stable way.  If no\n * opt_compareFn is specified, elements are compared using\n * <code>goog.array.defaultCompare</code>, which compares the elements using\n * the built in < and > operators.  This will produce the expected behavior\n * for homogeneous arrays of String(s) and Number(s).\n *\n * Runtime: Same as <code>Array.prototype.sort</code>, plus an additional\n * O(n) overhead of copying the array twice.\n *\n * @param {Array<T>} arr The array to be sorted.\n * @param {?function(T, T): number=} opt_compareFn Optional comparison function\n *     by which the array is to be ordered. Should take 2 arguments to compare,\n *     and return a negative number, zero, or a positive number depending on\n *     whether the first argument is less than, equal to, or greater than the\n *     second.\n * @template T\n */\ngoog.array.stableSort = function(arr, opt_compareFn) {\n  var compArr = new Array(arr.length);\n  for (var i = 0; i < arr.length; i++) {\n    compArr[i] = {index: i, value: arr[i]};\n  }\n  var valueCompareFn = opt_compareFn || goog.array.defaultCompare;\n  function stableCompareFn(obj1, obj2) {\n    return valueCompareFn(obj1.value, obj2.value) || obj1.index - obj2.index;\n  }\n  goog.array.sort(compArr, stableCompareFn);\n  for (var i = 0; i < arr.length; i++) {\n    arr[i] = compArr[i].value;\n  }\n};\n\n\n/**\n * Sort the specified array into ascending order based on item keys\n * returned by the specified key function.\n * If no opt_compareFn is specified, the keys are compared in ascending order\n * using <code>goog.array.defaultCompare</code>.\n *\n * Runtime: O(S(f(n)), where S is runtime of <code>goog.array.sort</code>\n * and f(n) is runtime of the key function.\n *\n * @param {Array<T>} arr The array to be sorted.\n * @param {function(T): K} keyFn Function taking array element and returning\n *     a key used for sorting this element.\n * @param {?function(K, K): number=} opt_compareFn Optional comparison function\n *     by which the keys are to be ordered. Should take 2 arguments to compare,\n *     and return a negative number, zero, or a positive number depending on\n *     whether the first argument is less than, equal to, or greater than the\n *     second.\n * @template T,K\n */\ngoog.array.sortByKey = function(arr, keyFn, opt_compareFn) {\n  var keyCompareFn = opt_compareFn || goog.array.defaultCompare;\n  goog.array.sort(\n      arr, function(a, b) { return keyCompareFn(keyFn(a), keyFn(b)); });\n};\n\n\n/**\n * Sorts an array of objects by the specified object key and compare\n * function. If no compare function is provided, the key values are\n * compared in ascending order using <code>goog.array.defaultCompare</code>.\n * This won't work for keys that get renamed by the compiler. So use\n * {'foo': 1, 'bar': 2} rather than {foo: 1, bar: 2}.\n * @param {Array<Object>} arr An array of objects to sort.\n * @param {string} key The object key to sort by.\n * @param {Function=} opt_compareFn The function to use to compare key\n *     values.\n */\ngoog.array.sortObjectsByKey = function(arr, key, opt_compareFn) {\n  goog.array.sortByKey(arr, function(obj) { return obj[key]; }, opt_compareFn);\n};\n\n\n/**\n * Tells if the array is sorted.\n * @param {!IArrayLike<T>} arr The array.\n * @param {?function(T,T):number=} opt_compareFn Function to compare the\n *     array elements.\n *     Should take 2 arguments to compare, and return a negative number, zero,\n *     or a positive number depending on whether the first argument is less\n *     than, equal to, or greater than the second.\n * @param {boolean=} opt_strict If true no equal elements are allowed.\n * @return {boolean} Whether the array is sorted.\n * @template T\n */\ngoog.array.isSorted = function(arr, opt_compareFn, opt_strict) {\n  var compare = opt_compareFn || goog.array.defaultCompare;\n  for (var i = 1; i < arr.length; i++) {\n    var compareResult = compare(arr[i - 1], arr[i]);\n    if (compareResult > 0 || compareResult == 0 && opt_strict) {\n      return false;\n    }\n  }\n  return true;\n};\n\n\n/**\n * Compares two arrays for equality. Two arrays are considered equal if they\n * have the same length and their corresponding elements are equal according to\n * the comparison function.\n *\n * @param {IArrayLike<?>} arr1 The first array to compare.\n * @param {IArrayLike<?>} arr2 The second array to compare.\n * @param {Function=} opt_equalsFn Optional comparison function.\n *     Should take 2 arguments to compare, and return true if the arguments\n *     are equal. Defaults to {@link goog.array.defaultCompareEquality} which\n *     compares the elements using the built-in '===' operator.\n * @return {boolean} Whether the two arrays are equal.\n */\ngoog.array.equals = function(arr1, arr2, opt_equalsFn) {\n  if (!goog.isArrayLike(arr1) || !goog.isArrayLike(arr2) ||\n      arr1.length != arr2.length) {\n    return false;\n  }\n  var l = arr1.length;\n  var equalsFn = opt_equalsFn || goog.array.defaultCompareEquality;\n  for (var i = 0; i < l; i++) {\n    if (!equalsFn(arr1[i], arr2[i])) {\n      return false;\n    }\n  }\n  return true;\n};\n\n\n/**\n * 3-way array compare function.\n * @param {!IArrayLike<VALUE>} arr1 The first array to\n *     compare.\n * @param {!IArrayLike<VALUE>} arr2 The second array to\n *     compare.\n * @param {function(VALUE, VALUE): number=} opt_compareFn Optional comparison\n *     function by which the array is to be ordered. Should take 2 arguments to\n *     compare, and return a negative number, zero, or a positive number\n *     depending on whether the first argument is less than, equal to, or\n *     greater than the second.\n * @return {number} Negative number, zero, or a positive number depending on\n *     whether the first argument is less than, equal to, or greater than the\n *     second.\n * @template VALUE\n */\ngoog.array.compare3 = function(arr1, arr2, opt_compareFn) {\n  var compare = opt_compareFn || goog.array.defaultCompare;\n  var l = Math.min(arr1.length, arr2.length);\n  for (var i = 0; i < l; i++) {\n    var result = compare(arr1[i], arr2[i]);\n    if (result != 0) {\n      return result;\n    }\n  }\n  return goog.array.defaultCompare(arr1.length, arr2.length);\n};\n\n\n/**\n * Compares its two arguments for order, using the built in < and >\n * operators.\n * @param {VALUE} a The first object to be compared.\n * @param {VALUE} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second,\n *     respectively.\n * @template VALUE\n */\ngoog.array.defaultCompare = function(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n};\n\n\n/**\n * Compares its two arguments for inverse order, using the built in < and >\n * operators.\n * @param {VALUE} a The first object to be compared.\n * @param {VALUE} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is greater than, equal to, or less than the second,\n *     respectively.\n * @template VALUE\n */\ngoog.array.inverseDefaultCompare = function(a, b) {\n  return -goog.array.defaultCompare(a, b);\n};\n\n\n/**\n * Compares its two arguments for equality, using the built in === operator.\n * @param {*} a The first object to compare.\n * @param {*} b The second object to compare.\n * @return {boolean} True if the two arguments are equal, false otherwise.\n */\ngoog.array.defaultCompareEquality = function(a, b) {\n  return a === b;\n};\n\n\n/**\n * Inserts a value into a sorted array. The array is not modified if the\n * value is already present.\n * @param {IArrayLike<VALUE>} array The array to modify.\n * @param {VALUE} value The object to insert.\n * @param {function(VALUE, VALUE): number=} opt_compareFn Optional comparison\n *     function by which the array is ordered. Should take 2 arguments to\n *     compare, and return a negative number, zero, or a positive number\n *     depending on whether the first argument is less than, equal to, or\n *     greater than the second.\n * @return {boolean} True if an element was inserted.\n * @template VALUE\n */\ngoog.array.binaryInsert = function(array, value, opt_compareFn) {\n  var index = goog.array.binarySearch(array, value, opt_compareFn);\n  if (index < 0) {\n    goog.array.insertAt(array, value, -(index + 1));\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * Removes a value from a sorted array.\n * @param {!IArrayLike<VALUE>} array The array to modify.\n * @param {VALUE} value The object to remove.\n * @param {function(VALUE, VALUE): number=} opt_compareFn Optional comparison\n *     function by which the array is ordered. Should take 2 arguments to\n *     compare, and return a negative number, zero, or a positive number\n *     depending on whether the first argument is less than, equal to, or\n *     greater than the second.\n * @return {boolean} True if an element was removed.\n * @template VALUE\n */\ngoog.array.binaryRemove = function(array, value, opt_compareFn) {\n  var index = goog.array.binarySearch(array, value, opt_compareFn);\n  return (index >= 0) ? goog.array.removeAt(array, index) : false;\n};\n\n\n/**\n * Splits an array into disjoint buckets according to a splitting function.\n * @param {IArrayLike<T>} array The array.\n * @param {function(this:S, T, number, !IArrayLike<T>):?} sorter Function to\n *     call for every element.  This takes 3 arguments (the element, the index\n *     and the array) and must return a valid object key (a string, number,\n *     etc), or undefined, if that object should not be placed in a bucket.\n * @param {S=} opt_obj The object to be used as the value of 'this' within\n *     sorter.\n * @return {!Object<!Array<T>>} An object, with keys being all of the unique\n *     return values of sorter, and values being arrays containing the items for\n *     which the splitter returned that key.\n * @template T,S\n */\ngoog.array.bucket = function(array, sorter, opt_obj) {\n  var buckets = {};\n\n  for (var i = 0; i < array.length; i++) {\n    var value = array[i];\n    var key = sorter.call(/** @type {?} */ (opt_obj), value, i, array);\n    if (goog.isDef(key)) {\n      // Push the value to the right bucket, creating it if necessary.\n      var bucket = buckets[key] || (buckets[key] = []);\n      bucket.push(value);\n    }\n  }\n\n  return buckets;\n};\n\n\n/**\n * Creates a new object built from the provided array and the key-generation\n * function.\n * @param {IArrayLike<T>} arr Array or array like object over\n *     which to iterate whose elements will be the values in the new object.\n * @param {?function(this:S, T, number, ?) : string} keyFunc The function to\n *     call for every element. This function takes 3 arguments (the element, the\n *     index and the array) and should return a string that will be used as the\n *     key for the element in the new object. If the function returns the same\n *     key for more than one element, the value for that key is\n *     implementation-defined.\n * @param {S=} opt_obj The object to be used as the value of 'this'\n *     within keyFunc.\n * @return {!Object<T>} The new object.\n * @template T,S\n */\ngoog.array.toObject = function(arr, keyFunc, opt_obj) {\n  var ret = {};\n  goog.array.forEach(arr, function(element, index) {\n    ret[keyFunc.call(/** @type {?} */ (opt_obj), element, index, arr)] =\n        element;\n  });\n  return ret;\n};\n\n\n/**\n * Creates a range of numbers in an arithmetic progression.\n *\n * Range takes 1, 2, or 3 arguments:\n * <pre>\n * range(5) is the same as range(0, 5, 1) and produces [0, 1, 2, 3, 4]\n * range(2, 5) is the same as range(2, 5, 1) and produces [2, 3, 4]\n * range(-2, -5, -1) produces [-2, -3, -4]\n * range(-2, -5, 1) produces [], since stepping by 1 wouldn't ever reach -5.\n * </pre>\n *\n * @param {number} startOrEnd The starting value of the range if an end argument\n *     is provided. Otherwise, the start value is 0, and this is the end value.\n * @param {number=} opt_end The optional end value of the range.\n * @param {number=} opt_step The step size between range values. Defaults to 1\n *     if opt_step is undefined or 0.\n * @return {!Array<number>} An array of numbers for the requested range. May be\n *     an empty array if adding the step would not converge toward the end\n *     value.\n */\ngoog.array.range = function(startOrEnd, opt_end, opt_step) {\n  var array = [];\n  var start = 0;\n  var end = startOrEnd;\n  var step = opt_step || 1;\n  if (opt_end !== undefined) {\n    start = startOrEnd;\n    end = opt_end;\n  }\n\n  if (step * (end - start) < 0) {\n    // Sign mismatch: start + step will never reach the end value.\n    return [];\n  }\n\n  if (step > 0) {\n    for (var i = start; i < end; i += step) {\n      array.push(i);\n    }\n  } else {\n    for (var i = start; i > end; i += step) {\n      array.push(i);\n    }\n  }\n  return array;\n};\n\n\n/**\n * Returns an array consisting of the given value repeated N times.\n *\n * @param {VALUE} value The value to repeat.\n * @param {number} n The repeat count.\n * @return {!Array<VALUE>} An array with the repeated value.\n * @template VALUE\n */\ngoog.array.repeat = function(value, n) {\n  var array = [];\n  for (var i = 0; i < n; i++) {\n    array[i] = value;\n  }\n  return array;\n};\n\n\n/**\n * Returns an array consisting of every argument with all arrays\n * expanded in-place recursively.\n *\n * @param {...*} var_args The values to flatten.\n * @return {!Array<?>} An array containing the flattened values.\n */\ngoog.array.flatten = function(var_args) {\n  var CHUNK_SIZE = 8192;\n\n  var result = [];\n  for (var i = 0; i < arguments.length; i++) {\n    var element = arguments[i];\n    if (goog.isArray(element)) {\n      for (var c = 0; c < element.length; c += CHUNK_SIZE) {\n        var chunk = goog.array.slice(element, c, c + CHUNK_SIZE);\n        var recurseResult = goog.array.flatten.apply(null, chunk);\n        for (var r = 0; r < recurseResult.length; r++) {\n          result.push(recurseResult[r]);\n        }\n      }\n    } else {\n      result.push(element);\n    }\n  }\n  return result;\n};\n\n\n/**\n * Rotates an array in-place. After calling this method, the element at\n * index i will be the element previously at index (i - n) %\n * array.length, for all values of i between 0 and array.length - 1,\n * inclusive.\n *\n * For example, suppose list comprises [t, a, n, k, s]. After invoking\n * rotate(array, 1) (or rotate(array, -4)), array will comprise [s, t, a, n, k].\n *\n * @param {!Array<T>} array The array to rotate.\n * @param {number} n The amount to rotate.\n * @return {!Array<T>} The array.\n * @template T\n */\ngoog.array.rotate = function(array, n) {\n  goog.asserts.assert(array.length != null);\n\n  if (array.length) {\n    n %= array.length;\n    if (n > 0) {\n      Array.prototype.unshift.apply(array, array.splice(-n, n));\n    } else if (n < 0) {\n      Array.prototype.push.apply(array, array.splice(0, -n));\n    }\n  }\n  return array;\n};\n\n\n/**\n * Moves one item of an array to a new position keeping the order of the rest\n * of the items. Example use case: keeping a list of JavaScript objects\n * synchronized with the corresponding list of DOM elements after one of the\n * elements has been dragged to a new position.\n * @param {!IArrayLike<?>} arr The array to modify.\n * @param {number} fromIndex Index of the item to move between 0 and\n *     {@code arr.length - 1}.\n * @param {number} toIndex Target index between 0 and {@code arr.length - 1}.\n */\ngoog.array.moveItem = function(arr, fromIndex, toIndex) {\n  goog.asserts.assert(fromIndex >= 0 && fromIndex < arr.length);\n  goog.asserts.assert(toIndex >= 0 && toIndex < arr.length);\n  // Remove 1 item at fromIndex.\n  var removedItems = Array.prototype.splice.call(arr, fromIndex, 1);\n  // Insert the removed item at toIndex.\n  Array.prototype.splice.call(arr, toIndex, 0, removedItems[0]);\n  // We don't use goog.array.insertAt and goog.array.removeAt, because they're\n  // significantly slower than splice.\n};\n\n\n/**\n * Creates a new array for which the element at position i is an array of the\n * ith element of the provided arrays.  The returned array will only be as long\n * as the shortest array provided; additional values are ignored.  For example,\n * the result of zipping [1, 2] and [3, 4, 5] is [[1,3], [2, 4]].\n *\n * This is similar to the zip() function in Python.  See {@link\n * http://docs.python.org/library/functions.html#zip}\n *\n * @param {...!IArrayLike<?>} var_args Arrays to be combined.\n * @return {!Array<!Array<?>>} A new array of arrays created from\n *     provided arrays.\n */\ngoog.array.zip = function(var_args) {\n  if (!arguments.length) {\n    return [];\n  }\n  var result = [];\n  var minLen = arguments[0].length;\n  for (var i = 1; i < arguments.length; i++) {\n    if (arguments[i].length < minLen) {\n      minLen = arguments[i].length;\n    }\n  }\n  for (var i = 0; i < minLen; i++) {\n    var value = [];\n    for (var j = 0; j < arguments.length; j++) {\n      value.push(arguments[j][i]);\n    }\n    result.push(value);\n  }\n  return result;\n};\n\n\n/**\n * Shuffles the values in the specified array using the Fisher-Yates in-place\n * shuffle (also known as the Knuth Shuffle). By default, calls Math.random()\n * and so resets the state of that random number generator. Similarly, may reset\n * the state of the any other specified random number generator.\n *\n * Runtime: O(n)\n *\n * @param {!Array<?>} arr The array to be shuffled.\n * @param {function():number=} opt_randFn Optional random function to use for\n *     shuffling.\n *     Takes no arguments, and returns a random number on the interval [0, 1).\n *     Defaults to Math.random() using JavaScript's built-in Math library.\n */\ngoog.array.shuffle = function(arr, opt_randFn) {\n  var randFn = opt_randFn || Math.random;\n\n  for (var i = arr.length - 1; i > 0; i--) {\n    // Choose a random array index in [0, i] (inclusive with i).\n    var j = Math.floor(randFn() * (i + 1));\n\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n  }\n};\n\n\n/**\n * Returns a new array of elements from arr, based on the indexes of elements\n * provided by index_arr. For example, the result of index copying\n * ['a', 'b', 'c'] with index_arr [1,0,0,2] is ['b', 'a', 'a', 'c'].\n *\n * @param {!IArrayLike<T>} arr The array to get a indexed copy from.\n * @param {!IArrayLike<number>} index_arr An array of indexes to get from arr.\n * @return {!Array<T>} A new array of elements from arr in index_arr order.\n * @template T\n */\ngoog.array.copyByIndex = function(arr, index_arr) {\n  var result = [];\n  goog.array.forEach(index_arr, function(index) { result.push(arr[index]); });\n  return result;\n};\n\n\n/**\n * Maps each element of the input array into zero or more elements of the output\n * array.\n *\n * @param {!IArrayLike<VALUE>|string} arr Array or array like object\n *     over which to iterate.\n * @param {function(this:THIS, VALUE, number, ?): !Array<RESULT>} f The function\n *     to call for every element. This function takes 3 arguments (the element,\n *     the index and the array) and should return an array. The result will be\n *     used to extend a new array.\n * @param {THIS=} opt_obj The object to be used as the value of 'this' within f.\n * @return {!Array<RESULT>} a new array with the concatenation of all arrays\n *     returned from f.\n * @template THIS, VALUE, RESULT\n */\ngoog.array.concatMap = function(arr, f, opt_obj) {\n  return goog.array.concat.apply([], goog.array.map(arr, f, opt_obj));\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities for string manipulation.\n * @author arv@google.com (Erik Arvidsson)\n */\n\n\n/**\n * Namespace for string utilities\n */\ngoog.provide('goog.string');\ngoog.provide('goog.string.Unicode');\n\n\n/**\n * @define {boolean} Enables HTML escaping of lowercase letter \"e\" which helps\n * with detection of double-escaping as this letter is frequently used.\n */\ngoog.define('goog.string.DETECT_DOUBLE_ESCAPING', false);\n\n\n/**\n * @define {boolean} Whether to force non-dom html unescaping.\n */\ngoog.define('goog.string.FORCE_NON_DOM_HTML_UNESCAPING', false);\n\n\n/**\n * Common Unicode string characters.\n * @enum {string}\n */\ngoog.string.Unicode = {\n  NBSP: '\\xa0'\n};\n\n\n/**\n * Fast prefix-checker.\n * @param {string} str The string to check.\n * @param {string} prefix A string to look for at the start of `str`.\n * @return {boolean} True if `str` begins with `prefix`.\n */\ngoog.string.startsWith = function(str, prefix) {\n  return str.lastIndexOf(prefix, 0) == 0;\n};\n\n\n/**\n * Fast suffix-checker.\n * @param {string} str The string to check.\n * @param {string} suffix A string to look for at the end of `str`.\n * @return {boolean} True if `str` ends with `suffix`.\n */\ngoog.string.endsWith = function(str, suffix) {\n  var l = str.length - suffix.length;\n  return l >= 0 && str.indexOf(suffix, l) == l;\n};\n\n\n/**\n * Case-insensitive prefix-checker.\n * @param {string} str The string to check.\n * @param {string} prefix  A string to look for at the end of `str`.\n * @return {boolean} True if `str` begins with `prefix` (ignoring\n *     case).\n */\ngoog.string.caseInsensitiveStartsWith = function(str, prefix) {\n  return goog.string.caseInsensitiveCompare(\n             prefix, str.substr(0, prefix.length)) == 0;\n};\n\n\n/**\n * Case-insensitive suffix-checker.\n * @param {string} str The string to check.\n * @param {string} suffix A string to look for at the end of `str`.\n * @return {boolean} True if `str` ends with `suffix` (ignoring\n *     case).\n */\ngoog.string.caseInsensitiveEndsWith = function(str, suffix) {\n  return (\n      goog.string.caseInsensitiveCompare(\n          suffix, str.substr(str.length - suffix.length, suffix.length)) == 0);\n};\n\n\n/**\n * Case-insensitive equality checker.\n * @param {string} str1 First string to check.\n * @param {string} str2 Second string to check.\n * @return {boolean} True if `str1` and `str2` are the same string,\n *     ignoring case.\n */\ngoog.string.caseInsensitiveEquals = function(str1, str2) {\n  return str1.toLowerCase() == str2.toLowerCase();\n};\n\n\n/**\n * Does simple python-style string substitution.\n * subs(\"foo%s hot%s\", \"bar\", \"dog\") becomes \"foobar hotdog\".\n * @param {string} str The string containing the pattern.\n * @param {...*} var_args The items to substitute into the pattern.\n * @return {string} A copy of `str` in which each occurrence of\n *     {@code %s} has been replaced an argument from `var_args`.\n */\ngoog.string.subs = function(str, var_args) {\n  var splitParts = str.split('%s');\n  var returnString = '';\n\n  var subsArguments = Array.prototype.slice.call(arguments, 1);\n  while (subsArguments.length &&\n         // Replace up to the last split part. We are inserting in the\n         // positions between split parts.\n         splitParts.length > 1) {\n    returnString += splitParts.shift() + subsArguments.shift();\n  }\n\n  return returnString + splitParts.join('%s');  // Join unused '%s'\n};\n\n\n/**\n * Converts multiple whitespace chars (spaces, non-breaking-spaces, new lines\n * and tabs) to a single space, and strips leading and trailing whitespace.\n * @param {string} str Input string.\n * @return {string} A copy of `str` with collapsed whitespace.\n */\ngoog.string.collapseWhitespace = function(str) {\n  // Since IE doesn't include non-breaking-space (0xa0) in their \\s character\n  // class (as required by section 7.2 of the ECMAScript spec), we explicitly\n  // include it in the regexp to enforce consistent cross-browser behavior.\n  return str.replace(/[\\s\\xa0]+/g, ' ').replace(/^\\s+|\\s+$/g, '');\n};\n\n\n/**\n * Checks if a string is empty or contains only whitespaces.\n * @param {string} str The string to check.\n * @return {boolean} Whether `str` is empty or whitespace only.\n */\ngoog.string.isEmptyOrWhitespace = function(str) {\n  // testing length == 0 first is actually slower in all browsers (about the\n  // same in Opera).\n  // Since IE doesn't include non-breaking-space (0xa0) in their \\s character\n  // class (as required by section 7.2 of the ECMAScript spec), we explicitly\n  // include it in the regexp to enforce consistent cross-browser behavior.\n  return /^[\\s\\xa0]*$/.test(str);\n};\n\n\n/**\n * Checks if a string is empty.\n * @param {string} str The string to check.\n * @return {boolean} Whether `str` is empty.\n */\ngoog.string.isEmptyString = function(str) {\n  return str.length == 0;\n};\n\n\n/**\n * Checks if a string is empty or contains only whitespaces.\n *\n * @param {string} str The string to check.\n * @return {boolean} Whether `str` is empty or whitespace only.\n * @deprecated Use goog.string.isEmptyOrWhitespace instead.\n */\ngoog.string.isEmpty = goog.string.isEmptyOrWhitespace;\n\n\n/**\n * Checks if a string is null, undefined, empty or contains only whitespaces.\n * @param {*} str The string to check.\n * @return {boolean} Whether `str` is null, undefined, empty, or\n *     whitespace only.\n * @deprecated Use goog.string.isEmptyOrWhitespace(goog.string.makeSafe(str))\n *     instead.\n */\ngoog.string.isEmptyOrWhitespaceSafe = function(str) {\n  return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(str));\n};\n\n\n/**\n * Checks if a string is null, undefined, empty or contains only whitespaces.\n *\n * @param {*} str The string to check.\n * @return {boolean} Whether `str` is null, undefined, empty, or\n *     whitespace only.\n * @deprecated Use goog.string.isEmptyOrWhitespace instead.\n */\ngoog.string.isEmptySafe = goog.string.isEmptyOrWhitespaceSafe;\n\n\n/**\n * Checks if a string is all breaking whitespace.\n * @param {string} str The string to check.\n * @return {boolean} Whether the string is all breaking whitespace.\n */\ngoog.string.isBreakingWhitespace = function(str) {\n  return !/[^\\t\\n\\r ]/.test(str);\n};\n\n\n/**\n * Checks if a string contains all letters.\n * @param {string} str string to check.\n * @return {boolean} True if `str` consists entirely of letters.\n */\ngoog.string.isAlpha = function(str) {\n  return !/[^a-zA-Z]/.test(str);\n};\n\n\n/**\n * Checks if a string contains only numbers.\n * @param {*} str string to check. If not a string, it will be\n *     casted to one.\n * @return {boolean} True if `str` is numeric.\n */\ngoog.string.isNumeric = function(str) {\n  return !/[^0-9]/.test(str);\n};\n\n\n/**\n * Checks if a string contains only numbers or letters.\n * @param {string} str string to check.\n * @return {boolean} True if `str` is alphanumeric.\n */\ngoog.string.isAlphaNumeric = function(str) {\n  return !/[^a-zA-Z0-9]/.test(str);\n};\n\n\n/**\n * Checks if a character is a space character.\n * @param {string} ch Character to check.\n * @return {boolean} True if `ch` is a space.\n */\ngoog.string.isSpace = function(ch) {\n  return ch == ' ';\n};\n\n\n/**\n * Checks if a character is a valid unicode character.\n * @param {string} ch Character to check.\n * @return {boolean} True if `ch` is a valid unicode character.\n */\ngoog.string.isUnicodeChar = function(ch) {\n  return ch.length == 1 && ch >= ' ' && ch <= '~' ||\n      ch >= '\\u0080' && ch <= '\\uFFFD';\n};\n\n\n/**\n * Takes a string and replaces newlines with a space. Multiple lines are\n * replaced with a single space.\n * @param {string} str The string from which to strip newlines.\n * @return {string} A copy of `str` stripped of newlines.\n */\ngoog.string.stripNewlines = function(str) {\n  return str.replace(/(\\r\\n|\\r|\\n)+/g, ' ');\n};\n\n\n/**\n * Replaces Windows and Mac new lines with unix style: \\r or \\r\\n with \\n.\n * @param {string} str The string to in which to canonicalize newlines.\n * @return {string} `str` A copy of {@code} with canonicalized newlines.\n */\ngoog.string.canonicalizeNewlines = function(str) {\n  return str.replace(/(\\r\\n|\\r|\\n)/g, '\\n');\n};\n\n\n/**\n * Normalizes whitespace in a string, replacing all whitespace chars with\n * a space.\n * @param {string} str The string in which to normalize whitespace.\n * @return {string} A copy of `str` with all whitespace normalized.\n */\ngoog.string.normalizeWhitespace = function(str) {\n  return str.replace(/\\xa0|\\s/g, ' ');\n};\n\n\n/**\n * Normalizes spaces in a string, replacing all consecutive spaces and tabs\n * with a single space. Replaces non-breaking space with a space.\n * @param {string} str The string in which to normalize spaces.\n * @return {string} A copy of `str` with all consecutive spaces and tabs\n *    replaced with a single space.\n */\ngoog.string.normalizeSpaces = function(str) {\n  return str.replace(/\\xa0|[ \\t]+/g, ' ');\n};\n\n\n/**\n * Removes the breaking spaces from the left and right of the string and\n * collapses the sequences of breaking spaces in the middle into single spaces.\n * The original and the result strings render the same way in HTML.\n * @param {string} str A string in which to collapse spaces.\n * @return {string} Copy of the string with normalized breaking spaces.\n */\ngoog.string.collapseBreakingSpaces = function(str) {\n  return str.replace(/[\\t\\r\\n ]+/g, ' ')\n      .replace(/^[\\t\\r\\n ]+|[\\t\\r\\n ]+$/g, '');\n};\n\n\n/**\n * Trims white spaces to the left and right of a string.\n * @param {string} str The string to trim.\n * @return {string} A trimmed copy of `str`.\n */\ngoog.string.trim =\n    (goog.TRUSTED_SITE && String.prototype.trim) ? function(str) {\n      return str.trim();\n    } : function(str) {\n      // Since IE doesn't include non-breaking-space (0xa0) in their \\s\n      // character class (as required by section 7.2 of the ECMAScript spec),\n      // we explicitly include it in the regexp to enforce consistent\n      // cross-browser behavior.\n      // NOTE: We don't use String#replace because it might have side effects\n      // causing this function to not compile to 0 bytes.\n      return /^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(str)[1];\n    };\n\n\n/**\n * Trims whitespaces at the left end of a string.\n * @param {string} str The string to left trim.\n * @return {string} A trimmed copy of `str`.\n */\ngoog.string.trimLeft = function(str) {\n  // Since IE doesn't include non-breaking-space (0xa0) in their \\s character\n  // class (as required by section 7.2 of the ECMAScript spec), we explicitly\n  // include it in the regexp to enforce consistent cross-browser behavior.\n  return str.replace(/^[\\s\\xa0]+/, '');\n};\n\n\n/**\n * Trims whitespaces at the right end of a string.\n * @param {string} str The string to right trim.\n * @return {string} A trimmed copy of `str`.\n */\ngoog.string.trimRight = function(str) {\n  // Since IE doesn't include non-breaking-space (0xa0) in their \\s character\n  // class (as required by section 7.2 of the ECMAScript spec), we explicitly\n  // include it in the regexp to enforce consistent cross-browser behavior.\n  return str.replace(/[\\s\\xa0]+$/, '');\n};\n\n\n/**\n * A string comparator that ignores case.\n * -1 = str1 less than str2\n *  0 = str1 equals str2\n *  1 = str1 greater than str2\n *\n * @param {string} str1 The string to compare.\n * @param {string} str2 The string to compare `str1` to.\n * @return {number} The comparator result, as described above.\n */\ngoog.string.caseInsensitiveCompare = function(str1, str2) {\n  var test1 = String(str1).toLowerCase();\n  var test2 = String(str2).toLowerCase();\n\n  if (test1 < test2) {\n    return -1;\n  } else if (test1 == test2) {\n    return 0;\n  } else {\n    return 1;\n  }\n};\n\n\n/**\n * Compares two strings interpreting their numeric substrings as numbers.\n *\n * @param {string} str1 First string.\n * @param {string} str2 Second string.\n * @param {!RegExp} tokenizerRegExp Splits a string into substrings of\n *     non-negative integers, non-numeric characters and optionally fractional\n *     numbers starting with a decimal point.\n * @return {number} Negative if str1 < str2, 0 is str1 == str2, positive if\n *     str1 > str2.\n * @private\n */\ngoog.string.numberAwareCompare_ = function(str1, str2, tokenizerRegExp) {\n  if (str1 == str2) {\n    return 0;\n  }\n  if (!str1) {\n    return -1;\n  }\n  if (!str2) {\n    return 1;\n  }\n\n  // Using match to split the entire string ahead of time turns out to be faster\n  // for most inputs than using RegExp.exec or iterating over each character.\n  var tokens1 = str1.toLowerCase().match(tokenizerRegExp);\n  var tokens2 = str2.toLowerCase().match(tokenizerRegExp);\n\n  var count = Math.min(tokens1.length, tokens2.length);\n\n  for (var i = 0; i < count; i++) {\n    var a = tokens1[i];\n    var b = tokens2[i];\n\n    // Compare pairs of tokens, returning if one token sorts before the other.\n    if (a != b) {\n      // Only if both tokens are integers is a special comparison required.\n      // Decimal numbers are sorted as strings (e.g., '.09' < '.1').\n      var num1 = parseInt(a, 10);\n      if (!isNaN(num1)) {\n        var num2 = parseInt(b, 10);\n        if (!isNaN(num2) && num1 - num2) {\n          return num1 - num2;\n        }\n      }\n      return a < b ? -1 : 1;\n    }\n  }\n\n  // If one string is a substring of the other, the shorter string sorts first.\n  if (tokens1.length != tokens2.length) {\n    return tokens1.length - tokens2.length;\n  }\n\n  // The two strings must be equivalent except for case (perfect equality is\n  // tested at the head of the function.) Revert to default ASCII string\n  // comparison to stabilize the sort.\n  return str1 < str2 ? -1 : 1;\n};\n\n\n/**\n * String comparison function that handles non-negative integer numbers in a\n * way humans might expect. Using this function, the string 'File 2.jpg' sorts\n * before 'File 10.jpg', and 'Version 1.9' before 'Version 1.10'. The comparison\n * is mostly case-insensitive, though strings that are identical except for case\n * are sorted with the upper-case strings before lower-case.\n *\n * This comparison function is up to 50x slower than either the default or the\n * case-insensitive compare. It should not be used in time-critical code, but\n * should be fast enough to sort several hundred short strings (like filenames)\n * with a reasonable delay.\n *\n * @param {string} str1 The string to compare in a numerically sensitive way.\n * @param {string} str2 The string to compare `str1` to.\n * @return {number} less than 0 if str1 < str2, 0 if str1 == str2, greater than\n *     0 if str1 > str2.\n */\ngoog.string.intAwareCompare = function(str1, str2) {\n  return goog.string.numberAwareCompare_(str1, str2, /\\d+|\\D+/g);\n};\n\n\n/**\n * String comparison function that handles non-negative integer and fractional\n * numbers in a way humans might expect. Using this function, the string\n * 'File 2.jpg' sorts before 'File 10.jpg', and '3.14' before '3.2'. Equivalent\n * to {@link goog.string.intAwareCompare} apart from the way how it interprets\n * dots.\n *\n * @param {string} str1 The string to compare in a numerically sensitive way.\n * @param {string} str2 The string to compare `str1` to.\n * @return {number} less than 0 if str1 < str2, 0 if str1 == str2, greater than\n *     0 if str1 > str2.\n */\ngoog.string.floatAwareCompare = function(str1, str2) {\n  return goog.string.numberAwareCompare_(str1, str2, /\\d+|\\.\\d+|\\D+/g);\n};\n\n\n/**\n * Alias for {@link goog.string.floatAwareCompare}.\n *\n * @param {string} str1\n * @param {string} str2\n * @return {number}\n */\ngoog.string.numerateCompare = goog.string.floatAwareCompare;\n\n\n/**\n * URL-encodes a string\n * @param {*} str The string to url-encode.\n * @return {string} An encoded copy of `str` that is safe for urls.\n *     Note that '#', ':', and other characters used to delimit portions\n *     of URLs *will* be encoded.\n */\ngoog.string.urlEncode = function(str) {\n  return encodeURIComponent(String(str));\n};\n\n\n/**\n * URL-decodes the string. We need to specially handle '+'s because\n * the javascript library doesn't convert them to spaces.\n * @param {string} str The string to url decode.\n * @return {string} The decoded `str`.\n */\ngoog.string.urlDecode = function(str) {\n  return decodeURIComponent(str.replace(/\\+/g, ' '));\n};\n\n\n/**\n * Converts \\n to <br>s or <br />s.\n * @param {string} str The string in which to convert newlines.\n * @param {boolean=} opt_xml Whether to use XML compatible tags.\n * @return {string} A copy of `str` with converted newlines.\n */\ngoog.string.newLineToBr = function(str, opt_xml) {\n  return str.replace(/(\\r\\n|\\r|\\n)/g, opt_xml ? '<br />' : '<br>');\n};\n\n\n/**\n * Escapes double quote '\"' and single quote '\\'' characters in addition to\n * '&', '<', and '>' so that a string can be included in an HTML tag attribute\n * value within double or single quotes.\n *\n * It should be noted that > doesn't need to be escaped for the HTML or XML to\n * be valid, but it has been decided to escape it for consistency with other\n * implementations.\n *\n * With goog.string.DETECT_DOUBLE_ESCAPING, this function escapes also the\n * lowercase letter \"e\".\n *\n * NOTE(user):\n * HtmlEscape is often called during the generation of large blocks of HTML.\n * Using statics for the regular expressions and strings is an optimization\n * that can more than half the amount of time IE spends in this function for\n * large apps, since strings and regexes both contribute to GC allocations.\n *\n * Testing for the presence of a character before escaping increases the number\n * of function calls, but actually provides a speed increase for the average\n * case -- since the average case often doesn't require the escaping of all 4\n * characters and indexOf() is much cheaper than replace().\n * The worst case does suffer slightly from the additional calls, therefore the\n * opt_isLikelyToContainHtmlChars option has been included for situations\n * where all 4 HTML entities are very likely to be present and need escaping.\n *\n * Some benchmarks (times tended to fluctuate +-0.05ms):\n *                                     FireFox                     IE6\n * (no chars / average (mix of cases) / all 4 chars)\n * no checks                     0.13 / 0.22 / 0.22         0.23 / 0.53 / 0.80\n * indexOf                       0.08 / 0.17 / 0.26         0.22 / 0.54 / 0.84\n * indexOf + re test             0.07 / 0.17 / 0.28         0.19 / 0.50 / 0.85\n *\n * An additional advantage of checking if replace actually needs to be called\n * is a reduction in the number of object allocations, so as the size of the\n * application grows the difference between the various methods would increase.\n *\n * @param {string} str string to be escaped.\n * @param {boolean=} opt_isLikelyToContainHtmlChars Don't perform a check to see\n *     if the character needs replacing - use this option if you expect each of\n *     the characters to appear often. Leave false if you expect few html\n *     characters to occur in your strings, such as if you are escaping HTML.\n * @return {string} An escaped copy of `str`.\n */\ngoog.string.htmlEscape = function(str, opt_isLikelyToContainHtmlChars) {\n\n  if (opt_isLikelyToContainHtmlChars) {\n    str = str.replace(goog.string.AMP_RE_, '&amp;')\n              .replace(goog.string.LT_RE_, '&lt;')\n              .replace(goog.string.GT_RE_, '&gt;')\n              .replace(goog.string.QUOT_RE_, '&quot;')\n              .replace(goog.string.SINGLE_QUOTE_RE_, '&#39;')\n              .replace(goog.string.NULL_RE_, '&#0;');\n    if (goog.string.DETECT_DOUBLE_ESCAPING) {\n      str = str.replace(goog.string.E_RE_, '&#101;');\n    }\n    return str;\n\n  } else {\n    // quick test helps in the case when there are no chars to replace, in\n    // worst case this makes barely a difference to the time taken\n    if (!goog.string.ALL_RE_.test(str)) return str;\n\n    // str.indexOf is faster than regex.test in this case\n    if (str.indexOf('&') != -1) {\n      str = str.replace(goog.string.AMP_RE_, '&amp;');\n    }\n    if (str.indexOf('<') != -1) {\n      str = str.replace(goog.string.LT_RE_, '&lt;');\n    }\n    if (str.indexOf('>') != -1) {\n      str = str.replace(goog.string.GT_RE_, '&gt;');\n    }\n    if (str.indexOf('\"') != -1) {\n      str = str.replace(goog.string.QUOT_RE_, '&quot;');\n    }\n    if (str.indexOf('\\'') != -1) {\n      str = str.replace(goog.string.SINGLE_QUOTE_RE_, '&#39;');\n    }\n    if (str.indexOf('\\x00') != -1) {\n      str = str.replace(goog.string.NULL_RE_, '&#0;');\n    }\n    if (goog.string.DETECT_DOUBLE_ESCAPING && str.indexOf('e') != -1) {\n      str = str.replace(goog.string.E_RE_, '&#101;');\n    }\n    return str;\n  }\n};\n\n\n/**\n * Regular expression that matches an ampersand, for use in escaping.\n * @const {!RegExp}\n * @private\n */\ngoog.string.AMP_RE_ = /&/g;\n\n\n/**\n * Regular expression that matches a less than sign, for use in escaping.\n * @const {!RegExp}\n * @private\n */\ngoog.string.LT_RE_ = /</g;\n\n\n/**\n * Regular expression that matches a greater than sign, for use in escaping.\n * @const {!RegExp}\n * @private\n */\ngoog.string.GT_RE_ = />/g;\n\n\n/**\n * Regular expression that matches a double quote, for use in escaping.\n * @const {!RegExp}\n * @private\n */\ngoog.string.QUOT_RE_ = /\"/g;\n\n\n/**\n * Regular expression that matches a single quote, for use in escaping.\n * @const {!RegExp}\n * @private\n */\ngoog.string.SINGLE_QUOTE_RE_ = /'/g;\n\n\n/**\n * Regular expression that matches null character, for use in escaping.\n * @const {!RegExp}\n * @private\n */\ngoog.string.NULL_RE_ = /\\x00/g;\n\n\n/**\n * Regular expression that matches a lowercase letter \"e\", for use in escaping.\n * @const {!RegExp}\n * @private\n */\ngoog.string.E_RE_ = /e/g;\n\n\n/**\n * Regular expression that matches any character that needs to be escaped.\n * @const {!RegExp}\n * @private\n */\ngoog.string.ALL_RE_ =\n    (goog.string.DETECT_DOUBLE_ESCAPING ? /[\\x00&<>\"'e]/ : /[\\x00&<>\"']/);\n\n\n/**\n * Unescapes an HTML string.\n *\n * @param {string} str The string to unescape.\n * @return {string} An unescaped copy of `str`.\n */\ngoog.string.unescapeEntities = function(str) {\n  if (goog.string.contains(str, '&')) {\n    // We are careful not to use a DOM if we do not have one or we explicitly\n    // requested non-DOM html unescaping.\n    if (!goog.string.FORCE_NON_DOM_HTML_UNESCAPING &&\n        'document' in goog.global) {\n      return goog.string.unescapeEntitiesUsingDom_(str);\n    } else {\n      // Fall back on pure XML entities\n      return goog.string.unescapePureXmlEntities_(str);\n    }\n  }\n  return str;\n};\n\n\n/**\n * Unescapes a HTML string using the provided document.\n *\n * @param {string} str The string to unescape.\n * @param {!Document} document A document to use in escaping the string.\n * @return {string} An unescaped copy of `str`.\n */\ngoog.string.unescapeEntitiesWithDocument = function(str, document) {\n  if (goog.string.contains(str, '&')) {\n    return goog.string.unescapeEntitiesUsingDom_(str, document);\n  }\n  return str;\n};\n\n\n/**\n * Unescapes an HTML string using a DOM to resolve non-XML, non-numeric\n * entities. This function is XSS-safe and whitespace-preserving.\n * @private\n * @param {string} str The string to unescape.\n * @param {Document=} opt_document An optional document to use for creating\n *     elements. If this is not specified then the default window.document\n *     will be used.\n * @return {string} The unescaped `str` string.\n */\ngoog.string.unescapeEntitiesUsingDom_ = function(str, opt_document) {\n  /** @type {!Object<string, string>} */\n  var seen = {'&amp;': '&', '&lt;': '<', '&gt;': '>', '&quot;': '\"'};\n  var div;\n  if (opt_document) {\n    div = opt_document.createElement('div');\n  } else {\n    div = goog.global.document.createElement('div');\n  }\n  // Match as many valid entity characters as possible. If the actual entity\n  // happens to be shorter, it will still work as innerHTML will return the\n  // trailing characters unchanged. Since the entity characters do not include\n  // open angle bracket, there is no chance of XSS from the innerHTML use.\n  // Since no whitespace is passed to innerHTML, whitespace is preserved.\n  return str.replace(goog.string.HTML_ENTITY_PATTERN_, function(s, entity) {\n    // Check for cached entity.\n    var value = seen[s];\n    if (value) {\n      return value;\n    }\n    // Check for numeric entity.\n    if (entity.charAt(0) == '#') {\n      // Prefix with 0 so that hex entities (e.g. &#x10) parse as hex numbers.\n      var n = Number('0' + entity.substr(1));\n      if (!isNaN(n)) {\n        value = String.fromCharCode(n);\n      }\n    }\n    // Fall back to innerHTML otherwise.\n    if (!value) {\n      // Append a non-entity character to avoid a bug in Webkit that parses\n      // an invalid entity at the end of innerHTML text as the empty string.\n      div.innerHTML = s + ' ';\n      // Then remove the trailing character from the result.\n      value = div.firstChild.nodeValue.slice(0, -1);\n    }\n    // Cache and return.\n    return seen[s] = value;\n  });\n};\n\n\n/**\n * Unescapes XML entities.\n * @private\n * @param {string} str The string to unescape.\n * @return {string} An unescaped copy of `str`.\n */\ngoog.string.unescapePureXmlEntities_ = function(str) {\n  return str.replace(/&([^;]+);/g, function(s, entity) {\n    switch (entity) {\n      case 'amp':\n        return '&';\n      case 'lt':\n        return '<';\n      case 'gt':\n        return '>';\n      case 'quot':\n        return '\"';\n      default:\n        if (entity.charAt(0) == '#') {\n          // Prefix with 0 so that hex entities (e.g. &#x10) parse as hex.\n          var n = Number('0' + entity.substr(1));\n          if (!isNaN(n)) {\n            return String.fromCharCode(n);\n          }\n        }\n        // For invalid entities we just return the entity\n        return s;\n    }\n  });\n};\n\n\n/**\n * Regular expression that matches an HTML entity.\n * See also HTML5: Tokenization / Tokenizing character references.\n * @private\n * @type {!RegExp}\n */\ngoog.string.HTML_ENTITY_PATTERN_ = /&([^;\\s<&]+);?/g;\n\n\n/**\n * Do escaping of whitespace to preserve spatial formatting. We use character\n * entity #160 to make it safer for xml.\n * @param {string} str The string in which to escape whitespace.\n * @param {boolean=} opt_xml Whether to use XML compatible tags.\n * @return {string} An escaped copy of `str`.\n */\ngoog.string.whitespaceEscape = function(str, opt_xml) {\n  // This doesn't use goog.string.preserveSpaces for backwards compatibility.\n  return goog.string.newLineToBr(str.replace(/  /g, ' &#160;'), opt_xml);\n};\n\n\n/**\n * Preserve spaces that would be otherwise collapsed in HTML by replacing them\n * with non-breaking space Unicode characters.\n * @param {string} str The string in which to preserve whitespace.\n * @return {string} A copy of `str` with preserved whitespace.\n */\ngoog.string.preserveSpaces = function(str) {\n  return str.replace(/(^|[\\n ]) /g, '$1' + goog.string.Unicode.NBSP);\n};\n\n\n/**\n * Strip quote characters around a string.  The second argument is a string of\n * characters to treat as quotes.  This can be a single character or a string of\n * multiple character and in that case each of those are treated as possible\n * quote characters. For example:\n *\n * <pre>\n * goog.string.stripQuotes('\"abc\"', '\"`') --\u003e 'abc'\n * goog.string.stripQuotes('`abc`', '\"`') --\u003e 'abc'\n * </pre>\n *\n * @param {string} str The string to strip.\n * @param {string} quoteChars The quote characters to strip.\n * @return {string} A copy of `str` without the quotes.\n */\ngoog.string.stripQuotes = function(str, quoteChars) {\n  var length = quoteChars.length;\n  for (var i = 0; i < length; i++) {\n    var quoteChar = length == 1 ? quoteChars : quoteChars.charAt(i);\n    if (str.charAt(0) == quoteChar && str.charAt(str.length - 1) == quoteChar) {\n      return str.substring(1, str.length - 1);\n    }\n  }\n  return str;\n};\n\n\n/**\n * Truncates a string to a certain length and adds '...' if necessary.  The\n * length also accounts for the ellipsis, so a maximum length of 10 and a string\n * 'Hello World!' produces 'Hello W...'.\n * @param {string} str The string to truncate.\n * @param {number} chars Max number of characters.\n * @param {boolean=} opt_protectEscapedCharacters Whether to protect escaped\n *     characters from being cut off in the middle.\n * @return {string} The truncated `str` string.\n */\ngoog.string.truncate = function(str, chars, opt_protectEscapedCharacters) {\n  if (opt_protectEscapedCharacters) {\n    str = goog.string.unescapeEntities(str);\n  }\n\n  if (str.length > chars) {\n    str = str.substring(0, chars - 3) + '...';\n  }\n\n  if (opt_protectEscapedCharacters) {\n    str = goog.string.htmlEscape(str);\n  }\n\n  return str;\n};\n\n\n/**\n * Truncate a string in the middle, adding \"...\" if necessary,\n * and favoring the beginning of the string.\n * @param {string} str The string to truncate the middle of.\n * @param {number} chars Max number of characters.\n * @param {boolean=} opt_protectEscapedCharacters Whether to protect escaped\n *     characters from being cutoff in the middle.\n * @param {number=} opt_trailingChars Optional number of trailing characters to\n *     leave at the end of the string, instead of truncating as close to the\n *     middle as possible.\n * @return {string} A truncated copy of `str`.\n */\ngoog.string.truncateMiddle = function(\n    str, chars, opt_protectEscapedCharacters, opt_trailingChars) {\n  if (opt_protectEscapedCharacters) {\n    str = goog.string.unescapeEntities(str);\n  }\n\n  if (opt_trailingChars && str.length > chars) {\n    if (opt_trailingChars > chars) {\n      opt_trailingChars = chars;\n    }\n    var endPoint = str.length - opt_trailingChars;\n    var startPoint = chars - opt_trailingChars;\n    str = str.substring(0, startPoint) + '...' + str.substring(endPoint);\n  } else if (str.length > chars) {\n    // Favor the beginning of the string:\n    var half = Math.floor(chars / 2);\n    var endPos = str.length - half;\n    half += chars % 2;\n    str = str.substring(0, half) + '...' + str.substring(endPos);\n  }\n\n  if (opt_protectEscapedCharacters) {\n    str = goog.string.htmlEscape(str);\n  }\n\n  return str;\n};\n\n\n/**\n * Special chars that need to be escaped for goog.string.quote.\n * @private {!Object<string, string>}\n */\ngoog.string.specialEscapeChars_ = {\n  '\\0': '\\\\0',\n  '\\b': '\\\\b',\n  '\\f': '\\\\f',\n  '\\n': '\\\\n',\n  '\\r': '\\\\r',\n  '\\t': '\\\\t',\n  '\\x0B': '\\\\x0B',  // '\\v' is not supported in JScript\n  '\"': '\\\\\"',\n  '\\\\': '\\\\\\\\',\n  // To support the use case of embedding quoted strings inside of script\n  // tags, we have to make sure HTML comments and opening/closing script tags do\n  // not appear in the resulting string. The specific strings that must be\n  // escaped are documented at:\n  // http://www.w3.org/TR/html51/semantics.html#restrictions-for-contents-of-script-elements\n  '<': '\\x3c'\n};\n\n\n/**\n * Character mappings used internally for goog.string.escapeChar.\n * @private {!Object<string, string>}\n */\ngoog.string.jsEscapeCache_ = {\n  '\\'': '\\\\\\''\n};\n\n\n/**\n * Encloses a string in double quotes and escapes characters so that the\n * string is a valid JS string. The resulting string is safe to embed in\n * `<script>` tags as \"<\" is escaped.\n * @param {string} s The string to quote.\n * @return {string} A copy of `s` surrounded by double quotes.\n */\ngoog.string.quote = function(s) {\n  s = String(s);\n  var sb = ['\"'];\n  for (var i = 0; i < s.length; i++) {\n    var ch = s.charAt(i);\n    var cc = ch.charCodeAt(0);\n    sb[i + 1] = goog.string.specialEscapeChars_[ch] ||\n        ((cc > 31 && cc < 127) ? ch : goog.string.escapeChar(ch));\n  }\n  sb.push('\"');\n  return sb.join('');\n};\n\n\n/**\n * Takes a string and returns the escaped string for that input string.\n * @param {string} str The string to escape.\n * @return {string} An escaped string representing `str`.\n */\ngoog.string.escapeString = function(str) {\n  var sb = [];\n  for (var i = 0; i < str.length; i++) {\n    sb[i] = goog.string.escapeChar(str.charAt(i));\n  }\n  return sb.join('');\n};\n\n\n/**\n * Takes a character and returns the escaped string for that character. For\n * example escapeChar(String.fromCharCode(15)) -> \"\\\\x0E\".\n * @param {string} c The character to escape.\n * @return {string} An escaped string representing `c`.\n */\ngoog.string.escapeChar = function(c) {\n  if (c in goog.string.jsEscapeCache_) {\n    return goog.string.jsEscapeCache_[c];\n  }\n\n  if (c in goog.string.specialEscapeChars_) {\n    return goog.string.jsEscapeCache_[c] = goog.string.specialEscapeChars_[c];\n  }\n\n  var rv = c;\n  var cc = c.charCodeAt(0);\n  if (cc > 31 && cc < 127) {\n    rv = c;\n  } else {\n    // tab is 9 but handled above\n    if (cc < 256) {\n      rv = '\\\\x';\n      if (cc < 16 || cc > 256) {\n        rv += '0';\n      }\n    } else {\n      rv = '\\\\u';\n      if (cc < 4096) {  // \\u1000\n        rv += '0';\n      }\n    }\n    rv += cc.toString(16).toUpperCase();\n  }\n\n  return goog.string.jsEscapeCache_[c] = rv;\n};\n\n\n/**\n * Determines whether a string contains a substring.\n * @param {string} str The string to search.\n * @param {string} subString The substring to search for.\n * @return {boolean} Whether `str` contains `subString`.\n */\ngoog.string.contains = function(str, subString) {\n  return str.indexOf(subString) != -1;\n};\n\n\n/**\n * Determines whether a string contains a substring, ignoring case.\n * @param {string} str The string to search.\n * @param {string} subString The substring to search for.\n * @return {boolean} Whether `str` contains `subString`.\n */\ngoog.string.caseInsensitiveContains = function(str, subString) {\n  return goog.string.contains(str.toLowerCase(), subString.toLowerCase());\n};\n\n\n/**\n * Returns the non-overlapping occurrences of ss in s.\n * If either s or ss evalutes to false, then returns zero.\n * @param {string} s The string to look in.\n * @param {string} ss The string to look for.\n * @return {number} Number of occurrences of ss in s.\n */\ngoog.string.countOf = function(s, ss) {\n  return s && ss ? s.split(ss).length - 1 : 0;\n};\n\n\n/**\n * Removes a substring of a specified length at a specific\n * index in a string.\n * @param {string} s The base string from which to remove.\n * @param {number} index The index at which to remove the substring.\n * @param {number} stringLength The length of the substring to remove.\n * @return {string} A copy of `s` with the substring removed or the full\n *     string if nothing is removed or the input is invalid.\n */\ngoog.string.removeAt = function(s, index, stringLength) {\n  var resultStr = s;\n  // If the index is greater or equal to 0 then remove substring\n  if (index >= 0 && index < s.length && stringLength > 0) {\n    resultStr = s.substr(0, index) +\n        s.substr(index + stringLength, s.length - index - stringLength);\n  }\n  return resultStr;\n};\n\n\n/**\n * Removes the first occurrence of a substring from a string.\n * @param {string} str The base string from which to remove.\n * @param {string} substr The string to remove.\n * @return {string} A copy of `str` with `substr` removed or the\n *     full string if nothing is removed.\n */\ngoog.string.remove = function(str, substr) {\n  return str.replace(substr, '');\n};\n\n\n/**\n *  Removes all occurrences of a substring from a string.\n *  @param {string} s The base string from which to remove.\n *  @param {string} ss The string to remove.\n *  @return {string} A copy of `s` with `ss` removed or the full\n *      string if nothing is removed.\n */\ngoog.string.removeAll = function(s, ss) {\n  var re = new RegExp(goog.string.regExpEscape(ss), 'g');\n  return s.replace(re, '');\n};\n\n\n/**\n *  Replaces all occurrences of a substring of a string with a new substring.\n *  @param {string} s The base string from which to remove.\n *  @param {string} ss The string to replace.\n *  @param {string} replacement The replacement string.\n *  @return {string} A copy of `s` with `ss` replaced by\n *      `replacement` or the original string if nothing is replaced.\n */\ngoog.string.replaceAll = function(s, ss, replacement) {\n  var re = new RegExp(goog.string.regExpEscape(ss), 'g');\n  return s.replace(re, replacement.replace(/\\$/g, '$$$$'));\n};\n\n\n/**\n * Escapes characters in the string that are not safe to use in a RegExp.\n * @param {*} s The string to escape. If not a string, it will be casted\n *     to one.\n * @return {string} A RegExp safe, escaped copy of `s`.\n */\ngoog.string.regExpEscape = function(s) {\n  return String(s)\n      .replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')\n      .replace(/\\x08/g, '\\\\x08');\n};\n\n\n/**\n * Repeats a string n times.\n * @param {string} string The string to repeat.\n * @param {number} length The number of times to repeat.\n * @return {string} A string containing `length` repetitions of\n *     `string`.\n */\ngoog.string.repeat = (String.prototype.repeat) ? function(string, length) {\n  // The native method is over 100 times faster than the alternative.\n  return string.repeat(length);\n} : function(string, length) {\n  return new Array(length + 1).join(string);\n};\n\n\n/**\n * Pads number to given length and optionally rounds it to a given precision.\n * For example:\n * <pre>padNumber(1.25, 2, 3) -> '01.250'\n * padNumber(1.25, 2) -> '01.25'\n * padNumber(1.25, 2, 1) -> '01.3'\n * padNumber(1.25, 0) -> '1.25'</pre>\n *\n * @param {number} num The number to pad.\n * @param {number} length The desired length.\n * @param {number=} opt_precision The desired precision.\n * @return {string} `num` as a string with the given options.\n */\ngoog.string.padNumber = function(num, length, opt_precision) {\n  var s = goog.isDef(opt_precision) ? num.toFixed(opt_precision) : String(num);\n  var index = s.indexOf('.');\n  if (index == -1) {\n    index = s.length;\n  }\n  return goog.string.repeat('0', Math.max(0, length - index)) + s;\n};\n\n\n/**\n * Returns a string representation of the given object, with\n * null and undefined being returned as the empty string.\n *\n * @param {*} obj The object to convert.\n * @return {string} A string representation of the `obj`.\n */\ngoog.string.makeSafe = function(obj) {\n  return obj == null ? '' : String(obj);\n};\n\n\n/**\n * Concatenates string expressions. This is useful\n * since some browsers are very inefficient when it comes to using plus to\n * concat strings. Be careful when using null and undefined here since\n * these will not be included in the result. If you need to represent these\n * be sure to cast the argument to a String first.\n * For example:\n * <pre>buildString('a', 'b', 'c', 'd') -> 'abcd'\n * buildString(null, undefined) -> ''\n * </pre>\n * @param {...*} var_args A list of strings to concatenate. If not a string,\n *     it will be casted to one.\n * @return {string} The concatenation of `var_args`.\n */\ngoog.string.buildString = function(var_args) {\n  return Array.prototype.join.call(arguments, '');\n};\n\n\n/**\n * Returns a string with at least 64-bits of randomness.\n *\n * Doesn't trust Javascript's random function entirely. Uses a combination of\n * random and current timestamp, and then encodes the string in base-36 to\n * make it shorter.\n *\n * @return {string} A random string, e.g. sn1s7vb4gcic.\n */\ngoog.string.getRandomString = function() {\n  var x = 2147483648;\n  return Math.floor(Math.random() * x).toString(36) +\n      Math.abs(Math.floor(Math.random() * x) ^ goog.now()).toString(36);\n};\n\n\n/**\n * Compares two version numbers.\n *\n * @param {string|number} version1 Version of first item.\n * @param {string|number} version2 Version of second item.\n *\n * @return {number}  1 if `version1` is higher.\n *                   0 if arguments are equal.\n *                  -1 if `version2` is higher.\n */\ngoog.string.compareVersions = function(version1, version2) {\n  var order = 0;\n  // Trim leading and trailing whitespace and split the versions into\n  // subversions.\n  var v1Subs = goog.string.trim(String(version1)).split('.');\n  var v2Subs = goog.string.trim(String(version2)).split('.');\n  var subCount = Math.max(v1Subs.length, v2Subs.length);\n\n  // Iterate over the subversions, as long as they appear to be equivalent.\n  for (var subIdx = 0; order == 0 && subIdx < subCount; subIdx++) {\n    var v1Sub = v1Subs[subIdx] || '';\n    var v2Sub = v2Subs[subIdx] || '';\n\n    do {\n      // Split the subversions into pairs of numbers and qualifiers (like 'b').\n      // Two different RegExp objects are use to make it clear the code\n      // is side-effect free\n      var v1Comp = /(\\d*)(\\D*)(.*)/.exec(v1Sub) || ['', '', '', ''];\n      var v2Comp = /(\\d*)(\\D*)(.*)/.exec(v2Sub) || ['', '', '', ''];\n      // Break if there are no more matches.\n      if (v1Comp[0].length == 0 && v2Comp[0].length == 0) {\n        break;\n      }\n\n      // Parse the numeric part of the subversion. A missing number is\n      // equivalent to 0.\n      var v1CompNum = v1Comp[1].length == 0 ? 0 : parseInt(v1Comp[1], 10);\n      var v2CompNum = v2Comp[1].length == 0 ? 0 : parseInt(v2Comp[1], 10);\n\n      // Compare the subversion components. The number has the highest\n      // precedence. Next, if the numbers are equal, a subversion without any\n      // qualifier is always higher than a subversion with any qualifier. Next,\n      // the qualifiers are compared as strings.\n      order = goog.string.compareElements_(v1CompNum, v2CompNum) ||\n          goog.string.compareElements_(\n              v1Comp[2].length == 0, v2Comp[2].length == 0) ||\n          goog.string.compareElements_(v1Comp[2], v2Comp[2]);\n      // Stop as soon as an inequality is discovered.\n\n      v1Sub = v1Comp[3];\n      v2Sub = v2Comp[3];\n    } while (order == 0);\n  }\n\n  return order;\n};\n\n\n/**\n * Compares elements of a version number.\n *\n * @param {string|number|boolean} left An element from a version number.\n * @param {string|number|boolean} right An element from a version number.\n *\n * @return {number}  1 if `left` is higher.\n *                   0 if arguments are equal.\n *                  -1 if `right` is higher.\n * @private\n */\ngoog.string.compareElements_ = function(left, right) {\n  if (left < right) {\n    return -1;\n  } else if (left > right) {\n    return 1;\n  }\n  return 0;\n};\n\n\n/**\n * String hash function similar to java.lang.String.hashCode().\n * The hash code for a string is computed as\n * s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n * where s[i] is the ith character of the string and n is the length of\n * the string. We mod the result to make it between 0 (inclusive) and 2^32\n * (exclusive).\n * @param {string} str A string.\n * @return {number} Hash value for `str`, between 0 (inclusive) and 2^32\n *  (exclusive). The empty string returns 0.\n */\ngoog.string.hashCode = function(str) {\n  var result = 0;\n  for (var i = 0; i < str.length; ++i) {\n    // Normalize to 4 byte range, 0 ... 2^32.\n    result = (31 * result + str.charCodeAt(i)) >>> 0;\n  }\n  return result;\n};\n\n\n/**\n * The most recent unique ID. |0 is equivalent to Math.floor in this case.\n * @type {number}\n * @private\n */\ngoog.string.uniqueStringCounter_ = Math.random() * 0x80000000 | 0;\n\n\n/**\n * Generates and returns a string which is unique in the current document.\n * This is useful, for example, to create unique IDs for DOM elements.\n * @return {string} A unique id.\n */\ngoog.string.createUniqueString = function() {\n  return 'goog_' + goog.string.uniqueStringCounter_++;\n};\n\n\n/**\n * Converts the supplied string to a number, which may be Infinity or NaN.\n * This function strips whitespace: (toNumber(' 123') === 123)\n * This function accepts scientific notation: (toNumber('1e1') === 10)\n *\n * This is better than Javascript's built-in conversions because, sadly:\n *     (Number(' ') === 0) and (parseFloat('123a') === 123)\n *\n * @param {string} str The string to convert.\n * @return {number} The number the supplied string represents, or NaN.\n */\ngoog.string.toNumber = function(str) {\n  var num = Number(str);\n  if (num == 0 && goog.string.isEmptyOrWhitespace(str)) {\n    return NaN;\n  }\n  return num;\n};\n\n\n/**\n * Returns whether the given string is lower camel case (e.g. \"isFooBar\").\n *\n * Note that this assumes the string is entirely letters.\n * @see http://en.wikipedia.org/wiki/CamelCase#Variations_and_synonyms\n *\n * @param {string} str String to test.\n * @return {boolean} Whether the string is lower camel case.\n */\ngoog.string.isLowerCamelCase = function(str) {\n  return /^[a-z]+([A-Z][a-z]*)*$/.test(str);\n};\n\n\n/**\n * Returns whether the given string is upper camel case (e.g. \"FooBarBaz\").\n *\n * Note that this assumes the string is entirely letters.\n * @see http://en.wikipedia.org/wiki/CamelCase#Variations_and_synonyms\n *\n * @param {string} str String to test.\n * @return {boolean} Whether the string is upper camel case.\n */\ngoog.string.isUpperCamelCase = function(str) {\n  return /^([A-Z][a-z]*)+$/.test(str);\n};\n\n\n/**\n * Converts a string from selector-case to camelCase (e.g. from\n * \"multi-part-string\" to \"multiPartString\"), useful for converting\n * CSS selectors and HTML dataset keys to their equivalent JS properties.\n * @param {string} str The string in selector-case form.\n * @return {string} The string in camelCase form.\n */\ngoog.string.toCamelCase = function(str) {\n  return String(str).replace(\n      /\\-([a-z])/g, function(all, match) { return match.toUpperCase(); });\n};\n\n\n/**\n * Converts a string from camelCase to selector-case (e.g. from\n * \"multiPartString\" to \"multi-part-string\"), useful for converting JS\n * style and dataset properties to equivalent CSS selectors and HTML keys.\n * @param {string} str The string in camelCase form.\n * @return {string} The string in selector-case form.\n */\ngoog.string.toSelectorCase = function(str) {\n  return String(str).replace(/([A-Z])/g, '-$1').toLowerCase();\n};\n\n\n/**\n * Converts a string into TitleCase. First character of the string is always\n * capitalized in addition to the first letter of every subsequent word.\n * Words are delimited by one or more whitespaces by default. Custom delimiters\n * can optionally be specified to replace the default, which doesn't preserve\n * whitespace delimiters and instead must be explicitly included if needed.\n *\n * Default delimiter => \" \":\n *    goog.string.toTitleCase('oneTwoThree')    => 'OneTwoThree'\n *    goog.string.toTitleCase('one two three')  => 'One Two Three'\n *    goog.string.toTitleCase('  one   two   ') => '  One   Two   '\n *    goog.string.toTitleCase('one_two_three')  => 'One_two_three'\n *    goog.string.toTitleCase('one-two-three')  => 'One-two-three'\n *\n * Custom delimiter => \"_-.\":\n *    goog.string.toTitleCase('oneTwoThree', '_-.')       => 'OneTwoThree'\n *    goog.string.toTitleCase('one two three', '_-.')     => 'One two three'\n *    goog.string.toTitleCase('  one   two   ', '_-.')    => '  one   two   '\n *    goog.string.toTitleCase('one_two_three', '_-.')     => 'One_Two_Three'\n *    goog.string.toTitleCase('one-two-three', '_-.')     => 'One-Two-Three'\n *    goog.string.toTitleCase('one...two...three', '_-.') => 'One...Two...Three'\n *    goog.string.toTitleCase('one. two. three', '_-.')   => 'One. two. three'\n *    goog.string.toTitleCase('one-two.three', '_-.')     => 'One-Two.Three'\n *\n * @param {string} str String value in camelCase form.\n * @param {string=} opt_delimiters Custom delimiter character set used to\n *      distinguish words in the string value. Each character represents a\n *      single delimiter. When provided, default whitespace delimiter is\n *      overridden and must be explicitly included if needed.\n * @return {string} String value in TitleCase form.\n */\ngoog.string.toTitleCase = function(str, opt_delimiters) {\n  var delimiters = goog.isString(opt_delimiters) ?\n      goog.string.regExpEscape(opt_delimiters) :\n      '\\\\s';\n\n  // For IE8, we need to prevent using an empty character set. Otherwise,\n  // incorrect matching will occur.\n  delimiters = delimiters ? '|[' + delimiters + ']+' : '';\n\n  var regexp = new RegExp('(^' + delimiters + ')([a-z])', 'g');\n  return str.replace(\n      regexp, function(all, p1, p2) { return p1 + p2.toUpperCase(); });\n};\n\n\n/**\n * Capitalizes a string, i.e. converts the first letter to uppercase\n * and all other letters to lowercase, e.g.:\n *\n * goog.string.capitalize('one')     => 'One'\n * goog.string.capitalize('ONE')     => 'One'\n * goog.string.capitalize('one two') => 'One two'\n *\n * Note that this function does not trim initial whitespace.\n *\n * @param {string} str String value to capitalize.\n * @return {string} String value with first letter in uppercase.\n */\ngoog.string.capitalize = function(str) {\n  return String(str.charAt(0)).toUpperCase() +\n      String(str.substr(1)).toLowerCase();\n};\n\n\n/**\n * Parse a string in decimal or hexidecimal ('0xFFFF') form.\n *\n * To parse a particular radix, please use parseInt(string, radix) directly. See\n * https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt\n *\n * This is a wrapper for the built-in parseInt function that will only parse\n * numbers as base 10 or base 16.  Some JS implementations assume strings\n * starting with \"0\" are intended to be octal. ES3 allowed but discouraged\n * this behavior. ES5 forbids it.  This function emulates the ES5 behavior.\n *\n * For more information, see Mozilla JS Reference: http://goo.gl/8RiFj\n *\n * @param {string|number|null|undefined} value The value to be parsed.\n * @return {number} The number, parsed. If the string failed to parse, this\n *     will be NaN.\n */\ngoog.string.parseInt = function(value) {\n  // Force finite numbers to strings.\n  if (isFinite(value)) {\n    value = String(value);\n  }\n\n  if (goog.isString(value)) {\n    // If the string starts with '0x' or '-0x', parse as hex.\n    return /^\\s*-?0x/i.test(value) ? parseInt(value, 16) : parseInt(value, 10);\n  }\n\n  return NaN;\n};\n\n\n/**\n * Splits a string on a separator a limited number of times.\n *\n * This implementation is more similar to Python or Java, where the limit\n * parameter specifies the maximum number of splits rather than truncating\n * the number of results.\n *\n * See http://docs.python.org/2/library/stdtypes.html#str.split\n * See JavaDoc: http://goo.gl/F2AsY\n * See Mozilla reference: http://goo.gl/dZdZs\n *\n * @param {string} str String to split.\n * @param {string} separator The separator.\n * @param {number} limit The limit to the number of splits. The resulting array\n *     will have a maximum length of limit+1.  Negative numbers are the same\n *     as zero.\n * @return {!Array<string>} The string, split.\n */\ngoog.string.splitLimit = function(str, separator, limit) {\n  var parts = str.split(separator);\n  var returnVal = [];\n\n  // Only continue doing this while we haven't hit the limit and we have\n  // parts left.\n  while (limit > 0 && parts.length) {\n    returnVal.push(parts.shift());\n    limit--;\n  }\n\n  // If there are remaining parts, append them to the end.\n  if (parts.length) {\n    returnVal.push(parts.join(separator));\n  }\n\n  return returnVal;\n};\n\n\n/**\n * Finds the characters to the right of the last instance of any separator\n *\n * This function is similar to goog.string.path.baseName, except it can take a\n * list of characters to split the string on. It will return the rightmost\n * grouping of characters to the right of any separator as a left-to-right\n * oriented string.\n *\n * @see goog.string.path.baseName\n * @param {string} str The string\n * @param {string|!Array<string>} separators A list of separator characters\n * @return {string} The last part of the string with respect to the separators\n */\ngoog.string.lastComponent = function(str, separators) {\n  if (!separators) {\n    return str;\n  } else if (typeof separators == 'string') {\n    separators = [separators];\n  }\n\n  var lastSeparatorIndex = -1;\n  for (var i = 0; i < separators.length; i++) {\n    if (separators[i] == '') {\n      continue;\n    }\n    var currentSeparatorIndex = str.lastIndexOf(separators[i]);\n    if (currentSeparatorIndex > lastSeparatorIndex) {\n      lastSeparatorIndex = currentSeparatorIndex;\n    }\n  }\n  if (lastSeparatorIndex == -1) {\n    return str;\n  }\n  return str.slice(lastSeparatorIndex + 1);\n};\n\n\n/**\n * Computes the Levenshtein edit distance between two strings.\n * @param {string} a\n * @param {string} b\n * @return {number} The edit distance between the two strings.\n */\ngoog.string.editDistance = function(a, b) {\n  var v0 = [];\n  var v1 = [];\n\n  if (a == b) {\n    return 0;\n  }\n\n  if (!a.length || !b.length) {\n    return Math.max(a.length, b.length);\n  }\n\n  for (var i = 0; i < b.length + 1; i++) {\n    v0[i] = i;\n  }\n\n  for (var i = 0; i < a.length; i++) {\n    v1[0] = i + 1;\n\n    for (var j = 0; j < b.length; j++) {\n      var cost = Number(a[i] != b[j]);\n      // Cost for the substring is the minimum of adding one character, removing\n      // one character, or a swap.\n      v1[j + 1] = Math.min(v1[j] + 1, v0[j + 1] + 1, v0[j] + cost);\n    }\n\n    for (var j = 0; j < v0.length; j++) {\n      v0[j] = v1[j];\n    }\n  }\n\n  return v1[b.length];\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities used by goog.labs.userAgent tools. These functions\n * should not be used outside of goog.labs.userAgent.*.\n *\n * @author nnaze@google.com (Nathan Naze)\n */\n\ngoog.provide('goog.labs.userAgent.util');\n\ngoog.require('goog.string');\n\n\n/**\n * Gets the native userAgent string from navigator if it exists.\n * If navigator or navigator.userAgent string is missing, returns an empty\n * string.\n * @return {string}\n * @private\n */\ngoog.labs.userAgent.util.getNativeUserAgentString_ = function() {\n  var navigator = goog.labs.userAgent.util.getNavigator_();\n  if (navigator) {\n    var userAgent = navigator.userAgent;\n    if (userAgent) {\n      return userAgent;\n    }\n  }\n  return '';\n};\n\n\n/**\n * Getter for the native navigator.\n * This is a separate function so it can be stubbed out in testing.\n * @return {Navigator}\n * @private\n */\ngoog.labs.userAgent.util.getNavigator_ = function() {\n  return goog.global.navigator;\n};\n\n\n/**\n * A possible override for applications which wish to not check\n * navigator.userAgent but use a specified value for detection instead.\n * @private {string}\n */\ngoog.labs.userAgent.util.userAgent_ =\n    goog.labs.userAgent.util.getNativeUserAgentString_();\n\n\n/**\n * Applications may override browser detection on the built in\n * navigator.userAgent object by setting this string. Set to null to use the\n * browser object instead.\n * @param {?string=} opt_userAgent The User-Agent override.\n */\ngoog.labs.userAgent.util.setUserAgent = function(opt_userAgent) {\n  goog.labs.userAgent.util.userAgent_ =\n      opt_userAgent || goog.labs.userAgent.util.getNativeUserAgentString_();\n};\n\n\n/**\n * @return {string} The user agent string.\n */\ngoog.labs.userAgent.util.getUserAgent = function() {\n  return goog.labs.userAgent.util.userAgent_;\n};\n\n\n/**\n * @param {string} str\n * @return {boolean} Whether the user agent contains the given string.\n */\ngoog.labs.userAgent.util.matchUserAgent = function(str) {\n  var userAgent = goog.labs.userAgent.util.getUserAgent();\n  return goog.string.contains(userAgent, str);\n};\n\n\n/**\n * @param {string} str\n * @return {boolean} Whether the user agent contains the given string, ignoring\n *     case.\n */\ngoog.labs.userAgent.util.matchUserAgentIgnoreCase = function(str) {\n  var userAgent = goog.labs.userAgent.util.getUserAgent();\n  return goog.string.caseInsensitiveContains(userAgent, str);\n};\n\n\n/**\n * Parses the user agent into tuples for each section.\n * @param {string} userAgent\n * @return {!Array<!Array<string>>} Tuples of key, version, and the contents\n *     of the parenthetical.\n */\ngoog.labs.userAgent.util.extractVersionTuples = function(userAgent) {\n  // Matches each section of a user agent string.\n  // Example UA:\n  // Mozilla/5.0 (iPad; U; CPU OS 3_2_1 like Mac OS X; en-us)\n  // AppleWebKit/531.21.10 (KHTML, like Gecko) Mobile/7B405\n  // This has three version tuples: Mozilla, AppleWebKit, and Mobile.\n\n  var versionRegExp = new RegExp(\n      // Key. Note that a key may have a space.\n      // (i.e. 'Mobile Safari' in 'Mobile Safari/5.0')\n      '(\\\\w[\\\\w ]+)' +\n\n          '/' +                // slash\n          '([^\\\\s]+)' +        // version (i.e. '5.0b')\n          '\\\\s*' +             // whitespace\n          '(?:\\\\((.*?)\\\\))?',  // parenthetical info. parentheses not matched.\n      'g');\n\n  var data = [];\n  var match;\n\n  // Iterate and collect the version tuples.  Each iteration will be the\n  // next regex match.\n  while (match = versionRegExp.exec(userAgent)) {\n    data.push([\n      match[1],  // key\n      match[2],  // value\n      // || undefined as this is not undefined in IE7 and IE8\n      match[3] || undefined  // info\n    ]);\n  }\n\n  return data;\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities for manipulating objects/maps/hashes.\n * @author arv@google.com (Erik Arvidsson)\n */\n\ngoog.provide('goog.object');\n\n\n/**\n * Whether two values are not observably distinguishable. This\n * correctly detects that 0 is not the same as -0 and two NaNs are\n * practically equivalent.\n *\n * The implementation is as suggested by harmony:egal proposal.\n *\n * @param {*} v The first value to compare.\n * @param {*} v2 The second value to compare.\n * @return {boolean} Whether two values are not observably distinguishable.\n * @see http://wiki.ecmascript.org/doku.php?id=harmony:egal\n */\ngoog.object.is = function(v, v2) {\n  if (v === v2) {\n    // 0 === -0, but they are not identical.\n    // We need the cast because the compiler requires that v2 is a\n    // number (although 1/v2 works with non-number). We cast to ? to\n    // stop the compiler from type-checking this statement.\n    return v !== 0 || 1 / v === 1 / /** @type {?} */ (v2);\n  }\n\n  // NaN is non-reflexive: NaN !== NaN, although they are identical.\n  return v !== v && v2 !== v2;\n};\n\n\n/**\n * Calls a function for each element in an object/map/hash.\n *\n * @param {Object<K,V>} obj The object over which to iterate.\n * @param {function(this:T,V,?,Object<K,V>):?} f The function to call\n *     for every element. This function takes 3 arguments (the value, the\n *     key and the object) and the return value is ignored.\n * @param {T=} opt_obj This is used as the 'this' object within f.\n * @template T,K,V\n */\ngoog.object.forEach = function(obj, f, opt_obj) {\n  for (var key in obj) {\n    f.call(/** @type {?} */ (opt_obj), obj[key], key, obj);\n  }\n};\n\n\n/**\n * Calls a function for each element in an object/map/hash. If that call returns\n * true, adds the element to a new object.\n *\n * @param {Object<K,V>} obj The object over which to iterate.\n * @param {function(this:T,V,?,Object<K,V>):boolean} f The function to call\n *     for every element. This\n *     function takes 3 arguments (the value, the key and the object)\n *     and should return a boolean. If the return value is true the\n *     element is added to the result object. If it is false the\n *     element is not included.\n * @param {T=} opt_obj This is used as the 'this' object within f.\n * @return {!Object<K,V>} a new object in which only elements that passed the\n *     test are present.\n * @template T,K,V\n */\ngoog.object.filter = function(obj, f, opt_obj) {\n  var res = {};\n  for (var key in obj) {\n    if (f.call(/** @type {?} */ (opt_obj), obj[key], key, obj)) {\n      res[key] = obj[key];\n    }\n  }\n  return res;\n};\n\n\n/**\n * For every element in an object/map/hash calls a function and inserts the\n * result into a new object.\n *\n * @param {Object<K,V>} obj The object over which to iterate.\n * @param {function(this:T,V,?,Object<K,V>):R} f The function to call\n *     for every element. This function\n *     takes 3 arguments (the value, the key and the object)\n *     and should return something. The result will be inserted\n *     into a new object.\n * @param {T=} opt_obj This is used as the 'this' object within f.\n * @return {!Object<K,R>} a new object with the results from f.\n * @template T,K,V,R\n */\ngoog.object.map = function(obj, f, opt_obj) {\n  var res = {};\n  for (var key in obj) {\n    res[key] = f.call(/** @type {?} */ (opt_obj), obj[key], key, obj);\n  }\n  return res;\n};\n\n\n/**\n * Calls a function for each element in an object/map/hash. If any\n * call returns true, returns true (without checking the rest). If\n * all calls return false, returns false.\n *\n * @param {Object<K,V>} obj The object to check.\n * @param {function(this:T,V,?,Object<K,V>):boolean} f The function to\n *     call for every element. This function\n *     takes 3 arguments (the value, the key and the object) and should\n *     return a boolean.\n * @param {T=} opt_obj This is used as the 'this' object within f.\n * @return {boolean} true if any element passes the test.\n * @template T,K,V\n */\ngoog.object.some = function(obj, f, opt_obj) {\n  for (var key in obj) {\n    if (f.call(/** @type {?} */ (opt_obj), obj[key], key, obj)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Calls a function for each element in an object/map/hash. If\n * all calls return true, returns true. If any call returns false, returns\n * false at this point and does not continue to check the remaining elements.\n *\n * @param {Object<K,V>} obj The object to check.\n * @param {?function(this:T,V,?,Object<K,V>):boolean} f The function to\n *     call for every element. This function\n *     takes 3 arguments (the value, the key and the object) and should\n *     return a boolean.\n * @param {T=} opt_obj This is used as the 'this' object within f.\n * @return {boolean} false if any element fails the test.\n * @template T,K,V\n */\ngoog.object.every = function(obj, f, opt_obj) {\n  for (var key in obj) {\n    if (!f.call(/** @type {?} */ (opt_obj), obj[key], key, obj)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n\n/**\n * Returns the number of key-value pairs in the object map.\n *\n * @param {Object} obj The object for which to get the number of key-value\n *     pairs.\n * @return {number} The number of key-value pairs in the object map.\n */\ngoog.object.getCount = function(obj) {\n  var rv = 0;\n  for (var key in obj) {\n    rv++;\n  }\n  return rv;\n};\n\n\n/**\n * Returns one key from the object map, if any exists.\n * For map literals the returned key will be the first one in most of the\n * browsers (a know exception is Konqueror).\n *\n * @param {Object} obj The object to pick a key from.\n * @return {string|undefined} The key or undefined if the object is empty.\n */\ngoog.object.getAnyKey = function(obj) {\n  for (var key in obj) {\n    return key;\n  }\n};\n\n\n/**\n * Returns one value from the object map, if any exists.\n * For map literals the returned value will be the first one in most of the\n * browsers (a know exception is Konqueror).\n *\n * @param {Object<K,V>} obj The object to pick a value from.\n * @return {V|undefined} The value or undefined if the object is empty.\n * @template K,V\n */\ngoog.object.getAnyValue = function(obj) {\n  for (var key in obj) {\n    return obj[key];\n  }\n};\n\n\n/**\n * Whether the object/hash/map contains the given object as a value.\n * An alias for goog.object.containsValue(obj, val).\n *\n * @param {Object<K,V>} obj The object in which to look for val.\n * @param {V} val The object for which to check.\n * @return {boolean} true if val is present.\n * @template K,V\n */\ngoog.object.contains = function(obj, val) {\n  return goog.object.containsValue(obj, val);\n};\n\n\n/**\n * Returns the values of the object/map/hash.\n *\n * @param {Object<K,V>} obj The object from which to get the values.\n * @return {!Array<V>} The values in the object/map/hash.\n * @template K,V\n */\ngoog.object.getValues = function(obj) {\n  var res = [];\n  var i = 0;\n  for (var key in obj) {\n    res[i++] = obj[key];\n  }\n  return res;\n};\n\n\n/**\n * Returns the keys of the object/map/hash.\n *\n * @param {Object} obj The object from which to get the keys.\n * @return {!Array<string>} Array of property keys.\n */\ngoog.object.getKeys = function(obj) {\n  var res = [];\n  var i = 0;\n  for (var key in obj) {\n    res[i++] = key;\n  }\n  return res;\n};\n\n\n/**\n * Get a value from an object multiple levels deep.  This is useful for\n * pulling values from deeply nested objects, such as JSON responses.\n * Example usage: getValueByKeys(jsonObj, 'foo', 'entries', 3)\n *\n * @param {!Object} obj An object to get the value from.  Can be array-like.\n * @param {...(string|number|!IArrayLike<number|string>)}\n *     var_args A number of keys\n *     (as strings, or numbers, for array-like objects).  Can also be\n *     specified as a single array of keys.\n * @return {*} The resulting value.  If, at any point, the value for a key\n *     in the current object is null or undefined, returns undefined.\n */\ngoog.object.getValueByKeys = function(obj, var_args) {\n  var isArrayLike = goog.isArrayLike(var_args);\n  var keys = isArrayLike ?\n      /** @type {!IArrayLike<number|string>} */ (var_args) :\n      arguments;\n\n  // Start with the 2nd parameter for the variable parameters syntax.\n  for (var i = isArrayLike ? 0 : 1; i < keys.length; i++) {\n    if (obj == null) return undefined;\n    obj = obj[keys[i]];\n  }\n\n  return obj;\n};\n\n\n/**\n * Whether the object/map/hash contains the given key.\n *\n * @param {Object} obj The object in which to look for key.\n * @param {?} key The key for which to check.\n * @return {boolean} true If the map contains the key.\n */\ngoog.object.containsKey = function(obj, key) {\n  return obj !== null && key in obj;\n};\n\n\n/**\n * Whether the object/map/hash contains the given value. This is O(n).\n *\n * @param {Object<K,V>} obj The object in which to look for val.\n * @param {V} val The value for which to check.\n * @return {boolean} true If the map contains the value.\n * @template K,V\n */\ngoog.object.containsValue = function(obj, val) {\n  for (var key in obj) {\n    if (obj[key] == val) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Searches an object for an element that satisfies the given condition and\n * returns its key.\n * @param {Object<K,V>} obj The object to search in.\n * @param {function(this:T,V,string,Object<K,V>):boolean} f The\n *      function to call for every element. Takes 3 arguments (the value,\n *     the key and the object) and should return a boolean.\n * @param {T=} opt_this An optional \"this\" context for the function.\n * @return {string|undefined} The key of an element for which the function\n *     returns true or undefined if no such element is found.\n * @template T,K,V\n */\ngoog.object.findKey = function(obj, f, opt_this) {\n  for (var key in obj) {\n    if (f.call(/** @type {?} */ (opt_this), obj[key], key, obj)) {\n      return key;\n    }\n  }\n  return undefined;\n};\n\n\n/**\n * Searches an object for an element that satisfies the given condition and\n * returns its value.\n * @param {Object<K,V>} obj The object to search in.\n * @param {function(this:T,V,string,Object<K,V>):boolean} f The function\n *     to call for every element. Takes 3 arguments (the value, the key\n *     and the object) and should return a boolean.\n * @param {T=} opt_this An optional \"this\" context for the function.\n * @return {V} The value of an element for which the function returns true or\n *     undefined if no such element is found.\n * @template T,K,V\n */\ngoog.object.findValue = function(obj, f, opt_this) {\n  var key = goog.object.findKey(obj, f, opt_this);\n  return key && obj[key];\n};\n\n\n/**\n * Whether the object/map/hash is empty.\n *\n * @param {Object} obj The object to test.\n * @return {boolean} true if obj is empty.\n */\ngoog.object.isEmpty = function(obj) {\n  for (var key in obj) {\n    return false;\n  }\n  return true;\n};\n\n\n/**\n * Removes all key value pairs from the object/map/hash.\n *\n * @param {Object} obj The object to clear.\n */\ngoog.object.clear = function(obj) {\n  for (var i in obj) {\n    delete obj[i];\n  }\n};\n\n\n/**\n * Removes a key-value pair based on the key.\n *\n * @param {Object} obj The object from which to remove the key.\n * @param {?} key The key to remove.\n * @return {boolean} Whether an element was removed.\n */\ngoog.object.remove = function(obj, key) {\n  var rv;\n  if (rv = key in /** @type {!Object} */ (obj)) {\n    delete obj[key];\n  }\n  return rv;\n};\n\n\n/**\n * Adds a key-value pair to the object. Throws an exception if the key is\n * already in use. Use set if you want to change an existing pair.\n *\n * @param {Object<K,V>} obj The object to which to add the key-value pair.\n * @param {string} key The key to add.\n * @param {V} val The value to add.\n * @template K,V\n */\ngoog.object.add = function(obj, key, val) {\n  if (obj !== null && key in obj) {\n    throw new Error('The object already contains the key \"' + key + '\"');\n  }\n  goog.object.set(obj, key, val);\n};\n\n\n/**\n * Returns the value for the given key.\n *\n * @param {Object<K,V>} obj The object from which to get the value.\n * @param {string} key The key for which to get the value.\n * @param {R=} opt_val The value to return if no item is found for the given\n *     key (default is undefined).\n * @return {V|R|undefined} The value for the given key.\n * @template K,V,R\n */\ngoog.object.get = function(obj, key, opt_val) {\n  if (obj !== null && key in obj) {\n    return obj[key];\n  }\n  return opt_val;\n};\n\n\n/**\n * Adds a key-value pair to the object/map/hash.\n *\n * @param {Object<K,V>} obj The object to which to add the key-value pair.\n * @param {string} key The key to add.\n * @param {V} value The value to add.\n * @template K,V\n */\ngoog.object.set = function(obj, key, value) {\n  obj[key] = value;\n};\n\n\n/**\n * Adds a key-value pair to the object/map/hash if it doesn't exist yet.\n *\n * @param {Object<K,V>} obj The object to which to add the key-value pair.\n * @param {string} key The key to add.\n * @param {V} value The value to add if the key wasn't present.\n * @return {V} The value of the entry at the end of the function.\n * @template K,V\n */\ngoog.object.setIfUndefined = function(obj, key, value) {\n  return key in /** @type {!Object} */ (obj) ? obj[key] : (obj[key] = value);\n};\n\n\n/**\n * Sets a key and value to an object if the key is not set. The value will be\n * the return value of the given function. If the key already exists, the\n * object will not be changed and the function will not be called (the function\n * will be lazily evaluated -- only called if necessary).\n *\n * This function is particularly useful for use with a map used a as a cache.\n *\n * @param {!Object<K,V>} obj The object to which to add the key-value pair.\n * @param {string} key The key to add.\n * @param {function():V} f The value to add if the key wasn't present.\n * @return {V} The value of the entry at the end of the function.\n * @template K,V\n */\ngoog.object.setWithReturnValueIfNotSet = function(obj, key, f) {\n  if (key in obj) {\n    return obj[key];\n  }\n\n  var val = f();\n  obj[key] = val;\n  return val;\n};\n\n\n/**\n * Compares two objects for equality using === on the values.\n *\n * @param {!Object<K,V>} a\n * @param {!Object<K,V>} b\n * @return {boolean}\n * @template K,V\n */\ngoog.object.equals = function(a, b) {\n  for (var k in a) {\n    if (!(k in b) || a[k] !== b[k]) {\n      return false;\n    }\n  }\n  for (var k in b) {\n    if (!(k in a)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n\n/**\n * Returns a shallow clone of the object.\n *\n * @param {Object<K,V>} obj Object to clone.\n * @return {!Object<K,V>} Clone of the input object.\n * @template K,V\n */\ngoog.object.clone = function(obj) {\n  // We cannot use the prototype trick because a lot of methods depend on where\n  // the actual key is set.\n\n  var res = {};\n  for (var key in obj) {\n    res[key] = obj[key];\n  }\n  return res;\n  // We could also use goog.mixin but I wanted this to be independent from that.\n};\n\n\n/**\n * Clones a value. The input may be an Object, Array, or basic type. Objects and\n * arrays will be cloned recursively.\n *\n * WARNINGS:\n * <code>goog.object.unsafeClone</code> does not detect reference loops. Objects\n * that refer to themselves will cause infinite recursion.\n *\n * <code>goog.object.unsafeClone</code> is unaware of unique identifiers, and\n * copies UIDs created by <code>getUid</code> into cloned results.\n *\n * @param {T} obj The value to clone.\n * @return {T} A clone of the input value.\n * @template T\n */\ngoog.object.unsafeClone = function(obj) {\n  var type = goog.typeOf(obj);\n  if (type == 'object' || type == 'array') {\n    if (goog.isFunction(obj.clone)) {\n      return obj.clone();\n    }\n    var clone = type == 'array' ? [] : {};\n    for (var key in obj) {\n      clone[key] = goog.object.unsafeClone(obj[key]);\n    }\n    return clone;\n  }\n\n  return obj;\n};\n\n\n/**\n * Returns a new object in which all the keys and values are interchanged\n * (keys become values and values become keys). If multiple keys map to the\n * same value, the chosen transposed value is implementation-dependent.\n *\n * @param {Object} obj The object to transpose.\n * @return {!Object} The transposed object.\n */\ngoog.object.transpose = function(obj) {\n  var transposed = {};\n  for (var key in obj) {\n    transposed[obj[key]] = key;\n  }\n  return transposed;\n};\n\n\n/**\n * The names of the fields that are defined on Object.prototype.\n * @type {Array<string>}\n * @private\n */\ngoog.object.PROTOTYPE_FIELDS_ = [\n  'constructor', 'hasOwnProperty', 'isPrototypeOf', 'propertyIsEnumerable',\n  'toLocaleString', 'toString', 'valueOf'\n];\n\n\n/**\n * Extends an object with another object.\n * This operates 'in-place'; it does not create a new Object.\n *\n * Example:\n * var o = {};\n * goog.object.extend(o, {a: 0, b: 1});\n * o; // {a: 0, b: 1}\n * goog.object.extend(o, {b: 2, c: 3});\n * o; // {a: 0, b: 2, c: 3}\n *\n * @param {Object} target The object to modify. Existing properties will be\n *     overwritten if they are also present in one of the objects in\n *     `var_args`.\n * @param {...(Object|null|undefined)} var_args The objects from which values\n *     will be copied.\n */\ngoog.object.extend = function(target, var_args) {\n  var key, source;\n  for (var i = 1; i < arguments.length; i++) {\n    source = arguments[i];\n    for (key in source) {\n      target[key] = source[key];\n    }\n\n    // For IE the for-in-loop does not contain any properties that are not\n    // enumerable on the prototype object (for example isPrototypeOf from\n    // Object.prototype) and it will also not include 'replace' on objects that\n    // extend String and change 'replace' (not that it is common for anyone to\n    // extend anything except Object).\n\n    for (var j = 0; j < goog.object.PROTOTYPE_FIELDS_.length; j++) {\n      key = goog.object.PROTOTYPE_FIELDS_[j];\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n};\n\n\n/**\n * Creates a new object built from the key-value pairs provided as arguments.\n * @param {...*} var_args If only one argument is provided and it is an array\n *     then this is used as the arguments, otherwise even arguments are used as\n *     the property names and odd arguments are used as the property values.\n * @return {!Object} The new object.\n * @throws {Error} If there are uneven number of arguments or there is only one\n *     non array argument.\n */\ngoog.object.create = function(var_args) {\n  var argLength = arguments.length;\n  if (argLength == 1 && goog.isArray(arguments[0])) {\n    return goog.object.create.apply(null, arguments[0]);\n  }\n\n  if (argLength % 2) {\n    throw new Error('Uneven number of arguments');\n  }\n\n  var rv = {};\n  for (var i = 0; i < argLength; i += 2) {\n    rv[arguments[i]] = arguments[i + 1];\n  }\n  return rv;\n};\n\n\n/**\n * Creates a new object where the property names come from the arguments but\n * the value is always set to true\n * @param {...*} var_args If only one argument is provided and it is an array\n *     then this is used as the arguments, otherwise the arguments are used\n *     as the property names.\n * @return {!Object} The new object.\n */\ngoog.object.createSet = function(var_args) {\n  var argLength = arguments.length;\n  if (argLength == 1 && goog.isArray(arguments[0])) {\n    return goog.object.createSet.apply(null, arguments[0]);\n  }\n\n  var rv = {};\n  for (var i = 0; i < argLength; i++) {\n    rv[arguments[i]] = true;\n  }\n  return rv;\n};\n\n\n/**\n * Creates an immutable view of the underlying object, if the browser\n * supports immutable objects.\n *\n * In default mode, writes to this view will fail silently. In strict mode,\n * they will throw an error.\n *\n * @param {!Object<K,V>} obj An object.\n * @return {!Object<K,V>} An immutable view of that object, or the\n *     original object if this browser does not support immutables.\n * @template K,V\n */\ngoog.object.createImmutableView = function(obj) {\n  var result = obj;\n  if (Object.isFrozen && !Object.isFrozen(obj)) {\n    result = Object.create(obj);\n    Object.freeze(result);\n  }\n  return result;\n};\n\n\n/**\n * @param {!Object} obj An object.\n * @return {boolean} Whether this is an immutable view of the object.\n */\ngoog.object.isImmutableView = function(obj) {\n  return !!Object.isFrozen && Object.isFrozen(obj);\n};\n\n\n/**\n * Get all properties names on a given Object regardless of enumerability.\n *\n * <p> If the browser does not support `Object.getOwnPropertyNames` nor\n * `Object.getPrototypeOf` then this is equivalent to using\n * `goog.object.getKeys`\n *\n * @param {?Object} obj The object to get the properties of.\n * @param {boolean=} opt_includeObjectPrototype Whether properties defined on\n *     `Object.prototype` should be included in the result.\n * @param {boolean=} opt_includeFunctionPrototype Whether properties defined on\n *     `Function.prototype` should be included in the result.\n * @return {!Array<string>}\n * @public\n */\ngoog.object.getAllPropertyNames = function(\n    obj, opt_includeObjectPrototype, opt_includeFunctionPrototype) {\n  if (!obj) {\n    return [];\n  }\n\n  // Naively use a for..in loop to get the property names if the browser doesn't\n  // support any other APIs for getting it.\n  if (!Object.getOwnPropertyNames || !Object.getPrototypeOf) {\n    return goog.object.getKeys(obj);\n  }\n\n  var visitedSet = {};\n\n  // Traverse the prototype chain and add all properties to the visited set.\n  var proto = obj;\n  while (proto &&\n         (proto !== Object.prototype || !!opt_includeObjectPrototype) &&\n         (proto !== Function.prototype || !!opt_includeFunctionPrototype)) {\n    var names = Object.getOwnPropertyNames(proto);\n    for (var i = 0; i < names.length; i++) {\n      visitedSet[names[i]] = true;\n    }\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return goog.object.getKeys(visitedSet);\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Closure user agent detection (Browser).\n * @see <a href=\"http://www.useragentstring.com/\">User agent strings</a>\n * For more information on rendering engine, platform, or device see the other\n * sub-namespaces in goog.labs.userAgent, goog.labs.userAgent.platform,\n * goog.labs.userAgent.device respectively.)\n *\n * @author martone@google.com (Andy Martone)\n */\n\ngoog.provide('goog.labs.userAgent.browser');\n\ngoog.require('goog.array');\ngoog.require('goog.labs.userAgent.util');\ngoog.require('goog.object');\ngoog.require('goog.string');\n\n\n// TODO(nnaze): Refactor to remove excessive exclusion logic in matching\n// functions.\n\n\n/**\n * @return {boolean} Whether the user's browser is Opera.  Note: Chromium\n *     based Opera (Opera 15+) is detected as Chrome to avoid unnecessary\n *     special casing.\n * @private\n */\ngoog.labs.userAgent.browser.matchOpera_ = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Opera');\n};\n\n\n/**\n * @return {boolean} Whether the user's browser is IE.\n * @private\n */\ngoog.labs.userAgent.browser.matchIE_ = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Trident') ||\n      goog.labs.userAgent.util.matchUserAgent('MSIE');\n};\n\n\n/**\n * @return {boolean} Whether the user's browser is Edge.\n * @private\n */\ngoog.labs.userAgent.browser.matchEdge_ = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Edge');\n};\n\n\n/**\n * @return {boolean} Whether the user's browser is Firefox.\n * @private\n */\ngoog.labs.userAgent.browser.matchFirefox_ = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Firefox');\n};\n\n\n/**\n * @return {boolean} Whether the user's browser is Safari.\n * @private\n */\ngoog.labs.userAgent.browser.matchSafari_ = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Safari') &&\n      !(goog.labs.userAgent.browser.matchChrome_() ||\n        goog.labs.userAgent.browser.matchCoast_() ||\n        goog.labs.userAgent.browser.matchOpera_() ||\n        goog.labs.userAgent.browser.matchEdge_() ||\n        goog.labs.userAgent.browser.isSilk() ||\n        goog.labs.userAgent.util.matchUserAgent('Android'));\n};\n\n\n/**\n * @return {boolean} Whether the user's browser is Coast (Opera's Webkit-based\n *     iOS browser).\n * @private\n */\ngoog.labs.userAgent.browser.matchCoast_ = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Coast');\n};\n\n\n/**\n * @return {boolean} Whether the user's browser is iOS Webview.\n * @private\n */\ngoog.labs.userAgent.browser.matchIosWebview_ = function() {\n  // iOS Webview does not show up as Chrome or Safari. Also check for Opera's\n  // WebKit-based iOS browser, Coast.\n  return (goog.labs.userAgent.util.matchUserAgent('iPad') ||\n          goog.labs.userAgent.util.matchUserAgent('iPhone')) &&\n      !goog.labs.userAgent.browser.matchSafari_() &&\n      !goog.labs.userAgent.browser.matchChrome_() &&\n      !goog.labs.userAgent.browser.matchCoast_() &&\n      goog.labs.userAgent.util.matchUserAgent('AppleWebKit');\n};\n\n\n/**\n * @return {boolean} Whether the user's browser is Chrome.\n * @private\n */\ngoog.labs.userAgent.browser.matchChrome_ = function() {\n  return (goog.labs.userAgent.util.matchUserAgent('Chrome') ||\n          goog.labs.userAgent.util.matchUserAgent('CriOS')) &&\n      !goog.labs.userAgent.browser.matchEdge_();\n};\n\n\n/**\n * @return {boolean} Whether the user's browser is the Android browser.\n * @private\n */\ngoog.labs.userAgent.browser.matchAndroidBrowser_ = function() {\n  // Android can appear in the user agent string for Chrome on Android.\n  // This is not the Android standalone browser if it does.\n  return goog.labs.userAgent.util.matchUserAgent('Android') &&\n      !(goog.labs.userAgent.browser.isChrome() ||\n        goog.labs.userAgent.browser.isFirefox() ||\n        goog.labs.userAgent.browser.isOpera() ||\n        goog.labs.userAgent.browser.isSilk());\n};\n\n\n/**\n * @return {boolean} Whether the user's browser is Opera.\n */\ngoog.labs.userAgent.browser.isOpera = goog.labs.userAgent.browser.matchOpera_;\n\n\n/**\n * @return {boolean} Whether the user's browser is IE.\n */\ngoog.labs.userAgent.browser.isIE = goog.labs.userAgent.browser.matchIE_;\n\n\n/**\n * @return {boolean} Whether the user's browser is Edge.\n */\ngoog.labs.userAgent.browser.isEdge = goog.labs.userAgent.browser.matchEdge_;\n\n\n/**\n * @return {boolean} Whether the user's browser is Firefox.\n */\ngoog.labs.userAgent.browser.isFirefox =\n    goog.labs.userAgent.browser.matchFirefox_;\n\n\n/**\n * @return {boolean} Whether the user's browser is Safari.\n */\ngoog.labs.userAgent.browser.isSafari = goog.labs.userAgent.browser.matchSafari_;\n\n\n/**\n * @return {boolean} Whether the user's browser is Coast (Opera's Webkit-based\n *     iOS browser).\n */\ngoog.labs.userAgent.browser.isCoast = goog.labs.userAgent.browser.matchCoast_;\n\n\n/**\n * @return {boolean} Whether the user's browser is iOS Webview.\n */\ngoog.labs.userAgent.browser.isIosWebview =\n    goog.labs.userAgent.browser.matchIosWebview_;\n\n\n/**\n * @return {boolean} Whether the user's browser is Chrome.\n */\ngoog.labs.userAgent.browser.isChrome = goog.labs.userAgent.browser.matchChrome_;\n\n\n/**\n * @return {boolean} Whether the user's browser is the Android browser.\n */\ngoog.labs.userAgent.browser.isAndroidBrowser =\n    goog.labs.userAgent.browser.matchAndroidBrowser_;\n\n\n/**\n * For more information, see:\n * http://docs.aws.amazon.com/silk/latest/developerguide/user-agent.html\n * @return {boolean} Whether the user's browser is Silk.\n */\ngoog.labs.userAgent.browser.isSilk = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Silk');\n};\n\n\n/**\n * @return {string} The browser version or empty string if version cannot be\n *     determined. Note that for Internet Explorer, this returns the version of\n *     the browser, not the version of the rendering engine. (IE 8 in\n *     compatibility mode will return 8.0 rather than 7.0. To determine the\n *     rendering engine version, look at document.documentMode instead. See\n *     http://msdn.microsoft.com/en-us/library/cc196988(v=vs.85).aspx for more\n *     details.)\n */\ngoog.labs.userAgent.browser.getVersion = function() {\n  var userAgentString = goog.labs.userAgent.util.getUserAgent();\n  // Special case IE since IE's version is inside the parenthesis and\n  // without the '/'.\n  if (goog.labs.userAgent.browser.isIE()) {\n    return goog.labs.userAgent.browser.getIEVersion_(userAgentString);\n  }\n\n  var versionTuples =\n      goog.labs.userAgent.util.extractVersionTuples(userAgentString);\n\n  // Construct a map for easy lookup.\n  var versionMap = {};\n  goog.array.forEach(versionTuples, function(tuple) {\n    // Note that the tuple is of length three, but we only care about the\n    // first two.\n    var key = tuple[0];\n    var value = tuple[1];\n    versionMap[key] = value;\n  });\n\n  var versionMapHasKey = goog.partial(goog.object.containsKey, versionMap);\n\n  // Gives the value with the first key it finds, otherwise empty string.\n  function lookUpValueWithKeys(keys) {\n    var key = goog.array.find(keys, versionMapHasKey);\n    return versionMap[key] || '';\n  }\n\n  // Check Opera before Chrome since Opera 15+ has \"Chrome\" in the string.\n  // See\n  // http://my.opera.com/ODIN/blog/2013/07/15/opera-user-agent-strings-opera-15-and-beyond\n  if (goog.labs.userAgent.browser.isOpera()) {\n    // Opera 10 has Version/10.0 but Opera/9.8, so look for \"Version\" first.\n    // Opera uses 'OPR' for more recent UAs.\n    return lookUpValueWithKeys(['Version', 'Opera']);\n  }\n\n  // Check Edge before Chrome since it has Chrome in the string.\n  if (goog.labs.userAgent.browser.isEdge()) {\n    return lookUpValueWithKeys(['Edge']);\n  }\n\n  if (goog.labs.userAgent.browser.isChrome()) {\n    return lookUpValueWithKeys(['Chrome', 'CriOS']);\n  }\n\n  // Usually products browser versions are in the third tuple after \"Mozilla\"\n  // and the engine.\n  var tuple = versionTuples[2];\n  return tuple && tuple[1] || '';\n};\n\n\n/**\n * @param {string|number} version The version to check.\n * @return {boolean} Whether the browser version is higher or the same as the\n *     given version.\n */\ngoog.labs.userAgent.browser.isVersionOrHigher = function(version) {\n  return goog.string.compareVersions(\n             goog.labs.userAgent.browser.getVersion(), version) >= 0;\n};\n\n\n/**\n * Determines IE version. More information:\n * http://msdn.microsoft.com/en-us/library/ie/bg182625(v=vs.85).aspx#uaString\n * http://msdn.microsoft.com/en-us/library/hh869301(v=vs.85).aspx\n * http://blogs.msdn.com/b/ie/archive/2010/03/23/introducing-ie9-s-user-agent-string.aspx\n * http://blogs.msdn.com/b/ie/archive/2009/01/09/the-internet-explorer-8-user-agent-string-updated-edition.aspx\n *\n * @param {string} userAgent the User-Agent.\n * @return {string}\n * @private\n */\ngoog.labs.userAgent.browser.getIEVersion_ = function(userAgent) {\n  // IE11 may identify itself as MSIE 9.0 or MSIE 10.0 due to an IE 11 upgrade\n  // bug. Example UA:\n  // Mozilla/5.0 (MSIE 9.0; Windows NT 6.1; WOW64; Trident/7.0; rv:11.0)\n  // like Gecko.\n  // See http://www.whatismybrowser.com/developers/unknown-user-agent-fragments.\n  var rv = /rv: *([\\d\\.]*)/.exec(userAgent);\n  if (rv && rv[1]) {\n    return rv[1];\n  }\n\n  var version = '';\n  var msie = /MSIE +([\\d\\.]+)/.exec(userAgent);\n  if (msie && msie[1]) {\n    // IE in compatibility mode usually identifies itself as MSIE 7.0; in this\n    // case, use the Trident version to determine the version of IE. For more\n    // details, see the links above.\n    var tridentVersion = /Trident\\/(\\d.\\d)/.exec(userAgent);\n    if (msie[1] == '7.0') {\n      if (tridentVersion && tridentVersion[1]) {\n        switch (tridentVersion[1]) {\n          case '4.0':\n            version = '8.0';\n            break;\n          case '5.0':\n            version = '9.0';\n            break;\n          case '6.0':\n            version = '10.0';\n            break;\n          case '7.0':\n            version = '11.0';\n            break;\n        }\n      } else {\n        version = '7.0';\n      }\n    } else {\n      version = msie[1];\n    }\n  }\n  return version;\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Closure user agent detection.\n * @see http://en.wikipedia.org/wiki/User_agent\n * For more information on browser brand, platform, or device see the other\n * sub-namespaces in goog.labs.userAgent (browser, platform, and device).\n *\n */\n\ngoog.provide('goog.labs.userAgent.engine');\n\ngoog.require('goog.array');\ngoog.require('goog.labs.userAgent.util');\ngoog.require('goog.string');\n\n\n/**\n * @return {boolean} Whether the rendering engine is Presto.\n */\ngoog.labs.userAgent.engine.isPresto = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Presto');\n};\n\n\n/**\n * @return {boolean} Whether the rendering engine is Trident.\n */\ngoog.labs.userAgent.engine.isTrident = function() {\n  // IE only started including the Trident token in IE8.\n  return goog.labs.userAgent.util.matchUserAgent('Trident') ||\n      goog.labs.userAgent.util.matchUserAgent('MSIE');\n};\n\n\n/**\n * @return {boolean} Whether the rendering engine is Edge.\n */\ngoog.labs.userAgent.engine.isEdge = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Edge');\n};\n\n\n/**\n * @return {boolean} Whether the rendering engine is WebKit.\n */\ngoog.labs.userAgent.engine.isWebKit = function() {\n  return goog.labs.userAgent.util.matchUserAgentIgnoreCase('WebKit') &&\n      !goog.labs.userAgent.engine.isEdge();\n};\n\n\n/**\n * @return {boolean} Whether the rendering engine is Gecko.\n */\ngoog.labs.userAgent.engine.isGecko = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Gecko') &&\n      !goog.labs.userAgent.engine.isWebKit() &&\n      !goog.labs.userAgent.engine.isTrident() &&\n      !goog.labs.userAgent.engine.isEdge();\n};\n\n\n/**\n * @return {string} The rendering engine's version or empty string if version\n *     can't be determined.\n */\ngoog.labs.userAgent.engine.getVersion = function() {\n  var userAgentString = goog.labs.userAgent.util.getUserAgent();\n  if (userAgentString) {\n    var tuples = goog.labs.userAgent.util.extractVersionTuples(userAgentString);\n\n    var engineTuple = goog.labs.userAgent.engine.getEngineTuple_(tuples);\n    if (engineTuple) {\n      // In Gecko, the version string is either in the browser info or the\n      // Firefox version.  See Gecko user agent string reference:\n      // http://goo.gl/mULqa\n      if (engineTuple[0] == 'Gecko') {\n        return goog.labs.userAgent.engine.getVersionForKey_(tuples, 'Firefox');\n      }\n\n      return engineTuple[1];\n    }\n\n    // MSIE has only one version identifier, and the Trident version is\n    // specified in the parenthetical. IE Edge is covered in the engine tuple\n    // detection.\n    var browserTuple = tuples[0];\n    var info;\n    if (browserTuple && (info = browserTuple[2])) {\n      var match = /Trident\\/([^\\s;]+)/.exec(info);\n      if (match) {\n        return match[1];\n      }\n    }\n  }\n  return '';\n};\n\n\n/**\n * @param {!Array<!Array<string>>} tuples Extracted version tuples.\n * @return {!Array<string>|undefined} The engine tuple or undefined if not\n *     found.\n * @private\n */\ngoog.labs.userAgent.engine.getEngineTuple_ = function(tuples) {\n  if (!goog.labs.userAgent.engine.isEdge()) {\n    return tuples[1];\n  }\n  for (var i = 0; i < tuples.length; i++) {\n    var tuple = tuples[i];\n    if (tuple[0] == 'Edge') {\n      return tuple;\n    }\n  }\n};\n\n\n/**\n * @param {string|number} version The version to check.\n * @return {boolean} Whether the rendering engine version is higher or the same\n *     as the given version.\n */\ngoog.labs.userAgent.engine.isVersionOrHigher = function(version) {\n  return goog.string.compareVersions(\n             goog.labs.userAgent.engine.getVersion(), version) >= 0;\n};\n\n\n/**\n * @param {!Array<!Array<string>>} tuples Version tuples.\n * @param {string} key The key to look for.\n * @return {string} The version string of the given key, if present.\n *     Otherwise, the empty string.\n * @private\n */\ngoog.labs.userAgent.engine.getVersionForKey_ = function(tuples, key) {\n  // TODO(nnaze): Move to util if useful elsewhere.\n\n  var pair = goog.array.find(tuples, function(pair) { return key == pair[0]; });\n\n  return pair && pair[1] || '';\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Closure user agent platform detection.\n * @see <a href=\"http://www.useragentstring.com/\">User agent strings</a>\n * For more information on browser brand, rendering engine, or device see the\n * other sub-namespaces in goog.labs.userAgent (browser, engine, and device\n * respectively).\n *\n */\n\ngoog.provide('goog.labs.userAgent.platform');\n\ngoog.require('goog.labs.userAgent.util');\ngoog.require('goog.string');\n\n\n/**\n * @return {boolean} Whether the platform is Android.\n */\ngoog.labs.userAgent.platform.isAndroid = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Android');\n};\n\n\n/**\n * @return {boolean} Whether the platform is iPod.\n */\ngoog.labs.userAgent.platform.isIpod = function() {\n  return goog.labs.userAgent.util.matchUserAgent('iPod');\n};\n\n\n/**\n * @return {boolean} Whether the platform is iPhone.\n */\ngoog.labs.userAgent.platform.isIphone = function() {\n  return goog.labs.userAgent.util.matchUserAgent('iPhone') &&\n      !goog.labs.userAgent.util.matchUserAgent('iPod') &&\n      !goog.labs.userAgent.util.matchUserAgent('iPad');\n};\n\n\n/**\n * @return {boolean} Whether the platform is iPad.\n */\ngoog.labs.userAgent.platform.isIpad = function() {\n  return goog.labs.userAgent.util.matchUserAgent('iPad');\n};\n\n\n/**\n * @return {boolean} Whether the platform is iOS.\n */\ngoog.labs.userAgent.platform.isIos = function() {\n  return goog.labs.userAgent.platform.isIphone() ||\n      goog.labs.userAgent.platform.isIpad() ||\n      goog.labs.userAgent.platform.isIpod();\n};\n\n\n/**\n * @return {boolean} Whether the platform is Mac.\n */\ngoog.labs.userAgent.platform.isMacintosh = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Macintosh');\n};\n\n\n/**\n * Note: ChromeOS is not considered to be Linux as it does not report itself\n * as Linux in the user agent string.\n * @return {boolean} Whether the platform is Linux.\n */\ngoog.labs.userAgent.platform.isLinux = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Linux');\n};\n\n\n/**\n * @return {boolean} Whether the platform is Windows.\n */\ngoog.labs.userAgent.platform.isWindows = function() {\n  return goog.labs.userAgent.util.matchUserAgent('Windows');\n};\n\n\n/**\n * @return {boolean} Whether the platform is ChromeOS.\n */\ngoog.labs.userAgent.platform.isChromeOS = function() {\n  return goog.labs.userAgent.util.matchUserAgent('CrOS');\n};\n\n/**\n * @return {boolean} Whether the platform is Chromecast.\n */\ngoog.labs.userAgent.platform.isChromecast = function() {\n  return goog.labs.userAgent.util.matchUserAgent('CrKey');\n};\n\n/**\n * The version of the platform. We only determine the version for Windows,\n * Mac, and Chrome OS. It doesn't make much sense on Linux. For Windows, we only\n * look at the NT version. Non-NT-based versions (e.g. 95, 98, etc.) are given\n * version 0.0.\n *\n * @return {string} The platform version or empty string if version cannot be\n *     determined.\n */\ngoog.labs.userAgent.platform.getVersion = function() {\n  var userAgentString = goog.labs.userAgent.util.getUserAgent();\n  var version = '', re;\n  if (goog.labs.userAgent.platform.isWindows()) {\n    re = /Windows (?:NT|Phone) ([0-9.]+)/;\n    var match = re.exec(userAgentString);\n    if (match) {\n      version = match[1];\n    } else {\n      version = '0.0';\n    }\n  } else if (goog.labs.userAgent.platform.isIos()) {\n    re = /(?:iPhone|iPod|iPad|CPU)\\s+OS\\s+(\\S+)/;\n    var match = re.exec(userAgentString);\n    // Report the version as x.y.z and not x_y_z\n    version = match && match[1].replace(/_/g, '.');\n  } else if (goog.labs.userAgent.platform.isMacintosh()) {\n    re = /Mac OS X ([0-9_.]+)/;\n    var match = re.exec(userAgentString);\n    // Note: some old versions of Camino do not report an OSX version.\n    // Default to 10.\n    version = match ? match[1].replace(/_/g, '.') : '10';\n  } else if (goog.labs.userAgent.platform.isAndroid()) {\n    re = /Android\\s+([^\\);]+)(\\)|;)/;\n    var match = re.exec(userAgentString);\n    version = match && match[1];\n  } else if (goog.labs.userAgent.platform.isChromeOS()) {\n    re = /(?:CrOS\\s+(?:i686|x86_64)\\s+([0-9.]+))/;\n    var match = re.exec(userAgentString);\n    version = match && match[1];\n  }\n  return version || '';\n};\n\n\n/**\n * @param {string|number} version The version to check.\n * @return {boolean} Whether the browser version is higher or the same as the\n *     given version.\n */\ngoog.labs.userAgent.platform.isVersionOrHigher = function(version) {\n  return goog.string.compareVersions(\n             goog.labs.userAgent.platform.getVersion(), version) >= 0;\n};\n","// Copyright 2009 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Useful compiler idioms.\n *\n * @author johnlenz@google.com (John Lenz)\n */\n\ngoog.provide('goog.reflect');\n\n\n/**\n * Syntax for object literal casts.\n * @see http://go/jscompiler-renaming\n * @see https://goo.gl/CRs09P\n *\n * Use this if you have an object literal whose keys need to have the same names\n * as the properties of some class even after they are renamed by the compiler.\n *\n * @param {!Function} type Type to cast to.\n * @param {Object} object Object literal to cast.\n * @return {Object} The object literal.\n */\ngoog.reflect.object = function(type, object) {\n  return object;\n};\n\n/**\n * Syntax for renaming property strings.\n * @see http://go/jscompiler-renaming\n * @see https://goo.gl/CRs09P\n *\n * Use this if you have an need to access a property as a string, but want\n * to also have the property renamed by the compiler. In contrast to\n * goog.reflect.object, this method takes an instance of an object.\n *\n * Properties must be simple names (not qualified names).\n *\n * @param {string} prop Name of the property\n * @param {!Object} object Instance of the object whose type will be used\n *     for renaming\n * @return {string} The renamed property.\n */\ngoog.reflect.objectProperty = function(prop, object) {\n  return prop;\n};\n\n/**\n * To assert to the compiler that an operation is needed when it would\n * otherwise be stripped. For example:\n * <code>\n *     // Force a layout\n *     goog.reflect.sinkValue(dialog.offsetHeight);\n * </code>\n * @param {T} x\n * @return {T}\n * @template T\n */\ngoog.reflect.sinkValue = function(x) {\n  goog.reflect.sinkValue[' '](x);\n  return x;\n};\n\n\n/**\n * The compiler should optimize this function away iff no one ever uses\n * goog.reflect.sinkValue.\n */\ngoog.reflect.sinkValue[' '] = goog.nullFunction;\n\n\n/**\n * Check if a property can be accessed without throwing an exception.\n * @param {Object} obj The owner of the property.\n * @param {string} prop The property name.\n * @return {boolean} Whether the property is accessible. Will also return true\n *     if obj is null.\n */\ngoog.reflect.canAccessProperty = function(obj, prop) {\n\n  try {\n    goog.reflect.sinkValue(obj[prop]);\n    return true;\n  } catch (e) {\n  }\n  return false;\n};\n\n\n/**\n * Retrieves a value from a cache given a key. The compiler provides special\n * consideration for this call such that it is generally considered side-effect\n * free. However, if the `opt_keyFn` or `valueFn` have side-effects\n * then the entire call is considered to have side-effects.\n *\n * Conventionally storing the value on the cache would be considered a\n * side-effect and preclude unused calls from being pruned, ie. even if\n * the value was never used, it would still always be stored in the cache.\n *\n * Providing a side-effect free `valueFn` and `opt_keyFn`\n * allows unused calls to `goog.reflect.cache` to be pruned.\n *\n * @param {!Object<K, V>} cacheObj The object that contains the cached values.\n * @param {?} key The key to lookup in the cache. If it is not string or number\n *     then a `opt_keyFn` should be provided. The key is also used as the\n *     parameter to the `valueFn`.\n * @param {function(?):V} valueFn The value provider to use to calculate the\n *     value to store in the cache. This function should be side-effect free\n *     to take advantage of the optimization.\n * @param {function(?):K=} opt_keyFn The key provider to determine the cache\n *     map key. This should be used if the given key is not a string or number.\n *     If not provided then the given key is used. This function should be\n *     side-effect free to take advantage of the optimization.\n * @return {V} The cached or calculated value.\n * @template K\n * @template V\n */\ngoog.reflect.cache = function(cacheObj, key, valueFn, opt_keyFn) {\n  var storedKey = opt_keyFn ? opt_keyFn(key) : key;\n\n  if (Object.prototype.hasOwnProperty.call(cacheObj, storedKey)) {\n    return cacheObj[storedKey];\n  }\n\n  return (cacheObj[storedKey] = valueFn(key));\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Rendering engine detection.\n * @see <a href=\"http://www.useragentstring.com/\">User agent strings</a>\n * For information on the browser brand (such as Safari versus Chrome), see\n * goog.userAgent.product.\n * @author arv@google.com (Erik Arvidsson)\n * @see ../demos/useragent.html\n */\n\ngoog.provide('goog.userAgent');\n\ngoog.require('goog.labs.userAgent.browser');\ngoog.require('goog.labs.userAgent.engine');\ngoog.require('goog.labs.userAgent.platform');\ngoog.require('goog.labs.userAgent.util');\ngoog.require('goog.reflect');\ngoog.require('goog.string');\n\n\n/**\n * @define {boolean} Whether we know at compile-time that the browser is IE.\n */\ngoog.define('goog.userAgent.ASSUME_IE', false);\n\n\n/**\n * @define {boolean} Whether we know at compile-time that the browser is EDGE.\n */\ngoog.define('goog.userAgent.ASSUME_EDGE', false);\n\n\n/**\n * @define {boolean} Whether we know at compile-time that the browser is GECKO.\n */\ngoog.define('goog.userAgent.ASSUME_GECKO', false);\n\n\n/**\n * @define {boolean} Whether we know at compile-time that the browser is WEBKIT.\n */\ngoog.define('goog.userAgent.ASSUME_WEBKIT', false);\n\n\n/**\n * @define {boolean} Whether we know at compile-time that the browser is a\n *     mobile device running WebKit e.g. iPhone or Android.\n */\ngoog.define('goog.userAgent.ASSUME_MOBILE_WEBKIT', false);\n\n\n/**\n * @define {boolean} Whether we know at compile-time that the browser is OPERA.\n */\ngoog.define('goog.userAgent.ASSUME_OPERA', false);\n\n\n/**\n * @define {boolean} Whether the\n *     `goog.userAgent.isVersionOrHigher`\n *     function will return true for any version.\n */\ngoog.define('goog.userAgent.ASSUME_ANY_VERSION', false);\n\n\n/**\n * Whether we know the browser engine at compile-time.\n * @type {boolean}\n * @private\n */\ngoog.userAgent.BROWSER_KNOWN_ = goog.userAgent.ASSUME_IE ||\n    goog.userAgent.ASSUME_EDGE || goog.userAgent.ASSUME_GECKO ||\n    goog.userAgent.ASSUME_MOBILE_WEBKIT || goog.userAgent.ASSUME_WEBKIT ||\n    goog.userAgent.ASSUME_OPERA;\n\n\n/**\n * Returns the userAgent string for the current browser.\n *\n * @return {string} The userAgent string.\n */\ngoog.userAgent.getUserAgentString = function() {\n  return goog.labs.userAgent.util.getUserAgent();\n};\n\n\n/**\n * @return {?Navigator} The native navigator object.\n */\ngoog.userAgent.getNavigatorTyped = function() {\n  // Need a local navigator reference instead of using the global one,\n  // to avoid the rare case where they reference different objects.\n  // (in a WorkerPool, for example).\n  return goog.global['navigator'] || null;\n};\n\n\n/**\n * TODO(nnaze): Change type to \"Navigator\" and update compilation targets.\n * @return {?Object} The native navigator object.\n */\ngoog.userAgent.getNavigator = function() {\n  return goog.userAgent.getNavigatorTyped();\n};\n\n\n/**\n * Whether the user agent is Opera.\n * @type {boolean}\n */\ngoog.userAgent.OPERA = goog.userAgent.BROWSER_KNOWN_ ?\n    goog.userAgent.ASSUME_OPERA :\n    goog.labs.userAgent.browser.isOpera();\n\n\n/**\n * Whether the user agent is Internet Explorer.\n * @type {boolean}\n */\ngoog.userAgent.IE = goog.userAgent.BROWSER_KNOWN_ ?\n    goog.userAgent.ASSUME_IE :\n    goog.labs.userAgent.browser.isIE();\n\n\n/**\n * Whether the user agent is Microsoft Edge.\n * @type {boolean}\n */\ngoog.userAgent.EDGE = goog.userAgent.BROWSER_KNOWN_ ?\n    goog.userAgent.ASSUME_EDGE :\n    goog.labs.userAgent.engine.isEdge();\n\n\n/**\n * Whether the user agent is MS Internet Explorer or MS Edge.\n * @type {boolean}\n */\ngoog.userAgent.EDGE_OR_IE = goog.userAgent.EDGE || goog.userAgent.IE;\n\n\n/**\n * Whether the user agent is Gecko. Gecko is the rendering engine used by\n * Mozilla, Firefox, and others.\n * @type {boolean}\n */\ngoog.userAgent.GECKO = goog.userAgent.BROWSER_KNOWN_ ?\n    goog.userAgent.ASSUME_GECKO :\n    goog.labs.userAgent.engine.isGecko();\n\n\n/**\n * Whether the user agent is WebKit. WebKit is the rendering engine that\n * Safari, Android and others use.\n * @type {boolean}\n */\ngoog.userAgent.WEBKIT = goog.userAgent.BROWSER_KNOWN_ ?\n    goog.userAgent.ASSUME_WEBKIT || goog.userAgent.ASSUME_MOBILE_WEBKIT :\n    goog.labs.userAgent.engine.isWebKit();\n\n\n/**\n * Whether the user agent is running on a mobile device.\n *\n * This is a separate function so that the logic can be tested.\n *\n * TODO(nnaze): Investigate swapping in goog.labs.userAgent.device.isMobile().\n *\n * @return {boolean} Whether the user agent is running on a mobile device.\n * @private\n */\ngoog.userAgent.isMobile_ = function() {\n  return goog.userAgent.WEBKIT &&\n      goog.labs.userAgent.util.matchUserAgent('Mobile');\n};\n\n\n/**\n * Whether the user agent is running on a mobile device.\n *\n * TODO(nnaze): Consider deprecating MOBILE when labs.userAgent\n *   is promoted as the gecko/webkit logic is likely inaccurate.\n *\n * @type {boolean}\n */\ngoog.userAgent.MOBILE =\n    goog.userAgent.ASSUME_MOBILE_WEBKIT || goog.userAgent.isMobile_();\n\n\n/**\n * Used while transitioning code to use WEBKIT instead.\n * @type {boolean}\n * @deprecated Use {@link goog.userAgent.product.SAFARI} instead.\n * TODO(nicksantos): Delete this from goog.userAgent.\n */\ngoog.userAgent.SAFARI = goog.userAgent.WEBKIT;\n\n\n/**\n * @return {string} the platform (operating system) the user agent is running\n *     on. Default to empty string because navigator.platform may not be defined\n *     (on Rhino, for example).\n * @private\n */\ngoog.userAgent.determinePlatform_ = function() {\n  var navigator = goog.userAgent.getNavigatorTyped();\n  return navigator && navigator.platform || '';\n};\n\n\n/**\n * The platform (operating system) the user agent is running on. Default to\n * empty string because navigator.platform may not be defined (on Rhino, for\n * example).\n * @type {string}\n */\ngoog.userAgent.PLATFORM = goog.userAgent.determinePlatform_();\n\n\n/**\n * @define {boolean} Whether the user agent is running on a Macintosh operating\n *     system.\n */\ngoog.define('goog.userAgent.ASSUME_MAC', false);\n\n\n/**\n * @define {boolean} Whether the user agent is running on a Windows operating\n *     system.\n */\ngoog.define('goog.userAgent.ASSUME_WINDOWS', false);\n\n\n/**\n * @define {boolean} Whether the user agent is running on a Linux operating\n *     system.\n */\ngoog.define('goog.userAgent.ASSUME_LINUX', false);\n\n\n/**\n * @define {boolean} Whether the user agent is running on a X11 windowing\n *     system.\n */\ngoog.define('goog.userAgent.ASSUME_X11', false);\n\n\n/**\n * @define {boolean} Whether the user agent is running on Android.\n */\ngoog.define('goog.userAgent.ASSUME_ANDROID', false);\n\n\n/**\n * @define {boolean} Whether the user agent is running on an iPhone.\n */\ngoog.define('goog.userAgent.ASSUME_IPHONE', false);\n\n\n/**\n * @define {boolean} Whether the user agent is running on an iPad.\n */\ngoog.define('goog.userAgent.ASSUME_IPAD', false);\n\n\n/**\n * @define {boolean} Whether the user agent is running on an iPod.\n */\ngoog.define('goog.userAgent.ASSUME_IPOD', false);\n\n\n/**\n * @type {boolean}\n * @private\n */\ngoog.userAgent.PLATFORM_KNOWN_ = goog.userAgent.ASSUME_MAC ||\n    goog.userAgent.ASSUME_WINDOWS || goog.userAgent.ASSUME_LINUX ||\n    goog.userAgent.ASSUME_X11 || goog.userAgent.ASSUME_ANDROID ||\n    goog.userAgent.ASSUME_IPHONE || goog.userAgent.ASSUME_IPAD ||\n    goog.userAgent.ASSUME_IPOD;\n\n\n/**\n * Whether the user agent is running on a Macintosh operating system.\n * @type {boolean}\n */\ngoog.userAgent.MAC = goog.userAgent.PLATFORM_KNOWN_ ?\n    goog.userAgent.ASSUME_MAC :\n    goog.labs.userAgent.platform.isMacintosh();\n\n\n/**\n * Whether the user agent is running on a Windows operating system.\n * @type {boolean}\n */\ngoog.userAgent.WINDOWS = goog.userAgent.PLATFORM_KNOWN_ ?\n    goog.userAgent.ASSUME_WINDOWS :\n    goog.labs.userAgent.platform.isWindows();\n\n\n/**\n * Whether the user agent is Linux per the legacy behavior of\n * goog.userAgent.LINUX, which considered ChromeOS to also be\n * Linux.\n * @return {boolean}\n * @private\n */\ngoog.userAgent.isLegacyLinux_ = function() {\n  return goog.labs.userAgent.platform.isLinux() ||\n      goog.labs.userAgent.platform.isChromeOS();\n};\n\n\n/**\n * Whether the user agent is running on a Linux operating system.\n *\n * Note that goog.userAgent.LINUX considers ChromeOS to be Linux,\n * while goog.labs.userAgent.platform considers ChromeOS and\n * Linux to be different OSes.\n *\n * @type {boolean}\n */\ngoog.userAgent.LINUX = goog.userAgent.PLATFORM_KNOWN_ ?\n    goog.userAgent.ASSUME_LINUX :\n    goog.userAgent.isLegacyLinux_();\n\n\n/**\n * @return {boolean} Whether the user agent is an X11 windowing system.\n * @private\n */\ngoog.userAgent.isX11_ = function() {\n  var navigator = goog.userAgent.getNavigatorTyped();\n  return !!navigator &&\n      goog.string.contains(navigator['appVersion'] || '', 'X11');\n};\n\n\n/**\n * Whether the user agent is running on a X11 windowing system.\n * @type {boolean}\n */\ngoog.userAgent.X11 = goog.userAgent.PLATFORM_KNOWN_ ?\n    goog.userAgent.ASSUME_X11 :\n    goog.userAgent.isX11_();\n\n\n/**\n * Whether the user agent is running on Android.\n * @type {boolean}\n */\ngoog.userAgent.ANDROID = goog.userAgent.PLATFORM_KNOWN_ ?\n    goog.userAgent.ASSUME_ANDROID :\n    goog.labs.userAgent.platform.isAndroid();\n\n\n/**\n * Whether the user agent is running on an iPhone.\n * @type {boolean}\n */\ngoog.userAgent.IPHONE = goog.userAgent.PLATFORM_KNOWN_ ?\n    goog.userAgent.ASSUME_IPHONE :\n    goog.labs.userAgent.platform.isIphone();\n\n\n/**\n * Whether the user agent is running on an iPad.\n * @type {boolean}\n */\ngoog.userAgent.IPAD = goog.userAgent.PLATFORM_KNOWN_ ?\n    goog.userAgent.ASSUME_IPAD :\n    goog.labs.userAgent.platform.isIpad();\n\n\n/**\n * Whether the user agent is running on an iPod.\n * @type {boolean}\n */\ngoog.userAgent.IPOD = goog.userAgent.PLATFORM_KNOWN_ ?\n    goog.userAgent.ASSUME_IPOD :\n    goog.labs.userAgent.platform.isIpod();\n\n\n/**\n * Whether the user agent is running on iOS.\n * @type {boolean}\n */\ngoog.userAgent.IOS = goog.userAgent.PLATFORM_KNOWN_ ?\n    (goog.userAgent.ASSUME_IPHONE || goog.userAgent.ASSUME_IPAD ||\n     goog.userAgent.ASSUME_IPOD) :\n    goog.labs.userAgent.platform.isIos();\n\n/**\n * @return {string} The string that describes the version number of the user\n *     agent.\n * @private\n */\ngoog.userAgent.determineVersion_ = function() {\n  // All browsers have different ways to detect the version and they all have\n  // different naming schemes.\n  // version is a string rather than a number because it may contain 'b', 'a',\n  // and so on.\n  var version = '';\n  var arr = goog.userAgent.getVersionRegexResult_();\n  if (arr) {\n    version = arr ? arr[1] : '';\n  }\n\n  if (goog.userAgent.IE) {\n    // IE9 can be in document mode 9 but be reporting an inconsistent user agent\n    // version.  If it is identifying as a version lower than 9 we take the\n    // documentMode as the version instead.  IE8 has similar behavior.\n    // It is recommended to set the X-UA-Compatible header to ensure that IE9\n    // uses documentMode 9.\n    var docMode = goog.userAgent.getDocumentMode_();\n    if (docMode != null && docMode > parseFloat(version)) {\n      return String(docMode);\n    }\n  }\n\n  return version;\n};\n\n\n/**\n * @return {?IArrayLike<string>|undefined} The version regex matches from\n *     parsing the user\n *     agent string. These regex statements must be executed inline so they can\n *     be compiled out by the closure compiler with the rest of the useragent\n *     detection logic when ASSUME_* is specified.\n * @private\n */\ngoog.userAgent.getVersionRegexResult_ = function() {\n  var userAgent = goog.userAgent.getUserAgentString();\n  if (goog.userAgent.GECKO) {\n    return /rv\\:([^\\);]+)(\\)|;)/.exec(userAgent);\n  }\n  if (goog.userAgent.EDGE) {\n    return /Edge\\/([\\d\\.]+)/.exec(userAgent);\n  }\n  if (goog.userAgent.IE) {\n    return /\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(userAgent);\n  }\n  if (goog.userAgent.WEBKIT) {\n    // WebKit/125.4\n    return /WebKit\\/(\\S+)/.exec(userAgent);\n  }\n  if (goog.userAgent.OPERA) {\n    // If none of the above browsers were detected but the browser is Opera, the\n    // only string that is of interest is 'Version/<number>'.\n    return /(?:Version)[ \\/]?(\\S+)/.exec(userAgent);\n  }\n  return undefined;\n};\n\n\n/**\n * @return {number|undefined} Returns the document mode (for testing).\n * @private\n */\ngoog.userAgent.getDocumentMode_ = function() {\n  // NOTE(user): goog.userAgent may be used in context where there is no DOM.\n  var doc = goog.global['document'];\n  return doc ? doc['documentMode'] : undefined;\n};\n\n\n/**\n * The version of the user agent. This is a string because it might contain\n * 'b' (as in beta) as well as multiple dots.\n * @type {string}\n */\ngoog.userAgent.VERSION = goog.userAgent.determineVersion_();\n\n\n/**\n * Compares two version numbers.\n *\n * @param {string} v1 Version of first item.\n * @param {string} v2 Version of second item.\n *\n * @return {number}  1 if first argument is higher\n *                   0 if arguments are equal\n *                  -1 if second argument is higher.\n * @deprecated Use goog.string.compareVersions.\n */\ngoog.userAgent.compare = function(v1, v2) {\n  return goog.string.compareVersions(v1, v2);\n};\n\n\n/**\n * Cache for {@link goog.userAgent.isVersionOrHigher}.\n * Calls to compareVersions are surprisingly expensive and, as a browser's\n * version number is unlikely to change during a session, we cache the results.\n * @const\n * @private\n */\ngoog.userAgent.isVersionOrHigherCache_ = {};\n\n\n/**\n * Whether the user agent version is higher or the same as the given version.\n * NOTE: When checking the version numbers for Firefox and Safari, be sure to\n * use the engine's version, not the browser's version number.  For example,\n * Firefox 3.0 corresponds to Gecko 1.9 and Safari 3.0 to Webkit 522.11.\n * Opera and Internet Explorer versions match the product release number.<br>\n * @see <a href=\"http://en.wikipedia.org/wiki/Safari_version_history\">\n *     Webkit</a>\n * @see <a href=\"http://en.wikipedia.org/wiki/Gecko_engine\">Gecko</a>\n *\n * @param {string|number} version The version to check.\n * @return {boolean} Whether the user agent version is higher or the same as\n *     the given version.\n */\ngoog.userAgent.isVersionOrHigher = function(version) {\n  return goog.userAgent.ASSUME_ANY_VERSION ||\n      goog.reflect.cache(\n          goog.userAgent.isVersionOrHigherCache_, version, function() {\n            return goog.string.compareVersions(\n                       goog.userAgent.VERSION, version) >= 0;\n          });\n};\n\n\n/**\n * Deprecated alias to `goog.userAgent.isVersionOrHigher`.\n * @param {string|number} version The version to check.\n * @return {boolean} Whether the user agent version is higher or the same as\n *     the given version.\n * @deprecated Use goog.userAgent.isVersionOrHigher().\n */\ngoog.userAgent.isVersion = goog.userAgent.isVersionOrHigher;\n\n\n/**\n * Whether the IE effective document mode is higher or the same as the given\n * document mode version.\n * NOTE: Only for IE, return false for another browser.\n *\n * @param {number} documentMode The document mode version to check.\n * @return {boolean} Whether the IE effective document mode is higher or the\n *     same as the given version.\n */\ngoog.userAgent.isDocumentModeOrHigher = function(documentMode) {\n  return Number(goog.userAgent.DOCUMENT_MODE) >= documentMode;\n};\n\n\n/**\n * Deprecated alias to `goog.userAgent.isDocumentModeOrHigher`.\n * @param {number} version The version to check.\n * @return {boolean} Whether the IE effective document mode is higher or the\n *      same as the given version.\n * @deprecated Use goog.userAgent.isDocumentModeOrHigher().\n */\ngoog.userAgent.isDocumentMode = goog.userAgent.isDocumentModeOrHigher;\n\n\n/**\n * For IE version < 7, documentMode is undefined, so attempt to use the\n * CSS1Compat property to see if we are in standards mode. If we are in\n * standards mode, treat the browser version as the document mode. Otherwise,\n * IE is emulating version 5.\n * @type {number|undefined}\n * @const\n */\ngoog.userAgent.DOCUMENT_MODE = (function() {\n  var doc = goog.global['document'];\n  var mode = goog.userAgent.getDocumentMode_();\n  if (!doc || !goog.userAgent.IE) {\n    return undefined;\n  }\n  return mode || (doc['compatMode'] == 'CSS1Compat' ?\n                      parseInt(goog.userAgent.VERSION, 10) :\n                      5);\n})();\n","// Copyright 2010 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Browser capability checks for the dom package.\n *\n */\n\n\ngoog.provide('goog.dom.BrowserFeature');\n\ngoog.require('goog.userAgent');\n\n\n/**\n * Enum of browser capabilities.\n * @enum {boolean}\n */\ngoog.dom.BrowserFeature = {\n  /**\n   * Whether attributes 'name' and 'type' can be added to an element after it's\n   * created. False in Internet Explorer prior to version 9.\n   */\n  CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:\n      !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9),\n\n  /**\n   * Whether we can use element.children to access an element's Element\n   * children. Available since Gecko 1.9.1, IE 9. (IE<9 also includes comment\n   * nodes in the collection.)\n   */\n  CAN_USE_CHILDREN_ATTRIBUTE: !goog.userAgent.GECKO && !goog.userAgent.IE ||\n      goog.userAgent.IE && goog.userAgent.isDocumentModeOrHigher(9) ||\n      goog.userAgent.GECKO && goog.userAgent.isVersionOrHigher('1.9.1'),\n\n  /**\n   * Opera, Safari 3, and Internet Explorer 9 all support innerText but they\n   * include text nodes in script and style tags. Not document-mode-dependent.\n   */\n  CAN_USE_INNER_TEXT:\n      (goog.userAgent.IE && !goog.userAgent.isVersionOrHigher('9')),\n\n  /**\n   * MSIE, Opera, and Safari>=4 support element.parentElement to access an\n   * element's parent if it is an Element.\n   */\n  CAN_USE_PARENT_ELEMENT_PROPERTY:\n      goog.userAgent.IE || goog.userAgent.OPERA || goog.userAgent.WEBKIT,\n\n  /**\n   * Whether NoScope elements need a scoped element written before them in\n   * innerHTML.\n   * MSDN: http://msdn.microsoft.com/en-us/library/ms533897(VS.85).aspx#1\n   */\n  INNER_HTML_NEEDS_SCOPED_ELEMENT: goog.userAgent.IE,\n\n  /**\n   * Whether we use legacy IE range API.\n   */\n  LEGACY_IE_RANGES:\n      goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(9)\n};\n","// Copyright 2017 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\ngoog.provide('goog.dom.HtmlElement');\n\n\n\n/**\n * This subclass of HTMLElement is used when only a HTMLElement is possible and\n * not any of its subclasses. Normally, a type can refer to an instance of\n * itself or an instance of any subtype. More concretely, if HTMLElement is used\n * then the compiler must assume that it might still be e.g. HTMLScriptElement.\n * With this, the type check knows that it couldn't be any special element.\n *\n * @constructor\n * @extends {HTMLElement}\n */\ngoog.dom.HtmlElement = function() {};\n","// Copyright 2007 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Defines the goog.dom.TagName class. Its constants enumerate\n * all HTML tag names specified in either the the W3C HTML 4.01 index of\n * elements or the HTML5.1 specification.\n *\n * References:\n * https://www.w3.org/TR/html401/index/elements.html\n * https://www.w3.org/TR/html51/dom.html#elements\n */\ngoog.provide('goog.dom.TagName');\n\ngoog.require('goog.dom.HtmlElement');\n\n\n/**\n * A tag name with the type of the element stored in the generic.\n * @param {string} tagName\n * @constructor\n * @template T\n */\ngoog.dom.TagName = function(tagName) {\n  /** @private {string} */\n  this.tagName_ = tagName;\n};\n\n\n/**\n * Returns the tag name.\n * @return {string}\n * @override\n */\ngoog.dom.TagName.prototype.toString = function() {\n  return this.tagName_;\n};\n\n\n// Closure Compiler unconditionally converts the following constants to their\n// string value (goog.dom.TagName.A -> 'A'). These are the consequences:\n// 1. Don't add any members or static members to goog.dom.TagName as they\n//    couldn't be accessed after this optimization.\n// 2. Keep the constant name and its string value the same:\n//    goog.dom.TagName.X = new goog.dom.TagName('Y');\n//    is converted to 'X', not 'Y'.\n\n\n/** @type {!goog.dom.TagName<!HTMLAnchorElement>} */\ngoog.dom.TagName.A = new goog.dom.TagName('A');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.ABBR = new goog.dom.TagName('ABBR');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.ACRONYM = new goog.dom.TagName('ACRONYM');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.ADDRESS = new goog.dom.TagName('ADDRESS');\n\n\n/** @type {!goog.dom.TagName<!HTMLAppletElement>} */\ngoog.dom.TagName.APPLET = new goog.dom.TagName('APPLET');\n\n\n/** @type {!goog.dom.TagName<!HTMLAreaElement>} */\ngoog.dom.TagName.AREA = new goog.dom.TagName('AREA');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.ARTICLE = new goog.dom.TagName('ARTICLE');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.ASIDE = new goog.dom.TagName('ASIDE');\n\n\n/** @type {!goog.dom.TagName<!HTMLAudioElement>} */\ngoog.dom.TagName.AUDIO = new goog.dom.TagName('AUDIO');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.B = new goog.dom.TagName('B');\n\n\n/** @type {!goog.dom.TagName<!HTMLBaseElement>} */\ngoog.dom.TagName.BASE = new goog.dom.TagName('BASE');\n\n\n/** @type {!goog.dom.TagName<!HTMLBaseFontElement>} */\ngoog.dom.TagName.BASEFONT = new goog.dom.TagName('BASEFONT');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.BDI = new goog.dom.TagName('BDI');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.BDO = new goog.dom.TagName('BDO');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.BIG = new goog.dom.TagName('BIG');\n\n\n/** @type {!goog.dom.TagName<!HTMLQuoteElement>} */\ngoog.dom.TagName.BLOCKQUOTE = new goog.dom.TagName('BLOCKQUOTE');\n\n\n/** @type {!goog.dom.TagName<!HTMLBodyElement>} */\ngoog.dom.TagName.BODY = new goog.dom.TagName('BODY');\n\n\n/** @type {!goog.dom.TagName<!HTMLBRElement>} */\ngoog.dom.TagName.BR = new goog.dom.TagName('BR');\n\n\n/** @type {!goog.dom.TagName<!HTMLButtonElement>} */\ngoog.dom.TagName.BUTTON = new goog.dom.TagName('BUTTON');\n\n\n/** @type {!goog.dom.TagName<!HTMLCanvasElement>} */\ngoog.dom.TagName.CANVAS = new goog.dom.TagName('CANVAS');\n\n\n/** @type {!goog.dom.TagName<!HTMLTableCaptionElement>} */\ngoog.dom.TagName.CAPTION = new goog.dom.TagName('CAPTION');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.CENTER = new goog.dom.TagName('CENTER');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.CITE = new goog.dom.TagName('CITE');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.CODE = new goog.dom.TagName('CODE');\n\n\n/** @type {!goog.dom.TagName<!HTMLTableColElement>} */\ngoog.dom.TagName.COL = new goog.dom.TagName('COL');\n\n\n/** @type {!goog.dom.TagName<!HTMLTableColElement>} */\ngoog.dom.TagName.COLGROUP = new goog.dom.TagName('COLGROUP');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.COMMAND = new goog.dom.TagName('COMMAND');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.DATA = new goog.dom.TagName('DATA');\n\n\n/** @type {!goog.dom.TagName<!HTMLDataListElement>} */\ngoog.dom.TagName.DATALIST = new goog.dom.TagName('DATALIST');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.DD = new goog.dom.TagName('DD');\n\n\n/** @type {!goog.dom.TagName<!HTMLModElement>} */\ngoog.dom.TagName.DEL = new goog.dom.TagName('DEL');\n\n\n/** @type {!goog.dom.TagName<!HTMLDetailsElement>} */\ngoog.dom.TagName.DETAILS = new goog.dom.TagName('DETAILS');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.DFN = new goog.dom.TagName('DFN');\n\n\n/** @type {!goog.dom.TagName<!HTMLDialogElement>} */\ngoog.dom.TagName.DIALOG = new goog.dom.TagName('DIALOG');\n\n\n/** @type {!goog.dom.TagName<!HTMLDirectoryElement>} */\ngoog.dom.TagName.DIR = new goog.dom.TagName('DIR');\n\n\n/** @type {!goog.dom.TagName<!HTMLDivElement>} */\ngoog.dom.TagName.DIV = new goog.dom.TagName('DIV');\n\n\n/** @type {!goog.dom.TagName<!HTMLDListElement>} */\ngoog.dom.TagName.DL = new goog.dom.TagName('DL');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.DT = new goog.dom.TagName('DT');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.EM = new goog.dom.TagName('EM');\n\n\n/** @type {!goog.dom.TagName<!HTMLEmbedElement>} */\ngoog.dom.TagName.EMBED = new goog.dom.TagName('EMBED');\n\n\n/** @type {!goog.dom.TagName<!HTMLFieldSetElement>} */\ngoog.dom.TagName.FIELDSET = new goog.dom.TagName('FIELDSET');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.FIGCAPTION = new goog.dom.TagName('FIGCAPTION');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.FIGURE = new goog.dom.TagName('FIGURE');\n\n\n/** @type {!goog.dom.TagName<!HTMLFontElement>} */\ngoog.dom.TagName.FONT = new goog.dom.TagName('FONT');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.FOOTER = new goog.dom.TagName('FOOTER');\n\n\n/** @type {!goog.dom.TagName<!HTMLFormElement>} */\ngoog.dom.TagName.FORM = new goog.dom.TagName('FORM');\n\n\n/** @type {!goog.dom.TagName<!HTMLFrameElement>} */\ngoog.dom.TagName.FRAME = new goog.dom.TagName('FRAME');\n\n\n/** @type {!goog.dom.TagName<!HTMLFrameSetElement>} */\ngoog.dom.TagName.FRAMESET = new goog.dom.TagName('FRAMESET');\n\n\n/** @type {!goog.dom.TagName<!HTMLHeadingElement>} */\ngoog.dom.TagName.H1 = new goog.dom.TagName('H1');\n\n\n/** @type {!goog.dom.TagName<!HTMLHeadingElement>} */\ngoog.dom.TagName.H2 = new goog.dom.TagName('H2');\n\n\n/** @type {!goog.dom.TagName<!HTMLHeadingElement>} */\ngoog.dom.TagName.H3 = new goog.dom.TagName('H3');\n\n\n/** @type {!goog.dom.TagName<!HTMLHeadingElement>} */\ngoog.dom.TagName.H4 = new goog.dom.TagName('H4');\n\n\n/** @type {!goog.dom.TagName<!HTMLHeadingElement>} */\ngoog.dom.TagName.H5 = new goog.dom.TagName('H5');\n\n\n/** @type {!goog.dom.TagName<!HTMLHeadingElement>} */\ngoog.dom.TagName.H6 = new goog.dom.TagName('H6');\n\n\n/** @type {!goog.dom.TagName<!HTMLHeadElement>} */\ngoog.dom.TagName.HEAD = new goog.dom.TagName('HEAD');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.HEADER = new goog.dom.TagName('HEADER');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.HGROUP = new goog.dom.TagName('HGROUP');\n\n\n/** @type {!goog.dom.TagName<!HTMLHRElement>} */\ngoog.dom.TagName.HR = new goog.dom.TagName('HR');\n\n\n/** @type {!goog.dom.TagName<!HTMLHtmlElement>} */\ngoog.dom.TagName.HTML = new goog.dom.TagName('HTML');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.I = new goog.dom.TagName('I');\n\n\n/** @type {!goog.dom.TagName<!HTMLIFrameElement>} */\ngoog.dom.TagName.IFRAME = new goog.dom.TagName('IFRAME');\n\n\n/** @type {!goog.dom.TagName<!HTMLImageElement>} */\ngoog.dom.TagName.IMG = new goog.dom.TagName('IMG');\n\n\n/** @type {!goog.dom.TagName<!HTMLInputElement>} */\ngoog.dom.TagName.INPUT = new goog.dom.TagName('INPUT');\n\n\n/** @type {!goog.dom.TagName<!HTMLModElement>} */\ngoog.dom.TagName.INS = new goog.dom.TagName('INS');\n\n\n/** @type {!goog.dom.TagName<!HTMLIsIndexElement>} */\ngoog.dom.TagName.ISINDEX = new goog.dom.TagName('ISINDEX');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.KBD = new goog.dom.TagName('KBD');\n\n\n// HTMLKeygenElement is deprecated.\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.KEYGEN = new goog.dom.TagName('KEYGEN');\n\n\n/** @type {!goog.dom.TagName<!HTMLLabelElement>} */\ngoog.dom.TagName.LABEL = new goog.dom.TagName('LABEL');\n\n\n/** @type {!goog.dom.TagName<!HTMLLegendElement>} */\ngoog.dom.TagName.LEGEND = new goog.dom.TagName('LEGEND');\n\n\n/** @type {!goog.dom.TagName<!HTMLLIElement>} */\ngoog.dom.TagName.LI = new goog.dom.TagName('LI');\n\n\n/** @type {!goog.dom.TagName<!HTMLLinkElement>} */\ngoog.dom.TagName.LINK = new goog.dom.TagName('LINK');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.MAIN = new goog.dom.TagName('MAIN');\n\n\n/** @type {!goog.dom.TagName<!HTMLMapElement>} */\ngoog.dom.TagName.MAP = new goog.dom.TagName('MAP');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.MARK = new goog.dom.TagName('MARK');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.MATH = new goog.dom.TagName('MATH');\n\n\n/** @type {!goog.dom.TagName<!HTMLMenuElement>} */\ngoog.dom.TagName.MENU = new goog.dom.TagName('MENU');\n\n\n/** @type {!goog.dom.TagName<!HTMLMenuItemElement>} */\ngoog.dom.TagName.MENUITEM = new goog.dom.TagName('MENUITEM');\n\n\n/** @type {!goog.dom.TagName<!HTMLMetaElement>} */\ngoog.dom.TagName.META = new goog.dom.TagName('META');\n\n\n/** @type {!goog.dom.TagName<!HTMLMeterElement>} */\ngoog.dom.TagName.METER = new goog.dom.TagName('METER');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.NAV = new goog.dom.TagName('NAV');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.NOFRAMES = new goog.dom.TagName('NOFRAMES');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.NOSCRIPT = new goog.dom.TagName('NOSCRIPT');\n\n\n/** @type {!goog.dom.TagName<!HTMLObjectElement>} */\ngoog.dom.TagName.OBJECT = new goog.dom.TagName('OBJECT');\n\n\n/** @type {!goog.dom.TagName<!HTMLOListElement>} */\ngoog.dom.TagName.OL = new goog.dom.TagName('OL');\n\n\n/** @type {!goog.dom.TagName<!HTMLOptGroupElement>} */\ngoog.dom.TagName.OPTGROUP = new goog.dom.TagName('OPTGROUP');\n\n\n/** @type {!goog.dom.TagName<!HTMLOptionElement>} */\ngoog.dom.TagName.OPTION = new goog.dom.TagName('OPTION');\n\n\n/** @type {!goog.dom.TagName<!HTMLOutputElement>} */\ngoog.dom.TagName.OUTPUT = new goog.dom.TagName('OUTPUT');\n\n\n/** @type {!goog.dom.TagName<!HTMLParagraphElement>} */\ngoog.dom.TagName.P = new goog.dom.TagName('P');\n\n\n/** @type {!goog.dom.TagName<!HTMLParamElement>} */\ngoog.dom.TagName.PARAM = new goog.dom.TagName('PARAM');\n\n\n/** @type {!goog.dom.TagName<!HTMLPictureElement>} */\ngoog.dom.TagName.PICTURE = new goog.dom.TagName('PICTURE');\n\n\n/** @type {!goog.dom.TagName<!HTMLPreElement>} */\ngoog.dom.TagName.PRE = new goog.dom.TagName('PRE');\n\n\n/** @type {!goog.dom.TagName<!HTMLProgressElement>} */\ngoog.dom.TagName.PROGRESS = new goog.dom.TagName('PROGRESS');\n\n\n/** @type {!goog.dom.TagName<!HTMLQuoteElement>} */\ngoog.dom.TagName.Q = new goog.dom.TagName('Q');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.RP = new goog.dom.TagName('RP');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.RT = new goog.dom.TagName('RT');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.RTC = new goog.dom.TagName('RTC');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.RUBY = new goog.dom.TagName('RUBY');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.S = new goog.dom.TagName('S');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.SAMP = new goog.dom.TagName('SAMP');\n\n\n/** @type {!goog.dom.TagName<!HTMLScriptElement>} */\ngoog.dom.TagName.SCRIPT = new goog.dom.TagName('SCRIPT');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.SECTION = new goog.dom.TagName('SECTION');\n\n\n/** @type {!goog.dom.TagName<!HTMLSelectElement>} */\ngoog.dom.TagName.SELECT = new goog.dom.TagName('SELECT');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.SMALL = new goog.dom.TagName('SMALL');\n\n\n/** @type {!goog.dom.TagName<!HTMLSourceElement>} */\ngoog.dom.TagName.SOURCE = new goog.dom.TagName('SOURCE');\n\n\n/** @type {!goog.dom.TagName<!HTMLSpanElement>} */\ngoog.dom.TagName.SPAN = new goog.dom.TagName('SPAN');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.STRIKE = new goog.dom.TagName('STRIKE');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.STRONG = new goog.dom.TagName('STRONG');\n\n\n/** @type {!goog.dom.TagName<!HTMLStyleElement>} */\ngoog.dom.TagName.STYLE = new goog.dom.TagName('STYLE');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.SUB = new goog.dom.TagName('SUB');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.SUMMARY = new goog.dom.TagName('SUMMARY');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.SUP = new goog.dom.TagName('SUP');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.SVG = new goog.dom.TagName('SVG');\n\n\n/** @type {!goog.dom.TagName<!HTMLTableElement>} */\ngoog.dom.TagName.TABLE = new goog.dom.TagName('TABLE');\n\n\n/** @type {!goog.dom.TagName<!HTMLTableSectionElement>} */\ngoog.dom.TagName.TBODY = new goog.dom.TagName('TBODY');\n\n\n/** @type {!goog.dom.TagName<!HTMLTableCellElement>} */\ngoog.dom.TagName.TD = new goog.dom.TagName('TD');\n\n\n/** @type {!goog.dom.TagName<!HTMLTemplateElement>} */\ngoog.dom.TagName.TEMPLATE = new goog.dom.TagName('TEMPLATE');\n\n\n/** @type {!goog.dom.TagName<!HTMLTextAreaElement>} */\ngoog.dom.TagName.TEXTAREA = new goog.dom.TagName('TEXTAREA');\n\n\n/** @type {!goog.dom.TagName<!HTMLTableSectionElement>} */\ngoog.dom.TagName.TFOOT = new goog.dom.TagName('TFOOT');\n\n\n/** @type {!goog.dom.TagName<!HTMLTableCellElement>} */\ngoog.dom.TagName.TH = new goog.dom.TagName('TH');\n\n\n/** @type {!goog.dom.TagName<!HTMLTableSectionElement>} */\ngoog.dom.TagName.THEAD = new goog.dom.TagName('THEAD');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.TIME = new goog.dom.TagName('TIME');\n\n\n/** @type {!goog.dom.TagName<!HTMLTitleElement>} */\ngoog.dom.TagName.TITLE = new goog.dom.TagName('TITLE');\n\n\n/** @type {!goog.dom.TagName<!HTMLTableRowElement>} */\ngoog.dom.TagName.TR = new goog.dom.TagName('TR');\n\n\n/** @type {!goog.dom.TagName<!HTMLTrackElement>} */\ngoog.dom.TagName.TRACK = new goog.dom.TagName('TRACK');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.TT = new goog.dom.TagName('TT');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.U = new goog.dom.TagName('U');\n\n\n/** @type {!goog.dom.TagName<!HTMLUListElement>} */\ngoog.dom.TagName.UL = new goog.dom.TagName('UL');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.VAR = new goog.dom.TagName('VAR');\n\n\n/** @type {!goog.dom.TagName<!HTMLVideoElement>} */\ngoog.dom.TagName.VIDEO = new goog.dom.TagName('VIDEO');\n\n\n/** @type {!goog.dom.TagName<!goog.dom.HtmlElement>} */\ngoog.dom.TagName.WBR = new goog.dom.TagName('WBR');\n","// Copyright 2017 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\ngoog.provide('goog.dom.asserts');\n\ngoog.require('goog.asserts');\n\n/**\n * @fileoverview Custom assertions to ensure that an element has the appropriate\n * type.\n *\n * Using a goog.dom.safe wrapper on an object on the incorrect type (via an\n * incorrect static type cast) can result in security bugs: For instance,\n * g.d.s.setAnchorHref ensures that the URL assigned to the .href attribute\n * satisfies the SafeUrl contract, i.e., is safe to dereference as a hyperlink.\n * However, the value assigned to a HTMLLinkElement's .href property requires\n * the stronger TrustedResourceUrl contract, since it can refer to a stylesheet.\n * Thus, using g.d.s.setAnchorHref on an (incorrectly statically typed) object\n * of type HTMLLinkElement can result in a security vulnerability.\n * Assertions of the correct run-time type help prevent such incorrect use.\n *\n * In some cases, code using the DOM API is tested using mock objects (e.g., a\n * plain object such as {'href': url} instead of an actual Location object).\n * To allow such mocking, the assertions permit objects of types that are not\n * relevant DOM API objects at all (for instance, not Element or Location).\n *\n * Note that instanceof checks don't work straightforwardly in older versions of\n * IE, or across frames (see,\n * http://stackoverflow.com/questions/384286/javascript-isdom-how-do-you-check-if-a-javascript-object-is-a-dom-object,\n * http://stackoverflow.com/questions/26248599/instanceof-htmlelement-in-iframe-is-not-element-or-object).\n *\n * Hence, these assertions may pass vacuously in such scenarios. The resulting\n * risk of security bugs is limited by the following factors:\n *  - A bug can only arise in scenarios involving incorrect static typing (the\n *    wrapper methods are statically typed to demand objects of the appropriate,\n *    precise type).\n *  - Typically, code is tested and exercised in multiple browsers.\n */\n\n/**\n * Asserts that a given object is a Location.\n *\n * To permit this assertion to pass in the context of tests where DOM APIs might\n * be mocked, also accepts any other type except for subtypes of {!Element}.\n * This is to ensure that, for instance, HTMLLinkElement is not being used in\n * place of a Location, since this could result in security bugs due to stronger\n * contracts required for assignments to the href property of the latter.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!Location}\n */\ngoog.dom.asserts.assertIsLocation = function(o) {\n  if (goog.asserts.ENABLE_ASSERTS) {\n    var win = goog.dom.asserts.getWindow_(o);\n    if (typeof win.Location != 'undefined' &&\n        typeof win.Element != 'undefined') {\n      goog.asserts.assert(\n          o && (o instanceof win.Location || !(o instanceof win.Element)),\n          'Argument is not a Location (or a non-Element mock); got: %s',\n          goog.dom.asserts.debugStringForType_(o));\n    }\n  }\n  return /** @type {!Location} */ (o);\n};\n\n\n/**\n * Asserts that a given object is either the given subtype of Element\n * or a non-Element, non-Location Mock.\n *\n * To permit this assertion to pass in the context of tests where DOM\n * APIs might be mocked, also accepts any other type except for\n * subtypes of {!Element}.  This is to ensure that, for instance,\n * HTMLScriptElement is not being used in place of a HTMLImageElement,\n * since this could result in security bugs due to stronger contracts\n * required for assignments to the src property of the latter.\n *\n * The DOM type is looked up in the window the object belongs to.  In\n * some contexts, this might not be possible (e.g. when running tests\n * outside a browser, cross-domain lookup). In this case, the\n * assertions are skipped.\n *\n * @param {?Object} o The object whose type to assert.\n * @param {string} typename The name of the DOM type.\n * @return {!Element} The object.\n * @private\n */\n// TODO(bangert): Make an analog of goog.dom.TagName to correctly handle casts?\ngoog.dom.asserts.assertIsElementType_ = function(o, typename) {\n  if (goog.asserts.ENABLE_ASSERTS) {\n    var win = goog.dom.asserts.getWindow_(o);\n    if (typeof win[typename] != 'undefined' &&\n        typeof win.Location != 'undefined' &&\n        typeof win.Element != 'undefined') {\n      goog.asserts.assert(\n          o &&\n              (o instanceof win[typename] ||\n               !((o instanceof win.Location) || (o instanceof win.Element))),\n          'Argument is not a %s (or a non-Element, non-Location mock); got: %s',\n          typename, goog.dom.asserts.debugStringForType_(o));\n    }\n  }\n  return /** @type {!Element} */ (o);\n};\n\n/**\n * Asserts that a given object is a HTMLAnchorElement.\n *\n * To permit this assertion to pass in the context of tests where elements might\n * be mocked, also accepts objects that are not of type Location nor a subtype\n * of Element.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!HTMLAnchorElement}\n */\ngoog.dom.asserts.assertIsHTMLAnchorElement = function(o) {\n  return /** @type {!HTMLAnchorElement} */ (\n      goog.dom.asserts.assertIsElementType_(o, 'HTMLAnchorElement'));\n};\n\n/**\n * Asserts that a given object is a HTMLButtonElement.\n *\n * To permit this assertion to pass in the context of tests where elements might\n * be mocked, also accepts objects that are not a subtype of Element.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!HTMLButtonElement}\n */\ngoog.dom.asserts.assertIsHTMLButtonElement = function(o) {\n  return /** @type {!HTMLButtonElement} */ (\n      goog.dom.asserts.assertIsElementType_(o, 'HTMLButtonElement'));\n};\n\n/**\n * Asserts that a given object is a HTMLLinkElement.\n *\n * To permit this assertion to pass in the context of tests where elements might\n * be mocked, also accepts objects that are not a subtype of Element.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!HTMLLinkElement}\n */\ngoog.dom.asserts.assertIsHTMLLinkElement = function(o) {\n  return /** @type {!HTMLLinkElement} */ (\n      goog.dom.asserts.assertIsElementType_(o, 'HTMLLinkElement'));\n};\n\n/**\n * Asserts that a given object is a HTMLImageElement.\n *\n * To permit this assertion to pass in the context of tests where elements might\n * be mocked, also accepts objects that are not a subtype of Element.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!HTMLImageElement}\n */\ngoog.dom.asserts.assertIsHTMLImageElement = function(o) {\n  return /** @type {!HTMLImageElement} */ (\n      goog.dom.asserts.assertIsElementType_(o, 'HTMLImageElement'));\n};\n\n/**\n * Asserts that a given object is a HTMLVideoElement.\n *\n * To permit this assertion to pass in the context of tests where elements might\n * be mocked, also accepts objects that are not a subtype of Element.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!HTMLVideoElement}\n */\ngoog.dom.asserts.assertIsHTMLVideoElement = function(o) {\n  return /** @type {!HTMLVideoElement} */ (\n      goog.dom.asserts.assertIsElementType_(o, 'HTMLVideoElement'));\n};\n\n/**\n * Asserts that a given object is a HTMLInputElement.\n *\n * To permit this assertion to pass in the context of tests where elements might\n * be mocked, also accepts objects that are not a subtype of Element.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!HTMLInputElement}\n */\ngoog.dom.asserts.assertIsHTMLInputElement = function(o) {\n  return /** @type {!HTMLInputElement} */ (\n      goog.dom.asserts.assertIsElementType_(o, 'HTMLInputElement'));\n};\n\n/**\n * Asserts that a given object is a HTMLEmbedElement.\n *\n * To permit this assertion to pass in the context of tests where elements might\n * be mocked, also accepts objects that are not a subtype of Element.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!HTMLEmbedElement}\n */\ngoog.dom.asserts.assertIsHTMLEmbedElement = function(o) {\n  return /** @type {!HTMLEmbedElement} */ (\n      goog.dom.asserts.assertIsElementType_(o, 'HTMLEmbedElement'));\n};\n\n/**\n * Asserts that a given object is a HTMLFormElement.\n *\n * To permit this assertion to pass in the context of tests where elements might\n * be mocked, also accepts objects that are not a subtype of Element.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!HTMLFormElement}\n */\ngoog.dom.asserts.assertIsHTMLFormElement = function(o) {\n  return /** @type {!HTMLFormElement} */ (\n      goog.dom.asserts.assertIsElementType_(o, 'HTMLFormElement'));\n};\n\n/**\n * Asserts that a given object is a HTMLFrameElement.\n *\n * To permit this assertion to pass in the context of tests where elements might\n * be mocked, also accepts objects that are not a subtype of Element.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!HTMLFrameElement}\n */\ngoog.dom.asserts.assertIsHTMLFrameElement = function(o) {\n  return /** @type {!HTMLFrameElement} */ (\n      goog.dom.asserts.assertIsElementType_(o, 'HTMLFrameElement'));\n};\n\n/**\n * Asserts that a given object is a HTMLIFrameElement.\n *\n * To permit this assertion to pass in the context of tests where elements might\n * be mocked, also accepts objects that are not a subtype of Element.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!HTMLIFrameElement}\n */\ngoog.dom.asserts.assertIsHTMLIFrameElement = function(o) {\n  return /** @type {!HTMLIFrameElement} */ (\n      goog.dom.asserts.assertIsElementType_(o, 'HTMLIFrameElement'));\n};\n\n/**\n * Asserts that a given object is a HTMLObjectElement.\n *\n * To permit this assertion to pass in the context of tests where elements might\n * be mocked, also accepts objects that are not a subtype of Element.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!HTMLObjectElement}\n */\ngoog.dom.asserts.assertIsHTMLObjectElement = function(o) {\n  return /** @type {!HTMLObjectElement} */ (\n      goog.dom.asserts.assertIsElementType_(o, 'HTMLObjectElement'));\n};\n\n/**\n * Asserts that a given object is a HTMLScriptElement.\n *\n * To permit this assertion to pass in the context of tests where elements might\n * be mocked, also accepts objects that are not a subtype of Element.\n *\n * @param {?Object} o The object whose type to assert.\n * @return {!HTMLScriptElement}\n */\ngoog.dom.asserts.assertIsHTMLScriptElement = function(o) {\n  return /** @type {!HTMLScriptElement} */ (\n      goog.dom.asserts.assertIsElementType_(o, 'HTMLScriptElement'));\n};\n\n/**\n * Returns a string representation of a value's type.\n *\n * @param {*} value An object, or primitive.\n * @return {string} The best display name for the value.\n * @private\n */\ngoog.dom.asserts.debugStringForType_ = function(value) {\n  if (goog.isObject(value)) {\n    return value.constructor.displayName || value.constructor.name ||\n        Object.prototype.toString.call(value);\n  } else {\n    return value === undefined ? 'undefined' :\n                                 value === null ? 'null' : typeof value;\n  }\n};\n\n/**\n * Gets window of element.\n * @param {?Object} o\n * @return {!Window}\n * @private\n * @suppress {strictMissingProperties} ownerDocument not defined on Object\n */\ngoog.dom.asserts.getWindow_ = function(o) {\n  var doc = o && o.ownerDocument;\n  var win = doc && /** @type {?Window} */ (doc.defaultView || doc.parentWindow);\n  return win || /** @type {!Window} */ (goog.global);\n};\n","// Copyright 2014 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities for HTML element tag names.\n */\ngoog.provide('goog.dom.tags');\n\ngoog.require('goog.object');\n\n\n/**\n * The void elements specified by\n * http://www.w3.org/TR/html-markup/syntax.html#void-elements.\n * @const @private {!Object<string, boolean>}\n */\ngoog.dom.tags.VOID_TAGS_ = goog.object.createSet(\n    'area', 'base', 'br', 'col', 'command', 'embed', 'hr', 'img', 'input',\n    'keygen', 'link', 'meta', 'param', 'source', 'track', 'wbr');\n\n\n/**\n * Checks whether the tag is void (with no contents allowed and no legal end\n * tag), for example 'br'.\n * @param {string} tagName The tag name in lower case.\n * @return {boolean}\n */\ngoog.dom.tags.isVoidTag = function(tagName) {\n  return goog.dom.tags.VOID_TAGS_[tagName] === true;\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\ngoog.provide('goog.string.TypedString');\n\n\n\n/**\n * Wrapper for strings that conform to a data type or language.\n *\n * Implementations of this interface are wrappers for strings, and typically\n * associate a type contract with the wrapped string.  Concrete implementations\n * of this interface may choose to implement additional run-time type checking,\n * see for example `goog.html.SafeHtml`. If available, client code that\n * needs to ensure type membership of an object should use the type's function\n * to assert type membership, such as `goog.html.SafeHtml.unwrap`.\n * @interface\n */\ngoog.string.TypedString = function() {};\n\n\n/**\n * Interface marker of the TypedString interface.\n *\n * This property can be used to determine at runtime whether or not an object\n * implements this interface.  All implementations of this interface set this\n * property to `true`.\n * @type {boolean}\n */\ngoog.string.TypedString.prototype.implementsGoogStringTypedString;\n\n\n/**\n * Retrieves this wrapped string's value.\n * @return {string} The wrapped string's value.\n */\ngoog.string.TypedString.prototype.getTypedStringValue;\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\ngoog.provide('goog.string.Const');\n\ngoog.require('goog.asserts');\ngoog.require('goog.string.TypedString');\n\n\n\n/**\n * Wrapper for compile-time-constant strings.\n *\n * Const is a wrapper for strings that can only be created from program\n * constants (i.e., string literals).  This property relies on a custom Closure\n * compiler check that `goog.string.Const.from` is only invoked on\n * compile-time-constant expressions.\n *\n * Const is useful in APIs whose correct and secure use requires that certain\n * arguments are not attacker controlled: Compile-time constants are inherently\n * under the control of the application and not under control of external\n * attackers, and hence are safe to use in such contexts.\n *\n * Instances of this type must be created via its factory method\n * `goog.string.Const.from` and not by invoking its constructor.  The\n * constructor intentionally takes no parameters and the type is immutable;\n * hence only a default instance corresponding to the empty string can be\n * obtained via constructor invocation.\n *\n * @see goog.string.Const#from\n * @constructor\n * @final\n * @struct\n * @implements {goog.string.TypedString}\n */\ngoog.string.Const = function() {\n  /**\n   * The wrapped value of this Const object.  The field has a purposely ugly\n   * name to make (non-compiled) code that attempts to directly access this\n   * field stand out.\n   * @private {string}\n   */\n  this.stringConstValueWithSecurityContract__googStringSecurityPrivate_ = '';\n\n  /**\n   * A type marker used to implement additional run-time type checking.\n   * @see goog.string.Const#unwrap\n   * @const {!Object}\n   * @private\n   */\n  this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_ =\n      goog.string.Const.TYPE_MARKER_;\n};\n\n\n/**\n * @override\n * @const\n */\ngoog.string.Const.prototype.implementsGoogStringTypedString = true;\n\n\n/**\n * Returns this Const's value a string.\n *\n * IMPORTANT: In code where it is security-relevant that an object's type is\n * indeed `goog.string.Const`, use `goog.string.Const.unwrap`\n * instead of this method.\n *\n * @see goog.string.Const#unwrap\n * @override\n */\ngoog.string.Const.prototype.getTypedStringValue = function() {\n  return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_;\n};\n\n\n/**\n * Returns a debug-string representation of this value.\n *\n * To obtain the actual string value wrapped inside an object of this type,\n * use `goog.string.Const.unwrap`.\n *\n * @see goog.string.Const#unwrap\n * @override\n */\ngoog.string.Const.prototype.toString = function() {\n  return 'Const{' +\n      this.stringConstValueWithSecurityContract__googStringSecurityPrivate_ +\n      '}';\n};\n\n\n/**\n * Performs a runtime check that the provided object is indeed an instance\n * of `goog.string.Const`, and returns its value.\n * @param {!goog.string.Const} stringConst The object to extract from.\n * @return {string} The Const object's contained string, unless the run-time\n *     type check fails. In that case, `unwrap` returns an innocuous\n *     string, or, if assertions are enabled, throws\n *     `goog.asserts.AssertionError`.\n */\ngoog.string.Const.unwrap = function(stringConst) {\n  // Perform additional run-time type-checking to ensure that stringConst is\n  // indeed an instance of the expected type.  This provides some additional\n  // protection against security bugs due to application code that disables type\n  // checks.\n  if (stringConst instanceof goog.string.Const &&\n      stringConst.constructor === goog.string.Const &&\n      stringConst.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_ ===\n          goog.string.Const.TYPE_MARKER_) {\n    return stringConst\n        .stringConstValueWithSecurityContract__googStringSecurityPrivate_;\n  } else {\n    goog.asserts.fail(\n        'expected object of type Const, got \\'' + stringConst + '\\'');\n    return 'type_error:Const';\n  }\n};\n\n\n/**\n * Creates a Const object from a compile-time constant string.\n *\n * It is illegal to invoke this function on an expression whose\n * compile-time-contant value cannot be determined by the Closure compiler.\n *\n * Correct invocations include,\n * <pre>\n *   var s = goog.string.Const.from('hello');\n *   var t = goog.string.Const.from('hello' + 'world');\n * </pre>\n *\n * In contrast, the following are illegal:\n * <pre>\n *   var s = goog.string.Const.from(getHello());\n *   var t = goog.string.Const.from('hello' + world);\n * </pre>\n *\n * @param {string} s A constant string from which to create a Const.\n * @return {!goog.string.Const} A Const object initialized to stringConst.\n */\ngoog.string.Const.from = function(s) {\n  return goog.string.Const.create__googStringSecurityPrivate_(s);\n};\n\n\n/**\n * Type marker for the Const type, used to implement additional run-time\n * type checking.\n * @const {!Object}\n * @private\n */\ngoog.string.Const.TYPE_MARKER_ = {};\n\n\n/**\n * Utility method to create Const instances.\n * @param {string} s The string to initialize the Const object with.\n * @return {!goog.string.Const} The initialized Const object.\n * @private\n */\ngoog.string.Const.create__googStringSecurityPrivate_ = function(s) {\n  var stringConst = new goog.string.Const();\n  stringConst.stringConstValueWithSecurityContract__googStringSecurityPrivate_ =\n      s;\n  return stringConst;\n};\n\n\n/**\n * A Const instance wrapping the empty string.\n * @const {!goog.string.Const}\n */\ngoog.string.Const.EMPTY = goog.string.Const.from('');\n","// Copyright 2014 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview The SafeScript type and its builders.\n *\n * TODO(xtof): Link to document stating type contract.\n */\n\ngoog.provide('goog.html.SafeScript');\n\ngoog.require('goog.asserts');\ngoog.require('goog.string.Const');\ngoog.require('goog.string.TypedString');\n\n\n\n/**\n * A string-like object which represents JavaScript code and that carries the\n * security type contract that its value, as a string, will not cause execution\n * of unconstrained attacker controlled code (XSS) when evaluated as JavaScript\n * in a browser.\n *\n * Instances of this type must be created via the factory method\n * `goog.html.SafeScript.fromConstant` and not by invoking its\n * constructor. The constructor intentionally takes no parameters and the type\n * is immutable; hence only a default instance corresponding to the empty string\n * can be obtained via constructor invocation.\n *\n * A SafeScript's string representation can safely be interpolated as the\n * content of a script element within HTML. The SafeScript string should not be\n * escaped before interpolation.\n *\n * Note that the SafeScript might contain text that is attacker-controlled but\n * that text should have been interpolated with appropriate escaping,\n * sanitization and/or validation into the right location in the script, such\n * that it is highly constrained in its effect (for example, it had to match a\n * set of whitelisted words).\n *\n * A SafeScript can be constructed via security-reviewed unchecked\n * conversions. In this case producers of SafeScript must ensure themselves that\n * the SafeScript does not contain unsafe script. Note in particular that\n * {@code &lt;} is dangerous, even when inside JavaScript strings, and so should\n * always be forbidden or JavaScript escaped in user controlled input. For\n * example, if {@code &lt;/script&gt;&lt;script&gt;evil&lt;/script&gt;\"} were\n * interpolated inside a JavaScript string, it would break out of the context\n * of the original script element and `evil` would execute. Also note\n * that within an HTML script (raw text) element, HTML character references,\n * such as \"&lt;\" are not allowed. See\n * http://www.w3.org/TR/html5/scripting-1.html#restrictions-for-contents-of-script-elements.\n *\n * @see goog.html.SafeScript#fromConstant\n * @constructor\n * @final\n * @struct\n * @implements {goog.string.TypedString}\n */\ngoog.html.SafeScript = function() {\n  /**\n   * The contained value of this SafeScript.  The field has a purposely\n   * ugly name to make (non-compiled) code that attempts to directly access this\n   * field stand out.\n   * @private {string}\n   */\n  this.privateDoNotAccessOrElseSafeScriptWrappedValue_ = '';\n\n  /**\n   * A type marker used to implement additional run-time type checking.\n   * @see goog.html.SafeScript#unwrap\n   * @const {!Object}\n   * @private\n   */\n  this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ =\n      goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_;\n};\n\n\n/**\n * @override\n * @const\n */\ngoog.html.SafeScript.prototype.implementsGoogStringTypedString = true;\n\n\n/**\n * Type marker for the SafeScript type, used to implement additional\n * run-time type checking.\n * @const {!Object}\n * @private\n */\ngoog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {};\n\n\n/**\n * Creates a SafeScript object from a compile-time constant string.\n *\n * @param {!goog.string.Const} script A compile-time-constant string from which\n *     to create a SafeScript.\n * @return {!goog.html.SafeScript} A SafeScript object initialized to\n *     `script`.\n */\ngoog.html.SafeScript.fromConstant = function(script) {\n  var scriptString = goog.string.Const.unwrap(script);\n  if (scriptString.length === 0) {\n    return goog.html.SafeScript.EMPTY;\n  }\n  return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(\n      scriptString);\n};\n\n\n/**\n * Creates a SafeScript from a compile-time constant string but with arguments\n * that can vary at run-time. The code argument should be formatted as an\n * inline function (see example below). The arguments will be JSON-encoded and\n * provided as input to the function specified in code.\n *\n * Example Usage:\n *\n *     let safeScript = SafeScript.fromConstantAndArgs(\n *         Const.from('function(arg1, arg2) { doSomething(arg1, arg2); }'),\n *         arg1,\n *         arg2);\n *\n * This produces a SafeScript equivalent to the following:\n *\n *     (function(arg1, arg2) { doSomething(arg1, arg2); })(\"value1\", \"value2\");\n *\n * @param {!goog.string.Const} code\n * @param {...*} var_args\n * @return {!goog.html.SafeScript}\n */\ngoog.html.SafeScript.fromConstantAndArgs = function(code, var_args) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) {\n    args.push(goog.html.SafeScript.stringify_(arguments[i]));\n  }\n  return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(\n      '(' + goog.string.Const.unwrap(code) + ')(' + args.join(', ') + ');');\n};\n\n\n/**\n * Returns this SafeScript's value as a string.\n *\n * IMPORTANT: In code where it is security relevant that an object's type is\n * indeed `SafeScript`, use `goog.html.SafeScript.unwrap` instead of\n * this method. If in doubt, assume that it's security relevant. In particular,\n * note that goog.html functions which return a goog.html type do not guarantee\n * the returned instance is of the right type. For example:\n *\n * <pre>\n * var fakeSafeHtml = new String('fake');\n * fakeSafeHtml.__proto__ = goog.html.SafeHtml.prototype;\n * var newSafeHtml = goog.html.SafeHtml.htmlEscape(fakeSafeHtml);\n * // newSafeHtml is just an alias for fakeSafeHtml, it's passed through by\n * // goog.html.SafeHtml.htmlEscape() as fakeSafeHtml\n * // instanceof goog.html.SafeHtml.\n * </pre>\n *\n * @see goog.html.SafeScript#unwrap\n * @override\n */\ngoog.html.SafeScript.prototype.getTypedStringValue = function() {\n  return this.privateDoNotAccessOrElseSafeScriptWrappedValue_;\n};\n\n\nif (goog.DEBUG) {\n  /**\n   * Returns a debug string-representation of this value.\n   *\n   * To obtain the actual string value wrapped in a SafeScript, use\n   * `goog.html.SafeScript.unwrap`.\n   *\n   * @see goog.html.SafeScript#unwrap\n   * @override\n   */\n  goog.html.SafeScript.prototype.toString = function() {\n    return 'SafeScript{' +\n        this.privateDoNotAccessOrElseSafeScriptWrappedValue_ + '}';\n  };\n}\n\n\n/**\n * Performs a runtime check that the provided object is indeed a\n * SafeScript object, and returns its value.\n *\n * @param {!goog.html.SafeScript} safeScript The object to extract from.\n * @return {string} The safeScript object's contained string, unless\n *     the run-time type check fails. In that case, `unwrap` returns an\n *     innocuous string, or, if assertions are enabled, throws\n *     `goog.asserts.AssertionError`.\n */\ngoog.html.SafeScript.unwrap = function(safeScript) {\n  // Perform additional Run-time type-checking to ensure that\n  // safeScript is indeed an instance of the expected type.  This\n  // provides some additional protection against security bugs due to\n  // application code that disables type checks.\n  // Specifically, the following checks are performed:\n  // 1. The object is an instance of the expected type.\n  // 2. The object is not an instance of a subclass.\n  // 3. The object carries a type marker for the expected type. \"Faking\" an\n  // object requires a reference to the type marker, which has names intended\n  // to stand out in code reviews.\n  if (safeScript instanceof goog.html.SafeScript &&\n      safeScript.constructor === goog.html.SafeScript &&\n      safeScript.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ===\n          goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_) {\n    return safeScript.privateDoNotAccessOrElseSafeScriptWrappedValue_;\n  } else {\n    goog.asserts.fail('expected object of type SafeScript, got \\'' +\n        safeScript + '\\' of type ' + goog.typeOf(safeScript));\n    return 'type_error:SafeScript';\n  }\n};\n\n\n/**\n * Converts the given value to a embeddabel JSON string and returns it. The\n * resulting string can be embedded in HTML because the '<' character is\n * encoded.\n *\n * @param {*} val\n * @return {string}\n * @private\n */\ngoog.html.SafeScript.stringify_ = function(val) {\n  var json = JSON.stringify(val);\n  return json.replace(/</g, '\\\\x3c');\n};\n\n/**\n * Package-internal utility method to create SafeScript instances.\n *\n * @param {string} script The string to initialize the SafeScript object with.\n * @return {!goog.html.SafeScript} The initialized SafeScript object.\n * @package\n */\ngoog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse =\n    function(script) {\n  return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(\n      script);\n};\n\n\n/**\n * Called from createSafeScriptSecurityPrivateDoNotAccessOrElse(). This\n * method exists only so that the compiler can dead code eliminate static\n * fields (like EMPTY) when they're not accessed.\n * @param {string} script\n * @return {!goog.html.SafeScript}\n * @private\n */\ngoog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_ = function(\n    script) {\n  this.privateDoNotAccessOrElseSafeScriptWrappedValue_ = script;\n  return this;\n};\n\n\n/**\n * A SafeScript instance corresponding to the empty string.\n * @const {!goog.html.SafeScript}\n */\ngoog.html.SafeScript.EMPTY =\n    goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse('');\n","// Copyright 2015 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Wrapper for URL and its createObjectUrl and revokeObjectUrl\n * methods that are part of the HTML5 File API.\n */\n\ngoog.provide('goog.fs.url');\n\n\n/**\n * Creates a blob URL for a blob object.\n * Throws an error if the browser does not support Object Urls.\n *\n * @param {!Blob} blob The object for which to create the URL.\n * @return {string} The URL for the object.\n */\ngoog.fs.url.createObjectUrl = function(blob) {\n  return goog.fs.url.getUrlObject_().createObjectURL(blob);\n};\n\n\n/**\n * Revokes a URL created by {@link goog.fs.url.createObjectUrl}.\n * Throws an error if the browser does not support Object Urls.\n *\n * @param {string} url The URL to revoke.\n */\ngoog.fs.url.revokeObjectUrl = function(url) {\n  goog.fs.url.getUrlObject_().revokeObjectURL(url);\n};\n\n\n/**\n * @typedef {{createObjectURL: (function(!Blob): string),\n *            revokeObjectURL: function(string): void}}\n */\ngoog.fs.url.UrlObject_;\n\n\n/**\n * Get the object that has the createObjectURL and revokeObjectURL functions for\n * this browser.\n *\n * @return {goog.fs.url.UrlObject_} The object for this browser.\n * @private\n */\ngoog.fs.url.getUrlObject_ = function() {\n  var urlObject = goog.fs.url.findUrlObject_();\n  if (urlObject != null) {\n    return urlObject;\n  } else {\n    throw new Error('This browser doesn\\'t seem to support blob URLs');\n  }\n};\n\n\n/**\n * Finds the object that has the createObjectURL and revokeObjectURL functions\n * for this browser.\n *\n * @return {?goog.fs.url.UrlObject_} The object for this browser or null if the\n *     browser does not support Object Urls.\n * @private\n */\ngoog.fs.url.findUrlObject_ = function() {\n  // This is what the spec says to do\n  // http://dev.w3.org/2006/webapi/FileAPI/#dfn-createObjectURL\n  if (goog.isDef(goog.global.URL) &&\n      goog.isDef(goog.global.URL.createObjectURL)) {\n    return /** @type {goog.fs.url.UrlObject_} */ (goog.global.URL);\n    // This is what Chrome does (as of 10.0.648.6 dev)\n  } else if (\n      goog.isDef(goog.global.webkitURL) &&\n      goog.isDef(goog.global.webkitURL.createObjectURL)) {\n    return /** @type {goog.fs.url.UrlObject_} */ (goog.global.webkitURL);\n    // This is what the spec used to say to do\n  } else if (goog.isDef(goog.global.createObjectURL)) {\n    return /** @type {goog.fs.url.UrlObject_} */ (goog.global);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Checks whether this browser supports Object Urls. If not, calls to\n * createObjectUrl and revokeObjectUrl will result in an error.\n *\n * @return {boolean} True if this browser supports Object Urls.\n */\ngoog.fs.url.browserSupportsObjectUrls = function() {\n  return goog.fs.url.findUrlObject_() != null;\n};\n","// Copyright 2007 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utility functions for supporting Bidi issues.\n */\n\n\n/**\n * Namespace for bidi supporting functions.\n */\ngoog.provide('goog.i18n.bidi');\ngoog.provide('goog.i18n.bidi.Dir');\ngoog.provide('goog.i18n.bidi.DirectionalString');\ngoog.provide('goog.i18n.bidi.Format');\n\n\n/**\n * @define {boolean} FORCE_RTL forces the {@link goog.i18n.bidi.IS_RTL} constant\n * to say that the current locale is a RTL locale.  This should only be used\n * if you want to override the default behavior for deciding whether the\n * current locale is RTL or not.\n *\n * {@see goog.i18n.bidi.IS_RTL}\n */\ngoog.define('goog.i18n.bidi.FORCE_RTL', false);\n\n\n/**\n * Constant that defines whether or not the current locale is a RTL locale.\n * If {@link goog.i18n.bidi.FORCE_RTL} is not true, this constant will default\n * to check that {@link goog.LOCALE} is one of a few major RTL locales.\n *\n * <p>This is designed to be a maximally efficient compile-time constant. For\n * example, for the default goog.LOCALE, compiling\n * \"if (goog.i18n.bidi.IS_RTL) alert('rtl') else {}\" should produce no code. It\n * is this design consideration that limits the implementation to only\n * supporting a few major RTL locales, as opposed to the broader repertoire of\n * something like goog.i18n.bidi.isRtlLanguage.\n *\n * <p>Since this constant refers to the directionality of the locale, it is up\n * to the caller to determine if this constant should also be used for the\n * direction of the UI.\n *\n * {@see goog.LOCALE}\n *\n * @type {boolean}\n *\n * TODO(user): write a test that checks that this is a compile-time constant.\n */\ngoog.i18n.bidi.IS_RTL = goog.i18n.bidi.FORCE_RTL ||\n    ((goog.LOCALE.substring(0, 2).toLowerCase() == 'ar' ||\n      goog.LOCALE.substring(0, 2).toLowerCase() == 'fa' ||\n      goog.LOCALE.substring(0, 2).toLowerCase() == 'he' ||\n      goog.LOCALE.substring(0, 2).toLowerCase() == 'iw' ||\n      goog.LOCALE.substring(0, 2).toLowerCase() == 'ps' ||\n      goog.LOCALE.substring(0, 2).toLowerCase() == 'sd' ||\n      goog.LOCALE.substring(0, 2).toLowerCase() == 'ug' ||\n      goog.LOCALE.substring(0, 2).toLowerCase() == 'ur' ||\n      goog.LOCALE.substring(0, 2).toLowerCase() == 'yi') &&\n     (goog.LOCALE.length == 2 || goog.LOCALE.substring(2, 3) == '-' ||\n      goog.LOCALE.substring(2, 3) == '_')) ||\n    (goog.LOCALE.length >= 3 &&\n     goog.LOCALE.substring(0, 3).toLowerCase() == 'ckb' &&\n     (goog.LOCALE.length == 3 || goog.LOCALE.substring(3, 4) == '-' ||\n      goog.LOCALE.substring(3, 4) == '_'));\n\n\n/**\n * Unicode formatting characters and directionality string constants.\n * @enum {string}\n */\ngoog.i18n.bidi.Format = {\n  /** Unicode \"Left-To-Right Embedding\" (LRE) character. */\n  LRE: '\\u202A',\n  /** Unicode \"Right-To-Left Embedding\" (RLE) character. */\n  RLE: '\\u202B',\n  /** Unicode \"Pop Directional Formatting\" (PDF) character. */\n  PDF: '\\u202C',\n  /** Unicode \"Left-To-Right Mark\" (LRM) character. */\n  LRM: '\\u200E',\n  /** Unicode \"Right-To-Left Mark\" (RLM) character. */\n  RLM: '\\u200F'\n};\n\n\n/**\n * Directionality enum.\n * @enum {number}\n */\ngoog.i18n.bidi.Dir = {\n  /**\n   * Left-to-right.\n   */\n  LTR: 1,\n\n  /**\n   * Right-to-left.\n   */\n  RTL: -1,\n\n  /**\n   * Neither left-to-right nor right-to-left.\n   */\n  NEUTRAL: 0\n};\n\n\n/**\n * 'right' string constant.\n * @type {string}\n */\ngoog.i18n.bidi.RIGHT = 'right';\n\n\n/**\n * 'left' string constant.\n * @type {string}\n */\ngoog.i18n.bidi.LEFT = 'left';\n\n\n/**\n * 'left' if locale is RTL, 'right' if not.\n * @type {string}\n */\ngoog.i18n.bidi.I18N_RIGHT =\n    goog.i18n.bidi.IS_RTL ? goog.i18n.bidi.LEFT : goog.i18n.bidi.RIGHT;\n\n\n/**\n * 'right' if locale is RTL, 'left' if not.\n * @type {string}\n */\ngoog.i18n.bidi.I18N_LEFT =\n    goog.i18n.bidi.IS_RTL ? goog.i18n.bidi.RIGHT : goog.i18n.bidi.LEFT;\n\n\n/**\n * Convert a directionality given in various formats to a goog.i18n.bidi.Dir\n * constant. Useful for interaction with different standards of directionality\n * representation.\n *\n * @param {goog.i18n.bidi.Dir|number|boolean|null} givenDir Directionality given\n *     in one of the following formats:\n *     1. A goog.i18n.bidi.Dir constant.\n *     2. A number (positive = LTR, negative = RTL, 0 = neutral).\n *     3. A boolean (true = RTL, false = LTR).\n *     4. A null for unknown directionality.\n * @param {boolean=} opt_noNeutral Whether a givenDir of zero or\n *     goog.i18n.bidi.Dir.NEUTRAL should be treated as null, i.e. unknown, in\n *     order to preserve legacy behavior.\n * @return {?goog.i18n.bidi.Dir} A goog.i18n.bidi.Dir constant matching the\n *     given directionality. If given null, returns null (i.e. unknown).\n */\ngoog.i18n.bidi.toDir = function(givenDir, opt_noNeutral) {\n  if (typeof givenDir == 'number') {\n    // This includes the non-null goog.i18n.bidi.Dir case.\n    return givenDir > 0 ? goog.i18n.bidi.Dir.LTR : givenDir < 0 ?\n                          goog.i18n.bidi.Dir.RTL :\n                          opt_noNeutral ? null : goog.i18n.bidi.Dir.NEUTRAL;\n  } else if (givenDir == null) {\n    return null;\n  } else {\n    // Must be typeof givenDir == 'boolean'.\n    return givenDir ? goog.i18n.bidi.Dir.RTL : goog.i18n.bidi.Dir.LTR;\n  }\n};\n\n\n/**\n * A practical pattern to identify strong LTR characters. This pattern is not\n * theoretically correct according to the Unicode standard. It is simplified for\n * performance and small code size.\n * @type {string}\n * @private\n */\ngoog.i18n.bidi.ltrChars_ =\n    'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF' +\n    '\\u200E\\u2C00-\\uFB1C\\uFE00-\\uFE6F\\uFEFD-\\uFFFF';\n\n\n/**\n * A practical pattern to identify strong RTL character. This pattern is not\n * theoretically correct according to the Unicode standard. It is simplified\n * for performance and small code size.\n * @type {string}\n * @private\n */\ngoog.i18n.bidi.rtlChars_ =\n    '\\u0591-\\u06EF\\u06FA-\\u07FF\\u200F\\uFB1D-\\uFDFF\\uFE70-\\uFEFC';\n\n\n/**\n * Simplified regular expression for an HTML tag (opening or closing) or an HTML\n * escape. We might want to skip over such expressions when estimating the text\n * directionality.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.htmlSkipReg_ = /<[^>]*>|&[^;]+;/g;\n\n\n/**\n * Returns the input text with spaces instead of HTML tags or HTML escapes, if\n * opt_isStripNeeded is true. Else returns the input as is.\n * Useful for text directionality estimation.\n * Note: the function should not be used in other contexts; it is not 100%\n * correct, but rather a good-enough implementation for directionality\n * estimation purposes.\n * @param {string} str The given string.\n * @param {boolean=} opt_isStripNeeded Whether to perform the stripping.\n *     Default: false (to retain consistency with calling functions).\n * @return {string} The given string cleaned of HTML tags / escapes.\n * @private\n */\ngoog.i18n.bidi.stripHtmlIfNeeded_ = function(str, opt_isStripNeeded) {\n  return opt_isStripNeeded ? str.replace(goog.i18n.bidi.htmlSkipReg_, '') : str;\n};\n\n\n/**\n * Regular expression to check for RTL characters.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.rtlCharReg_ = new RegExp('[' + goog.i18n.bidi.rtlChars_ + ']');\n\n\n/**\n * Regular expression to check for LTR characters.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.ltrCharReg_ = new RegExp('[' + goog.i18n.bidi.ltrChars_ + ']');\n\n\n/**\n * Test whether the given string has any RTL characters in it.\n * @param {string} str The given string that need to be tested.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {boolean} Whether the string contains RTL characters.\n */\ngoog.i18n.bidi.hasAnyRtl = function(str, opt_isHtml) {\n  return goog.i18n.bidi.rtlCharReg_.test(\n      goog.i18n.bidi.stripHtmlIfNeeded_(str, opt_isHtml));\n};\n\n\n/**\n * Test whether the given string has any RTL characters in it.\n * @param {string} str The given string that need to be tested.\n * @return {boolean} Whether the string contains RTL characters.\n * @deprecated Use hasAnyRtl.\n */\ngoog.i18n.bidi.hasRtlChar = goog.i18n.bidi.hasAnyRtl;\n\n\n/**\n * Test whether the given string has any LTR characters in it.\n * @param {string} str The given string that need to be tested.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {boolean} Whether the string contains LTR characters.\n */\ngoog.i18n.bidi.hasAnyLtr = function(str, opt_isHtml) {\n  return goog.i18n.bidi.ltrCharReg_.test(\n      goog.i18n.bidi.stripHtmlIfNeeded_(str, opt_isHtml));\n};\n\n\n/**\n * Regular expression pattern to check if the first character in the string\n * is LTR.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.ltrRe_ = new RegExp('^[' + goog.i18n.bidi.ltrChars_ + ']');\n\n\n/**\n * Regular expression pattern to check if the first character in the string\n * is RTL.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.rtlRe_ = new RegExp('^[' + goog.i18n.bidi.rtlChars_ + ']');\n\n\n/**\n * Check if the first character in the string is RTL or not.\n * @param {string} str The given string that need to be tested.\n * @return {boolean} Whether the first character in str is an RTL char.\n */\ngoog.i18n.bidi.isRtlChar = function(str) {\n  return goog.i18n.bidi.rtlRe_.test(str);\n};\n\n\n/**\n * Check if the first character in the string is LTR or not.\n * @param {string} str The given string that need to be tested.\n * @return {boolean} Whether the first character in str is an LTR char.\n */\ngoog.i18n.bidi.isLtrChar = function(str) {\n  return goog.i18n.bidi.ltrRe_.test(str);\n};\n\n\n/**\n * Check if the first character in the string is neutral or not.\n * @param {string} str The given string that need to be tested.\n * @return {boolean} Whether the first character in str is a neutral char.\n */\ngoog.i18n.bidi.isNeutralChar = function(str) {\n  return !goog.i18n.bidi.isLtrChar(str) && !goog.i18n.bidi.isRtlChar(str);\n};\n\n\n/**\n * Regular expressions to check if a piece of text is of LTR directionality\n * on first character with strong directionality.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.ltrDirCheckRe_ = new RegExp(\n    '^[^' + goog.i18n.bidi.rtlChars_ + ']*[' + goog.i18n.bidi.ltrChars_ + ']');\n\n\n/**\n * Regular expressions to check if a piece of text is of RTL directionality\n * on first character with strong directionality.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.rtlDirCheckRe_ = new RegExp(\n    '^[^' + goog.i18n.bidi.ltrChars_ + ']*[' + goog.i18n.bidi.rtlChars_ + ']');\n\n\n/**\n * Check whether the first strongly directional character (if any) is RTL.\n * @param {string} str String being checked.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {boolean} Whether RTL directionality is detected using the first\n *     strongly-directional character method.\n */\ngoog.i18n.bidi.startsWithRtl = function(str, opt_isHtml) {\n  return goog.i18n.bidi.rtlDirCheckRe_.test(\n      goog.i18n.bidi.stripHtmlIfNeeded_(str, opt_isHtml));\n};\n\n\n/**\n * Check whether the first strongly directional character (if any) is RTL.\n * @param {string} str String being checked.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {boolean} Whether RTL directionality is detected using the first\n *     strongly-directional character method.\n * @deprecated Use startsWithRtl.\n */\ngoog.i18n.bidi.isRtlText = goog.i18n.bidi.startsWithRtl;\n\n\n/**\n * Check whether the first strongly directional character (if any) is LTR.\n * @param {string} str String being checked.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {boolean} Whether LTR directionality is detected using the first\n *     strongly-directional character method.\n */\ngoog.i18n.bidi.startsWithLtr = function(str, opt_isHtml) {\n  return goog.i18n.bidi.ltrDirCheckRe_.test(\n      goog.i18n.bidi.stripHtmlIfNeeded_(str, opt_isHtml));\n};\n\n\n/**\n * Check whether the first strongly directional character (if any) is LTR.\n * @param {string} str String being checked.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {boolean} Whether LTR directionality is detected using the first\n *     strongly-directional character method.\n * @deprecated Use startsWithLtr.\n */\ngoog.i18n.bidi.isLtrText = goog.i18n.bidi.startsWithLtr;\n\n\n/**\n * Regular expression to check if a string looks like something that must\n * always be LTR even in RTL text, e.g. a URL. When estimating the\n * directionality of text containing these, we treat these as weakly LTR,\n * like numbers.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.isRequiredLtrRe_ = /^http:\\/\\/.*/;\n\n\n/**\n * Check whether the input string either contains no strongly directional\n * characters or looks like a url.\n * @param {string} str String being checked.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {boolean} Whether neutral directionality is detected.\n */\ngoog.i18n.bidi.isNeutralText = function(str, opt_isHtml) {\n  str = goog.i18n.bidi.stripHtmlIfNeeded_(str, opt_isHtml);\n  return goog.i18n.bidi.isRequiredLtrRe_.test(str) ||\n      !goog.i18n.bidi.hasAnyLtr(str) && !goog.i18n.bidi.hasAnyRtl(str);\n};\n\n\n/**\n * Regular expressions to check if the last strongly-directional character in a\n * piece of text is LTR.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.ltrExitDirCheckRe_ = new RegExp(\n    '[' + goog.i18n.bidi.ltrChars_ + '][^' + goog.i18n.bidi.rtlChars_ + ']*$');\n\n\n/**\n * Regular expressions to check if the last strongly-directional character in a\n * piece of text is RTL.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.rtlExitDirCheckRe_ = new RegExp(\n    '[' + goog.i18n.bidi.rtlChars_ + '][^' + goog.i18n.bidi.ltrChars_ + ']*$');\n\n\n/**\n * Check if the exit directionality a piece of text is LTR, i.e. if the last\n * strongly-directional character in the string is LTR.\n * @param {string} str String being checked.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {boolean} Whether LTR exit directionality was detected.\n */\ngoog.i18n.bidi.endsWithLtr = function(str, opt_isHtml) {\n  return goog.i18n.bidi.ltrExitDirCheckRe_.test(\n      goog.i18n.bidi.stripHtmlIfNeeded_(str, opt_isHtml));\n};\n\n\n/**\n * Check if the exit directionality a piece of text is LTR, i.e. if the last\n * strongly-directional character in the string is LTR.\n * @param {string} str String being checked.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {boolean} Whether LTR exit directionality was detected.\n * @deprecated Use endsWithLtr.\n */\ngoog.i18n.bidi.isLtrExitText = goog.i18n.bidi.endsWithLtr;\n\n\n/**\n * Check if the exit directionality a piece of text is RTL, i.e. if the last\n * strongly-directional character in the string is RTL.\n * @param {string} str String being checked.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {boolean} Whether RTL exit directionality was detected.\n */\ngoog.i18n.bidi.endsWithRtl = function(str, opt_isHtml) {\n  return goog.i18n.bidi.rtlExitDirCheckRe_.test(\n      goog.i18n.bidi.stripHtmlIfNeeded_(str, opt_isHtml));\n};\n\n\n/**\n * Check if the exit directionality a piece of text is RTL, i.e. if the last\n * strongly-directional character in the string is RTL.\n * @param {string} str String being checked.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {boolean} Whether RTL exit directionality was detected.\n * @deprecated Use endsWithRtl.\n */\ngoog.i18n.bidi.isRtlExitText = goog.i18n.bidi.endsWithRtl;\n\n\n/**\n * A regular expression for matching right-to-left language codes.\n * See {@link #isRtlLanguage} for the design.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.rtlLocalesRe_ = new RegExp(\n    '^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|' +\n        '.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))' +\n        '(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)',\n    'i');\n\n\n/**\n * Check if a BCP 47 / III language code indicates an RTL language, i.e. either:\n * - a language code explicitly specifying one of the right-to-left scripts,\n *   e.g. \"az-Arab\", or<p>\n * - a language code specifying one of the languages normally written in a\n *   right-to-left script, e.g. \"fa\" (Farsi), except ones explicitly specifying\n *   Latin or Cyrillic script (which are the usual LTR alternatives).<p>\n * The list of right-to-left scripts appears in the 100-199 range in\n * http://www.unicode.org/iso15924/iso15924-num.html, of which Arabic and\n * Hebrew are by far the most widely used. We also recognize Thaana, N'Ko, and\n * Tifinagh, which also have significant modern usage. The rest (Syriac,\n * Samaritan, Mandaic, etc.) seem to have extremely limited or no modern usage\n * and are not recognized to save on code size.\n * The languages usually written in a right-to-left script are taken as those\n * with Suppress-Script: Hebr|Arab|Thaa|Nkoo|Tfng  in\n * http://www.iana.org/assignments/language-subtag-registry,\n * as well as Central (or Sorani) Kurdish (ckb), Sindhi (sd) and Uyghur (ug).\n * Other subtags of the language code, e.g. regions like EG (Egypt), are\n * ignored.\n * @param {string} lang BCP 47 (a.k.a III) language code.\n * @return {boolean} Whether the language code is an RTL language.\n */\ngoog.i18n.bidi.isRtlLanguage = function(lang) {\n  return goog.i18n.bidi.rtlLocalesRe_.test(lang);\n};\n\n\n/**\n * Regular expression for bracket guard replacement in text.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.bracketGuardTextRe_ =\n    /(\\(.*?\\)+)|(\\[.*?\\]+)|(\\{.*?\\}+)|(<.*?>+)/g;\n\n\n/**\n * Apply bracket guard using LRM and RLM. This is to address the problem of\n * messy bracket display frequently happens in RTL layout.\n * This function works for plain text, not for HTML. In HTML, the opening\n * bracket might be in a different context than the closing bracket (such as\n * an attribute value).\n * @param {string} s The string that need to be processed.\n * @param {boolean=} opt_isRtlContext specifies default direction (usually\n *     direction of the UI).\n * @return {string} The processed string, with all bracket guarded.\n */\ngoog.i18n.bidi.guardBracketInText = function(s, opt_isRtlContext) {\n  var useRtl = opt_isRtlContext === undefined ? goog.i18n.bidi.hasAnyRtl(s) :\n                                                opt_isRtlContext;\n  var mark = useRtl ? goog.i18n.bidi.Format.RLM : goog.i18n.bidi.Format.LRM;\n  return s.replace(goog.i18n.bidi.bracketGuardTextRe_, mark + '$&' + mark);\n};\n\n\n/**\n * Enforce the html snippet in RTL directionality regardless overall context.\n * If the html piece was enclosed by tag, dir will be applied to existing\n * tag, otherwise a span tag will be added as wrapper. For this reason, if\n * html snippet start with with tag, this tag must enclose the whole piece. If\n * the tag already has a dir specified, this new one will override existing\n * one in behavior (tested on FF and IE).\n * @param {string} html The string that need to be processed.\n * @return {string} The processed string, with directionality enforced to RTL.\n */\ngoog.i18n.bidi.enforceRtlInHtml = function(html) {\n  if (html.charAt(0) == '<') {\n    return html.replace(/<\\w+/, '$& dir=rtl');\n  }\n  // '\\n' is important for FF so that it won't incorrectly merge span groups\n  return '\\n<span dir=rtl>' + html + '</span>';\n};\n\n\n/**\n * Enforce RTL on both end of the given text piece using unicode BiDi formatting\n * characters RLE and PDF.\n * @param {string} text The piece of text that need to be wrapped.\n * @return {string} The wrapped string after process.\n */\ngoog.i18n.bidi.enforceRtlInText = function(text) {\n  return goog.i18n.bidi.Format.RLE + text + goog.i18n.bidi.Format.PDF;\n};\n\n\n/**\n * Enforce the html snippet in RTL directionality regardless overall context.\n * If the html piece was enclosed by tag, dir will be applied to existing\n * tag, otherwise a span tag will be added as wrapper. For this reason, if\n * html snippet start with with tag, this tag must enclose the whole piece. If\n * the tag already has a dir specified, this new one will override existing\n * one in behavior (tested on FF and IE).\n * @param {string} html The string that need to be processed.\n * @return {string} The processed string, with directionality enforced to RTL.\n */\ngoog.i18n.bidi.enforceLtrInHtml = function(html) {\n  if (html.charAt(0) == '<') {\n    return html.replace(/<\\w+/, '$& dir=ltr');\n  }\n  // '\\n' is important for FF so that it won't incorrectly merge span groups\n  return '\\n<span dir=ltr>' + html + '</span>';\n};\n\n\n/**\n * Enforce LTR on both end of the given text piece using unicode BiDi formatting\n * characters LRE and PDF.\n * @param {string} text The piece of text that need to be wrapped.\n * @return {string} The wrapped string after process.\n */\ngoog.i18n.bidi.enforceLtrInText = function(text) {\n  return goog.i18n.bidi.Format.LRE + text + goog.i18n.bidi.Format.PDF;\n};\n\n\n/**\n * Regular expression to find dimensions such as \"padding: .3 0.4ex 5px 6;\"\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.dimensionsRe_ =\n    /:\\s*([.\\d][.\\w]*)\\s+([.\\d][.\\w]*)\\s+([.\\d][.\\w]*)\\s+([.\\d][.\\w]*)/g;\n\n\n/**\n * Regular expression for left.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.leftRe_ = /left/gi;\n\n\n/**\n * Regular expression for right.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.rightRe_ = /right/gi;\n\n\n/**\n * Placeholder regular expression for swapping.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.tempRe_ = /%%%%/g;\n\n\n/**\n * Swap location parameters and 'left'/'right' in CSS specification. The\n * processed string will be suited for RTL layout. Though this function can\n * cover most cases, there are always exceptions. It is suggested to put\n * those exceptions in separate group of CSS string.\n * @param {string} cssStr CSS spefication string.\n * @return {string} Processed CSS specification string.\n */\ngoog.i18n.bidi.mirrorCSS = function(cssStr) {\n  return cssStr\n      .\n      // reverse dimensions\n      replace(goog.i18n.bidi.dimensionsRe_, ':$1 $4 $3 $2')\n      .replace(goog.i18n.bidi.leftRe_, '%%%%')\n      .  // swap left and right\n      replace(goog.i18n.bidi.rightRe_, goog.i18n.bidi.LEFT)\n      .replace(goog.i18n.bidi.tempRe_, goog.i18n.bidi.RIGHT);\n};\n\n\n/**\n * Regular expression for hebrew double quote substitution, finding quote\n * directly after hebrew characters.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.doubleQuoteSubstituteRe_ = /([\\u0591-\\u05f2])\"/g;\n\n\n/**\n * Regular expression for hebrew single quote substitution, finding quote\n * directly after hebrew characters.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.singleQuoteSubstituteRe_ = /([\\u0591-\\u05f2])'/g;\n\n\n/**\n * Replace the double and single quote directly after a Hebrew character with\n * GERESH and GERSHAYIM. In such case, most likely that's user intention.\n * @param {string} str String that need to be processed.\n * @return {string} Processed string with double/single quote replaced.\n */\ngoog.i18n.bidi.normalizeHebrewQuote = function(str) {\n  return str.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_, '$1\\u05f4')\n      .replace(goog.i18n.bidi.singleQuoteSubstituteRe_, '$1\\u05f3');\n};\n\n\n/**\n * Regular expression to split a string into \"words\" for directionality\n * estimation based on relative word counts.\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.wordSeparatorRe_ = /\\s+/;\n\n\n/**\n * Regular expression to check if a string contains any numerals. Used to\n * differentiate between completely neutral strings and those containing\n * numbers, which are weakly LTR.\n *\n * Native Arabic digits (\\u0660 - \\u0669) are not included because although they\n * do flow left-to-right inside a number, this is the case even if the  overall\n * directionality is RTL, and a mathematical expression using these digits is\n * supposed to flow right-to-left overall, including unary plus and minus\n * appearing to the right of a number, and this does depend on the overall\n * directionality being RTL. The digits used in Farsi (\\u06F0 - \\u06F9), on the\n * other hand, are included, since Farsi math (including unary plus and minus)\n * does flow left-to-right.\n *\n * @type {RegExp}\n * @private\n */\ngoog.i18n.bidi.hasNumeralsRe_ = /[\\d\\u06f0-\\u06f9]/;\n\n\n/**\n * This constant controls threshold of RTL directionality.\n * @type {number}\n * @private\n */\ngoog.i18n.bidi.rtlDetectionThreshold_ = 0.40;\n\n\n/**\n * Estimates the directionality of a string based on relative word counts.\n * If the number of RTL words is above a certain percentage of the total number\n * of strongly directional words, returns RTL.\n * Otherwise, if any words are strongly or weakly LTR, returns LTR.\n * Otherwise, returns UNKNOWN, which is used to mean \"neutral\".\n * Numbers are counted as weakly LTR.\n * @param {string} str The string to be checked.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {goog.i18n.bidi.Dir} Estimated overall directionality of `str`.\n */\ngoog.i18n.bidi.estimateDirection = function(str, opt_isHtml) {\n  var rtlCount = 0;\n  var totalCount = 0;\n  var hasWeaklyLtr = false;\n  var tokens = goog.i18n.bidi.stripHtmlIfNeeded_(str, opt_isHtml)\n                   .split(goog.i18n.bidi.wordSeparatorRe_);\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n    if (goog.i18n.bidi.startsWithRtl(token)) {\n      rtlCount++;\n      totalCount++;\n    } else if (goog.i18n.bidi.isRequiredLtrRe_.test(token)) {\n      hasWeaklyLtr = true;\n    } else if (goog.i18n.bidi.hasAnyLtr(token)) {\n      totalCount++;\n    } else if (goog.i18n.bidi.hasNumeralsRe_.test(token)) {\n      hasWeaklyLtr = true;\n    }\n  }\n\n  return totalCount == 0 ?\n      (hasWeaklyLtr ? goog.i18n.bidi.Dir.LTR : goog.i18n.bidi.Dir.NEUTRAL) :\n      (rtlCount / totalCount > goog.i18n.bidi.rtlDetectionThreshold_ ?\n           goog.i18n.bidi.Dir.RTL :\n           goog.i18n.bidi.Dir.LTR);\n};\n\n\n/**\n * Check the directionality of a piece of text, return true if the piece of\n * text should be laid out in RTL direction.\n * @param {string} str The piece of text that need to be detected.\n * @param {boolean=} opt_isHtml Whether str is HTML / HTML-escaped.\n *     Default: false.\n * @return {boolean} Whether this piece of text should be laid out in RTL.\n */\ngoog.i18n.bidi.detectRtlDirectionality = function(str, opt_isHtml) {\n  return goog.i18n.bidi.estimateDirection(str, opt_isHtml) ==\n      goog.i18n.bidi.Dir.RTL;\n};\n\n\n/**\n * Sets text input element's directionality and text alignment based on a\n * given directionality. Does nothing if the given directionality is unknown or\n * neutral.\n * @param {Element} element Input field element to set directionality to.\n * @param {goog.i18n.bidi.Dir|number|boolean|null} dir Desired directionality,\n *     given in one of the following formats:\n *     1. A goog.i18n.bidi.Dir constant.\n *     2. A number (positive = LRT, negative = RTL, 0 = neutral).\n *     3. A boolean (true = RTL, false = LTR).\n *     4. A null for unknown directionality.\n */\ngoog.i18n.bidi.setElementDirAndAlign = function(element, dir) {\n  if (element) {\n    var htmlElement = /** @type {!HTMLElement} */ (element);\n    dir = goog.i18n.bidi.toDir(dir);\n    if (dir) {\n      htmlElement.style.textAlign = dir == goog.i18n.bidi.Dir.RTL ?\n          goog.i18n.bidi.RIGHT :\n          goog.i18n.bidi.LEFT;\n      htmlElement.dir = dir == goog.i18n.bidi.Dir.RTL ? 'rtl' : 'ltr';\n    }\n  }\n};\n\n\n/**\n * Sets element dir based on estimated directionality of the given text.\n * @param {!Element} element\n * @param {string} text\n */\ngoog.i18n.bidi.setElementDirByTextDirectionality = function(element, text) {\n  var htmlElement = /** @type {!HTMLElement} */ (element);\n  switch (goog.i18n.bidi.estimateDirection(text)) {\n    case (goog.i18n.bidi.Dir.LTR):\n      htmlElement.dir = 'ltr';\n      break;\n    case (goog.i18n.bidi.Dir.RTL):\n      htmlElement.dir = 'rtl';\n      break;\n    default:\n      // Default for no direction, inherit from document.\n      htmlElement.removeAttribute('dir');\n  }\n};\n\n\n\n/**\n * Strings that have an (optional) known direction.\n *\n * Implementations of this interface are string-like objects that carry an\n * attached direction, if known.\n * @interface\n */\ngoog.i18n.bidi.DirectionalString = function() {};\n\n\n/**\n * Interface marker of the DirectionalString interface.\n *\n * This property can be used to determine at runtime whether or not an object\n * implements this interface.  All implementations of this interface set this\n * property to `true`.\n * @type {boolean}\n */\ngoog.i18n.bidi.DirectionalString.prototype\n    .implementsGoogI18nBidiDirectionalString;\n\n\n/**\n * Retrieves this object's known direction (if any).\n * @return {?goog.i18n.bidi.Dir} The known direction. Null if unknown.\n */\ngoog.i18n.bidi.DirectionalString.prototype.getDirection;\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview The TrustedResourceUrl type and its builders.\n *\n * TODO(xtof): Link to document stating type contract.\n */\n\ngoog.provide('goog.html.TrustedResourceUrl');\n\ngoog.require('goog.asserts');\ngoog.require('goog.i18n.bidi.Dir');\ngoog.require('goog.i18n.bidi.DirectionalString');\ngoog.require('goog.string.Const');\ngoog.require('goog.string.TypedString');\n\n\n\n/**\n * A URL which is under application control and from which script, CSS, and\n * other resources that represent executable code, can be fetched.\n *\n * Given that the URL can only be constructed from strings under application\n * control and is used to load resources, bugs resulting in a malformed URL\n * should not have a security impact and are likely to be easily detectable\n * during testing. Given the wide number of non-RFC compliant URLs in use,\n * stricter validation could prevent some applications from being able to use\n * this type.\n *\n * Instances of this type must be created via the factory method,\n * (`fromConstant`, `fromConstants`, `format` or\n * `formatWithParams`), and not by invoking its constructor. The constructor\n * intentionally takes no parameters and the type is immutable; hence only a\n * default instance corresponding to the empty string can be obtained via\n * constructor invocation.\n *\n * @see goog.html.TrustedResourceUrl#fromConstant\n * @constructor\n * @final\n * @struct\n * @implements {goog.i18n.bidi.DirectionalString}\n * @implements {goog.string.TypedString}\n */\ngoog.html.TrustedResourceUrl = function() {\n  /**\n   * The contained value of this TrustedResourceUrl.  The field has a purposely\n   * ugly name to make (non-compiled) code that attempts to directly access this\n   * field stand out.\n   * @private {string}\n   */\n  this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_ = '';\n\n  /**\n   * A type marker used to implement additional run-time type checking.\n   * @see goog.html.TrustedResourceUrl#unwrap\n   * @const {!Object}\n   * @private\n   */\n  this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ =\n      goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_;\n};\n\n\n/**\n * @override\n * @const\n */\ngoog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString = true;\n\n\n/**\n * Returns this TrustedResourceUrl's value as a string.\n *\n * IMPORTANT: In code where it is security relevant that an object's type is\n * indeed `TrustedResourceUrl`, use\n * `goog.html.TrustedResourceUrl.unwrap` instead of this method. If in\n * doubt, assume that it's security relevant. In particular, note that\n * goog.html functions which return a goog.html type do not guarantee that\n * the returned instance is of the right type. For example:\n *\n * <pre>\n * var fakeSafeHtml = new String('fake');\n * fakeSafeHtml.__proto__ = goog.html.SafeHtml.prototype;\n * var newSafeHtml = goog.html.SafeHtml.htmlEscape(fakeSafeHtml);\n * // newSafeHtml is just an alias for fakeSafeHtml, it's passed through by\n * // goog.html.SafeHtml.htmlEscape() as fakeSafeHtml instanceof\n * // goog.html.SafeHtml.\n * </pre>\n *\n * @see goog.html.TrustedResourceUrl#unwrap\n * @override\n */\ngoog.html.TrustedResourceUrl.prototype.getTypedStringValue = function() {\n  return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_;\n};\n\n\n/**\n * @override\n * @const\n */\ngoog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString =\n    true;\n\n\n/**\n * Returns this URLs directionality, which is always `LTR`.\n * @override\n */\ngoog.html.TrustedResourceUrl.prototype.getDirection = function() {\n  return goog.i18n.bidi.Dir.LTR;\n};\n\n\n/**\n * Creates a new TrustedResourceUrl with params added to URL.\n * @param {!Object<string, *>} params Parameters to add to URL. Parameters with\n *     value `null` or `undefined` are skipped. Both keys and values\n *     are encoded. If the value is an array then the same parameter is added\n *     for every element in the array. Note that JavaScript doesn't guarantee\n *     the order of values in an object which might result in non-deterministic\n *     order of the parameters. However, browsers currently preserve the order.\n * @return {!goog.html.TrustedResourceUrl} New TrustedResourceUrl with params.\n */\ngoog.html.TrustedResourceUrl.prototype.cloneWithParams = function(params) {\n  var url = goog.html.TrustedResourceUrl.unwrap(this);\n  var separator = /\\?/.test(url) ? '&' : '?';\n  for (var key in params) {\n    var values = goog.isArray(params[key]) ?\n        /** @type {!Array<*>} */ (params[key]) :\n        [params[key]];\n    for (var i = 0; i < values.length; i++) {\n      if (values[i] == null) {\n        continue;\n      }\n      url += separator + encodeURIComponent(key) + '=' +\n          encodeURIComponent(String(values[i]));\n      separator = '&';\n    }\n  }\n  return goog.html.TrustedResourceUrl\n      .createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(url);\n};\n\n\nif (goog.DEBUG) {\n  /**\n   * Returns a debug string-representation of this value.\n   *\n   * To obtain the actual string value wrapped in a TrustedResourceUrl, use\n   * `goog.html.TrustedResourceUrl.unwrap`.\n   *\n   * @see goog.html.TrustedResourceUrl#unwrap\n   * @override\n   */\n  goog.html.TrustedResourceUrl.prototype.toString = function() {\n    return 'TrustedResourceUrl{' +\n        this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_ + '}';\n  };\n}\n\n\n/**\n * Performs a runtime check that the provided object is indeed a\n * TrustedResourceUrl object, and returns its value.\n *\n * @param {!goog.html.TrustedResourceUrl} trustedResourceUrl The object to\n *     extract from.\n * @return {string} The trustedResourceUrl object's contained string, unless\n *     the run-time type check fails. In that case, `unwrap` returns an\n *     innocuous string, or, if assertions are enabled, throws\n *     `goog.asserts.AssertionError`.\n */\ngoog.html.TrustedResourceUrl.unwrap = function(trustedResourceUrl) {\n  // Perform additional Run-time type-checking to ensure that\n  // trustedResourceUrl is indeed an instance of the expected type.  This\n  // provides some additional protection against security bugs due to\n  // application code that disables type checks.\n  // Specifically, the following checks are performed:\n  // 1. The object is an instance of the expected type.\n  // 2. The object is not an instance of a subclass.\n  // 3. The object carries a type marker for the expected type. \"Faking\" an\n  // object requires a reference to the type marker, which has names intended\n  // to stand out in code reviews.\n  if (trustedResourceUrl instanceof goog.html.TrustedResourceUrl &&\n      trustedResourceUrl.constructor === goog.html.TrustedResourceUrl &&\n      trustedResourceUrl\n              .TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ===\n          goog.html.TrustedResourceUrl\n              .TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_) {\n    return trustedResourceUrl\n        .privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_;\n  } else {\n    goog.asserts.fail('expected object of type TrustedResourceUrl, got \\'' +\n        trustedResourceUrl + '\\' of type ' + goog.typeOf(trustedResourceUrl));\n    return 'type_error:TrustedResourceUrl';\n  }\n};\n\n\n/**\n * Creates a TrustedResourceUrl from a format string and arguments.\n *\n * The arguments for interpolation into the format string map labels to values.\n * Values of type `goog.string.Const` are interpolated without modifcation.\n * Values of other types are cast to string and encoded with\n * encodeURIComponent.\n *\n * `%{<label>}` markers are used in the format string to indicate locations\n * to be interpolated with the valued mapped to the given label. `<label>`\n * must contain only alphanumeric and `_` characters.\n *\n * The format string must start with one of the following:\n * - `https://<origin>/`\n * - `//<origin>/`\n * - `/<pathStart>`\n * - `about:blank#`\n *\n * `<origin>` must contain only alphanumeric or any of the following: `-.:[]`.\n * `<pathStart>` is any character except `/` and `\\`.\n *\n * Example usage:\n *\n *    var url = goog.html.TrustedResourceUrl.format(goog.string.Const.from(\n *        'https://www.google.com/search?q=%{query}'), {'query': searchTerm});\n *\n *    var url = goog.html.TrustedResourceUrl.format(goog.string.Const.from(\n *        '//www.youtube.com/v/%{videoId}?hl=en&fs=1%{autoplay}'), {\n *        'videoId': videoId,\n *        'autoplay': opt_autoplay ?\n *            goog.string.Const.from('&autoplay=1') : goog.string.Const.EMPTY\n *    });\n *\n * While this function can be used to create a TrustedResourceUrl from only\n * constants, fromConstant() and fromConstants() are generally preferable for\n * that purpose.\n *\n * @param {!goog.string.Const} format The format string.\n * @param {!Object<string, (string|number|!goog.string.Const)>} args Mapping\n *     of labels to values to be interpolated into the format string.\n *     goog.string.Const values are interpolated without encoding.\n * @return {!goog.html.TrustedResourceUrl}\n * @throws {!Error} On an invalid format string or if a label used in the\n *     the format string is not present in args.\n */\ngoog.html.TrustedResourceUrl.format = function(format, args) {\n  var formatStr = goog.string.Const.unwrap(format);\n  if (!goog.html.TrustedResourceUrl.BASE_URL_.test(formatStr)) {\n    throw new Error('Invalid TrustedResourceUrl format: ' + formatStr);\n  }\n  var result = formatStr.replace(\n      goog.html.TrustedResourceUrl.FORMAT_MARKER_, function(match, id) {\n        if (!Object.prototype.hasOwnProperty.call(args, id)) {\n          throw new Error(\n              'Found marker, \"' + id + '\", in format string, \"' + formatStr +\n              '\", but no valid label mapping found ' +\n              'in args: ' + JSON.stringify(args));\n        }\n        var arg = args[id];\n        if (arg instanceof goog.string.Const) {\n          return goog.string.Const.unwrap(arg);\n        } else {\n          return encodeURIComponent(String(arg));\n        }\n      });\n  return goog.html.TrustedResourceUrl\n      .createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(result);\n};\n\n\n/**\n * @private @const {!RegExp}\n */\ngoog.html.TrustedResourceUrl.FORMAT_MARKER_ = /%{(\\w+)}/g;\n\n\n/**\n * The URL must be absolute, scheme-relative or path-absolute. So it must\n * start with:\n * - https:// followed by allowed origin characters.\n * - // followed by allowed origin characters.\n * - / not followed by / or \\. There will only be an absolute path.\n *\n * Based on\n * https://url.spec.whatwg.org/commit-snapshots/56b74ce7cca8883eab62e9a12666e2fac665d03d/#url-parsing\n * an initial / which is not followed by another / or \\ will end up in the \"path\n * state\" and from there it can only go to \"fragment state\" and \"query state\".\n *\n * We don't enforce a well-formed domain name. So '.' or '1.2' are valid.\n * That's ok because the origin comes from a compile-time constant.\n *\n * A regular expression is used instead of goog.uri for several reasons:\n * - Strictness. E.g. we don't want any userinfo component and we don't\n *   want '/./, nor \\' in the first path component.\n * - Small trusted base. goog.uri is generic and might need to change,\n *   reasoning about all the ways it can parse a URL now and in the future\n *   is error-prone.\n * - Code size. We expect many calls to .format(), many of which might\n *   not be using goog.uri.\n * - Simplicity. Using goog.uri would likely not result in simpler nor shorter\n *   code.\n * @private @const {!RegExp}\n */\ngoog.html.TrustedResourceUrl.BASE_URL_ =\n    /^(?:https:)?\\/\\/[0-9a-z.:[\\]-]+\\/|^\\/[^\\/\\\\]|^about:blank#/i;\n\n\n/**\n * Formats the URL same as TrustedResourceUrl.format and then adds extra URL\n * parameters.\n *\n * Example usage:\n *\n *     // Creates '//www.youtube.com/v/abc?autoplay=1' for videoId='abc' and\n *     // opt_autoplay=1. Creates '//www.youtube.com/v/abc' for videoId='abc'\n *     // and opt_autoplay=undefined.\n *     var url = goog.html.TrustedResourceUrl.formatWithParams(\n *         goog.string.Const.from('//www.youtube.com/v/%{videoId}'),\n *         {'videoId': videoId},\n *         {'autoplay': opt_autoplay});\n *\n * @param {!goog.string.Const} format The format string.\n * @param {!Object<string, (string|number|!goog.string.Const)>} args Mapping\n *     of labels to values to be interpolated into the format string.\n *     goog.string.Const values are interpolated without encoding.\n * @param {!Object<string, *>} params Parameters to add to URL. Parameters with\n *     value `null` or `undefined` are skipped. Both keys and values\n *     are encoded. If the value is an array then the same parameter is added\n *     for every element in the array. Note that JavaScript doesn't guarantee\n *     the order of values in an object which might result in non-deterministic\n *     order of the parameters. However, browsers currently preserve the order.\n * @return {!goog.html.TrustedResourceUrl}\n * @throws {!Error} On an invalid format string or if a label used in the\n *     the format string is not present in args.\n */\ngoog.html.TrustedResourceUrl.formatWithParams = function(format, args, params) {\n  var url = goog.html.TrustedResourceUrl.format(format, args);\n  return url.cloneWithParams(params);\n};\n\n\n/**\n * Creates a TrustedResourceUrl object from a compile-time constant string.\n *\n * Compile-time constant strings are inherently program-controlled and hence\n * trusted.\n *\n * @param {!goog.string.Const} url A compile-time-constant string from which to\n *     create a TrustedResourceUrl.\n * @return {!goog.html.TrustedResourceUrl} A TrustedResourceUrl object\n *     initialized to `url`.\n */\ngoog.html.TrustedResourceUrl.fromConstant = function(url) {\n  return goog.html.TrustedResourceUrl\n      .createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(\n          goog.string.Const.unwrap(url));\n};\n\n\n/**\n * Creates a TrustedResourceUrl object from a compile-time constant strings.\n *\n * Compile-time constant strings are inherently program-controlled and hence\n * trusted.\n *\n * @param {!Array<!goog.string.Const>} parts Compile-time-constant strings from\n *     which to create a TrustedResourceUrl.\n * @return {!goog.html.TrustedResourceUrl} A TrustedResourceUrl object\n *     initialized to concatenation of `parts`.\n */\ngoog.html.TrustedResourceUrl.fromConstants = function(parts) {\n  var unwrapped = '';\n  for (var i = 0; i < parts.length; i++) {\n    unwrapped += goog.string.Const.unwrap(parts[i]);\n  }\n  return goog.html.TrustedResourceUrl\n      .createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(unwrapped);\n};\n\n\n/**\n * Type marker for the TrustedResourceUrl type, used to implement additional\n * run-time type checking.\n * @const {!Object}\n * @private\n */\ngoog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {};\n\n\n/**\n * Package-internal utility method to create TrustedResourceUrl instances.\n *\n * @param {string} url The string to initialize the TrustedResourceUrl object\n *     with.\n * @return {!goog.html.TrustedResourceUrl} The initialized TrustedResourceUrl\n *     object.\n * @package\n */\ngoog.html.TrustedResourceUrl\n    .createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse = function(url) {\n  var trustedResourceUrl = new goog.html.TrustedResourceUrl();\n  trustedResourceUrl.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_ =\n      url;\n  return trustedResourceUrl;\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview The SafeUrl type and its builders.\n *\n * TODO(xtof): Link to document stating type contract.\n */\n\ngoog.provide('goog.html.SafeUrl');\n\ngoog.require('goog.asserts');\ngoog.require('goog.fs.url');\ngoog.require('goog.html.TrustedResourceUrl');\ngoog.require('goog.i18n.bidi.Dir');\ngoog.require('goog.i18n.bidi.DirectionalString');\ngoog.require('goog.string');\ngoog.require('goog.string.Const');\ngoog.require('goog.string.TypedString');\n\n\n\n/**\n * A string that is safe to use in URL context in DOM APIs and HTML documents.\n *\n * A SafeUrl is a string-like object that carries the security type contract\n * that its value as a string will not cause untrusted script execution\n * when evaluated as a hyperlink URL in a browser.\n *\n * Values of this type are guaranteed to be safe to use in URL/hyperlink\n * contexts, such as assignment to URL-valued DOM properties, in the sense that\n * the use will not result in a Cross-Site-Scripting vulnerability. Similarly,\n * SafeUrls can be interpolated into the URL context of an HTML template (e.g.,\n * inside a href attribute). However, appropriate HTML-escaping must still be\n * applied.\n *\n * Note that, as documented in `goog.html.SafeUrl.unwrap`, this type's\n * contract does not guarantee that instances are safe to interpolate into HTML\n * without appropriate escaping.\n *\n * Note also that this type's contract does not imply any guarantees regarding\n * the resource the URL refers to.  In particular, SafeUrls are <b>not</b>\n * safe to use in a context where the referred-to resource is interpreted as\n * trusted code, e.g., as the src of a script tag.\n *\n * Instances of this type must be created via the factory methods\n * (`goog.html.SafeUrl.fromConstant`, `goog.html.SafeUrl.sanitize`),\n * etc and not by invoking its constructor.  The constructor intentionally\n * takes no parameters and the type is immutable; hence only a default instance\n * corresponding to the empty string can be obtained via constructor invocation.\n *\n * @see goog.html.SafeUrl#fromConstant\n * @see goog.html.SafeUrl#from\n * @see goog.html.SafeUrl#sanitize\n * @constructor\n * @final\n * @struct\n * @implements {goog.i18n.bidi.DirectionalString}\n * @implements {goog.string.TypedString}\n */\ngoog.html.SafeUrl = function() {\n  /**\n   * The contained value of this SafeUrl.  The field has a purposely ugly\n   * name to make (non-compiled) code that attempts to directly access this\n   * field stand out.\n   * @private {string}\n   */\n  this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ = '';\n\n  /**\n   * A type marker used to implement additional run-time type checking.\n   * @see goog.html.SafeUrl#unwrap\n   * @const {!Object}\n   * @private\n   */\n  this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ =\n      goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_;\n};\n\n\n/**\n * The innocuous string generated by goog.html.SafeUrl.sanitize when passed\n * an unsafe URL.\n *\n * about:invalid is registered in\n * http://www.w3.org/TR/css3-values/#about-invalid.\n * http://tools.ietf.org/html/rfc6694#section-2.2.1 permits about URLs to\n * contain a fragment, which is not to be considered when determining if an\n * about URL is well-known.\n *\n * Using about:invalid seems preferable to using a fixed data URL, since\n * browsers might choose to not report CSP violations on it, as legitimate\n * CSS function calls to attr() can result in this URL being produced. It is\n * also a standard URL which matches exactly the semantics we need:\n * \"The about:invalid URI references a non-existent document with a generic\n * error condition. It can be used when a URI is necessary, but the default\n * value shouldn't be resolveable as any type of document\".\n *\n * @const {string}\n */\ngoog.html.SafeUrl.INNOCUOUS_STRING = 'about:invalid#zClosurez';\n\n\n/**\n * @override\n * @const\n */\ngoog.html.SafeUrl.prototype.implementsGoogStringTypedString = true;\n\n\n/**\n * Returns this SafeUrl's value a string.\n *\n * IMPORTANT: In code where it is security relevant that an object's type is\n * indeed `SafeUrl`, use `goog.html.SafeUrl.unwrap` instead of this\n * method. If in doubt, assume that it's security relevant. In particular, note\n * that goog.html functions which return a goog.html type do not guarantee that\n * the returned instance is of the right type. For example:\n *\n * <pre>\n * var fakeSafeHtml = new String('fake');\n * fakeSafeHtml.__proto__ = goog.html.SafeHtml.prototype;\n * var newSafeHtml = goog.html.SafeHtml.htmlEscape(fakeSafeHtml);\n * // newSafeHtml is just an alias for fakeSafeHtml, it's passed through by\n * // goog.html.SafeHtml.htmlEscape() as fakeSafeHtml instanceof\n * // goog.html.SafeHtml.\n * </pre>\n *\n * IMPORTANT: The guarantees of the SafeUrl type contract only extend to the\n * behavior of browsers when interpreting URLs. Values of SafeUrl objects MUST\n * be appropriately escaped before embedding in a HTML document. Note that the\n * required escaping is context-sensitive (e.g. a different escaping is\n * required for embedding a URL in a style property within a style\n * attribute, as opposed to embedding in a href attribute).\n *\n * @see goog.html.SafeUrl#unwrap\n * @override\n */\ngoog.html.SafeUrl.prototype.getTypedStringValue = function() {\n  return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_;\n};\n\n\n/**\n * @override\n * @const\n */\ngoog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString = true;\n\n\n/**\n * Returns this URLs directionality, which is always `LTR`.\n * @override\n */\ngoog.html.SafeUrl.prototype.getDirection = function() {\n  return goog.i18n.bidi.Dir.LTR;\n};\n\n\nif (goog.DEBUG) {\n  /**\n   * Returns a debug string-representation of this value.\n   *\n   * To obtain the actual string value wrapped in a SafeUrl, use\n   * `goog.html.SafeUrl.unwrap`.\n   *\n   * @see goog.html.SafeUrl#unwrap\n   * @override\n   */\n  goog.html.SafeUrl.prototype.toString = function() {\n    return 'SafeUrl{' + this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ +\n        '}';\n  };\n}\n\n\n/**\n * Performs a runtime check that the provided object is indeed a SafeUrl\n * object, and returns its value.\n *\n * IMPORTANT: The guarantees of the SafeUrl type contract only extend to the\n * behavior of  browsers when interpreting URLs. Values of SafeUrl objects MUST\n * be appropriately escaped before embedding in a HTML document. Note that the\n * required escaping is context-sensitive (e.g. a different escaping is\n * required for embedding a URL in a style property within a style\n * attribute, as opposed to embedding in a href attribute).\n *\n * @param {!goog.html.SafeUrl} safeUrl The object to extract from.\n * @return {string} The SafeUrl object's contained string, unless the run-time\n *     type check fails. In that case, `unwrap` returns an innocuous\n *     string, or, if assertions are enabled, throws\n *     `goog.asserts.AssertionError`.\n */\ngoog.html.SafeUrl.unwrap = function(safeUrl) {\n  // Perform additional Run-time type-checking to ensure that safeUrl is indeed\n  // an instance of the expected type.  This provides some additional protection\n  // against security bugs due to application code that disables type checks.\n  // Specifically, the following checks are performed:\n  // 1. The object is an instance of the expected type.\n  // 2. The object is not an instance of a subclass.\n  // 3. The object carries a type marker for the expected type. \"Faking\" an\n  // object requires a reference to the type marker, which has names intended\n  // to stand out in code reviews.\n  if (safeUrl instanceof goog.html.SafeUrl &&\n      safeUrl.constructor === goog.html.SafeUrl &&\n      safeUrl.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ===\n          goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_) {\n    return safeUrl.privateDoNotAccessOrElseSafeHtmlWrappedValue_;\n  } else {\n    goog.asserts.fail('expected object of type SafeUrl, got \\'' +\n        safeUrl + '\\' of type ' + goog.typeOf(safeUrl));\n    return 'type_error:SafeUrl';\n  }\n};\n\n\n/**\n * Creates a SafeUrl object from a compile-time constant string.\n *\n * Compile-time constant strings are inherently program-controlled and hence\n * trusted.\n *\n * @param {!goog.string.Const} url A compile-time-constant string from which to\n *         create a SafeUrl.\n * @return {!goog.html.SafeUrl} A SafeUrl object initialized to `url`.\n */\ngoog.html.SafeUrl.fromConstant = function(url) {\n  return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(\n      goog.string.Const.unwrap(url));\n};\n\n\n/**\n * A pattern that matches Blob or data types that can have SafeUrls created\n * from URL.createObjectURL(blob) or via a data: URI.\n * @const\n * @private\n */\ngoog.html.SAFE_MIME_TYPE_PATTERN_ = new RegExp(\n    // Note: Due to content-sniffing concerns, only add MIME types for\n    // media formats.\n    '^(?:audio/(?:3gpp|3gpp2|aac|midi|mp4|mpeg|ogg|x-m4a|x-wav|webm)|' +\n        'image/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|' +\n        // TODO(b/68188949): Due to content-sniffing concerns, text/csv should\n        // be removed from the whitelist.\n        'text/csv|' +\n        'video/(?:mpeg|mp4|ogg|webm|quicktime))$',\n    'i');\n\n\n/**\n * Creates a SafeUrl wrapping a blob URL for the given `blob`.\n *\n * The blob URL is created with `URL.createObjectURL`. If the MIME type\n * for `blob` is not of a known safe audio, image or video MIME type,\n * then the SafeUrl will wrap {@link #INNOCUOUS_STRING}.\n *\n * @see http://www.w3.org/TR/FileAPI/#url\n * @param {!Blob} blob\n * @return {!goog.html.SafeUrl} The blob URL, or an innocuous string wrapped\n *   as a SafeUrl.\n */\ngoog.html.SafeUrl.fromBlob = function(blob) {\n  var url = goog.html.SAFE_MIME_TYPE_PATTERN_.test(blob.type) ?\n      goog.fs.url.createObjectUrl(blob) :\n      goog.html.SafeUrl.INNOCUOUS_STRING;\n  return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(url);\n};\n\n\n/**\n * Matches a base-64 data URL, with the first match group being the MIME type.\n * @const\n * @private\n */\ngoog.html.DATA_URL_PATTERN_ = /^data:([^;,]*);base64,[a-z0-9+\\/]+=*$/i;\n\n\n/**\n * Creates a SafeUrl wrapping a data: URL, after validating it matches a\n * known-safe audio, image or video MIME type.\n *\n * @param {string} dataUrl A valid base64 data URL with one of the whitelisted\n *     audio, image or video MIME types.\n * @return {!goog.html.SafeUrl} A matching safe URL, or {@link INNOCUOUS_STRING}\n *     wrapped as a SafeUrl if it does not pass.\n */\ngoog.html.SafeUrl.fromDataUrl = function(dataUrl) {\n  // There's a slight risk here that a browser sniffs the content type if it\n  // doesn't know the MIME type and executes HTML within the data: URL. For this\n  // to cause XSS it would also have to execute the HTML in the same origin\n  // of the page with the link. It seems unlikely that both of these will\n  // happen, particularly in not really old IEs.\n  var match = dataUrl.match(goog.html.DATA_URL_PATTERN_);\n  var valid = match && goog.html.SAFE_MIME_TYPE_PATTERN_.test(match[1]);\n  return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(\n      valid ? dataUrl : goog.html.SafeUrl.INNOCUOUS_STRING);\n};\n\n\n/**\n * Creates a SafeUrl wrapping a tel: URL.\n *\n * @param {string} telUrl A tel URL.\n * @return {!goog.html.SafeUrl} A matching safe URL, or {@link INNOCUOUS_STRING}\n *     wrapped as a SafeUrl if it does not pass.\n */\ngoog.html.SafeUrl.fromTelUrl = function(telUrl) {\n  // There's a risk that a tel: URL could immediately place a call once\n  // clicked, without requiring user confirmation. For that reason it is\n  // handled in this separate function.\n  if (!goog.string.caseInsensitiveStartsWith(telUrl, 'tel:')) {\n    telUrl = goog.html.SafeUrl.INNOCUOUS_STRING;\n  }\n  return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(\n      telUrl);\n};\n\n\n/**\n * Creates a SafeUrl from TrustedResourceUrl. This is safe because\n * TrustedResourceUrl is more tightly restricted than SafeUrl.\n *\n * @param {!goog.html.TrustedResourceUrl} trustedResourceUrl\n * @return {!goog.html.SafeUrl}\n */\ngoog.html.SafeUrl.fromTrustedResourceUrl = function(trustedResourceUrl) {\n  return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(\n      goog.html.TrustedResourceUrl.unwrap(trustedResourceUrl));\n};\n\n\n/**\n * A pattern that recognizes a commonly useful subset of URLs that satisfy\n * the SafeUrl contract.\n *\n * This regular expression matches a subset of URLs that will not cause script\n * execution if used in URL context within a HTML document. Specifically, this\n * regular expression matches if (comment from here on and regex copied from\n * Soy's EscapingConventions):\n * (1) Either a protocol in a whitelist (http, https, mailto or ftp).\n * (2) or no protocol.  A protocol must be followed by a colon. The below\n *     allows that by allowing colons only after one of the characters [/?#].\n *     A colon after a hash (#) must be in the fragment.\n *     Otherwise, a colon after a (?) must be in a query.\n *     Otherwise, a colon after a single solidus (/) must be in a path.\n *     Otherwise, a colon after a double solidus (//) must be in the authority\n *     (before port).\n *\n * @private\n * @const {!RegExp}\n */\ngoog.html.SAFE_URL_PATTERN_ =\n    /^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;\n\n\n/**\n * Creates a SafeUrl object from `url`. If `url` is a\n * goog.html.SafeUrl then it is simply returned. Otherwise the input string is\n * validated to match a pattern of commonly used safe URLs.\n *\n * `url` may be a URL with the http, https, mailto or ftp scheme,\n * or a relative URL (i.e., a URL without a scheme; specifically, a\n * scheme-relative, absolute-path-relative, or path-relative URL).\n *\n * @see http://url.spec.whatwg.org/#concept-relative-url\n * @param {string|!goog.string.TypedString} url The URL to validate.\n * @return {!goog.html.SafeUrl} The validated URL, wrapped as a SafeUrl.\n */\ngoog.html.SafeUrl.sanitize = function(url) {\n  if (url instanceof goog.html.SafeUrl) {\n    return url;\n  } else if (url.implementsGoogStringTypedString) {\n    url = /** @type {!goog.string.TypedString} */ (url).getTypedStringValue();\n  } else {\n    url = String(url);\n  }\n  if (!goog.html.SAFE_URL_PATTERN_.test(url)) {\n    url = goog.html.SafeUrl.INNOCUOUS_STRING;\n  }\n  return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(url);\n};\n\n/**\n * Creates a SafeUrl object from `url`. If `url` is a\n * goog.html.SafeUrl then it is simply returned. Otherwise the input string is\n * validated to match a pattern of commonly used safe URLs.\n *\n * `url` may be a URL with the http, https, mailto or ftp scheme,\n * or a relative URL (i.e., a URL without a scheme; specifically, a\n * scheme-relative, absolute-path-relative, or path-relative URL).\n *\n * This function asserts (using goog.asserts) that the URL matches this pattern.\n * If it does not, in addition to failing the assert, an innocous URL will be\n * returned.\n *\n * @see http://url.spec.whatwg.org/#concept-relative-url\n * @param {string|!goog.string.TypedString} url The URL to validate.\n * @return {!goog.html.SafeUrl} The validated URL, wrapped as a SafeUrl.\n */\ngoog.html.SafeUrl.sanitizeAssertUnchanged = function(url) {\n  if (url instanceof goog.html.SafeUrl) {\n    return url;\n  } else if (url.implementsGoogStringTypedString) {\n    url = /** @type {!goog.string.TypedString} */ (url).getTypedStringValue();\n  } else {\n    url = String(url);\n  }\n  if (!goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(url))) {\n    url = goog.html.SafeUrl.INNOCUOUS_STRING;\n  }\n  return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(url);\n};\n\n\n\n/**\n * Type marker for the SafeUrl type, used to implement additional run-time\n * type checking.\n * @const {!Object}\n * @private\n */\ngoog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {};\n\n\n/**\n * Package-internal utility method to create SafeUrl instances.\n *\n * @param {string} url The string to initialize the SafeUrl object with.\n * @return {!goog.html.SafeUrl} The initialized SafeUrl object.\n * @package\n */\ngoog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse = function(\n    url) {\n  var safeUrl = new goog.html.SafeUrl();\n  safeUrl.privateDoNotAccessOrElseSafeHtmlWrappedValue_ = url;\n  return safeUrl;\n};\n\n\n/**\n * A SafeUrl corresponding to the special about:blank url.\n * @const {!goog.html.SafeUrl}\n */\ngoog.html.SafeUrl.ABOUT_BLANK =\n    goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(\n        'about:blank');\n","// Copyright 2014 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview The SafeStyle type and its builders.\n *\n * TODO(xtof): Link to document stating type contract.\n */\n\ngoog.provide('goog.html.SafeStyle');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.html.SafeUrl');\ngoog.require('goog.string');\ngoog.require('goog.string.Const');\ngoog.require('goog.string.TypedString');\n\n\n\n/**\n * A string-like object which represents a sequence of CSS declarations\n * ({@code propertyName1: propertyvalue1; propertyName2: propertyValue2; ...})\n * and that carries the security type contract that its value, as a string,\n * will not cause untrusted script execution (XSS) when evaluated as CSS in a\n * browser.\n *\n * Instances of this type must be created via the factory methods\n * (`goog.html.SafeStyle.create` or\n * `goog.html.SafeStyle.fromConstant`) and not by invoking its\n * constructor. The constructor intentionally takes no parameters and the type\n * is immutable; hence only a default instance corresponding to the empty string\n * can be obtained via constructor invocation.\n *\n * SafeStyle's string representation can safely be:\n * <ul>\n *   <li>Interpolated as the content of a *quoted* HTML style attribute.\n *       However, the SafeStyle string *must be HTML-attribute-escaped* before\n *       interpolation.\n *   <li>Interpolated as the content of a {}-wrapped block within a stylesheet.\n *       '<' characters in the SafeStyle string *must be CSS-escaped* before\n *       interpolation. The SafeStyle string is also guaranteed not to be able\n *       to introduce new properties or elide existing ones.\n *   <li>Interpolated as the content of a {}-wrapped block within an HTML\n *       &lt;style&gt; element. '<' characters in the SafeStyle string\n *       *must be CSS-escaped* before interpolation.\n *   <li>Assigned to the style property of a DOM node. The SafeStyle string\n *       should not be escaped before being assigned to the property.\n * </ul>\n *\n * A SafeStyle may never contain literal angle brackets. Otherwise, it could\n * be unsafe to place a SafeStyle into a &lt;style&gt; tag (where it can't\n * be HTML escaped). For example, if the SafeStyle containing\n * \"{@code font: 'foo &lt;style/&gt;&lt;script&gt;evil&lt;/script&gt;'}\" were\n * interpolated within a &lt;style&gt; tag, this would then break out of the\n * style context into HTML.\n *\n * A SafeStyle may contain literal single or double quotes, and as such the\n * entire style string must be escaped when used in a style attribute (if\n * this were not the case, the string could contain a matching quote that\n * would escape from the style attribute).\n *\n * Values of this type must be composable, i.e. for any two values\n * `style1` and `style2` of this type,\n * {@code goog.html.SafeStyle.unwrap(style1) +\n * goog.html.SafeStyle.unwrap(style2)} must itself be a value that satisfies\n * the SafeStyle type constraint. This requirement implies that for any value\n * `style` of this type, `goog.html.SafeStyle.unwrap(style)` must\n * not end in a \"property value\" or \"property name\" context. For example,\n * a value of {@code background:url(\"} or {@code font-} would not satisfy the\n * SafeStyle contract. This is because concatenating such strings with a\n * second value that itself does not contain unsafe CSS can result in an\n * overall string that does. For example, if {@code javascript:evil())\"} is\n * appended to {@code background:url(\"}, the resulting string may result in\n * the execution of a malicious script.\n *\n * TODO(mlourenco): Consider whether we should implement UTF-8 interchange\n * validity checks and blacklisting of newlines (including Unicode ones) and\n * other whitespace characters (\\t, \\f). Document here if so and also update\n * SafeStyle.fromConstant().\n *\n * The following example values comply with this type's contract:\n * <ul>\n *   <li><pre>width: 1em;</pre>\n *   <li><pre>height:1em;</pre>\n *   <li><pre>width: 1em;height: 1em;</pre>\n *   <li><pre>background:url('http://url');</pre>\n * </ul>\n * In addition, the empty string is safe for use in a CSS attribute.\n *\n * The following example values do NOT comply with this type's contract:\n * <ul>\n *   <li><pre>background: red</pre> (missing a trailing semi-colon)\n *   <li><pre>background:</pre> (missing a value and a trailing semi-colon)\n *   <li><pre>1em</pre> (missing an attribute name, which provides context for\n *       the value)\n * </ul>\n *\n * @see goog.html.SafeStyle#create\n * @see goog.html.SafeStyle#fromConstant\n * @see http://www.w3.org/TR/css3-syntax/\n * @constructor\n * @final\n * @struct\n * @implements {goog.string.TypedString}\n */\ngoog.html.SafeStyle = function() {\n  /**\n   * The contained value of this SafeStyle.  The field has a purposely\n   * ugly name to make (non-compiled) code that attempts to directly access this\n   * field stand out.\n   * @private {string}\n   */\n  this.privateDoNotAccessOrElseSafeStyleWrappedValue_ = '';\n\n  /**\n   * A type marker used to implement additional run-time type checking.\n   * @see goog.html.SafeStyle#unwrap\n   * @const {!Object}\n   * @private\n   */\n  this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ =\n      goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_;\n};\n\n\n/**\n * @override\n * @const\n */\ngoog.html.SafeStyle.prototype.implementsGoogStringTypedString = true;\n\n\n/**\n * Type marker for the SafeStyle type, used to implement additional\n * run-time type checking.\n * @const {!Object}\n * @private\n */\ngoog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {};\n\n\n/**\n * Creates a SafeStyle object from a compile-time constant string.\n *\n * `style` should be in the format\n * {@code name: value; [name: value; ...]} and must not have any < or >\n * characters in it. This is so that SafeStyle's contract is preserved,\n * allowing the SafeStyle to correctly be interpreted as a sequence of CSS\n * declarations and without affecting the syntactic structure of any\n * surrounding CSS and HTML.\n *\n * This method performs basic sanity checks on the format of `style`\n * but does not constrain the format of `name` and `value`, except\n * for disallowing tag characters.\n *\n * @param {!goog.string.Const} style A compile-time-constant string from which\n *     to create a SafeStyle.\n * @return {!goog.html.SafeStyle} A SafeStyle object initialized to\n *     `style`.\n */\ngoog.html.SafeStyle.fromConstant = function(style) {\n  var styleString = goog.string.Const.unwrap(style);\n  if (styleString.length === 0) {\n    return goog.html.SafeStyle.EMPTY;\n  }\n  goog.html.SafeStyle.checkStyle_(styleString);\n  goog.asserts.assert(\n      goog.string.endsWith(styleString, ';'),\n      'Last character of style string is not \\';\\': ' + styleString);\n  goog.asserts.assert(\n      goog.string.contains(styleString, ':'),\n      'Style string must contain at least one \\':\\', to ' +\n          'specify a \"name: value\" pair: ' + styleString);\n  return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(\n      styleString);\n};\n\n\n/**\n * Checks if the style definition is valid.\n * @param {string} style\n * @private\n */\ngoog.html.SafeStyle.checkStyle_ = function(style) {\n  goog.asserts.assert(\n      !/[<>]/.test(style), 'Forbidden characters in style string: ' + style);\n};\n\n\n/**\n * Returns this SafeStyle's value as a string.\n *\n * IMPORTANT: In code where it is security relevant that an object's type is\n * indeed `SafeStyle`, use `goog.html.SafeStyle.unwrap` instead of\n * this method. If in doubt, assume that it's security relevant. In particular,\n * note that goog.html functions which return a goog.html type do not guarantee\n * the returned instance is of the right type. For example:\n *\n * <pre>\n * var fakeSafeHtml = new String('fake');\n * fakeSafeHtml.__proto__ = goog.html.SafeHtml.prototype;\n * var newSafeHtml = goog.html.SafeHtml.htmlEscape(fakeSafeHtml);\n * // newSafeHtml is just an alias for fakeSafeHtml, it's passed through by\n * // goog.html.SafeHtml.htmlEscape() as fakeSafeHtml\n * // instanceof goog.html.SafeHtml.\n * </pre>\n *\n * @see goog.html.SafeStyle#unwrap\n * @override\n */\ngoog.html.SafeStyle.prototype.getTypedStringValue = function() {\n  return this.privateDoNotAccessOrElseSafeStyleWrappedValue_;\n};\n\n\nif (goog.DEBUG) {\n  /**\n   * Returns a debug string-representation of this value.\n   *\n   * To obtain the actual string value wrapped in a SafeStyle, use\n   * `goog.html.SafeStyle.unwrap`.\n   *\n   * @see goog.html.SafeStyle#unwrap\n   * @override\n   */\n  goog.html.SafeStyle.prototype.toString = function() {\n    return 'SafeStyle{' + this.privateDoNotAccessOrElseSafeStyleWrappedValue_ +\n        '}';\n  };\n}\n\n\n/**\n * Performs a runtime check that the provided object is indeed a\n * SafeStyle object, and returns its value.\n *\n * @param {!goog.html.SafeStyle} safeStyle The object to extract from.\n * @return {string} The safeStyle object's contained string, unless\n *     the run-time type check fails. In that case, `unwrap` returns an\n *     innocuous string, or, if assertions are enabled, throws\n *     `goog.asserts.AssertionError`.\n */\ngoog.html.SafeStyle.unwrap = function(safeStyle) {\n  // Perform additional Run-time type-checking to ensure that\n  // safeStyle is indeed an instance of the expected type.  This\n  // provides some additional protection against security bugs due to\n  // application code that disables type checks.\n  // Specifically, the following checks are performed:\n  // 1. The object is an instance of the expected type.\n  // 2. The object is not an instance of a subclass.\n  // 3. The object carries a type marker for the expected type. \"Faking\" an\n  // object requires a reference to the type marker, which has names intended\n  // to stand out in code reviews.\n  if (safeStyle instanceof goog.html.SafeStyle &&\n      safeStyle.constructor === goog.html.SafeStyle &&\n      safeStyle.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ===\n          goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_) {\n    return safeStyle.privateDoNotAccessOrElseSafeStyleWrappedValue_;\n  } else {\n    goog.asserts.fail('expected object of type SafeStyle, got \\'' +\n        safeStyle + '\\' of type ' + goog.typeOf(safeStyle));\n    return 'type_error:SafeStyle';\n  }\n};\n\n\n/**\n * Package-internal utility method to create SafeStyle instances.\n *\n * @param {string} style The string to initialize the SafeStyle object with.\n * @return {!goog.html.SafeStyle} The initialized SafeStyle object.\n * @package\n */\ngoog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse = function(\n    style) {\n  return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(style);\n};\n\n\n/**\n * Called from createSafeStyleSecurityPrivateDoNotAccessOrElse(). This\n * method exists only so that the compiler can dead code eliminate static\n * fields (like EMPTY) when they're not accessed.\n * @param {string} style\n * @return {!goog.html.SafeStyle}\n * @private\n */\ngoog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_ = function(\n    style) {\n  this.privateDoNotAccessOrElseSafeStyleWrappedValue_ = style;\n  return this;\n};\n\n\n/**\n * A SafeStyle instance corresponding to the empty string.\n * @const {!goog.html.SafeStyle}\n */\ngoog.html.SafeStyle.EMPTY =\n    goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse('');\n\n\n/**\n * The innocuous string generated by goog.html.SafeStyle.create when passed\n * an unsafe value.\n * @const {string}\n */\ngoog.html.SafeStyle.INNOCUOUS_STRING = 'zClosurez';\n\n\n/**\n * A single property value.\n * @typedef {string|!goog.string.Const|!goog.html.SafeUrl}\n */\ngoog.html.SafeStyle.PropertyValue;\n\n\n/**\n * Mapping of property names to their values.\n * We don't support numbers even though some values might be numbers (e.g.\n * line-height or 0 for any length). The reason is that most numeric values need\n * units (e.g. '1px') and allowing numbers could cause users forgetting about\n * them.\n * @typedef {!Object<string, ?goog.html.SafeStyle.PropertyValue|\n *     ?Array<!goog.html.SafeStyle.PropertyValue>>}\n */\ngoog.html.SafeStyle.PropertyMap;\n\n\n/**\n * Creates a new SafeStyle object from the properties specified in the map.\n * @param {goog.html.SafeStyle.PropertyMap} map Mapping of property names to\n *     their values, for example {'margin': '1px'}. Names must consist of\n *     [-_a-zA-Z0-9]. Values might be strings consisting of\n *     [-,.'\"%_!# a-zA-Z0-9], where \" and ' must be properly balanced. We also\n *     allow simple functions like rgb() and url() which sanitizes its contents.\n *     Other values must be wrapped in goog.string.Const. URLs might be passed\n *     as goog.html.SafeUrl which will be wrapped into url(\"\"). We also support\n *     array whose elements are joined with ' '. Null value causes skipping the\n *     property.\n * @return {!goog.html.SafeStyle}\n * @throws {Error} If invalid name is provided.\n * @throws {goog.asserts.AssertionError} If invalid value is provided. With\n *     disabled assertions, invalid value is replaced by\n *     goog.html.SafeStyle.INNOCUOUS_STRING.\n */\ngoog.html.SafeStyle.create = function(map) {\n  var style = '';\n  for (var name in map) {\n    if (!/^[-_a-zA-Z0-9]+$/.test(name)) {\n      throw new Error('Name allows only [-_a-zA-Z0-9], got: ' + name);\n    }\n    var value = map[name];\n    if (value == null) {\n      continue;\n    }\n    if (goog.isArray(value)) {\n      value = goog.array.map(value, goog.html.SafeStyle.sanitizePropertyValue_)\n                  .join(' ');\n    } else {\n      value = goog.html.SafeStyle.sanitizePropertyValue_(value);\n    }\n    style += name + ':' + value + ';';\n  }\n  if (!style) {\n    return goog.html.SafeStyle.EMPTY;\n  }\n  goog.html.SafeStyle.checkStyle_(style);\n  return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(\n      style);\n};\n\n\n/**\n * Checks and converts value to string.\n * @param {!goog.html.SafeStyle.PropertyValue} value\n * @return {string}\n * @private\n */\ngoog.html.SafeStyle.sanitizePropertyValue_ = function(value) {\n  if (value instanceof goog.html.SafeUrl) {\n    var url = goog.html.SafeUrl.unwrap(value);\n    return 'url(\"' + url.replace(/</g, '%3c').replace(/[\\\\\"]/g, '\\\\$&') + '\")';\n  }\n  var result = value instanceof goog.string.Const ?\n      goog.string.Const.unwrap(value) :\n      goog.html.SafeStyle.sanitizePropertyValueString_(String(value));\n  // These characters can be used to change context and we don't want that even\n  // with const values.\n  goog.asserts.assert(!/[{;}]/.test(result), 'Value does not allow [{;}].');\n  return result;\n};\n\n\n/**\n * Checks string value.\n * @param {string} value\n * @return {string}\n * @private\n */\ngoog.html.SafeStyle.sanitizePropertyValueString_ = function(value) {\n  var valueWithoutFunctions =\n      value.replace(goog.html.SafeStyle.FUNCTIONS_RE_, '$1')\n          .replace(goog.html.SafeStyle.URL_RE_, 'url');\n  if (!goog.html.SafeStyle.VALUE_RE_.test(valueWithoutFunctions)) {\n    goog.asserts.fail(\n        'String value allows only ' + goog.html.SafeStyle.VALUE_ALLOWED_CHARS_ +\n        ' and simple functions, got: ' + value);\n    return goog.html.SafeStyle.INNOCUOUS_STRING;\n  } else if (!goog.html.SafeStyle.hasBalancedQuotes_(value)) {\n    goog.asserts.fail('String value requires balanced quotes, got: ' + value);\n    return goog.html.SafeStyle.INNOCUOUS_STRING;\n  }\n  return goog.html.SafeStyle.sanitizeUrl_(value);\n};\n\n\n/**\n * Checks that quotes (\" and ') are properly balanced inside a string. Assumes\n * that neither escape (\\) nor any other character that could result in\n * breaking out of a string parsing context are allowed;\n * see http://www.w3.org/TR/css3-syntax/#string-token-diagram.\n * @param {string} value Untrusted CSS property value.\n * @return {boolean} True if property value is safe with respect to quote\n *     balancedness.\n * @private\n */\ngoog.html.SafeStyle.hasBalancedQuotes_ = function(value) {\n  var outsideSingle = true;\n  var outsideDouble = true;\n  for (var i = 0; i < value.length; i++) {\n    var c = value.charAt(i);\n    if (c == \"'\" && outsideDouble) {\n      outsideSingle = !outsideSingle;\n    } else if (c == '\"' && outsideSingle) {\n      outsideDouble = !outsideDouble;\n    }\n  }\n  return outsideSingle && outsideDouble;\n};\n\n\n/**\n * Characters allowed in goog.html.SafeStyle.VALUE_RE_.\n * @private {string}\n */\ngoog.html.SafeStyle.VALUE_ALLOWED_CHARS_ = '[-,.\"\\'%_!# a-zA-Z0-9]';\n\n\n/**\n * Regular expression for safe values.\n *\n * Quotes (\" and ') are allowed, but a check must be done elsewhere to ensure\n * they're balanced.\n *\n * ',' allows multiple values to be assigned to the same property\n * (e.g. background-attachment or font-family) and hence could allow\n * multiple values to get injected, but that should pose no risk of XSS.\n *\n * The expression checks only for XSS safety, not for CSS validity.\n * @const {!RegExp}\n * @private\n */\ngoog.html.SafeStyle.VALUE_RE_ =\n    new RegExp('^' + goog.html.SafeStyle.VALUE_ALLOWED_CHARS_ + '+$');\n\n\n/**\n * Regular expression for url(). We support URLs allowed by\n * https://www.w3.org/TR/css-syntax-3/#url-token-diagram without using escape\n * sequences. Use percent-encoding if you need to use special characters like\n * backslash.\n * @private @const {!RegExp}\n */\ngoog.html.SafeStyle.URL_RE_ = new RegExp(\n    '\\\\b(url\\\\([ \\t\\n]*)(' +\n        '\\'[ -&(-\\\\[\\\\]-~]*\\'' +  // Printable characters except ' and \\.\n        '|\"[ !#-\\\\[\\\\]-~]*\"' +    // Printable characters except \" and \\.\n        '|[!#-&*-\\\\[\\\\]-~]*' +    // Printable characters except [ \"'()\\\\].\n        ')([ \\t\\n]*\\\\))',\n    'g');\n\n\n/**\n * Regular expression for simple functions.\n * @private @const {!RegExp}\n */\ngoog.html.SafeStyle.FUNCTIONS_RE_ = new RegExp(\n    '\\\\b(hsl|hsla|rgb|rgba|matrix|(rotate|scale|translate)(X|Y|Z|3d)?)' +\n        '\\\\([-0-9a-z.%, ]+\\\\)',\n    'g');\n\n\n/**\n * Sanitize URLs inside url().\n *\n * NOTE: We could also consider using CSS.escape once that's available in the\n * browsers. However, loosely matching URL e.g. with url\\(.*\\) and then escaping\n * the contents would result in a slightly different language than CSS leading\n * to confusion of users. E.g. url(\")\") is valid in CSS but it would be invalid\n * as seen by our parser. On the other hand, url(\\) is invalid in CSS but our\n * parser would be fine with it.\n *\n * @param {string} value Untrusted CSS property value.\n * @return {string}\n * @private\n */\ngoog.html.SafeStyle.sanitizeUrl_ = function(value) {\n  return value.replace(\n      goog.html.SafeStyle.URL_RE_, function(match, before, url, after) {\n        var quote = '';\n        url = url.replace(/^(['\"])(.*)\\1$/, function(match, start, inside) {\n          quote = start;\n          return inside;\n        });\n        var sanitized = goog.html.SafeUrl.sanitize(url).getTypedStringValue();\n        return before + quote + sanitized + quote + after;\n      });\n};\n\n\n/**\n * Creates a new SafeStyle object by concatenating the values.\n * @param {...(!goog.html.SafeStyle|!Array<!goog.html.SafeStyle>)} var_args\n *     SafeStyles to concatenate.\n * @return {!goog.html.SafeStyle}\n */\ngoog.html.SafeStyle.concat = function(var_args) {\n  var style = '';\n\n  /**\n   * @param {!goog.html.SafeStyle|!Array<!goog.html.SafeStyle>} argument\n   */\n  var addArgument = function(argument) {\n    if (goog.isArray(argument)) {\n      goog.array.forEach(argument, addArgument);\n    } else {\n      style += goog.html.SafeStyle.unwrap(argument);\n    }\n  };\n\n  goog.array.forEach(arguments, addArgument);\n  if (!style) {\n    return goog.html.SafeStyle.EMPTY;\n  }\n  return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(\n      style);\n};\n","// Copyright 2014 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview The SafeStyleSheet type and its builders.\n *\n * TODO(xtof): Link to document stating type contract.\n */\n\ngoog.provide('goog.html.SafeStyleSheet');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.html.SafeStyle');\ngoog.require('goog.object');\ngoog.require('goog.string');\ngoog.require('goog.string.Const');\ngoog.require('goog.string.TypedString');\n\n\n\n/**\n * A string-like object which represents a CSS style sheet and that carries the\n * security type contract that its value, as a string, will not cause untrusted\n * script execution (XSS) when evaluated as CSS in a browser.\n *\n * Instances of this type must be created via the factory method\n * `goog.html.SafeStyleSheet.fromConstant` and not by invoking its\n * constructor. The constructor intentionally takes no parameters and the type\n * is immutable; hence only a default instance corresponding to the empty string\n * can be obtained via constructor invocation.\n *\n * A SafeStyleSheet's string representation can safely be interpolated as the\n * content of a style element within HTML. The SafeStyleSheet string should\n * not be escaped before interpolation.\n *\n * Values of this type must be composable, i.e. for any two values\n * `styleSheet1` and `styleSheet2` of this type,\n * {@code goog.html.SafeStyleSheet.unwrap(styleSheet1) +\n * goog.html.SafeStyleSheet.unwrap(styleSheet2)} must itself be a value that\n * satisfies the SafeStyleSheet type constraint. This requirement implies that\n * for any value `styleSheet` of this type,\n * `goog.html.SafeStyleSheet.unwrap(styleSheet1)` must end in\n * \"beginning of rule\" context.\n\n * A SafeStyleSheet can be constructed via security-reviewed unchecked\n * conversions. In this case producers of SafeStyleSheet must ensure themselves\n * that the SafeStyleSheet does not contain unsafe script. Note in particular\n * that {@code &lt;} is dangerous, even when inside CSS strings, and so should\n * always be forbidden or CSS-escaped in user controlled input. For example, if\n * {@code &lt;/style&gt;&lt;script&gt;evil&lt;/script&gt;\"} were interpolated\n * inside a CSS string, it would break out of the context of the original\n * style element and `evil` would execute. Also note that within an HTML\n * style (raw text) element, HTML character references, such as\n * {@code &amp;lt;}, are not allowed. See\n *\n http://www.w3.org/TR/html5/scripting-1.html#restrictions-for-contents-of-script-elements\n * (similar considerations apply to the style element).\n *\n * @see goog.html.SafeStyleSheet#fromConstant\n * @constructor\n * @final\n * @struct\n * @implements {goog.string.TypedString}\n */\ngoog.html.SafeStyleSheet = function() {\n  /**\n   * The contained value of this SafeStyleSheet.  The field has a purposely\n   * ugly name to make (non-compiled) code that attempts to directly access this\n   * field stand out.\n   * @private {string}\n   */\n  this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_ = '';\n\n  /**\n   * A type marker used to implement additional run-time type checking.\n   * @see goog.html.SafeStyleSheet#unwrap\n   * @const {!Object}\n   * @private\n   */\n  this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ =\n      goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_;\n};\n\n\n/**\n * @override\n * @const\n */\ngoog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString = true;\n\n\n/**\n * Type marker for the SafeStyleSheet type, used to implement additional\n * run-time type checking.\n * @const {!Object}\n * @private\n */\ngoog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {};\n\n\n/**\n * Creates a style sheet consisting of one selector and one style definition.\n * Use {@link goog.html.SafeStyleSheet.concat} to create longer style sheets.\n * This function doesn't support @import, @media and similar constructs.\n * @param {string} selector CSS selector, e.g. '#id' or 'tag .class, #id'. We\n *     support CSS3 selectors: https://w3.org/TR/css3-selectors/#selectors.\n * @param {!goog.html.SafeStyle.PropertyMap|!goog.html.SafeStyle} style Style\n *     definition associated with the selector.\n * @return {!goog.html.SafeStyleSheet}\n * @throws {Error} If invalid selector is provided.\n */\ngoog.html.SafeStyleSheet.createRule = function(selector, style) {\n  if (goog.string.contains(selector, '<')) {\n    throw new Error('Selector does not allow \\'<\\', got: ' + selector);\n  }\n\n  // Remove strings.\n  var selectorToCheck =\n      selector.replace(/('|\")((?!\\1)[^\\r\\n\\f\\\\]|\\\\[\\s\\S])*\\1/g, '');\n\n  // Check characters allowed in CSS3 selectors.\n  if (!/^[-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|]+$/.test(selectorToCheck)) {\n    throw new Error(\n        'Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\\\]()=^$|] and ' +\n        'strings, got: ' + selector);\n  }\n\n  // Check balanced () and [].\n  if (!goog.html.SafeStyleSheet.hasBalancedBrackets_(selectorToCheck)) {\n    throw new Error('() and [] in selector must be balanced, got: ' + selector);\n  }\n\n  if (!(style instanceof goog.html.SafeStyle)) {\n    style = goog.html.SafeStyle.create(style);\n  }\n  var styleSheet = selector + '{' + goog.html.SafeStyle.unwrap(style) + '}';\n  return goog.html.SafeStyleSheet\n      .createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(styleSheet);\n};\n\n\n/**\n * Checks if a string has balanced () and [] brackets.\n * @param {string} s String to check.\n * @return {boolean}\n * @private\n */\ngoog.html.SafeStyleSheet.hasBalancedBrackets_ = function(s) {\n  var brackets = {'(': ')', '[': ']'};\n  var expectedBrackets = [];\n  for (var i = 0; i < s.length; i++) {\n    var ch = s[i];\n    if (brackets[ch]) {\n      expectedBrackets.push(brackets[ch]);\n    } else if (goog.object.contains(brackets, ch)) {\n      if (expectedBrackets.pop() != ch) {\n        return false;\n      }\n    }\n  }\n  return expectedBrackets.length == 0;\n};\n\n\n/**\n * Creates a new SafeStyleSheet object by concatenating values.\n * @param {...(!goog.html.SafeStyleSheet|!Array<!goog.html.SafeStyleSheet>)}\n *     var_args Values to concatenate.\n * @return {!goog.html.SafeStyleSheet}\n */\ngoog.html.SafeStyleSheet.concat = function(var_args) {\n  var result = '';\n\n  /**\n   * @param {!goog.html.SafeStyleSheet|!Array<!goog.html.SafeStyleSheet>}\n   *     argument\n   */\n  var addArgument = function(argument) {\n    if (goog.isArray(argument)) {\n      goog.array.forEach(argument, addArgument);\n    } else {\n      result += goog.html.SafeStyleSheet.unwrap(argument);\n    }\n  };\n\n  goog.array.forEach(arguments, addArgument);\n  return goog.html.SafeStyleSheet\n      .createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(result);\n};\n\n\n/**\n * Creates a SafeStyleSheet object from a compile-time constant string.\n *\n * `styleSheet` must not have any &lt; characters in it, so that\n * the syntactic structure of the surrounding HTML is not affected.\n *\n * @param {!goog.string.Const} styleSheet A compile-time-constant string from\n *     which to create a SafeStyleSheet.\n * @return {!goog.html.SafeStyleSheet} A SafeStyleSheet object initialized to\n *     `styleSheet`.\n */\ngoog.html.SafeStyleSheet.fromConstant = function(styleSheet) {\n  var styleSheetString = goog.string.Const.unwrap(styleSheet);\n  if (styleSheetString.length === 0) {\n    return goog.html.SafeStyleSheet.EMPTY;\n  }\n  // > is a valid character in CSS selectors and there's no strict need to\n  // block it if we already block <.\n  goog.asserts.assert(\n      !goog.string.contains(styleSheetString, '<'),\n      \"Forbidden '<' character in style sheet string: \" + styleSheetString);\n  return goog.html.SafeStyleSheet\n      .createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(styleSheetString);\n};\n\n\n/**\n * Returns this SafeStyleSheet's value as a string.\n *\n * IMPORTANT: In code where it is security relevant that an object's type is\n * indeed `SafeStyleSheet`, use `goog.html.SafeStyleSheet.unwrap`\n * instead of this method. If in doubt, assume that it's security relevant. In\n * particular, note that goog.html functions which return a goog.html type do\n * not guarantee the returned instance is of the right type. For example:\n *\n * <pre>\n * var fakeSafeHtml = new String('fake');\n * fakeSafeHtml.__proto__ = goog.html.SafeHtml.prototype;\n * var newSafeHtml = goog.html.SafeHtml.htmlEscape(fakeSafeHtml);\n * // newSafeHtml is just an alias for fakeSafeHtml, it's passed through by\n * // goog.html.SafeHtml.htmlEscape() as fakeSafeHtml\n * // instanceof goog.html.SafeHtml.\n * </pre>\n *\n * @see goog.html.SafeStyleSheet#unwrap\n * @override\n */\ngoog.html.SafeStyleSheet.prototype.getTypedStringValue = function() {\n  return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_;\n};\n\n\nif (goog.DEBUG) {\n  /**\n   * Returns a debug string-representation of this value.\n   *\n   * To obtain the actual string value wrapped in a SafeStyleSheet, use\n   * `goog.html.SafeStyleSheet.unwrap`.\n   *\n   * @see goog.html.SafeStyleSheet#unwrap\n   * @override\n   */\n  goog.html.SafeStyleSheet.prototype.toString = function() {\n    return 'SafeStyleSheet{' +\n        this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_ + '}';\n  };\n}\n\n\n/**\n * Performs a runtime check that the provided object is indeed a\n * SafeStyleSheet object, and returns its value.\n *\n * @param {!goog.html.SafeStyleSheet} safeStyleSheet The object to extract from.\n * @return {string} The safeStyleSheet object's contained string, unless\n *     the run-time type check fails. In that case, `unwrap` returns an\n *     innocuous string, or, if assertions are enabled, throws\n *     `goog.asserts.AssertionError`.\n */\ngoog.html.SafeStyleSheet.unwrap = function(safeStyleSheet) {\n  // Perform additional Run-time type-checking to ensure that\n  // safeStyleSheet is indeed an instance of the expected type.  This\n  // provides some additional protection against security bugs due to\n  // application code that disables type checks.\n  // Specifically, the following checks are performed:\n  // 1. The object is an instance of the expected type.\n  // 2. The object is not an instance of a subclass.\n  // 3. The object carries a type marker for the expected type. \"Faking\" an\n  // object requires a reference to the type marker, which has names intended\n  // to stand out in code reviews.\n  if (safeStyleSheet instanceof goog.html.SafeStyleSheet &&\n      safeStyleSheet.constructor === goog.html.SafeStyleSheet &&\n      safeStyleSheet\n              .SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ===\n          goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_) {\n    return safeStyleSheet.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_;\n  } else {\n    goog.asserts.fail('expected object of type SafeStyleSheet, got \\'' +\n        safeStyleSheet + '\\' of type ' + goog.typeOf(safeStyleSheet));\n    return 'type_error:SafeStyleSheet';\n  }\n};\n\n\n/**\n * Package-internal utility method to create SafeStyleSheet instances.\n *\n * @param {string} styleSheet The string to initialize the SafeStyleSheet\n *     object with.\n * @return {!goog.html.SafeStyleSheet} The initialized SafeStyleSheet object.\n * @package\n */\ngoog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse =\n    function(styleSheet) {\n  return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(\n      styleSheet);\n};\n\n\n/**\n * Called from createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(). This\n * method exists only so that the compiler can dead code eliminate static\n * fields (like EMPTY) when they're not accessed.\n * @param {string} styleSheet\n * @return {!goog.html.SafeStyleSheet}\n * @private\n */\ngoog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_ =\n    function(styleSheet) {\n  this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_ = styleSheet;\n  return this;\n};\n\n\n/**\n * A SafeStyleSheet instance corresponding to the empty string.\n * @const {!goog.html.SafeStyleSheet}\n */\ngoog.html.SafeStyleSheet.EMPTY =\n    goog.html.SafeStyleSheet\n        .createSafeStyleSheetSecurityPrivateDoNotAccessOrElse('');\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n/**\n * @fileoverview The SafeHtml type and its builders.\n *\n * TODO(xtof): Link to document stating type contract.\n */\n\ngoog.provide('goog.html.SafeHtml');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.dom.TagName');\ngoog.require('goog.dom.tags');\ngoog.require('goog.html.SafeScript');\ngoog.require('goog.html.SafeStyle');\ngoog.require('goog.html.SafeStyleSheet');\ngoog.require('goog.html.SafeUrl');\ngoog.require('goog.html.TrustedResourceUrl');\ngoog.require('goog.i18n.bidi.Dir');\ngoog.require('goog.i18n.bidi.DirectionalString');\ngoog.require('goog.labs.userAgent.browser');\ngoog.require('goog.object');\ngoog.require('goog.string');\ngoog.require('goog.string.Const');\ngoog.require('goog.string.TypedString');\n\n\n\n/**\n * A string that is safe to use in HTML context in DOM APIs and HTML documents.\n *\n * A SafeHtml is a string-like object that carries the security type contract\n * that its value as a string will not cause untrusted script execution when\n * evaluated as HTML in a browser.\n *\n * Values of this type are guaranteed to be safe to use in HTML contexts,\n * such as, assignment to the innerHTML DOM property, or interpolation into\n * a HTML template in HTML PC_DATA context, in the sense that the use will not\n * result in a Cross-Site-Scripting vulnerability.\n *\n * Instances of this type must be created via the factory methods\n * (`goog.html.SafeHtml.create`, `goog.html.SafeHtml.htmlEscape`),\n * etc and not by invoking its constructor.  The constructor intentionally\n * takes no parameters and the type is immutable; hence only a default instance\n * corresponding to the empty string can be obtained via constructor invocation.\n *\n * @see goog.html.SafeHtml#create\n * @see goog.html.SafeHtml#htmlEscape\n * @constructor\n * @final\n * @struct\n * @implements {goog.i18n.bidi.DirectionalString}\n * @implements {goog.string.TypedString}\n */\ngoog.html.SafeHtml = function() {\n  /**\n   * The contained value of this SafeHtml.  The field has a purposely ugly\n   * name to make (non-compiled) code that attempts to directly access this\n   * field stand out.\n   * @private {string}\n   */\n  this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ = '';\n\n  /**\n   * A type marker used to implement additional run-time type checking.\n   * @see goog.html.SafeHtml#unwrap\n   * @const {!Object}\n   * @private\n   */\n  this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ =\n      goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_;\n\n  /**\n   * This SafeHtml's directionality, or null if unknown.\n   * @private {?goog.i18n.bidi.Dir}\n   */\n  this.dir_ = null;\n};\n\n\n/**\n * @override\n * @const\n */\ngoog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString = true;\n\n\n/** @override */\ngoog.html.SafeHtml.prototype.getDirection = function() {\n  return this.dir_;\n};\n\n\n/**\n * @override\n * @const\n */\ngoog.html.SafeHtml.prototype.implementsGoogStringTypedString = true;\n\n\n/**\n * Returns this SafeHtml's value as string.\n *\n * IMPORTANT: In code where it is security relevant that an object's type is\n * indeed `SafeHtml`, use `goog.html.SafeHtml.unwrap` instead of\n * this method. If in doubt, assume that it's security relevant. In particular,\n * note that goog.html functions which return a goog.html type do not guarantee\n * that the returned instance is of the right type. For example:\n *\n * <pre>\n * var fakeSafeHtml = new String('fake');\n * fakeSafeHtml.__proto__ = goog.html.SafeHtml.prototype;\n * var newSafeHtml = goog.html.SafeHtml.htmlEscape(fakeSafeHtml);\n * // newSafeHtml is just an alias for fakeSafeHtml, it's passed through by\n * // goog.html.SafeHtml.htmlEscape() as fakeSafeHtml\n * // instanceof goog.html.SafeHtml.\n * </pre>\n *\n * @see goog.html.SafeHtml#unwrap\n * @override\n */\ngoog.html.SafeHtml.prototype.getTypedStringValue = function() {\n  return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_;\n};\n\n\nif (goog.DEBUG) {\n  /**\n   * Returns a debug string-representation of this value.\n   *\n   * To obtain the actual string value wrapped in a SafeHtml, use\n   * `goog.html.SafeHtml.unwrap`.\n   *\n   * @see goog.html.SafeHtml#unwrap\n   * @override\n   */\n  goog.html.SafeHtml.prototype.toString = function() {\n    return 'SafeHtml{' + this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ +\n        '}';\n  };\n}\n\n\n/**\n * Performs a runtime check that the provided object is indeed a SafeHtml\n * object, and returns its value.\n * @param {!goog.html.SafeHtml} safeHtml The object to extract from.\n * @return {string} The SafeHtml object's contained string, unless the run-time\n *     type check fails. In that case, `unwrap` returns an innocuous\n *     string, or, if assertions are enabled, throws\n *     `goog.asserts.AssertionError`.\n */\ngoog.html.SafeHtml.unwrap = function(safeHtml) {\n  // Perform additional run-time type-checking to ensure that safeHtml is indeed\n  // an instance of the expected type.  This provides some additional protection\n  // against security bugs due to application code that disables type checks.\n  // Specifically, the following checks are performed:\n  // 1. The object is an instance of the expected type.\n  // 2. The object is not an instance of a subclass.\n  // 3. The object carries a type marker for the expected type. \"Faking\" an\n  // object requires a reference to the type marker, which has names intended\n  // to stand out in code reviews.\n  if (safeHtml instanceof goog.html.SafeHtml &&\n      safeHtml.constructor === goog.html.SafeHtml &&\n      safeHtml.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ ===\n          goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_) {\n    return safeHtml.privateDoNotAccessOrElseSafeHtmlWrappedValue_;\n  } else {\n    goog.asserts.fail('expected object of type SafeHtml, got \\'' +\n        safeHtml + '\\' of type ' + goog.typeOf(safeHtml));\n    return 'type_error:SafeHtml';\n  }\n};\n\n\n/**\n * Shorthand for union of types that can sensibly be converted to strings\n * or might already be SafeHtml (as SafeHtml is a goog.string.TypedString).\n * @private\n * @typedef {string|number|boolean|!goog.string.TypedString|\n *           !goog.i18n.bidi.DirectionalString}\n */\ngoog.html.SafeHtml.TextOrHtml_;\n\n\n/**\n * Returns HTML-escaped text as a SafeHtml object.\n *\n * If text is of a type that implements\n * `goog.i18n.bidi.DirectionalString`, the directionality of the new\n * `SafeHtml` object is set to `text`'s directionality, if known.\n * Otherwise, the directionality of the resulting SafeHtml is unknown (i.e.,\n * `null`).\n *\n * @param {!goog.html.SafeHtml.TextOrHtml_} textOrHtml The text to escape. If\n *     the parameter is of type SafeHtml it is returned directly (no escaping\n *     is done).\n * @return {!goog.html.SafeHtml} The escaped text, wrapped as a SafeHtml.\n */\ngoog.html.SafeHtml.htmlEscape = function(textOrHtml) {\n  if (textOrHtml instanceof goog.html.SafeHtml) {\n    return textOrHtml;\n  }\n  var dir = null;\n  if (textOrHtml.implementsGoogI18nBidiDirectionalString) {\n    dir = /** @type {!goog.i18n.bidi.DirectionalString} */ (textOrHtml)\n              .getDirection();\n  }\n  var textAsString;\n  if (textOrHtml.implementsGoogStringTypedString) {\n    textAsString = /** @type {!goog.string.TypedString} */ (textOrHtml)\n                       .getTypedStringValue();\n  } else {\n    textAsString = String(textOrHtml);\n  }\n  return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n      goog.string.htmlEscape(textAsString), dir);\n};\n\n\n/**\n * Returns HTML-escaped text as a SafeHtml object, with newlines changed to\n * &lt;br&gt;.\n * @param {!goog.html.SafeHtml.TextOrHtml_} textOrHtml The text to escape. If\n *     the parameter is of type SafeHtml it is returned directly (no escaping\n *     is done).\n * @return {!goog.html.SafeHtml} The escaped text, wrapped as a SafeHtml.\n */\ngoog.html.SafeHtml.htmlEscapePreservingNewlines = function(textOrHtml) {\n  if (textOrHtml instanceof goog.html.SafeHtml) {\n    return textOrHtml;\n  }\n  var html = goog.html.SafeHtml.htmlEscape(textOrHtml);\n  return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n      goog.string.newLineToBr(goog.html.SafeHtml.unwrap(html)),\n      html.getDirection());\n};\n\n\n/**\n * Returns HTML-escaped text as a SafeHtml object, with newlines changed to\n * &lt;br&gt; and escaping whitespace to preserve spatial formatting. Character\n * entity #160 is used to make it safer for XML.\n * @param {!goog.html.SafeHtml.TextOrHtml_} textOrHtml The text to escape. If\n *     the parameter is of type SafeHtml it is returned directly (no escaping\n *     is done).\n * @return {!goog.html.SafeHtml} The escaped text, wrapped as a SafeHtml.\n */\ngoog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces = function(\n    textOrHtml) {\n  if (textOrHtml instanceof goog.html.SafeHtml) {\n    return textOrHtml;\n  }\n  var html = goog.html.SafeHtml.htmlEscape(textOrHtml);\n  return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n      goog.string.whitespaceEscape(goog.html.SafeHtml.unwrap(html)),\n      html.getDirection());\n};\n\n\n/**\n * Coerces an arbitrary object into a SafeHtml object.\n *\n * If `textOrHtml` is already of type `goog.html.SafeHtml`, the same\n * object is returned. Otherwise, `textOrHtml` is coerced to string, and\n * HTML-escaped. If `textOrHtml` is of a type that implements\n * `goog.i18n.bidi.DirectionalString`, its directionality, if known, is\n * preserved.\n *\n * @param {!goog.html.SafeHtml.TextOrHtml_} textOrHtml The text or SafeHtml to\n *     coerce.\n * @return {!goog.html.SafeHtml} The resulting SafeHtml object.\n * @deprecated Use goog.html.SafeHtml.htmlEscape.\n */\ngoog.html.SafeHtml.from = goog.html.SafeHtml.htmlEscape;\n\n\n/**\n * @const\n * @private\n */\ngoog.html.SafeHtml.VALID_NAMES_IN_TAG_ = /^[a-zA-Z0-9-]+$/;\n\n\n/**\n * Set of attributes containing URL as defined at\n * http://www.w3.org/TR/html5/index.html#attributes-1.\n * @private @const {!Object<string,boolean>}\n */\ngoog.html.SafeHtml.URL_ATTRIBUTES_ = goog.object.createSet(\n    'action', 'cite', 'data', 'formaction', 'href', 'manifest', 'poster',\n    'src');\n\n\n/**\n * Tags which are unsupported via create(). They might be supported via a\n * tag-specific create method. These are tags which might require a\n * TrustedResourceUrl in one of their attributes or a restricted type for\n * their content.\n * @private @const {!Object<string,boolean>}\n */\ngoog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_ = goog.object.createSet(\n    goog.dom.TagName.APPLET, goog.dom.TagName.BASE, goog.dom.TagName.EMBED,\n    goog.dom.TagName.IFRAME, goog.dom.TagName.LINK, goog.dom.TagName.MATH,\n    goog.dom.TagName.META, goog.dom.TagName.OBJECT, goog.dom.TagName.SCRIPT,\n    goog.dom.TagName.STYLE, goog.dom.TagName.SVG, goog.dom.TagName.TEMPLATE);\n\n\n/**\n * @typedef {string|number|goog.string.TypedString|\n *     goog.html.SafeStyle.PropertyMap|undefined}\n */\ngoog.html.SafeHtml.AttributeValue;\n\n\n/**\n * Creates a SafeHtml content consisting of a tag with optional attributes and\n * optional content.\n *\n * For convenience tag names and attribute names are accepted as regular\n * strings, instead of goog.string.Const. Nevertheless, you should not pass\n * user-controlled values to these parameters. Note that these parameters are\n * syntactically validated at runtime, and invalid values will result in\n * an exception.\n *\n * Example usage:\n *\n * goog.html.SafeHtml.create('br');\n * goog.html.SafeHtml.create('div', {'class': 'a'});\n * goog.html.SafeHtml.create('p', {}, 'a');\n * goog.html.SafeHtml.create('p', {}, goog.html.SafeHtml.create('br'));\n *\n * goog.html.SafeHtml.create('span', {\n *   'style': {'margin': '0'}\n * });\n *\n * To guarantee SafeHtml's type contract is upheld there are restrictions on\n * attribute values and tag names.\n *\n * - For attributes which contain script code (on*), a goog.string.Const is\n *   required.\n * - For attributes which contain style (style), a goog.html.SafeStyle or a\n *   goog.html.SafeStyle.PropertyMap is required.\n * - For attributes which are interpreted as URLs (e.g. src, href) a\n *   goog.html.SafeUrl, goog.string.Const or string is required. If a string\n *   is passed, it will be sanitized with SafeUrl.sanitize().\n * - For tags which can load code or set security relevant page metadata,\n *   more specific goog.html.SafeHtml.create*() functions must be used. Tags\n *   which are not supported by this function are applet, base, embed, iframe,\n *   link, math, object, script, style, svg, and template.\n *\n * @param {!goog.dom.TagName|string} tagName The name of the tag. Only tag names\n *     consisting of [a-zA-Z0-9-] are allowed. Tag names documented above are\n *     disallowed.\n * @param {?Object<string, ?goog.html.SafeHtml.AttributeValue>=} opt_attributes\n *     Mapping from attribute names to their values. Only attribute names\n *     consisting of [a-zA-Z0-9-] are allowed. Value of null or undefined causes\n *     the attribute to be omitted.\n * @param {!goog.html.SafeHtml.TextOrHtml_|\n *     !Array<!goog.html.SafeHtml.TextOrHtml_>=} opt_content Content to\n *     HTML-escape and put inside the tag. This must be empty for void tags\n *     like <br>. Array elements are concatenated.\n * @return {!goog.html.SafeHtml} The SafeHtml content with the tag.\n * @throws {Error} If invalid tag name, attribute name, or attribute value is\n *     provided.\n * @throws {goog.asserts.AssertionError} If content for void tag is provided.\n */\ngoog.html.SafeHtml.create = function(tagName, opt_attributes, opt_content) {\n  goog.html.SafeHtml.verifyTagName(String(tagName));\n  return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(\n      String(tagName), opt_attributes, opt_content);\n};\n\n\n/**\n * Verifies if the tag name is valid and if it doesn't change the context.\n * E.g. STRONG is fine but SCRIPT throws because it changes context. See\n * goog.html.SafeHtml.create for an explanation of allowed tags.\n * @param {string} tagName\n * @throws {Error} If invalid tag name is provided.\n * @package\n */\ngoog.html.SafeHtml.verifyTagName = function(tagName) {\n  if (!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(tagName)) {\n    throw new Error('Invalid tag name <' + tagName + '>.');\n  }\n  if (tagName.toUpperCase() in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_) {\n    throw new Error('Tag name <' + tagName + '> is not allowed for SafeHtml.');\n  }\n};\n\n\n/**\n * Creates a SafeHtml representing an iframe tag.\n *\n * This by default restricts the iframe as much as possible by setting the\n * sandbox attribute to the empty string. If the iframe requires less\n * restrictions, set the sandbox attribute as tight as possible, but do not rely\n * on the sandbox as a security feature because it is not supported by older\n * browsers. If a sandbox is essential to security (e.g. for third-party\n * frames), use createSandboxIframe which checks for browser support.\n *\n * @see https://developer.mozilla.org/en/docs/Web/HTML/Element/iframe#attr-sandbox\n *\n * @param {?goog.html.TrustedResourceUrl=} opt_src The value of the src\n *     attribute. If null or undefined src will not be set.\n * @param {?goog.html.SafeHtml=} opt_srcdoc The value of the srcdoc attribute.\n *     If null or undefined srcdoc will not be set.\n * @param {?Object<string, ?goog.html.SafeHtml.AttributeValue>=} opt_attributes\n *     Mapping from attribute names to their values. Only attribute names\n *     consisting of [a-zA-Z0-9-] are allowed. Value of null or undefined causes\n *     the attribute to be omitted.\n * @param {!goog.html.SafeHtml.TextOrHtml_|\n *     !Array<!goog.html.SafeHtml.TextOrHtml_>=} opt_content Content to\n *     HTML-escape and put inside the tag. Array elements are concatenated.\n * @return {!goog.html.SafeHtml} The SafeHtml content with the tag.\n * @throws {Error} If invalid tag name, attribute name, or attribute value is\n *     provided. If opt_attributes contains the src or srcdoc attributes.\n */\ngoog.html.SafeHtml.createIframe = function(\n    opt_src, opt_srcdoc, opt_attributes, opt_content) {\n  if (opt_src) {\n    // Check whether this is really TrustedResourceUrl.\n    goog.html.TrustedResourceUrl.unwrap(opt_src);\n  }\n\n  var fixedAttributes = {};\n  fixedAttributes['src'] = opt_src || null;\n  fixedAttributes['srcdoc'] =\n      opt_srcdoc && goog.html.SafeHtml.unwrap(opt_srcdoc);\n  var defaultAttributes = {'sandbox': ''};\n  var attributes = goog.html.SafeHtml.combineAttributes(\n      fixedAttributes, defaultAttributes, opt_attributes);\n  return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(\n      'iframe', attributes, opt_content);\n};\n\n\n/**\n * Creates a SafeHtml representing a sandboxed iframe tag.\n *\n * The sandbox attribute is enforced in its most restrictive mode, an empty\n * string. Consequently, the security requirements for the src and srcdoc\n * attributes are relaxed compared to SafeHtml.createIframe. This function\n * will throw on browsers that do not support the sandbox attribute, as\n * determined by SafeHtml.canUseSandboxIframe.\n *\n * The SafeHtml returned by this function can trigger downloads with no\n * user interaction on Chrome (though only a few, further attempts are blocked).\n * Firefox and IE will block all downloads from the sandbox.\n *\n * @see https://developer.mozilla.org/en/docs/Web/HTML/Element/iframe#attr-sandbox\n * @see https://lists.w3.org/Archives/Public/public-whatwg-archive/2013Feb/0112.html\n *\n * @param {string|!goog.html.SafeUrl=} opt_src The value of the src\n *     attribute. If null or undefined src will not be set.\n * @param {string=} opt_srcdoc The value of the srcdoc attribute.\n *     If null or undefined srcdoc will not be set. Will not be sanitized.\n * @param {!Object<string, ?goog.html.SafeHtml.AttributeValue>=} opt_attributes\n *     Mapping from attribute names to their values. Only attribute names\n *     consisting of [a-zA-Z0-9-] are allowed. Value of null or undefined causes\n *     the attribute to be omitted.\n * @param {!goog.html.SafeHtml.TextOrHtml_|\n *     !Array<!goog.html.SafeHtml.TextOrHtml_>=} opt_content Content to\n *     HTML-escape and put inside the tag. Array elements are concatenated.\n * @return {!goog.html.SafeHtml} The SafeHtml content with the tag.\n * @throws {Error} If invalid tag name, attribute name, or attribute value is\n *     provided. If opt_attributes contains the src, srcdoc or sandbox\n *     attributes. If browser does not support the sandbox attribute on iframe.\n */\ngoog.html.SafeHtml.createSandboxIframe = function(\n    opt_src, opt_srcdoc, opt_attributes, opt_content) {\n  if (!goog.html.SafeHtml.canUseSandboxIframe()) {\n    throw new Error('The browser does not support sandboxed iframes.');\n  }\n\n  var fixedAttributes = {};\n  if (opt_src) {\n    // Note that sanitize is a no-op on SafeUrl.\n    fixedAttributes['src'] =\n        goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(opt_src));\n  } else {\n    fixedAttributes['src'] = null;\n  }\n  fixedAttributes['srcdoc'] = opt_srcdoc || null;\n  fixedAttributes['sandbox'] = '';\n  var attributes =\n      goog.html.SafeHtml.combineAttributes(fixedAttributes, {}, opt_attributes);\n  return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(\n      'iframe', attributes, opt_content);\n};\n\n\n/**\n * Checks if the user agent supports sandboxed iframes.\n * @return {boolean}\n */\ngoog.html.SafeHtml.canUseSandboxIframe = function() {\n  return goog.global['HTMLIFrameElement'] &&\n      ('sandbox' in goog.global['HTMLIFrameElement'].prototype);\n};\n\n\n/**\n * Creates a SafeHtml representing a script tag with the src attribute.\n * @param {!goog.html.TrustedResourceUrl} src The value of the src\n * attribute.\n * @param {?Object<string, ?goog.html.SafeHtml.AttributeValue>=}\n * opt_attributes\n *     Mapping from attribute names to their values. Only attribute names\n *     consisting of [a-zA-Z0-9-] are allowed. Value of null or undefined\n *     causes the attribute to be omitted.\n * @return {!goog.html.SafeHtml} The SafeHtml content with the tag.\n * @throws {Error} If invalid attribute name or value is provided. If\n *     opt_attributes contains the src attribute.\n */\ngoog.html.SafeHtml.createScriptSrc = function(src, opt_attributes) {\n  // TODO(mlourenco): The charset attribute should probably be blocked. If\n  // its value is attacker controlled, the script contains attacker controlled\n  // sub-strings (even if properly escaped) and the server does not set charset\n  // then XSS is likely possible.\n  // https://html.spec.whatwg.org/multipage/scripting.html#dom-script-charset\n\n  // Check whether this is really TrustedResourceUrl.\n  goog.html.TrustedResourceUrl.unwrap(src);\n\n  var fixedAttributes = {'src': src};\n  var defaultAttributes = {};\n  var attributes = goog.html.SafeHtml.combineAttributes(\n      fixedAttributes, defaultAttributes, opt_attributes);\n  return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(\n      'script', attributes);\n};\n\n\n/**\n * Creates a SafeHtml representing a script tag. Does not allow the language,\n * src, text or type attributes to be set.\n * @param {!goog.html.SafeScript|!Array<!goog.html.SafeScript>}\n *     script Content to put inside the tag. Array elements are\n *     concatenated.\n * @param {?Object<string, ?goog.html.SafeHtml.AttributeValue>=} opt_attributes\n *     Mapping from attribute names to their values. Only attribute names\n *     consisting of [a-zA-Z0-9-] are allowed. Value of null or undefined causes\n *     the attribute to be omitted.\n * @return {!goog.html.SafeHtml} The SafeHtml content with the tag.\n * @throws {Error} If invalid attribute name or attribute value is provided. If\n *     opt_attributes contains the language, src, text or type attribute.\n */\ngoog.html.SafeHtml.createScript = function(script, opt_attributes) {\n  for (var attr in opt_attributes) {\n    var attrLower = attr.toLowerCase();\n    if (attrLower == 'language' || attrLower == 'src' || attrLower == 'text' ||\n        attrLower == 'type') {\n      throw new Error('Cannot set \"' + attrLower + '\" attribute');\n    }\n  }\n\n  var content = '';\n  script = goog.array.concat(script);\n  for (var i = 0; i < script.length; i++) {\n    content += goog.html.SafeScript.unwrap(script[i]);\n  }\n  // Convert to SafeHtml so that it's not HTML-escaped. This is safe because\n  // as part of its contract, SafeScript should have no dangerous '<'.\n  var htmlContent =\n      goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n          content, goog.i18n.bidi.Dir.NEUTRAL);\n  return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(\n      'script', opt_attributes, htmlContent);\n};\n\n\n/**\n * Creates a SafeHtml representing a style tag. The type attribute is set\n * to \"text/css\".\n * @param {!goog.html.SafeStyleSheet|!Array<!goog.html.SafeStyleSheet>}\n *     styleSheet Content to put inside the tag. Array elements are\n *     concatenated.\n * @param {?Object<string, ?goog.html.SafeHtml.AttributeValue>=} opt_attributes\n *     Mapping from attribute names to their values. Only attribute names\n *     consisting of [a-zA-Z0-9-] are allowed. Value of null or undefined causes\n *     the attribute to be omitted.\n * @return {!goog.html.SafeHtml} The SafeHtml content with the tag.\n * @throws {Error} If invalid attribute name or attribute value is provided. If\n *     opt_attributes contains the type attribute.\n */\ngoog.html.SafeHtml.createStyle = function(styleSheet, opt_attributes) {\n  var fixedAttributes = {'type': 'text/css'};\n  var defaultAttributes = {};\n  var attributes = goog.html.SafeHtml.combineAttributes(\n      fixedAttributes, defaultAttributes, opt_attributes);\n\n  var content = '';\n  styleSheet = goog.array.concat(styleSheet);\n  for (var i = 0; i < styleSheet.length; i++) {\n    content += goog.html.SafeStyleSheet.unwrap(styleSheet[i]);\n  }\n  // Convert to SafeHtml so that it's not HTML-escaped. This is safe because\n  // as part of its contract, SafeStyleSheet should have no dangerous '<'.\n  var htmlContent =\n      goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n          content, goog.i18n.bidi.Dir.NEUTRAL);\n  return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(\n      'style', attributes, htmlContent);\n};\n\n\n/**\n * Creates a SafeHtml representing a meta refresh tag.\n * @param {!goog.html.SafeUrl|string} url Where to redirect. If a string is\n *     passed, it will be sanitized with SafeUrl.sanitize().\n * @param {number=} opt_secs Number of seconds until the page should be\n *     reloaded. Will be set to 0 if unspecified.\n * @return {!goog.html.SafeHtml} The SafeHtml content with the tag.\n */\ngoog.html.SafeHtml.createMetaRefresh = function(url, opt_secs) {\n\n  // Note that sanitize is a no-op on SafeUrl.\n  var unwrappedUrl = goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(url));\n\n  if (goog.labs.userAgent.browser.isIE() ||\n      goog.labs.userAgent.browser.isEdge()) {\n    // IE/EDGE can't parse the content attribute if the url contains a\n    // semicolon. We can fix this by adding quotes around the url, but then we\n    // can't parse quotes in the URL correctly. Also, it seems that IE/EDGE\n    // did not unescape semicolons in these URLs at some point in the past. We\n    // take a best-effort approach.\n    //\n    // If the URL has semicolons (which may happen in some cases, see\n    // http://www.w3.org/TR/1999/REC-html401-19991224/appendix/notes.html#h-B.2\n    // for instance), wrap it in single quotes to protect the semicolons.\n    // If the URL has semicolons and single quotes, url-encode the single quotes\n    // as well.\n    //\n    // This is imperfect. Notice that both ' and ; are reserved characters in\n    // URIs, so this could do the wrong thing, but at least it will do the wrong\n    // thing in only rare cases.\n    if (goog.string.contains(unwrappedUrl, ';')) {\n      unwrappedUrl = \"'\" + unwrappedUrl.replace(/'/g, '%27') + \"'\";\n    }\n  }\n  var attributes = {\n    'http-equiv': 'refresh',\n    'content': (opt_secs || 0) + '; url=' + unwrappedUrl\n  };\n\n  // This function will handle the HTML escaping for attributes.\n  return goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(\n      'meta', attributes);\n};\n\n\n/**\n * @param {string} tagName The tag name.\n * @param {string} name The attribute name.\n * @param {!goog.html.SafeHtml.AttributeValue} value The attribute value.\n * @return {string} A \"name=value\" string.\n * @throws {Error} If attribute value is unsafe for the given tag and attribute.\n * @private\n */\ngoog.html.SafeHtml.getAttrNameAndValue_ = function(tagName, name, value) {\n  // If it's goog.string.Const, allow any valid attribute name.\n  if (value instanceof goog.string.Const) {\n    value = goog.string.Const.unwrap(value);\n  } else if (name.toLowerCase() == 'style') {\n    value = goog.html.SafeHtml.getStyleValue_(value);\n  } else if (/^on/i.test(name)) {\n    // TODO(jakubvrana): Disallow more attributes with a special meaning.\n    throw new Error(\n        'Attribute \"' + name + '\" requires goog.string.Const value, \"' + value +\n        '\" given.');\n    // URL attributes handled differently according to tag.\n  } else if (name.toLowerCase() in goog.html.SafeHtml.URL_ATTRIBUTES_) {\n    if (value instanceof goog.html.TrustedResourceUrl) {\n      value = goog.html.TrustedResourceUrl.unwrap(value);\n    } else if (value instanceof goog.html.SafeUrl) {\n      value = goog.html.SafeUrl.unwrap(value);\n    } else if (goog.isString(value)) {\n      value = goog.html.SafeUrl.sanitize(value).getTypedStringValue();\n    } else {\n      throw new Error(\n          'Attribute \"' + name + '\" on tag \"' + tagName +\n          '\" requires goog.html.SafeUrl, goog.string.Const, or string,' +\n          ' value \"' + value + '\" given.');\n    }\n  }\n\n  // Accept SafeUrl, TrustedResourceUrl, etc. for attributes which only require\n  // HTML-escaping.\n  if (value.implementsGoogStringTypedString) {\n    // Ok to call getTypedStringValue() since there's no reliance on the type\n    // contract for security here.\n    value =\n        /** @type {!goog.string.TypedString} */ (value).getTypedStringValue();\n  }\n\n  goog.asserts.assert(\n      goog.isString(value) || goog.isNumber(value),\n      'String or number value expected, got ' + (typeof value) +\n          ' with value: ' + value);\n  return name + '=\"' + goog.string.htmlEscape(String(value)) + '\"';\n};\n\n\n/**\n * Gets value allowed in \"style\" attribute.\n * @param {!goog.html.SafeHtml.AttributeValue} value It could be SafeStyle or a\n *     map which will be passed to goog.html.SafeStyle.create.\n * @return {string} Unwrapped value.\n * @throws {Error} If string value is given.\n * @private\n */\ngoog.html.SafeHtml.getStyleValue_ = function(value) {\n  if (!goog.isObject(value)) {\n    throw new Error(\n        'The \"style\" attribute requires goog.html.SafeStyle or map ' +\n        'of style properties, ' + (typeof value) + ' given: ' + value);\n  }\n  if (!(value instanceof goog.html.SafeStyle)) {\n    // Process the property bag into a style object.\n    value = goog.html.SafeStyle.create(value);\n  }\n  return goog.html.SafeStyle.unwrap(value);\n};\n\n\n/**\n * Creates a SafeHtml content with known directionality consisting of a tag with\n * optional attributes and optional content.\n * @param {!goog.i18n.bidi.Dir} dir Directionality.\n * @param {string} tagName\n * @param {?Object<string, ?goog.html.SafeHtml.AttributeValue>=} opt_attributes\n * @param {!goog.html.SafeHtml.TextOrHtml_|\n *     !Array<!goog.html.SafeHtml.TextOrHtml_>=} opt_content\n * @return {!goog.html.SafeHtml} The SafeHtml content with the tag.\n */\ngoog.html.SafeHtml.createWithDir = function(\n    dir, tagName, opt_attributes, opt_content) {\n  var html = goog.html.SafeHtml.create(tagName, opt_attributes, opt_content);\n  html.dir_ = dir;\n  return html;\n};\n\n\n/**\n * Creates a new SafeHtml object by concatenating values.\n * @param {...(!goog.html.SafeHtml.TextOrHtml_|\n *     !Array<!goog.html.SafeHtml.TextOrHtml_>)} var_args Values to concatenate.\n * @return {!goog.html.SafeHtml}\n */\ngoog.html.SafeHtml.concat = function(var_args) {\n  var dir = goog.i18n.bidi.Dir.NEUTRAL;\n  var content = '';\n\n  /**\n   * @param {!goog.html.SafeHtml.TextOrHtml_|\n   *     !Array<!goog.html.SafeHtml.TextOrHtml_>} argument\n   */\n  var addArgument = function(argument) {\n    if (goog.isArray(argument)) {\n      goog.array.forEach(argument, addArgument);\n    } else {\n      var html = goog.html.SafeHtml.htmlEscape(argument);\n      content += goog.html.SafeHtml.unwrap(html);\n      var htmlDir = html.getDirection();\n      if (dir == goog.i18n.bidi.Dir.NEUTRAL) {\n        dir = htmlDir;\n      } else if (htmlDir != goog.i18n.bidi.Dir.NEUTRAL && dir != htmlDir) {\n        dir = null;\n      }\n    }\n  };\n\n  goog.array.forEach(arguments, addArgument);\n  return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n      content, dir);\n};\n\n\n/**\n * Creates a new SafeHtml object with known directionality by concatenating the\n * values.\n * @param {!goog.i18n.bidi.Dir} dir Directionality.\n * @param {...(!goog.html.SafeHtml.TextOrHtml_|\n *     !Array<!goog.html.SafeHtml.TextOrHtml_>)} var_args Elements of array\n *     arguments would be processed recursively.\n * @return {!goog.html.SafeHtml}\n */\ngoog.html.SafeHtml.concatWithDir = function(dir, var_args) {\n  var html = goog.html.SafeHtml.concat(goog.array.slice(arguments, 1));\n  html.dir_ = dir;\n  return html;\n};\n\n\n/**\n * Type marker for the SafeHtml type, used to implement additional run-time\n * type checking.\n * @const {!Object}\n * @private\n */\ngoog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_ = {};\n\n\n/**\n * Package-internal utility method to create SafeHtml instances.\n *\n * @param {string} html The string to initialize the SafeHtml object with.\n * @param {?goog.i18n.bidi.Dir} dir The directionality of the SafeHtml to be\n *     constructed, or null if unknown.\n * @return {!goog.html.SafeHtml} The initialized SafeHtml object.\n * @package\n */\ngoog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse = function(\n    html, dir) {\n  return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(\n      html, dir);\n};\n\n\n/**\n * Called from createSafeHtmlSecurityPrivateDoNotAccessOrElse(). This\n * method exists only so that the compiler can dead code eliminate static\n * fields (like EMPTY) when they're not accessed.\n * @param {string} html\n * @param {?goog.i18n.bidi.Dir} dir\n * @return {!goog.html.SafeHtml}\n * @private\n */\ngoog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_ = function(\n    html, dir) {\n  this.privateDoNotAccessOrElseSafeHtmlWrappedValue_ = html;\n  this.dir_ = dir;\n  return this;\n};\n\n\n/**\n * Like create() but does not restrict which tags can be constructed.\n *\n * @param {string} tagName Tag name. Set or validated by caller.\n * @param {?Object<string, ?goog.html.SafeHtml.AttributeValue>=} opt_attributes\n * @param {(!goog.html.SafeHtml.TextOrHtml_|\n *     !Array<!goog.html.SafeHtml.TextOrHtml_>)=} opt_content\n * @return {!goog.html.SafeHtml}\n * @throws {Error} If invalid or unsafe attribute name or value is provided.\n * @throws {goog.asserts.AssertionError} If content for void tag is provided.\n * @package\n */\ngoog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse = function(\n    tagName, opt_attributes, opt_content) {\n  var dir = null;\n  var result = '<' + tagName;\n  result += goog.html.SafeHtml.stringifyAttributes(tagName, opt_attributes);\n\n  var content = opt_content;\n  if (!goog.isDefAndNotNull(content)) {\n    content = [];\n  } else if (!goog.isArray(content)) {\n    content = [content];\n  }\n\n  if (goog.dom.tags.isVoidTag(tagName.toLowerCase())) {\n    goog.asserts.assert(\n        !content.length, 'Void tag <' + tagName + '> does not allow content.');\n    result += '>';\n  } else {\n    var html = goog.html.SafeHtml.concat(content);\n    result += '>' + goog.html.SafeHtml.unwrap(html) + '</' + tagName + '>';\n    dir = html.getDirection();\n  }\n\n  var dirAttribute = opt_attributes && opt_attributes['dir'];\n  if (dirAttribute) {\n    if (/^(ltr|rtl|auto)$/i.test(dirAttribute)) {\n      // If the tag has the \"dir\" attribute specified then its direction is\n      // neutral because it can be safely used in any context.\n      dir = goog.i18n.bidi.Dir.NEUTRAL;\n    } else {\n      dir = null;\n    }\n  }\n\n  return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n      result, dir);\n};\n\n\n/**\n * Creates a string with attributes to insert after tagName.\n * @param {string} tagName\n * @param {?Object<string, ?goog.html.SafeHtml.AttributeValue>=} opt_attributes\n * @return {string} Returns an empty string if there are no attributes, returns\n *     a string starting with a space otherwise.\n * @throws {Error} If attribute value is unsafe for the given tag and attribute.\n * @package\n */\ngoog.html.SafeHtml.stringifyAttributes = function(tagName, opt_attributes) {\n  var result = '';\n  if (opt_attributes) {\n    for (var name in opt_attributes) {\n      if (!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(name)) {\n        throw new Error('Invalid attribute name \"' + name + '\".');\n      }\n      var value = opt_attributes[name];\n      if (!goog.isDefAndNotNull(value)) {\n        continue;\n      }\n      result +=\n          ' ' + goog.html.SafeHtml.getAttrNameAndValue_(tagName, name, value);\n    }\n  }\n  return result;\n};\n\n\n/**\n * @param {!Object<string, ?goog.html.SafeHtml.AttributeValue>} fixedAttributes\n * @param {!Object<string, string>} defaultAttributes\n * @param {?Object<string, ?goog.html.SafeHtml.AttributeValue>=} opt_attributes\n *     Optional attributes passed to create*().\n * @return {!Object<string, ?goog.html.SafeHtml.AttributeValue>}\n * @throws {Error} If opt_attributes contains an attribute with the same name\n *     as an attribute in fixedAttributes.\n * @package\n */\ngoog.html.SafeHtml.combineAttributes = function(\n    fixedAttributes, defaultAttributes, opt_attributes) {\n  var combinedAttributes = {};\n  var name;\n\n  for (name in fixedAttributes) {\n    goog.asserts.assert(name.toLowerCase() == name, 'Must be lower case');\n    combinedAttributes[name] = fixedAttributes[name];\n  }\n  for (name in defaultAttributes) {\n    goog.asserts.assert(name.toLowerCase() == name, 'Must be lower case');\n    combinedAttributes[name] = defaultAttributes[name];\n  }\n\n  for (name in opt_attributes) {\n    var nameLower = name.toLowerCase();\n    if (nameLower in fixedAttributes) {\n      throw new Error(\n          'Cannot override \"' + nameLower + '\" attribute, got \"' + name +\n          '\" with value \"' + opt_attributes[name] + '\"');\n    }\n    if (nameLower in defaultAttributes) {\n      delete combinedAttributes[nameLower];\n    }\n    combinedAttributes[name] = opt_attributes[name];\n  }\n\n  return combinedAttributes;\n};\n\n\n/**\n * A SafeHtml instance corresponding to the HTML doctype: \"<!DOCTYPE html>\".\n * @const {!goog.html.SafeHtml}\n */\ngoog.html.SafeHtml.DOCTYPE_HTML =\n    goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n        '<!DOCTYPE html>', goog.i18n.bidi.Dir.NEUTRAL);\n\n\n/**\n * A SafeHtml instance corresponding to the empty string.\n * @const {!goog.html.SafeHtml}\n */\ngoog.html.SafeHtml.EMPTY =\n    goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n        '', goog.i18n.bidi.Dir.NEUTRAL);\n\n\n/**\n * A SafeHtml instance corresponding to the <br> tag.\n * @const {!goog.html.SafeHtml}\n */\ngoog.html.SafeHtml.BR =\n    goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n        '<br>', goog.i18n.bidi.Dir.NEUTRAL);\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Type-safe wrappers for unsafe DOM APIs.\n *\n * This file provides type-safe wrappers for DOM APIs that can result in\n * cross-site scripting (XSS) vulnerabilities, if the API is supplied with\n * untrusted (attacker-controlled) input.  Instead of plain strings, the type\n * safe wrappers consume values of types from the goog.html package whose\n * contract promises that values are safe to use in the corresponding context.\n *\n * Hence, a program that exclusively uses the wrappers in this file (i.e., whose\n * only reference to security-sensitive raw DOM APIs are in this file) is\n * guaranteed to be free of XSS due to incorrect use of such DOM APIs (modulo\n * correctness of code that produces values of the respective goog.html types,\n * and absent code that violates type safety).\n *\n * For example, assigning to an element's .innerHTML property a string that is\n * derived (even partially) from untrusted input typically results in an XSS\n * vulnerability. The type-safe wrapper goog.dom.safe.setInnerHtml consumes a\n * value of type goog.html.SafeHtml, whose contract states that using its values\n * in a HTML context will not result in XSS. Hence a program that is free of\n * direct assignments to any element's innerHTML property (with the exception of\n * the assignment to .innerHTML in this file) is guaranteed to be free of XSS\n * due to assignment of untrusted strings to the innerHTML property.\n */\n\ngoog.provide('goog.dom.safe');\ngoog.provide('goog.dom.safe.InsertAdjacentHtmlPosition');\n\ngoog.require('goog.asserts');\ngoog.require('goog.dom.asserts');\ngoog.require('goog.html.SafeHtml');\ngoog.require('goog.html.SafeScript');\ngoog.require('goog.html.SafeStyle');\ngoog.require('goog.html.SafeUrl');\ngoog.require('goog.html.TrustedResourceUrl');\ngoog.require('goog.string');\ngoog.require('goog.string.Const');\n\n\n/** @enum {string} */\ngoog.dom.safe.InsertAdjacentHtmlPosition = {\n  AFTERBEGIN: 'afterbegin',\n  AFTEREND: 'afterend',\n  BEFOREBEGIN: 'beforebegin',\n  BEFOREEND: 'beforeend'\n};\n\n\n/**\n * Inserts known-safe HTML into a Node, at the specified position.\n * @param {!Node} node The node on which to call insertAdjacentHTML.\n * @param {!goog.dom.safe.InsertAdjacentHtmlPosition} position Position where\n *     to insert the HTML.\n * @param {!goog.html.SafeHtml} html The known-safe HTML to insert.\n */\ngoog.dom.safe.insertAdjacentHtml = function(node, position, html) {\n  node.insertAdjacentHTML(position, goog.html.SafeHtml.unwrap(html));\n};\n\n\n/**\n * Tags not allowed in goog.dom.safe.setInnerHtml.\n * @private @const {!Object<string, boolean>}\n */\ngoog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_ = {\n  'MATH': true,\n  'SCRIPT': true,\n  'STYLE': true,\n  'SVG': true,\n  'TEMPLATE': true\n};\n\n\n/**\n * Assigns known-safe HTML to an element's innerHTML property.\n * @param {!Element} elem The element whose innerHTML is to be assigned to.\n * @param {!goog.html.SafeHtml} html The known-safe HTML to assign.\n * @throws {Error} If called with one of these tags: math, script, style, svg,\n *     template.\n */\ngoog.dom.safe.setInnerHtml = function(elem, html) {\n  if (goog.asserts.ENABLE_ASSERTS) {\n    var tagName = elem.tagName.toUpperCase();\n    if (goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[tagName]) {\n      throw new Error(\n          'goog.dom.safe.setInnerHtml cannot be used to set content of ' +\n          elem.tagName + '.');\n    }\n  }\n  elem.innerHTML = goog.html.SafeHtml.unwrap(html);\n};\n\n\n/**\n * Assigns known-safe HTML to an element's outerHTML property.\n * @param {!Element} elem The element whose outerHTML is to be assigned to.\n * @param {!goog.html.SafeHtml} html The known-safe HTML to assign.\n */\ngoog.dom.safe.setOuterHtml = function(elem, html) {\n  elem.outerHTML = goog.html.SafeHtml.unwrap(html);\n};\n\n\n/**\n * Safely assigns a URL a form element's action property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * anchor's href property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.setFormElementAction(formEl, url);\n * which is a safe alternative to\n *   formEl.action = url;\n * The latter can result in XSS vulnerabilities if url is a\n * user-/attacker-controlled value.\n *\n * @param {!Element} form The form element whose action property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setFormElementAction = function(form, url) {\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  goog.dom.asserts.assertIsHTMLFormElement(form).action =\n      goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n/**\n * Safely assigns a URL to a button element's formaction property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * anchor's href property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.setButtonFormAction(buttonEl, url);\n * which is a safe alternative to\n *   buttonEl.action = url;\n * The latter can result in XSS vulnerabilities if url is a\n * user-/attacker-controlled value.\n *\n * @param {!Element} button The button element whose action property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setButtonFormAction = function(button, url) {\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  goog.dom.asserts.assertIsHTMLButtonElement(button).formAction =\n      goog.html.SafeUrl.unwrap(safeUrl);\n};\n/**\n * Safely assigns a URL to an input element's formaction property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * anchor's href property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.setInputFormAction(inputEl, url);\n * which is a safe alternative to\n *   inputEl.action = url;\n * The latter can result in XSS vulnerabilities if url is a\n * user-/attacker-controlled value.\n *\n * @param {!Element} input The input element whose action property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setInputFormAction = function(input, url) {\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  goog.dom.asserts.assertIsHTMLInputElement(input).formAction =\n      goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n/**\n * Sets the given element's style property to the contents of the provided\n * SafeStyle object.\n * @param {!Element} elem\n * @param {!goog.html.SafeStyle} style\n */\ngoog.dom.safe.setStyle = function(elem, style) {\n  elem.style.cssText = goog.html.SafeStyle.unwrap(style);\n};\n\n\n/**\n * Writes known-safe HTML to a document.\n * @param {!Document} doc The document to be written to.\n * @param {!goog.html.SafeHtml} html The known-safe HTML to assign.\n */\ngoog.dom.safe.documentWrite = function(doc, html) {\n  doc.write(goog.html.SafeHtml.unwrap(html));\n};\n\n\n/**\n * Safely assigns a URL to an anchor element's href property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * anchor's href property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.setAnchorHref(anchorEl, url);\n * which is a safe alternative to\n *   anchorEl.href = url;\n * The latter can result in XSS vulnerabilities if url is a\n * user-/attacker-controlled value.\n *\n * @param {!HTMLAnchorElement} anchor The anchor element whose href property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setAnchorHref = function(anchor, url) {\n  goog.dom.asserts.assertIsHTMLAnchorElement(anchor);\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  anchor.href = goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n\n/**\n * Safely assigns a URL to an image element's src property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * image's src property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * @param {!HTMLImageElement} imageElement The image element whose src property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setImageSrc = function(imageElement, url) {\n  goog.dom.asserts.assertIsHTMLImageElement(imageElement);\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  imageElement.src = goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n/**\n * Safely assigns a URL to a video element's src property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * video's src property.  If url is of type string however, it is first\n * sanitized using goog.html.SafeUrl.sanitize.\n *\n * @param {!HTMLVideoElement} videoElement The video element whose src property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setVideoSrc = function(videoElement, url) {\n  goog.dom.asserts.assertIsHTMLVideoElement(videoElement);\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  videoElement.src = goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n/**\n * Safely assigns a URL to an embed element's src property.\n *\n * Example usage:\n *   goog.dom.safe.setEmbedSrc(embedEl, url);\n * which is a safe alternative to\n *   embedEl.src = url;\n * The latter can result in loading untrusted code unless it is ensured that\n * the URL refers to a trustworthy resource.\n *\n * @param {!HTMLEmbedElement} embed The embed element whose src property\n *     is to be assigned to.\n * @param {!goog.html.TrustedResourceUrl} url The URL to assign.\n */\ngoog.dom.safe.setEmbedSrc = function(embed, url) {\n  goog.dom.asserts.assertIsHTMLEmbedElement(embed);\n  embed.src = goog.html.TrustedResourceUrl.unwrap(url);\n};\n\n\n/**\n * Safely assigns a URL to a frame element's src property.\n *\n * Example usage:\n *   goog.dom.safe.setFrameSrc(frameEl, url);\n * which is a safe alternative to\n *   frameEl.src = url;\n * The latter can result in loading untrusted code unless it is ensured that\n * the URL refers to a trustworthy resource.\n *\n * @param {!HTMLFrameElement} frame The frame element whose src property\n *     is to be assigned to.\n * @param {!goog.html.TrustedResourceUrl} url The URL to assign.\n */\ngoog.dom.safe.setFrameSrc = function(frame, url) {\n  goog.dom.asserts.assertIsHTMLFrameElement(frame);\n  frame.src = goog.html.TrustedResourceUrl.unwrap(url);\n};\n\n\n/**\n * Safely assigns a URL to an iframe element's src property.\n *\n * Example usage:\n *   goog.dom.safe.setIframeSrc(iframeEl, url);\n * which is a safe alternative to\n *   iframeEl.src = url;\n * The latter can result in loading untrusted code unless it is ensured that\n * the URL refers to a trustworthy resource.\n *\n * @param {!HTMLIFrameElement} iframe The iframe element whose src property\n *     is to be assigned to.\n * @param {!goog.html.TrustedResourceUrl} url The URL to assign.\n */\ngoog.dom.safe.setIframeSrc = function(iframe, url) {\n  goog.dom.asserts.assertIsHTMLIFrameElement(iframe);\n  iframe.src = goog.html.TrustedResourceUrl.unwrap(url);\n};\n\n\n/**\n * Safely assigns HTML to an iframe element's srcdoc property.\n *\n * Example usage:\n *   goog.dom.safe.setIframeSrcdoc(iframeEl, safeHtml);\n * which is a safe alternative to\n *   iframeEl.srcdoc = html;\n * The latter can result in loading untrusted code.\n *\n * @param {!HTMLIFrameElement} iframe The iframe element whose srcdoc property\n *     is to be assigned to.\n * @param {!goog.html.SafeHtml} html The HTML to assign.\n */\ngoog.dom.safe.setIframeSrcdoc = function(iframe, html) {\n  goog.dom.asserts.assertIsHTMLIFrameElement(iframe);\n  iframe.srcdoc = goog.html.SafeHtml.unwrap(html);\n};\n\n\n/**\n * Safely sets a link element's href and rel properties. Whether or not\n * the URL assigned to href has to be a goog.html.TrustedResourceUrl\n * depends on the value of the rel property. If rel contains \"stylesheet\"\n * then a TrustedResourceUrl is required.\n *\n * Example usage:\n *   goog.dom.safe.setLinkHrefAndRel(linkEl, url, 'stylesheet');\n * which is a safe alternative to\n *   linkEl.rel = 'stylesheet';\n *   linkEl.href = url;\n * The latter can result in loading untrusted code unless it is ensured that\n * the URL refers to a trustworthy resource.\n *\n * @param {!HTMLLinkElement} link The link element whose href property\n *     is to be assigned to.\n * @param {string|!goog.html.SafeUrl|!goog.html.TrustedResourceUrl} url The URL\n *     to assign to the href property. Must be a TrustedResourceUrl if the\n *     value assigned to rel contains \"stylesheet\". A string value is\n *     sanitized with goog.html.SafeUrl.sanitize.\n * @param {string} rel The value to assign to the rel property.\n * @throws {Error} if rel contains \"stylesheet\" and url is not a\n *     TrustedResourceUrl\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setLinkHrefAndRel = function(link, url, rel) {\n  goog.dom.asserts.assertIsHTMLLinkElement(link);\n  link.rel = rel;\n  if (goog.string.caseInsensitiveContains(rel, 'stylesheet')) {\n    goog.asserts.assert(\n        url instanceof goog.html.TrustedResourceUrl,\n        'URL must be TrustedResourceUrl because \"rel\" contains \"stylesheet\"');\n    link.href = goog.html.TrustedResourceUrl.unwrap(url);\n  } else if (url instanceof goog.html.TrustedResourceUrl) {\n    link.href = goog.html.TrustedResourceUrl.unwrap(url);\n  } else if (url instanceof goog.html.SafeUrl) {\n    link.href = goog.html.SafeUrl.unwrap(url);\n  } else {  // string\n    // SafeUrl.sanitize must return legitimate SafeUrl when passed a string.\n    link.href =\n        goog.html.SafeUrl.sanitizeAssertUnchanged(url).getTypedStringValue();\n  }\n};\n\n\n/**\n * Safely assigns a URL to an object element's data property.\n *\n * Example usage:\n *   goog.dom.safe.setObjectData(objectEl, url);\n * which is a safe alternative to\n *   objectEl.data = url;\n * The latter can result in loading untrusted code unless setit is ensured that\n * the URL refers to a trustworthy resource.\n *\n * @param {!HTMLObjectElement} object The object element whose data property\n *     is to be assigned to.\n * @param {!goog.html.TrustedResourceUrl} url The URL to assign.\n */\ngoog.dom.safe.setObjectData = function(object, url) {\n  goog.dom.asserts.assertIsHTMLObjectElement(object);\n  object.data = goog.html.TrustedResourceUrl.unwrap(url);\n};\n\n\n/**\n * Safely assigns a URL to a script element's src property.\n *\n * Example usage:\n *   goog.dom.safe.setScriptSrc(scriptEl, url);\n * which is a safe alternative to\n *   scriptEl.src = url;\n * The latter can result in loading untrusted code unless it is ensured that\n * the URL refers to a trustworthy resource.\n *\n * @param {!HTMLScriptElement} script The script element whose src property\n *     is to be assigned to.\n * @param {!goog.html.TrustedResourceUrl} url The URL to assign.\n */\ngoog.dom.safe.setScriptSrc = function(script, url) {\n  goog.dom.asserts.assertIsHTMLScriptElement(script);\n  script.src = goog.html.TrustedResourceUrl.unwrap(url);\n\n  // If CSP nonces are used, propagate them to dynamically created scripts.\n  // This is necessary to allow nonce-based CSPs without 'strict-dynamic'.\n  var nonce = goog.getScriptNonce();\n  if (nonce) {\n    script.setAttribute('nonce', nonce);\n  }\n};\n\n\n/**\n * Safely assigns a value to a script element's content.\n *\n * Example usage:\n *   goog.dom.safe.setScriptContent(scriptEl, content);\n * which is a safe alternative to\n *   scriptEl.text = content;\n * The latter can result in executing untrusted code unless it is ensured that\n * the code is loaded from a trustworthy resource.\n *\n * @param {!HTMLScriptElement} script The script element whose content is being\n *     set.\n * @param {!goog.html.SafeScript} content The content to assign.\n */\ngoog.dom.safe.setScriptContent = function(script, content) {\n  goog.dom.asserts.assertIsHTMLScriptElement(script);\n  script.text = goog.html.SafeScript.unwrap(content);\n\n  // If CSP nonces are used, propagate them to dynamically created scripts.\n  // This is necessary to allow nonce-based CSPs without 'strict-dynamic'.\n  var nonce = goog.getScriptNonce();\n  if (nonce) {\n    script.setAttribute('nonce', nonce);\n  }\n};\n\n\n/**\n * Safely assigns a URL to a Location object's href property.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and assigned to\n * loc's href property.  If url is of type string however, it is first sanitized\n * using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.setLocationHref(document.location, redirectUrl);\n * which is a safe alternative to\n *   document.location.href = redirectUrl;\n * The latter can result in XSS vulnerabilities if redirectUrl is a\n * user-/attacker-controlled value.\n *\n * @param {!Location} loc The Location object whose href property is to be\n *     assigned to.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.setLocationHref = function(loc, url) {\n  goog.dom.asserts.assertIsLocation(loc);\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  loc.href = goog.html.SafeUrl.unwrap(safeUrl);\n};\n\n\n/**\n * Safely replaces the URL of a Location object.\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and\n * passed to Location#replace. If url is of type string however, it is\n * first sanitized using goog.html.SafeUrl.sanitize.\n *\n * Example usage:\n *   goog.dom.safe.replaceHref(document.location, newUrl);\n * which is a safe alternative to\n *   document.location.replace(newUrl);\n * The latter can result in XSS vulnerabilities if newUrl is a\n * user-/attacker-controlled value.\n *\n * @param {!Location} loc The Location object which is to be replaced.\n * @param {string|!goog.html.SafeUrl} url The URL to assign.\n * @see goog.html.SafeUrl#sanitize\n */\ngoog.dom.safe.replaceLocation = function(loc, url) {\n  goog.dom.asserts.assertIsLocation(loc);\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  loc.replace(goog.html.SafeUrl.unwrap(safeUrl));\n};\n\n\n/**\n * Safely opens a URL in a new window (via window.open).\n *\n * If url is of type goog.html.SafeUrl, its value is unwrapped and passed in to\n * window.open.  If url is of type string however, it is first sanitized\n * using goog.html.SafeUrl.sanitize.\n *\n * Note that this function does not prevent leakages via the referer that is\n * sent by window.open. It is advised to only use this to open 1st party URLs.\n *\n * Example usage:\n *   goog.dom.safe.openInWindow(url);\n * which is a safe alternative to\n *   window.open(url);\n * The latter can result in XSS vulnerabilities if redirectUrl is a\n * user-/attacker-controlled value.\n *\n * @param {string|!goog.html.SafeUrl} url The URL to open.\n * @param {Window=} opt_openerWin Window of which to call the .open() method.\n *     Defaults to the global window.\n * @param {!goog.string.Const=} opt_name Name of the window to open in. Can be\n *     _top, etc as allowed by window.open().\n * @param {string=} opt_specs Comma-separated list of specifications, same as\n *     in window.open().\n * @param {boolean=} opt_replace Whether to replace the current entry in browser\n *     history, same as in window.open().\n * @return {Window} Window the url was opened in.\n */\ngoog.dom.safe.openInWindow = function(\n    url, opt_openerWin, opt_name, opt_specs, opt_replace) {\n  /** @type {!goog.html.SafeUrl} */\n  var safeUrl;\n  if (url instanceof goog.html.SafeUrl) {\n    safeUrl = url;\n  } else {\n    safeUrl = goog.html.SafeUrl.sanitizeAssertUnchanged(url);\n  }\n  var win = opt_openerWin || window;\n  return win.open(\n      goog.html.SafeUrl.unwrap(safeUrl),\n      // If opt_name is undefined, simply passing that in to open() causes IE to\n      // reuse the current window instead of opening a new one. Thus we pass ''\n      // in instead, which according to spec opens a new window. See\n      // https://html.spec.whatwg.org/multipage/browsers.html#dom-open .\n      opt_name ? goog.string.Const.unwrap(opt_name) : '', opt_specs,\n      opt_replace);\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Unchecked conversions to create values of goog.html types from\n * plain strings.  Use of these functions could potentially result in instances\n * of goog.html types that violate their type contracts, and hence result in\n * security vulnerabilties.\n *\n * Therefore, all uses of the methods herein must be carefully security\n * reviewed.  Avoid use of the methods in this file whenever possible; instead\n * prefer to create instances of goog.html types using inherently safe builders\n * or template systems.\n */\n\n\ngoog.provide('goog.html.uncheckedconversions');\n\ngoog.require('goog.asserts');\ngoog.require('goog.html.SafeHtml');\ngoog.require('goog.html.SafeScript');\ngoog.require('goog.html.SafeStyle');\ngoog.require('goog.html.SafeStyleSheet');\ngoog.require('goog.html.SafeUrl');\ngoog.require('goog.html.TrustedResourceUrl');\ngoog.require('goog.string');\ngoog.require('goog.string.Const');\n\n\n/**\n * Performs an \"unchecked conversion\" to SafeHtml from a plain string that is\n * known to satisfy the SafeHtml type contract.\n *\n * IMPORTANT: Uses of this method must be carefully security-reviewed to ensure\n * that the value of `html` satisfies the SafeHtml type contract in all\n * possible program states.\n *\n *\n * @param {!goog.string.Const} justification A constant string explaining why\n *     this use of this method is safe. May include a security review ticket\n *     number.\n * @param {string} html A string that is claimed to adhere to the SafeHtml\n *     contract.\n * @param {?goog.i18n.bidi.Dir=} opt_dir The optional directionality of the\n *     SafeHtml to be constructed. A null or undefined value signifies an\n *     unknown directionality.\n * @return {!goog.html.SafeHtml} The value of html, wrapped in a SafeHtml\n *     object.\n */\ngoog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract =\n    function(justification, html, opt_dir) {\n  // unwrap() called inside an assert so that justification can be optimized\n  // away in production code.\n  goog.asserts.assertString(\n      goog.string.Const.unwrap(justification), 'must provide justification');\n  goog.asserts.assert(\n      !goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(justification)),\n      'must provide non-empty justification');\n  return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n      html, opt_dir || null);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" to SafeScript from a plain string that is\n * known to satisfy the SafeScript type contract.\n *\n * IMPORTANT: Uses of this method must be carefully security-reviewed to ensure\n * that the value of `script` satisfies the SafeScript type contract in\n * all possible program states.\n *\n *\n * @param {!goog.string.Const} justification A constant string explaining why\n *     this use of this method is safe. May include a security review ticket\n *     number.\n * @param {string} script The string to wrap as a SafeScript.\n * @return {!goog.html.SafeScript} The value of `script`, wrapped in a\n *     SafeScript object.\n */\ngoog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract =\n    function(justification, script) {\n  // unwrap() called inside an assert so that justification can be optimized\n  // away in production code.\n  goog.asserts.assertString(\n      goog.string.Const.unwrap(justification), 'must provide justification');\n  goog.asserts.assert(\n      !goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(justification)),\n      'must provide non-empty justification');\n  return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(\n      script);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" to SafeStyle from a plain string that is\n * known to satisfy the SafeStyle type contract.\n *\n * IMPORTANT: Uses of this method must be carefully security-reviewed to ensure\n * that the value of `style` satisfies the SafeStyle type contract in all\n * possible program states.\n *\n *\n * @param {!goog.string.Const} justification A constant string explaining why\n *     this use of this method is safe. May include a security review ticket\n *     number.\n * @param {string} style The string to wrap as a SafeStyle.\n * @return {!goog.html.SafeStyle} The value of `style`, wrapped in a\n *     SafeStyle object.\n */\ngoog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract =\n    function(justification, style) {\n  // unwrap() called inside an assert so that justification can be optimized\n  // away in production code.\n  goog.asserts.assertString(\n      goog.string.Const.unwrap(justification), 'must provide justification');\n  goog.asserts.assert(\n      !goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(justification)),\n      'must provide non-empty justification');\n  return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(\n      style);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" to SafeStyleSheet from a plain string\n * that is known to satisfy the SafeStyleSheet type contract.\n *\n * IMPORTANT: Uses of this method must be carefully security-reviewed to ensure\n * that the value of `styleSheet` satisfies the SafeStyleSheet type\n * contract in all possible program states.\n *\n *\n * @param {!goog.string.Const} justification A constant string explaining why\n *     this use of this method is safe. May include a security review ticket\n *     number.\n * @param {string} styleSheet The string to wrap as a SafeStyleSheet.\n * @return {!goog.html.SafeStyleSheet} The value of `styleSheet`, wrapped\n *     in a SafeStyleSheet object.\n */\ngoog.html.uncheckedconversions\n    .safeStyleSheetFromStringKnownToSatisfyTypeContract = function(\n    justification, styleSheet) {\n  // unwrap() called inside an assert so that justification can be optimized\n  // away in production code.\n  goog.asserts.assertString(\n      goog.string.Const.unwrap(justification), 'must provide justification');\n  goog.asserts.assert(\n      !goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(justification)),\n      'must provide non-empty justification');\n  return goog.html.SafeStyleSheet\n      .createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(styleSheet);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" to SafeUrl from a plain string that is\n * known to satisfy the SafeUrl type contract.\n *\n * IMPORTANT: Uses of this method must be carefully security-reviewed to ensure\n * that the value of `url` satisfies the SafeUrl type contract in all\n * possible program states.\n *\n *\n * @param {!goog.string.Const} justification A constant string explaining why\n *     this use of this method is safe. May include a security review ticket\n *     number.\n * @param {string} url The string to wrap as a SafeUrl.\n * @return {!goog.html.SafeUrl} The value of `url`, wrapped in a SafeUrl\n *     object.\n */\ngoog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract =\n    function(justification, url) {\n  // unwrap() called inside an assert so that justification can be optimized\n  // away in production code.\n  goog.asserts.assertString(\n      goog.string.Const.unwrap(justification), 'must provide justification');\n  goog.asserts.assert(\n      !goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(justification)),\n      'must provide non-empty justification');\n  return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(url);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" to TrustedResourceUrl from a plain string\n * that is known to satisfy the TrustedResourceUrl type contract.\n *\n * IMPORTANT: Uses of this method must be carefully security-reviewed to ensure\n * that the value of `url` satisfies the TrustedResourceUrl type contract\n * in all possible program states.\n *\n *\n * @param {!goog.string.Const} justification A constant string explaining why\n *     this use of this method is safe. May include a security review ticket\n *     number.\n * @param {string} url The string to wrap as a TrustedResourceUrl.\n * @return {!goog.html.TrustedResourceUrl} The value of `url`, wrapped in\n *     a TrustedResourceUrl object.\n */\ngoog.html.uncheckedconversions\n    .trustedResourceUrlFromStringKnownToSatisfyTypeContract = function(\n    justification, url) {\n  // unwrap() called inside an assert so that justification can be optimized\n  // away in production code.\n  goog.asserts.assertString(\n      goog.string.Const.unwrap(justification), 'must provide justification');\n  goog.asserts.assert(\n      !goog.string.isEmptyOrWhitespace(goog.string.Const.unwrap(justification)),\n      'must provide non-empty justification');\n  return goog.html.TrustedResourceUrl\n      .createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(url);\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Additional mathematical functions.\n */\n\ngoog.provide('goog.math');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\n\n\n/**\n * Returns a random integer greater than or equal to 0 and less than `a`.\n * @param {number} a  The upper bound for the random integer (exclusive).\n * @return {number} A random integer N such that 0 <= N < a.\n */\ngoog.math.randomInt = function(a) {\n  return Math.floor(Math.random() * a);\n};\n\n\n/**\n * Returns a random number greater than or equal to `a` and less than\n * `b`.\n * @param {number} a  The lower bound for the random number (inclusive).\n * @param {number} b  The upper bound for the random number (exclusive).\n * @return {number} A random number N such that a <= N < b.\n */\ngoog.math.uniformRandom = function(a, b) {\n  return a + Math.random() * (b - a);\n};\n\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\ngoog.math.clamp = function(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n};\n\n\n/**\n * The % operator in JavaScript returns the remainder of a / b, but differs from\n * some other languages in that the result will have the same sign as the\n * dividend. For example, -1 % 8 == -1, whereas in some other languages\n * (such as Python) the result would be 7. This function emulates the more\n * correct modulo behavior, which is useful for certain applications such as\n * calculating an offset index in a circular list.\n *\n * @param {number} a The dividend.\n * @param {number} b The divisor.\n * @return {number} a % b where the result is between 0 and b (either 0 <= x < b\n *     or b < x <= 0, depending on the sign of b).\n */\ngoog.math.modulo = function(a, b) {\n  var r = a % b;\n  // If r and b differ in sign, add b to wrap the result to the correct sign.\n  return (r * b < 0) ? r + b : r;\n};\n\n\n/**\n * Performs linear interpolation between values a and b. Returns the value\n * between a and b proportional to x (when x is between 0 and 1. When x is\n * outside this range, the return value is a linear extrapolation).\n * @param {number} a A number.\n * @param {number} b A number.\n * @param {number} x The proportion between a and b.\n * @return {number} The interpolated value between a and b.\n */\ngoog.math.lerp = function(a, b, x) {\n  return a + x * (b - a);\n};\n\n\n/**\n * Tests whether the two values are equal to each other, within a certain\n * tolerance to adjust for floating point errors.\n * @param {number} a A number.\n * @param {number} b A number.\n * @param {number=} opt_tolerance Optional tolerance range. Defaults\n *     to 0.000001. If specified, should be greater than 0.\n * @return {boolean} Whether `a` and `b` are nearly equal.\n */\ngoog.math.nearlyEquals = function(a, b, opt_tolerance) {\n  return Math.abs(a - b) <= (opt_tolerance || 0.000001);\n};\n\n\n// TODO(user): Rename to normalizeAngle, retaining old name as deprecated\n// alias.\n/**\n * Normalizes an angle to be in range [0-360). Angles outside this range will\n * be normalized to be the equivalent angle with that range.\n * @param {number} angle Angle in degrees.\n * @return {number} Standardized angle.\n */\ngoog.math.standardAngle = function(angle) {\n  return goog.math.modulo(angle, 360);\n};\n\n\n/**\n * Normalizes an angle to be in range [0-2*PI). Angles outside this range will\n * be normalized to be the equivalent angle with that range.\n * @param {number} angle Angle in radians.\n * @return {number} Standardized angle.\n */\ngoog.math.standardAngleInRadians = function(angle) {\n  return goog.math.modulo(angle, 2 * Math.PI);\n};\n\n\n/**\n * Converts degrees to radians.\n * @param {number} angleDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\ngoog.math.toRadians = function(angleDegrees) {\n  return angleDegrees * Math.PI / 180;\n};\n\n\n/**\n * Converts radians to degrees.\n * @param {number} angleRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\ngoog.math.toDegrees = function(angleRadians) {\n  return angleRadians * 180 / Math.PI;\n};\n\n\n/**\n * For a given angle and radius, finds the X portion of the offset.\n * @param {number} degrees Angle in degrees (zero points in +X direction).\n * @param {number} radius Radius.\n * @return {number} The x-distance for the angle and radius.\n */\ngoog.math.angleDx = function(degrees, radius) {\n  return radius * Math.cos(goog.math.toRadians(degrees));\n};\n\n\n/**\n * For a given angle and radius, finds the Y portion of the offset.\n * @param {number} degrees Angle in degrees (zero points in +X direction).\n * @param {number} radius Radius.\n * @return {number} The y-distance for the angle and radius.\n */\ngoog.math.angleDy = function(degrees, radius) {\n  return radius * Math.sin(goog.math.toRadians(degrees));\n};\n\n\n/**\n * Computes the angle between two points (x1,y1) and (x2,y2).\n * Angle zero points in the +X direction, 90 degrees points in the +Y\n * direction (down) and from there we grow clockwise towards 360 degrees.\n * @param {number} x1 x of first point.\n * @param {number} y1 y of first point.\n * @param {number} x2 x of second point.\n * @param {number} y2 y of second point.\n * @return {number} Standardized angle in degrees of the vector from\n *     x1,y1 to x2,y2.\n */\ngoog.math.angle = function(x1, y1, x2, y2) {\n  return goog.math.standardAngle(\n      goog.math.toDegrees(Math.atan2(y2 - y1, x2 - x1)));\n};\n\n\n/**\n * Computes the difference between startAngle and endAngle (angles in degrees).\n * @param {number} startAngle  Start angle in degrees.\n * @param {number} endAngle  End angle in degrees.\n * @return {number} The number of degrees that when added to\n *     startAngle will result in endAngle. Positive numbers mean that the\n *     direction is clockwise. Negative numbers indicate a counter-clockwise\n *     direction.\n *     The shortest route (clockwise vs counter-clockwise) between the angles\n *     is used.\n *     When the difference is 180 degrees, the function returns 180 (not -180)\n *     angleDifference(30, 40) is 10, and angleDifference(40, 30) is -10.\n *     angleDifference(350, 10) is 20, and angleDifference(10, 350) is -20.\n */\ngoog.math.angleDifference = function(startAngle, endAngle) {\n  var d =\n      goog.math.standardAngle(endAngle) - goog.math.standardAngle(startAngle);\n  if (d > 180) {\n    d = d - 360;\n  } else if (d <= -180) {\n    d = 360 + d;\n  }\n  return d;\n};\n\n\n/**\n * Returns the sign of a number as per the \"sign\" or \"signum\" function.\n * @param {number} x The number to take the sign of.\n * @return {number} -1 when negative, 1 when positive, 0 when 0. Preserves\n *     signed zeros and NaN.\n */\ngoog.math.sign = function(x) {\n  if (x > 0) {\n    return 1;\n  }\n  if (x < 0) {\n    return -1;\n  }\n  return x;  // Preserves signed zeros and NaN.\n};\n\n\n/**\n * JavaScript implementation of Longest Common Subsequence problem.\n * http://en.wikipedia.org/wiki/Longest_common_subsequence\n *\n * Returns the longest possible array that is subarray of both of given arrays.\n *\n * @param {IArrayLike<S>} array1 First array of objects.\n * @param {IArrayLike<T>} array2 Second array of objects.\n * @param {Function=} opt_compareFn Function that acts as a custom comparator\n *     for the array ojects. Function should return true if objects are equal,\n *     otherwise false.\n * @param {Function=} opt_collectorFn Function used to decide what to return\n *     as a result subsequence. It accepts 2 arguments: index of common element\n *     in the first array and index in the second. The default function returns\n *     element from the first array.\n * @return {!Array<S|T>} A list of objects that are common to both arrays\n *     such that there is no common subsequence with size greater than the\n *     length of the list.\n * @template S,T\n */\ngoog.math.longestCommonSubsequence = function(\n    array1, array2, opt_compareFn, opt_collectorFn) {\n\n  var compare = opt_compareFn || function(a, b) { return a == b; };\n\n  var collect = opt_collectorFn || function(i1, i2) { return array1[i1]; };\n\n  var length1 = array1.length;\n  var length2 = array2.length;\n\n  var arr = [];\n  for (var i = 0; i < length1 + 1; i++) {\n    arr[i] = [];\n    arr[i][0] = 0;\n  }\n\n  for (var j = 0; j < length2 + 1; j++) {\n    arr[0][j] = 0;\n  }\n\n  for (i = 1; i <= length1; i++) {\n    for (j = 1; j <= length2; j++) {\n      if (compare(array1[i - 1], array2[j - 1])) {\n        arr[i][j] = arr[i - 1][j - 1] + 1;\n      } else {\n        arr[i][j] = Math.max(arr[i - 1][j], arr[i][j - 1]);\n      }\n    }\n  }\n\n  // Backtracking\n  var result = [];\n  var i = length1, j = length2;\n  while (i > 0 && j > 0) {\n    if (compare(array1[i - 1], array2[j - 1])) {\n      result.unshift(collect(i - 1, j - 1));\n      i--;\n      j--;\n    } else {\n      if (arr[i - 1][j] > arr[i][j - 1]) {\n        i--;\n      } else {\n        j--;\n      }\n    }\n  }\n\n  return result;\n};\n\n\n/**\n * Returns the sum of the arguments.\n * @param {...number} var_args Numbers to add.\n * @return {number} The sum of the arguments (0 if no arguments were provided,\n *     `NaN` if any of the arguments is not a valid number).\n */\ngoog.math.sum = function(var_args) {\n  return /** @type {number} */ (\n      goog.array.reduce(\n          arguments, function(sum, value) { return sum + value; }, 0));\n};\n\n\n/**\n * Returns the arithmetic mean of the arguments.\n * @param {...number} var_args Numbers to average.\n * @return {number} The average of the arguments (`NaN` if no arguments\n *     were provided or any of the arguments is not a valid number).\n */\ngoog.math.average = function(var_args) {\n  return goog.math.sum.apply(null, arguments) / arguments.length;\n};\n\n\n/**\n * Returns the unbiased sample variance of the arguments. For a definition,\n * see e.g. http://en.wikipedia.org/wiki/Variance\n * @param {...number} var_args Number samples to analyze.\n * @return {number} The unbiased sample variance of the arguments (0 if fewer\n *     than two samples were provided, or `NaN` if any of the samples is\n *     not a valid number).\n */\ngoog.math.sampleVariance = function(var_args) {\n  var sampleSize = arguments.length;\n  if (sampleSize < 2) {\n    return 0;\n  }\n\n  var mean = goog.math.average.apply(null, arguments);\n  var variance =\n      goog.math.sum.apply(null, goog.array.map(arguments, function(val) {\n        return Math.pow(val - mean, 2);\n      })) / (sampleSize - 1);\n\n  return variance;\n};\n\n\n/**\n * Returns the sample standard deviation of the arguments.  For a definition of\n * sample standard deviation, see e.g.\n * http://en.wikipedia.org/wiki/Standard_deviation\n * @param {...number} var_args Number samples to analyze.\n * @return {number} The sample standard deviation of the arguments (0 if fewer\n *     than two samples were provided, or `NaN` if any of the samples is\n *     not a valid number).\n */\ngoog.math.standardDeviation = function(var_args) {\n  return Math.sqrt(goog.math.sampleVariance.apply(null, arguments));\n};\n\n\n/**\n * Returns whether the supplied number represents an integer, i.e. that is has\n * no fractional component.  No range-checking is performed on the number.\n * @param {number} num The number to test.\n * @return {boolean} Whether `num` is an integer.\n */\ngoog.math.isInt = function(num) {\n  return isFinite(num) && num % 1 == 0;\n};\n\n\n/**\n * Returns whether the supplied number is finite and not NaN.\n * @param {number} num The number to test.\n * @return {boolean} Whether `num` is a finite number.\n * @deprecated Use {@link isFinite} instead.\n */\ngoog.math.isFiniteNumber = function(num) {\n  return isFinite(num);\n};\n\n\n/**\n * @param {number} num The number to test.\n * @return {boolean} Whether it is negative zero.\n */\ngoog.math.isNegativeZero = function(num) {\n  return num == 0 && 1 / num < 0;\n};\n\n\n/**\n * Returns the precise value of floor(log10(num)).\n * Simpler implementations didn't work because of floating point rounding\n * errors. For example\n * <ul>\n * <li>Math.floor(Math.log(num) / Math.LN10) is off by one for num == 1e+3.\n * <li>Math.floor(Math.log(num) * Math.LOG10E) is off by one for num == 1e+15.\n * <li>Math.floor(Math.log10(num)) is off by one for num == 1e+15 - 1.\n * </ul>\n * @param {number} num A floating point number.\n * @return {number} Its logarithm to base 10 rounded down to the nearest\n *     integer if num > 0. -Infinity if num == 0. NaN if num < 0.\n */\ngoog.math.log10Floor = function(num) {\n  if (num > 0) {\n    var x = Math.round(Math.log(num) * Math.LOG10E);\n    return x - (parseFloat('1e' + x) > num ? 1 : 0);\n  }\n  return num == 0 ? -Infinity : NaN;\n};\n\n\n/**\n * A tweaked variant of `Math.floor` which tolerates if the passed number\n * is infinitesimally smaller than the closest integer. It often happens with\n * the results of floating point calculations because of the finite precision\n * of the intermediate results. For example {@code Math.floor(Math.log(1000) /\n * Math.LN10) == 2}, not 3 as one would expect.\n * @param {number} num A number.\n * @param {number=} opt_epsilon An infinitesimally small positive number, the\n *     rounding error to tolerate.\n * @return {number} The largest integer less than or equal to `num`.\n */\ngoog.math.safeFloor = function(num, opt_epsilon) {\n  goog.asserts.assert(!goog.isDef(opt_epsilon) || opt_epsilon > 0);\n  return Math.floor(num + (opt_epsilon || 2e-15));\n};\n\n\n/**\n * A tweaked variant of `Math.ceil`. See `goog.math.safeFloor` for\n * details.\n * @param {number} num A number.\n * @param {number=} opt_epsilon An infinitesimally small positive number, the\n *     rounding error to tolerate.\n * @return {number} The smallest integer greater than or equal to `num`.\n */\ngoog.math.safeCeil = function(num, opt_epsilon) {\n  goog.asserts.assert(!goog.isDef(opt_epsilon) || opt_epsilon > 0);\n  return Math.ceil(num - (opt_epsilon || 2e-15));\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview A utility class for representing two-dimensional positions.\n */\n\n\ngoog.provide('goog.math.Coordinate');\n\ngoog.require('goog.math');\n\n\n\n/**\n * Class for representing coordinates and positions.\n * @param {number=} opt_x Left, defaults to 0.\n * @param {number=} opt_y Top, defaults to 0.\n * @struct\n * @constructor\n */\ngoog.math.Coordinate = function(opt_x, opt_y) {\n  /**\n   * X-value\n   * @type {number}\n   */\n  this.x = goog.isDef(opt_x) ? opt_x : 0;\n\n  /**\n   * Y-value\n   * @type {number}\n   */\n  this.y = goog.isDef(opt_y) ? opt_y : 0;\n};\n\n\n/**\n * Returns a new copy of the coordinate.\n * @return {!goog.math.Coordinate} A clone of this coordinate.\n */\ngoog.math.Coordinate.prototype.clone = function() {\n  return new goog.math.Coordinate(this.x, this.y);\n};\n\n\nif (goog.DEBUG) {\n  /**\n   * Returns a nice string representing the coordinate.\n   * @return {string} In the form (50, 73).\n   * @override\n   */\n  goog.math.Coordinate.prototype.toString = function() {\n    return '(' + this.x + ', ' + this.y + ')';\n  };\n}\n\n\n/**\n * Returns whether the specified value is equal to this coordinate.\n * @param {*} other Some other value.\n * @return {boolean} Whether the specified value is equal to this coordinate.\n */\ngoog.math.Coordinate.prototype.equals = function(other) {\n  return other instanceof goog.math.Coordinate &&\n      goog.math.Coordinate.equals(this, other);\n};\n\n\n/**\n * Compares coordinates for equality.\n * @param {goog.math.Coordinate} a A Coordinate.\n * @param {goog.math.Coordinate} b A Coordinate.\n * @return {boolean} True iff the coordinates are equal, or if both are null.\n */\ngoog.math.Coordinate.equals = function(a, b) {\n  if (a == b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  return a.x == b.x && a.y == b.y;\n};\n\n\n/**\n * Returns the distance between two coordinates.\n * @param {!goog.math.Coordinate} a A Coordinate.\n * @param {!goog.math.Coordinate} b A Coordinate.\n * @return {number} The distance between `a` and `b`.\n */\ngoog.math.Coordinate.distance = function(a, b) {\n  var dx = a.x - b.x;\n  var dy = a.y - b.y;\n  return Math.sqrt(dx * dx + dy * dy);\n};\n\n\n/**\n * Returns the magnitude of a coordinate.\n * @param {!goog.math.Coordinate} a A Coordinate.\n * @return {number} The distance between the origin and `a`.\n */\ngoog.math.Coordinate.magnitude = function(a) {\n  return Math.sqrt(a.x * a.x + a.y * a.y);\n};\n\n\n/**\n * Returns the angle from the origin to a coordinate.\n * @param {!goog.math.Coordinate} a A Coordinate.\n * @return {number} The angle, in degrees, clockwise from the positive X\n *     axis to `a`.\n */\ngoog.math.Coordinate.azimuth = function(a) {\n  return goog.math.angle(0, 0, a.x, a.y);\n};\n\n\n/**\n * Returns the squared distance between two coordinates. Squared distances can\n * be used for comparisons when the actual value is not required.\n *\n * Performance note: eliminating the square root is an optimization often used\n * in lower-level languages, but the speed difference is not nearly as\n * pronounced in JavaScript (only a few percent.)\n *\n * @param {!goog.math.Coordinate} a A Coordinate.\n * @param {!goog.math.Coordinate} b A Coordinate.\n * @return {number} The squared distance between `a` and `b`.\n */\ngoog.math.Coordinate.squaredDistance = function(a, b) {\n  var dx = a.x - b.x;\n  var dy = a.y - b.y;\n  return dx * dx + dy * dy;\n};\n\n\n/**\n * Returns the difference between two coordinates as a new\n * goog.math.Coordinate.\n * @param {!goog.math.Coordinate} a A Coordinate.\n * @param {!goog.math.Coordinate} b A Coordinate.\n * @return {!goog.math.Coordinate} A Coordinate representing the difference\n *     between `a` and `b`.\n */\ngoog.math.Coordinate.difference = function(a, b) {\n  return new goog.math.Coordinate(a.x - b.x, a.y - b.y);\n};\n\n\n/**\n * Returns the sum of two coordinates as a new goog.math.Coordinate.\n * @param {!goog.math.Coordinate} a A Coordinate.\n * @param {!goog.math.Coordinate} b A Coordinate.\n * @return {!goog.math.Coordinate} A Coordinate representing the sum of the two\n *     coordinates.\n */\ngoog.math.Coordinate.sum = function(a, b) {\n  return new goog.math.Coordinate(a.x + b.x, a.y + b.y);\n};\n\n\n/**\n * Rounds the x and y fields to the next larger integer values.\n * @return {!goog.math.Coordinate} This coordinate with ceil'd fields.\n */\ngoog.math.Coordinate.prototype.ceil = function() {\n  this.x = Math.ceil(this.x);\n  this.y = Math.ceil(this.y);\n  return this;\n};\n\n\n/**\n * Rounds the x and y fields to the next smaller integer values.\n * @return {!goog.math.Coordinate} This coordinate with floored fields.\n */\ngoog.math.Coordinate.prototype.floor = function() {\n  this.x = Math.floor(this.x);\n  this.y = Math.floor(this.y);\n  return this;\n};\n\n\n/**\n * Rounds the x and y fields to the nearest integer values.\n * @return {!goog.math.Coordinate} This coordinate with rounded fields.\n */\ngoog.math.Coordinate.prototype.round = function() {\n  this.x = Math.round(this.x);\n  this.y = Math.round(this.y);\n  return this;\n};\n\n\n/**\n * Translates this box by the given offsets. If a `goog.math.Coordinate`\n * is given, then the x and y values are translated by the coordinate's x and y.\n * Otherwise, x and y are translated by `tx` and `opt_ty`\n * respectively.\n * @param {number|goog.math.Coordinate} tx The value to translate x by or the\n *     the coordinate to translate this coordinate by.\n * @param {number=} opt_ty The value to translate y by.\n * @return {!goog.math.Coordinate} This coordinate after translating.\n */\ngoog.math.Coordinate.prototype.translate = function(tx, opt_ty) {\n  if (tx instanceof goog.math.Coordinate) {\n    this.x += tx.x;\n    this.y += tx.y;\n  } else {\n    this.x += Number(tx);\n    if (goog.isNumber(opt_ty)) {\n      this.y += opt_ty;\n    }\n  }\n  return this;\n};\n\n\n/**\n * Scales this coordinate by the given scale factors. The x and y values are\n * scaled by `sx` and `opt_sy` respectively.  If `opt_sy`\n * is not given, then `sx` is used for both x and y.\n * @param {number} sx The scale factor to use for the x dimension.\n * @param {number=} opt_sy The scale factor to use for the y dimension.\n * @return {!goog.math.Coordinate} This coordinate after scaling.\n */\ngoog.math.Coordinate.prototype.scale = function(sx, opt_sy) {\n  var sy = goog.isNumber(opt_sy) ? opt_sy : sx;\n  this.x *= sx;\n  this.y *= sy;\n  return this;\n};\n\n\n/**\n * Rotates this coordinate clockwise about the origin (or, optionally, the given\n * center) by the given angle, in radians.\n * @param {number} radians The angle by which to rotate this coordinate\n *     clockwise about the given center, in radians.\n * @param {!goog.math.Coordinate=} opt_center The center of rotation. Defaults\n *     to (0, 0) if not given.\n */\ngoog.math.Coordinate.prototype.rotateRadians = function(radians, opt_center) {\n  var center = opt_center || new goog.math.Coordinate(0, 0);\n\n  var x = this.x;\n  var y = this.y;\n  var cos = Math.cos(radians);\n  var sin = Math.sin(radians);\n\n  this.x = (x - center.x) * cos - (y - center.y) * sin + center.x;\n  this.y = (x - center.x) * sin + (y - center.y) * cos + center.y;\n};\n\n\n/**\n * Rotates this coordinate clockwise about the origin (or, optionally, the given\n * center) by the given angle, in degrees.\n * @param {number} degrees The angle by which to rotate this coordinate\n *     clockwise about the given center, in degrees.\n * @param {!goog.math.Coordinate=} opt_center The center of rotation. Defaults\n *     to (0, 0) if not given.\n */\ngoog.math.Coordinate.prototype.rotateDegrees = function(degrees, opt_center) {\n  this.rotateRadians(goog.math.toRadians(degrees), opt_center);\n};\n","// Copyright 2007 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview A utility class for representing two-dimensional sizes.\n * @author brenneman@google.com (Shawn Brenneman)\n */\n\n\ngoog.provide('goog.math.Size');\n\n\n\n/**\n * Class for representing sizes consisting of a width and height. Undefined\n * width and height support is deprecated and results in compiler warning.\n * @param {number} width Width.\n * @param {number} height Height.\n * @struct\n * @constructor\n */\ngoog.math.Size = function(width, height) {\n  /**\n   * Width\n   * @type {number}\n   */\n  this.width = width;\n\n  /**\n   * Height\n   * @type {number}\n   */\n  this.height = height;\n};\n\n\n/**\n * Compares sizes for equality.\n * @param {goog.math.Size} a A Size.\n * @param {goog.math.Size} b A Size.\n * @return {boolean} True iff the sizes have equal widths and equal\n *     heights, or if both are null.\n */\ngoog.math.Size.equals = function(a, b) {\n  if (a == b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  return a.width == b.width && a.height == b.height;\n};\n\n\n/**\n * @return {!goog.math.Size} A new copy of the Size.\n */\ngoog.math.Size.prototype.clone = function() {\n  return new goog.math.Size(this.width, this.height);\n};\n\n\nif (goog.DEBUG) {\n  /**\n   * Returns a nice string representing size.\n   * @return {string} In the form (50 x 73).\n   * @override\n   */\n  goog.math.Size.prototype.toString = function() {\n    return '(' + this.width + ' x ' + this.height + ')';\n  };\n}\n\n\n/**\n * @return {number} The longer of the two dimensions in the size.\n */\ngoog.math.Size.prototype.getLongest = function() {\n  return Math.max(this.width, this.height);\n};\n\n\n/**\n * @return {number} The shorter of the two dimensions in the size.\n */\ngoog.math.Size.prototype.getShortest = function() {\n  return Math.min(this.width, this.height);\n};\n\n\n/**\n * @return {number} The area of the size (width * height).\n */\ngoog.math.Size.prototype.area = function() {\n  return this.width * this.height;\n};\n\n\n/**\n * @return {number} The perimeter of the size (width + height) * 2.\n */\ngoog.math.Size.prototype.perimeter = function() {\n  return (this.width + this.height) * 2;\n};\n\n\n/**\n * @return {number} The ratio of the size's width to its height.\n */\ngoog.math.Size.prototype.aspectRatio = function() {\n  return this.width / this.height;\n};\n\n\n/**\n * @return {boolean} True if the size has zero area, false if both dimensions\n *     are non-zero numbers.\n */\ngoog.math.Size.prototype.isEmpty = function() {\n  return !this.area();\n};\n\n\n/**\n * Clamps the width and height parameters upward to integer values.\n * @return {!goog.math.Size} This size with ceil'd components.\n */\ngoog.math.Size.prototype.ceil = function() {\n  this.width = Math.ceil(this.width);\n  this.height = Math.ceil(this.height);\n  return this;\n};\n\n\n/**\n * @param {!goog.math.Size} target The target size.\n * @return {boolean} True if this Size is the same size or smaller than the\n *     target size in both dimensions.\n */\ngoog.math.Size.prototype.fitsInside = function(target) {\n  return this.width <= target.width && this.height <= target.height;\n};\n\n\n/**\n * Clamps the width and height parameters downward to integer values.\n * @return {!goog.math.Size} This size with floored components.\n */\ngoog.math.Size.prototype.floor = function() {\n  this.width = Math.floor(this.width);\n  this.height = Math.floor(this.height);\n  return this;\n};\n\n\n/**\n * Rounds the width and height parameters to integer values.\n * @return {!goog.math.Size} This size with rounded components.\n */\ngoog.math.Size.prototype.round = function() {\n  this.width = Math.round(this.width);\n  this.height = Math.round(this.height);\n  return this;\n};\n\n\n/**\n * Scales this size by the given scale factors. The width and height are scaled\n * by `sx` and `opt_sy` respectively.  If `opt_sy` is not\n * given, then `sx` is used for both the width and height.\n * @param {number} sx The scale factor to use for the width.\n * @param {number=} opt_sy The scale factor to use for the height.\n * @return {!goog.math.Size} This Size object after scaling.\n */\ngoog.math.Size.prototype.scale = function(sx, opt_sy) {\n  var sy = goog.isNumber(opt_sy) ? opt_sy : sx;\n  this.width *= sx;\n  this.height *= sy;\n  return this;\n};\n\n\n/**\n * Uniformly scales the size to perfectly cover the dimensions of a given size.\n * If the size is already larger than the target, it will be scaled down to the\n * minimum size at which it still covers the entire target. The original aspect\n * ratio will be preserved.\n *\n * This function assumes that both Sizes contain strictly positive dimensions.\n * @param {!goog.math.Size} target The target size.\n * @return {!goog.math.Size} This Size object, after optional scaling.\n */\ngoog.math.Size.prototype.scaleToCover = function(target) {\n  var s = this.aspectRatio() <= target.aspectRatio() ?\n      target.width / this.width :\n      target.height / this.height;\n\n  return this.scale(s);\n};\n\n\n/**\n * Uniformly scales the size to fit inside the dimensions of a given size. The\n * original aspect ratio will be preserved.\n *\n * This function assumes that both Sizes contain strictly positive dimensions.\n * @param {!goog.math.Size} target The target size.\n * @return {!goog.math.Size} This Size object, after optional scaling.\n */\ngoog.math.Size.prototype.scaleToFit = function(target) {\n  var s = this.aspectRatio() > target.aspectRatio() ?\n      target.width / this.width :\n      target.height / this.height;\n\n  return this.scale(s);\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities for manipulating the browser's Document Object Model\n * Inspiration taken *heavily* from mochikit (http://mochikit.com/).\n *\n * You can use {@link goog.dom.DomHelper} to create new dom helpers that refer\n * to a different document object.  This is useful if you are working with\n * frames or multiple windows.\n *\n * @author arv@google.com (Erik Arvidsson)\n * @suppress {strictMissingProperties}\n */\n\n\n// TODO(arv): Rename/refactor getTextContent and getRawTextContent. The problem\n// is that getTextContent should mimic the DOM3 textContent. We should add a\n// getInnerText (or getText) which tries to return the visible text, innerText.\n\n\ngoog.provide('goog.dom');\ngoog.provide('goog.dom.Appendable');\ngoog.provide('goog.dom.DomHelper');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.dom.BrowserFeature');\ngoog.require('goog.dom.NodeType');\ngoog.require('goog.dom.TagName');\ngoog.require('goog.dom.safe');\ngoog.require('goog.html.SafeHtml');\ngoog.require('goog.html.uncheckedconversions');\ngoog.require('goog.math.Coordinate');\ngoog.require('goog.math.Size');\ngoog.require('goog.object');\ngoog.require('goog.string');\ngoog.require('goog.string.Unicode');\ngoog.require('goog.userAgent');\n\n\n/**\n * @define {boolean} Whether we know at compile time that the browser is in\n * quirks mode.\n */\ngoog.define('goog.dom.ASSUME_QUIRKS_MODE', false);\n\n\n/**\n * @define {boolean} Whether we know at compile time that the browser is in\n * standards compliance mode.\n */\ngoog.define('goog.dom.ASSUME_STANDARDS_MODE', false);\n\n\n/**\n * Whether we know the compatibility mode at compile time.\n * @type {boolean}\n * @private\n */\ngoog.dom.COMPAT_MODE_KNOWN_ =\n    goog.dom.ASSUME_QUIRKS_MODE || goog.dom.ASSUME_STANDARDS_MODE;\n\n\n/**\n * Gets the DomHelper object for the document where the element resides.\n * @param {(Node|Window)=} opt_element If present, gets the DomHelper for this\n *     element.\n * @return {!goog.dom.DomHelper} The DomHelper.\n */\ngoog.dom.getDomHelper = function(opt_element) {\n  return opt_element ?\n      new goog.dom.DomHelper(goog.dom.getOwnerDocument(opt_element)) :\n      (goog.dom.defaultDomHelper_ ||\n       (goog.dom.defaultDomHelper_ = new goog.dom.DomHelper()));\n};\n\n\n/**\n * Cached default DOM helper.\n * @type {!goog.dom.DomHelper|undefined}\n * @private\n */\ngoog.dom.defaultDomHelper_;\n\n\n/**\n * Gets the document object being used by the dom library.\n * @return {!Document} Document object.\n */\ngoog.dom.getDocument = function() {\n  return document;\n};\n\n\n/**\n * Gets an element from the current document by element id.\n *\n * If an Element is passed in, it is returned.\n *\n * @param {string|Element} element Element ID or a DOM node.\n * @return {Element} The element with the given ID, or the node passed in.\n */\ngoog.dom.getElement = function(element) {\n  return goog.dom.getElementHelper_(document, element);\n};\n\n\n/**\n * Gets an element by id from the given document (if present).\n * If an element is given, it is returned.\n * @param {!Document} doc\n * @param {string|Element} element Element ID or a DOM node.\n * @return {Element} The resulting element.\n * @private\n */\ngoog.dom.getElementHelper_ = function(doc, element) {\n  return goog.isString(element) ? doc.getElementById(element) : element;\n};\n\n\n/**\n * Gets an element by id, asserting that the element is found.\n *\n * This is used when an element is expected to exist, and should fail with\n * an assertion error if it does not (if assertions are enabled).\n *\n * @param {string} id Element ID.\n * @return {!Element} The element with the given ID, if it exists.\n */\ngoog.dom.getRequiredElement = function(id) {\n  return goog.dom.getRequiredElementHelper_(document, id);\n};\n\n\n/**\n * Helper function for getRequiredElementHelper functions, both static and\n * on DomHelper.  Asserts the element with the given id exists.\n * @param {!Document} doc\n * @param {string} id\n * @return {!Element} The element with the given ID, if it exists.\n * @private\n */\ngoog.dom.getRequiredElementHelper_ = function(doc, id) {\n  // To prevent users passing in Elements as is permitted in getElement().\n  goog.asserts.assertString(id);\n  var element = goog.dom.getElementHelper_(doc, id);\n  element =\n      goog.asserts.assertElement(element, 'No element found with id: ' + id);\n  return element;\n};\n\n\n/**\n * Alias for getElement.\n * @param {string|Element} element Element ID or a DOM node.\n * @return {Element} The element with the given ID, or the node passed in.\n * @deprecated Use {@link goog.dom.getElement} instead.\n */\ngoog.dom.$ = goog.dom.getElement;\n\n\n/**\n * Gets elements by tag name.\n * @param {!goog.dom.TagName<T>} tagName\n * @param {(!Document|!Element)=} opt_parent Parent element or document where to\n *     look for elements. Defaults to document.\n * @return {!NodeList<R>} List of elements. The members of the list are\n *     {!Element} if tagName is not a member of goog.dom.TagName or more\n *     specific types if it is (e.g. {!HTMLAnchorElement} for\n *     goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.getElementsByTagName = function(tagName, opt_parent) {\n  var parent = opt_parent || document;\n  return parent.getElementsByTagName(String(tagName));\n};\n\n\n/**\n * Looks up elements by both tag and class name, using browser native functions\n * (`querySelectorAll`, `getElementsByTagName` or\n * `getElementsByClassName`) where possible. This function\n * is a useful, if limited, way of collecting a list of DOM elements\n * with certain characteristics.  `goog.dom.query` offers a\n * more powerful and general solution which allows matching on CSS3\n * selector expressions, but at increased cost in code size. If all you\n * need is particular tags belonging to a single class, this function\n * is fast and sleek.\n *\n * Note that tag names are case sensitive in the SVG namespace, and this\n * function converts opt_tag to uppercase for comparisons. For queries in the\n * SVG namespace you should use querySelector or querySelectorAll instead.\n * https://bugzilla.mozilla.org/show_bug.cgi?id=963870\n * https://bugs.webkit.org/show_bug.cgi?id=83438\n *\n * @see {goog.dom.query}\n *\n * @param {(string|?goog.dom.TagName<T>)=} opt_tag Element tag name.\n * @param {?string=} opt_class Optional class name.\n * @param {(Document|Element)=} opt_el Optional element to look in.\n * @return {!IArrayLike<R>} Array-like list of elements (only a length property\n *     and numerical indices are guaranteed to exist). The members of the array\n *     are {!Element} if opt_tag is not a member of goog.dom.TagName or more\n *     specific types if it is (e.g. {!HTMLAnchorElement} for\n *     goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.getElementsByTagNameAndClass = function(opt_tag, opt_class, opt_el) {\n  return goog.dom.getElementsByTagNameAndClass_(\n      document, opt_tag, opt_class, opt_el);\n};\n\n\n/**\n * Gets the first element matching the tag and the class.\n *\n * @param {(string|?goog.dom.TagName<T>)=} opt_tag Element tag name.\n * @param {?string=} opt_class Optional class name.\n * @param {(Document|Element)=} opt_el Optional element to look in.\n * @return {?R} Reference to a DOM node. The return type is {?Element} if\n *     tagName is a string or a more specific type if it is a member of\n *     goog.dom.TagName (e.g. {?HTMLAnchorElement} for goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.getElementByTagNameAndClass = function(opt_tag, opt_class, opt_el) {\n  return goog.dom.getElementByTagNameAndClass_(\n      document, opt_tag, opt_class, opt_el);\n};\n\n\n/**\n * Returns a static, array-like list of the elements with the provided\n * className.\n * @see {goog.dom.query}\n * @param {string} className the name of the class to look for.\n * @param {(Document|Element)=} opt_el Optional element to look in.\n * @return {!IArrayLike<!Element>} The items found with the class name provided.\n */\ngoog.dom.getElementsByClass = function(className, opt_el) {\n  var parent = opt_el || document;\n  if (goog.dom.canUseQuerySelector_(parent)) {\n    return parent.querySelectorAll('.' + className);\n  }\n  return goog.dom.getElementsByTagNameAndClass_(\n      document, '*', className, opt_el);\n};\n\n\n/**\n * Returns the first element with the provided className.\n * @see {goog.dom.query}\n * @param {string} className the name of the class to look for.\n * @param {Element|Document=} opt_el Optional element to look in.\n * @return {Element} The first item with the class name provided.\n */\ngoog.dom.getElementByClass = function(className, opt_el) {\n  var parent = opt_el || document;\n  var retVal = null;\n  if (parent.getElementsByClassName) {\n    retVal = parent.getElementsByClassName(className)[0];\n  } else {\n    retVal =\n        goog.dom.getElementByTagNameAndClass_(document, '*', className, opt_el);\n  }\n  return retVal || null;\n};\n\n\n/**\n * Ensures an element with the given className exists, and then returns the\n * first element with the provided className.\n * @see {goog.dom.query}\n * @param {string} className the name of the class to look for.\n * @param {!Element|!Document=} opt_root Optional element or document to look\n *     in.\n * @return {!Element} The first item with the class name provided.\n * @throws {goog.asserts.AssertionError} Thrown if no element is found.\n */\ngoog.dom.getRequiredElementByClass = function(className, opt_root) {\n  var retValue = goog.dom.getElementByClass(className, opt_root);\n  return goog.asserts.assert(\n      retValue, 'No element found with className: ' + className);\n};\n\n\n/**\n * Prefer the standardized (http://www.w3.org/TR/selectors-api/), native and\n * fast W3C Selectors API.\n * @param {!(Element|Document)} parent The parent document object.\n * @return {boolean} whether or not we can use parent.querySelector* APIs.\n * @private\n */\ngoog.dom.canUseQuerySelector_ = function(parent) {\n  return !!(parent.querySelectorAll && parent.querySelector);\n};\n\n\n/**\n * Helper for `getElementsByTagNameAndClass`.\n * @param {!Document} doc The document to get the elements in.\n * @param {(string|?goog.dom.TagName<T>)=} opt_tag Element tag name.\n * @param {?string=} opt_class Optional class name.\n * @param {(Document|Element)=} opt_el Optional element to look in.\n * @return {!IArrayLike<R>} Array-like list of elements (only a length property\n *     and numerical indices are guaranteed to exist). The members of the array\n *     are {!Element} if opt_tag is not a member of goog.dom.TagName or more\n *     specific types if it is (e.g. {!HTMLAnchorElement} for\n *     goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n * @private\n */\ngoog.dom.getElementsByTagNameAndClass_ = function(\n    doc, opt_tag, opt_class, opt_el) {\n  var parent = opt_el || doc;\n  var tagName =\n      (opt_tag && opt_tag != '*') ? String(opt_tag).toUpperCase() : '';\n\n  if (goog.dom.canUseQuerySelector_(parent) && (tagName || opt_class)) {\n    var query = tagName + (opt_class ? '.' + opt_class : '');\n    return parent.querySelectorAll(query);\n  }\n\n  // Use the native getElementsByClassName if available, under the assumption\n  // that even when the tag name is specified, there will be fewer elements to\n  // filter through when going by class than by tag name\n  if (opt_class && parent.getElementsByClassName) {\n    var els = parent.getElementsByClassName(opt_class);\n\n    if (tagName) {\n      var arrayLike = {};\n      var len = 0;\n\n      // Filter for specific tags if requested.\n      for (var i = 0, el; el = els[i]; i++) {\n        if (tagName == el.nodeName) {\n          arrayLike[len++] = el;\n        }\n      }\n      arrayLike.length = len;\n\n      return /** @type {!IArrayLike<!Element>} */ (arrayLike);\n    } else {\n      return els;\n    }\n  }\n\n  var els = parent.getElementsByTagName(tagName || '*');\n\n  if (opt_class) {\n    var arrayLike = {};\n    var len = 0;\n    for (var i = 0, el; el = els[i]; i++) {\n      var className = el.className;\n      // Check if className has a split function since SVG className does not.\n      if (typeof className.split == 'function' &&\n          goog.array.contains(className.split(/\\s+/), opt_class)) {\n        arrayLike[len++] = el;\n      }\n    }\n    arrayLike.length = len;\n    return /** @type {!IArrayLike<!Element>} */ (arrayLike);\n  } else {\n    return els;\n  }\n};\n\n\n/**\n * Helper for goog.dom.getElementByTagNameAndClass.\n *\n * @param {!Document} doc The document to get the elements in.\n * @param {(string|?goog.dom.TagName<T>)=} opt_tag Element tag name.\n * @param {?string=} opt_class Optional class name.\n * @param {(Document|Element)=} opt_el Optional element to look in.\n * @return {?R} Reference to a DOM node. The return type is {?Element} if\n *     tagName is a string or a more specific type if it is a member of\n *     goog.dom.TagName (e.g. {?HTMLAnchorElement} for goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n * @private\n */\ngoog.dom.getElementByTagNameAndClass_ = function(\n    doc, opt_tag, opt_class, opt_el) {\n  var parent = opt_el || doc;\n  var tag = (opt_tag && opt_tag != '*') ? String(opt_tag).toUpperCase() : '';\n  if (goog.dom.canUseQuerySelector_(parent) && (tag || opt_class)) {\n    return parent.querySelector(tag + (opt_class ? '.' + opt_class : ''));\n  }\n  var elements =\n      goog.dom.getElementsByTagNameAndClass_(doc, opt_tag, opt_class, opt_el);\n  return elements[0] || null;\n};\n\n\n\n/**\n * Alias for `getElementsByTagNameAndClass`.\n * @param {(string|?goog.dom.TagName<T>)=} opt_tag Element tag name.\n * @param {?string=} opt_class Optional class name.\n * @param {Element=} opt_el Optional element to look in.\n * @return {!IArrayLike<R>} Array-like list of elements (only a length property\n *     and numerical indices are guaranteed to exist). The members of the array\n *     are {!Element} if opt_tag is not a member of goog.dom.TagName or more\n *     specific types if it is (e.g. {!HTMLAnchorElement} for\n *     goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n * @deprecated Use {@link goog.dom.getElementsByTagNameAndClass} instead.\n */\ngoog.dom.$$ = goog.dom.getElementsByTagNameAndClass;\n\n\n/**\n * Sets multiple properties, and sometimes attributes, on an element. Note that\n * properties are simply object properties on the element instance, while\n * attributes are visible in the DOM. Many properties map to attributes with the\n * same names, some with different names, and there are also unmappable cases.\n *\n * This method sets properties by default (which means that custom attributes\n * are not supported). These are the exeptions (some of which is legacy):\n * - \"style\": Even though this is an attribute name, it is translated to a\n *   property, \"style.cssText\". Note that this property sanitizes and formats\n *   its value, unlike the attribute.\n * - \"class\": This is an attribute name, it is translated to the \"className\"\n *   property.\n * - \"for\": This is an attribute name, it is translated to the \"htmlFor\"\n *   property.\n * - Entries in {@see goog.dom.DIRECT_ATTRIBUTE_MAP_} are set as attributes,\n *   this is probably due to browser quirks.\n * - \"aria-*\", \"data-*\": Always set as attributes, they have no property\n *   counterparts.\n *\n * @param {Element} element DOM node to set properties on.\n * @param {Object} properties Hash of property:value pairs.\n *     Property values can be strings or goog.string.TypedString values (such as\n *     goog.html.SafeUrl).\n */\ngoog.dom.setProperties = function(element, properties) {\n  goog.object.forEach(properties, function(val, key) {\n    if (val && val.implementsGoogStringTypedString) {\n      val = val.getTypedStringValue();\n    }\n    if (key == 'style') {\n      element.style.cssText = val;\n    } else if (key == 'class') {\n      element.className = val;\n    } else if (key == 'for') {\n      element.htmlFor = val;\n    } else if (goog.dom.DIRECT_ATTRIBUTE_MAP_.hasOwnProperty(key)) {\n      element.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[key], val);\n    } else if (\n        goog.string.startsWith(key, 'aria-') ||\n        goog.string.startsWith(key, 'data-')) {\n      element.setAttribute(key, val);\n    } else {\n      element[key] = val;\n    }\n  });\n};\n\n\n/**\n * Map of attributes that should be set using\n * element.setAttribute(key, val) instead of element[key] = val.  Used\n * by goog.dom.setProperties.\n *\n * @private {!Object<string, string>}\n * @const\n */\ngoog.dom.DIRECT_ATTRIBUTE_MAP_ = {\n  'cellpadding': 'cellPadding',\n  'cellspacing': 'cellSpacing',\n  'colspan': 'colSpan',\n  'frameborder': 'frameBorder',\n  'height': 'height',\n  'maxlength': 'maxLength',\n  'nonce': 'nonce',\n  'role': 'role',\n  'rowspan': 'rowSpan',\n  'type': 'type',\n  'usemap': 'useMap',\n  'valign': 'vAlign',\n  'width': 'width'\n};\n\n\n/**\n * Gets the dimensions of the viewport.\n *\n * Gecko Standards mode:\n * docEl.clientWidth  Width of viewport excluding scrollbar.\n * win.innerWidth     Width of viewport including scrollbar.\n * body.clientWidth   Width of body element.\n *\n * docEl.clientHeight Height of viewport excluding scrollbar.\n * win.innerHeight    Height of viewport including scrollbar.\n * body.clientHeight  Height of document.\n *\n * Gecko Backwards compatible mode:\n * docEl.clientWidth  Width of viewport excluding scrollbar.\n * win.innerWidth     Width of viewport including scrollbar.\n * body.clientWidth   Width of viewport excluding scrollbar.\n *\n * docEl.clientHeight Height of document.\n * win.innerHeight    Height of viewport including scrollbar.\n * body.clientHeight  Height of viewport excluding scrollbar.\n *\n * IE6/7 Standards mode:\n * docEl.clientWidth  Width of viewport excluding scrollbar.\n * win.innerWidth     Undefined.\n * body.clientWidth   Width of body element.\n *\n * docEl.clientHeight Height of viewport excluding scrollbar.\n * win.innerHeight    Undefined.\n * body.clientHeight  Height of document element.\n *\n * IE5 + IE6/7 Backwards compatible mode:\n * docEl.clientWidth  0.\n * win.innerWidth     Undefined.\n * body.clientWidth   Width of viewport excluding scrollbar.\n *\n * docEl.clientHeight 0.\n * win.innerHeight    Undefined.\n * body.clientHeight  Height of viewport excluding scrollbar.\n *\n * Opera 9 Standards and backwards compatible mode:\n * docEl.clientWidth  Width of viewport excluding scrollbar.\n * win.innerWidth     Width of viewport including scrollbar.\n * body.clientWidth   Width of viewport excluding scrollbar.\n *\n * docEl.clientHeight Height of document.\n * win.innerHeight    Height of viewport including scrollbar.\n * body.clientHeight  Height of viewport excluding scrollbar.\n *\n * WebKit:\n * Safari 2\n * docEl.clientHeight Same as scrollHeight.\n * docEl.clientWidth  Same as innerWidth.\n * win.innerWidth     Width of viewport excluding scrollbar.\n * win.innerHeight    Height of the viewport including scrollbar.\n * frame.innerHeight  Height of the viewport exluding scrollbar.\n *\n * Safari 3 (tested in 522)\n *\n * docEl.clientWidth  Width of viewport excluding scrollbar.\n * docEl.clientHeight Height of viewport excluding scrollbar in strict mode.\n * body.clientHeight  Height of viewport excluding scrollbar in quirks mode.\n *\n * @param {Window=} opt_window Optional window element to test.\n * @return {!goog.math.Size} Object with values 'width' and 'height'.\n */\ngoog.dom.getViewportSize = function(opt_window) {\n  // TODO(arv): This should not take an argument\n  return goog.dom.getViewportSize_(opt_window || window);\n};\n\n\n/**\n * Helper for `getViewportSize`.\n * @param {Window} win The window to get the view port size for.\n * @return {!goog.math.Size} Object with values 'width' and 'height'.\n * @private\n */\ngoog.dom.getViewportSize_ = function(win) {\n  var doc = win.document;\n  var el = goog.dom.isCss1CompatMode_(doc) ? doc.documentElement : doc.body;\n  return new goog.math.Size(el.clientWidth, el.clientHeight);\n};\n\n\n/**\n * Calculates the height of the document.\n *\n * @return {number} The height of the current document.\n */\ngoog.dom.getDocumentHeight = function() {\n  return goog.dom.getDocumentHeight_(window);\n};\n\n/**\n * Calculates the height of the document of the given window.\n *\n * @param {!Window} win The window whose document height to retrieve.\n * @return {number} The height of the document of the given window.\n */\ngoog.dom.getDocumentHeightForWindow = function(win) {\n  return goog.dom.getDocumentHeight_(win);\n};\n\n/**\n * Calculates the height of the document of the given window.\n *\n * Function code copied from the opensocial gadget api:\n *   gadgets.window.adjustHeight(opt_height)\n *\n * @private\n * @param {!Window} win The window whose document height to retrieve.\n * @return {number} The height of the document of the given window.\n */\ngoog.dom.getDocumentHeight_ = function(win) {\n  // NOTE(eae): This method will return the window size rather than the document\n  // size in webkit quirks mode.\n  var doc = win.document;\n  var height = 0;\n\n  if (doc) {\n    // Calculating inner content height is hard and different between\n    // browsers rendering in Strict vs. Quirks mode.  We use a combination of\n    // three properties within document.body and document.documentElement:\n    // - scrollHeight\n    // - offsetHeight\n    // - clientHeight\n    // These values differ significantly between browsers and rendering modes.\n    // But there are patterns.  It just takes a lot of time and persistence\n    // to figure out.\n\n    var body = doc.body;\n    var docEl = /** @type {!HTMLElement} */ (doc.documentElement);\n    if (!(docEl && body)) {\n      return 0;\n    }\n\n    // Get the height of the viewport\n    var vh = goog.dom.getViewportSize_(win).height;\n    if (goog.dom.isCss1CompatMode_(doc) && docEl.scrollHeight) {\n      // In Strict mode:\n      // The inner content height is contained in either:\n      //    document.documentElement.scrollHeight\n      //    document.documentElement.offsetHeight\n      // Based on studying the values output by different browsers,\n      // use the value that's NOT equal to the viewport height found above.\n      height =\n          docEl.scrollHeight != vh ? docEl.scrollHeight : docEl.offsetHeight;\n    } else {\n      // In Quirks mode:\n      // documentElement.clientHeight is equal to documentElement.offsetHeight\n      // except in IE.  In most browsers, document.documentElement can be used\n      // to calculate the inner content height.\n      // However, in other browsers (e.g. IE), document.body must be used\n      // instead.  How do we know which one to use?\n      // If document.documentElement.clientHeight does NOT equal\n      // document.documentElement.offsetHeight, then use document.body.\n      var sh = docEl.scrollHeight;\n      var oh = docEl.offsetHeight;\n      if (docEl.clientHeight != oh) {\n        sh = body.scrollHeight;\n        oh = body.offsetHeight;\n      }\n\n      // Detect whether the inner content height is bigger or smaller\n      // than the bounding box (viewport).  If bigger, take the larger\n      // value.  If smaller, take the smaller value.\n      if (sh > vh) {\n        // Content is larger\n        height = sh > oh ? sh : oh;\n      } else {\n        // Content is smaller\n        height = sh < oh ? sh : oh;\n      }\n    }\n  }\n\n  return height;\n};\n\n\n/**\n * Gets the page scroll distance as a coordinate object.\n *\n * @param {Window=} opt_window Optional window element to test.\n * @return {!goog.math.Coordinate} Object with values 'x' and 'y'.\n * @deprecated Use {@link goog.dom.getDocumentScroll} instead.\n */\ngoog.dom.getPageScroll = function(opt_window) {\n  var win = opt_window || goog.global || window;\n  return goog.dom.getDomHelper(win.document).getDocumentScroll();\n};\n\n\n/**\n * Gets the document scroll distance as a coordinate object.\n *\n * @return {!goog.math.Coordinate} Object with values 'x' and 'y'.\n */\ngoog.dom.getDocumentScroll = function() {\n  return goog.dom.getDocumentScroll_(document);\n};\n\n\n/**\n * Helper for `getDocumentScroll`.\n *\n * @param {!Document} doc The document to get the scroll for.\n * @return {!goog.math.Coordinate} Object with values 'x' and 'y'.\n * @private\n */\ngoog.dom.getDocumentScroll_ = function(doc) {\n  var el = goog.dom.getDocumentScrollElement_(doc);\n  var win = goog.dom.getWindow_(doc);\n  if (goog.userAgent.IE && goog.userAgent.isVersionOrHigher('10') &&\n      win.pageYOffset != el.scrollTop) {\n    // The keyboard on IE10 touch devices shifts the page using the pageYOffset\n    // without modifying scrollTop. For this case, we want the body scroll\n    // offsets.\n    return new goog.math.Coordinate(el.scrollLeft, el.scrollTop);\n  }\n  return new goog.math.Coordinate(\n      win.pageXOffset || el.scrollLeft, win.pageYOffset || el.scrollTop);\n};\n\n\n/**\n * Gets the document scroll element.\n * @return {!Element} Scrolling element.\n */\ngoog.dom.getDocumentScrollElement = function() {\n  return goog.dom.getDocumentScrollElement_(document);\n};\n\n\n/**\n * Helper for `getDocumentScrollElement`.\n * @param {!Document} doc The document to get the scroll element for.\n * @return {!Element} Scrolling element.\n * @private\n */\ngoog.dom.getDocumentScrollElement_ = function(doc) {\n  // Old WebKit needs body.scrollLeft in both quirks mode and strict mode. We\n  // also default to the documentElement if the document does not have a body\n  // (e.g. a SVG document).\n  // Uses http://dev.w3.org/csswg/cssom-view/#dom-document-scrollingelement to\n  // avoid trying to guess about browser behavior from the UA string.\n  if (doc.scrollingElement) {\n    return doc.scrollingElement;\n  }\n  if (!goog.userAgent.WEBKIT && goog.dom.isCss1CompatMode_(doc)) {\n    return doc.documentElement;\n  }\n  return doc.body || doc.documentElement;\n};\n\n\n/**\n * Gets the window object associated with the given document.\n *\n * @param {Document=} opt_doc  Document object to get window for.\n * @return {!Window} The window associated with the given document.\n */\ngoog.dom.getWindow = function(opt_doc) {\n  // TODO(arv): This should not take an argument.\n  return opt_doc ? goog.dom.getWindow_(opt_doc) : window;\n};\n\n\n/**\n * Helper for `getWindow`.\n *\n * @param {!Document} doc  Document object to get window for.\n * @return {!Window} The window associated with the given document.\n * @private\n */\ngoog.dom.getWindow_ = function(doc) {\n  return /** @type {!Window} */ (doc.parentWindow || doc.defaultView);\n};\n\n\n/**\n * Returns a dom node with a set of attributes.  This function accepts varargs\n * for subsequent nodes to be added.  Subsequent nodes will be added to the\n * first node as childNodes.\n *\n * So:\n * <code>createDom(goog.dom.TagName.DIV, null, createDom(goog.dom.TagName.P),\n * createDom(goog.dom.TagName.P));</code> would return a div with two child\n * paragraphs\n *\n * For passing properties, please see {@link goog.dom.setProperties} for more\n * information.\n *\n * @param {string|!goog.dom.TagName<T>} tagName Tag to create.\n * @param {?Object|?Array<string>|string=} opt_attributes If object, then a map\n *     of name-value pairs for attributes. If a string, then this is the\n *     className of the new element. If an array, the elements will be joined\n *     together as the className of the new element.\n * @param {...(Object|string|Array|NodeList|null|undefined)} var_args Further\n *     DOM nodes or strings for text nodes. If one of the var_args is an array\n *     or NodeList, its elements will be added as childNodes instead.\n * @return {R} Reference to a DOM node. The return type is {!Element} if tagName\n *     is a string or a more specific type if it is a member of\n *     goog.dom.TagName (e.g. {!HTMLAnchorElement} for goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.createDom = function(tagName, opt_attributes, var_args) {\n  return goog.dom.createDom_(document, arguments);\n};\n\n\n/**\n * Helper for `createDom`.\n * @param {!Document} doc The document to create the DOM in.\n * @param {!Arguments} args Argument object passed from the callers. See\n *     `goog.dom.createDom` for details.\n * @return {!Element} Reference to a DOM node.\n * @private\n */\ngoog.dom.createDom_ = function(doc, args) {\n  var tagName = String(args[0]);\n  var attributes = args[1];\n\n  // Internet Explorer is dumb:\n  // name: https://msdn.microsoft.com/en-us/library/ms534184(v=vs.85).aspx\n  // type: https://msdn.microsoft.com/en-us/library/ms534700(v=vs.85).aspx\n  // Also does not allow setting of 'type' attribute on 'input' or 'button'.\n  if (!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES && attributes &&\n      (attributes.name || attributes.type)) {\n    var tagNameArr = ['<', tagName];\n    if (attributes.name) {\n      tagNameArr.push(' name=\"', goog.string.htmlEscape(attributes.name), '\"');\n    }\n    if (attributes.type) {\n      tagNameArr.push(' type=\"', goog.string.htmlEscape(attributes.type), '\"');\n\n      // Clone attributes map to remove 'type' without mutating the input.\n      var clone = {};\n      goog.object.extend(clone, attributes);\n\n      // JSCompiler can't see how goog.object.extend added this property,\n      // because it was essentially added by reflection.\n      // So it needs to be quoted.\n      delete clone['type'];\n\n      attributes = clone;\n    }\n    tagNameArr.push('>');\n    tagName = tagNameArr.join('');\n  }\n\n  var element = doc.createElement(tagName);\n\n  if (attributes) {\n    if (goog.isString(attributes)) {\n      element.className = attributes;\n    } else if (goog.isArray(attributes)) {\n      element.className = attributes.join(' ');\n    } else {\n      goog.dom.setProperties(element, attributes);\n    }\n  }\n\n  if (args.length > 2) {\n    goog.dom.append_(doc, element, args, 2);\n  }\n\n  return element;\n};\n\n\n/**\n * Appends a node with text or other nodes.\n * @param {!Document} doc The document to create new nodes in.\n * @param {!Node} parent The node to append nodes to.\n * @param {!Arguments} args The values to add. See `goog.dom.append`.\n * @param {number} startIndex The index of the array to start from.\n * @private\n */\ngoog.dom.append_ = function(doc, parent, args, startIndex) {\n  function childHandler(child) {\n    // TODO(user): More coercion, ala MochiKit?\n    if (child) {\n      parent.appendChild(\n          goog.isString(child) ? doc.createTextNode(child) : child);\n    }\n  }\n\n  for (var i = startIndex; i < args.length; i++) {\n    var arg = args[i];\n    // TODO(attila): Fix isArrayLike to return false for a text node.\n    if (goog.isArrayLike(arg) && !goog.dom.isNodeLike(arg)) {\n      // If the argument is a node list, not a real array, use a clone,\n      // because forEach can't be used to mutate a NodeList.\n      goog.array.forEach(\n          goog.dom.isNodeList(arg) ? goog.array.toArray(arg) : arg,\n          childHandler);\n    } else {\n      childHandler(arg);\n    }\n  }\n};\n\n\n/**\n * Alias for `createDom`.\n * @param {string|!goog.dom.TagName<T>} tagName Tag to create.\n * @param {?Object|?Array<string>|string=} opt_attributes If object, then a map\n *     of name-value pairs for attributes. If a string, then this is the\n *     className of the new element. If an array, the elements will be joined\n *     together as the className of the new element.\n * @param {...(Object|string|Array|NodeList|null|undefined)} var_args Further\n *     DOM nodes or strings for text nodes. If one of the var_args is an array,\n *     its children will be added as childNodes instead.\n * @return {R} Reference to a DOM node. The return type is {!Element} if tagName\n *     is a string or a more specific type if it is a member of\n *     goog.dom.TagName (e.g. {!HTMLAnchorElement} for goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n * @deprecated Use {@link goog.dom.createDom} instead.\n */\ngoog.dom.$dom = goog.dom.createDom;\n\n\n/**\n * Creates a new element.\n * @param {string|!goog.dom.TagName<T>} name Tag to create.\n * @return {R} The new element. The return type is {!Element} if name is\n *     a string or a more specific type if it is a member of goog.dom.TagName\n *     (e.g. {!HTMLAnchorElement} for goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.createElement = function(name) {\n  return goog.dom.createElement_(document, name);\n};\n\n\n/**\n * Creates a new element.\n * @param {!Document} doc The document to create the element in.\n * @param {string|!goog.dom.TagName<T>} name Tag to create.\n * @return {R} The new element. The return type is {!Element} if name is\n *     a string or a more specific type if it is a member of goog.dom.TagName\n *     (e.g. {!HTMLAnchorElement} for goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n * @private\n */\ngoog.dom.createElement_ = function(doc, name) {\n  return doc.createElement(String(name));\n};\n\n\n/**\n * Creates a new text node.\n * @param {number|string} content Content.\n * @return {!Text} The new text node.\n */\ngoog.dom.createTextNode = function(content) {\n  return document.createTextNode(String(content));\n};\n\n\n/**\n * Create a table.\n * @param {number} rows The number of rows in the table.  Must be >= 1.\n * @param {number} columns The number of columns in the table.  Must be >= 1.\n * @param {boolean=} opt_fillWithNbsp If true, fills table entries with\n *     `goog.string.Unicode.NBSP` characters.\n * @return {!Element} The created table.\n */\ngoog.dom.createTable = function(rows, columns, opt_fillWithNbsp) {\n  // TODO(mlourenco): Return HTMLTableElement, also in prototype function.\n  // Callers need to be updated to e.g. not assign numbers to table.cellSpacing.\n  return goog.dom.createTable_(document, rows, columns, !!opt_fillWithNbsp);\n};\n\n\n/**\n * Create a table.\n * @param {!Document} doc Document object to use to create the table.\n * @param {number} rows The number of rows in the table.  Must be >= 1.\n * @param {number} columns The number of columns in the table.  Must be >= 1.\n * @param {boolean} fillWithNbsp If true, fills table entries with\n *     `goog.string.Unicode.NBSP` characters.\n * @return {!HTMLTableElement} The created table.\n * @private\n */\ngoog.dom.createTable_ = function(doc, rows, columns, fillWithNbsp) {\n  var table = goog.dom.createElement_(doc, goog.dom.TagName.TABLE);\n  var tbody =\n      table.appendChild(goog.dom.createElement_(doc, goog.dom.TagName.TBODY));\n  for (var i = 0; i < rows; i++) {\n    var tr = goog.dom.createElement_(doc, goog.dom.TagName.TR);\n    for (var j = 0; j < columns; j++) {\n      var td = goog.dom.createElement_(doc, goog.dom.TagName.TD);\n      // IE <= 9 will create a text node if we set text content to the empty\n      // string, so we avoid doing it unless necessary. This ensures that the\n      // same DOM tree is returned on all browsers.\n      if (fillWithNbsp) {\n        goog.dom.setTextContent(td, goog.string.Unicode.NBSP);\n      }\n      tr.appendChild(td);\n    }\n    tbody.appendChild(tr);\n  }\n  return table;\n};\n\n\n\n/**\n * Creates a new Node from constant strings of HTML markup.\n * @param {...!goog.string.Const} var_args The HTML strings to concatenate then\n *     convert into a node.\n * @return {!Node}\n */\ngoog.dom.constHtmlToNode = function(var_args) {\n  var stringArray = goog.array.map(arguments, goog.string.Const.unwrap);\n  var safeHtml =\n      goog.html.uncheckedconversions\n          .safeHtmlFromStringKnownToSatisfyTypeContract(\n              goog.string.Const.from(\n                  'Constant HTML string, that gets turned into a ' +\n                  'Node later, so it will be automatically balanced.'),\n              stringArray.join(''));\n  return goog.dom.safeHtmlToNode(safeHtml);\n};\n\n\n/**\n * Converts HTML markup into a node. This is a safe version of\n * `goog.dom.htmlToDocumentFragment` which is now deleted.\n * @param {!goog.html.SafeHtml} html The HTML markup to convert.\n * @return {!Node} The resulting node.\n */\ngoog.dom.safeHtmlToNode = function(html) {\n  return goog.dom.safeHtmlToNode_(document, html);\n};\n\n\n/**\n * Helper for `safeHtmlToNode`.\n * @param {!Document} doc The document.\n * @param {!goog.html.SafeHtml} html The HTML markup to convert.\n * @return {!Node} The resulting node.\n * @private\n */\ngoog.dom.safeHtmlToNode_ = function(doc, html) {\n  var tempDiv = goog.dom.createElement_(doc, goog.dom.TagName.DIV);\n  if (goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT) {\n    goog.dom.safe.setInnerHtml(\n        tempDiv, goog.html.SafeHtml.concat(goog.html.SafeHtml.BR, html));\n    tempDiv.removeChild(tempDiv.firstChild);\n  } else {\n    goog.dom.safe.setInnerHtml(tempDiv, html);\n  }\n  return goog.dom.childrenToNode_(doc, tempDiv);\n};\n\n\n/**\n * Helper for `safeHtmlToNode_`.\n * @param {!Document} doc The document.\n * @param {!Node} tempDiv The input node.\n * @return {!Node} The resulting node.\n * @private\n */\ngoog.dom.childrenToNode_ = function(doc, tempDiv) {\n  if (tempDiv.childNodes.length == 1) {\n    return tempDiv.removeChild(tempDiv.firstChild);\n  } else {\n    var fragment = doc.createDocumentFragment();\n    while (tempDiv.firstChild) {\n      fragment.appendChild(tempDiv.firstChild);\n    }\n    return fragment;\n  }\n};\n\n\n/**\n * Returns true if the browser is in \"CSS1-compatible\" (standards-compliant)\n * mode, false otherwise.\n * @return {boolean} True if in CSS1-compatible mode.\n */\ngoog.dom.isCss1CompatMode = function() {\n  return goog.dom.isCss1CompatMode_(document);\n};\n\n\n/**\n * Returns true if the browser is in \"CSS1-compatible\" (standards-compliant)\n * mode, false otherwise.\n * @param {!Document} doc The document to check.\n * @return {boolean} True if in CSS1-compatible mode.\n * @private\n */\ngoog.dom.isCss1CompatMode_ = function(doc) {\n  if (goog.dom.COMPAT_MODE_KNOWN_) {\n    return goog.dom.ASSUME_STANDARDS_MODE;\n  }\n\n  return doc.compatMode == 'CSS1Compat';\n};\n\n\n/**\n * Determines if the given node can contain children, intended to be used for\n * HTML generation.\n *\n * IE natively supports node.canHaveChildren but has inconsistent behavior.\n * Prior to IE8 the base tag allows children and in IE9 all nodes return true\n * for canHaveChildren.\n *\n * In practice all non-IE browsers allow you to add children to any node, but\n * the behavior is inconsistent:\n *\n * <pre>\n *   var a = goog.dom.createElement(goog.dom.TagName.BR);\n *   a.appendChild(document.createTextNode('foo'));\n *   a.appendChild(document.createTextNode('bar'));\n *   console.log(a.childNodes.length);  // 2\n *   console.log(a.innerHTML);  // Chrome: \"\", IE9: \"foobar\", FF3.5: \"foobar\"\n * </pre>\n *\n * For more information, see:\n * http://dev.w3.org/html5/markup/syntax.html#syntax-elements\n *\n * TODO(user): Rename shouldAllowChildren() ?\n *\n * @param {Node} node The node to check.\n * @return {boolean} Whether the node can contain children.\n */\ngoog.dom.canHaveChildren = function(node) {\n  if (node.nodeType != goog.dom.NodeType.ELEMENT) {\n    return false;\n  }\n  switch (/** @type {!Element} */ (node).tagName) {\n    case String(goog.dom.TagName.APPLET):\n    case String(goog.dom.TagName.AREA):\n    case String(goog.dom.TagName.BASE):\n    case String(goog.dom.TagName.BR):\n    case String(goog.dom.TagName.COL):\n    case String(goog.dom.TagName.COMMAND):\n    case String(goog.dom.TagName.EMBED):\n    case String(goog.dom.TagName.FRAME):\n    case String(goog.dom.TagName.HR):\n    case String(goog.dom.TagName.IMG):\n    case String(goog.dom.TagName.INPUT):\n    case String(goog.dom.TagName.IFRAME):\n    case String(goog.dom.TagName.ISINDEX):\n    case String(goog.dom.TagName.KEYGEN):\n    case String(goog.dom.TagName.LINK):\n    case String(goog.dom.TagName.NOFRAMES):\n    case String(goog.dom.TagName.NOSCRIPT):\n    case String(goog.dom.TagName.META):\n    case String(goog.dom.TagName.OBJECT):\n    case String(goog.dom.TagName.PARAM):\n    case String(goog.dom.TagName.SCRIPT):\n    case String(goog.dom.TagName.SOURCE):\n    case String(goog.dom.TagName.STYLE):\n    case String(goog.dom.TagName.TRACK):\n    case String(goog.dom.TagName.WBR):\n      return false;\n  }\n  return true;\n};\n\n\n/**\n * Appends a child to a node.\n * @param {Node} parent Parent.\n * @param {Node} child Child.\n */\ngoog.dom.appendChild = function(parent, child) {\n  parent.appendChild(child);\n};\n\n\n/**\n * Appends a node with text or other nodes.\n * @param {!Node} parent The node to append nodes to.\n * @param {...goog.dom.Appendable} var_args The things to append to the node.\n *     If this is a Node it is appended as is.\n *     If this is a string then a text node is appended.\n *     If this is an array like object then fields 0 to length - 1 are appended.\n */\ngoog.dom.append = function(parent, var_args) {\n  goog.dom.append_(goog.dom.getOwnerDocument(parent), parent, arguments, 1);\n};\n\n\n/**\n * Removes all the child nodes on a DOM node.\n * @param {Node} node Node to remove children from.\n */\ngoog.dom.removeChildren = function(node) {\n  // Note: Iterations over live collections can be slow, this is the fastest\n  // we could find. The double parenthesis are used to prevent JsCompiler and\n  // strict warnings.\n  var child;\n  while ((child = node.firstChild)) {\n    node.removeChild(child);\n  }\n};\n\n\n/**\n * Inserts a new node before an existing reference node (i.e. as the previous\n * sibling). If the reference node has no parent, then does nothing.\n * @param {Node} newNode Node to insert.\n * @param {Node} refNode Reference node to insert before.\n */\ngoog.dom.insertSiblingBefore = function(newNode, refNode) {\n  if (refNode.parentNode) {\n    refNode.parentNode.insertBefore(newNode, refNode);\n  }\n};\n\n\n/**\n * Inserts a new node after an existing reference node (i.e. as the next\n * sibling). If the reference node has no parent, then does nothing.\n * @param {Node} newNode Node to insert.\n * @param {Node} refNode Reference node to insert after.\n */\ngoog.dom.insertSiblingAfter = function(newNode, refNode) {\n  if (refNode.parentNode) {\n    refNode.parentNode.insertBefore(newNode, refNode.nextSibling);\n  }\n};\n\n\n/**\n * Insert a child at a given index. If index is larger than the number of child\n * nodes that the parent currently has, the node is inserted as the last child\n * node.\n * @param {Element} parent The element into which to insert the child.\n * @param {Node} child The element to insert.\n * @param {number} index The index at which to insert the new child node. Must\n *     not be negative.\n */\ngoog.dom.insertChildAt = function(parent, child, index) {\n  // Note that if the second argument is null, insertBefore\n  // will append the child at the end of the list of children.\n  parent.insertBefore(child, parent.childNodes[index] || null);\n};\n\n\n/**\n * Removes a node from its parent.\n * @param {Node} node The node to remove.\n * @return {Node} The node removed if removed; else, null.\n */\ngoog.dom.removeNode = function(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n};\n\n\n/**\n * Replaces a node in the DOM tree. Will do nothing if `oldNode` has no\n * parent.\n * @param {Node} newNode Node to insert.\n * @param {Node} oldNode Node to replace.\n */\ngoog.dom.replaceNode = function(newNode, oldNode) {\n  var parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n};\n\n\n/**\n * Flattens an element. That is, removes it and replace it with its children.\n * Does nothing if the element is not in the document.\n * @param {Element} element The element to flatten.\n * @return {Element|undefined} The original element, detached from the document\n *     tree, sans children; or undefined, if the element was not in the document\n *     to begin with.\n */\ngoog.dom.flattenElement = function(element) {\n  var child, parent = element.parentNode;\n  if (parent && parent.nodeType != goog.dom.NodeType.DOCUMENT_FRAGMENT) {\n    // Use IE DOM method (supported by Opera too) if available\n    if (element.removeNode) {\n      return /** @type {Element} */ (element.removeNode(false));\n    } else {\n      // Move all children of the original node up one level.\n      while ((child = element.firstChild)) {\n        parent.insertBefore(child, element);\n      }\n\n      // Detach the original element.\n      return /** @type {Element} */ (goog.dom.removeNode(element));\n    }\n  }\n};\n\n\n/**\n * Returns an array containing just the element children of the given element.\n * @param {Element} element The element whose element children we want.\n * @return {!(Array<!Element>|NodeList<!Element>)} An array or array-like list\n *     of just the element children of the given element.\n */\ngoog.dom.getChildren = function(element) {\n  // We check if the children attribute is supported for child elements\n  // since IE8 misuses the attribute by also including comments.\n  if (goog.dom.BrowserFeature.CAN_USE_CHILDREN_ATTRIBUTE &&\n      element.children != undefined) {\n    return element.children;\n  }\n  // Fall back to manually filtering the element's child nodes.\n  return goog.array.filter(element.childNodes, function(node) {\n    return node.nodeType == goog.dom.NodeType.ELEMENT;\n  });\n};\n\n\n/**\n * Returns the first child node that is an element.\n * @param {Node} node The node to get the first child element of.\n * @return {Element} The first child node of `node` that is an element.\n */\ngoog.dom.getFirstElementChild = function(node) {\n  if (goog.isDef(node.firstElementChild)) {\n    return /** @type {!Element} */ (node).firstElementChild;\n  }\n  return goog.dom.getNextElementNode_(node.firstChild, true);\n};\n\n\n/**\n * Returns the last child node that is an element.\n * @param {Node} node The node to get the last child element of.\n * @return {Element} The last child node of `node` that is an element.\n */\ngoog.dom.getLastElementChild = function(node) {\n  if (goog.isDef(node.lastElementChild)) {\n    return /** @type {!Element} */ (node).lastElementChild;\n  }\n  return goog.dom.getNextElementNode_(node.lastChild, false);\n};\n\n\n/**\n * Returns the first next sibling that is an element.\n * @param {Node} node The node to get the next sibling element of.\n * @return {Element} The next sibling of `node` that is an element.\n */\ngoog.dom.getNextElementSibling = function(node) {\n  if (goog.isDef(node.nextElementSibling)) {\n    return /** @type {!Element} */ (node).nextElementSibling;\n  }\n  return goog.dom.getNextElementNode_(node.nextSibling, true);\n};\n\n\n/**\n * Returns the first previous sibling that is an element.\n * @param {Node} node The node to get the previous sibling element of.\n * @return {Element} The first previous sibling of `node` that is\n *     an element.\n */\ngoog.dom.getPreviousElementSibling = function(node) {\n  if (goog.isDef(node.previousElementSibling)) {\n    return /** @type {!Element} */ (node).previousElementSibling;\n  }\n  return goog.dom.getNextElementNode_(node.previousSibling, false);\n};\n\n\n/**\n * Returns the first node that is an element in the specified direction,\n * starting with `node`.\n * @param {Node} node The node to get the next element from.\n * @param {boolean} forward Whether to look forwards or backwards.\n * @return {Element} The first element.\n * @private\n */\ngoog.dom.getNextElementNode_ = function(node, forward) {\n  while (node && node.nodeType != goog.dom.NodeType.ELEMENT) {\n    node = forward ? node.nextSibling : node.previousSibling;\n  }\n\n  return /** @type {Element} */ (node);\n};\n\n\n/**\n * Returns the next node in source order from the given node.\n * @param {Node} node The node.\n * @return {Node} The next node in the DOM tree, or null if this was the last\n *     node.\n */\ngoog.dom.getNextNode = function(node) {\n  if (!node) {\n    return null;\n  }\n\n  if (node.firstChild) {\n    return node.firstChild;\n  }\n\n  while (node && !node.nextSibling) {\n    node = node.parentNode;\n  }\n\n  return node ? node.nextSibling : null;\n};\n\n\n/**\n * Returns the previous node in source order from the given node.\n * @param {Node} node The node.\n * @return {Node} The previous node in the DOM tree, or null if this was the\n *     first node.\n */\ngoog.dom.getPreviousNode = function(node) {\n  if (!node) {\n    return null;\n  }\n\n  if (!node.previousSibling) {\n    return node.parentNode;\n  }\n\n  node = node.previousSibling;\n  while (node && node.lastChild) {\n    node = node.lastChild;\n  }\n\n  return node;\n};\n\n\n/**\n * Whether the object looks like a DOM node.\n * @param {?} obj The object being tested for node likeness.\n * @return {boolean} Whether the object looks like a DOM node.\n */\ngoog.dom.isNodeLike = function(obj) {\n  return goog.isObject(obj) && obj.nodeType > 0;\n};\n\n\n/**\n * Whether the object looks like an Element.\n * @param {?} obj The object being tested for Element likeness.\n * @return {boolean} Whether the object looks like an Element.\n */\ngoog.dom.isElement = function(obj) {\n  return goog.isObject(obj) && obj.nodeType == goog.dom.NodeType.ELEMENT;\n};\n\n\n/**\n * Returns true if the specified value is a Window object. This includes the\n * global window for HTML pages, and iframe windows.\n * @param {?} obj Variable to test.\n * @return {boolean} Whether the variable is a window.\n */\ngoog.dom.isWindow = function(obj) {\n  return goog.isObject(obj) && obj['window'] == obj;\n};\n\n\n/**\n * Returns an element's parent, if it's an Element.\n * @param {Element} element The DOM element.\n * @return {Element} The parent, or null if not an Element.\n */\ngoog.dom.getParentElement = function(element) {\n  var parent;\n  if (goog.dom.BrowserFeature.CAN_USE_PARENT_ELEMENT_PROPERTY) {\n    var isIe9 = goog.userAgent.IE && goog.userAgent.isVersionOrHigher('9') &&\n        !goog.userAgent.isVersionOrHigher('10');\n    // SVG elements in IE9 can't use the parentElement property.\n    // goog.global['SVGElement'] is not defined in IE9 quirks mode.\n    if (!(isIe9 && goog.global['SVGElement'] &&\n          element instanceof goog.global['SVGElement'])) {\n      parent = element.parentElement;\n      if (parent) {\n        return parent;\n      }\n    }\n  }\n  parent = element.parentNode;\n  return goog.dom.isElement(parent) ? /** @type {!Element} */ (parent) : null;\n};\n\n\n/**\n * Whether a node contains another node.\n * @param {?Node|undefined} parent The node that should contain the other node.\n * @param {?Node|undefined} descendant The node to test presence of.\n * @return {boolean} Whether the parent node contains the descendant node.\n */\ngoog.dom.contains = function(parent, descendant) {\n  if (!parent || !descendant) {\n    return false;\n  }\n  // We use browser specific methods for this if available since it is faster\n  // that way.\n\n  // IE DOM\n  if (parent.contains && descendant.nodeType == goog.dom.NodeType.ELEMENT) {\n    return parent == descendant || parent.contains(descendant);\n  }\n\n  // W3C DOM Level 3\n  if (typeof parent.compareDocumentPosition != 'undefined') {\n    return parent == descendant ||\n        Boolean(parent.compareDocumentPosition(descendant) & 16);\n  }\n\n  // W3C DOM Level 1\n  while (descendant && parent != descendant) {\n    descendant = descendant.parentNode;\n  }\n  return descendant == parent;\n};\n\n\n/**\n * Compares the document order of two nodes, returning 0 if they are the same\n * node, a negative number if node1 is before node2, and a positive number if\n * node2 is before node1.  Note that we compare the order the tags appear in the\n * document so in the tree <b><i>text</i></b> the B node is considered to be\n * before the I node.\n *\n * @param {Node} node1 The first node to compare.\n * @param {Node} node2 The second node to compare.\n * @return {number} 0 if the nodes are the same node, a negative number if node1\n *     is before node2, and a positive number if node2 is before node1.\n */\ngoog.dom.compareNodeOrder = function(node1, node2) {\n  // Fall out quickly for equality.\n  if (node1 == node2) {\n    return 0;\n  }\n\n  // Use compareDocumentPosition where available\n  if (node1.compareDocumentPosition) {\n    // 4 is the bitmask for FOLLOWS.\n    return node1.compareDocumentPosition(node2) & 2 ? 1 : -1;\n  }\n\n  // Special case for document nodes on IE 7 and 8.\n  if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(9)) {\n    if (node1.nodeType == goog.dom.NodeType.DOCUMENT) {\n      return -1;\n    }\n    if (node2.nodeType == goog.dom.NodeType.DOCUMENT) {\n      return 1;\n    }\n  }\n\n  // Process in IE using sourceIndex - we check to see if the first node has\n  // a source index or if its parent has one.\n  if ('sourceIndex' in node1 ||\n      (node1.parentNode && 'sourceIndex' in node1.parentNode)) {\n    var isElement1 = node1.nodeType == goog.dom.NodeType.ELEMENT;\n    var isElement2 = node2.nodeType == goog.dom.NodeType.ELEMENT;\n\n    if (isElement1 && isElement2) {\n      return node1.sourceIndex - node2.sourceIndex;\n    } else {\n      var parent1 = node1.parentNode;\n      var parent2 = node2.parentNode;\n\n      if (parent1 == parent2) {\n        return goog.dom.compareSiblingOrder_(node1, node2);\n      }\n\n      if (!isElement1 && goog.dom.contains(parent1, node2)) {\n        return -1 * goog.dom.compareParentsDescendantNodeIe_(node1, node2);\n      }\n\n\n      if (!isElement2 && goog.dom.contains(parent2, node1)) {\n        return goog.dom.compareParentsDescendantNodeIe_(node2, node1);\n      }\n\n      return (isElement1 ? node1.sourceIndex : parent1.sourceIndex) -\n          (isElement2 ? node2.sourceIndex : parent2.sourceIndex);\n    }\n  }\n\n  // For Safari, we compare ranges.\n  var doc = goog.dom.getOwnerDocument(node1);\n\n  var range1, range2;\n  range1 = doc.createRange();\n  range1.selectNode(node1);\n  range1.collapse(true);\n\n  range2 = doc.createRange();\n  range2.selectNode(node2);\n  range2.collapse(true);\n\n  return range1.compareBoundaryPoints(\n      goog.global['Range'].START_TO_END, range2);\n};\n\n\n/**\n * Utility function to compare the position of two nodes, when\n * `textNode`'s parent is an ancestor of `node`.  If this entry\n * condition is not met, this function will attempt to reference a null object.\n * @param {!Node} textNode The textNode to compare.\n * @param {Node} node The node to compare.\n * @return {number} -1 if node is before textNode, +1 otherwise.\n * @private\n */\ngoog.dom.compareParentsDescendantNodeIe_ = function(textNode, node) {\n  var parent = textNode.parentNode;\n  if (parent == node) {\n    // If textNode is a child of node, then node comes first.\n    return -1;\n  }\n  var sibling = node;\n  while (sibling.parentNode != parent) {\n    sibling = sibling.parentNode;\n  }\n  return goog.dom.compareSiblingOrder_(sibling, textNode);\n};\n\n\n/**\n * Utility function to compare the position of two nodes known to be non-equal\n * siblings.\n * @param {Node} node1 The first node to compare.\n * @param {!Node} node2 The second node to compare.\n * @return {number} -1 if node1 is before node2, +1 otherwise.\n * @private\n */\ngoog.dom.compareSiblingOrder_ = function(node1, node2) {\n  var s = node2;\n  while ((s = s.previousSibling)) {\n    if (s == node1) {\n      // We just found node1 before node2.\n      return -1;\n    }\n  }\n\n  // Since we didn't find it, node1 must be after node2.\n  return 1;\n};\n\n\n/**\n * Find the deepest common ancestor of the given nodes.\n * @param {...Node} var_args The nodes to find a common ancestor of.\n * @return {Node} The common ancestor of the nodes, or null if there is none.\n *     null will only be returned if two or more of the nodes are from different\n *     documents.\n */\ngoog.dom.findCommonAncestor = function(var_args) {\n  var i, count = arguments.length;\n  if (!count) {\n    return null;\n  } else if (count == 1) {\n    return arguments[0];\n  }\n\n  var paths = [];\n  var minLength = Infinity;\n  for (i = 0; i < count; i++) {\n    // Compute the list of ancestors.\n    var ancestors = [];\n    var node = arguments[i];\n    while (node) {\n      ancestors.unshift(node);\n      node = node.parentNode;\n    }\n\n    // Save the list for comparison.\n    paths.push(ancestors);\n    minLength = Math.min(minLength, ancestors.length);\n  }\n  var output = null;\n  for (i = 0; i < minLength; i++) {\n    var first = paths[0][i];\n    for (var j = 1; j < count; j++) {\n      if (first != paths[j][i]) {\n        return output;\n      }\n    }\n    output = first;\n  }\n  return output;\n};\n\n\n/**\n * Returns the owner document for a node.\n * @param {Node|Window} node The node to get the document for.\n * @return {!Document} The document owning the node.\n */\ngoog.dom.getOwnerDocument = function(node) {\n  // TODO(nnaze): Update param signature to be non-nullable.\n  goog.asserts.assert(node, 'Node cannot be null or undefined.');\n  return /** @type {!Document} */ (\n      node.nodeType == goog.dom.NodeType.DOCUMENT ? node : node.ownerDocument ||\n              node.document);\n};\n\n\n/**\n * Cross-browser function for getting the document element of a frame or iframe.\n * @param {Element} frame Frame element.\n * @return {!Document} The frame content document.\n */\ngoog.dom.getFrameContentDocument = function(frame) {\n  return frame.contentDocument ||\n      /** @type {!HTMLFrameElement} */ (frame).contentWindow.document;\n};\n\n\n/**\n * Cross-browser function for getting the window of a frame or iframe.\n * @param {Element} frame Frame element.\n * @return {Window} The window associated with the given frame, or null if none\n *     exists.\n */\ngoog.dom.getFrameContentWindow = function(frame) {\n  try {\n    return frame.contentWindow ||\n        (frame.contentDocument ? goog.dom.getWindow(frame.contentDocument) :\n                                 null);\n  } catch (e) {\n    // NOTE(user): In IE8, checking the contentWindow or contentDocument\n    // properties will throw a \"Unspecified Error\" exception if the iframe is\n    // not inserted in the DOM. If we get this we can be sure that no window\n    // exists, so return null.\n  }\n  return null;\n};\n\n\n/**\n * Sets the text content of a node, with cross-browser support.\n * @param {Node} node The node to change the text content of.\n * @param {string|number} text The value that should replace the node's content.\n */\ngoog.dom.setTextContent = function(node, text) {\n  goog.asserts.assert(\n      node != null,\n      'goog.dom.setTextContent expects a non-null value for node');\n\n  if ('textContent' in node) {\n    node.textContent = text;\n  } else if (node.nodeType == goog.dom.NodeType.TEXT) {\n    /** @type {!Text} */ (node).data = String(text);\n  } else if (\n      node.firstChild && node.firstChild.nodeType == goog.dom.NodeType.TEXT) {\n    // If the first child is a text node we just change its data and remove the\n    // rest of the children.\n    while (node.lastChild != node.firstChild) {\n      node.removeChild(node.lastChild);\n    }\n    /** @type {!Text} */ (node.firstChild).data = String(text);\n  } else {\n    goog.dom.removeChildren(node);\n    var doc = goog.dom.getOwnerDocument(node);\n    node.appendChild(doc.createTextNode(String(text)));\n  }\n};\n\n\n/**\n * Gets the outerHTML of a node, which islike innerHTML, except that it\n * actually contains the HTML of the node itself.\n * @param {Element} element The element to get the HTML of.\n * @return {string} The outerHTML of the given element.\n */\ngoog.dom.getOuterHtml = function(element) {\n  goog.asserts.assert(\n      element !== null,\n      'goog.dom.getOuterHtml expects a non-null value for element');\n  // IE, Opera and WebKit all have outerHTML.\n  if ('outerHTML' in element) {\n    return element.outerHTML;\n  } else {\n    var doc = goog.dom.getOwnerDocument(element);\n    var div = goog.dom.createElement_(doc, goog.dom.TagName.DIV);\n    div.appendChild(element.cloneNode(true));\n    return div.innerHTML;\n  }\n};\n\n\n/**\n * Finds the first descendant node that matches the filter function, using\n * a depth first search. This function offers the most general purpose way\n * of finding a matching element. You may also wish to consider\n * `goog.dom.query` which can express many matching criteria using\n * CSS selector expressions. These expressions often result in a more\n * compact representation of the desired result.\n * @see goog.dom.query\n *\n * @param {Node} root The root of the tree to search.\n * @param {function(Node) : boolean} p The filter function.\n * @return {Node|undefined} The found node or undefined if none is found.\n */\ngoog.dom.findNode = function(root, p) {\n  var rv = [];\n  var found = goog.dom.findNodes_(root, p, rv, true);\n  return found ? rv[0] : undefined;\n};\n\n\n/**\n * Finds all the descendant nodes that match the filter function, using a\n * a depth first search. This function offers the most general-purpose way\n * of finding a set of matching elements. You may also wish to consider\n * `goog.dom.query` which can express many matching criteria using\n * CSS selector expressions. These expressions often result in a more\n * compact representation of the desired result.\n\n * @param {Node} root The root of the tree to search.\n * @param {function(Node) : boolean} p The filter function.\n * @return {!Array<!Node>} The found nodes or an empty array if none are found.\n */\ngoog.dom.findNodes = function(root, p) {\n  var rv = [];\n  goog.dom.findNodes_(root, p, rv, false);\n  return rv;\n};\n\n\n/**\n * Finds the first or all the descendant nodes that match the filter function,\n * using a depth first search.\n * @param {Node} root The root of the tree to search.\n * @param {function(Node) : boolean} p The filter function.\n * @param {!Array<!Node>} rv The found nodes are added to this array.\n * @param {boolean} findOne If true we exit after the first found node.\n * @return {boolean} Whether the search is complete or not. True in case findOne\n *     is true and the node is found. False otherwise.\n * @private\n */\ngoog.dom.findNodes_ = function(root, p, rv, findOne) {\n  if (root != null) {\n    var child = root.firstChild;\n    while (child) {\n      if (p(child)) {\n        rv.push(child);\n        if (findOne) {\n          return true;\n        }\n      }\n      if (goog.dom.findNodes_(child, p, rv, findOne)) {\n        return true;\n      }\n      child = child.nextSibling;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Map of tags whose content to ignore when calculating text length.\n * @private {!Object<string, number>}\n * @const\n */\ngoog.dom.TAGS_TO_IGNORE_ = {\n  'SCRIPT': 1,\n  'STYLE': 1,\n  'HEAD': 1,\n  'IFRAME': 1,\n  'OBJECT': 1\n};\n\n\n/**\n * Map of tags which have predefined values with regard to whitespace.\n * @private {!Object<string, string>}\n * @const\n */\ngoog.dom.PREDEFINED_TAG_VALUES_ = {\n  'IMG': ' ',\n  'BR': '\\n'\n};\n\n\n/**\n * Returns true if the element has a tab index that allows it to receive\n * keyboard focus (tabIndex >= 0), false otherwise.  Note that some elements\n * natively support keyboard focus, even if they have no tab index.\n * @param {!Element} element Element to check.\n * @return {boolean} Whether the element has a tab index that allows keyboard\n *     focus.\n */\ngoog.dom.isFocusableTabIndex = function(element) {\n  return goog.dom.hasSpecifiedTabIndex_(element) &&\n      goog.dom.isTabIndexFocusable_(element);\n};\n\n\n/**\n * Enables or disables keyboard focus support on the element via its tab index.\n * Only elements for which {@link goog.dom.isFocusableTabIndex} returns true\n * (or elements that natively support keyboard focus, like form elements) can\n * receive keyboard focus.  See http://go/tabindex for more info.\n * @param {Element} element Element whose tab index is to be changed.\n * @param {boolean} enable Whether to set or remove a tab index on the element\n *     that supports keyboard focus.\n */\ngoog.dom.setFocusableTabIndex = function(element, enable) {\n  if (enable) {\n    element.tabIndex = 0;\n  } else {\n    // Set tabIndex to -1 first, then remove it. This is a workaround for\n    // Safari (confirmed in version 4 on Windows). When removing the attribute\n    // without setting it to -1 first, the element remains keyboard focusable\n    // despite not having a tabIndex attribute anymore.\n    element.tabIndex = -1;\n    element.removeAttribute('tabIndex');  // Must be camelCase!\n  }\n};\n\n\n/**\n * Returns true if the element can be focused, i.e. it has a tab index that\n * allows it to receive keyboard focus (tabIndex >= 0), or it is an element\n * that natively supports keyboard focus.\n * @param {!Element} element Element to check.\n * @return {boolean} Whether the element allows keyboard focus.\n */\ngoog.dom.isFocusable = function(element) {\n  var focusable;\n  // Some elements can have unspecified tab index and still receive focus.\n  if (goog.dom.nativelySupportsFocus_(element)) {\n    // Make sure the element is not disabled ...\n    focusable = !element.disabled &&\n        // ... and if a tab index is specified, it allows focus.\n        (!goog.dom.hasSpecifiedTabIndex_(element) ||\n         goog.dom.isTabIndexFocusable_(element));\n  } else {\n    focusable = goog.dom.isFocusableTabIndex(element);\n  }\n\n  // IE requires elements to be visible in order to focus them.\n  return focusable && goog.userAgent.IE ?\n      goog.dom.hasNonZeroBoundingRect_(/** @type {!HTMLElement} */ (element)) :\n      focusable;\n};\n\n\n/**\n * Returns true if the element has a specified tab index.\n * @param {!Element} element Element to check.\n * @return {boolean} Whether the element has a specified tab index.\n * @private\n */\ngoog.dom.hasSpecifiedTabIndex_ = function(element) {\n  // IE8 and below don't support hasAttribute(), instead check whether the\n  // 'tabindex' attributeNode is specified. Otherwise check hasAttribute().\n  if (goog.userAgent.IE && !goog.userAgent.isVersionOrHigher('9')) {\n    var attrNode = element.getAttributeNode('tabindex');  // Must be lowercase!\n    return goog.isDefAndNotNull(attrNode) && attrNode.specified;\n  } else {\n    return element.hasAttribute('tabindex');\n  }\n};\n\n\n/**\n * Returns true if the element's tab index allows the element to be focused.\n * @param {!Element} element Element to check.\n * @return {boolean} Whether the element's tab index allows focus.\n * @private\n */\ngoog.dom.isTabIndexFocusable_ = function(element) {\n  var index = /** @type {!HTMLElement} */ (element).tabIndex;\n  // NOTE: IE9 puts tabIndex in 16-bit int, e.g. -2 is 65534.\n  return goog.isNumber(index) && index >= 0 && index < 32768;\n};\n\n\n/**\n * Returns true if the element is focusable even when tabIndex is not set.\n * @param {!Element} element Element to check.\n * @return {boolean} Whether the element natively supports focus.\n * @private\n */\ngoog.dom.nativelySupportsFocus_ = function(element) {\n  return element.tagName == goog.dom.TagName.A ||\n      element.tagName == goog.dom.TagName.INPUT ||\n      element.tagName == goog.dom.TagName.TEXTAREA ||\n      element.tagName == goog.dom.TagName.SELECT ||\n      element.tagName == goog.dom.TagName.BUTTON;\n};\n\n\n/**\n * Returns true if the element has a bounding rectangle that would be visible\n * (i.e. its width and height are greater than zero).\n * @param {!HTMLElement} element Element to check.\n * @return {boolean} Whether the element has a non-zero bounding rectangle.\n * @private\n */\ngoog.dom.hasNonZeroBoundingRect_ = function(element) {\n  var rect;\n  if (!goog.isFunction(element['getBoundingClientRect']) ||\n      // In IE, getBoundingClientRect throws on detached nodes.\n      (goog.userAgent.IE && element.parentElement == null)) {\n    rect = {'height': element.offsetHeight, 'width': element.offsetWidth};\n  } else {\n    rect = element.getBoundingClientRect();\n  }\n  return goog.isDefAndNotNull(rect) && rect.height > 0 && rect.width > 0;\n};\n\n\n/**\n * Returns the text content of the current node, without markup and invisible\n * symbols. New lines are stripped and whitespace is collapsed,\n * such that each character would be visible.\n *\n * In browsers that support it, innerText is used.  Other browsers attempt to\n * simulate it via node traversal.  Line breaks are canonicalized in IE.\n *\n * @param {Node} node The node from which we are getting content.\n * @return {string} The text content.\n */\ngoog.dom.getTextContent = function(node) {\n  var textContent;\n  // Note(arv): IE9, Opera, and Safari 3 support innerText but they include\n  // text nodes in script tags. So we revert to use a user agent test here.\n  if (goog.dom.BrowserFeature.CAN_USE_INNER_TEXT && node !== null &&\n      ('innerText' in node)) {\n    textContent = goog.string.canonicalizeNewlines(node.innerText);\n    // Unfortunately .innerText() returns text with &shy; symbols\n    // We need to filter it out and then remove duplicate whitespaces\n  } else {\n    var buf = [];\n    goog.dom.getTextContent_(node, buf, true);\n    textContent = buf.join('');\n  }\n\n  // Strip &shy; entities. goog.format.insertWordBreaks inserts them in Opera.\n  textContent = textContent.replace(/ \\xAD /g, ' ').replace(/\\xAD/g, '');\n  // Strip &#8203; entities. goog.format.insertWordBreaks inserts them in IE8.\n  textContent = textContent.replace(/\\u200B/g, '');\n\n  // Skip this replacement on old browsers with working innerText, which\n  // automatically turns &nbsp; into ' ' and / +/ into ' ' when reading\n  // innerText.\n  if (!goog.dom.BrowserFeature.CAN_USE_INNER_TEXT) {\n    textContent = textContent.replace(/ +/g, ' ');\n  }\n  if (textContent != ' ') {\n    textContent = textContent.replace(/^\\s*/, '');\n  }\n\n  return textContent;\n};\n\n\n/**\n * Returns the text content of the current node, without markup.\n *\n * Unlike `getTextContent` this method does not collapse whitespaces\n * or normalize lines breaks.\n *\n * @param {Node} node The node from which we are getting content.\n * @return {string} The raw text content.\n */\ngoog.dom.getRawTextContent = function(node) {\n  var buf = [];\n  goog.dom.getTextContent_(node, buf, false);\n\n  return buf.join('');\n};\n\n\n/**\n * Recursive support function for text content retrieval.\n *\n * @param {Node} node The node from which we are getting content.\n * @param {Array<string>} buf string buffer.\n * @param {boolean} normalizeWhitespace Whether to normalize whitespace.\n * @private\n */\ngoog.dom.getTextContent_ = function(node, buf, normalizeWhitespace) {\n  if (node.nodeName in goog.dom.TAGS_TO_IGNORE_) {\n    // ignore certain tags\n  } else if (node.nodeType == goog.dom.NodeType.TEXT) {\n    if (normalizeWhitespace) {\n      buf.push(String(node.nodeValue).replace(/(\\r\\n|\\r|\\n)/g, ''));\n    } else {\n      buf.push(node.nodeValue);\n    }\n  } else if (node.nodeName in goog.dom.PREDEFINED_TAG_VALUES_) {\n    buf.push(goog.dom.PREDEFINED_TAG_VALUES_[node.nodeName]);\n  } else {\n    var child = node.firstChild;\n    while (child) {\n      goog.dom.getTextContent_(child, buf, normalizeWhitespace);\n      child = child.nextSibling;\n    }\n  }\n};\n\n\n/**\n * Returns the text length of the text contained in a node, without markup. This\n * is equivalent to the selection length if the node was selected, or the number\n * of cursor movements to traverse the node. Images & BRs take one space.  New\n * lines are ignored.\n *\n * @param {Node} node The node whose text content length is being calculated.\n * @return {number} The length of `node`'s text content.\n */\ngoog.dom.getNodeTextLength = function(node) {\n  return goog.dom.getTextContent(node).length;\n};\n\n\n/**\n * Returns the text offset of a node relative to one of its ancestors. The text\n * length is the same as the length calculated by goog.dom.getNodeTextLength.\n *\n * @param {Node} node The node whose offset is being calculated.\n * @param {Node=} opt_offsetParent The node relative to which the offset will\n *     be calculated. Defaults to the node's owner document's body.\n * @return {number} The text offset.\n */\ngoog.dom.getNodeTextOffset = function(node, opt_offsetParent) {\n  var root = opt_offsetParent || goog.dom.getOwnerDocument(node).body;\n  var buf = [];\n  while (node && node != root) {\n    var cur = node;\n    while ((cur = cur.previousSibling)) {\n      buf.unshift(goog.dom.getTextContent(cur));\n    }\n    node = node.parentNode;\n  }\n  // Trim left to deal with FF cases when there might be line breaks and empty\n  // nodes at the front of the text\n  return goog.string.trimLeft(buf.join('')).replace(/ +/g, ' ').length;\n};\n\n\n/**\n * Returns the node at a given offset in a parent node.  If an object is\n * provided for the optional third parameter, the node and the remainder of the\n * offset will stored as properties of this object.\n * @param {Node} parent The parent node.\n * @param {number} offset The offset into the parent node.\n * @param {Object=} opt_result Object to be used to store the return value. The\n *     return value will be stored in the form {node: Node, remainder: number}\n *     if this object is provided.\n * @return {Node} The node at the given offset.\n */\ngoog.dom.getNodeAtOffset = function(parent, offset, opt_result) {\n  var stack = [parent], pos = 0, cur = null;\n  while (stack.length > 0 && pos < offset) {\n    cur = stack.pop();\n    if (cur.nodeName in goog.dom.TAGS_TO_IGNORE_) {\n      // ignore certain tags\n    } else if (cur.nodeType == goog.dom.NodeType.TEXT) {\n      var text = cur.nodeValue.replace(/(\\r\\n|\\r|\\n)/g, '').replace(/ +/g, ' ');\n      pos += text.length;\n    } else if (cur.nodeName in goog.dom.PREDEFINED_TAG_VALUES_) {\n      pos += goog.dom.PREDEFINED_TAG_VALUES_[cur.nodeName].length;\n    } else {\n      for (var i = cur.childNodes.length - 1; i >= 0; i--) {\n        stack.push(cur.childNodes[i]);\n      }\n    }\n  }\n  if (goog.isObject(opt_result)) {\n    opt_result.remainder = cur ? cur.nodeValue.length + offset - pos - 1 : 0;\n    opt_result.node = cur;\n  }\n\n  return cur;\n};\n\n\n/**\n * Returns true if the object is a `NodeList`.  To qualify as a NodeList,\n * the object must have a numeric length property and an item function (which\n * has type 'string' on IE for some reason).\n * @param {Object} val Object to test.\n * @return {boolean} Whether the object is a NodeList.\n */\ngoog.dom.isNodeList = function(val) {\n  // TODO(attila): Now the isNodeList is part of goog.dom we can use\n  // goog.userAgent to make this simpler.\n  // A NodeList must have a length property of type 'number' on all platforms.\n  if (val && typeof val.length == 'number') {\n    // A NodeList is an object everywhere except Safari, where it's a function.\n    if (goog.isObject(val)) {\n      // A NodeList must have an item function (on non-IE platforms) or an item\n      // property of type 'string' (on IE).\n      return typeof val.item == 'function' || typeof val.item == 'string';\n    } else if (goog.isFunction(val)) {\n      // On Safari, a NodeList is a function with an item property that is also\n      // a function.\n      return typeof /** @type {?} */ (val.item) == 'function';\n    }\n  }\n\n  // Not a NodeList.\n  return false;\n};\n\n\n/**\n * Walks up the DOM hierarchy returning the first ancestor that has the passed\n * tag name and/or class name. If the passed element matches the specified\n * criteria, the element itself is returned.\n * @param {Node} element The DOM node to start with.\n * @param {?(goog.dom.TagName<T>|string)=} opt_tag The tag name to match (or\n *     null/undefined to match only based on class name).\n * @param {?string=} opt_class The class name to match (or null/undefined to\n *     match only based on tag name).\n * @param {number=} opt_maxSearchSteps Maximum number of levels to search up the\n *     dom.\n * @return {?R} The first ancestor that matches the passed criteria, or\n *     null if no match is found. The return type is {?Element} if opt_tag is\n *     not a member of goog.dom.TagName or a more specific type if it is (e.g.\n *     {?HTMLAnchorElement} for goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.getAncestorByTagNameAndClass = function(\n    element, opt_tag, opt_class, opt_maxSearchSteps) {\n  if (!opt_tag && !opt_class) {\n    return null;\n  }\n  var tagName = opt_tag ? String(opt_tag).toUpperCase() : null;\n  return /** @type {Element} */ (goog.dom.getAncestor(element, function(node) {\n    return (!tagName || node.nodeName == tagName) &&\n        (!opt_class ||\n         goog.isString(node.className) &&\n             goog.array.contains(node.className.split(/\\s+/), opt_class));\n  }, true, opt_maxSearchSteps));\n};\n\n\n/**\n * Walks up the DOM hierarchy returning the first ancestor that has the passed\n * class name. If the passed element matches the specified criteria, the\n * element itself is returned.\n * @param {Node} element The DOM node to start with.\n * @param {string} className The class name to match.\n * @param {number=} opt_maxSearchSteps Maximum number of levels to search up the\n *     dom.\n * @return {Element} The first ancestor that matches the passed criteria, or\n *     null if none match.\n */\ngoog.dom.getAncestorByClass = function(element, className, opt_maxSearchSteps) {\n  return goog.dom.getAncestorByTagNameAndClass(\n      element, null, className, opt_maxSearchSteps);\n};\n\n\n/**\n * Walks up the DOM hierarchy returning the first ancestor that passes the\n * matcher function.\n * @param {Node} element The DOM node to start with.\n * @param {function(Node) : boolean} matcher A function that returns true if the\n *     passed node matches the desired criteria.\n * @param {boolean=} opt_includeNode If true, the node itself is included in\n *     the search (the first call to the matcher will pass startElement as\n *     the node to test).\n * @param {number=} opt_maxSearchSteps Maximum number of levels to search up the\n *     dom.\n * @return {Node} DOM node that matched the matcher, or null if there was\n *     no match.\n */\ngoog.dom.getAncestor = function(\n    element, matcher, opt_includeNode, opt_maxSearchSteps) {\n  if (element && !opt_includeNode) {\n    element = element.parentNode;\n  }\n  var steps = 0;\n  while (element &&\n         (opt_maxSearchSteps == null || steps <= opt_maxSearchSteps)) {\n    goog.asserts.assert(element.name != 'parentNode');\n    if (matcher(element)) {\n      return element;\n    }\n    element = element.parentNode;\n    steps++;\n  }\n  // Reached the root of the DOM without a match\n  return null;\n};\n\n\n/**\n * Determines the active element in the given document.\n * @param {Document} doc The document to look in.\n * @return {Element} The active element.\n */\ngoog.dom.getActiveElement = function(doc) {\n  // While in an iframe, IE9 will throw \"Unspecified error\" when accessing\n  // activeElement.\n  try {\n    var activeElement = doc && doc.activeElement;\n    // While not in an iframe, IE9-11 sometimes gives null.\n    // While in an iframe, IE11 sometimes returns an empty object.\n    return activeElement && activeElement.nodeName ? activeElement : null;\n  } catch (e) {\n    return null;\n  }\n};\n\n\n/**\n * Gives the current devicePixelRatio.\n *\n * By default, this is the value of window.devicePixelRatio (which should be\n * preferred if present).\n *\n * If window.devicePixelRatio is not present, the ratio is calculated with\n * window.matchMedia, if present. Otherwise, gives 1.0.\n *\n * Some browsers (including Chrome) consider the browser zoom level in the pixel\n * ratio, so the value may change across multiple calls.\n *\n * @return {number} The number of actual pixels per virtual pixel.\n */\ngoog.dom.getPixelRatio = function() {\n  var win = goog.dom.getWindow();\n  if (goog.isDef(win.devicePixelRatio)) {\n    return win.devicePixelRatio;\n  } else if (win.matchMedia) {\n    // Should be for IE10 and FF6-17 (this basically clamps to lower)\n    // Note that the order of these statements is important\n    return goog.dom.matchesPixelRatio_(3) || goog.dom.matchesPixelRatio_(2) ||\n           goog.dom.matchesPixelRatio_(1.5) || goog.dom.matchesPixelRatio_(1) ||\n           .75;\n  }\n  return 1;\n};\n\n\n/**\n * Calculates a mediaQuery to check if the current device supports the\n * given actual to virtual pixel ratio.\n * @param {number} pixelRatio The ratio of actual pixels to virtual pixels.\n * @return {number} pixelRatio if applicable, otherwise 0.\n * @private\n */\ngoog.dom.matchesPixelRatio_ = function(pixelRatio) {\n  var win = goog.dom.getWindow();\n  /**\n   * Due to the 1:96 fixed ratio of CSS in to CSS px, 1dppx is equivalent to\n   * 96dpi.\n   * @const {number}\n   */\n  var dpiPerDppx = 96;\n  var query =\n      // FF16-17\n      '(min-resolution: ' + pixelRatio + 'dppx),' +\n      // FF6-15\n      '(min--moz-device-pixel-ratio: ' + pixelRatio + '),' +\n      // IE10 (this works for the two browsers above too but I don't want to\n      // trust the 1:96 fixed ratio magic)\n      '(min-resolution: ' + (pixelRatio * dpiPerDppx) + 'dpi)';\n  return win.matchMedia(query).matches ? pixelRatio : 0;\n};\n\n\n/**\n * Gets '2d' context of a canvas. Shortcut for canvas.getContext('2d') with a\n * type information.\n * @param {!HTMLCanvasElement} canvas\n * @return {!CanvasRenderingContext2D}\n */\ngoog.dom.getCanvasContext2D = function(canvas) {\n  return /** @type {!CanvasRenderingContext2D} */ (canvas.getContext('2d'));\n};\n\n\n\n/**\n * Create an instance of a DOM helper with a new document object.\n * @param {Document=} opt_document Document object to associate with this\n *     DOM helper.\n * @constructor\n */\ngoog.dom.DomHelper = function(opt_document) {\n  /**\n   * Reference to the document object to use\n   * @type {!Document}\n   * @private\n   */\n  this.document_ = opt_document || goog.global.document || document;\n};\n\n\n/**\n * Gets the dom helper object for the document where the element resides.\n * @param {Node=} opt_node If present, gets the DomHelper for this node.\n * @return {!goog.dom.DomHelper} The DomHelper.\n */\ngoog.dom.DomHelper.prototype.getDomHelper = goog.dom.getDomHelper;\n\n\n/**\n * Sets the document object.\n * @param {!Document} document Document object.\n */\ngoog.dom.DomHelper.prototype.setDocument = function(document) {\n  this.document_ = document;\n};\n\n\n/**\n * Gets the document object being used by the dom library.\n * @return {!Document} Document object.\n */\ngoog.dom.DomHelper.prototype.getDocument = function() {\n  return this.document_;\n};\n\n\n/**\n * Alias for `getElementById`. If a DOM node is passed in then we just\n * return that.\n * @param {string|Element} element Element ID or a DOM node.\n * @return {Element} The element with the given ID, or the node passed in.\n */\ngoog.dom.DomHelper.prototype.getElement = function(element) {\n  return goog.dom.getElementHelper_(this.document_, element);\n};\n\n\n/**\n * Gets an element by id, asserting that the element is found.\n *\n * This is used when an element is expected to exist, and should fail with\n * an assertion error if it does not (if assertions are enabled).\n *\n * @param {string} id Element ID.\n * @return {!Element} The element with the given ID, if it exists.\n */\ngoog.dom.DomHelper.prototype.getRequiredElement = function(id) {\n  return goog.dom.getRequiredElementHelper_(this.document_, id);\n};\n\n\n/**\n * Alias for `getElement`.\n * @param {string|Element} element Element ID or a DOM node.\n * @return {Element} The element with the given ID, or the node passed in.\n * @deprecated Use {@link goog.dom.DomHelper.prototype.getElement} instead.\n */\ngoog.dom.DomHelper.prototype.$ = goog.dom.DomHelper.prototype.getElement;\n\n\n/**\n * Gets elements by tag name.\n * @param {!goog.dom.TagName<T>} tagName\n * @param {(!Document|!Element)=} opt_parent Parent element or document where to\n *     look for elements. Defaults to document of this DomHelper.\n * @return {!NodeList<R>} List of elements. The members of the list are\n *     {!Element} if tagName is not a member of goog.dom.TagName or more\n *     specific types if it is (e.g. {!HTMLAnchorElement} for\n *     goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.DomHelper.prototype.getElementsByTagName =\n    function(tagName, opt_parent) {\n  var parent = opt_parent || this.document_;\n  return parent.getElementsByTagName(String(tagName));\n};\n\n\n/**\n * Looks up elements by both tag and class name, using browser native functions\n * (`querySelectorAll`, `getElementsByTagName` or\n * `getElementsByClassName`) where possible. The returned array is a live\n * NodeList or a static list depending on the code path taken.\n *\n * @see goog.dom.query\n *\n * @param {(string|?goog.dom.TagName<T>)=} opt_tag Element tag name or * for all\n *     tags.\n * @param {?string=} opt_class Optional class name.\n * @param {(Document|Element)=} opt_el Optional element to look in.\n * @return {!IArrayLike<R>} Array-like list of elements (only a length property\n *     and numerical indices are guaranteed to exist). The members of the array\n *     are {!Element} if opt_tag is not a member of goog.dom.TagName or more\n *     specific types if it is (e.g. {!HTMLAnchorElement} for\n *     goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.DomHelper.prototype.getElementsByTagNameAndClass = function(\n    opt_tag, opt_class, opt_el) {\n  return goog.dom.getElementsByTagNameAndClass_(\n      this.document_, opt_tag, opt_class, opt_el);\n};\n\n\n/**\n * Gets the first element matching the tag and the class.\n *\n * @param {(string|?goog.dom.TagName<T>)=} opt_tag Element tag name.\n * @param {?string=} opt_class Optional class name.\n * @param {(Document|Element)=} opt_el Optional element to look in.\n * @return {?R} Reference to a DOM node. The return type is {?Element} if\n *     tagName is a string or a more specific type if it is a member of\n *     goog.dom.TagName (e.g. {?HTMLAnchorElement} for goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.DomHelper.prototype.getElementByTagNameAndClass = function(\n    opt_tag, opt_class, opt_el) {\n  return goog.dom.getElementByTagNameAndClass_(\n      this.document_, opt_tag, opt_class, opt_el);\n};\n\n\n/**\n * Returns an array of all the elements with the provided className.\n * @see {goog.dom.query}\n * @param {string} className the name of the class to look for.\n * @param {Element|Document=} opt_el Optional element to look in.\n * @return {!IArrayLike<!Element>} The items found with the class name provided.\n */\ngoog.dom.DomHelper.prototype.getElementsByClass = function(className, opt_el) {\n  var doc = opt_el || this.document_;\n  return goog.dom.getElementsByClass(className, doc);\n};\n\n\n/**\n * Returns the first element we find matching the provided class name.\n * @see {goog.dom.query}\n * @param {string} className the name of the class to look for.\n * @param {(Element|Document)=} opt_el Optional element to look in.\n * @return {Element} The first item found with the class name provided.\n */\ngoog.dom.DomHelper.prototype.getElementByClass = function(className, opt_el) {\n  var doc = opt_el || this.document_;\n  return goog.dom.getElementByClass(className, doc);\n};\n\n\n/**\n * Ensures an element with the given className exists, and then returns the\n * first element with the provided className.\n * @see {goog.dom.query}\n * @param {string} className the name of the class to look for.\n * @param {(!Element|!Document)=} opt_root Optional element or document to look\n *     in.\n * @return {!Element} The first item found with the class name provided.\n * @throws {goog.asserts.AssertionError} Thrown if no element is found.\n */\ngoog.dom.DomHelper.prototype.getRequiredElementByClass = function(\n    className, opt_root) {\n  var root = opt_root || this.document_;\n  return goog.dom.getRequiredElementByClass(className, root);\n};\n\n\n/**\n * Alias for `getElementsByTagNameAndClass`.\n * @deprecated Use DomHelper getElementsByTagNameAndClass.\n * @see goog.dom.query\n *\n * @param {(string|?goog.dom.TagName<T>)=} opt_tag Element tag name.\n * @param {?string=} opt_class Optional class name.\n * @param {Element=} opt_el Optional element to look in.\n * @return {!IArrayLike<R>} Array-like list of elements (only a length property\n *     and numerical indices are guaranteed to exist). The members of the array\n *     are {!Element} if opt_tag is a string or more specific types if it is\n *     a member of goog.dom.TagName (e.g. {!HTMLAnchorElement} for\n *     goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.DomHelper.prototype.$$ =\n    goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;\n\n\n/**\n * Sets a number of properties on a node.\n * @param {Element} element DOM node to set properties on.\n * @param {Object} properties Hash of property:value pairs.\n */\ngoog.dom.DomHelper.prototype.setProperties = goog.dom.setProperties;\n\n\n/**\n * Gets the dimensions of the viewport.\n * @param {Window=} opt_window Optional window element to test. Defaults to\n *     the window of the Dom Helper.\n * @return {!goog.math.Size} Object with values 'width' and 'height'.\n */\ngoog.dom.DomHelper.prototype.getViewportSize = function(opt_window) {\n  // TODO(arv): This should not take an argument. That breaks the rule of a\n  // a DomHelper representing a single frame/window/document.\n  return goog.dom.getViewportSize(opt_window || this.getWindow());\n};\n\n\n/**\n * Calculates the height of the document.\n *\n * @return {number} The height of the document.\n */\ngoog.dom.DomHelper.prototype.getDocumentHeight = function() {\n  return goog.dom.getDocumentHeight_(this.getWindow());\n};\n\n\n/**\n * Typedef for use with goog.dom.createDom and goog.dom.append.\n * @typedef {Object|string|Array|NodeList}\n */\ngoog.dom.Appendable;\n\n\n/**\n * Returns a dom node with a set of attributes.  This function accepts varargs\n * for subsequent nodes to be added.  Subsequent nodes will be added to the\n * first node as childNodes.\n *\n * So:\n * <code>createDom(goog.dom.TagName.DIV, null, createDom(goog.dom.TagName.P),\n * createDom(goog.dom.TagName.P));</code> would return a div with two child\n * paragraphs\n *\n * An easy way to move all child nodes of an existing element to a new parent\n * element is:\n * <code>createDom(goog.dom.TagName.DIV, null, oldElement.childNodes);</code>\n * which will remove all child nodes from the old element and add them as\n * child nodes of the new DIV.\n *\n * @param {string|!goog.dom.TagName<T>} tagName Tag to create.\n * @param {?Object|?Array<string>|string=} opt_attributes If object, then a map\n *     of name-value pairs for attributes. If a string, then this is the\n *     className of the new element. If an array, the elements will be joined\n *     together as the className of the new element.\n * @param {...(goog.dom.Appendable|undefined)} var_args Further DOM nodes or\n *     strings for text nodes. If one of the var_args is an array or\n *     NodeList, its elements will be added as childNodes instead.\n * @return {R} Reference to a DOM node. The return type is {!Element} if tagName\n *     is a string or a more specific type if it is a member of\n *     goog.dom.TagName (e.g. {!HTMLAnchorElement} for goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.DomHelper.prototype.createDom = function(\n    tagName, opt_attributes, var_args) {\n  return goog.dom.createDom_(this.document_, arguments);\n};\n\n\n/**\n * Alias for `createDom`.\n * @param {string|!goog.dom.TagName<T>} tagName Tag to create.\n * @param {?Object|?Array<string>|string=} opt_attributes If object, then a map\n *     of name-value pairs for attributes. If a string, then this is the\n *     className of the new element. If an array, the elements will be joined\n *     together as the className of the new element.\n * @param {...(goog.dom.Appendable|undefined)} var_args Further DOM nodes or\n *     strings for text nodes.  If one of the var_args is an array, its children\n *     will be added as childNodes instead.\n * @return {R} Reference to a DOM node. The return type is {!Element} if tagName\n *     is a string or a more specific type if it is a member of\n *     goog.dom.TagName (e.g. {!HTMLAnchorElement} for goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n * @deprecated Use {@link goog.dom.DomHelper.prototype.createDom} instead.\n */\ngoog.dom.DomHelper.prototype.$dom = goog.dom.DomHelper.prototype.createDom;\n\n\n/**\n * Creates a new element.\n * @param {string|!goog.dom.TagName<T>} name Tag to create.\n * @return {R} The new element. The return type is {!Element} if name is\n *     a string or a more specific type if it is a member of goog.dom.TagName\n *     (e.g. {!HTMLAnchorElement} for goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.DomHelper.prototype.createElement = function(name) {\n  return goog.dom.createElement_(this.document_, name);\n};\n\n\n/**\n * Creates a new text node.\n * @param {number|string} content Content.\n * @return {!Text} The new text node.\n */\ngoog.dom.DomHelper.prototype.createTextNode = function(content) {\n  return this.document_.createTextNode(String(content));\n};\n\n\n/**\n * Create a table.\n * @param {number} rows The number of rows in the table.  Must be >= 1.\n * @param {number} columns The number of columns in the table.  Must be >= 1.\n * @param {boolean=} opt_fillWithNbsp If true, fills table entries with\n *     `goog.string.Unicode.NBSP` characters.\n * @return {!HTMLElement} The created table.\n */\ngoog.dom.DomHelper.prototype.createTable = function(\n    rows, columns, opt_fillWithNbsp) {\n  return goog.dom.createTable_(\n      this.document_, rows, columns, !!opt_fillWithNbsp);\n};\n\n\n/**\n * Converts an HTML into a node or a document fragment. A single Node is used if\n * `html` only generates a single node. If `html` generates multiple\n * nodes then these are put inside a `DocumentFragment`. This is a safe\n * version of `goog.dom.DomHelper#htmlToDocumentFragment` which is now\n * deleted.\n * @param {!goog.html.SafeHtml} html The HTML markup to convert.\n * @return {!Node} The resulting node.\n */\ngoog.dom.DomHelper.prototype.safeHtmlToNode = function(html) {\n  return goog.dom.safeHtmlToNode_(this.document_, html);\n};\n\n\n/**\n * Returns true if the browser is in \"CSS1-compatible\" (standards-compliant)\n * mode, false otherwise.\n * @return {boolean} True if in CSS1-compatible mode.\n */\ngoog.dom.DomHelper.prototype.isCss1CompatMode = function() {\n  return goog.dom.isCss1CompatMode_(this.document_);\n};\n\n\n/**\n * Gets the window object associated with the document.\n * @return {!Window} The window associated with the given document.\n */\ngoog.dom.DomHelper.prototype.getWindow = function() {\n  return goog.dom.getWindow_(this.document_);\n};\n\n\n/**\n * Gets the document scroll element.\n * @return {!Element} Scrolling element.\n */\ngoog.dom.DomHelper.prototype.getDocumentScrollElement = function() {\n  return goog.dom.getDocumentScrollElement_(this.document_);\n};\n\n\n/**\n * Gets the document scroll distance as a coordinate object.\n * @return {!goog.math.Coordinate} Object with properties 'x' and 'y'.\n */\ngoog.dom.DomHelper.prototype.getDocumentScroll = function() {\n  return goog.dom.getDocumentScroll_(this.document_);\n};\n\n\n/**\n * Determines the active element in the given document.\n * @param {Document=} opt_doc The document to look in.\n * @return {Element} The active element.\n */\ngoog.dom.DomHelper.prototype.getActiveElement = function(opt_doc) {\n  return goog.dom.getActiveElement(opt_doc || this.document_);\n};\n\n\n/**\n * Appends a child to a node.\n * @param {Node} parent Parent.\n * @param {Node} child Child.\n */\ngoog.dom.DomHelper.prototype.appendChild = goog.dom.appendChild;\n\n\n/**\n * Appends a node with text or other nodes.\n * @param {!Node} parent The node to append nodes to.\n * @param {...goog.dom.Appendable} var_args The things to append to the node.\n *     If this is a Node it is appended as is.\n *     If this is a string then a text node is appended.\n *     If this is an array like object then fields 0 to length - 1 are appended.\n */\ngoog.dom.DomHelper.prototype.append = goog.dom.append;\n\n\n/**\n * Determines if the given node can contain children, intended to be used for\n * HTML generation.\n *\n * @param {Node} node The node to check.\n * @return {boolean} Whether the node can contain children.\n */\ngoog.dom.DomHelper.prototype.canHaveChildren = goog.dom.canHaveChildren;\n\n\n/**\n * Removes all the child nodes on a DOM node.\n * @param {Node} node Node to remove children from.\n */\ngoog.dom.DomHelper.prototype.removeChildren = goog.dom.removeChildren;\n\n\n/**\n * Inserts a new node before an existing reference node (i.e., as the previous\n * sibling). If the reference node has no parent, then does nothing.\n * @param {Node} newNode Node to insert.\n * @param {Node} refNode Reference node to insert before.\n */\ngoog.dom.DomHelper.prototype.insertSiblingBefore = goog.dom.insertSiblingBefore;\n\n\n/**\n * Inserts a new node after an existing reference node (i.e., as the next\n * sibling). If the reference node has no parent, then does nothing.\n * @param {Node} newNode Node to insert.\n * @param {Node} refNode Reference node to insert after.\n */\ngoog.dom.DomHelper.prototype.insertSiblingAfter = goog.dom.insertSiblingAfter;\n\n\n/**\n * Insert a child at a given index. If index is larger than the number of child\n * nodes that the parent currently has, the node is inserted as the last child\n * node.\n * @param {Element} parent The element into which to insert the child.\n * @param {Node} child The element to insert.\n * @param {number} index The index at which to insert the new child node. Must\n *     not be negative.\n */\ngoog.dom.DomHelper.prototype.insertChildAt = goog.dom.insertChildAt;\n\n\n/**\n * Removes a node from its parent.\n * @param {Node} node The node to remove.\n * @return {Node} The node removed if removed; else, null.\n */\ngoog.dom.DomHelper.prototype.removeNode = goog.dom.removeNode;\n\n\n/**\n * Replaces a node in the DOM tree. Will do nothing if `oldNode` has no\n * parent.\n * @param {Node} newNode Node to insert.\n * @param {Node} oldNode Node to replace.\n */\ngoog.dom.DomHelper.prototype.replaceNode = goog.dom.replaceNode;\n\n\n/**\n * Flattens an element. That is, removes it and replace it with its children.\n * @param {Element} element The element to flatten.\n * @return {Element|undefined} The original element, detached from the document\n *     tree, sans children, or undefined if the element was already not in the\n *     document.\n */\ngoog.dom.DomHelper.prototype.flattenElement = goog.dom.flattenElement;\n\n\n/**\n * Returns an array containing just the element children of the given element.\n * @param {Element} element The element whose element children we want.\n * @return {!(Array<!Element>|NodeList<!Element>)} An array or array-like list\n *     of just the element children of the given element.\n */\ngoog.dom.DomHelper.prototype.getChildren = goog.dom.getChildren;\n\n\n/**\n * Returns the first child node that is an element.\n * @param {Node} node The node to get the first child element of.\n * @return {Element} The first child node of `node` that is an element.\n */\ngoog.dom.DomHelper.prototype.getFirstElementChild =\n    goog.dom.getFirstElementChild;\n\n\n/**\n * Returns the last child node that is an element.\n * @param {Node} node The node to get the last child element of.\n * @return {Element} The last child node of `node` that is an element.\n */\ngoog.dom.DomHelper.prototype.getLastElementChild = goog.dom.getLastElementChild;\n\n\n/**\n * Returns the first next sibling that is an element.\n * @param {Node} node The node to get the next sibling element of.\n * @return {Element} The next sibling of `node` that is an element.\n */\ngoog.dom.DomHelper.prototype.getNextElementSibling =\n    goog.dom.getNextElementSibling;\n\n\n/**\n * Returns the first previous sibling that is an element.\n * @param {Node} node The node to get the previous sibling element of.\n * @return {Element} The first previous sibling of `node` that is\n *     an element.\n */\ngoog.dom.DomHelper.prototype.getPreviousElementSibling =\n    goog.dom.getPreviousElementSibling;\n\n\n/**\n * Returns the next node in source order from the given node.\n * @param {Node} node The node.\n * @return {Node} The next node in the DOM tree, or null if this was the last\n *     node.\n */\ngoog.dom.DomHelper.prototype.getNextNode = goog.dom.getNextNode;\n\n\n/**\n * Returns the previous node in source order from the given node.\n * @param {Node} node The node.\n * @return {Node} The previous node in the DOM tree, or null if this was the\n *     first node.\n */\ngoog.dom.DomHelper.prototype.getPreviousNode = goog.dom.getPreviousNode;\n\n\n/**\n * Whether the object looks like a DOM node.\n * @param {?} obj The object being tested for node likeness.\n * @return {boolean} Whether the object looks like a DOM node.\n */\ngoog.dom.DomHelper.prototype.isNodeLike = goog.dom.isNodeLike;\n\n\n/**\n * Whether the object looks like an Element.\n * @param {?} obj The object being tested for Element likeness.\n * @return {boolean} Whether the object looks like an Element.\n */\ngoog.dom.DomHelper.prototype.isElement = goog.dom.isElement;\n\n\n/**\n * Returns true if the specified value is a Window object. This includes the\n * global window for HTML pages, and iframe windows.\n * @param {?} obj Variable to test.\n * @return {boolean} Whether the variable is a window.\n */\ngoog.dom.DomHelper.prototype.isWindow = goog.dom.isWindow;\n\n\n/**\n * Returns an element's parent, if it's an Element.\n * @param {Element} element The DOM element.\n * @return {Element} The parent, or null if not an Element.\n */\ngoog.dom.DomHelper.prototype.getParentElement = goog.dom.getParentElement;\n\n\n/**\n * Whether a node contains another node.\n * @param {Node} parent The node that should contain the other node.\n * @param {Node} descendant The node to test presence of.\n * @return {boolean} Whether the parent node contains the descendant node.\n */\ngoog.dom.DomHelper.prototype.contains = goog.dom.contains;\n\n\n/**\n * Compares the document order of two nodes, returning 0 if they are the same\n * node, a negative number if node1 is before node2, and a positive number if\n * node2 is before node1.  Note that we compare the order the tags appear in the\n * document so in the tree <b><i>text</i></b> the B node is considered to be\n * before the I node.\n *\n * @param {Node} node1 The first node to compare.\n * @param {Node} node2 The second node to compare.\n * @return {number} 0 if the nodes are the same node, a negative number if node1\n *     is before node2, and a positive number if node2 is before node1.\n */\ngoog.dom.DomHelper.prototype.compareNodeOrder = goog.dom.compareNodeOrder;\n\n\n/**\n * Find the deepest common ancestor of the given nodes.\n * @param {...Node} var_args The nodes to find a common ancestor of.\n * @return {Node} The common ancestor of the nodes, or null if there is none.\n *     null will only be returned if two or more of the nodes are from different\n *     documents.\n */\ngoog.dom.DomHelper.prototype.findCommonAncestor = goog.dom.findCommonAncestor;\n\n\n/**\n * Returns the owner document for a node.\n * @param {Node} node The node to get the document for.\n * @return {!Document} The document owning the node.\n */\ngoog.dom.DomHelper.prototype.getOwnerDocument = goog.dom.getOwnerDocument;\n\n\n/**\n * Cross browser function for getting the document element of an iframe.\n * @param {Element} iframe Iframe element.\n * @return {!Document} The frame content document.\n */\ngoog.dom.DomHelper.prototype.getFrameContentDocument =\n    goog.dom.getFrameContentDocument;\n\n\n/**\n * Cross browser function for getting the window of a frame or iframe.\n * @param {Element} frame Frame element.\n * @return {Window} The window associated with the given frame.\n */\ngoog.dom.DomHelper.prototype.getFrameContentWindow =\n    goog.dom.getFrameContentWindow;\n\n\n/**\n * Sets the text content of a node, with cross-browser support.\n * @param {Node} node The node to change the text content of.\n * @param {string|number} text The value that should replace the node's content.\n */\ngoog.dom.DomHelper.prototype.setTextContent = goog.dom.setTextContent;\n\n\n/**\n * Gets the outerHTML of a node, which islike innerHTML, except that it\n * actually contains the HTML of the node itself.\n * @param {Element} element The element to get the HTML of.\n * @return {string} The outerHTML of the given element.\n */\ngoog.dom.DomHelper.prototype.getOuterHtml = goog.dom.getOuterHtml;\n\n\n/**\n * Finds the first descendant node that matches the filter function. This does\n * a depth first search.\n * @param {Node} root The root of the tree to search.\n * @param {function(Node) : boolean} p The filter function.\n * @return {Node|undefined} The found node or undefined if none is found.\n */\ngoog.dom.DomHelper.prototype.findNode = goog.dom.findNode;\n\n\n/**\n * Finds all the descendant nodes that matches the filter function. This does a\n * depth first search.\n * @param {Node} root The root of the tree to search.\n * @param {function(Node) : boolean} p The filter function.\n * @return {Array<Node>} The found nodes or an empty array if none are found.\n */\ngoog.dom.DomHelper.prototype.findNodes = goog.dom.findNodes;\n\n\n/**\n * Returns true if the element has a tab index that allows it to receive\n * keyboard focus (tabIndex >= 0), false otherwise.  Note that some elements\n * natively support keyboard focus, even if they have no tab index.\n * @param {!Element} element Element to check.\n * @return {boolean} Whether the element has a tab index that allows keyboard\n *     focus.\n */\ngoog.dom.DomHelper.prototype.isFocusableTabIndex = goog.dom.isFocusableTabIndex;\n\n\n/**\n * Enables or disables keyboard focus support on the element via its tab index.\n * Only elements for which {@link goog.dom.isFocusableTabIndex} returns true\n * (or elements that natively support keyboard focus, like form elements) can\n * receive keyboard focus.  See http://go/tabindex for more info.\n * @param {Element} element Element whose tab index is to be changed.\n * @param {boolean} enable Whether to set or remove a tab index on the element\n *     that supports keyboard focus.\n */\ngoog.dom.DomHelper.prototype.setFocusableTabIndex =\n    goog.dom.setFocusableTabIndex;\n\n\n/**\n * Returns true if the element can be focused, i.e. it has a tab index that\n * allows it to receive keyboard focus (tabIndex >= 0), or it is an element\n * that natively supports keyboard focus.\n * @param {!Element} element Element to check.\n * @return {boolean} Whether the element allows keyboard focus.\n */\ngoog.dom.DomHelper.prototype.isFocusable = goog.dom.isFocusable;\n\n\n/**\n * Returns the text contents of the current node, without markup. New lines are\n * stripped and whitespace is collapsed, such that each character would be\n * visible.\n *\n * In browsers that support it, innerText is used.  Other browsers attempt to\n * simulate it via node traversal.  Line breaks are canonicalized in IE.\n *\n * @param {Node} node The node from which we are getting content.\n * @return {string} The text content.\n */\ngoog.dom.DomHelper.prototype.getTextContent = goog.dom.getTextContent;\n\n\n/**\n * Returns the text length of the text contained in a node, without markup. This\n * is equivalent to the selection length if the node was selected, or the number\n * of cursor movements to traverse the node. Images & BRs take one space.  New\n * lines are ignored.\n *\n * @param {Node} node The node whose text content length is being calculated.\n * @return {number} The length of `node`'s text content.\n */\ngoog.dom.DomHelper.prototype.getNodeTextLength = goog.dom.getNodeTextLength;\n\n\n/**\n * Returns the text offset of a node relative to one of its ancestors. The text\n * length is the same as the length calculated by\n * `goog.dom.getNodeTextLength`.\n *\n * @param {Node} node The node whose offset is being calculated.\n * @param {Node=} opt_offsetParent Defaults to the node's owner document's body.\n * @return {number} The text offset.\n */\ngoog.dom.DomHelper.prototype.getNodeTextOffset = goog.dom.getNodeTextOffset;\n\n\n/**\n * Returns the node at a given offset in a parent node.  If an object is\n * provided for the optional third parameter, the node and the remainder of the\n * offset will stored as properties of this object.\n * @param {Node} parent The parent node.\n * @param {number} offset The offset into the parent node.\n * @param {Object=} opt_result Object to be used to store the return value. The\n *     return value will be stored in the form {node: Node, remainder: number}\n *     if this object is provided.\n * @return {Node} The node at the given offset.\n */\ngoog.dom.DomHelper.prototype.getNodeAtOffset = goog.dom.getNodeAtOffset;\n\n\n/**\n * Returns true if the object is a `NodeList`.  To qualify as a NodeList,\n * the object must have a numeric length property and an item function (which\n * has type 'string' on IE for some reason).\n * @param {Object} val Object to test.\n * @return {boolean} Whether the object is a NodeList.\n */\ngoog.dom.DomHelper.prototype.isNodeList = goog.dom.isNodeList;\n\n\n/**\n * Walks up the DOM hierarchy returning the first ancestor that has the passed\n * tag name and/or class name. If the passed element matches the specified\n * criteria, the element itself is returned.\n * @param {Node} element The DOM node to start with.\n * @param {?(goog.dom.TagName<T>|string)=} opt_tag The tag name to match (or\n *     null/undefined to match only based on class name).\n * @param {?string=} opt_class The class name to match (or null/undefined to\n *     match only based on tag name).\n * @param {number=} opt_maxSearchSteps Maximum number of levels to search up the\n *     dom.\n * @return {?R} The first ancestor that matches the passed criteria, or\n *     null if no match is found. The return type is {?Element} if opt_tag is\n *     not a member of goog.dom.TagName or a more specific type if it is (e.g.\n *     {?HTMLAnchorElement} for goog.dom.TagName.A).\n * @template T\n * @template R := cond(isUnknown(T), 'Element', T) =:\n */\ngoog.dom.DomHelper.prototype.getAncestorByTagNameAndClass =\n    goog.dom.getAncestorByTagNameAndClass;\n\n\n/**\n * Walks up the DOM hierarchy returning the first ancestor that has the passed\n * class name. If the passed element matches the specified criteria, the\n * element itself is returned.\n * @param {Node} element The DOM node to start with.\n * @param {string} class The class name to match.\n * @param {number=} opt_maxSearchSteps Maximum number of levels to search up the\n *     dom.\n * @return {Element} The first ancestor that matches the passed criteria, or\n *     null if none match.\n */\ngoog.dom.DomHelper.prototype.getAncestorByClass = goog.dom.getAncestorByClass;\n\n\n/**\n * Walks up the DOM hierarchy returning the first ancestor that passes the\n * matcher function.\n * @param {Node} element The DOM node to start with.\n * @param {function(Node) : boolean} matcher A function that returns true if the\n *     passed node matches the desired criteria.\n * @param {boolean=} opt_includeNode If true, the node itself is included in\n *     the search (the first call to the matcher will pass startElement as\n *     the node to test).\n * @param {number=} opt_maxSearchSteps Maximum number of levels to search up the\n *     dom.\n * @return {Node} DOM node that matched the matcher, or null if there was\n *     no match.\n */\ngoog.dom.DomHelper.prototype.getAncestor = goog.dom.getAncestor;\n\n\n/**\n * Gets '2d' context of a canvas. Shortcut for canvas.getContext('2d') with a\n * type information.\n * @param {!HTMLCanvasElement} canvas\n * @return {!CanvasRenderingContext2D}\n */\ngoog.dom.DomHelper.prototype.getCanvasContext2D = goog.dom.getCanvasContext2D;\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview A utility class for representing a numeric box.\n */\n\n\ngoog.provide('goog.math.Box');\n\ngoog.require('goog.asserts');\ngoog.require('goog.math.Coordinate');\n\n\n\n/**\n * Class for representing a box. A box is specified as a top, right, bottom,\n * and left. A box is useful for representing margins and padding.\n *\n * This class assumes 'screen coordinates': larger Y coordinates are further\n * from the top of the screen.\n *\n * @param {number} top Top.\n * @param {number} right Right.\n * @param {number} bottom Bottom.\n * @param {number} left Left.\n * @struct\n * @constructor\n */\ngoog.math.Box = function(top, right, bottom, left) {\n  /**\n   * Top\n   * @type {number}\n   */\n  this.top = top;\n\n  /**\n   * Right\n   * @type {number}\n   */\n  this.right = right;\n\n  /**\n   * Bottom\n   * @type {number}\n   */\n  this.bottom = bottom;\n\n  /**\n   * Left\n   * @type {number}\n   */\n  this.left = left;\n};\n\n\n/**\n * Creates a Box by bounding a collection of goog.math.Coordinate objects\n * @param {...goog.math.Coordinate} var_args Coordinates to be included inside\n *     the box.\n * @return {!goog.math.Box} A Box containing all the specified Coordinates.\n */\ngoog.math.Box.boundingBox = function(var_args) {\n  var box = new goog.math.Box(\n      arguments[0].y, arguments[0].x, arguments[0].y, arguments[0].x);\n  for (var i = 1; i < arguments.length; i++) {\n    box.expandToIncludeCoordinate(arguments[i]);\n  }\n  return box;\n};\n\n\n/**\n * @return {number} width The width of this Box.\n */\ngoog.math.Box.prototype.getWidth = function() {\n  return this.right - this.left;\n};\n\n\n/**\n * @return {number} height The height of this Box.\n */\ngoog.math.Box.prototype.getHeight = function() {\n  return this.bottom - this.top;\n};\n\n\n/**\n * Creates a copy of the box with the same dimensions.\n * @return {!goog.math.Box} A clone of this Box.\n */\ngoog.math.Box.prototype.clone = function() {\n  return new goog.math.Box(this.top, this.right, this.bottom, this.left);\n};\n\n\nif (goog.DEBUG) {\n  /**\n   * Returns a nice string representing the box.\n   * @return {string} In the form (50t, 73r, 24b, 13l).\n   * @override\n   */\n  goog.math.Box.prototype.toString = function() {\n    return '(' + this.top + 't, ' + this.right + 'r, ' + this.bottom + 'b, ' +\n        this.left + 'l)';\n  };\n}\n\n\n/**\n * Returns whether the box contains a coordinate or another box.\n *\n * @param {goog.math.Coordinate|goog.math.Box} other A Coordinate or a Box.\n * @return {boolean} Whether the box contains the coordinate or other box.\n */\ngoog.math.Box.prototype.contains = function(other) {\n  return goog.math.Box.contains(this, other);\n};\n\n\n/**\n * Expands box with the given margins.\n *\n * @param {number|goog.math.Box} top Top margin or box with all margins.\n * @param {number=} opt_right Right margin.\n * @param {number=} opt_bottom Bottom margin.\n * @param {number=} opt_left Left margin.\n * @return {!goog.math.Box} A reference to this Box.\n */\ngoog.math.Box.prototype.expand = function(\n    top, opt_right, opt_bottom, opt_left) {\n  if (goog.isObject(top)) {\n    this.top -= top.top;\n    this.right += top.right;\n    this.bottom += top.bottom;\n    this.left -= top.left;\n  } else {\n    this.top -= /** @type {number} */ (top);\n    this.right += Number(opt_right);\n    this.bottom += Number(opt_bottom);\n    this.left -= Number(opt_left);\n  }\n\n  return this;\n};\n\n\n/**\n * Expand this box to include another box.\n * NOTE(user): This is used in code that needs to be very fast, please don't\n * add functionality to this function at the expense of speed (variable\n * arguments, accepting multiple argument types, etc).\n * @param {goog.math.Box} box The box to include in this one.\n */\ngoog.math.Box.prototype.expandToInclude = function(box) {\n  this.left = Math.min(this.left, box.left);\n  this.top = Math.min(this.top, box.top);\n  this.right = Math.max(this.right, box.right);\n  this.bottom = Math.max(this.bottom, box.bottom);\n};\n\n\n/**\n * Expand this box to include the coordinate.\n * @param {!goog.math.Coordinate} coord The coordinate to be included\n *     inside the box.\n */\ngoog.math.Box.prototype.expandToIncludeCoordinate = function(coord) {\n  this.top = Math.min(this.top, coord.y);\n  this.right = Math.max(this.right, coord.x);\n  this.bottom = Math.max(this.bottom, coord.y);\n  this.left = Math.min(this.left, coord.x);\n};\n\n\n/**\n * Compares boxes for equality.\n * @param {goog.math.Box} a A Box.\n * @param {goog.math.Box} b A Box.\n * @return {boolean} True iff the boxes are equal, or if both are null.\n */\ngoog.math.Box.equals = function(a, b) {\n  if (a == b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  return a.top == b.top && a.right == b.right && a.bottom == b.bottom &&\n      a.left == b.left;\n};\n\n\n/**\n * Returns whether a box contains a coordinate or another box.\n *\n * @param {goog.math.Box} box A Box.\n * @param {goog.math.Coordinate|goog.math.Box} other A Coordinate or a Box.\n * @return {boolean} Whether the box contains the coordinate or other box.\n */\ngoog.math.Box.contains = function(box, other) {\n  if (!box || !other) {\n    return false;\n  }\n\n  if (other instanceof goog.math.Box) {\n    return other.left >= box.left && other.right <= box.right &&\n        other.top >= box.top && other.bottom <= box.bottom;\n  }\n\n  // other is a Coordinate.\n  return other.x >= box.left && other.x <= box.right && other.y >= box.top &&\n      other.y <= box.bottom;\n};\n\n\n/**\n * Returns the relative x position of a coordinate compared to a box.  Returns\n * zero if the coordinate is inside the box.\n *\n * @param {goog.math.Box} box A Box.\n * @param {goog.math.Coordinate} coord A Coordinate.\n * @return {number} The x position of `coord` relative to the nearest\n *     side of `box`, or zero if `coord` is inside `box`.\n */\ngoog.math.Box.relativePositionX = function(box, coord) {\n  if (coord.x < box.left) {\n    return coord.x - box.left;\n  } else if (coord.x > box.right) {\n    return coord.x - box.right;\n  }\n  return 0;\n};\n\n\n/**\n * Returns the relative y position of a coordinate compared to a box.  Returns\n * zero if the coordinate is inside the box.\n *\n * @param {goog.math.Box} box A Box.\n * @param {goog.math.Coordinate} coord A Coordinate.\n * @return {number} The y position of `coord` relative to the nearest\n *     side of `box`, or zero if `coord` is inside `box`.\n */\ngoog.math.Box.relativePositionY = function(box, coord) {\n  if (coord.y < box.top) {\n    return coord.y - box.top;\n  } else if (coord.y > box.bottom) {\n    return coord.y - box.bottom;\n  }\n  return 0;\n};\n\n\n/**\n * Returns the distance between a coordinate and the nearest corner/side of a\n * box. Returns zero if the coordinate is inside the box.\n *\n * @param {goog.math.Box} box A Box.\n * @param {goog.math.Coordinate} coord A Coordinate.\n * @return {number} The distance between `coord` and the nearest\n *     corner/side of `box`, or zero if `coord` is inside\n *     `box`.\n */\ngoog.math.Box.distance = function(box, coord) {\n  var x = goog.math.Box.relativePositionX(box, coord);\n  var y = goog.math.Box.relativePositionY(box, coord);\n  return Math.sqrt(x * x + y * y);\n};\n\n\n/**\n * Returns whether two boxes intersect.\n *\n * @param {goog.math.Box} a A Box.\n * @param {goog.math.Box} b A second Box.\n * @return {boolean} Whether the boxes intersect.\n */\ngoog.math.Box.intersects = function(a, b) {\n  return (\n      a.left <= b.right && b.left <= a.right && a.top <= b.bottom &&\n      b.top <= a.bottom);\n};\n\n\n/**\n * Returns whether two boxes would intersect with additional padding.\n *\n * @param {goog.math.Box} a A Box.\n * @param {goog.math.Box} b A second Box.\n * @param {number} padding The additional padding.\n * @return {boolean} Whether the boxes intersect.\n */\ngoog.math.Box.intersectsWithPadding = function(a, b, padding) {\n  return (\n      a.left <= b.right + padding && b.left <= a.right + padding &&\n      a.top <= b.bottom + padding && b.top <= a.bottom + padding);\n};\n\n\n/**\n * Rounds the fields to the next larger integer values.\n *\n * @return {!goog.math.Box} This box with ceil'd fields.\n */\ngoog.math.Box.prototype.ceil = function() {\n  this.top = Math.ceil(this.top);\n  this.right = Math.ceil(this.right);\n  this.bottom = Math.ceil(this.bottom);\n  this.left = Math.ceil(this.left);\n  return this;\n};\n\n\n/**\n * Rounds the fields to the next smaller integer values.\n *\n * @return {!goog.math.Box} This box with floored fields.\n */\ngoog.math.Box.prototype.floor = function() {\n  this.top = Math.floor(this.top);\n  this.right = Math.floor(this.right);\n  this.bottom = Math.floor(this.bottom);\n  this.left = Math.floor(this.left);\n  return this;\n};\n\n\n/**\n * Rounds the fields to nearest integer values.\n *\n * @return {!goog.math.Box} This box with rounded fields.\n */\ngoog.math.Box.prototype.round = function() {\n  this.top = Math.round(this.top);\n  this.right = Math.round(this.right);\n  this.bottom = Math.round(this.bottom);\n  this.left = Math.round(this.left);\n  return this;\n};\n\n\n/**\n * Translates this box by the given offsets. If a `goog.math.Coordinate`\n * is given, then the left and right values are translated by the coordinate's\n * x value and the top and bottom values are translated by the coordinate's y\n * value.  Otherwise, `tx` and `opt_ty` are used to translate the x\n * and y dimension values.\n *\n * @param {number|goog.math.Coordinate} tx The value to translate the x\n *     dimension values by or the the coordinate to translate this box by.\n * @param {number=} opt_ty The value to translate y dimension values by.\n * @return {!goog.math.Box} This box after translating.\n */\ngoog.math.Box.prototype.translate = function(tx, opt_ty) {\n  if (tx instanceof goog.math.Coordinate) {\n    this.left += tx.x;\n    this.right += tx.x;\n    this.top += tx.y;\n    this.bottom += tx.y;\n  } else {\n    goog.asserts.assertNumber(tx);\n    this.left += tx;\n    this.right += tx;\n    if (goog.isNumber(opt_ty)) {\n      this.top += opt_ty;\n      this.bottom += opt_ty;\n    }\n  }\n  return this;\n};\n\n\n/**\n * Scales this coordinate by the given scale factors. The x and y dimension\n * values are scaled by `sx` and `opt_sy` respectively.\n * If `opt_sy` is not given, then `sx` is used for both x and y.\n *\n * @param {number} sx The scale factor to use for the x dimension.\n * @param {number=} opt_sy The scale factor to use for the y dimension.\n * @return {!goog.math.Box} This box after scaling.\n */\ngoog.math.Box.prototype.scale = function(sx, opt_sy) {\n  var sy = goog.isNumber(opt_sy) ? opt_sy : sx;\n  this.left *= sx;\n  this.right *= sx;\n  this.top *= sy;\n  this.bottom *= sy;\n  return this;\n};\n","// Copyright 2016 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview A record declaration to allow ClientRect and other rectangle\n * like objects to be used with goog.math.Rect.\n */\n\ngoog.provide('goog.math.IRect');\n\n\n/**\n * Record for representing rectangular regions, allows compatibility between\n * things like ClientRect and goog.math.Rect.\n *\n * @record\n */\ngoog.math.IRect = function() {};\n\n\n/** @type {number} */\ngoog.math.IRect.prototype.left;\n\n\n/** @type {number} */\ngoog.math.IRect.prototype.top;\n\n\n/** @type {number} */\ngoog.math.IRect.prototype.width;\n\n\n/** @type {number} */\ngoog.math.IRect.prototype.height;\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview A utility class for representing rectangles. Some of these\n * functions should be migrated over to non-nullable params.\n */\n\ngoog.provide('goog.math.Rect');\n\ngoog.require('goog.asserts');\ngoog.require('goog.math.Box');\ngoog.require('goog.math.Coordinate');\ngoog.require('goog.math.IRect');\ngoog.require('goog.math.Size');\n\n\n\n/**\n * Class for representing rectangular regions.\n * @param {number} x Left.\n * @param {number} y Top.\n * @param {number} w Width.\n * @param {number} h Height.\n * @struct\n * @constructor\n * @implements {goog.math.IRect}\n */\ngoog.math.Rect = function(x, y, w, h) {\n  /** @type {number} */\n  this.left = x;\n\n  /** @type {number} */\n  this.top = y;\n\n  /** @type {number} */\n  this.width = w;\n\n  /** @type {number} */\n  this.height = h;\n};\n\n\n/**\n * @return {!goog.math.Rect} A new copy of this Rectangle.\n */\ngoog.math.Rect.prototype.clone = function() {\n  return new goog.math.Rect(this.left, this.top, this.width, this.height);\n};\n\n\n/**\n * Returns a new Box object with the same position and dimensions as this\n * rectangle.\n * @return {!goog.math.Box} A new Box representation of this Rectangle.\n */\ngoog.math.Rect.prototype.toBox = function() {\n  var right = this.left + this.width;\n  var bottom = this.top + this.height;\n  return new goog.math.Box(this.top, right, bottom, this.left);\n};\n\n\n/**\n * Creates a new Rect object with the position and size given.\n * @param {!goog.math.Coordinate} position The top-left coordinate of the Rect\n * @param {!goog.math.Size} size The size of the Rect\n * @return {!goog.math.Rect} A new Rect initialized with the given position and\n *     size.\n */\ngoog.math.Rect.createFromPositionAndSize = function(position, size) {\n  return new goog.math.Rect(position.x, position.y, size.width, size.height);\n};\n\n\n/**\n * Creates a new Rect object with the same position and dimensions as a given\n * Box.  Note that this is only the inverse of toBox if left/top are defined.\n * @param {goog.math.Box} box A box.\n * @return {!goog.math.Rect} A new Rect initialized with the box's position\n *     and size.\n */\ngoog.math.Rect.createFromBox = function(box) {\n  return new goog.math.Rect(\n      box.left, box.top, box.right - box.left, box.bottom - box.top);\n};\n\n\nif (goog.DEBUG) {\n  /**\n   * Returns a nice string representing size and dimensions of rectangle.\n   * @return {string} In the form (50, 73 - 75w x 25h).\n   * @override\n   */\n  goog.math.Rect.prototype.toString = function() {\n    return '(' + this.left + ', ' + this.top + ' - ' + this.width + 'w x ' +\n        this.height + 'h)';\n  };\n}\n\n\n/**\n * Compares rectangles for equality.\n * @param {goog.math.IRect} a A Rectangle.\n * @param {goog.math.IRect} b A Rectangle.\n * @return {boolean} True iff the rectangles have the same left, top, width,\n *     and height, or if both are null.\n */\ngoog.math.Rect.equals = function(a, b) {\n  if (a == b) {\n    return true;\n  }\n  if (!a || !b) {\n    return false;\n  }\n  return a.left == b.left && a.width == b.width && a.top == b.top &&\n      a.height == b.height;\n};\n\n\n/**\n * Computes the intersection of this rectangle and the rectangle parameter.  If\n * there is no intersection, returns false and leaves this rectangle as is.\n * @param {goog.math.IRect} rect A Rectangle.\n * @return {boolean} True iff this rectangle intersects with the parameter.\n */\ngoog.math.Rect.prototype.intersection = function(rect) {\n  var x0 = Math.max(this.left, rect.left);\n  var x1 = Math.min(this.left + this.width, rect.left + rect.width);\n\n  if (x0 <= x1) {\n    var y0 = Math.max(this.top, rect.top);\n    var y1 = Math.min(this.top + this.height, rect.top + rect.height);\n\n    if (y0 <= y1) {\n      this.left = x0;\n      this.top = y0;\n      this.width = x1 - x0;\n      this.height = y1 - y0;\n\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Returns the intersection of two rectangles. Two rectangles intersect if they\n * touch at all, for example, two zero width and height rectangles would\n * intersect if they had the same top and left.\n * @param {goog.math.IRect} a A Rectangle.\n * @param {goog.math.IRect} b A Rectangle.\n * @return {goog.math.Rect} A new intersection rect (even if width and height\n *     are 0), or null if there is no intersection.\n */\ngoog.math.Rect.intersection = function(a, b) {\n  // There is no nice way to do intersection via a clone, because any such\n  // clone might be unnecessary if this function returns null.  So, we duplicate\n  // code from above.\n\n  var x0 = Math.max(a.left, b.left);\n  var x1 = Math.min(a.left + a.width, b.left + b.width);\n\n  if (x0 <= x1) {\n    var y0 = Math.max(a.top, b.top);\n    var y1 = Math.min(a.top + a.height, b.top + b.height);\n\n    if (y0 <= y1) {\n      return new goog.math.Rect(x0, y0, x1 - x0, y1 - y0);\n    }\n  }\n  return null;\n};\n\n\n/**\n * Returns whether two rectangles intersect. Two rectangles intersect if they\n * touch at all, for example, two zero width and height rectangles would\n * intersect if they had the same top and left.\n * @param {goog.math.IRect} a A Rectangle.\n * @param {goog.math.IRect} b A Rectangle.\n * @return {boolean} Whether a and b intersect.\n */\ngoog.math.Rect.intersects = function(a, b) {\n  return (\n      a.left <= b.left + b.width && b.left <= a.left + a.width &&\n      a.top <= b.top + b.height && b.top <= a.top + a.height);\n};\n\n\n/**\n * Returns whether a rectangle intersects this rectangle.\n * @param {goog.math.IRect} rect A rectangle.\n * @return {boolean} Whether rect intersects this rectangle.\n */\ngoog.math.Rect.prototype.intersects = function(rect) {\n  return goog.math.Rect.intersects(this, rect);\n};\n\n\n/**\n * Computes the difference regions between two rectangles. The return value is\n * an array of 0 to 4 rectangles defining the remaining regions of the first\n * rectangle after the second has been subtracted.\n * @param {goog.math.Rect} a A Rectangle.\n * @param {goog.math.IRect} b A Rectangle.\n * @return {!Array<!goog.math.Rect>} An array with 0 to 4 rectangles which\n *     together define the difference area of rectangle a minus rectangle b.\n */\ngoog.math.Rect.difference = function(a, b) {\n  var intersection = goog.math.Rect.intersection(a, b);\n  if (!intersection || !intersection.height || !intersection.width) {\n    return [a.clone()];\n  }\n\n  var result = [];\n\n  var top = a.top;\n  var height = a.height;\n\n  var ar = a.left + a.width;\n  var ab = a.top + a.height;\n\n  var br = b.left + b.width;\n  var bb = b.top + b.height;\n\n  // Subtract off any area on top where A extends past B\n  if (b.top > a.top) {\n    result.push(new goog.math.Rect(a.left, a.top, a.width, b.top - a.top));\n    top = b.top;\n    // If we're moving the top down, we also need to subtract the height diff.\n    height -= b.top - a.top;\n  }\n  // Subtract off any area on bottom where A extends past B\n  if (bb < ab) {\n    result.push(new goog.math.Rect(a.left, bb, a.width, ab - bb));\n    height = bb - top;\n  }\n  // Subtract any area on left where A extends past B\n  if (b.left > a.left) {\n    result.push(new goog.math.Rect(a.left, top, b.left - a.left, height));\n  }\n  // Subtract any area on right where A extends past B\n  if (br < ar) {\n    result.push(new goog.math.Rect(br, top, ar - br, height));\n  }\n\n  return result;\n};\n\n\n/**\n * Computes the difference regions between this rectangle and `rect`. The\n * return value is an array of 0 to 4 rectangles defining the remaining regions\n * of this rectangle after the other has been subtracted.\n * @param {goog.math.IRect} rect A Rectangle.\n * @return {!Array<!goog.math.Rect>} An array with 0 to 4 rectangles which\n *     together define the difference area of rectangle a minus rectangle b.\n */\ngoog.math.Rect.prototype.difference = function(rect) {\n  return goog.math.Rect.difference(this, rect);\n};\n\n\n/**\n * Expand this rectangle to also include the area of the given rectangle.\n * @param {goog.math.IRect} rect The other rectangle.\n */\ngoog.math.Rect.prototype.boundingRect = function(rect) {\n  // We compute right and bottom before we change left and top below.\n  var right = Math.max(this.left + this.width, rect.left + rect.width);\n  var bottom = Math.max(this.top + this.height, rect.top + rect.height);\n\n  this.left = Math.min(this.left, rect.left);\n  this.top = Math.min(this.top, rect.top);\n\n  this.width = right - this.left;\n  this.height = bottom - this.top;\n};\n\n\n/**\n * Returns a new rectangle which completely contains both input rectangles.\n * @param {goog.math.IRect} a A rectangle.\n * @param {goog.math.IRect} b A rectangle.\n * @return {goog.math.Rect} A new bounding rect, or null if either rect is\n *     null.\n */\ngoog.math.Rect.boundingRect = function(a, b) {\n  if (!a || !b) {\n    return null;\n  }\n\n  var newRect = new goog.math.Rect(a.left, a.top, a.width, a.height);\n  newRect.boundingRect(b);\n\n  return newRect;\n};\n\n\n/**\n * Tests whether this rectangle entirely contains another rectangle or\n * coordinate.\n *\n * @param {goog.math.IRect|goog.math.Coordinate} another The rectangle or\n *     coordinate to test for containment.\n * @return {boolean} Whether this rectangle contains given rectangle or\n *     coordinate.\n */\ngoog.math.Rect.prototype.contains = function(another) {\n  if (another instanceof goog.math.Coordinate) {\n    return another.x >= this.left && another.x <= this.left + this.width &&\n        another.y >= this.top && another.y <= this.top + this.height;\n  } else {  // (another instanceof goog.math.IRect)\n    return this.left <= another.left &&\n        this.left + this.width >= another.left + another.width &&\n        this.top <= another.top &&\n        this.top + this.height >= another.top + another.height;\n  }\n};\n\n\n/**\n * @param {!goog.math.Coordinate} point A coordinate.\n * @return {number} The squared distance between the point and the closest\n *     point inside the rectangle. Returns 0 if the point is inside the\n *     rectangle.\n */\ngoog.math.Rect.prototype.squaredDistance = function(point) {\n  var dx = point.x < this.left ?\n      this.left - point.x :\n      Math.max(point.x - (this.left + this.width), 0);\n  var dy = point.y < this.top ? this.top - point.y :\n                                Math.max(point.y - (this.top + this.height), 0);\n  return dx * dx + dy * dy;\n};\n\n\n/**\n * @param {!goog.math.Coordinate} point A coordinate.\n * @return {number} The distance between the point and the closest point\n *     inside the rectangle. Returns 0 if the point is inside the rectangle.\n */\ngoog.math.Rect.prototype.distance = function(point) {\n  return Math.sqrt(this.squaredDistance(point));\n};\n\n\n/**\n * @return {!goog.math.Size} The size of this rectangle.\n */\ngoog.math.Rect.prototype.getSize = function() {\n  return new goog.math.Size(this.width, this.height);\n};\n\n\n/**\n * @return {!goog.math.Coordinate} A new coordinate for the top-left corner of\n *     the rectangle.\n */\ngoog.math.Rect.prototype.getTopLeft = function() {\n  return new goog.math.Coordinate(this.left, this.top);\n};\n\n\n/**\n * @return {!goog.math.Coordinate} A new coordinate for the center of the\n *     rectangle.\n */\ngoog.math.Rect.prototype.getCenter = function() {\n  return new goog.math.Coordinate(\n      this.left + this.width / 2, this.top + this.height / 2);\n};\n\n\n/**\n * @return {!goog.math.Coordinate} A new coordinate for the bottom-right corner\n *     of the rectangle.\n */\ngoog.math.Rect.prototype.getBottomRight = function() {\n  return new goog.math.Coordinate(\n      this.left + this.width, this.top + this.height);\n};\n\n\n/**\n * Rounds the fields to the next larger integer values.\n * @return {!goog.math.Rect} This rectangle with ceil'd fields.\n */\ngoog.math.Rect.prototype.ceil = function() {\n  this.left = Math.ceil(this.left);\n  this.top = Math.ceil(this.top);\n  this.width = Math.ceil(this.width);\n  this.height = Math.ceil(this.height);\n  return this;\n};\n\n\n/**\n * Rounds the fields to the next smaller integer values.\n * @return {!goog.math.Rect} This rectangle with floored fields.\n */\ngoog.math.Rect.prototype.floor = function() {\n  this.left = Math.floor(this.left);\n  this.top = Math.floor(this.top);\n  this.width = Math.floor(this.width);\n  this.height = Math.floor(this.height);\n  return this;\n};\n\n\n/**\n * Rounds the fields to nearest integer values.\n * @return {!goog.math.Rect} This rectangle with rounded fields.\n */\ngoog.math.Rect.prototype.round = function() {\n  this.left = Math.round(this.left);\n  this.top = Math.round(this.top);\n  this.width = Math.round(this.width);\n  this.height = Math.round(this.height);\n  return this;\n};\n\n\n/**\n * Translates this rectangle by the given offsets. If a\n * `goog.math.Coordinate` is given, then the left and top values are\n * translated by the coordinate's x and y values. Otherwise, top and left are\n * translated by `tx` and `opt_ty` respectively.\n * @param {number|goog.math.Coordinate} tx The value to translate left by or the\n *     the coordinate to translate this rect by.\n * @param {number=} opt_ty The value to translate top by.\n * @return {!goog.math.Rect} This rectangle after translating.\n */\ngoog.math.Rect.prototype.translate = function(tx, opt_ty) {\n  if (tx instanceof goog.math.Coordinate) {\n    this.left += tx.x;\n    this.top += tx.y;\n  } else {\n    this.left += goog.asserts.assertNumber(tx);\n    if (goog.isNumber(opt_ty)) {\n      this.top += opt_ty;\n    }\n  }\n  return this;\n};\n\n\n/**\n * Scales this rectangle by the given scale factors. The left and width values\n * are scaled by `sx` and the top and height values are scaled by\n * `opt_sy`.  If `opt_sy` is not given, then all fields are scaled\n * by `sx`.\n * @param {number} sx The scale factor to use for the x dimension.\n * @param {number=} opt_sy The scale factor to use for the y dimension.\n * @return {!goog.math.Rect} This rectangle after scaling.\n */\ngoog.math.Rect.prototype.scale = function(sx, opt_sy) {\n  var sy = goog.isNumber(opt_sy) ? opt_sy : sx;\n  this.left *= sx;\n  this.width *= sx;\n  this.top *= sy;\n  this.height *= sy;\n  return this;\n};\n","// Copyright 2010 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview A global registry for entry points into a program,\n * so that they can be instrumented. Each module should register their\n * entry points with this registry. Designed to be compiled out\n * if no instrumentation is requested.\n *\n * Entry points may be registered before or after a call to\n * goog.debug.entryPointRegistry.monitorAll. If an entry point is registered\n * later, the existing monitor will instrument the new entry point.\n *\n * @author nicksantos@google.com (Nick Santos)\n */\n\ngoog.provide('goog.debug.EntryPointMonitor');\ngoog.provide('goog.debug.entryPointRegistry');\n\ngoog.require('goog.asserts');\n\n\n\n/**\n * @interface\n */\ngoog.debug.EntryPointMonitor = function() {};\n\n\n/**\n * Instruments a function.\n *\n * @param {!Function} fn A function to instrument.\n * @return {!Function} The instrumented function.\n */\ngoog.debug.EntryPointMonitor.prototype.wrap;\n\n\n/**\n * Try to remove an instrumentation wrapper created by this monitor.\n * If the function passed to unwrap is not a wrapper created by this\n * monitor, then we will do nothing.\n *\n * Notice that some wrappers may not be unwrappable. For example, if other\n * monitors have applied their own wrappers, then it will be impossible to\n * unwrap them because their wrappers will have captured our wrapper.\n *\n * So it is important that entry points are unwrapped in the reverse\n * order that they were wrapped.\n *\n * @param {!Function} fn A function to unwrap.\n * @return {!Function} The unwrapped function, or `fn` if it was not\n *     a wrapped function created by this monitor.\n */\ngoog.debug.EntryPointMonitor.prototype.unwrap;\n\n\n/**\n * An array of entry point callbacks.\n * @type {!Array<function(!Function)>}\n * @private\n */\ngoog.debug.entryPointRegistry.refList_ = [];\n\n\n/**\n * Monitors that should wrap all the entry points.\n * @type {!Array<!goog.debug.EntryPointMonitor>}\n * @private\n */\ngoog.debug.entryPointRegistry.monitors_ = [];\n\n\n/**\n * Whether goog.debug.entryPointRegistry.monitorAll has ever been called.\n * Checking this allows the compiler to optimize out the registrations.\n * @type {boolean}\n * @private\n */\ngoog.debug.entryPointRegistry.monitorsMayExist_ = false;\n\n\n/**\n * Register an entry point with this module.\n *\n * The entry point will be instrumented when a monitor is passed to\n * goog.debug.entryPointRegistry.monitorAll. If this has already occurred, the\n * entry point is instrumented immediately.\n *\n * @param {function(!Function)} callback A callback function which is called\n *     with a transforming function to instrument the entry point. The callback\n *     is responsible for wrapping the relevant entry point with the\n *     transforming function.\n */\ngoog.debug.entryPointRegistry.register = function(callback) {\n  // Don't use push(), so that this can be compiled out.\n  goog.debug.entryPointRegistry\n      .refList_[goog.debug.entryPointRegistry.refList_.length] = callback;\n  // If no one calls monitorAll, this can be compiled out.\n  if (goog.debug.entryPointRegistry.monitorsMayExist_) {\n    var monitors = goog.debug.entryPointRegistry.monitors_;\n    for (var i = 0; i < monitors.length; i++) {\n      callback(goog.bind(monitors[i].wrap, monitors[i]));\n    }\n  }\n};\n\n\n/**\n * Configures a monitor to wrap all entry points.\n *\n * Entry points that have already been registered are immediately wrapped by\n * the monitor. When an entry point is registered in the future, it will also\n * be wrapped by the monitor when it is registered.\n *\n * @param {!goog.debug.EntryPointMonitor} monitor An entry point monitor.\n */\ngoog.debug.entryPointRegistry.monitorAll = function(monitor) {\n  goog.debug.entryPointRegistry.monitorsMayExist_ = true;\n  var transformer = goog.bind(monitor.wrap, monitor);\n  for (var i = 0; i < goog.debug.entryPointRegistry.refList_.length; i++) {\n    goog.debug.entryPointRegistry.refList_[i](transformer);\n  }\n  goog.debug.entryPointRegistry.monitors_.push(monitor);\n};\n\n\n/**\n * Try to unmonitor all the entry points that have already been registered. If\n * an entry point is registered in the future, it will not be wrapped by the\n * monitor when it is registered. Note that this may fail if the entry points\n * have additional wrapping.\n *\n * @param {!goog.debug.EntryPointMonitor} monitor The last monitor to wrap\n *     the entry points.\n * @throws {Error} If the monitor is not the most recently configured monitor.\n */\ngoog.debug.entryPointRegistry.unmonitorAllIfPossible = function(monitor) {\n  var monitors = goog.debug.entryPointRegistry.monitors_;\n  goog.asserts.assert(\n      monitor == monitors[monitors.length - 1],\n      'Only the most recent monitor can be unwrapped.');\n  var transformer = goog.bind(monitor.unwrap, monitor);\n  for (var i = 0; i < goog.debug.entryPointRegistry.refList_.length; i++) {\n    goog.debug.entryPointRegistry.refList_[i](transformer);\n  }\n  monitors.length--;\n};\n","// Copyright 2017 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Provides methods dealing with context on error objects.\n */\n\ngoog.provide('goog.debug.errorcontext');\n\n\n/**\n * Adds key-value context to the error.\n * @param {!Error} err The error to add context to.\n * @param {string} contextKey Key for the context to be added.\n * @param {string} contextValue Value for the context to be added.\n */\ngoog.debug.errorcontext.addErrorContext = function(\n    err, contextKey, contextValue) {\n  if (!err[goog.debug.errorcontext.CONTEXT_KEY_]) {\n    err[goog.debug.errorcontext.CONTEXT_KEY_] = {};\n  }\n  err[goog.debug.errorcontext.CONTEXT_KEY_][contextKey] = contextValue;\n};\n\n\n/**\n * @param {!Error} err The error to get context from.\n * @return {!Object<string, string>} The context of the provided error.\n */\ngoog.debug.errorcontext.getErrorContext = function(err) {\n  return err[goog.debug.errorcontext.CONTEXT_KEY_] || {};\n};\n\n\n// TODO(user): convert this to a Symbol once goog.debug.ErrorReporter is\n// able to use ES6.\n/** @private @const {string} */\ngoog.debug.errorcontext.CONTEXT_KEY_ = '__closure__error__context__984382';\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Logging and debugging utilities.\n *\n * @see ../demos/debug.html\n */\n\ngoog.provide('goog.debug');\n\ngoog.require('goog.array');\ngoog.require('goog.debug.errorcontext');\ngoog.require('goog.userAgent');\n\n\n/** @define {boolean} Whether logging should be enabled. */\ngoog.define('goog.debug.LOGGING_ENABLED', goog.DEBUG);\n\n\n/** @define {boolean} Whether to force \"sloppy\" stack building. */\ngoog.define('goog.debug.FORCE_SLOPPY_STACKS', false);\n\n\n/**\n * Catches onerror events fired by windows and similar objects.\n * @param {function(Object)} logFunc The function to call with the error\n *    information.\n * @param {boolean=} opt_cancel Whether to stop the error from reaching the\n *    browser.\n * @param {Object=} opt_target Object that fires onerror events.\n * @suppress {strictMissingProperties} onerror is not defined as a property\n *    on Object.\n */\ngoog.debug.catchErrors = function(logFunc, opt_cancel, opt_target) {\n  var target = opt_target || goog.global;\n  var oldErrorHandler = target.onerror;\n  var retVal = !!opt_cancel;\n\n  // Chrome interprets onerror return value backwards (http://crbug.com/92062)\n  // until it was fixed in webkit revision r94061 (Webkit 535.3). This\n  // workaround still needs to be skipped in Safari after the webkit change\n  // gets pushed out in Safari.\n  // See https://bugs.webkit.org/show_bug.cgi?id=67119\n  if (goog.userAgent.WEBKIT && !goog.userAgent.isVersionOrHigher('535.3')) {\n    retVal = !retVal;\n  }\n\n  /**\n   * New onerror handler for this target. This onerror handler follows the spec\n   * according to\n   * http://www.whatwg.org/specs/web-apps/current-work/#runtime-script-errors\n   * The spec was changed in August 2013 to support receiving column information\n   * and an error object for all scripts on the same origin or cross origin\n   * scripts with the proper headers. See\n   * https://mikewest.org/2013/08/debugging-runtime-errors-with-window-onerror\n   *\n   * @param {string} message The error message. For cross-origin errors, this\n   *     will be scrubbed to just \"Script error.\". For new browsers that have\n   *     updated to follow the latest spec, errors that come from origins that\n   *     have proper cross origin headers will not be scrubbed.\n   * @param {string} url The URL of the script that caused the error. The URL\n   *     will be scrubbed to \"\" for cross origin scripts unless the script has\n   *     proper cross origin headers and the browser has updated to the latest\n   *     spec.\n   * @param {number} line The line number in the script that the error\n   *     occurred on.\n   * @param {number=} opt_col The optional column number that the error\n   *     occurred on. Only browsers that have updated to the latest spec will\n   *     include this.\n   * @param {Error=} opt_error The optional actual error object for this\n   *     error that should include the stack. Only browsers that have updated\n   *     to the latest spec will inlude this parameter.\n   * @return {boolean} Whether to prevent the error from reaching the browser.\n   */\n  target.onerror = function(message, url, line, opt_col, opt_error) {\n    if (oldErrorHandler) {\n      oldErrorHandler(message, url, line, opt_col, opt_error);\n    }\n    logFunc({\n      message: message,\n      fileName: url,\n      line: line,\n      lineNumber: line,\n      col: opt_col,\n      error: opt_error\n    });\n    return retVal;\n  };\n};\n\n\n/**\n * Creates a string representing an object and all its properties.\n * @param {Object|null|undefined} obj Object to expose.\n * @param {boolean=} opt_showFn Show the functions as well as the properties,\n *     default is false.\n * @return {string} The string representation of `obj`.\n */\ngoog.debug.expose = function(obj, opt_showFn) {\n  if (typeof obj == 'undefined') {\n    return 'undefined';\n  }\n  if (obj == null) {\n    return 'NULL';\n  }\n  var str = [];\n\n  for (var x in obj) {\n    if (!opt_showFn && goog.isFunction(obj[x])) {\n      continue;\n    }\n    var s = x + ' = ';\n\n    try {\n      s += obj[x];\n    } catch (e) {\n      s += '*** ' + e + ' ***';\n    }\n    str.push(s);\n  }\n  return str.join('\\n');\n};\n\n\n/**\n * Creates a string representing a given primitive or object, and for an\n * object, all its properties and nested objects. NOTE: The output will include\n * Uids on all objects that were exposed. Any added Uids will be removed before\n * returning.\n * @param {*} obj Object to expose.\n * @param {boolean=} opt_showFn Also show properties that are functions (by\n *     default, functions are omitted).\n * @return {string} A string representation of `obj`.\n */\ngoog.debug.deepExpose = function(obj, opt_showFn) {\n  var str = [];\n\n  // Track any objects where deepExpose added a Uid, so they can be cleaned up\n  // before return. We do this globally, rather than only on ancestors so that\n  // if the same object appears in the output, you can see it.\n  var uidsToCleanup = [];\n  var ancestorUids = {};\n\n  var helper = function(obj, space) {\n    var nestspace = space + '  ';\n\n    var indentMultiline = function(str) {\n      return str.replace(/\\n/g, '\\n' + space);\n    };\n\n\n    try {\n      if (!goog.isDef(obj)) {\n        str.push('undefined');\n      } else if (goog.isNull(obj)) {\n        str.push('NULL');\n      } else if (goog.isString(obj)) {\n        str.push('\"' + indentMultiline(obj) + '\"');\n      } else if (goog.isFunction(obj)) {\n        str.push(indentMultiline(String(obj)));\n      } else if (goog.isObject(obj)) {\n        // Add a Uid if needed. The struct calls implicitly adds them.\n        if (!goog.hasUid(obj)) {\n          uidsToCleanup.push(obj);\n        }\n        var uid = goog.getUid(obj);\n        if (ancestorUids[uid]) {\n          str.push('*** reference loop detected (id=' + uid + ') ***');\n        } else {\n          ancestorUids[uid] = true;\n          str.push('{');\n          for (var x in obj) {\n            if (!opt_showFn && goog.isFunction(obj[x])) {\n              continue;\n            }\n            str.push('\\n');\n            str.push(nestspace);\n            str.push(x + ' = ');\n            helper(obj[x], nestspace);\n          }\n          str.push('\\n' + space + '}');\n          delete ancestorUids[uid];\n        }\n      } else {\n        str.push(obj);\n      }\n    } catch (e) {\n      str.push('*** ' + e + ' ***');\n    }\n  };\n\n  helper(obj, '');\n\n  // Cleanup any Uids that were added by the deepExpose.\n  for (var i = 0; i < uidsToCleanup.length; i++) {\n    goog.removeUid(uidsToCleanup[i]);\n  }\n\n  return str.join('');\n};\n\n\n/**\n * Recursively outputs a nested array as a string.\n * @param {Array<?>} arr The array.\n * @return {string} String representing nested array.\n */\ngoog.debug.exposeArray = function(arr) {\n  var str = [];\n  for (var i = 0; i < arr.length; i++) {\n    if (goog.isArray(arr[i])) {\n      str.push(goog.debug.exposeArray(arr[i]));\n    } else {\n      str.push(arr[i]);\n    }\n  }\n  return '[ ' + str.join(', ') + ' ]';\n};\n\n\n/**\n * Normalizes the error/exception object between browsers.\n * @param {*} err Raw error object.\n * @return {{\n *    message: (?|undefined),\n *    name: (?|undefined),\n *    lineNumber: (?|undefined),\n *    fileName: (?|undefined),\n *    stack: (?|undefined)\n * }} Normalized error object.\n * @suppress {strictMissingProperties} properties not defined on err\n */\ngoog.debug.normalizeErrorObject = function(err) {\n  var href = goog.getObjectByName('window.location.href');\n  if (goog.isString(err)) {\n    return {\n      'message': err,\n      'name': 'Unknown error',\n      'lineNumber': 'Not available',\n      'fileName': href,\n      'stack': 'Not available'\n    };\n  }\n\n  var lineNumber, fileName;\n  var threwError = false;\n\n  try {\n    lineNumber = err.lineNumber || err.line || 'Not available';\n  } catch (e) {\n    // Firefox 2 sometimes throws an error when accessing 'lineNumber':\n    // Message: Permission denied to get property UnnamedClass.lineNumber\n    lineNumber = 'Not available';\n    threwError = true;\n  }\n\n  try {\n    fileName = err.fileName || err.filename || err.sourceURL ||\n        // $googDebugFname may be set before a call to eval to set the filename\n        // that the eval is supposed to present.\n        goog.global['$googDebugFname'] || href;\n  } catch (e) {\n    // Firefox 2 may also throw an error when accessing 'filename'.\n    fileName = 'Not available';\n    threwError = true;\n  }\n\n  // The IE Error object contains only the name and the message.\n  // The Safari Error object uses the line and sourceURL fields.\n  if (threwError || !err.lineNumber || !err.fileName || !err.stack ||\n      !err.message || !err.name) {\n    return {\n      'message': err.message || 'Not available',\n      'name': err.name || 'UnknownError',\n      'lineNumber': lineNumber,\n      'fileName': fileName,\n      'stack': err.stack || 'Not available'\n    };\n  }\n\n  // Standards error object\n  // Typed !Object. Should be a subtype of the return type, but it's not.\n  return /** @type {?} */ (err);\n};\n\n\n/**\n * Converts an object to an Error using the object's toString if it's not\n * already an Error, adds a stacktrace if there isn't one, and optionally adds\n * an extra message.\n * @param {*} err The original thrown error, object, or string.\n * @param {string=} opt_message  optional additional message to add to the\n *     error.\n * @return {!Error} If err is an Error, it is enhanced and returned. Otherwise,\n *     it is converted to an Error which is enhanced and returned.\n */\ngoog.debug.enhanceError = function(err, opt_message) {\n  var error;\n  if (!(err instanceof Error)) {\n    error = Error(err);\n    if (Error.captureStackTrace) {\n      // Trim this function off the call stack, if we can.\n      Error.captureStackTrace(error, goog.debug.enhanceError);\n    }\n  } else {\n    error = err;\n  }\n\n  if (!error.stack) {\n    error.stack = goog.debug.getStacktrace(goog.debug.enhanceError);\n  }\n  if (opt_message) {\n    // find the first unoccupied 'messageX' property\n    var x = 0;\n    while (error['message' + x]) {\n      ++x;\n    }\n    error['message' + x] = String(opt_message);\n  }\n  return error;\n};\n\n\n/**\n * Converts an object to an Error using the object's toString if it's not\n * already an Error, adds a stacktrace if there isn't one, and optionally adds\n * context to the Error, which is reported by the closure error reporter.\n * @param {*} err The original thrown error, object, or string.\n * @param {!Object<string, string>=} opt_context Key-value context to add to the\n *     Error.\n * @return {!Error} If err is an Error, it is enhanced and returned. Otherwise,\n *     it is converted to an Error which is enhanced and returned.\n */\ngoog.debug.enhanceErrorWithContext = function(err, opt_context) {\n  var error = goog.debug.enhanceError(err);\n  if (opt_context) {\n    for (var key in opt_context) {\n      goog.debug.errorcontext.addErrorContext(error, key, opt_context[key]);\n    }\n  }\n  return error;\n};\n\n\n/**\n * Gets the current stack trace. Simple and iterative - doesn't worry about\n * catching circular references or getting the args.\n * @param {number=} opt_depth Optional maximum depth to trace back to.\n * @return {string} A string with the function names of all functions in the\n *     stack, separated by \\n.\n * @suppress {es5Strict}\n */\ngoog.debug.getStacktraceSimple = function(opt_depth) {\n  if (!goog.debug.FORCE_SLOPPY_STACKS) {\n    var stack = goog.debug.getNativeStackTrace_(goog.debug.getStacktraceSimple);\n    if (stack) {\n      return stack;\n    }\n    // NOTE: browsers that have strict mode support also have native \"stack\"\n    // properties.  Fall-through for legacy browser support.\n  }\n\n  var sb = [];\n  var fn = arguments.callee.caller;\n  var depth = 0;\n\n  while (fn && (!opt_depth || depth < opt_depth)) {\n    sb.push(goog.debug.getFunctionName(fn));\n    sb.push('()\\n');\n\n    try {\n      fn = fn.caller;\n    } catch (e) {\n      sb.push('[exception trying to get caller]\\n');\n      break;\n    }\n    depth++;\n    if (depth >= goog.debug.MAX_STACK_DEPTH) {\n      sb.push('[...long stack...]');\n      break;\n    }\n  }\n  if (opt_depth && depth >= opt_depth) {\n    sb.push('[...reached max depth limit...]');\n  } else {\n    sb.push('[end]');\n  }\n\n  return sb.join('');\n};\n\n\n/**\n * Max length of stack to try and output\n * @type {number}\n */\ngoog.debug.MAX_STACK_DEPTH = 50;\n\n\n/**\n * @param {Function} fn The function to start getting the trace from.\n * @return {?string}\n * @private\n */\ngoog.debug.getNativeStackTrace_ = function(fn) {\n  var tempErr = new Error();\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(tempErr, fn);\n    return String(tempErr.stack);\n  } else {\n    // IE10, only adds stack traces when an exception is thrown.\n    try {\n      throw tempErr;\n    } catch (e) {\n      tempErr = e;\n    }\n    var stack = tempErr.stack;\n    if (stack) {\n      return String(stack);\n    }\n  }\n  return null;\n};\n\n\n/**\n * Gets the current stack trace, either starting from the caller or starting\n * from a specified function that's currently on the call stack.\n * @param {?Function=} fn If provided, when collecting the stack trace all\n *     frames above the topmost call to this function, including that call,\n *     will be left out of the stack trace.\n * @return {string} Stack trace.\n * @suppress {es5Strict}\n */\ngoog.debug.getStacktrace = function(fn) {\n  var stack;\n  if (!goog.debug.FORCE_SLOPPY_STACKS) {\n    // Try to get the stack trace from the environment if it is available.\n    var contextFn = fn || goog.debug.getStacktrace;\n    stack = goog.debug.getNativeStackTrace_(contextFn);\n  }\n  if (!stack) {\n    // NOTE: browsers that have strict mode support also have native \"stack\"\n    // properties. This function will throw in strict mode.\n    stack = goog.debug.getStacktraceHelper_(fn || arguments.callee.caller, []);\n  }\n  return stack;\n};\n\n\n/**\n * Private helper for getStacktrace().\n * @param {?Function} fn If provided, when collecting the stack trace all\n *     frames above the topmost call to this function, including that call,\n *     will be left out of the stack trace.\n * @param {Array<!Function>} visited List of functions visited so far.\n * @return {string} Stack trace starting from function fn.\n * @suppress {es5Strict}\n * @private\n */\ngoog.debug.getStacktraceHelper_ = function(fn, visited) {\n  var sb = [];\n\n  // Circular reference, certain functions like bind seem to cause a recursive\n  // loop so we need to catch circular references\n  if (goog.array.contains(visited, fn)) {\n    sb.push('[...circular reference...]');\n\n    // Traverse the call stack until function not found or max depth is reached\n  } else if (fn && visited.length < goog.debug.MAX_STACK_DEPTH) {\n    sb.push(goog.debug.getFunctionName(fn) + '(');\n    var args = fn.arguments;\n    // Args may be null for some special functions such as host objects or eval.\n    for (var i = 0; args && i < args.length; i++) {\n      if (i > 0) {\n        sb.push(', ');\n      }\n      var argDesc;\n      var arg = args[i];\n      switch (typeof arg) {\n        case 'object':\n          argDesc = arg ? 'object' : 'null';\n          break;\n\n        case 'string':\n          argDesc = arg;\n          break;\n\n        case 'number':\n          argDesc = String(arg);\n          break;\n\n        case 'boolean':\n          argDesc = arg ? 'true' : 'false';\n          break;\n\n        case 'function':\n          argDesc = goog.debug.getFunctionName(arg);\n          argDesc = argDesc ? argDesc : '[fn]';\n          break;\n\n        case 'undefined':\n        default:\n          argDesc = typeof arg;\n          break;\n      }\n\n      if (argDesc.length > 40) {\n        argDesc = argDesc.substr(0, 40) + '...';\n      }\n      sb.push(argDesc);\n    }\n    visited.push(fn);\n    sb.push(')\\n');\n\n    try {\n      sb.push(goog.debug.getStacktraceHelper_(fn.caller, visited));\n    } catch (e) {\n      sb.push('[exception trying to get caller]\\n');\n    }\n\n  } else if (fn) {\n    sb.push('[...long stack...]');\n  } else {\n    sb.push('[end]');\n  }\n  return sb.join('');\n};\n\n\n/**\n * Set a custom function name resolver.\n * @param {function(Function): string} resolver Resolves functions to their\n *     names.\n */\ngoog.debug.setFunctionResolver = function(resolver) {\n  goog.debug.fnNameResolver_ = resolver;\n};\n\n\n/**\n * Gets a function name\n * @param {Function} fn Function to get name of.\n * @return {string} Function's name.\n */\ngoog.debug.getFunctionName = function(fn) {\n  if (goog.debug.fnNameCache_[fn]) {\n    return goog.debug.fnNameCache_[fn];\n  }\n  if (goog.debug.fnNameResolver_) {\n    var name = goog.debug.fnNameResolver_(fn);\n    if (name) {\n      goog.debug.fnNameCache_[fn] = name;\n      return name;\n    }\n  }\n\n  // Heuristically determine function name based on code.\n  var functionSource = String(fn);\n  if (!goog.debug.fnNameCache_[functionSource]) {\n    var matches = /function ([^\\(]+)/.exec(functionSource);\n    if (matches) {\n      var method = matches[1];\n      goog.debug.fnNameCache_[functionSource] = method;\n    } else {\n      goog.debug.fnNameCache_[functionSource] = '[Anonymous]';\n    }\n  }\n\n  return goog.debug.fnNameCache_[functionSource];\n};\n\n\n/**\n * Makes whitespace visible by replacing it with printable characters.\n * This is useful in finding diffrences between the expected and the actual\n * output strings of a testcase.\n * @param {string} string whose whitespace needs to be made visible.\n * @return {string} string whose whitespace is made visible.\n */\ngoog.debug.makeWhitespaceVisible = function(string) {\n  return string.replace(/ /g, '[_]')\n      .replace(/\\f/g, '[f]')\n      .replace(/\\n/g, '[n]\\n')\n      .replace(/\\r/g, '[r]')\n      .replace(/\\t/g, '[t]');\n};\n\n\n/**\n * Returns the type of a value. If a constructor is passed, and a suitable\n * string cannot be found, 'unknown type name' will be returned.\n *\n * <p>Forked rather than moved from {@link goog.asserts.getType_}\n * to avoid adding a dependency to goog.asserts.\n * @param {*} value A constructor, object, or primitive.\n * @return {string} The best display name for the value, or 'unknown type name'.\n */\ngoog.debug.runtimeType = function(value) {\n  if (value instanceof Function) {\n    return value.displayName || value.name || 'unknown type name';\n  } else if (value instanceof Object) {\n    return /** @type {string} */ (value.constructor.displayName) ||\n        value.constructor.name || Object.prototype.toString.call(value);\n  } else {\n    return value === null ? 'null' : typeof value;\n  }\n};\n\n\n/**\n * Hash map for storing function names that have already been looked up.\n * @type {Object}\n * @private\n */\ngoog.debug.fnNameCache_ = {};\n\n\n/**\n * Resolves functions to their names.  Resolved function names will be cached.\n * @type {function(Function):string}\n * @private\n */\ngoog.debug.fnNameResolver_;\n\n\n/**\n * Private internal function to support goog.debug.freeze.\n * @param {T} arg\n * @return {T}\n * @template T\n * @private\n */\ngoog.debug.freezeInternal_ = goog.DEBUG && Object.freeze || function(arg) {\n  return arg;\n};\n\n\n/**\n * Freezes the given object, but only in debug mode (and in browsers that\n * support it).  Note that this is a shallow freeze, so for deeply nested\n * objects it must be called at every level to ensure deep immutability.\n * @param {T} arg\n * @return {T}\n * @template T\n */\ngoog.debug.freeze = function(arg) {\n  // NOTE: this compiles to nothing, but hides the possible side effect of\n  // freezeInternal_ from the compiler so that the entire call can be\n  // removed if the result is not used.\n  return {\n    valueOf: function() {\n      return goog.debug.freezeInternal_(arg);\n    }\n  }.valueOf();\n};\n","// Copyright 2010 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Browser capability checks for the events package.\n *\n */\n\n\ngoog.provide('goog.events.BrowserFeature');\n\ngoog.require('goog.userAgent');\ngoog.scope(function() {\n\n\n\n/**\n * Enum of browser capabilities.\n * @enum {boolean}\n */\ngoog.events.BrowserFeature = {\n  /**\n   * Whether the button attribute of the event is W3C compliant.  False in\n   * Internet Explorer prior to version 9; document-version dependent.\n   */\n  HAS_W3C_BUTTON:\n      !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9),\n\n  /**\n   * Whether the browser supports full W3C event model.\n   */\n  HAS_W3C_EVENT_SUPPORT:\n      !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9),\n\n  /**\n   * To prevent default in IE7-8 for certain keydown events we need set the\n   * keyCode to -1.\n   */\n  SET_KEY_CODE_TO_PREVENT_DEFAULT:\n      goog.userAgent.IE && !goog.userAgent.isVersionOrHigher('9'),\n\n  /**\n   * Whether the `navigator.onLine` property is supported.\n   */\n  HAS_NAVIGATOR_ONLINE_PROPERTY:\n      !goog.userAgent.WEBKIT || goog.userAgent.isVersionOrHigher('528'),\n\n  /**\n   * Whether HTML5 network online/offline events are supported.\n   */\n  HAS_HTML5_NETWORK_EVENT_SUPPORT:\n      goog.userAgent.GECKO && goog.userAgent.isVersionOrHigher('1.9b') ||\n      goog.userAgent.IE && goog.userAgent.isVersionOrHigher('8') ||\n      goog.userAgent.OPERA && goog.userAgent.isVersionOrHigher('9.5') ||\n      goog.userAgent.WEBKIT && goog.userAgent.isVersionOrHigher('528'),\n\n  /**\n   * Whether HTML5 network events fire on document.body, or otherwise the\n   * window.\n   */\n  HTML5_NETWORK_EVENTS_FIRE_ON_BODY:\n      goog.userAgent.GECKO && !goog.userAgent.isVersionOrHigher('8') ||\n      goog.userAgent.IE && !goog.userAgent.isVersionOrHigher('9'),\n\n  /**\n   * Whether touch is enabled in the browser.\n   */\n  TOUCH_ENABLED:\n      ('ontouchstart' in goog.global ||\n       !!(goog.global['document'] && document.documentElement &&\n          'ontouchstart' in document.documentElement) ||\n       // IE10 uses non-standard touch events, so it has a different check.\n       !!(goog.global['navigator'] &&\n          (goog.global['navigator']['maxTouchPoints'] ||\n           goog.global['navigator']['msMaxTouchPoints']))),\n\n  /**\n   * Whether addEventListener supports W3C standard pointer events.\n   * http://www.w3.org/TR/pointerevents/\n   */\n  POINTER_EVENTS: ('PointerEvent' in goog.global),\n\n  /**\n   * Whether addEventListener supports MSPointer events (only used in IE10).\n   * http://msdn.microsoft.com/en-us/library/ie/hh772103(v=vs.85).aspx\n   * http://msdn.microsoft.com/library/hh673557(v=vs.85).aspx\n   */\n  MSPOINTER_EVENTS:\n      ('MSPointerEvent' in goog.global &&\n       !!(goog.global['navigator'] &&\n          goog.global['navigator']['msPointerEnabled'])),\n\n  /**\n   * Whether addEventListener supports {passive: true}.\n   * https://developers.google.com/web/updates/2016/06/passive-event-listeners\n   */\n  PASSIVE_EVENTS: purify(function() {\n    // If we're in a web worker or other custom environment, we can't tell.\n    if (!goog.global.addEventListener || !Object.defineProperty) {  // IE 8\n      return false;\n    }\n\n    var passive = false;\n    var options = Object.defineProperty({}, 'passive', {\n      get: function() {\n        passive = true;\n      }\n    });\n    goog.global.addEventListener('test', goog.nullFunction, options);\n    goog.global.removeEventListener('test', goog.nullFunction, options);\n\n    return passive;\n  })\n};\n\n\n/**\n * Tricks Closure Compiler into believing that a function is pure.  The compiler\n * assumes that any `valueOf` function is pure, without analyzing its contents.\n *\n * @param {function(): T} fn\n * @return {T}\n * @template T\n */\nfunction purify(fn) {\n  return ({valueOf: fn}).valueOf();\n}\n});  // goog.scope\n","// Copyright 2011 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Definition of the disposable interface.  A disposable object\n * has a dispose method to to clean up references and resources.\n * @author nnaze@google.com (Nathan Naze)\n */\n\n\ngoog.provide('goog.disposable.IDisposable');\n\n\n\n/**\n * Interface for a disposable object.  If a instance requires cleanup\n * (references COM objects, DOM nodes, or other disposable objects), it should\n * implement this interface (it may subclass goog.Disposable).\n * @record\n */\ngoog.disposable.IDisposable = function() {};\n\n\n/**\n * Disposes of the object and its resources.\n * @return {void} Nothing.\n */\ngoog.disposable.IDisposable.prototype.dispose = goog.abstractMethod;\n\n\n/**\n * @return {boolean} Whether the object has been disposed of.\n */\ngoog.disposable.IDisposable.prototype.isDisposed = goog.abstractMethod;\n","// Copyright 2005 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Implements the disposable interface. The dispose method is used\n * to clean up references and resources.\n * @author arv@google.com (Erik Arvidsson)\n */\n\n\ngoog.provide('goog.Disposable');\ngoog.provide('goog.dispose');\ngoog.provide('goog.disposeAll');\n\ngoog.require('goog.disposable.IDisposable');\n\n\n\n/**\n * Class that provides the basic implementation for disposable objects. If your\n * class holds one or more references to COM objects, DOM nodes, or other\n * disposable objects, it should extend this class or implement the disposable\n * interface (defined in goog.disposable.IDisposable).\n * @constructor\n * @implements {goog.disposable.IDisposable}\n */\ngoog.Disposable = function() {\n  /**\n   * If monitoring the goog.Disposable instances is enabled, stores the creation\n   * stack trace of the Disposable instance.\n   * @type {string|undefined}\n   */\n  this.creationStack;\n\n  if (goog.Disposable.MONITORING_MODE != goog.Disposable.MonitoringMode.OFF) {\n    if (goog.Disposable.INCLUDE_STACK_ON_CREATION) {\n      this.creationStack = new Error().stack;\n    }\n    goog.Disposable.instances_[goog.getUid(this)] = this;\n  }\n  // Support sealing\n  this.disposed_ = this.disposed_;\n  this.onDisposeCallbacks_ = this.onDisposeCallbacks_;\n};\n\n\n/**\n * @enum {number} Different monitoring modes for Disposable.\n */\ngoog.Disposable.MonitoringMode = {\n  /**\n   * No monitoring.\n   */\n  OFF: 0,\n  /**\n   * Creating and disposing the goog.Disposable instances is monitored. All\n   * disposable objects need to call the `goog.Disposable` base\n   * constructor. The PERMANENT mode must be switched on before creating any\n   * goog.Disposable instances.\n   */\n  PERMANENT: 1,\n  /**\n   * INTERACTIVE mode can be switched on and off on the fly without producing\n   * errors. It also doesn't warn if the disposable objects don't call the\n   * `goog.Disposable` base constructor.\n   */\n  INTERACTIVE: 2\n};\n\n\n/**\n * @define {number} The monitoring mode of the goog.Disposable\n *     instances. Default is OFF. Switching on the monitoring is only\n *     recommended for debugging because it has a significant impact on\n *     performance and memory usage. If switched off, the monitoring code\n *     compiles down to 0 bytes.\n */\ngoog.define('goog.Disposable.MONITORING_MODE', 0);\n\n\n/**\n * @define {boolean} Whether to attach creation stack to each created disposable\n *     instance; This is only relevant for when MonitoringMode != OFF.\n */\ngoog.define('goog.Disposable.INCLUDE_STACK_ON_CREATION', true);\n\n\n/**\n * Maps the unique ID of every undisposed `goog.Disposable` object to\n * the object itself.\n * @type {!Object<number, !goog.Disposable>}\n * @private\n */\ngoog.Disposable.instances_ = {};\n\n\n/**\n * @return {!Array<!goog.Disposable>} All `goog.Disposable` objects that\n *     haven't been disposed of.\n */\ngoog.Disposable.getUndisposedObjects = function() {\n  var ret = [];\n  for (var id in goog.Disposable.instances_) {\n    if (goog.Disposable.instances_.hasOwnProperty(id)) {\n      ret.push(goog.Disposable.instances_[Number(id)]);\n    }\n  }\n  return ret;\n};\n\n\n/**\n * Clears the registry of undisposed objects but doesn't dispose of them.\n */\ngoog.Disposable.clearUndisposedObjects = function() {\n  goog.Disposable.instances_ = {};\n};\n\n\n/**\n * Whether the object has been disposed of.\n * @type {boolean}\n * @private\n */\ngoog.Disposable.prototype.disposed_ = false;\n\n\n/**\n * Callbacks to invoke when this object is disposed.\n * @type {Array<!Function>}\n * @private\n */\ngoog.Disposable.prototype.onDisposeCallbacks_;\n\n\n/**\n * @return {boolean} Whether the object has been disposed of.\n * @override\n */\ngoog.Disposable.prototype.isDisposed = function() {\n  return this.disposed_;\n};\n\n\n/**\n * @return {boolean} Whether the object has been disposed of.\n * @deprecated Use {@link #isDisposed} instead.\n */\ngoog.Disposable.prototype.getDisposed = goog.Disposable.prototype.isDisposed;\n\n\n/**\n * Disposes of the object. If the object hasn't already been disposed of, calls\n * {@link #disposeInternal}. Classes that extend `goog.Disposable` should\n * override {@link #disposeInternal} in order to delete references to COM\n * objects, DOM nodes, and other disposable objects. Reentrant.\n *\n * @return {void} Nothing.\n * @override\n */\ngoog.Disposable.prototype.dispose = function() {\n  if (!this.disposed_) {\n    // Set disposed_ to true first, in case during the chain of disposal this\n    // gets disposed recursively.\n    this.disposed_ = true;\n    this.disposeInternal();\n    if (goog.Disposable.MONITORING_MODE != goog.Disposable.MonitoringMode.OFF) {\n      var uid = goog.getUid(this);\n      if (goog.Disposable.MONITORING_MODE ==\n              goog.Disposable.MonitoringMode.PERMANENT &&\n          !goog.Disposable.instances_.hasOwnProperty(uid)) {\n        throw new Error(\n            this + ' did not call the goog.Disposable base ' +\n            'constructor or was disposed of after a clearUndisposedObjects ' +\n            'call');\n      }\n      if (goog.Disposable.MONITORING_MODE !=\n              goog.Disposable.MonitoringMode.OFF &&\n          this.onDisposeCallbacks_ && this.onDisposeCallbacks_.length > 0) {\n        throw new Error(\n            this + ' did not empty its onDisposeCallbacks queue. This ' +\n            'probably means it overrode dispose() or disposeInternal() ' +\n            'without calling the superclass\\' method.');\n      }\n      delete goog.Disposable.instances_[uid];\n    }\n  }\n};\n\n\n/**\n * Associates a disposable object with this object so that they will be disposed\n * together.\n * @param {goog.disposable.IDisposable} disposable that will be disposed when\n *     this object is disposed.\n */\ngoog.Disposable.prototype.registerDisposable = function(disposable) {\n  this.addOnDisposeCallback(goog.partial(goog.dispose, disposable));\n};\n\n\n/**\n * Invokes a callback function when this object is disposed. Callbacks are\n * invoked in the order in which they were added. If a callback is added to\n * an already disposed Disposable, it will be called immediately.\n * @param {function(this:T):?} callback The callback function.\n * @param {T=} opt_scope An optional scope to call the callback in.\n * @template T\n */\ngoog.Disposable.prototype.addOnDisposeCallback = function(callback, opt_scope) {\n  if (this.disposed_) {\n    goog.isDef(opt_scope) ? callback.call(opt_scope) : callback();\n    return;\n  }\n  if (!this.onDisposeCallbacks_) {\n    this.onDisposeCallbacks_ = [];\n  }\n\n  this.onDisposeCallbacks_.push(\n      goog.isDef(opt_scope) ? goog.bind(callback, opt_scope) : callback);\n};\n\n\n/**\n * Deletes or nulls out any references to COM objects, DOM nodes, or other\n * disposable objects. Classes that extend `goog.Disposable` should\n * override this method.\n * Not reentrant. To avoid calling it twice, it must only be called from the\n * subclass' `disposeInternal` method. Everywhere else the public\n * `dispose` method must be used.\n * For example:\n * <pre>\n *   mypackage.MyClass = function() {\n *     mypackage.MyClass.base(this, 'constructor');\n *     // Constructor logic specific to MyClass.\n *     ...\n *   };\n *   goog.inherits(mypackage.MyClass, goog.Disposable);\n *\n *   mypackage.MyClass.prototype.disposeInternal = function() {\n *     // Dispose logic specific to MyClass.\n *     ...\n *     // Call superclass's disposeInternal at the end of the subclass's, like\n *     // in C++, to avoid hard-to-catch issues.\n *     mypackage.MyClass.base(this, 'disposeInternal');\n *   };\n * </pre>\n * @protected\n */\ngoog.Disposable.prototype.disposeInternal = function() {\n  if (this.onDisposeCallbacks_) {\n    while (this.onDisposeCallbacks_.length) {\n      this.onDisposeCallbacks_.shift()();\n    }\n  }\n};\n\n\n/**\n * Returns True if we can verify the object is disposed.\n * Calls `isDisposed` on the argument if it supports it.  If obj\n * is not an object with an isDisposed() method, return false.\n * @param {*} obj The object to investigate.\n * @return {boolean} True if we can verify the object is disposed.\n */\ngoog.Disposable.isDisposed = function(obj) {\n  if (obj && typeof obj.isDisposed == 'function') {\n    return obj.isDisposed();\n  }\n  return false;\n};\n\n\n/**\n * Calls `dispose` on the argument if it supports it. If obj is not an\n *     object with a dispose() method, this is a no-op.\n * @param {*} obj The object to dispose of.\n */\ngoog.dispose = function(obj) {\n  if (obj && typeof obj.dispose == 'function') {\n    obj.dispose();\n  }\n};\n\n\n/**\n * Calls `dispose` on each member of the list that supports it. (If the\n * member is an ArrayLike, then `goog.disposeAll()` will be called\n * recursively on each of its members.) If the member is not an object with a\n * `dispose()` method, then it is ignored.\n * @param {...*} var_args The list.\n */\ngoog.disposeAll = function(var_args) {\n  for (var i = 0, len = arguments.length; i < len; ++i) {\n    var disposable = arguments[i];\n    if (goog.isArrayLike(disposable)) {\n      goog.disposeAll.apply(null, disposable);\n    } else {\n      goog.dispose(disposable);\n    }\n  }\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\ngoog.provide('goog.events.EventId');\n\n\n\n/**\n * A templated class that is used when registering for events. Typical usage:\n *\n *    /** @type {goog.events.EventId<MyEventObj>} *\\\n *    var myEventId = new goog.events.EventId(\n *        goog.events.getUniqueId(('someEvent'));\n *\n *    // No need to cast or declare here since the compiler knows the\n *    // correct type of 'evt' (MyEventObj).\n *    something.listen(myEventId, function(evt) {});\n *\n * @param {string} eventId\n * @template T\n * @constructor\n * @struct\n * @final\n */\ngoog.events.EventId = function(eventId) {\n  /** @const */ this.id = eventId;\n};\n\n\n/**\n * @override\n */\ngoog.events.EventId.prototype.toString = function() {\n  return this.id;\n};\n","// Copyright 2005 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview A base class for event objects.\n *\n */\n\n\ngoog.provide('goog.events.Event');\ngoog.provide('goog.events.EventLike');\n\n/**\n * goog.events.Event no longer depends on goog.Disposable. Keep requiring\n * goog.Disposable here to not break projects which assume this dependency.\n * @suppress {extraRequire}\n */\ngoog.require('goog.Disposable');\ngoog.require('goog.events.EventId');\n\n\n/**\n * A typedef for event like objects that are dispatchable via the\n * goog.events.dispatchEvent function. strings are treated as the type for a\n * goog.events.Event. Objects are treated as an extension of a new\n * goog.events.Event with the type property of the object being used as the type\n * of the Event.\n * @typedef {string|Object|goog.events.Event|goog.events.EventId}\n */\ngoog.events.EventLike;\n\n\n\n/**\n * A base class for event objects, so that they can support preventDefault and\n * stopPropagation.\n *\n * @suppress {underscore} Several properties on this class are technically\n *     public, but referencing these properties outside this package is strongly\n *     discouraged.\n *\n * @param {string|!goog.events.EventId} type Event Type.\n * @param {Object=} opt_target Reference to the object that is the target of\n *     this event. It has to implement the `EventTarget` interface\n *     declared at {@link http://developer.mozilla.org/en/DOM/EventTarget}.\n * @constructor\n */\ngoog.events.Event = function(type, opt_target) {\n  /**\n   * Event type.\n   * @type {string}\n   */\n  this.type = type instanceof goog.events.EventId ? String(type) : type;\n\n  /**\n   * TODO(tbreisacher): The type should probably be\n   * EventTarget|goog.events.EventTarget.\n   *\n   * Target of the event.\n   * @type {Object|undefined}\n   */\n  this.target = opt_target;\n\n  /**\n   * Object that had the listener attached.\n   * @type {Object|undefined}\n   */\n  this.currentTarget = this.target;\n\n  /**\n   * Whether to cancel the event in internal capture/bubble processing for IE.\n   * @type {boolean}\n   * @public\n   */\n  this.propagationStopped_ = false;\n\n  /**\n   * Whether the default action has been prevented.\n   * This is a property to match the W3C specification at\n   * {@link http://www.w3.org/TR/DOM-Level-3-Events/\n   * #events-event-type-defaultPrevented}.\n   * Must be treated as read-only outside the class.\n   * @type {boolean}\n   */\n  this.defaultPrevented = false;\n\n  /**\n   * Return value for in internal capture/bubble processing for IE.\n   * @type {boolean}\n   * @public\n   */\n  this.returnValue_ = true;\n};\n\n\n/**\n * Stops event propagation.\n */\ngoog.events.Event.prototype.stopPropagation = function() {\n  this.propagationStopped_ = true;\n};\n\n\n/**\n * Prevents the default action, for example a link redirecting to a url.\n */\ngoog.events.Event.prototype.preventDefault = function() {\n  this.defaultPrevented = true;\n  this.returnValue_ = false;\n};\n\n\n/**\n * Stops the propagation of the event. It is equivalent to\n * `e.stopPropagation()`, but can be used as the callback argument of\n * {@link goog.events.listen} without declaring another function.\n * @param {!goog.events.Event} e An event.\n */\ngoog.events.Event.stopPropagation = function(e) {\n  e.stopPropagation();\n};\n\n\n/**\n * Prevents the default action. It is equivalent to\n * `e.preventDefault()`, but can be used as the callback argument of\n * {@link goog.events.listen} without declaring another function.\n * @param {!goog.events.Event} e An event.\n */\ngoog.events.Event.preventDefault = function(e) {\n  e.preventDefault();\n};\n","// Copyright 2010 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Event Types.\n *\n * @author arv@google.com (Erik Arvidsson)\n */\n\n\ngoog.provide('goog.events.EventType');\ngoog.provide('goog.events.PointerAsMouseEventType');\ngoog.provide('goog.events.PointerFallbackEventType');\n\ngoog.require('goog.events.BrowserFeature');\ngoog.require('goog.userAgent');\n\n\n/**\n * Returns a prefixed event name for the current browser.\n * @param {string} eventName The name of the event.\n * @return {string} The prefixed event name.\n * @suppress {missingRequire|missingProvide}\n * @private\n */\ngoog.events.getVendorPrefixedName_ = function(eventName) {\n  return goog.userAgent.WEBKIT ?\n      'webkit' + eventName :\n      (goog.userAgent.OPERA ? 'o' + eventName.toLowerCase() :\n                              eventName.toLowerCase());\n};\n\n\n/**\n * Constants for event names.\n * @enum {string}\n */\ngoog.events.EventType = {\n  // Mouse events\n  CLICK: 'click',\n  RIGHTCLICK: 'rightclick',\n  DBLCLICK: 'dblclick',\n  MOUSEDOWN: 'mousedown',\n  MOUSEUP: 'mouseup',\n  MOUSEOVER: 'mouseover',\n  MOUSEOUT: 'mouseout',\n  MOUSEMOVE: 'mousemove',\n  MOUSEENTER: 'mouseenter',\n  MOUSELEAVE: 'mouseleave',\n\n  // Non-existent event; will never fire. This exists as a mouse counterpart to\n  // POINTERCANCEL.\n  MOUSECANCEL: 'mousecancel',\n\n  // Selection events.\n  // https://www.w3.org/TR/selection-api/\n  SELECTIONCHANGE: 'selectionchange',\n  SELECTSTART: 'selectstart',  // IE, Safari, Chrome\n\n  // Wheel events\n  // http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents\n  WHEEL: 'wheel',\n\n  // Key events\n  KEYPRESS: 'keypress',\n  KEYDOWN: 'keydown',\n  KEYUP: 'keyup',\n\n  // Focus\n  BLUR: 'blur',\n  FOCUS: 'focus',\n  DEACTIVATE: 'deactivate',  // IE only\n  FOCUSIN: 'focusin',\n  FOCUSOUT: 'focusout',\n\n  // Forms\n  CHANGE: 'change',\n  RESET: 'reset',\n  SELECT: 'select',\n  SUBMIT: 'submit',\n  INPUT: 'input',\n  PROPERTYCHANGE: 'propertychange',  // IE only\n\n  // Drag and drop\n  DRAGSTART: 'dragstart',\n  DRAG: 'drag',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DRAGLEAVE: 'dragleave',\n  DROP: 'drop',\n  DRAGEND: 'dragend',\n\n  // Touch events\n  // Note that other touch events exist, but we should follow the W3C list here.\n  // http://www.w3.org/TR/touch-events/#list-of-touchevent-types\n  TOUCHSTART: 'touchstart',\n  TOUCHMOVE: 'touchmove',\n  TOUCHEND: 'touchend',\n  TOUCHCANCEL: 'touchcancel',\n\n  // Misc\n  BEFOREUNLOAD: 'beforeunload',\n  CONSOLEMESSAGE: 'consolemessage',\n  CONTEXTMENU: 'contextmenu',\n  DEVICECHANGE: 'devicechange',\n  DEVICEMOTION: 'devicemotion',\n  DEVICEORIENTATION: 'deviceorientation',\n  DOMCONTENTLOADED: 'DOMContentLoaded',\n  ERROR: 'error',\n  HELP: 'help',\n  LOAD: 'load',\n  LOSECAPTURE: 'losecapture',\n  ORIENTATIONCHANGE: 'orientationchange',\n  READYSTATECHANGE: 'readystatechange',\n  RESIZE: 'resize',\n  SCROLL: 'scroll',\n  UNLOAD: 'unload',\n\n  // Media events\n  CANPLAY: 'canplay',\n  CANPLAYTHROUGH: 'canplaythrough',\n  DURATIONCHANGE: 'durationchange',\n  EMPTIED: 'emptied',\n  ENDED: 'ended',\n  LOADEDDATA: 'loadeddata',\n  LOADEDMETADATA: 'loadedmetadata',\n  PAUSE: 'pause',\n  PLAY: 'play',\n  PLAYING: 'playing',\n  RATECHANGE: 'ratechange',\n  SEEKED: 'seeked',\n  SEEKING: 'seeking',\n  STALLED: 'stalled',\n  SUSPEND: 'suspend',\n  TIMEUPDATE: 'timeupdate',\n  VOLUMECHANGE: 'volumechange',\n  WAITING: 'waiting',\n\n  // Media Source Extensions events\n  // https://www.w3.org/TR/media-source/#mediasource-events\n  SOURCEOPEN: 'sourceopen',\n  SOURCEENDED: 'sourceended',\n  SOURCECLOSED: 'sourceclosed',\n  // https://www.w3.org/TR/media-source/#sourcebuffer-events\n  ABORT: 'abort',\n  UPDATE: 'update',\n  UPDATESTART: 'updatestart',\n  UPDATEEND: 'updateend',\n\n  // HTML 5 History events\n  // See http://www.w3.org/TR/html5/browsers.html#event-definitions-0\n  HASHCHANGE: 'hashchange',\n  PAGEHIDE: 'pagehide',\n  PAGESHOW: 'pageshow',\n  POPSTATE: 'popstate',\n\n  // Copy and Paste\n  // Support is limited. Make sure it works on your favorite browser\n  // before using.\n  // http://www.quirksmode.org/dom/events/cutcopypaste.html\n  COPY: 'copy',\n  PASTE: 'paste',\n  CUT: 'cut',\n  BEFORECOPY: 'beforecopy',\n  BEFORECUT: 'beforecut',\n  BEFOREPASTE: 'beforepaste',\n\n  // HTML5 online/offline events.\n  // http://www.w3.org/TR/offline-webapps/#related\n  ONLINE: 'online',\n  OFFLINE: 'offline',\n\n  // HTML 5 worker events\n  MESSAGE: 'message',\n  CONNECT: 'connect',\n\n  // Service Worker Events - ServiceWorkerGlobalScope context\n  // See https://w3c.github.io/ServiceWorker/#execution-context-events\n  // Note: message event defined in worker events section\n  INSTALL: 'install',\n  ACTIVATE: 'activate',\n  FETCH: 'fetch',\n  FOREIGNFETCH: 'foreignfetch',\n  MESSAGEERROR: 'messageerror',\n\n  // Service Worker Events - Document context\n  // See https://w3c.github.io/ServiceWorker/#document-context-events\n  STATECHANGE: 'statechange',\n  UPDATEFOUND: 'updatefound',\n  CONTROLLERCHANGE: 'controllerchange',\n\n  // CSS animation events.\n  /** @suppress {missingRequire} */\n  ANIMATIONSTART: goog.events.getVendorPrefixedName_('AnimationStart'),\n  /** @suppress {missingRequire} */\n  ANIMATIONEND: goog.events.getVendorPrefixedName_('AnimationEnd'),\n  /** @suppress {missingRequire} */\n  ANIMATIONITERATION: goog.events.getVendorPrefixedName_('AnimationIteration'),\n\n  // CSS transition events. Based on the browser support described at:\n  // https://developer.mozilla.org/en/css/css_transitions#Browser_compatibility\n  /** @suppress {missingRequire} */\n  TRANSITIONEND: goog.events.getVendorPrefixedName_('TransitionEnd'),\n\n  // W3C Pointer Events\n  // http://www.w3.org/TR/pointerevents/\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTERCANCEL: 'pointercancel',\n  POINTERMOVE: 'pointermove',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  GOTPOINTERCAPTURE: 'gotpointercapture',\n  LOSTPOINTERCAPTURE: 'lostpointercapture',\n\n  // IE specific events.\n  // See http://msdn.microsoft.com/en-us/library/ie/hh772103(v=vs.85).aspx\n  // Note: these events will be supplanted in IE11.\n  MSGESTURECHANGE: 'MSGestureChange',\n  MSGESTUREEND: 'MSGestureEnd',\n  MSGESTUREHOLD: 'MSGestureHold',\n  MSGESTURESTART: 'MSGestureStart',\n  MSGESTURETAP: 'MSGestureTap',\n  MSGOTPOINTERCAPTURE: 'MSGotPointerCapture',\n  MSINERTIASTART: 'MSInertiaStart',\n  MSLOSTPOINTERCAPTURE: 'MSLostPointerCapture',\n  MSPOINTERCANCEL: 'MSPointerCancel',\n  MSPOINTERDOWN: 'MSPointerDown',\n  MSPOINTERENTER: 'MSPointerEnter',\n  MSPOINTERHOVER: 'MSPointerHover',\n  MSPOINTERLEAVE: 'MSPointerLeave',\n  MSPOINTERMOVE: 'MSPointerMove',\n  MSPOINTEROUT: 'MSPointerOut',\n  MSPOINTEROVER: 'MSPointerOver',\n  MSPOINTERUP: 'MSPointerUp',\n\n  // Native IMEs/input tools events.\n  TEXT: 'text',\n  // The textInput event is supported in IE9+, but only in lower case. All other\n  // browsers use the camel-case event name.\n  TEXTINPUT: goog.userAgent.IE ? 'textinput' : 'textInput',\n  COMPOSITIONSTART: 'compositionstart',\n  COMPOSITIONUPDATE: 'compositionupdate',\n  COMPOSITIONEND: 'compositionend',\n\n  // The beforeinput event is initially only supported in Safari. See\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=342670 for Chrome\n  // implementation tracking.\n  BEFOREINPUT: 'beforeinput',\n\n  // Webview tag events\n  // See https://developer.chrome.com/apps/tags/webview\n  EXIT: 'exit',\n  LOADABORT: 'loadabort',\n  LOADCOMMIT: 'loadcommit',\n  LOADREDIRECT: 'loadredirect',\n  LOADSTART: 'loadstart',\n  LOADSTOP: 'loadstop',\n  RESPONSIVE: 'responsive',\n  SIZECHANGED: 'sizechanged',\n  UNRESPONSIVE: 'unresponsive',\n\n  // HTML5 Page Visibility API.  See details at\n  // `goog.labs.dom.PageVisibilityMonitor`.\n  VISIBILITYCHANGE: 'visibilitychange',\n\n  // LocalStorage event.\n  STORAGE: 'storage',\n\n  // DOM Level 2 mutation events (deprecated).\n  DOMSUBTREEMODIFIED: 'DOMSubtreeModified',\n  DOMNODEINSERTED: 'DOMNodeInserted',\n  DOMNODEREMOVED: 'DOMNodeRemoved',\n  DOMNODEREMOVEDFROMDOCUMENT: 'DOMNodeRemovedFromDocument',\n  DOMNODEINSERTEDINTODOCUMENT: 'DOMNodeInsertedIntoDocument',\n  DOMATTRMODIFIED: 'DOMAttrModified',\n  DOMCHARACTERDATAMODIFIED: 'DOMCharacterDataModified',\n\n  // Print events.\n  BEFOREPRINT: 'beforeprint',\n  AFTERPRINT: 'afterprint',\n\n  // Web app manifest events.\n  BEFOREINSTALLPROMPT: 'beforeinstallprompt',\n  APPINSTALLED: 'appinstalled'\n};\n\n\n/**\n * Returns one of the given pointer fallback event names in order of preference:\n *   1. pointerEventName\n *   2. msPointerEventName\n *   3. mouseEventName\n * @param {string} pointerEventName\n * @param {string} msPointerEventName\n * @param {string} mouseEventName\n * @return {string} The supported pointer or mouse event name.\n * @private\n */\ngoog.events.getPointerFallbackEventName_ = function(\n    pointerEventName, msPointerEventName, mouseEventName) {\n  if (goog.events.BrowserFeature.POINTER_EVENTS) {\n    return pointerEventName;\n  }\n  if (goog.events.BrowserFeature.MSPOINTER_EVENTS) {\n    return msPointerEventName;\n  }\n  return mouseEventName;\n};\n\n\n/**\n * Constants for pointer event names that fall back to corresponding mouse event\n * names on unsupported platforms. These are intended to be drop-in replacements\n * for corresponding values in `goog.events.EventType`.\n * @enum {string}\n */\ngoog.events.PointerFallbackEventType = {\n  POINTERDOWN: goog.events.getPointerFallbackEventName_(\n      goog.events.EventType.POINTERDOWN, goog.events.EventType.MSPOINTERDOWN,\n      goog.events.EventType.MOUSEDOWN),\n  POINTERUP: goog.events.getPointerFallbackEventName_(\n      goog.events.EventType.POINTERUP, goog.events.EventType.MSPOINTERUP,\n      goog.events.EventType.MOUSEUP),\n  POINTERCANCEL: goog.events.getPointerFallbackEventName_(\n      goog.events.EventType.POINTERCANCEL,\n      goog.events.EventType.MSPOINTERCANCEL,\n      // When falling back to mouse events, there is no MOUSECANCEL equivalent\n      // of POINTERCANCEL. In this case POINTERUP already falls back to MOUSEUP\n      // which represents both UP and CANCEL. POINTERCANCEL does not fall back\n      // to MOUSEUP to prevent listening twice on the same event.\n      goog.events.EventType.MOUSECANCEL),\n  POINTERMOVE: goog.events.getPointerFallbackEventName_(\n      goog.events.EventType.POINTERMOVE, goog.events.EventType.MSPOINTERMOVE,\n      goog.events.EventType.MOUSEMOVE),\n  POINTEROVER: goog.events.getPointerFallbackEventName_(\n      goog.events.EventType.POINTEROVER, goog.events.EventType.MSPOINTEROVER,\n      goog.events.EventType.MOUSEOVER),\n  POINTEROUT: goog.events.getPointerFallbackEventName_(\n      goog.events.EventType.POINTEROUT, goog.events.EventType.MSPOINTEROUT,\n      goog.events.EventType.MOUSEOUT),\n  POINTERENTER: goog.events.getPointerFallbackEventName_(\n      goog.events.EventType.POINTERENTER, goog.events.EventType.MSPOINTERENTER,\n      goog.events.EventType.MOUSEENTER),\n  POINTERLEAVE: goog.events.getPointerFallbackEventName_(\n      goog.events.EventType.POINTERLEAVE, goog.events.EventType.MSPOINTERLEAVE,\n      goog.events.EventType.MOUSELEAVE)\n};\n\n\n/**\n * An alias for `goog.events.EventType.MOUSE*` event types that is overridden by\n * corresponding `POINTER*` event types.\n * @enum {string}\n */\ngoog.events.PointerAsMouseEventType = {\n  MOUSEDOWN: goog.events.PointerFallbackEventType.POINTERDOWN,\n  MOUSEUP: goog.events.PointerFallbackEventType.POINTERUP,\n  MOUSECANCEL: goog.events.PointerFallbackEventType.POINTERCANCEL,\n  MOUSEMOVE: goog.events.PointerFallbackEventType.POINTERMOVE,\n  MOUSEOVER: goog.events.PointerFallbackEventType.POINTEROVER,\n  MOUSEOUT: goog.events.PointerFallbackEventType.POINTEROUT,\n  MOUSEENTER: goog.events.PointerFallbackEventType.POINTERENTER,\n  MOUSELEAVE: goog.events.PointerFallbackEventType.POINTERLEAVE\n};\n","// Copyright 2005 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview A patched, standardized event object for browser events.\n *\n * <pre>\n * The patched event object contains the following members:\n * - type           {string}    Event type, e.g. 'click'\n * - target         {Object}    The element that actually triggered the event\n * - currentTarget  {Object}    The element the listener is attached to\n * - relatedTarget  {Object}    For mouseover and mouseout, the previous object\n * - offsetX        {number}    X-coordinate relative to target\n * - offsetY        {number}    Y-coordinate relative to target\n * - clientX        {number}    X-coordinate relative to viewport\n * - clientY        {number}    Y-coordinate relative to viewport\n * - screenX        {number}    X-coordinate relative to the edge of the screen\n * - screenY        {number}    Y-coordinate relative to the edge of the screen\n * - button         {number}    Mouse button. Use isButton() to test.\n * - keyCode        {number}    Key-code\n * - ctrlKey        {boolean}   Was ctrl key depressed\n * - altKey         {boolean}   Was alt key depressed\n * - shiftKey       {boolean}   Was shift key depressed\n * - metaKey        {boolean}   Was meta key depressed\n * - pointerId      {number}    Pointer ID\n * - pointerType    {string}    Pointer type, e.g. 'mouse', 'pen', or 'touch'\n * - defaultPrevented {boolean} Whether the default action has been prevented\n * - state          {Object}    History state object\n *\n * NOTE: The keyCode member contains the raw browser keyCode. For normalized\n * key and character code use {@link goog.events.KeyHandler}.\n * </pre>\n *\n * @author arv@google.com (Erik Arvidsson)\n */\n\ngoog.provide('goog.events.BrowserEvent');\ngoog.provide('goog.events.BrowserEvent.MouseButton');\ngoog.provide('goog.events.BrowserEvent.PointerType');\n\ngoog.require('goog.debug');\ngoog.require('goog.events.BrowserFeature');\ngoog.require('goog.events.Event');\ngoog.require('goog.events.EventType');\ngoog.require('goog.reflect');\ngoog.require('goog.userAgent');\n\n\n\n/**\n * Accepts a browser event object and creates a patched, cross browser event\n * object.\n * The content of this object will not be initialized if no event object is\n * provided. If this is the case, init() needs to be invoked separately.\n * @param {Event=} opt_e Browser event object.\n * @param {EventTarget=} opt_currentTarget Current target for event.\n * @constructor\n * @extends {goog.events.Event}\n */\ngoog.events.BrowserEvent = function(opt_e, opt_currentTarget) {\n  goog.events.BrowserEvent.base(this, 'constructor', opt_e ? opt_e.type : '');\n\n  /**\n   * Target that fired the event.\n   * @override\n   * @type {Node}\n   */\n  this.target = null;\n\n  /**\n   * Node that had the listener attached.\n   * @override\n   * @type {Node|undefined}\n   */\n  this.currentTarget = null;\n\n  /**\n   * For mouseover and mouseout events, the related object for the event.\n   * @type {Node}\n   */\n  this.relatedTarget = null;\n\n  /**\n   * X-coordinate relative to target.\n   * @type {number}\n   */\n  this.offsetX = 0;\n\n  /**\n   * Y-coordinate relative to target.\n   * @type {number}\n   */\n  this.offsetY = 0;\n\n  /**\n   * X-coordinate relative to the window.\n   * @type {number}\n   */\n  this.clientX = 0;\n\n  /**\n   * Y-coordinate relative to the window.\n   * @type {number}\n   */\n  this.clientY = 0;\n\n  /**\n   * X-coordinate relative to the monitor.\n   * @type {number}\n   */\n  this.screenX = 0;\n\n  /**\n   * Y-coordinate relative to the monitor.\n   * @type {number}\n   */\n  this.screenY = 0;\n\n  /**\n   * Which mouse button was pressed.\n   * @type {number}\n   */\n  this.button = 0;\n\n  /**\n   * Key of key press.\n   * @type {string}\n   */\n  this.key = '';\n\n  /**\n   * Keycode of key press.\n   * @type {number}\n   */\n  this.keyCode = 0;\n\n  /**\n   * Keycode of key press.\n   * @type {number}\n   */\n  this.charCode = 0;\n\n  /**\n   * Whether control was pressed at time of event.\n   * @type {boolean}\n   */\n  this.ctrlKey = false;\n\n  /**\n   * Whether alt was pressed at time of event.\n   * @type {boolean}\n   */\n  this.altKey = false;\n\n  /**\n   * Whether shift was pressed at time of event.\n   * @type {boolean}\n   */\n  this.shiftKey = false;\n\n  /**\n   * Whether the meta key was pressed at time of event.\n   * @type {boolean}\n   */\n  this.metaKey = false;\n\n  /**\n   * History state object, only set for PopState events where it's a copy of the\n   * state object provided to pushState or replaceState.\n   * @type {Object}\n   */\n  this.state = null;\n\n  /**\n   * Whether the default platform modifier key was pressed at time of event.\n   * (This is control for all platforms except Mac, where it's Meta.)\n   * @type {boolean}\n   */\n  this.platformModifierKey = false;\n\n  /**\n   * @type {number}\n   */\n  this.pointerId = 0;\n\n  /**\n   * @type {string}\n   */\n  this.pointerType = '';\n\n  /**\n   * The browser event object.\n   * @private {Event}\n   */\n  this.event_ = null;\n\n  if (opt_e) {\n    this.init(opt_e, opt_currentTarget);\n  }\n};\ngoog.inherits(goog.events.BrowserEvent, goog.events.Event);\n\n\n/**\n * Normalized button constants for the mouse.\n * @enum {number}\n */\ngoog.events.BrowserEvent.MouseButton = {\n  LEFT: 0,\n  MIDDLE: 1,\n  RIGHT: 2\n};\n\n\n/**\n * Normalized pointer type constants for pointer events.\n * @enum {string}\n */\ngoog.events.BrowserEvent.PointerType = {\n  MOUSE: 'mouse',\n  PEN: 'pen',\n  TOUCH: 'touch'\n};\n\n\n/**\n * Static data for mapping mouse buttons.\n * @type {!Array<number>}\n * @deprecated Use `goog.events.BrowserEvent.IE_BUTTON_MAP` instead.\n */\ngoog.events.BrowserEvent.IEButtonMap = goog.debug.freeze([\n  1,  // LEFT\n  4,  // MIDDLE\n  2   // RIGHT\n]);\n\n\n/**\n * Static data for mapping mouse buttons.\n * @const {!Array<number>}\n */\ngoog.events.BrowserEvent.IE_BUTTON_MAP = goog.events.BrowserEvent.IEButtonMap;\n\n\n/**\n * Static data for mapping MSPointerEvent types to PointerEvent types.\n * @const {!Object<number, goog.events.BrowserEvent.PointerType>}\n */\ngoog.events.BrowserEvent.IE_POINTER_TYPE_MAP = goog.debug.freeze({\n  2: goog.events.BrowserEvent.PointerType.TOUCH,\n  3: goog.events.BrowserEvent.PointerType.PEN,\n  4: goog.events.BrowserEvent.PointerType.MOUSE\n});\n\n\n/**\n * Accepts a browser event object and creates a patched, cross browser event\n * object.\n * @param {Event} e Browser event object.\n * @param {EventTarget=} opt_currentTarget Current target for event.\n */\ngoog.events.BrowserEvent.prototype.init = function(e, opt_currentTarget) {\n  var type = this.type = e.type;\n\n  /**\n   * On touch devices use the first \"changed touch\" as the relevant touch.\n   * @type {Touch}\n   */\n  var relevantTouch = e.changedTouches ? e.changedTouches[0] : null;\n\n  // TODO(nicksantos): Change this.target to type EventTarget.\n  this.target = /** @type {Node} */ (e.target) || e.srcElement;\n\n  // TODO(nicksantos): Change this.currentTarget to type EventTarget.\n  this.currentTarget = /** @type {Node} */ (opt_currentTarget);\n\n  var relatedTarget = /** @type {Node} */ (e.relatedTarget);\n  if (relatedTarget) {\n    // There's a bug in FireFox where sometimes, relatedTarget will be a\n    // chrome element, and accessing any property of it will get a permission\n    // denied exception. See:\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=497780\n    if (goog.userAgent.GECKO) {\n      if (!goog.reflect.canAccessProperty(relatedTarget, 'nodeName')) {\n        relatedTarget = null;\n      }\n    }\n  } else if (type == goog.events.EventType.MOUSEOVER) {\n    relatedTarget = e.fromElement;\n  } else if (type == goog.events.EventType.MOUSEOUT) {\n    relatedTarget = e.toElement;\n  }\n\n  this.relatedTarget = relatedTarget;\n\n  if (!goog.isNull(relevantTouch)) {\n    this.clientX = relevantTouch.clientX !== undefined ? relevantTouch.clientX :\n                                                         relevantTouch.pageX;\n    this.clientY = relevantTouch.clientY !== undefined ? relevantTouch.clientY :\n                                                         relevantTouch.pageY;\n    this.screenX = relevantTouch.screenX || 0;\n    this.screenY = relevantTouch.screenY || 0;\n  } else {\n    // Webkit emits a lame warning whenever layerX/layerY is accessed.\n    // http://code.google.com/p/chromium/issues/detail?id=101733\n    this.offsetX = (goog.userAgent.WEBKIT || e.offsetX !== undefined) ?\n        e.offsetX :\n        e.layerX;\n    this.offsetY = (goog.userAgent.WEBKIT || e.offsetY !== undefined) ?\n        e.offsetY :\n        e.layerY;\n    this.clientX = e.clientX !== undefined ? e.clientX : e.pageX;\n    this.clientY = e.clientY !== undefined ? e.clientY : e.pageY;\n    this.screenX = e.screenX || 0;\n    this.screenY = e.screenY || 0;\n  }\n\n  this.button = e.button;\n\n  this.keyCode = e.keyCode || 0;\n  this.key = e.key || '';\n  this.charCode = e.charCode || (type == 'keypress' ? e.keyCode : 0);\n  this.ctrlKey = e.ctrlKey;\n  this.altKey = e.altKey;\n  this.shiftKey = e.shiftKey;\n  this.metaKey = e.metaKey;\n  this.platformModifierKey = goog.userAgent.MAC ? e.metaKey : e.ctrlKey;\n  this.pointerId = e.pointerId || 0;\n  this.pointerType = goog.events.BrowserEvent.getPointerType_(e);\n  this.state = e.state;\n  this.event_ = e;\n  if (e.defaultPrevented) {\n    this.preventDefault();\n  }\n};\n\n\n/**\n * Tests to see which button was pressed during the event. This is really only\n * useful in IE and Gecko browsers. And in IE, it's only useful for\n * mousedown/mouseup events, because click only fires for the left mouse button.\n *\n * Safari 2 only reports the left button being clicked, and uses the value '1'\n * instead of 0. Opera only reports a mousedown event for the middle button, and\n * no mouse events for the right button. Opera has default behavior for left and\n * middle click that can only be overridden via a configuration setting.\n *\n * There's a nice table of this mess at http://www.unixpapa.com/js/mouse.html.\n *\n * @param {goog.events.BrowserEvent.MouseButton} button The button\n *     to test for.\n * @return {boolean} True if button was pressed.\n */\ngoog.events.BrowserEvent.prototype.isButton = function(button) {\n  if (!goog.events.BrowserFeature.HAS_W3C_BUTTON) {\n    if (this.type == 'click') {\n      return button == goog.events.BrowserEvent.MouseButton.LEFT;\n    } else {\n      return !!(\n          this.event_.button & goog.events.BrowserEvent.IE_BUTTON_MAP[button]);\n    }\n  } else {\n    return this.event_.button == button;\n  }\n};\n\n\n/**\n * Whether this has an \"action\"-producing mouse button.\n *\n * By definition, this includes left-click on windows/linux, and left-click\n * without the ctrl key on Macs.\n *\n * @return {boolean} The result.\n */\ngoog.events.BrowserEvent.prototype.isMouseActionButton = function() {\n  // Webkit does not ctrl+click to be a right-click, so we\n  // normalize it to behave like Gecko and Opera.\n  return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT) &&\n      !(goog.userAgent.WEBKIT && goog.userAgent.MAC && this.ctrlKey);\n};\n\n\n/**\n * @override\n */\ngoog.events.BrowserEvent.prototype.stopPropagation = function() {\n  goog.events.BrowserEvent.superClass_.stopPropagation.call(this);\n  if (this.event_.stopPropagation) {\n    this.event_.stopPropagation();\n  } else {\n    this.event_.cancelBubble = true;\n  }\n};\n\n\n/**\n * @override\n */\ngoog.events.BrowserEvent.prototype.preventDefault = function() {\n  goog.events.BrowserEvent.superClass_.preventDefault.call(this);\n  var be = this.event_;\n  if (!be.preventDefault) {\n    be.returnValue = false;\n    if (goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT) {\n\n      try {\n        // Most keys can be prevented using returnValue. Some special keys\n        // require setting the keyCode to -1 as well:\n        //\n        // In IE7:\n        // F3, F5, F10, F11, Ctrl+P, Crtl+O, Ctrl+F (these are taken from IE6)\n        //\n        // In IE8:\n        // Ctrl+P, Crtl+O, Ctrl+F (F1-F12 cannot be stopped through the event)\n        //\n        // We therefore do this for all function keys as well as when Ctrl key\n        // is pressed.\n        var VK_F1 = 112;\n        var VK_F12 = 123;\n        if (be.ctrlKey || be.keyCode >= VK_F1 && be.keyCode <= VK_F12) {\n          be.keyCode = -1;\n        }\n      } catch (ex) {\n        // IE throws an 'access denied' exception when trying to change\n        // keyCode in some situations (e.g. srcElement is input[type=file],\n        // or srcElement is an anchor tag rewritten by parent's innerHTML).\n        // Do nothing in this case.\n      }\n    }\n  } else {\n    be.preventDefault();\n  }\n};\n\n\n/**\n * @return {Event} The underlying browser event object.\n */\ngoog.events.BrowserEvent.prototype.getBrowserEvent = function() {\n  return this.event_;\n};\n\n\n/**\n * Extracts the pointer type from the given event.\n * @param {!Event} e\n * @return {string} The pointer type, e.g. 'mouse', 'pen', or 'touch'.\n * @private\n */\ngoog.events.BrowserEvent.getPointerType_ = function(e) {\n  if (goog.isString(e.pointerType)) {\n    return e.pointerType;\n  }\n  // IE10 uses integer codes for pointer type.\n  // https://msdn.microsoft.com/en-us/library/hh772359(v=vs.85).aspx\n  return goog.events.BrowserEvent.IE_POINTER_TYPE_MAP[e.pointerType] || '';\n};\n","// Copyright 2012 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview An interface for a listenable JavaScript object.\n * @author chrishenry@google.com (Chris Henry)\n */\n\ngoog.provide('goog.events.Listenable');\ngoog.provide('goog.events.ListenableKey');\n\n/** @suppress {extraRequire} */\ngoog.require('goog.events.EventId');\n\ngoog.forwardDeclare('goog.events.EventLike');\ngoog.forwardDeclare('goog.events.EventTarget');\n\n\n\n/**\n * A listenable interface. A listenable is an object with the ability\n * to dispatch/broadcast events to \"event listeners\" registered via\n * listen/listenOnce.\n *\n * The interface allows for an event propagation mechanism similar\n * to one offered by native browser event targets, such as\n * capture/bubble mechanism, stopping propagation, and preventing\n * default actions. Capture/bubble mechanism depends on the ancestor\n * tree constructed via `#getParentEventTarget`; this tree\n * must be directed acyclic graph. The meaning of default action(s)\n * in preventDefault is specific to a particular use case.\n *\n * Implementations that do not support capture/bubble or can not have\n * a parent listenable can simply not implement any ability to set the\n * parent listenable (and have `#getParentEventTarget` return\n * null).\n *\n * Implementation of this class can be used with or independently from\n * goog.events.\n *\n * Implementation must call `#addImplementation(implClass)`.\n *\n * @interface\n * @see goog.events\n * @see http://www.w3.org/TR/DOM-Level-2-Events/events.html\n */\ngoog.events.Listenable = function() {};\n\n\n/**\n * An expando property to indicate that an object implements\n * goog.events.Listenable.\n *\n * See addImplementation/isImplementedBy.\n *\n * @type {string}\n * @const\n */\ngoog.events.Listenable.IMPLEMENTED_BY_PROP =\n    'closure_listenable_' + ((Math.random() * 1e6) | 0);\n\n\n/**\n * Marks a given class (constructor) as an implementation of\n * Listenable, so that we can query that fact at runtime. The class\n * must have already implemented the interface.\n * @param {function(new:goog.events.Listenable,...)} cls The class constructor.\n *     The corresponding class must have already implemented the interface.\n */\ngoog.events.Listenable.addImplementation = function(cls) {\n  cls.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP] = true;\n};\n\n\n/**\n * @param {Object} obj The object to check.\n * @return {boolean} Whether a given instance implements Listenable. The\n *     class/superclass of the instance must call addImplementation.\n */\ngoog.events.Listenable.isImplementedBy = function(obj) {\n  return !!(obj && obj[goog.events.Listenable.IMPLEMENTED_BY_PROP]);\n};\n\n\n/**\n * Adds an event listener. A listener can only be added once to an\n * object and if it is added again the key for the listener is\n * returned. Note that if the existing listener is a one-off listener\n * (registered via listenOnce), it will no longer be a one-off\n * listener after a call to listen().\n *\n * @param {string|!goog.events.EventId<EVENTOBJ>} type The event type id.\n * @param {function(this:SCOPE, EVENTOBJ):(boolean|undefined)} listener Callback\n *     method.\n * @param {boolean=} opt_useCapture Whether to fire in capture phase\n *     (defaults to false).\n * @param {SCOPE=} opt_listenerScope Object in whose scope to call the\n *     listener.\n * @return {!goog.events.ListenableKey} Unique key for the listener.\n * @template SCOPE,EVENTOBJ\n */\ngoog.events.Listenable.prototype.listen;\n\n\n/**\n * Adds an event listener that is removed automatically after the\n * listener fired once.\n *\n * If an existing listener already exists, listenOnce will do\n * nothing. In particular, if the listener was previously registered\n * via listen(), listenOnce() will not turn the listener into a\n * one-off listener. Similarly, if there is already an existing\n * one-off listener, listenOnce does not modify the listeners (it is\n * still a once listener).\n *\n * @param {string|!goog.events.EventId<EVENTOBJ>} type The event type id.\n * @param {function(this:SCOPE, EVENTOBJ):(boolean|undefined)} listener Callback\n *     method.\n * @param {boolean=} opt_useCapture Whether to fire in capture phase\n *     (defaults to false).\n * @param {SCOPE=} opt_listenerScope Object in whose scope to call the\n *     listener.\n * @return {!goog.events.ListenableKey} Unique key for the listener.\n * @template SCOPE,EVENTOBJ\n */\ngoog.events.Listenable.prototype.listenOnce;\n\n\n/**\n * Removes an event listener which was added with listen() or listenOnce().\n *\n * @param {string|!goog.events.EventId<EVENTOBJ>} type The event type id.\n * @param {function(this:SCOPE, EVENTOBJ):(boolean|undefined)} listener Callback\n *     method.\n * @param {boolean=} opt_useCapture Whether to fire in capture phase\n *     (defaults to false).\n * @param {SCOPE=} opt_listenerScope Object in whose scope to call\n *     the listener.\n * @return {boolean} Whether any listener was removed.\n * @template SCOPE,EVENTOBJ\n */\ngoog.events.Listenable.prototype.unlisten;\n\n\n/**\n * Removes an event listener which was added with listen() by the key\n * returned by listen().\n *\n * @param {!goog.events.ListenableKey} key The key returned by\n *     listen() or listenOnce().\n * @return {boolean} Whether any listener was removed.\n */\ngoog.events.Listenable.prototype.unlistenByKey;\n\n\n/**\n * Dispatches an event (or event like object) and calls all listeners\n * listening for events of this type. The type of the event is decided by the\n * type property on the event object.\n *\n * If any of the listeners returns false OR calls preventDefault then this\n * function will return false.  If one of the capture listeners calls\n * stopPropagation, then the bubble listeners won't fire.\n *\n * @param {goog.events.EventLike} e Event object.\n * @return {boolean} If anyone called preventDefault on the event object (or\n *     if any of the listeners returns false) this will also return false.\n */\ngoog.events.Listenable.prototype.dispatchEvent;\n\n\n/**\n * Removes all listeners from this listenable. If type is specified,\n * it will only remove listeners of the particular type. otherwise all\n * registered listeners will be removed.\n *\n * @param {string=} opt_type Type of event to remove, default is to\n *     remove all types.\n * @return {number} Number of listeners removed.\n */\ngoog.events.Listenable.prototype.removeAllListeners;\n\n\n/**\n * Returns the parent of this event target to use for capture/bubble\n * mechanism.\n *\n * NOTE(chrishenry): The name reflects the original implementation of\n * custom event target (`goog.events.EventTarget`). We decided\n * that changing the name is not worth it.\n *\n * @return {goog.events.Listenable} The parent EventTarget or null if\n *     there is no parent.\n */\ngoog.events.Listenable.prototype.getParentEventTarget;\n\n\n/**\n * Fires all registered listeners in this listenable for the given\n * type and capture mode, passing them the given eventObject. This\n * does not perform actual capture/bubble. Only implementors of the\n * interface should be using this.\n *\n * @param {string|!goog.events.EventId<EVENTOBJ>} type The type of the\n *     listeners to fire.\n * @param {boolean} capture The capture mode of the listeners to fire.\n * @param {EVENTOBJ} eventObject The event object to fire.\n * @return {boolean} Whether all listeners succeeded without\n *     attempting to prevent default behavior. If any listener returns\n *     false or called goog.events.Event#preventDefault, this returns\n *     false.\n * @template EVENTOBJ\n */\ngoog.events.Listenable.prototype.fireListeners;\n\n\n/**\n * Gets all listeners in this listenable for the given type and\n * capture mode.\n *\n * @param {string|!goog.events.EventId} type The type of the listeners to fire.\n * @param {boolean} capture The capture mode of the listeners to fire.\n * @return {!Array<!goog.events.ListenableKey>} An array of registered\n *     listeners.\n * @template EVENTOBJ\n */\ngoog.events.Listenable.prototype.getListeners;\n\n\n/**\n * Gets the goog.events.ListenableKey for the event or null if no such\n * listener is in use.\n *\n * @param {string|!goog.events.EventId<EVENTOBJ>} type The name of the event\n *     without the 'on' prefix.\n * @param {function(this:SCOPE, EVENTOBJ):(boolean|undefined)} listener The\n *     listener function to get.\n * @param {boolean} capture Whether the listener is a capturing listener.\n * @param {SCOPE=} opt_listenerScope Object in whose scope to call the\n *     listener.\n * @return {goog.events.ListenableKey} the found listener or null if not found.\n * @template SCOPE,EVENTOBJ\n */\ngoog.events.Listenable.prototype.getListener;\n\n\n/**\n * Whether there is any active listeners matching the specified\n * signature. If either the type or capture parameters are\n * unspecified, the function will match on the remaining criteria.\n *\n * @param {string|!goog.events.EventId<EVENTOBJ>=} opt_type Event type.\n * @param {boolean=} opt_capture Whether to check for capture or bubble\n *     listeners.\n * @return {boolean} Whether there is any active listeners matching\n *     the requested type and/or capture phase.\n * @template EVENTOBJ\n */\ngoog.events.Listenable.prototype.hasListener;\n\n\n\n/**\n * An interface that describes a single registered listener.\n * @interface\n */\ngoog.events.ListenableKey = function() {};\n\n\n/**\n * Counter used to create a unique key\n * @type {number}\n * @private\n */\ngoog.events.ListenableKey.counter_ = 0;\n\n\n/**\n * Reserves a key to be used for ListenableKey#key field.\n * @return {number} A number to be used to fill ListenableKey#key\n *     field.\n */\ngoog.events.ListenableKey.reserveKey = function() {\n  return ++goog.events.ListenableKey.counter_;\n};\n\n\n/**\n * The source event target.\n * @type {Object|goog.events.Listenable|goog.events.EventTarget}\n */\ngoog.events.ListenableKey.prototype.src;\n\n\n/**\n * The event type the listener is listening to.\n * @type {string}\n */\ngoog.events.ListenableKey.prototype.type;\n\n\n/**\n * The listener function.\n * @type {function(?):?|{handleEvent:function(?):?}|null}\n */\ngoog.events.ListenableKey.prototype.listener;\n\n\n/**\n * Whether the listener works on capture phase.\n * @type {boolean}\n */\ngoog.events.ListenableKey.prototype.capture;\n\n\n/**\n * The 'this' object for the listener function's scope.\n * @type {Object|undefined}\n */\ngoog.events.ListenableKey.prototype.handler;\n\n\n/**\n * A globally unique number to identify the key.\n * @type {number}\n */\ngoog.events.ListenableKey.prototype.key;\n","// Copyright 2005 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Listener object.\n * @see ../demos/events.html\n */\n\ngoog.provide('goog.events.Listener');\n\ngoog.require('goog.events.ListenableKey');\n\n\n\n/**\n * Simple class that stores information about a listener\n * @param {function(?):?} listener Callback function.\n * @param {Function} proxy Wrapper for the listener that patches the event.\n * @param {EventTarget|goog.events.Listenable} src Source object for\n *     the event.\n * @param {string} type Event type.\n * @param {boolean} capture Whether in capture or bubble phase.\n * @param {Object=} opt_handler Object in whose context to execute the callback.\n * @implements {goog.events.ListenableKey}\n * @constructor\n */\ngoog.events.Listener = function(\n    listener, proxy, src, type, capture, opt_handler) {\n  if (goog.events.Listener.ENABLE_MONITORING) {\n    this.creationStack = new Error().stack;\n  }\n\n  /** @override */\n  this.listener = listener;\n\n  /**\n   * A wrapper over the original listener. This is used solely to\n   * handle native browser events (it is used to simulate the capture\n   * phase and to patch the event object).\n   * @type {Function}\n   */\n  this.proxy = proxy;\n\n  /**\n   * Object or node that callback is listening to\n   * @type {EventTarget|goog.events.Listenable}\n   */\n  this.src = src;\n\n  /**\n   * The event type.\n   * @const {string}\n   */\n  this.type = type;\n\n  /**\n   * Whether the listener is being called in the capture or bubble phase\n   * @const {boolean}\n   */\n  this.capture = !!capture;\n\n  /**\n   * Optional object whose context to execute the listener in\n   * @type {Object|undefined}\n   */\n  this.handler = opt_handler;\n\n  /**\n   * The key of the listener.\n   * @const {number}\n   * @override\n   */\n  this.key = goog.events.ListenableKey.reserveKey();\n\n  /**\n   * Whether to remove the listener after it has been called.\n   * @type {boolean}\n   */\n  this.callOnce = false;\n\n  /**\n   * Whether the listener has been removed.\n   * @type {boolean}\n   */\n  this.removed = false;\n};\n\n\n/**\n * @define {boolean} Whether to enable the monitoring of the\n *     goog.events.Listener instances. Switching on the monitoring is only\n *     recommended for debugging because it has a significant impact on\n *     performance and memory usage. If switched off, the monitoring code\n *     compiles down to 0 bytes.\n */\ngoog.define('goog.events.Listener.ENABLE_MONITORING', false);\n\n\n/**\n * If monitoring the goog.events.Listener instances is enabled, stores the\n * creation stack trace of the Disposable instance.\n * @type {string}\n */\ngoog.events.Listener.prototype.creationStack;\n\n\n/**\n * Marks this listener as removed. This also remove references held by\n * this listener object (such as listener and event source).\n */\ngoog.events.Listener.prototype.markAsRemoved = function() {\n  this.removed = true;\n  this.listener = null;\n  this.proxy = null;\n  this.src = null;\n  this.handler = null;\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview A map of listeners that provides utility functions to\n * deal with listeners on an event target. Used by\n * `goog.events.EventTarget`.\n *\n * WARNING: Do not use this class from outside goog.events package.\n */\n\ngoog.provide('goog.events.ListenerMap');\n\ngoog.require('goog.array');\ngoog.require('goog.events.Listener');\ngoog.require('goog.object');\n\n\n\n/**\n * Creates a new listener map.\n * @param {EventTarget|goog.events.Listenable} src The src object.\n * @constructor\n * @final\n */\ngoog.events.ListenerMap = function(src) {\n  /** @type {EventTarget|goog.events.Listenable} */\n  this.src = src;\n\n  /**\n   * Maps of event type to an array of listeners.\n   * @type {!Object<string, !Array<!goog.events.Listener>>}\n   */\n  this.listeners = {};\n\n  /**\n   * The count of types in this map that have registered listeners.\n   * @private {number}\n   */\n  this.typeCount_ = 0;\n};\n\n\n/**\n * @return {number} The count of event types in this map that actually\n *     have registered listeners.\n */\ngoog.events.ListenerMap.prototype.getTypeCount = function() {\n  return this.typeCount_;\n};\n\n\n/**\n * @return {number} Total number of registered listeners.\n */\ngoog.events.ListenerMap.prototype.getListenerCount = function() {\n  var count = 0;\n  for (var type in this.listeners) {\n    count += this.listeners[type].length;\n  }\n  return count;\n};\n\n\n/**\n * Adds an event listener. A listener can only be added once to an\n * object and if it is added again the key for the listener is\n * returned.\n *\n * Note that a one-off listener will not change an existing listener,\n * if any. On the other hand a normal listener will change existing\n * one-off listener to become a normal listener.\n *\n * @param {string|!goog.events.EventId} type The listener event type.\n * @param {!Function} listener This listener callback method.\n * @param {boolean} callOnce Whether the listener is a one-off\n *     listener.\n * @param {boolean=} opt_useCapture The capture mode of the listener.\n * @param {Object=} opt_listenerScope Object in whose scope to call the\n *     listener.\n * @return {!goog.events.ListenableKey} Unique key for the listener.\n */\ngoog.events.ListenerMap.prototype.add = function(\n    type, listener, callOnce, opt_useCapture, opt_listenerScope) {\n  var typeStr = type.toString();\n  var listenerArray = this.listeners[typeStr];\n  if (!listenerArray) {\n    listenerArray = this.listeners[typeStr] = [];\n    this.typeCount_++;\n  }\n\n  var listenerObj;\n  var index = goog.events.ListenerMap.findListenerIndex_(\n      listenerArray, listener, opt_useCapture, opt_listenerScope);\n  if (index > -1) {\n    listenerObj = listenerArray[index];\n    if (!callOnce) {\n      // Ensure that, if there is an existing callOnce listener, it is no\n      // longer a callOnce listener.\n      listenerObj.callOnce = false;\n    }\n  } else {\n    listenerObj = new goog.events.Listener(\n        listener, null, this.src, typeStr, !!opt_useCapture, opt_listenerScope);\n    listenerObj.callOnce = callOnce;\n    listenerArray.push(listenerObj);\n  }\n  return listenerObj;\n};\n\n\n/**\n * Removes a matching listener.\n * @param {string|!goog.events.EventId} type The listener event type.\n * @param {!Function} listener This listener callback method.\n * @param {boolean=} opt_useCapture The capture mode of the listener.\n * @param {Object=} opt_listenerScope Object in whose scope to call the\n *     listener.\n * @return {boolean} Whether any listener was removed.\n */\ngoog.events.ListenerMap.prototype.remove = function(\n    type, listener, opt_useCapture, opt_listenerScope) {\n  var typeStr = type.toString();\n  if (!(typeStr in this.listeners)) {\n    return false;\n  }\n\n  var listenerArray = this.listeners[typeStr];\n  var index = goog.events.ListenerMap.findListenerIndex_(\n      listenerArray, listener, opt_useCapture, opt_listenerScope);\n  if (index > -1) {\n    var listenerObj = listenerArray[index];\n    listenerObj.markAsRemoved();\n    goog.array.removeAt(listenerArray, index);\n    if (listenerArray.length == 0) {\n      delete this.listeners[typeStr];\n      this.typeCount_--;\n    }\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * Removes the given listener object.\n * @param {!goog.events.ListenableKey} listener The listener to remove.\n * @return {boolean} Whether the listener is removed.\n */\ngoog.events.ListenerMap.prototype.removeByKey = function(listener) {\n  var type = listener.type;\n  if (!(type in this.listeners)) {\n    return false;\n  }\n\n  var removed = goog.array.remove(this.listeners[type], listener);\n  if (removed) {\n    /** @type {!goog.events.Listener} */ (listener).markAsRemoved();\n    if (this.listeners[type].length == 0) {\n      delete this.listeners[type];\n      this.typeCount_--;\n    }\n  }\n  return removed;\n};\n\n\n/**\n * Removes all listeners from this map. If opt_type is provided, only\n * listeners that match the given type are removed.\n * @param {string|!goog.events.EventId=} opt_type Type of event to remove.\n * @return {number} Number of listeners removed.\n */\ngoog.events.ListenerMap.prototype.removeAll = function(opt_type) {\n  var typeStr = opt_type && opt_type.toString();\n  var count = 0;\n  for (var type in this.listeners) {\n    if (!typeStr || type == typeStr) {\n      var listenerArray = this.listeners[type];\n      for (var i = 0; i < listenerArray.length; i++) {\n        ++count;\n        listenerArray[i].markAsRemoved();\n      }\n      delete this.listeners[type];\n      this.typeCount_--;\n    }\n  }\n  return count;\n};\n\n\n/**\n * Gets all listeners that match the given type and capture mode. The\n * returned array is a copy (but the listener objects are not).\n * @param {string|!goog.events.EventId} type The type of the listeners\n *     to retrieve.\n * @param {boolean} capture The capture mode of the listeners to retrieve.\n * @return {!Array<!goog.events.ListenableKey>} An array of matching\n *     listeners.\n */\ngoog.events.ListenerMap.prototype.getListeners = function(type, capture) {\n  var listenerArray = this.listeners[type.toString()];\n  var rv = [];\n  if (listenerArray) {\n    for (var i = 0; i < listenerArray.length; ++i) {\n      var listenerObj = listenerArray[i];\n      if (listenerObj.capture == capture) {\n        rv.push(listenerObj);\n      }\n    }\n  }\n  return rv;\n};\n\n\n/**\n * Gets the goog.events.ListenableKey for the event or null if no such\n * listener is in use.\n *\n * @param {string|!goog.events.EventId} type The type of the listener\n *     to retrieve.\n * @param {!Function} listener The listener function to get.\n * @param {boolean} capture Whether the listener is a capturing listener.\n * @param {Object=} opt_listenerScope Object in whose scope to call the\n *     listener.\n * @return {goog.events.ListenableKey} the found listener or null if not found.\n */\ngoog.events.ListenerMap.prototype.getListener = function(\n    type, listener, capture, opt_listenerScope) {\n  var listenerArray = this.listeners[type.toString()];\n  var i = -1;\n  if (listenerArray) {\n    i = goog.events.ListenerMap.findListenerIndex_(\n        listenerArray, listener, capture, opt_listenerScope);\n  }\n  return i > -1 ? listenerArray[i] : null;\n};\n\n\n/**\n * Whether there is a matching listener. If either the type or capture\n * parameters are unspecified, the function will match on the\n * remaining criteria.\n *\n * @param {string|!goog.events.EventId=} opt_type The type of the listener.\n * @param {boolean=} opt_capture The capture mode of the listener.\n * @return {boolean} Whether there is an active listener matching\n *     the requested type and/or capture phase.\n */\ngoog.events.ListenerMap.prototype.hasListener = function(\n    opt_type, opt_capture) {\n  var hasType = goog.isDef(opt_type);\n  var typeStr = hasType ? opt_type.toString() : '';\n  var hasCapture = goog.isDef(opt_capture);\n\n  return goog.object.some(this.listeners, function(listenerArray, type) {\n    for (var i = 0; i < listenerArray.length; ++i) {\n      if ((!hasType || listenerArray[i].type == typeStr) &&\n          (!hasCapture || listenerArray[i].capture == opt_capture)) {\n        return true;\n      }\n    }\n\n    return false;\n  });\n};\n\n\n/**\n * Finds the index of a matching goog.events.Listener in the given\n * listenerArray.\n * @param {!Array<!goog.events.Listener>} listenerArray Array of listener.\n * @param {!Function} listener The listener function.\n * @param {boolean=} opt_useCapture The capture flag for the listener.\n * @param {Object=} opt_listenerScope The listener scope.\n * @return {number} The index of the matching listener within the\n *     listenerArray.\n * @private\n */\ngoog.events.ListenerMap.findListenerIndex_ = function(\n    listenerArray, listener, opt_useCapture, opt_listenerScope) {\n  for (var i = 0; i < listenerArray.length; ++i) {\n    var listenerObj = listenerArray[i];\n    if (!listenerObj.removed && listenerObj.listener == listener &&\n        listenerObj.capture == !!opt_useCapture &&\n        listenerObj.handler == opt_listenerScope) {\n      return i;\n    }\n  }\n  return -1;\n};\n","// Copyright 2005 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview An event manager for both native browser event\n * targets and custom JavaScript event targets\n * (`goog.events.Listenable`). This provides an abstraction\n * over browsers' event systems.\n *\n * It also provides a simulation of W3C event model's capture phase in\n * Internet Explorer (IE 8 and below). Caveat: the simulation does not\n * interact well with listeners registered directly on the elements\n * (bypassing goog.events) or even with listeners registered via\n * goog.events in a separate JS binary. In these cases, we provide\n * no ordering guarantees.\n *\n * The listeners will receive a \"patched\" event object. Such event object\n * contains normalized values for certain event properties that differs in\n * different browsers.\n *\n * Example usage:\n * <pre>\n * goog.events.listen(myNode, 'click', function(e) { alert('woo') });\n * goog.events.listen(myNode, 'mouseover', mouseHandler, true);\n * goog.events.unlisten(myNode, 'mouseover', mouseHandler, true);\n * goog.events.removeAll(myNode);\n * </pre>\n *\n *                                            in IE and event object patching]\n * @author arv@google.com (Erik Arvidsson)\n *\n * @see ../demos/events.html\n * @see ../demos/event-propagation.html\n * @see ../demos/stopevent.html\n */\n\n// IMPLEMENTATION NOTES:\n// goog.events stores an auxiliary data structure on each EventTarget\n// source being listened on. This allows us to take advantage of GC,\n// having the data structure GC'd when the EventTarget is GC'd. This\n// GC behavior is equivalent to using W3C DOM Events directly.\n\ngoog.provide('goog.events');\ngoog.provide('goog.events.CaptureSimulationMode');\ngoog.provide('goog.events.Key');\ngoog.provide('goog.events.ListenableType');\n\ngoog.require('goog.asserts');\ngoog.require('goog.debug.entryPointRegistry');\ngoog.require('goog.events.BrowserEvent');\ngoog.require('goog.events.BrowserFeature');\ngoog.require('goog.events.Listenable');\ngoog.require('goog.events.ListenerMap');\n\ngoog.forwardDeclare('goog.debug.ErrorHandler');\ngoog.forwardDeclare('goog.events.EventWrapper');\n\n\n/**\n * @typedef {number|goog.events.ListenableKey}\n */\ngoog.events.Key;\n\n\n/**\n * @typedef {EventTarget|goog.events.Listenable}\n */\ngoog.events.ListenableType;\n\n\n/**\n * Property name on a native event target for the listener map\n * associated with the event target.\n * @private @const {string}\n */\ngoog.events.LISTENER_MAP_PROP_ = 'closure_lm_' + ((Math.random() * 1e6) | 0);\n\n\n/**\n * String used to prepend to IE event types.\n * @const\n * @private\n */\ngoog.events.onString_ = 'on';\n\n\n/**\n * Map of computed \"on<eventname>\" strings for IE event types. Caching\n * this removes an extra object allocation in goog.events.listen which\n * improves IE6 performance.\n * @const\n * @dict\n * @private\n */\ngoog.events.onStringMap_ = {};\n\n\n/**\n * @enum {number} Different capture simulation mode for IE8-.\n */\ngoog.events.CaptureSimulationMode = {\n  /**\n   * Does not perform capture simulation. Will asserts in IE8- when you\n   * add capture listeners.\n   */\n  OFF_AND_FAIL: 0,\n\n  /**\n   * Does not perform capture simulation, silently ignore capture\n   * listeners.\n   */\n  OFF_AND_SILENT: 1,\n\n  /**\n   * Performs capture simulation.\n   */\n  ON: 2\n};\n\n\n/**\n * @define {number} The capture simulation mode for IE8-. By default,\n *     this is ON.\n */\ngoog.define('goog.events.CAPTURE_SIMULATION_MODE', 2);\n\n\n/**\n * Estimated count of total native listeners.\n * @private {number}\n */\ngoog.events.listenerCountEstimate_ = 0;\n\n\n/**\n * Adds an event listener for a specific event on a native event\n * target (such as a DOM element) or an object that has implemented\n * {@link goog.events.Listenable}. A listener can only be added once\n * to an object and if it is added again the key for the listener is\n * returned. Note that if the existing listener is a one-off listener\n * (registered via listenOnce), it will no longer be a one-off\n * listener after a call to listen().\n *\n * @param {EventTarget|goog.events.Listenable} src The node to listen\n *     to events on.\n * @param {string|Array<string>|\n *     !goog.events.EventId<EVENTOBJ>|!Array<!goog.events.EventId<EVENTOBJ>>}\n *     type Event type or array of event types.\n * @param {function(this:T, EVENTOBJ):?|{handleEvent:function(?):?}|null}\n *     listener Callback method, or an object with a handleEvent function.\n *     WARNING: passing an Object is now softly deprecated.\n * @param {(boolean|!AddEventListenerOptions)=} opt_options\n * @param {T=} opt_handler Element in whose scope to call the listener.\n * @return {goog.events.Key} Unique key for the listener.\n * @template T,EVENTOBJ\n */\ngoog.events.listen = function(src, type, listener, opt_options, opt_handler) {\n  if (opt_options && opt_options.once) {\n    return goog.events.listenOnce(\n        src, type, listener, opt_options, opt_handler);\n  }\n  if (goog.isArray(type)) {\n    for (var i = 0; i < type.length; i++) {\n      goog.events.listen(src, type[i], listener, opt_options, opt_handler);\n    }\n    return null;\n  }\n\n  listener = goog.events.wrapListener(listener);\n  if (goog.events.Listenable.isImplementedBy(src)) {\n    var capture =\n        goog.isObject(opt_options) ? !!opt_options.capture : !!opt_options;\n    return src.listen(\n        /** @type {string|!goog.events.EventId} */ (type), listener, capture,\n        opt_handler);\n  } else {\n    return goog.events.listen_(\n        /** @type {!EventTarget} */ (src), type, listener,\n        /* callOnce */ false, opt_options, opt_handler);\n  }\n};\n\n\n/**\n * Adds an event listener for a specific event on a native event\n * target. A listener can only be added once to an object and if it\n * is added again the key for the listener is returned.\n *\n * Note that a one-off listener will not change an existing listener,\n * if any. On the other hand a normal listener will change existing\n * one-off listener to become a normal listener.\n *\n * @param {EventTarget} src The node to listen to events on.\n * @param {string|?goog.events.EventId<EVENTOBJ>} type Event type.\n * @param {!Function} listener Callback function.\n * @param {boolean} callOnce Whether the listener is a one-off\n *     listener or otherwise.\n * @param {(boolean|!AddEventListenerOptions)=} opt_options\n * @param {Object=} opt_handler Element in whose scope to call the listener.\n * @return {goog.events.ListenableKey} Unique key for the listener.\n * @template EVENTOBJ\n * @private\n */\ngoog.events.listen_ = function(\n    src, type, listener, callOnce, opt_options, opt_handler) {\n  if (!type) {\n    throw new Error('Invalid event type');\n  }\n\n  var capture =\n      goog.isObject(opt_options) ? !!opt_options.capture : !!opt_options;\n  if (capture && !goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT) {\n    if (goog.events.CAPTURE_SIMULATION_MODE ==\n        goog.events.CaptureSimulationMode.OFF_AND_FAIL) {\n      goog.asserts.fail('Can not register capture listener in IE8-.');\n      return null;\n    } else if (\n        goog.events.CAPTURE_SIMULATION_MODE ==\n        goog.events.CaptureSimulationMode.OFF_AND_SILENT) {\n      return null;\n    }\n  }\n\n  var listenerMap = goog.events.getListenerMap_(src);\n  if (!listenerMap) {\n    src[goog.events.LISTENER_MAP_PROP_] = listenerMap =\n        new goog.events.ListenerMap(src);\n  }\n\n  var listenerObj = /** @type {goog.events.Listener} */ (\n      listenerMap.add(type, listener, callOnce, capture, opt_handler));\n\n  // If the listenerObj already has a proxy, it has been set up\n  // previously. We simply return.\n  if (listenerObj.proxy) {\n    return listenerObj;\n  }\n\n  var proxy = goog.events.getProxy();\n  listenerObj.proxy = proxy;\n\n  proxy.src = src;\n  proxy.listener = listenerObj;\n\n  // Attach the proxy through the browser's API\n  if (src.addEventListener) {\n    // Don't pass an object as `capture` if the browser doesn't support that.\n    if (!goog.events.BrowserFeature.PASSIVE_EVENTS) {\n      opt_options = capture;\n    }\n    // Don't break tests that expect a boolean.\n    if (opt_options === undefined) opt_options = false;\n    src.addEventListener(type.toString(), proxy, opt_options);\n  } else if (src.attachEvent) {\n    // The else if above used to be an unconditional else. It would call\n    // exception on IE11, spoiling the day of some callers. The previous\n    // incarnation of this code, from 2007, indicates that it replaced an\n    // earlier still version that caused excess allocations on IE6.\n    src.attachEvent(goog.events.getOnString_(type.toString()), proxy);\n  } else if (src.addListener && src.removeListener) {\n    // In IE, MediaQueryList uses addListener() insteadd of addEventListener. In\n    // Safari, there is no global for the MediaQueryList constructor, so we just\n    // check whether the object \"looks like\" MediaQueryList.\n    goog.asserts.assert(\n        type === 'change', 'MediaQueryList only has a change event');\n    src.addListener(proxy);\n  } else {\n    throw new Error('addEventListener and attachEvent are unavailable.');\n  }\n\n  goog.events.listenerCountEstimate_++;\n  return listenerObj;\n};\n\n\n/**\n * Helper function for returning a proxy function.\n * @return {!Function} A new or reused function object.\n */\ngoog.events.getProxy = function() {\n  var proxyCallbackFunction = goog.events.handleBrowserEvent_;\n  // Use a local var f to prevent one allocation.\n  var f =\n      goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT ? function(eventObject) {\n        return proxyCallbackFunction.call(f.src, f.listener, eventObject);\n      } : function(eventObject) {\n        var v = proxyCallbackFunction.call(f.src, f.listener, eventObject);\n        // NOTE(chrishenry): In IE, we hack in a capture phase. However, if\n        // there is inline event handler which tries to prevent default (for\n        // example <a href=\"...\" onclick=\"return false\">...</a>) in a\n        // descendant element, the prevent default will be overridden\n        // by this listener if this listener were to return true. Hence, we\n        // return undefined.\n        if (!v) return v;\n      };\n  return f;\n};\n\n\n/**\n * Adds an event listener for a specific event on a native event\n * target (such as a DOM element) or an object that has implemented\n * {@link goog.events.Listenable}. After the event has fired the event\n * listener is removed from the target.\n *\n * If an existing listener already exists, listenOnce will do\n * nothing. In particular, if the listener was previously registered\n * via listen(), listenOnce() will not turn the listener into a\n * one-off listener. Similarly, if there is already an existing\n * one-off listener, listenOnce does not modify the listeners (it is\n * still a once listener).\n *\n * @param {EventTarget|goog.events.Listenable} src The node to listen\n *     to events on.\n * @param {string|Array<string>|\n *     !goog.events.EventId<EVENTOBJ>|!Array<!goog.events.EventId<EVENTOBJ>>}\n *     type Event type or array of event types.\n * @param {function(this:T, EVENTOBJ):?|{handleEvent:function(?):?}|null}\n *     listener Callback method.\n * @param {(boolean|!AddEventListenerOptions)=} opt_options\n * @param {T=} opt_handler Element in whose scope to call the listener.\n * @return {goog.events.Key} Unique key for the listener.\n * @template T,EVENTOBJ\n */\ngoog.events.listenOnce = function(\n    src, type, listener, opt_options, opt_handler) {\n  if (goog.isArray(type)) {\n    for (var i = 0; i < type.length; i++) {\n      goog.events.listenOnce(src, type[i], listener, opt_options, opt_handler);\n    }\n    return null;\n  }\n\n  listener = goog.events.wrapListener(listener);\n  if (goog.events.Listenable.isImplementedBy(src)) {\n    var capture =\n        goog.isObject(opt_options) ? !!opt_options.capture : !!opt_options;\n    return src.listenOnce(\n        /** @type {string|!goog.events.EventId} */ (type), listener, capture,\n        opt_handler);\n  } else {\n    return goog.events.listen_(\n        /** @type {!EventTarget} */ (src), type, listener,\n        /* callOnce */ true, opt_options, opt_handler);\n  }\n};\n\n\n/**\n * Adds an event listener with a specific event wrapper on a DOM Node or an\n * object that has implemented {@link goog.events.Listenable}. A listener can\n * only be added once to an object.\n *\n * @param {EventTarget|goog.events.Listenable} src The target to\n *     listen to events on.\n * @param {goog.events.EventWrapper} wrapper Event wrapper to use.\n * @param {function(this:T, ?):?|{handleEvent:function(?):?}|null} listener\n *     Callback method, or an object with a handleEvent function.\n * @param {boolean=} opt_capt Whether to fire in capture phase (defaults to\n *     false).\n * @param {T=} opt_handler Element in whose scope to call the listener.\n * @template T\n */\ngoog.events.listenWithWrapper = function(\n    src, wrapper, listener, opt_capt, opt_handler) {\n  wrapper.listen(src, listener, opt_capt, opt_handler);\n};\n\n\n/**\n * Removes an event listener which was added with listen().\n *\n * @param {EventTarget|goog.events.Listenable} src The target to stop\n *     listening to events on.\n * @param {string|Array<string>|\n *     !goog.events.EventId<EVENTOBJ>|!Array<!goog.events.EventId<EVENTOBJ>>}\n *     type Event type or array of event types to unlisten to.\n * @param {function(?):?|{handleEvent:function(?):?}|null} listener The\n *     listener function to remove.\n * @param {(boolean|!EventListenerOptions)=} opt_options\n *     whether the listener is fired during the capture or bubble phase of the\n *     event.\n * @param {Object=} opt_handler Element in whose scope to call the listener.\n * @return {?boolean} indicating whether the listener was there to remove.\n * @template EVENTOBJ\n */\ngoog.events.unlisten = function(src, type, listener, opt_options, opt_handler) {\n  if (goog.isArray(type)) {\n    for (var i = 0; i < type.length; i++) {\n      goog.events.unlisten(src, type[i], listener, opt_options, opt_handler);\n    }\n    return null;\n  }\n  var capture =\n      goog.isObject(opt_options) ? !!opt_options.capture : !!opt_options;\n\n  listener = goog.events.wrapListener(listener);\n  if (goog.events.Listenable.isImplementedBy(src)) {\n    return src.unlisten(\n        /** @type {string|!goog.events.EventId} */ (type), listener, capture,\n        opt_handler);\n  }\n\n  if (!src) {\n    // TODO(chrishenry): We should tighten the API to only accept\n    // non-null objects, or add an assertion here.\n    return false;\n  }\n\n  var listenerMap = goog.events.getListenerMap_(\n      /** @type {!EventTarget} */ (src));\n  if (listenerMap) {\n    var listenerObj = listenerMap.getListener(\n        /** @type {string|!goog.events.EventId} */ (type), listener, capture,\n        opt_handler);\n    if (listenerObj) {\n      return goog.events.unlistenByKey(listenerObj);\n    }\n  }\n\n  return false;\n};\n\n\n/**\n * Removes an event listener which was added with listen() by the key\n * returned by listen().\n *\n * @param {goog.events.Key} key The key returned by listen() for this\n *     event listener.\n * @return {boolean} indicating whether the listener was there to remove.\n */\ngoog.events.unlistenByKey = function(key) {\n  // TODO(chrishenry): Remove this check when tests that rely on this\n  // are fixed.\n  if (goog.isNumber(key)) {\n    return false;\n  }\n\n  var listener = key;\n  if (!listener || listener.removed) {\n    return false;\n  }\n\n  var src = listener.src;\n  if (goog.events.Listenable.isImplementedBy(src)) {\n    return /** @type {!goog.events.Listenable} */ (src).unlistenByKey(listener);\n  }\n\n  var type = listener.type;\n  var proxy = listener.proxy;\n  if (src.removeEventListener) {\n    src.removeEventListener(type, proxy, listener.capture);\n  } else if (src.detachEvent) {\n    src.detachEvent(goog.events.getOnString_(type), proxy);\n  } else if (src.addListener && src.removeListener) {\n    src.removeListener(proxy);\n  }\n  goog.events.listenerCountEstimate_--;\n\n  var listenerMap = goog.events.getListenerMap_(\n      /** @type {!EventTarget} */ (src));\n  // TODO(chrishenry): Try to remove this conditional and execute the\n  // first branch always. This should be safe.\n  if (listenerMap) {\n    listenerMap.removeByKey(listener);\n    if (listenerMap.getTypeCount() == 0) {\n      // Null the src, just because this is simple to do (and useful\n      // for IE <= 7).\n      listenerMap.src = null;\n      // We don't use delete here because IE does not allow delete\n      // on a window object.\n      src[goog.events.LISTENER_MAP_PROP_] = null;\n    }\n  } else {\n    /** @type {!goog.events.Listener} */ (listener).markAsRemoved();\n  }\n\n  return true;\n};\n\n\n/**\n * Removes an event listener which was added with listenWithWrapper().\n *\n * @param {EventTarget|goog.events.Listenable} src The target to stop\n *     listening to events on.\n * @param {goog.events.EventWrapper} wrapper Event wrapper to use.\n * @param {function(?):?|{handleEvent:function(?):?}|null} listener The\n *     listener function to remove.\n * @param {boolean=} opt_capt In DOM-compliant browsers, this determines\n *     whether the listener is fired during the capture or bubble phase of the\n *     event.\n * @param {Object=} opt_handler Element in whose scope to call the listener.\n */\ngoog.events.unlistenWithWrapper = function(\n    src, wrapper, listener, opt_capt, opt_handler) {\n  wrapper.unlisten(src, listener, opt_capt, opt_handler);\n};\n\n\n/**\n * Removes all listeners from an object. You can also optionally\n * remove listeners of a particular type.\n *\n * @param {Object|undefined} obj Object to remove listeners from. Must be an\n *     EventTarget or a goog.events.Listenable.\n * @param {string|!goog.events.EventId=} opt_type Type of event to remove.\n *     Default is all types.\n * @return {number} Number of listeners removed.\n */\ngoog.events.removeAll = function(obj, opt_type) {\n  // TODO(chrishenry): Change the type of obj to\n  // (!EventTarget|!goog.events.Listenable).\n\n  if (!obj) {\n    return 0;\n  }\n\n  if (goog.events.Listenable.isImplementedBy(obj)) {\n    return /** @type {?} */ (obj).removeAllListeners(opt_type);\n  }\n\n  var listenerMap = goog.events.getListenerMap_(\n      /** @type {!EventTarget} */ (obj));\n  if (!listenerMap) {\n    return 0;\n  }\n\n  var count = 0;\n  var typeStr = opt_type && opt_type.toString();\n  for (var type in listenerMap.listeners) {\n    if (!typeStr || type == typeStr) {\n      // Clone so that we don't need to worry about unlistenByKey\n      // changing the content of the ListenerMap.\n      var listeners = listenerMap.listeners[type].concat();\n      for (var i = 0; i < listeners.length; ++i) {\n        if (goog.events.unlistenByKey(listeners[i])) {\n          ++count;\n        }\n      }\n    }\n  }\n  return count;\n};\n\n\n/**\n * Gets the listeners for a given object, type and capture phase.\n *\n * @param {Object} obj Object to get listeners for.\n * @param {string|!goog.events.EventId} type Event type.\n * @param {boolean} capture Capture phase?.\n * @return {Array<!goog.events.Listener>} Array of listener objects.\n */\ngoog.events.getListeners = function(obj, type, capture) {\n  if (goog.events.Listenable.isImplementedBy(obj)) {\n    return /** @type {!goog.events.Listenable} */ (obj).getListeners(\n        type, capture);\n  } else {\n    if (!obj) {\n      // TODO(chrishenry): We should tighten the API to accept\n      // !EventTarget|goog.events.Listenable, and add an assertion here.\n      return [];\n    }\n\n    var listenerMap = goog.events.getListenerMap_(\n        /** @type {!EventTarget} */ (obj));\n    return listenerMap ? listenerMap.getListeners(type, capture) : [];\n  }\n};\n\n\n/**\n * Gets the goog.events.Listener for the event or null if no such listener is\n * in use.\n *\n * @param {EventTarget|goog.events.Listenable} src The target from\n *     which to get listeners.\n * @param {?string|!goog.events.EventId<EVENTOBJ>} type The type of the event.\n * @param {function(EVENTOBJ):?|{handleEvent:function(?):?}|null} listener The\n *     listener function to get.\n * @param {boolean=} opt_capt In DOM-compliant browsers, this determines\n *                            whether the listener is fired during the\n *                            capture or bubble phase of the event.\n * @param {Object=} opt_handler Element in whose scope to call the listener.\n * @return {goog.events.ListenableKey} the found listener or null if not found.\n * @template EVENTOBJ\n */\ngoog.events.getListener = function(src, type, listener, opt_capt, opt_handler) {\n  // TODO(chrishenry): Change type from ?string to string, or add assertion.\n  type = /** @type {string} */ (type);\n  listener = goog.events.wrapListener(listener);\n  var capture = !!opt_capt;\n  if (goog.events.Listenable.isImplementedBy(src)) {\n    return src.getListener(type, listener, capture, opt_handler);\n  }\n\n  if (!src) {\n    // TODO(chrishenry): We should tighten the API to only accept\n    // non-null objects, or add an assertion here.\n    return null;\n  }\n\n  var listenerMap = goog.events.getListenerMap_(\n      /** @type {!EventTarget} */ (src));\n  if (listenerMap) {\n    return listenerMap.getListener(type, listener, capture, opt_handler);\n  }\n  return null;\n};\n\n\n/**\n * Returns whether an event target has any active listeners matching the\n * specified signature. If either the type or capture parameters are\n * unspecified, the function will match on the remaining criteria.\n *\n * @param {EventTarget|goog.events.Listenable} obj Target to get\n *     listeners for.\n * @param {string|!goog.events.EventId=} opt_type Event type.\n * @param {boolean=} opt_capture Whether to check for capture or bubble-phase\n *     listeners.\n * @return {boolean} Whether an event target has one or more listeners matching\n *     the requested type and/or capture phase.\n */\ngoog.events.hasListener = function(obj, opt_type, opt_capture) {\n  if (goog.events.Listenable.isImplementedBy(obj)) {\n    return obj.hasListener(opt_type, opt_capture);\n  }\n\n  var listenerMap = goog.events.getListenerMap_(\n      /** @type {!EventTarget} */ (obj));\n  return !!listenerMap && listenerMap.hasListener(opt_type, opt_capture);\n};\n\n\n/**\n * Provides a nice string showing the normalized event objects public members\n * @param {Object} e Event Object.\n * @return {string} String of the public members of the normalized event object.\n */\ngoog.events.expose = function(e) {\n  var str = [];\n  for (var key in e) {\n    if (e[key] && e[key].id) {\n      str.push(key + ' = ' + e[key] + ' (' + e[key].id + ')');\n    } else {\n      str.push(key + ' = ' + e[key]);\n    }\n  }\n  return str.join('\\n');\n};\n\n\n/**\n * Returns a string with on prepended to the specified type. This is used for IE\n * which expects \"on\" to be prepended. This function caches the string in order\n * to avoid extra allocations in steady state.\n * @param {string} type Event type.\n * @return {string} The type string with 'on' prepended.\n * @private\n */\ngoog.events.getOnString_ = function(type) {\n  if (type in goog.events.onStringMap_) {\n    return goog.events.onStringMap_[type];\n  }\n  return goog.events.onStringMap_[type] = goog.events.onString_ + type;\n};\n\n\n/**\n * Fires an object's listeners of a particular type and phase\n *\n * @param {Object} obj Object whose listeners to call.\n * @param {string|!goog.events.EventId} type Event type.\n * @param {boolean} capture Which event phase.\n * @param {Object} eventObject Event object to be passed to listener.\n * @return {boolean} True if all listeners returned true else false.\n */\ngoog.events.fireListeners = function(obj, type, capture, eventObject) {\n  if (goog.events.Listenable.isImplementedBy(obj)) {\n    return /** @type {!goog.events.Listenable} */ (obj).fireListeners(\n        type, capture, eventObject);\n  }\n\n  return goog.events.fireListeners_(obj, type, capture, eventObject);\n};\n\n\n/**\n * Fires an object's listeners of a particular type and phase.\n * @param {Object} obj Object whose listeners to call.\n * @param {string|!goog.events.EventId} type Event type.\n * @param {boolean} capture Which event phase.\n * @param {Object} eventObject Event object to be passed to listener.\n * @return {boolean} True if all listeners returned true else false.\n * @private\n */\ngoog.events.fireListeners_ = function(obj, type, capture, eventObject) {\n  /** @type {boolean} */\n  var retval = true;\n\n  var listenerMap = goog.events.getListenerMap_(\n      /** @type {EventTarget} */ (obj));\n  if (listenerMap) {\n    // TODO(chrishenry): Original code avoids array creation when there\n    // is no listener, so we do the same. If this optimization turns\n    // out to be not required, we can replace this with\n    // listenerMap.getListeners(type, capture) instead, which is simpler.\n    var listenerArray = listenerMap.listeners[type.toString()];\n    if (listenerArray) {\n      listenerArray = listenerArray.concat();\n      for (var i = 0; i < listenerArray.length; i++) {\n        var listener = listenerArray[i];\n        // We might not have a listener if the listener was removed.\n        if (listener && listener.capture == capture && !listener.removed) {\n          var result = goog.events.fireListener(listener, eventObject);\n          retval = retval && (result !== false);\n        }\n      }\n    }\n  }\n  return retval;\n};\n\n\n/**\n * Fires a listener with a set of arguments\n *\n * @param {goog.events.Listener} listener The listener object to call.\n * @param {Object} eventObject The event object to pass to the listener.\n * @return {*} Result of listener.\n */\ngoog.events.fireListener = function(listener, eventObject) {\n  var listenerFn = listener.listener;\n  var listenerHandler = listener.handler || listener.src;\n\n  if (listener.callOnce) {\n    goog.events.unlistenByKey(listener);\n  }\n  return listenerFn.call(listenerHandler, eventObject);\n};\n\n\n/**\n * Gets the total number of listeners currently in the system.\n * @return {number} Number of listeners.\n * @deprecated This returns estimated count, now that Closure no longer\n * stores a central listener registry. We still return an estimation\n * to keep existing listener-related tests passing. In the near future,\n * this function will be removed.\n */\ngoog.events.getTotalListenerCount = function() {\n  return goog.events.listenerCountEstimate_;\n};\n\n\n/**\n * Dispatches an event (or event like object) and calls all listeners\n * listening for events of this type. The type of the event is decided by the\n * type property on the event object.\n *\n * If any of the listeners returns false OR calls preventDefault then this\n * function will return false.  If one of the capture listeners calls\n * stopPropagation, then the bubble listeners won't fire.\n *\n * @param {goog.events.Listenable} src The event target.\n * @param {goog.events.EventLike} e Event object.\n * @return {boolean} If anyone called preventDefault on the event object (or\n *     if any of the handlers returns false) this will also return false.\n *     If there are no handlers, or if all handlers return true, this returns\n *     true.\n */\ngoog.events.dispatchEvent = function(src, e) {\n  goog.asserts.assert(\n      goog.events.Listenable.isImplementedBy(src),\n      'Can not use goog.events.dispatchEvent with ' +\n          'non-goog.events.Listenable instance.');\n  return src.dispatchEvent(e);\n};\n\n\n/**\n * Installs exception protection for the browser event entry point using the\n * given error handler.\n *\n * @param {goog.debug.ErrorHandler} errorHandler Error handler with which to\n *     protect the entry point.\n */\ngoog.events.protectBrowserEventEntryPoint = function(errorHandler) {\n  goog.events.handleBrowserEvent_ =\n      errorHandler.protectEntryPoint(goog.events.handleBrowserEvent_);\n};\n\n\n/**\n * Handles an event and dispatches it to the correct listeners. This\n * function is a proxy for the real listener the user specified.\n *\n * @param {goog.events.Listener} listener The listener object.\n * @param {Event=} opt_evt Optional event object that gets passed in via the\n *     native event handlers.\n * @return {*} Result of the event handler.\n * @this {EventTarget} The object or Element that fired the event.\n * @private\n */\ngoog.events.handleBrowserEvent_ = function(listener, opt_evt) {\n  if (listener.removed) {\n    return true;\n  }\n\n  // Synthesize event propagation if the browser does not support W3C\n  // event model.\n  if (!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT) {\n    var ieEvent = opt_evt ||\n        /** @type {Event} */ (goog.getObjectByName('window.event'));\n    var evt = new goog.events.BrowserEvent(ieEvent, this);\n    /** @type {*} */\n    var retval = true;\n\n    if (goog.events.CAPTURE_SIMULATION_MODE ==\n        goog.events.CaptureSimulationMode.ON) {\n      // If we have not marked this event yet, we should perform capture\n      // simulation.\n      if (!goog.events.isMarkedIeEvent_(ieEvent)) {\n        goog.events.markIeEvent_(ieEvent);\n\n        var ancestors = [];\n        for (var parent = evt.currentTarget; parent;\n             parent = parent.parentNode) {\n          ancestors.push(parent);\n        }\n\n        // Fire capture listeners.\n        var type = listener.type;\n        for (var i = ancestors.length - 1; !evt.propagationStopped_ && i >= 0;\n             i--) {\n          evt.currentTarget = ancestors[i];\n          var result =\n              goog.events.fireListeners_(ancestors[i], type, true, evt);\n          retval = retval && result;\n        }\n\n        // Fire bubble listeners.\n        //\n        // We can technically rely on IE to perform bubble event\n        // propagation. However, it turns out that IE fires events in\n        // opposite order of attachEvent registration, which broke\n        // some code and tests that rely on the order. (While W3C DOM\n        // Level 2 Events TR leaves the event ordering unspecified,\n        // modern browsers and W3C DOM Level 3 Events Working Draft\n        // actually specify the order as the registration order.)\n        for (var i = 0; !evt.propagationStopped_ && i < ancestors.length; i++) {\n          evt.currentTarget = ancestors[i];\n          var result =\n              goog.events.fireListeners_(ancestors[i], type, false, evt);\n          retval = retval && result;\n        }\n      }\n    } else {\n      retval = goog.events.fireListener(listener, evt);\n    }\n    return retval;\n  }\n\n  // Otherwise, simply fire the listener.\n  return goog.events.fireListener(\n      listener, new goog.events.BrowserEvent(opt_evt, this));\n};\n\n\n/**\n * This is used to mark the IE event object so we do not do the Closure pass\n * twice for a bubbling event.\n * @param {Event} e The IE browser event.\n * @private\n */\ngoog.events.markIeEvent_ = function(e) {\n  // Only the keyCode and the returnValue can be changed. We use keyCode for\n  // non keyboard events.\n  // event.returnValue is a bit more tricky. It is undefined by default. A\n  // boolean false prevents the default action. In a window.onbeforeunload and\n  // the returnValue is non undefined it will be alerted. However, we will only\n  // modify the returnValue for keyboard events. We can get a problem if non\n  // closure events sets the keyCode or the returnValue\n\n  var useReturnValue = false;\n\n  if (e.keyCode == 0) {\n    // We cannot change the keyCode in case that srcElement is input[type=file].\n    // We could test that that is the case but that would allocate 3 objects.\n    // If we use try/catch we will only allocate extra objects in the case of a\n    // failure.\n\n    try {\n      e.keyCode = -1;\n      return;\n    } catch (ex) {\n      useReturnValue = true;\n    }\n  }\n\n  if (useReturnValue ||\n      /** @type {boolean|undefined} */ (e.returnValue) == undefined) {\n    e.returnValue = true;\n  }\n};\n\n\n/**\n * This is used to check if an IE event has already been handled by the Closure\n * system so we do not do the Closure pass twice for a bubbling event.\n * @param {Event} e  The IE browser event.\n * @return {boolean} True if the event object has been marked.\n * @private\n */\ngoog.events.isMarkedIeEvent_ = function(e) {\n  return e.keyCode < 0 || e.returnValue != undefined;\n};\n\n\n/**\n * Counter to create unique event ids.\n * @private {number}\n */\ngoog.events.uniqueIdCounter_ = 0;\n\n\n/**\n * Creates a unique event id.\n *\n * @param {string} identifier The identifier.\n * @return {string} A unique identifier.\n * @idGenerator {unique}\n */\ngoog.events.getUniqueId = function(identifier) {\n  return identifier + '_' + goog.events.uniqueIdCounter_++;\n};\n\n\n/**\n * @param {EventTarget} src The source object.\n * @return {goog.events.ListenerMap} A listener map for the given\n *     source object, or null if none exists.\n * @private\n */\ngoog.events.getListenerMap_ = function(src) {\n  var listenerMap = src[goog.events.LISTENER_MAP_PROP_];\n  // IE serializes the property as well (e.g. when serializing outer\n  // HTML). So we must check that the value is of the correct type.\n  return listenerMap instanceof goog.events.ListenerMap ? listenerMap : null;\n};\n\n\n/**\n * Expando property for listener function wrapper for Object with\n * handleEvent.\n * @private @const {string}\n */\ngoog.events.LISTENER_WRAPPER_PROP_ =\n    '__closure_events_fn_' + ((Math.random() * 1e9) >>> 0);\n\n\n/**\n * @param {Object|Function} listener The listener function or an\n *     object that contains handleEvent method.\n * @return {!Function} Either the original function or a function that\n *     calls obj.handleEvent. If the same listener is passed to this\n *     function more than once, the same function is guaranteed to be\n *     returned.\n */\ngoog.events.wrapListener = function(listener) {\n  goog.asserts.assert(listener, 'Listener can not be null.');\n\n  if (goog.isFunction(listener)) {\n    return listener;\n  }\n\n  goog.asserts.assert(\n      listener.handleEvent, 'An object listener must have handleEvent method.');\n  if (!listener[goog.events.LISTENER_WRAPPER_PROP_]) {\n    listener[goog.events.LISTENER_WRAPPER_PROP_] = function(e) {\n      return /** @type {?} */ (listener).handleEvent(e);\n    };\n  }\n  return listener[goog.events.LISTENER_WRAPPER_PROP_];\n};\n\n\n// Register the browser event handler as an entry point, so that\n// it can be monitored for exception handling, etc.\ngoog.debug.entryPointRegistry.register(\n    /**\n     * @param {function(!Function): !Function} transformer The transforming\n     *     function.\n     */\n    function(transformer) {\n      goog.events.handleBrowserEvent_ =\n          transformer(goog.events.handleBrowserEvent_);\n    });\n","// Copyright 2005 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Class to create objects which want to handle multiple events\n * and have their listeners easily cleaned up via a dispose method.\n *\n * Example:\n * <pre>\n * function Something() {\n *   Something.base(this);\n *\n *   ... set up object ...\n *\n *   // Add event listeners\n *   this.listen(this.starEl, goog.events.EventType.CLICK, this.handleStar);\n *   this.listen(this.headerEl, goog.events.EventType.CLICK, this.expand);\n *   this.listen(this.collapseEl, goog.events.EventType.CLICK, this.collapse);\n *   this.listen(this.infoEl, goog.events.EventType.MOUSEOVER, this.showHover);\n *   this.listen(this.infoEl, goog.events.EventType.MOUSEOUT, this.hideHover);\n * }\n * goog.inherits(Something, goog.events.EventHandler);\n *\n * Something.prototype.disposeInternal = function() {\n *   Something.base(this, 'disposeInternal');\n *   goog.dom.removeNode(this.container);\n * };\n *\n *\n * // Then elsewhere:\n *\n * var activeSomething = null;\n * function openSomething() {\n *   activeSomething = new Something();\n * }\n *\n * function closeSomething() {\n *   if (activeSomething) {\n *     activeSomething.dispose();  // Remove event listeners\n *     activeSomething = null;\n *   }\n * }\n * </pre>\n *\n */\n\ngoog.provide('goog.events.EventHandler');\n\ngoog.require('goog.Disposable');\ngoog.require('goog.events');\ngoog.require('goog.object');\n\ngoog.forwardDeclare('goog.events.EventWrapper');\n\n\n\n/**\n * Super class for objects that want to easily manage a number of event\n * listeners.  It allows a short cut to listen and also provides a quick way\n * to remove all events listeners belonging to this object.\n * @param {SCOPE=} opt_scope Object in whose scope to call the listeners.\n * @constructor\n * @extends {goog.Disposable}\n * @template SCOPE\n */\ngoog.events.EventHandler = function(opt_scope) {\n  goog.Disposable.call(this);\n  // TODO(mknichel): Rename this to this.scope_ and fix the classes in google3\n  // that access this private variable. :(\n  this.handler_ = opt_scope;\n\n  /**\n   * Keys for events that are being listened to.\n   * @type {!Object<!goog.events.Key>}\n   * @private\n   */\n  this.keys_ = {};\n};\ngoog.inherits(goog.events.EventHandler, goog.Disposable);\n\n\n/**\n * Utility array used to unify the cases of listening for an array of types\n * and listening for a single event, without using recursion or allocating\n * an array each time.\n * @type {!Array<string>}\n * @const\n * @private\n */\ngoog.events.EventHandler.typeArray_ = [];\n\n\n/**\n * Listen to an event on a Listenable.  If the function is omitted then the\n * EventHandler's handleEvent method will be used.\n * @param {goog.events.ListenableType} src Event source.\n * @param {string|Array<string>|\n *     !goog.events.EventId<EVENTOBJ>|!Array<!goog.events.EventId<EVENTOBJ>>}\n *     type Event type to listen for or array of event types.\n * @param {function(this:SCOPE, EVENTOBJ):?|{handleEvent:function(?):?}|null=}\n *     opt_fn Optional callback function to be used as the listener or an object\n *     with handleEvent function.\n * @param {(boolean|!AddEventListenerOptions)=} opt_options\n * @return {THIS} This object, allowing for chaining of calls.\n * @this {THIS}\n * @template EVENTOBJ, THIS\n */\ngoog.events.EventHandler.prototype.listen = function(\n    src, type, opt_fn, opt_options) {\n  var self = /** @type {!goog.events.EventHandler} */ (this);\n  return self.listen_(src, type, opt_fn, opt_options);\n};\n\n\n/**\n * Listen to an event on a Listenable.  If the function is omitted then the\n * EventHandler's handleEvent method will be used.\n * @param {goog.events.ListenableType} src Event source.\n * @param {string|Array<string>|\n *     !goog.events.EventId<EVENTOBJ>|!Array<!goog.events.EventId<EVENTOBJ>>}\n *     type Event type to listen for or array of event types.\n * @param {function(this:T, EVENTOBJ):?|{handleEvent:function(this:T, ?):?}|\n *     null|undefined} fn Optional callback function to be used as the\n *     listener or an object with handleEvent function.\n * @param {boolean|!AddEventListenerOptions|undefined} options\n * @param {T} scope Object in whose scope to call the listener.\n * @return {THIS} This object, allowing for chaining of calls.\n * @this {THIS}\n * @template T, EVENTOBJ, THIS\n */\ngoog.events.EventHandler.prototype.listenWithScope = function(\n    src, type, fn, options, scope) {\n  var self = /** @type {!goog.events.EventHandler} */ (this);\n  // TODO(mknichel): Deprecate this function.\n  return self.listen_(src, type, fn, options, scope);\n};\n\n\n/**\n * Listen to an event on a Listenable.  If the function is omitted then the\n * EventHandler's handleEvent method will be used.\n * @param {goog.events.ListenableType} src Event source.\n * @param {string|Array<string>|\n *     !goog.events.EventId<EVENTOBJ>|!Array<!goog.events.EventId<EVENTOBJ>>}\n *     type Event type to listen for or array of event types.\n * @param {function(EVENTOBJ):?|{handleEvent:function(?):?}|null=} opt_fn\n *     Optional callback function to be used as the listener or an object with\n *     handleEvent function.\n * @param {(boolean|!AddEventListenerOptions)=} opt_options\n * @param {Object=} opt_scope Object in whose scope to call the listener.\n * @return {THIS} This object, allowing for chaining of calls.\n * @this {THIS}\n * @template EVENTOBJ, THIS\n * @private\n */\ngoog.events.EventHandler.prototype.listen_ = function(\n    src, type, opt_fn, opt_options, opt_scope) {\n  var self = /** @type {!goog.events.EventHandler} */ (this);\n  if (!goog.isArray(type)) {\n    if (type) {\n      goog.events.EventHandler.typeArray_[0] = type.toString();\n    }\n    type = goog.events.EventHandler.typeArray_;\n  }\n  for (var i = 0; i < type.length; i++) {\n    var listenerObj = goog.events.listen(\n        src, type[i], opt_fn || self.handleEvent, opt_options || false,\n        opt_scope || self.handler_ || self);\n\n    if (!listenerObj) {\n      // When goog.events.listen run on OFF_AND_FAIL or OFF_AND_SILENT\n      // (goog.events.CaptureSimulationMode) in IE8-, it will return null\n      // value.\n      return self;\n    }\n\n    var key = listenerObj.key;\n    self.keys_[key] = listenerObj;\n  }\n\n  return self;\n};\n\n\n/**\n * Listen to an event on a Listenable.  If the function is omitted, then the\n * EventHandler's handleEvent method will be used. After the event has fired the\n * event listener is removed from the target. If an array of event types is\n * provided, each event type will be listened to once.\n * @param {goog.events.ListenableType} src Event source.\n * @param {string|Array<string>|\n *     !goog.events.EventId<EVENTOBJ>|!Array<!goog.events.EventId<EVENTOBJ>>}\n *     type Event type to listen for or array of event types.\n * @param {function(this:SCOPE, EVENTOBJ):?|{handleEvent:function(?):?}|null=}\n * opt_fn\n *    Optional callback function to be used as the listener or an object with\n *    handleEvent function.\n * @param {(boolean|!AddEventListenerOptions)=} opt_options\n * @return {THIS} This object, allowing for chaining of calls.\n * @this {THIS}\n * @template EVENTOBJ, THIS\n */\ngoog.events.EventHandler.prototype.listenOnce = function(\n    src, type, opt_fn, opt_options) {\n  var self = /** @type {!goog.events.EventHandler} */ (this);\n  return self.listenOnce_(src, type, opt_fn, opt_options);\n};\n\n\n/**\n * Listen to an event on a Listenable.  If the function is omitted, then the\n * EventHandler's handleEvent method will be used. After the event has fired the\n * event listener is removed from the target. If an array of event types is\n * provided, each event type will be listened to once.\n * @param {goog.events.ListenableType} src Event source.\n * @param {string|Array<string>|\n *     !goog.events.EventId<EVENTOBJ>|!Array<!goog.events.EventId<EVENTOBJ>>}\n *     type Event type to listen for or array of event types.\n * @param {function(this:T, EVENTOBJ):?|{handleEvent:function(this:T, ?):?}|\n *     null|undefined} fn Optional callback function to be used as the\n *     listener or an object with handleEvent function.\n * @param {boolean|undefined} capture Optional whether to use capture phase.\n * @param {T} scope Object in whose scope to call the listener.\n * @return {THIS} This object, allowing for chaining of calls.\n * @this {THIS}\n * @template T, EVENTOBJ, THIS\n */\ngoog.events.EventHandler.prototype.listenOnceWithScope = function(\n    src, type, fn, capture, scope) {\n  var self = /** @type {!goog.events.EventHandler} */ (this);\n  // TODO(mknichel): Deprecate this function.\n  return self.listenOnce_(src, type, fn, capture, scope);\n};\n\n\n/**\n * Listen to an event on a Listenable.  If the function is omitted, then the\n * EventHandler's handleEvent method will be used. After the event has fired\n * the event listener is removed from the target. If an array of event types is\n * provided, each event type will be listened to once.\n * @param {goog.events.ListenableType} src Event source.\n * @param {string|Array<string>|\n *     !goog.events.EventId<EVENTOBJ>|!Array<!goog.events.EventId<EVENTOBJ>>}\n *     type Event type to listen for or array of event types.\n * @param {function(EVENTOBJ):?|{handleEvent:function(?):?}|null=} opt_fn\n *    Optional callback function to be used as the listener or an object with\n *    handleEvent function.\n * @param {(boolean|!AddEventListenerOptions)=} opt_options\n * @param {Object=} opt_scope Object in whose scope to call the listener.\n * @return {THIS} This object, allowing for chaining of calls.\n * @this {THIS}\n * @template EVENTOBJ, THIS\n * @private\n */\ngoog.events.EventHandler.prototype.listenOnce_ = function(\n    src, type, opt_fn, opt_options, opt_scope) {\n  var self = /** @type {!goog.events.EventHandler} */ (this);\n  if (goog.isArray(type)) {\n    for (var i = 0; i < type.length; i++) {\n      self.listenOnce_(src, type[i], opt_fn, opt_options, opt_scope);\n    }\n  } else {\n    var listenerObj = goog.events.listenOnce(\n        src, type, opt_fn || self.handleEvent, opt_options,\n        opt_scope || self.handler_ || self);\n    if (!listenerObj) {\n      // When goog.events.listen run on OFF_AND_FAIL or OFF_AND_SILENT\n      // (goog.events.CaptureSimulationMode) in IE8-, it will return null\n      // value.\n      return self;\n    }\n\n    var key = listenerObj.key;\n    self.keys_[key] = listenerObj;\n  }\n\n  return self;\n};\n\n\n/**\n * Adds an event listener with a specific event wrapper on a DOM Node or an\n * object that has implemented {@link goog.events.EventTarget}. A listener can\n * only be added once to an object.\n *\n * @param {EventTarget|goog.events.EventTarget} src The node to listen to\n *     events on.\n * @param {goog.events.EventWrapper} wrapper Event wrapper to use.\n * @param {function(this:SCOPE, ?):?|{handleEvent:function(?):?}|null} listener\n *     Callback method, or an object with a handleEvent function.\n * @param {boolean=} opt_capt Whether to fire in capture phase (defaults to\n *     false).\n * @return {THIS} This object, allowing for chaining of calls.\n * @this {THIS}\n * @template THIS\n */\ngoog.events.EventHandler.prototype.listenWithWrapper = function(\n    src, wrapper, listener, opt_capt) {\n  var self = /** @type {!goog.events.EventHandler} */ (this);\n  // TODO(mknichel): Remove the opt_scope from this function and then\n  // templatize it.\n  return self.listenWithWrapper_(src, wrapper, listener, opt_capt);\n};\n\n\n/**\n * Adds an event listener with a specific event wrapper on a DOM Node or an\n * object that has implemented {@link goog.events.EventTarget}. A listener can\n * only be added once to an object.\n *\n * @param {EventTarget|goog.events.EventTarget} src The node to listen to\n *     events on.\n * @param {goog.events.EventWrapper} wrapper Event wrapper to use.\n * @param {function(this:T, ?):?|{handleEvent:function(this:T, ?):?}|null}\n *     listener Optional callback function to be used as the\n *     listener or an object with handleEvent function.\n * @param {boolean|undefined} capture Optional whether to use capture phase.\n * @param {T} scope Object in whose scope to call the listener.\n * @return {THIS} This object, allowing for chaining of calls.\n * @this {THIS}\n * @template T, THIS\n */\ngoog.events.EventHandler.prototype.listenWithWrapperAndScope = function(\n    src, wrapper, listener, capture, scope) {\n  var self = /** @type {!goog.events.EventHandler} */ (this);\n  // TODO(mknichel): Deprecate this function.\n  return self.listenWithWrapper_(src, wrapper, listener, capture, scope);\n};\n\n\n/**\n * Adds an event listener with a specific event wrapper on a DOM Node or an\n * object that has implemented {@link goog.events.EventTarget}. A listener can\n * only be added once to an object.\n *\n * @param {EventTarget|goog.events.EventTarget} src The node to listen to\n *     events on.\n * @param {goog.events.EventWrapper} wrapper Event wrapper to use.\n * @param {function(?):?|{handleEvent:function(?):?}|null} listener Callback\n *     method, or an object with a handleEvent function.\n * @param {boolean=} opt_capt Whether to fire in capture phase (defaults to\n *     false).\n * @param {Object=} opt_scope Element in whose scope to call the listener.\n * @return {THIS} This object, allowing for chaining of calls.\n * @this {THIS}\n * @template THIS\n * @private\n */\ngoog.events.EventHandler.prototype.listenWithWrapper_ = function(\n    src, wrapper, listener, opt_capt, opt_scope) {\n  var self = /** @type {!goog.events.EventHandler} */ (this);\n  wrapper.listen(\n      src, listener, opt_capt, opt_scope || self.handler_ || self, self);\n  return self;\n};\n\n\n/**\n * @return {number} Number of listeners registered by this handler.\n */\ngoog.events.EventHandler.prototype.getListenerCount = function() {\n  var count = 0;\n  for (var key in this.keys_) {\n    if (Object.prototype.hasOwnProperty.call(this.keys_, key)) {\n      count++;\n    }\n  }\n  return count;\n};\n\n\n/**\n * Unlistens on an event.\n * @param {goog.events.ListenableType} src Event source.\n * @param {string|Array<string>|\n *     !goog.events.EventId<EVENTOBJ>|!Array<!goog.events.EventId<EVENTOBJ>>}\n *     type Event type or array of event types to unlisten to.\n * @param {function(this:?, EVENTOBJ):?|{handleEvent:function(?):?}|null=}\n *     opt_fn Optional callback function to be used as the listener or an object\n *     with handleEvent function.\n * @param {(boolean|!EventListenerOptions)=} opt_options\n * @param {Object=} opt_scope Object in whose scope to call the listener.\n * @return {THIS} This object, allowing for chaining of calls.\n * @this {THIS}\n * @template EVENTOBJ, THIS\n */\ngoog.events.EventHandler.prototype.unlisten = function(\n    src, type, opt_fn, opt_options, opt_scope) {\n  var self = /** @type {!goog.events.EventHandler} */ (this);\n  if (goog.isArray(type)) {\n    for (var i = 0; i < type.length; i++) {\n      self.unlisten(src, type[i], opt_fn, opt_options, opt_scope);\n    }\n  } else {\n    var capture =\n        goog.isObject(opt_options) ? !!opt_options.capture : !!opt_options;\n    var listener = goog.events.getListener(\n        src, type, opt_fn || self.handleEvent, capture,\n        opt_scope || self.handler_ || self);\n\n    if (listener) {\n      goog.events.unlistenByKey(listener);\n      delete self.keys_[listener.key];\n    }\n  }\n\n  return self;\n};\n\n\n/**\n * Removes an event listener which was added with listenWithWrapper().\n *\n * @param {EventTarget|goog.events.EventTarget} src The target to stop\n *     listening to events on.\n * @param {goog.events.EventWrapper} wrapper Event wrapper to use.\n * @param {function(?):?|{handleEvent:function(?):?}|null} listener The\n *     listener function to remove.\n * @param {boolean=} opt_capt In DOM-compliant browsers, this determines\n *     whether the listener is fired during the capture or bubble phase of the\n *     event.\n * @param {Object=} opt_scope Element in whose scope to call the listener.\n * @return {THIS} This object, allowing for chaining of calls.\n * @this {THIS}\n * @template THIS\n */\ngoog.events.EventHandler.prototype.unlistenWithWrapper = function(\n    src, wrapper, listener, opt_capt, opt_scope) {\n  var self = /** @type {!goog.events.EventHandler} */ (this);\n  wrapper.unlisten(\n      src, listener, opt_capt, opt_scope || self.handler_ || self, self);\n  return self;\n};\n\n\n/**\n * Unlistens to all events.\n */\ngoog.events.EventHandler.prototype.removeAll = function() {\n  goog.object.forEach(this.keys_, function(listenerObj, key) {\n    if (this.keys_.hasOwnProperty(key)) {\n      goog.events.unlistenByKey(listenerObj);\n    }\n  }, this);\n\n  this.keys_ = {};\n};\n\n\n/**\n * Disposes of this EventHandler and removes all listeners that it registered.\n * @override\n * @protected\n */\ngoog.events.EventHandler.prototype.disposeInternal = function() {\n  goog.events.EventHandler.superClass_.disposeInternal.call(this);\n  this.removeAll();\n};\n\n\n/**\n * Default event handler\n * @param {goog.events.Event} e Event object.\n */\ngoog.events.EventHandler.prototype.handleEvent = function(e) {\n  throw new Error('EventHandler.handleEvent not implemented');\n};\n","// Copyright 2005 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview A disposable implementation of a custom\n * listenable/event target. See also: documentation for\n * `goog.events.Listenable`.\n *\n * @author arv@google.com (Erik Arvidsson) [Original implementation]\n * @see ../demos/eventtarget.html\n * @see goog.events.Listenable\n */\n\ngoog.provide('goog.events.EventTarget');\n\ngoog.require('goog.Disposable');\ngoog.require('goog.asserts');\ngoog.require('goog.events');\ngoog.require('goog.events.Event');\ngoog.require('goog.events.Listenable');\ngoog.require('goog.events.ListenerMap');\ngoog.require('goog.object');\n\n\n\n/**\n * An implementation of `goog.events.Listenable` with full W3C\n * EventTarget-like support (capture/bubble mechanism, stopping event\n * propagation, preventing default actions).\n *\n * You may subclass this class to turn your class into a Listenable.\n *\n * Unless propagation is stopped, an event dispatched by an\n * EventTarget will bubble to the parent returned by\n * `getParentEventTarget`. To set the parent, call\n * `setParentEventTarget`. Subclasses that don't support\n * changing the parent can override the setter to throw an error.\n *\n * Example usage:\n * <pre>\n *   var source = new goog.events.EventTarget();\n *   function handleEvent(e) {\n *     alert('Type: ' + e.type + '; Target: ' + e.target);\n *   }\n *   source.listen('foo', handleEvent);\n *   // Or: goog.events.listen(source, 'foo', handleEvent);\n *   ...\n *   source.dispatchEvent('foo');  // will call handleEvent\n *   ...\n *   source.unlisten('foo', handleEvent);\n *   // Or: goog.events.unlisten(source, 'foo', handleEvent);\n * </pre>\n *\n * @constructor\n * @extends {goog.Disposable}\n * @implements {goog.events.Listenable}\n */\ngoog.events.EventTarget = function() {\n  goog.Disposable.call(this);\n\n  /**\n   * Maps of event type to an array of listeners.\n   * @private {!goog.events.ListenerMap}\n   */\n  this.eventTargetListeners_ = new goog.events.ListenerMap(this);\n\n  /**\n   * The object to use for event.target. Useful when mixing in an\n   * EventTarget to another object.\n   * @private {!Object}\n   */\n  this.actualEventTarget_ = this;\n\n  /**\n   * Parent event target, used during event bubbling.\n   *\n   * TODO(chrishenry): Change this to goog.events.Listenable. This\n   * currently breaks people who expect getParentEventTarget to return\n   * goog.events.EventTarget.\n   *\n   * @private {goog.events.EventTarget}\n   */\n  this.parentEventTarget_ = null;\n};\ngoog.inherits(goog.events.EventTarget, goog.Disposable);\ngoog.events.Listenable.addImplementation(goog.events.EventTarget);\n\n\n/**\n * An artificial cap on the number of ancestors you can have. This is mainly\n * for loop detection.\n * @const {number}\n * @private\n */\ngoog.events.EventTarget.MAX_ANCESTORS_ = 1000;\n\n\n/**\n * Returns the parent of this event target to use for bubbling.\n *\n * @return {goog.events.EventTarget} The parent EventTarget or null if\n *     there is no parent.\n * @override\n */\ngoog.events.EventTarget.prototype.getParentEventTarget = function() {\n  return this.parentEventTarget_;\n};\n\n\n/**\n * Sets the parent of this event target to use for capture/bubble\n * mechanism.\n * @param {goog.events.EventTarget} parent Parent listenable (null if none).\n */\ngoog.events.EventTarget.prototype.setParentEventTarget = function(parent) {\n  this.parentEventTarget_ = parent;\n};\n\n\n/**\n * Adds an event listener to the event target. The same handler can only be\n * added once per the type. Even if you add the same handler multiple times\n * using the same type then it will only be called once when the event is\n * dispatched.\n *\n * @param {string|!goog.events.EventId} type The type of the event to listen for\n * @param {function(?):?|{handleEvent:function(?):?}|null} handler The function\n *     to handle the event. The handler can also be an object that implements\n *     the handleEvent method which takes the event object as argument.\n * @param {boolean=} opt_capture In DOM-compliant browsers, this determines\n *     whether the listener is fired during the capture or bubble phase\n *     of the event.\n * @param {Object=} opt_handlerScope Object in whose scope to call\n *     the listener.\n * @deprecated Use `#listen` instead, when possible. Otherwise, use\n *     `goog.events.listen` if you are passing Object\n *     (instead of Function) as handler.\n */\ngoog.events.EventTarget.prototype.addEventListener = function(\n    type, handler, opt_capture, opt_handlerScope) {\n  goog.events.listen(this, type, handler, opt_capture, opt_handlerScope);\n};\n\n\n/**\n * Removes an event listener from the event target. The handler must be the\n * same object as the one added. If the handler has not been added then\n * nothing is done.\n *\n * @param {string} type The type of the event to listen for.\n * @param {function(?):?|{handleEvent:function(?):?}|null} handler The function\n *     to handle the event. The handler can also be an object that implements\n *     the handleEvent method which takes the event object as argument.\n * @param {boolean=} opt_capture In DOM-compliant browsers, this determines\n *     whether the listener is fired during the capture or bubble phase\n *     of the event.\n * @param {Object=} opt_handlerScope Object in whose scope to call\n *     the listener.\n * @deprecated Use `#unlisten` instead, when possible. Otherwise, use\n *     `goog.events.unlisten` if you are passing Object\n *     (instead of Function) as handler.\n */\ngoog.events.EventTarget.prototype.removeEventListener = function(\n    type, handler, opt_capture, opt_handlerScope) {\n  goog.events.unlisten(this, type, handler, opt_capture, opt_handlerScope);\n};\n\n\n/** @override */\ngoog.events.EventTarget.prototype.dispatchEvent = function(e) {\n  this.assertInitialized_();\n\n  var ancestorsTree, ancestor = this.getParentEventTarget();\n  if (ancestor) {\n    ancestorsTree = [];\n    var ancestorCount = 1;\n    for (; ancestor; ancestor = ancestor.getParentEventTarget()) {\n      ancestorsTree.push(ancestor);\n      goog.asserts.assert(\n          (++ancestorCount < goog.events.EventTarget.MAX_ANCESTORS_),\n          'infinite loop');\n    }\n  }\n\n  return goog.events.EventTarget.dispatchEventInternal_(\n      this.actualEventTarget_, e, ancestorsTree);\n};\n\n\n/**\n * Removes listeners from this object.  Classes that extend EventTarget may\n * need to override this method in order to remove references to DOM Elements\n * and additional listeners.\n * @override\n */\ngoog.events.EventTarget.prototype.disposeInternal = function() {\n  goog.events.EventTarget.superClass_.disposeInternal.call(this);\n\n  this.removeAllListeners();\n  this.parentEventTarget_ = null;\n};\n\n\n/** @override */\ngoog.events.EventTarget.prototype.listen = function(\n    type, listener, opt_useCapture, opt_listenerScope) {\n  this.assertInitialized_();\n  return this.eventTargetListeners_.add(\n      String(type), listener, false /* callOnce */, opt_useCapture,\n      opt_listenerScope);\n};\n\n\n/** @override */\ngoog.events.EventTarget.prototype.listenOnce = function(\n    type, listener, opt_useCapture, opt_listenerScope) {\n  return this.eventTargetListeners_.add(\n      String(type), listener, true /* callOnce */, opt_useCapture,\n      opt_listenerScope);\n};\n\n\n/** @override */\ngoog.events.EventTarget.prototype.unlisten = function(\n    type, listener, opt_useCapture, opt_listenerScope) {\n  return this.eventTargetListeners_.remove(\n      String(type), listener, opt_useCapture, opt_listenerScope);\n};\n\n\n/** @override */\ngoog.events.EventTarget.prototype.unlistenByKey = function(key) {\n  return this.eventTargetListeners_.removeByKey(key);\n};\n\n\n/** @override */\ngoog.events.EventTarget.prototype.removeAllListeners = function(opt_type) {\n  // TODO(chrishenry): Previously, removeAllListeners can be called on\n  // uninitialized EventTarget, so we preserve that behavior. We\n  // should remove this when usages that rely on that fact are purged.\n  if (!this.eventTargetListeners_) {\n    return 0;\n  }\n  return this.eventTargetListeners_.removeAll(opt_type);\n};\n\n\n/** @override */\ngoog.events.EventTarget.prototype.fireListeners = function(\n    type, capture, eventObject) {\n  // TODO(chrishenry): Original code avoids array creation when there\n  // is no listener, so we do the same. If this optimization turns\n  // out to be not required, we can replace this with\n  // getListeners(type, capture) instead, which is simpler.\n  var listenerArray = this.eventTargetListeners_.listeners[String(type)];\n  if (!listenerArray) {\n    return true;\n  }\n  listenerArray = listenerArray.concat();\n\n  var rv = true;\n  for (var i = 0; i < listenerArray.length; ++i) {\n    var listener = listenerArray[i];\n    // We might not have a listener if the listener was removed.\n    if (listener && !listener.removed && listener.capture == capture) {\n      var listenerFn = listener.listener;\n      var listenerHandler = listener.handler || listener.src;\n\n      if (listener.callOnce) {\n        this.unlistenByKey(listener);\n      }\n      rv = listenerFn.call(listenerHandler, eventObject) !== false && rv;\n    }\n  }\n\n  return rv && eventObject.returnValue_ != false;\n};\n\n\n/** @override */\ngoog.events.EventTarget.prototype.getListeners = function(type, capture) {\n  return this.eventTargetListeners_.getListeners(String(type), capture);\n};\n\n\n/** @override */\ngoog.events.EventTarget.prototype.getListener = function(\n    type, listener, capture, opt_listenerScope) {\n  return this.eventTargetListeners_.getListener(\n      String(type), listener, capture, opt_listenerScope);\n};\n\n\n/** @override */\ngoog.events.EventTarget.prototype.hasListener = function(\n    opt_type, opt_capture) {\n  var id = goog.isDef(opt_type) ? String(opt_type) : undefined;\n  return this.eventTargetListeners_.hasListener(id, opt_capture);\n};\n\n\n/**\n * Sets the target to be used for `event.target` when firing\n * event. Mainly used for testing. For example, see\n * `goog.testing.events.mixinListenable`.\n * @param {!Object} target The target.\n */\ngoog.events.EventTarget.prototype.setTargetForTesting = function(target) {\n  this.actualEventTarget_ = target;\n};\n\n\n/**\n * Asserts that the event target instance is initialized properly.\n * @private\n */\ngoog.events.EventTarget.prototype.assertInitialized_ = function() {\n  goog.asserts.assert(\n      this.eventTargetListeners_,\n      'Event target is not initialized. Did you call the superclass ' +\n          '(goog.events.EventTarget) constructor?');\n};\n\n\n/**\n * Dispatches the given event on the ancestorsTree.\n *\n * @param {!Object} target The target to dispatch on.\n * @param {goog.events.Event|Object|string} e The event object.\n * @param {Array<goog.events.Listenable>=} opt_ancestorsTree The ancestors\n *     tree of the target, in reverse order from the closest ancestor\n *     to the root event target. May be null if the target has no ancestor.\n * @return {boolean} If anyone called preventDefault on the event object (or\n *     if any of the listeners returns false) this will also return false.\n * @private\n */\ngoog.events.EventTarget.dispatchEventInternal_ = function(\n    target, e, opt_ancestorsTree) {\n  /** @suppress {missingProperties} */\n  var type = e.type || /** @type {string} */ (e);\n\n  // If accepting a string or object, create a custom event object so that\n  // preventDefault and stopPropagation work with the event.\n  if (goog.isString(e)) {\n    e = new goog.events.Event(e, target);\n  } else if (!(e instanceof goog.events.Event)) {\n    var oldEvent = e;\n    e = new goog.events.Event(type, target);\n    goog.object.extend(e, oldEvent);\n  } else {\n    e.target = e.target || target;\n  }\n\n  var rv = true, currentTarget;\n\n  // Executes all capture listeners on the ancestors, if any.\n  if (opt_ancestorsTree) {\n    for (var i = opt_ancestorsTree.length - 1; !e.propagationStopped_ && i >= 0;\n         i--) {\n      currentTarget = e.currentTarget = opt_ancestorsTree[i];\n      rv = currentTarget.fireListeners(type, true, e) && rv;\n    }\n  }\n\n  // Executes capture and bubble listeners on the target.\n  if (!e.propagationStopped_) {\n    currentTarget = /** @type {?} */ (e.currentTarget = target);\n    rv = currentTarget.fireListeners(type, true, e) && rv;\n    if (!e.propagationStopped_) {\n      rv = currentTarget.fireListeners(type, false, e) && rv;\n    }\n  }\n\n  // Executes all bubble listeners on the ancestors, if any.\n  if (opt_ancestorsTree) {\n    for (i = 0; !e.propagationStopped_ && i < opt_ancestorsTree.length; i++) {\n      currentTarget = e.currentTarget = opt_ancestorsTree[i];\n      rv = currentTarget.fireListeners(type, false, e) && rv;\n    }\n  }\n\n  return rv;\n};\n","// Copyright 2012 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Vendor prefix getters.\n */\n\ngoog.provide('goog.dom.vendor');\n\ngoog.require('goog.string');\ngoog.require('goog.userAgent');\n\n\n/**\n * Returns the JS vendor prefix used in CSS properties. Different vendors\n * use different methods of changing the case of the property names.\n *\n * @return {?string} The JS vendor prefix or null if there is none.\n */\ngoog.dom.vendor.getVendorJsPrefix = function() {\n  if (goog.userAgent.WEBKIT) {\n    return 'Webkit';\n  } else if (goog.userAgent.GECKO) {\n    return 'Moz';\n  } else if (goog.userAgent.IE) {\n    return 'ms';\n  } else if (goog.userAgent.OPERA) {\n    return 'O';\n  }\n\n  return null;\n};\n\n\n/**\n * Returns the vendor prefix used in CSS properties.\n *\n * @return {?string} The vendor prefix or null if there is none.\n */\ngoog.dom.vendor.getVendorPrefix = function() {\n  if (goog.userAgent.WEBKIT) {\n    return '-webkit';\n  } else if (goog.userAgent.GECKO) {\n    return '-moz';\n  } else if (goog.userAgent.IE) {\n    return '-ms';\n  } else if (goog.userAgent.OPERA) {\n    return '-o';\n  }\n\n  return null;\n};\n\n\n/**\n * @param {string} propertyName A property name.\n * @param {!Object=} opt_object If provided, we verify if the property exists in\n *     the object.\n * @return {?string} A vendor prefixed property name, or null if it does not\n *     exist.\n */\ngoog.dom.vendor.getPrefixedPropertyName = function(propertyName, opt_object) {\n  // We first check for a non-prefixed property, if available.\n  if (opt_object && propertyName in opt_object) {\n    return propertyName;\n  }\n  var prefix = goog.dom.vendor.getVendorJsPrefix();\n  if (prefix) {\n    prefix = prefix.toLowerCase();\n    var prefixedPropertyName = prefix + goog.string.toTitleCase(propertyName);\n    return (!goog.isDef(opt_object) || prefixedPropertyName in opt_object) ?\n        prefixedPropertyName :\n        null;\n  }\n  return null;\n};\n\n\n/**\n * @param {string} eventType An event type.\n * @return {string} A lower-cased vendor prefixed event type.\n */\ngoog.dom.vendor.getPrefixedEventType = function(eventType) {\n  var prefix = goog.dom.vendor.getVendorJsPrefix() || '';\n  return (prefix + eventType).toLowerCase();\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities for element styles.\n *\n * @author arv@google.com (Erik Arvidsson)\n * @author eae@google.com (Emil A Eklund)\n * @see ../demos/inline_block_quirks.html\n * @see ../demos/inline_block_standards.html\n * @see ../demos/style_viewport.html\n */\n\ngoog.provide('goog.style');\n\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.dom');\ngoog.require('goog.dom.NodeType');\ngoog.require('goog.dom.TagName');\ngoog.require('goog.dom.vendor');\ngoog.require('goog.html.SafeStyleSheet');\ngoog.require('goog.math.Box');\ngoog.require('goog.math.Coordinate');\ngoog.require('goog.math.Rect');\ngoog.require('goog.math.Size');\ngoog.require('goog.object');\ngoog.require('goog.reflect');\ngoog.require('goog.string');\ngoog.require('goog.userAgent');\n\ngoog.forwardDeclare('goog.events.Event');\n\n\n/**\n * Sets a style value on an element.\n *\n * This function is not indended to patch issues in the browser's style\n * handling, but to allow easy programmatic access to setting dash-separated\n * style properties.  An example is setting a batch of properties from a data\n * object without overwriting old styles.  When possible, use native APIs:\n * elem.style.propertyKey = 'value' or (if obliterating old styles is fine)\n * elem.style.cssText = 'property1: value1; property2: value2'.\n *\n * @param {Element} element The element to change.\n * @param {string|Object} style If a string, a style name. If an object, a hash\n *     of style names to style values.\n * @param {string|number|boolean=} opt_value If style was a string, then this\n *     should be the value.\n */\ngoog.style.setStyle = function(element, style, opt_value) {\n  if (goog.isString(style)) {\n    goog.style.setStyle_(element, opt_value, style);\n  } else {\n    for (var key in style) {\n      goog.style.setStyle_(element, style[key], key);\n    }\n  }\n};\n\n\n/**\n * Sets a style value on an element, with parameters swapped to work with\n * `goog.object.forEach()`. Prepends a vendor-specific prefix when\n * necessary.\n * @param {Element} element The element to change.\n * @param {string|number|boolean|undefined} value Style value.\n * @param {string} style Style name.\n * @private\n */\ngoog.style.setStyle_ = function(element, value, style) {\n  var propertyName = goog.style.getVendorJsStyleName_(element, style);\n\n  if (propertyName) {\n    // TODO(johnlenz): coerce to string?\n    element.style[propertyName] = /** @type {?} */ (value);\n  }\n};\n\n\n/**\n * Style name cache that stores previous property name lookups.\n *\n * This is used by setStyle to speed up property lookups, entries look like:\n *   { StyleName: ActualPropertyName }\n *\n * @private {!Object<string, string>}\n */\ngoog.style.styleNameCache_ = {};\n\n\n/**\n * Returns the style property name in camel-case. If it does not exist and a\n * vendor-specific version of the property does exist, then return the vendor-\n * specific property name instead.\n * @param {Element} element The element to change.\n * @param {string} style Style name.\n * @return {string} Vendor-specific style.\n * @private\n */\ngoog.style.getVendorJsStyleName_ = function(element, style) {\n  var propertyName = goog.style.styleNameCache_[style];\n  if (!propertyName) {\n    var camelStyle = goog.string.toCamelCase(style);\n    propertyName = camelStyle;\n\n    if (element.style[camelStyle] === undefined) {\n      var prefixedStyle = goog.dom.vendor.getVendorJsPrefix() +\n          goog.string.toTitleCase(camelStyle);\n\n      if (element.style[prefixedStyle] !== undefined) {\n        propertyName = prefixedStyle;\n      }\n    }\n    goog.style.styleNameCache_[style] = propertyName;\n  }\n\n  return propertyName;\n};\n\n\n/**\n * Returns the style property name in CSS notation. If it does not exist and a\n * vendor-specific version of the property does exist, then return the vendor-\n * specific property name instead.\n * @param {Element} element The element to change.\n * @param {string} style Style name.\n * @return {string} Vendor-specific style.\n * @private\n */\ngoog.style.getVendorStyleName_ = function(element, style) {\n  var camelStyle = goog.string.toCamelCase(style);\n\n  if (element.style[camelStyle] === undefined) {\n    var prefixedStyle = goog.dom.vendor.getVendorJsPrefix() +\n        goog.string.toTitleCase(camelStyle);\n\n    if (element.style[prefixedStyle] !== undefined) {\n      return goog.dom.vendor.getVendorPrefix() + '-' + style;\n    }\n  }\n\n  return style;\n};\n\n\n/**\n * Retrieves an explicitly-set style value of a node. This returns '' if there\n * isn't a style attribute on the element or if this style property has not been\n * explicitly set in script.\n *\n * @param {Element} element Element to get style of.\n * @param {string} property Property to get, css-style (if you have a camel-case\n * property, use element.style[style]).\n * @return {string} Style value.\n */\ngoog.style.getStyle = function(element, property) {\n  // element.style is '' for well-known properties which are unset.\n  // For for browser specific styles as 'filter' is undefined\n  // so we need to return '' explicitly to make it consistent across\n  // browsers.\n  var styleValue = element.style[goog.string.toCamelCase(property)];\n\n  // Using typeof here because of a bug in Safari 5.1, where this value\n  // was undefined, but === undefined returned false.\n  if (typeof(styleValue) !== 'undefined') {\n    return styleValue;\n  }\n\n  return element.style[goog.style.getVendorJsStyleName_(element, property)] ||\n      '';\n};\n\n\n/**\n * Retrieves a computed style value of a node. It returns empty string if the\n * value cannot be computed (which will be the case in Internet Explorer) or\n * \"none\" if the property requested is an SVG one and it has not been\n * explicitly set (firefox and webkit).\n *\n * @param {Element} element Element to get style of.\n * @param {string} property Property to get (camel-case).\n * @return {string} Style value.\n */\ngoog.style.getComputedStyle = function(element, property) {\n  var doc = goog.dom.getOwnerDocument(element);\n  if (doc.defaultView && doc.defaultView.getComputedStyle) {\n    var styles = doc.defaultView.getComputedStyle(element, null);\n    if (styles) {\n      // element.style[..] is undefined for browser specific styles\n      // as 'filter'.\n      return styles[property] || styles.getPropertyValue(property) || '';\n    }\n  }\n\n  return '';\n};\n\n\n/**\n * Gets the cascaded style value of a node, or null if the value cannot be\n * computed (only Internet Explorer can do this).\n *\n * @param {Element} element Element to get style of.\n * @param {string} style Property to get (camel-case).\n * @return {string} Style value.\n */\ngoog.style.getCascadedStyle = function(element, style) {\n  // TODO(nicksantos): This should be documented to return null. #fixTypes\n  return /** @type {string} */ (\n      element.currentStyle ? element.currentStyle[style] : null);\n};\n\n\n/**\n * Cross-browser pseudo get computed style. It returns the computed style where\n * available. If not available it tries the cascaded style value (IE\n * currentStyle) and in worst case the inline style value.  It shouldn't be\n * called directly, see http://wiki/Main/ComputedStyleVsCascadedStyle for\n * discussion.\n *\n * @param {Element} element Element to get style of.\n * @param {string} style Property to get (must be camelCase, not css-style.).\n * @return {string} Style value.\n * @private\n */\ngoog.style.getStyle_ = function(element, style) {\n  return goog.style.getComputedStyle(element, style) ||\n      goog.style.getCascadedStyle(element, style) ||\n      (element.style && element.style[style]);\n};\n\n\n/**\n * Retrieves the computed value of the box-sizing CSS attribute.\n * Browser support: http://caniuse.com/css3-boxsizing.\n * @param {!Element} element The element whose box-sizing to get.\n * @return {?string} 'content-box', 'border-box' or 'padding-box'. null if\n *     box-sizing is not supported (IE7 and below).\n */\ngoog.style.getComputedBoxSizing = function(element) {\n  return goog.style.getStyle_(element, 'boxSizing') ||\n      goog.style.getStyle_(element, 'MozBoxSizing') ||\n      goog.style.getStyle_(element, 'WebkitBoxSizing') || null;\n};\n\n\n/**\n * Retrieves the computed value of the position CSS attribute.\n * @param {Element} element The element to get the position of.\n * @return {string} Position value.\n */\ngoog.style.getComputedPosition = function(element) {\n  return goog.style.getStyle_(element, 'position');\n};\n\n\n/**\n * Retrieves the computed background color string for a given element. The\n * string returned is suitable for assigning to another element's\n * background-color, but is not guaranteed to be in any particular string\n * format. Accessing the color in a numeric form may not be possible in all\n * browsers or with all input.\n *\n * If the background color for the element is defined as a hexadecimal value,\n * the resulting string can be parsed by goog.color.parse in all supported\n * browsers.\n *\n * Whether named colors like \"red\" or \"lightblue\" get translated into a\n * format which can be parsed is browser dependent. Calling this function on\n * transparent elements will return \"transparent\" in most browsers or\n * \"rgba(0, 0, 0, 0)\" in WebKit.\n * @param {Element} element The element to get the background color of.\n * @return {string} The computed string value of the background color.\n */\ngoog.style.getBackgroundColor = function(element) {\n  return goog.style.getStyle_(element, 'backgroundColor');\n};\n\n\n/**\n * Retrieves the computed value of the overflow-x CSS attribute.\n * @param {Element} element The element to get the overflow-x of.\n * @return {string} The computed string value of the overflow-x attribute.\n */\ngoog.style.getComputedOverflowX = function(element) {\n  return goog.style.getStyle_(element, 'overflowX');\n};\n\n\n/**\n * Retrieves the computed value of the overflow-y CSS attribute.\n * @param {Element} element The element to get the overflow-y of.\n * @return {string} The computed string value of the overflow-y attribute.\n */\ngoog.style.getComputedOverflowY = function(element) {\n  return goog.style.getStyle_(element, 'overflowY');\n};\n\n\n/**\n * Retrieves the computed value of the z-index CSS attribute.\n * @param {Element} element The element to get the z-index of.\n * @return {string|number} The computed value of the z-index attribute.\n */\ngoog.style.getComputedZIndex = function(element) {\n  return goog.style.getStyle_(element, 'zIndex');\n};\n\n\n/**\n * Retrieves the computed value of the text-align CSS attribute.\n * @param {Element} element The element to get the text-align of.\n * @return {string} The computed string value of the text-align attribute.\n */\ngoog.style.getComputedTextAlign = function(element) {\n  return goog.style.getStyle_(element, 'textAlign');\n};\n\n\n/**\n * Retrieves the computed value of the cursor CSS attribute.\n * @param {Element} element The element to get the cursor of.\n * @return {string} The computed string value of the cursor attribute.\n */\ngoog.style.getComputedCursor = function(element) {\n  return goog.style.getStyle_(element, 'cursor');\n};\n\n\n/**\n * Retrieves the computed value of the CSS transform attribute.\n * @param {Element} element The element to get the transform of.\n * @return {string} The computed string representation of the transform matrix.\n */\ngoog.style.getComputedTransform = function(element) {\n  var property = goog.style.getVendorStyleName_(element, 'transform');\n  return goog.style.getStyle_(element, property) ||\n      goog.style.getStyle_(element, 'transform');\n};\n\n\n/**\n * Sets the top/left values of an element.  If no unit is specified in the\n * argument then it will add px. The second argument is required if the first\n * argument is a string or number and is ignored if the first argument\n * is a coordinate.\n * @param {Element} el Element to move.\n * @param {string|number|goog.math.Coordinate} arg1 Left position or coordinate.\n * @param {string|number=} opt_arg2 Top position.\n */\ngoog.style.setPosition = function(el, arg1, opt_arg2) {\n  var x, y;\n\n  if (arg1 instanceof goog.math.Coordinate) {\n    x = arg1.x;\n    y = arg1.y;\n  } else {\n    x = arg1;\n    y = opt_arg2;\n  }\n\n  el.style.left = goog.style.getPixelStyleValue_(\n      /** @type {number|string} */ (x), false);\n  el.style.top = goog.style.getPixelStyleValue_(\n      /** @type {number|string} */ (y), false);\n};\n\n\n/**\n * Gets the offsetLeft and offsetTop properties of an element and returns them\n * in a Coordinate object\n * @param {Element} element Element.\n * @return {!goog.math.Coordinate} The position.\n */\ngoog.style.getPosition = function(element) {\n  return new goog.math.Coordinate(\n      /** @type {!HTMLElement} */ (element).offsetLeft,\n      /** @type {!HTMLElement} */ (element).offsetTop);\n};\n\n\n/**\n * Returns the viewport element for a particular document\n * @param {Node=} opt_node DOM node (Document is OK) to get the viewport element\n *     of.\n * @return {Element} document.documentElement or document.body.\n */\ngoog.style.getClientViewportElement = function(opt_node) {\n  var doc;\n  if (opt_node) {\n    doc = goog.dom.getOwnerDocument(opt_node);\n  } else {\n    doc = goog.dom.getDocument();\n  }\n\n  // In old IE versions the document.body represented the viewport\n  if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(9) &&\n      !goog.dom.getDomHelper(doc).isCss1CompatMode()) {\n    return doc.body;\n  }\n  return doc.documentElement;\n};\n\n\n/**\n * Calculates the viewport coordinates relative to the page/document\n * containing the node. The viewport may be the browser viewport for\n * non-iframe document, or the iframe container for iframe'd document.\n * @param {!Document} doc The document to use as the reference point.\n * @return {!goog.math.Coordinate} The page offset of the viewport.\n */\ngoog.style.getViewportPageOffset = function(doc) {\n  var body = doc.body;\n  var documentElement = doc.documentElement;\n  var scrollLeft = body.scrollLeft || documentElement.scrollLeft;\n  var scrollTop = body.scrollTop || documentElement.scrollTop;\n  return new goog.math.Coordinate(scrollLeft, scrollTop);\n};\n\n\n/**\n * Gets the client rectangle of the DOM element.\n *\n * getBoundingClientRect is part of a new CSS object model draft (with a\n * long-time presence in IE), replacing the error-prone parent offset\n * computation and the now-deprecated Gecko getBoxObjectFor.\n *\n * This utility patches common browser bugs in getBoundingClientRect. It\n * will fail if getBoundingClientRect is unsupported.\n *\n * If the element is not in the DOM, the result is undefined, and an error may\n * be thrown depending on user agent.\n *\n * @param {!Element} el The element whose bounding rectangle is being queried.\n * @return {Object} A native bounding rectangle with numerical left, top,\n *     right, and bottom.  Reported by Firefox to be of object type ClientRect.\n * @private\n */\ngoog.style.getBoundingClientRect_ = function(el) {\n  var rect;\n  try {\n    rect = el.getBoundingClientRect();\n  } catch (e) {\n    // In IE < 9, calling getBoundingClientRect on an orphan element raises an\n    // \"Unspecified Error\". All other browsers return zeros.\n    return {'left': 0, 'top': 0, 'right': 0, 'bottom': 0};\n  }\n\n  // Patch the result in IE only, so that this function can be inlined if\n  // compiled for non-IE.\n  if (goog.userAgent.IE && el.ownerDocument.body) {\n    // In IE, most of the time, 2 extra pixels are added to the top and left\n    // due to the implicit 2-pixel inset border.  In IE6/7 quirks mode and\n    // IE6 standards mode, this border can be overridden by setting the\n    // document element's border to zero -- thus, we cannot rely on the\n    // offset always being 2 pixels.\n\n    // In quirks mode, the offset can be determined by querying the body's\n    // clientLeft/clientTop, but in standards mode, it is found by querying\n    // the document element's clientLeft/clientTop.  Since we already called\n    // getBoundingClientRect we have already forced a reflow, so it is not\n    // too expensive just to query them all.\n\n    // See: http://msdn.microsoft.com/en-us/library/ms536433(VS.85).aspx\n    var doc = el.ownerDocument;\n    rect.left -= doc.documentElement.clientLeft + doc.body.clientLeft;\n    rect.top -= doc.documentElement.clientTop + doc.body.clientTop;\n  }\n  return rect;\n};\n\n\n/**\n * Returns the first parent that could affect the position of a given element.\n * @param {Element} element The element to get the offset parent for.\n * @return {Element} The first offset parent or null if one cannot be found.\n */\ngoog.style.getOffsetParent = function(element) {\n  // element.offsetParent does the right thing in IE7 and below.  In other\n  // browsers it only includes elements with position absolute, relative or\n  // fixed, not elements with overflow set to auto or scroll.\n  if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(8)) {\n    goog.asserts.assert(element && 'offsetParent' in element);\n    return element.offsetParent;\n  }\n\n  var doc = goog.dom.getOwnerDocument(element);\n  var positionStyle = goog.style.getStyle_(element, 'position');\n  var skipStatic = positionStyle == 'fixed' || positionStyle == 'absolute';\n  for (var parent = element.parentNode; parent && parent != doc;\n       parent = parent.parentNode) {\n    // Skip shadowDOM roots.\n    if (parent.nodeType == goog.dom.NodeType.DOCUMENT_FRAGMENT && parent.host) {\n      // Cast because the assignment is not type safe, and without a cast we\n      // start typing parent loosely and get bad disambiguation.\n      parent = /** @type {!Element} */ (parent.host);\n    }\n    positionStyle =\n        goog.style.getStyle_(/** @type {!Element} */ (parent), 'position');\n    skipStatic = skipStatic && positionStyle == 'static' &&\n        parent != doc.documentElement && parent != doc.body;\n    if (!skipStatic &&\n        (parent.scrollWidth > parent.clientWidth ||\n         parent.scrollHeight > parent.clientHeight ||\n         positionStyle == 'fixed' || positionStyle == 'absolute' ||\n         positionStyle == 'relative')) {\n      return /** @type {!Element} */ (parent);\n    }\n  }\n  return null;\n};\n\n\n/**\n * Calculates and returns the visible rectangle for a given element. Returns a\n * box describing the visible portion of the nearest scrollable offset ancestor.\n * Coordinates are given relative to the document.\n *\n * @param {Element} element Element to get the visible rect for.\n * @return {goog.math.Box} Bounding elementBox describing the visible rect or\n *     null if scrollable ancestor isn't inside the visible viewport.\n */\ngoog.style.getVisibleRectForElement = function(element) {\n  var visibleRect = new goog.math.Box(0, Infinity, Infinity, 0);\n  var dom = goog.dom.getDomHelper(element);\n  var body = dom.getDocument().body;\n  var documentElement = dom.getDocument().documentElement;\n  var scrollEl = dom.getDocumentScrollElement();\n\n  // Determine the size of the visible rect by climbing the dom accounting for\n  // all scrollable containers.\n  for (var el = element; el = goog.style.getOffsetParent(el);) {\n    // clientWidth is zero for inline block elements in IE.\n    // on WEBKIT, body element can have clientHeight = 0 and scrollHeight > 0\n    if ((!goog.userAgent.IE || el.clientWidth != 0) &&\n        (!goog.userAgent.WEBKIT || el.clientHeight != 0 || el != body) &&\n        // body may have overflow set on it, yet we still get the entire\n        // viewport. In some browsers, el.offsetParent may be\n        // document.documentElement, so check for that too.\n        (el != body && el != documentElement &&\n         goog.style.getStyle_(el, 'overflow') != 'visible')) {\n      var pos = goog.style.getPageOffset(el);\n      var client = goog.style.getClientLeftTop(el);\n      pos.x += client.x;\n      pos.y += client.y;\n\n      visibleRect.top = Math.max(visibleRect.top, pos.y);\n      visibleRect.right = Math.min(visibleRect.right, pos.x + el.clientWidth);\n      visibleRect.bottom =\n          Math.min(visibleRect.bottom, pos.y + el.clientHeight);\n      visibleRect.left = Math.max(visibleRect.left, pos.x);\n    }\n  }\n\n  // Clip by window's viewport.\n  var scrollX = scrollEl.scrollLeft, scrollY = scrollEl.scrollTop;\n  visibleRect.left = Math.max(visibleRect.left, scrollX);\n  visibleRect.top = Math.max(visibleRect.top, scrollY);\n  var winSize = dom.getViewportSize();\n  visibleRect.right = Math.min(visibleRect.right, scrollX + winSize.width);\n  visibleRect.bottom = Math.min(visibleRect.bottom, scrollY + winSize.height);\n  return visibleRect.top >= 0 && visibleRect.left >= 0 &&\n          visibleRect.bottom > visibleRect.top &&\n          visibleRect.right > visibleRect.left ?\n      visibleRect :\n      null;\n};\n\n\n/**\n * Calculate the scroll position of `container` with the minimum amount so\n * that the content and the borders of the given `element` become visible.\n * If the element is bigger than the container, its top left corner will be\n * aligned as close to the container's top left corner as possible.\n *\n * @param {Element} element The element to make visible.\n * @param {Element=} opt_container The container to scroll. If not set, then the\n *     document scroll element will be used.\n * @param {boolean=} opt_center Whether to center the element in the container.\n *     Defaults to false.\n * @return {!goog.math.Coordinate} The new scroll position of the container,\n *     in form of goog.math.Coordinate(scrollLeft, scrollTop).\n */\ngoog.style.getContainerOffsetToScrollInto = function(\n    element, opt_container, opt_center) {\n  var container = opt_container || goog.dom.getDocumentScrollElement();\n  // Absolute position of the element's border's top left corner.\n  var elementPos = goog.style.getPageOffset(element);\n  // Absolute position of the container's border's top left corner.\n  var containerPos = goog.style.getPageOffset(container);\n  var containerBorder = goog.style.getBorderBox(container);\n  if (container == goog.dom.getDocumentScrollElement()) {\n    // The element position is calculated based on the page offset, and the\n    // document scroll element holds the scroll position within the page. We can\n    // use the scroll position to calculate the relative position from the\n    // element.\n    var relX = elementPos.x - container.scrollLeft;\n    var relY = elementPos.y - container.scrollTop;\n    if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(10)) {\n      // In older versions of IE getPageOffset(element) does not include the\n      // container border so it has to be added to accommodate.\n      relX += containerBorder.left;\n      relY += containerBorder.top;\n    }\n  } else {\n    // Relative pos. of the element's border box to the container's content box.\n    var relX = elementPos.x - containerPos.x - containerBorder.left;\n    var relY = elementPos.y - containerPos.y - containerBorder.top;\n  }\n  // How much the element can move in the container, i.e. the difference between\n  // the element's bottom-right-most and top-left-most position where it's\n  // fully visible.\n  var elementSize = goog.style.getSizeWithDisplay_(element);\n  var spaceX = container.clientWidth - elementSize.width;\n  var spaceY = container.clientHeight - elementSize.height;\n  var scrollLeft = container.scrollLeft;\n  var scrollTop = container.scrollTop;\n  if (opt_center) {\n    // All browsers round non-integer scroll positions down.\n    scrollLeft += relX - spaceX / 2;\n    scrollTop += relY - spaceY / 2;\n  } else {\n    // This formula was designed to give the correct scroll values in the\n    // following cases:\n    // - element is higher than container (spaceY < 0) => scroll down by relY\n    // - element is not higher that container (spaceY >= 0):\n    //   - it is above container (relY < 0) => scroll up by abs(relY)\n    //   - it is below container (relY > spaceY) => scroll down by relY - spaceY\n    //   - it is in the container => don't scroll\n    scrollLeft += Math.min(relX, Math.max(relX - spaceX, 0));\n    scrollTop += Math.min(relY, Math.max(relY - spaceY, 0));\n  }\n  return new goog.math.Coordinate(scrollLeft, scrollTop);\n};\n\n\n/**\n * Changes the scroll position of `container` with the minimum amount so\n * that the content and the borders of the given `element` become visible.\n * If the element is bigger than the container, its top left corner will be\n * aligned as close to the container's top left corner as possible.\n *\n * @param {Element} element The element to make visible.\n * @param {Element=} opt_container The container to scroll. If not set, then the\n *     document scroll element will be used.\n * @param {boolean=} opt_center Whether to center the element in the container.\n *     Defaults to false.\n */\ngoog.style.scrollIntoContainerView = function(\n    element, opt_container, opt_center) {\n  var container = opt_container || goog.dom.getDocumentScrollElement();\n  var offset =\n      goog.style.getContainerOffsetToScrollInto(element, container, opt_center);\n  container.scrollLeft = offset.x;\n  container.scrollTop = offset.y;\n};\n\n\n/**\n * Returns clientLeft (width of the left border and, if the directionality is\n * right to left, the vertical scrollbar) and clientTop as a coordinate object.\n *\n * @param {Element} el Element to get clientLeft for.\n * @return {!goog.math.Coordinate} Client left and top.\n */\ngoog.style.getClientLeftTop = function(el) {\n  return new goog.math.Coordinate(el.clientLeft, el.clientTop);\n};\n\n\n/**\n * Returns a Coordinate object relative to the top-left of the HTML document.\n * Implemented as a single function to save having to do two recursive loops in\n * opera and safari just to get both coordinates.  If you just want one value do\n * use goog.style.getPageOffsetLeft() and goog.style.getPageOffsetTop(), but\n * note if you call both those methods the tree will be analysed twice.\n *\n * @param {Element} el Element to get the page offset for.\n * @return {!goog.math.Coordinate} The page offset.\n */\ngoog.style.getPageOffset = function(el) {\n  var doc = goog.dom.getOwnerDocument(el);\n  // TODO(gboyer): Update the jsdoc in a way that doesn't break the universe.\n  goog.asserts.assertObject(el, 'Parameter is required');\n\n  // NOTE(arv): If element is hidden (display none or disconnected or any the\n  // ancestors are hidden) we get (0,0) by default but we still do the\n  // accumulation of scroll position.\n\n  // TODO(arv): Should we check if the node is disconnected and in that case\n  //            return (0,0)?\n\n  var pos = new goog.math.Coordinate(0, 0);\n  var viewportElement = goog.style.getClientViewportElement(doc);\n  if (el == viewportElement) {\n    // viewport is always at 0,0 as that defined the coordinate system for this\n    // function - this avoids special case checks in the code below\n    return pos;\n  }\n\n  var box = goog.style.getBoundingClientRect_(el);\n  // Must add the scroll coordinates in to get the absolute page offset\n  // of element since getBoundingClientRect returns relative coordinates to\n  // the viewport.\n  var scrollCoord = goog.dom.getDomHelper(doc).getDocumentScroll();\n  pos.x = box.left + scrollCoord.x;\n  pos.y = box.top + scrollCoord.y;\n\n  return pos;\n};\n\n\n/**\n * Returns the left coordinate of an element relative to the HTML document\n * @param {Element} el Elements.\n * @return {number} The left coordinate.\n */\ngoog.style.getPageOffsetLeft = function(el) {\n  return goog.style.getPageOffset(el).x;\n};\n\n\n/**\n * Returns the top coordinate of an element relative to the HTML document\n * @param {Element} el Elements.\n * @return {number} The top coordinate.\n */\ngoog.style.getPageOffsetTop = function(el) {\n  return goog.style.getPageOffset(el).y;\n};\n\n\n/**\n * Returns a Coordinate object relative to the top-left of an HTML document\n * in an ancestor frame of this element. Used for measuring the position of\n * an element inside a frame relative to a containing frame.\n *\n * @param {Element} el Element to get the page offset for.\n * @param {Window} relativeWin The window to measure relative to. If relativeWin\n *     is not in the ancestor frame chain of the element, we measure relative to\n *     the top-most window.\n * @return {!goog.math.Coordinate} The page offset.\n */\ngoog.style.getFramedPageOffset = function(el, relativeWin) {\n  var position = new goog.math.Coordinate(0, 0);\n\n  // Iterate up the ancestor frame chain, keeping track of the current window\n  // and the current element in that window.\n  var currentWin = goog.dom.getWindow(goog.dom.getOwnerDocument(el));\n\n  // MS Edge throws when accessing \"parent\" if el's containing iframe has been\n  // deleted.\n  if (!goog.reflect.canAccessProperty(currentWin, 'parent')) {\n    return position;\n  }\n\n  var currentEl = el;\n  do {\n    // if we're at the top window, we want to get the page offset.\n    // if we're at an inner frame, we only want to get the window position\n    // so that we can determine the actual page offset in the context of\n    // the outer window.\n    var offset = currentWin == relativeWin ?\n        goog.style.getPageOffset(currentEl) :\n        goog.style.getClientPositionForElement_(goog.asserts.assert(currentEl));\n\n    position.x += offset.x;\n    position.y += offset.y;\n  } while (currentWin && currentWin != relativeWin &&\n           currentWin != currentWin.parent &&\n           (currentEl = currentWin.frameElement) &&\n           (currentWin = currentWin.parent));\n\n  return position;\n};\n\n\n/**\n * Translates the specified rect relative to origBase page, for newBase page.\n * If origBase and newBase are the same, this function does nothing.\n *\n * @param {goog.math.Rect} rect The source rectangle relative to origBase page,\n *     and it will have the translated result.\n * @param {goog.dom.DomHelper} origBase The DomHelper for the input rectangle.\n * @param {goog.dom.DomHelper} newBase The DomHelper for the resultant\n *     coordinate.  This must be a DOM for an ancestor frame of origBase\n *     or the same as origBase.\n */\ngoog.style.translateRectForAnotherFrame = function(rect, origBase, newBase) {\n  if (origBase.getDocument() != newBase.getDocument()) {\n    var body = origBase.getDocument().body;\n    var pos = goog.style.getFramedPageOffset(body, newBase.getWindow());\n\n    // Adjust Body's margin.\n    pos = goog.math.Coordinate.difference(pos, goog.style.getPageOffset(body));\n\n    if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(9) &&\n        !origBase.isCss1CompatMode()) {\n      pos = goog.math.Coordinate.difference(pos, origBase.getDocumentScroll());\n    }\n\n    rect.left += pos.x;\n    rect.top += pos.y;\n  }\n};\n\n\n/**\n * Returns the position of an element relative to another element in the\n * document.  A relative to B\n * @param {Element|Event|goog.events.Event} a Element or mouse event whose\n *     position we're calculating.\n * @param {Element|Event|goog.events.Event} b Element or mouse event position\n *     is relative to.\n * @return {!goog.math.Coordinate} The relative position.\n */\ngoog.style.getRelativePosition = function(a, b) {\n  var ap = goog.style.getClientPosition(a);\n  var bp = goog.style.getClientPosition(b);\n  return new goog.math.Coordinate(ap.x - bp.x, ap.y - bp.y);\n};\n\n\n/**\n * Returns the position of the event or the element's border box relative to\n * the client viewport.\n * @param {!Element} el Element whose position to get.\n * @return {!goog.math.Coordinate} The position.\n * @private\n */\ngoog.style.getClientPositionForElement_ = function(el) {\n  var box = goog.style.getBoundingClientRect_(el);\n  return new goog.math.Coordinate(box.left, box.top);\n};\n\n\n/**\n * Returns the position of the event or the element's border box relative to\n * the client viewport. If an event is passed, and if this event is a \"touch\"\n * event, then the position of the first changedTouches will be returned.\n * @param {Element|Event|goog.events.Event} el Element or a mouse / touch event.\n * @return {!goog.math.Coordinate} The position.\n */\ngoog.style.getClientPosition = function(el) {\n  goog.asserts.assert(el);\n  if (el.nodeType == goog.dom.NodeType.ELEMENT) {\n    return goog.style.getClientPositionForElement_(\n        /** @type {!Element} */ (el));\n  } else {\n    var targetEvent = el.changedTouches ? el.changedTouches[0] : el;\n    return new goog.math.Coordinate(targetEvent.clientX, targetEvent.clientY);\n  }\n};\n\n\n/**\n * Moves an element to the given coordinates relative to the client viewport.\n * @param {Element} el Absolutely positioned element to set page offset for.\n *     It must be in the document.\n * @param {number|goog.math.Coordinate} x Left position of the element's margin\n *     box or a coordinate object.\n * @param {number=} opt_y Top position of the element's margin box.\n */\ngoog.style.setPageOffset = function(el, x, opt_y) {\n  // Get current pageoffset\n  var cur = goog.style.getPageOffset(el);\n\n  if (x instanceof goog.math.Coordinate) {\n    opt_y = x.y;\n    x = x.x;\n  }\n\n  // NOTE(arv): We cannot allow strings for x and y. We could but that would\n  // require us to manually transform between different units\n\n  // Work out deltas\n  var dx = goog.asserts.assertNumber(x) - cur.x;\n  var dy = Number(opt_y) - cur.y;\n\n  // Set position to current left/top + delta\n  goog.style.setPosition(\n      el, /** @type {!HTMLElement} */ (el).offsetLeft + dx,\n      /** @type {!HTMLElement} */ (el).offsetTop + dy);\n};\n\n\n/**\n * Sets the width/height values of an element.  If an argument is numeric,\n * or a goog.math.Size is passed, it is assumed to be pixels and will add\n * 'px' after converting it to an integer in string form. (This just sets the\n * CSS width and height properties so it might set content-box or border-box\n * size depending on the box model the browser is using.)\n *\n * @param {Element} element Element to set the size of.\n * @param {string|number|goog.math.Size} w Width of the element, or a\n *     size object.\n * @param {string|number=} opt_h Height of the element. Required if w is not a\n *     size object.\n */\ngoog.style.setSize = function(element, w, opt_h) {\n  var h;\n  if (w instanceof goog.math.Size) {\n    h = w.height;\n    w = w.width;\n  } else {\n    if (opt_h == undefined) {\n      throw new Error('missing height argument');\n    }\n    h = opt_h;\n  }\n\n  goog.style.setWidth(element, /** @type {string|number} */ (w));\n  goog.style.setHeight(element, h);\n};\n\n\n/**\n * Helper function to create a string to be set into a pixel-value style\n * property of an element. Can round to the nearest integer value.\n *\n * @param {string|number} value The style value to be used. If a number,\n *     'px' will be appended, otherwise the value will be applied directly.\n * @param {boolean} round Whether to round the nearest integer (if property\n *     is a number).\n * @return {string} The string value for the property.\n * @private\n */\ngoog.style.getPixelStyleValue_ = function(value, round) {\n  if (typeof value == 'number') {\n    value = (round ? Math.round(value) : value) + 'px';\n  }\n\n  return value;\n};\n\n\n/**\n * Set the height of an element.  Sets the element's style property.\n * @param {Element} element Element to set the height of.\n * @param {string|number} height The height value to set.  If a number, 'px'\n *     will be appended, otherwise the value will be applied directly.\n */\ngoog.style.setHeight = function(element, height) {\n  element.style.height = goog.style.getPixelStyleValue_(height, true);\n};\n\n\n/**\n * Set the width of an element.  Sets the element's style property.\n * @param {Element} element Element to set the width of.\n * @param {string|number} width The width value to set.  If a number, 'px'\n *     will be appended, otherwise the value will be applied directly.\n */\ngoog.style.setWidth = function(element, width) {\n  element.style.width = goog.style.getPixelStyleValue_(width, true);\n};\n\n\n/**\n * Gets the height and width of an element, even if its display is none.\n *\n * Specifically, this returns the height and width of the border box,\n * irrespective of the box model in effect.\n *\n * Note that this function does not take CSS transforms into account. Please see\n * `goog.style.getTransformedSize`.\n * @param {Element} element Element to get size of.\n * @return {!goog.math.Size} Object with width/height properties.\n */\ngoog.style.getSize = function(element) {\n  return goog.style.evaluateWithTemporaryDisplay_(\n      goog.style.getSizeWithDisplay_, /** @type {!Element} */ (element));\n};\n\n\n/**\n * Call `fn` on `element` such that `element`'s dimensions are\n * accurate when it's passed to `fn`.\n * @param {function(!Element): T} fn Function to call with `element` as\n *     an argument after temporarily changing `element`'s display such\n *     that its dimensions are accurate.\n * @param {!Element} element Element (which may have display none) to use as\n *     argument to `fn`.\n * @return {T} Value returned by calling `fn` with `element`.\n * @template T\n * @private\n */\ngoog.style.evaluateWithTemporaryDisplay_ = function(fn, element) {\n  if (goog.style.getStyle_(element, 'display') != 'none') {\n    return fn(element);\n  }\n\n  var style = element.style;\n  var originalDisplay = style.display;\n  var originalVisibility = style.visibility;\n  var originalPosition = style.position;\n\n  style.visibility = 'hidden';\n  style.position = 'absolute';\n  style.display = 'inline';\n\n  var retVal = fn(element);\n\n  style.display = originalDisplay;\n  style.position = originalPosition;\n  style.visibility = originalVisibility;\n\n  return retVal;\n};\n\n\n/**\n * Gets the height and width of an element when the display is not none.\n * @param {Element} element Element to get size of.\n * @return {!goog.math.Size} Object with width/height properties.\n * @private\n */\ngoog.style.getSizeWithDisplay_ = function(element) {\n  var offsetWidth = /** @type {!HTMLElement} */ (element).offsetWidth;\n  var offsetHeight = /** @type {!HTMLElement} */ (element).offsetHeight;\n  var webkitOffsetsZero =\n      goog.userAgent.WEBKIT && !offsetWidth && !offsetHeight;\n  if ((!goog.isDef(offsetWidth) || webkitOffsetsZero) &&\n      element.getBoundingClientRect) {\n    // Fall back to calling getBoundingClientRect when offsetWidth or\n    // offsetHeight are not defined, or when they are zero in WebKit browsers.\n    // This makes sure that we return for the correct size for SVG elements, but\n    // will still return 0 on Webkit prior to 534.8, see\n    // http://trac.webkit.org/changeset/67252.\n    var clientRect = goog.style.getBoundingClientRect_(element);\n    return new goog.math.Size(\n        clientRect.right - clientRect.left, clientRect.bottom - clientRect.top);\n  }\n  return new goog.math.Size(offsetWidth, offsetHeight);\n};\n\n\n/**\n * Gets the height and width of an element, post transform, even if its display\n * is none.\n *\n * This is like `goog.style.getSize`, except:\n * <ol>\n * <li>Takes webkitTransforms such as rotate and scale into account.\n * <li>Will return null if `element` doesn't respond to\n *     `getBoundingClientRect`.\n * <li>Currently doesn't make sense on non-WebKit browsers which don't support\n *    webkitTransforms.\n * </ol>\n * @param {!Element} element Element to get size of.\n * @return {goog.math.Size} Object with width/height properties.\n */\ngoog.style.getTransformedSize = function(element) {\n  if (!element.getBoundingClientRect) {\n    return null;\n  }\n\n  var clientRect = goog.style.evaluateWithTemporaryDisplay_(\n      goog.style.getBoundingClientRect_, element);\n  return new goog.math.Size(\n      clientRect.right - clientRect.left, clientRect.bottom - clientRect.top);\n};\n\n\n/**\n * Returns a bounding rectangle for a given element in page space.\n * @param {Element} element Element to get bounds of. Must not be display none.\n * @return {!goog.math.Rect} Bounding rectangle for the element.\n */\ngoog.style.getBounds = function(element) {\n  var o = goog.style.getPageOffset(element);\n  var s = goog.style.getSize(element);\n  return new goog.math.Rect(o.x, o.y, s.width, s.height);\n};\n\n\n/**\n * Converts a CSS selector in the form style-property to styleProperty.\n * @param {*} selector CSS Selector.\n * @return {string} Camel case selector.\n * @deprecated Use goog.string.toCamelCase instead.\n */\ngoog.style.toCamelCase = function(selector) {\n  return goog.string.toCamelCase(String(selector));\n};\n\n\n/**\n * Converts a CSS selector in the form styleProperty to style-property.\n * @param {string} selector Camel case selector.\n * @return {string} Selector cased.\n * @deprecated Use goog.string.toSelectorCase instead.\n */\ngoog.style.toSelectorCase = function(selector) {\n  return goog.string.toSelectorCase(selector);\n};\n\n\n/**\n * Gets the opacity of a node (x-browser). This gets the inline style opacity\n * of the node, and does not take into account the cascaded or the computed\n * style for this node.\n * @param {Element} el Element whose opacity has to be found.\n * @return {number|string} Opacity between 0 and 1 or an empty string {@code ''}\n *     if the opacity is not set.\n */\ngoog.style.getOpacity = function(el) {\n  goog.asserts.assert(el);\n  var style = el.style;\n  var result = '';\n  if ('opacity' in style) {\n    result = style.opacity;\n  } else if ('MozOpacity' in style) {\n    result = style.MozOpacity;\n  } else if ('filter' in style) {\n    var match = style.filter.match(/alpha\\(opacity=([\\d.]+)\\)/);\n    if (match) {\n      result = String(match[1] / 100);\n    }\n  }\n  return result == '' ? result : Number(result);\n};\n\n\n/**\n * Sets the opacity of a node (x-browser).\n * @param {Element} el Elements whose opacity has to be set.\n * @param {number|string} alpha Opacity between 0 and 1 or an empty string\n *     {@code ''} to clear the opacity.\n */\ngoog.style.setOpacity = function(el, alpha) {\n  goog.asserts.assert(el);\n  var style = el.style;\n  if ('opacity' in style) {\n    style.opacity = alpha;\n  } else if ('MozOpacity' in style) {\n    style.MozOpacity = alpha;\n  } else if ('filter' in style) {\n    // TODO(arv): Overwriting the filter might have undesired side effects.\n    if (alpha === '') {\n      style.filter = '';\n    } else {\n      style.filter = 'alpha(opacity=' + (Number(alpha) * 100) + ')';\n    }\n  }\n};\n\n\n/**\n * Sets the background of an element to a transparent image in a browser-\n * independent manner.\n *\n * This function does not support repeating backgrounds or alternate background\n * positions to match the behavior of Internet Explorer. It also does not\n * support sizingMethods other than crop since they cannot be replicated in\n * browsers other than Internet Explorer.\n *\n * @param {Element} el The element to set background on.\n * @param {string} src The image source URL.\n */\ngoog.style.setTransparentBackgroundImage = function(el, src) {\n  var style = el.style;\n  // It is safe to use the style.filter in IE only. In Safari 'filter' is in\n  // style object but access to style.filter causes it to throw an exception.\n  // Note: IE8 supports images with an alpha channel.\n  if (goog.userAgent.IE && !goog.userAgent.isVersionOrHigher('8')) {\n    // See TODO in setOpacity.\n    style.filter = 'progid:DXImageTransform.Microsoft.AlphaImageLoader(' +\n        'src=\"' + src + '\", sizingMethod=\"crop\")';\n  } else {\n    // Set style properties individually instead of using background shorthand\n    // to prevent overwriting a pre-existing background color.\n    style.backgroundImage = 'url(' + src + ')';\n    style.backgroundPosition = 'top left';\n    style.backgroundRepeat = 'no-repeat';\n  }\n};\n\n\n/**\n * Clears the background image of an element in a browser independent manner.\n * @param {Element} el The element to clear background image for.\n */\ngoog.style.clearTransparentBackgroundImage = function(el) {\n  var style = el.style;\n  if ('filter' in style) {\n    // See TODO in setOpacity.\n    style.filter = '';\n  } else {\n    // Set style properties individually instead of using background shorthand\n    // to prevent overwriting a pre-existing background color.\n    style.backgroundImage = 'none';\n  }\n};\n\n\n/**\n * Shows or hides an element from the page. Hiding the element is done by\n * setting the display property to \"none\", removing the element from the\n * rendering hierarchy so it takes up no space. To show the element, the default\n * inherited display property is restored (defined either in stylesheets or by\n * the browser's default style rules.)\n *\n * Caveat 1: if the inherited display property for the element is set to \"none\"\n * by the stylesheets, that is the property that will be restored by a call to\n * showElement(), effectively toggling the display between \"none\" and \"none\".\n *\n * Caveat 2: if the element display style is set inline (by setting either\n * element.style.display or a style attribute in the HTML), a call to\n * showElement will clear that setting and defer to the inherited style in the\n * stylesheet.\n * @param {Element} el Element to show or hide.\n * @param {*} display True to render the element in its default style,\n *     false to disable rendering the element.\n * @deprecated Use goog.style.setElementShown instead.\n */\ngoog.style.showElement = function(el, display) {\n  goog.style.setElementShown(el, display);\n};\n\n\n/**\n * Shows or hides an element from the page. Hiding the element is done by\n * setting the display property to \"none\", removing the element from the\n * rendering hierarchy so it takes up no space. To show the element, the default\n * inherited display property is restored (defined either in stylesheets or by\n * the browser's default style rules).\n *\n * Caveat 1: if the inherited display property for the element is set to \"none\"\n * by the stylesheets, that is the property that will be restored by a call to\n * setElementShown(), effectively toggling the display between \"none\" and\n * \"none\".\n *\n * Caveat 2: if the element display style is set inline (by setting either\n * element.style.display or a style attribute in the HTML), a call to\n * setElementShown will clear that setting and defer to the inherited style in\n * the stylesheet.\n * @param {Element} el Element to show or hide.\n * @param {*} isShown True to render the element in its default style,\n *     false to disable rendering the element.\n */\ngoog.style.setElementShown = function(el, isShown) {\n  el.style.display = isShown ? '' : 'none';\n};\n\n\n/**\n * Test whether the given element has been shown or hidden via a call to\n * {@link #setElementShown}.\n *\n * Note this is strictly a companion method for a call\n * to {@link #setElementShown} and the same caveats apply; in particular, this\n * method does not guarantee that the return value will be consistent with\n * whether or not the element is actually visible.\n *\n * @param {Element} el The element to test.\n * @return {boolean} Whether the element has been shown.\n * @see #setElementShown\n */\ngoog.style.isElementShown = function(el) {\n  return el.style.display != 'none';\n};\n\n\n/**\n * Installs the style sheet into the window that contains opt_node.  If\n * opt_node is null, the main window is used.\n * @param {!goog.html.SafeStyleSheet} safeStyleSheet The style sheet to install.\n * @param {?Node=} opt_node Node whose parent document should have the\n *     styles installed.\n * @return {!HTMLStyleElement|!StyleSheet} In IE<11, a StyleSheet object with no\n *     owning &lt;style&gt; tag (this is how IE creates style sheets).  In every\n *     other browser, a &lt;style&gt; element with an attached style.  This\n *     doesn't return a StyleSheet object so that setSafeStyleSheet can replace\n *     it (otherwise, if you pass a StyleSheet to setSafeStyleSheet, it will\n *     make a new StyleSheet and leave the original StyleSheet orphaned).\n */\ngoog.style.installSafeStyleSheet = function(safeStyleSheet, opt_node) {\n  var dh = goog.dom.getDomHelper(opt_node);\n\n  // IE < 11 requires createStyleSheet. Note that doc.createStyleSheet will be\n  // undefined as of IE 11.\n  var doc = dh.getDocument();\n  if (goog.userAgent.IE && doc.createStyleSheet) {\n    /** @type {(!HTMLStyleElement|!StyleSheet)} */\n    var styleSheet = doc.createStyleSheet();\n    goog.style.setSafeStyleSheet(styleSheet, safeStyleSheet);\n    return styleSheet;\n  } else {\n    var head = dh.getElementsByTagNameAndClass(goog.dom.TagName.HEAD)[0];\n\n    // In opera documents are not guaranteed to have a head element, thus we\n    // have to make sure one exists before using it.\n    if (!head) {\n      var body = dh.getElementsByTagNameAndClass(goog.dom.TagName.BODY)[0];\n      head = dh.createDom(goog.dom.TagName.HEAD);\n      body.parentNode.insertBefore(head, body);\n    }\n    var el = dh.createDom(goog.dom.TagName.STYLE);\n    // NOTE(user): Setting styles after the style element has been appended\n    // to the head results in a nasty Webkit bug in certain scenarios. Please\n    // refer to https://bugs.webkit.org/show_bug.cgi?id=26307 for additional\n    // details.\n    goog.style.setSafeStyleSheet(el, safeStyleSheet);\n    dh.appendChild(head, el);\n    return el;\n  }\n};\n\n\n/**\n * Removes the styles added by {@link #installStyles}.\n * @param {Element|StyleSheet} styleSheet The value returned by\n *     {@link #installStyles}.\n */\ngoog.style.uninstallStyles = function(styleSheet) {\n  var node = styleSheet.ownerNode || styleSheet.owningElement ||\n      /** @type {Element} */ (styleSheet);\n  goog.dom.removeNode(node);\n};\n\n\n/**\n * Sets the content of a style element.  The style element can be any valid\n * style element.  This element will have its content completely replaced by\n * the safeStyleSheet.\n * @param {!Element|!StyleSheet} element A stylesheet element as returned by\n *     installStyles.\n * @param {!goog.html.SafeStyleSheet} safeStyleSheet The new content of the\n *     stylesheet.\n */\ngoog.style.setSafeStyleSheet = function(element, safeStyleSheet) {\n  var stylesString = goog.html.SafeStyleSheet.unwrap(safeStyleSheet);\n  if (goog.userAgent.IE && goog.isDef(element.cssText)) {\n    // Adding the selectors individually caused the browser to hang if the\n    // selector was invalid or there were CSS comments.  Setting the cssText of\n    // the style node works fine and ignores CSS that IE doesn't understand.\n    // However IE >= 11 doesn't support cssText any more, so we make sure that\n    // cssText is a defined property and otherwise fall back to innerHTML.\n    element.cssText = stylesString;\n  } else {\n    // Setting textContent doesn't work in Safari, see b/29340337.\n    element.innerHTML = stylesString;\n  }\n};\n\n\n/**\n * Sets 'white-space: pre-wrap' for a node (x-browser).\n *\n * There are as many ways of specifying pre-wrap as there are browsers.\n *\n * CSS3/IE8: white-space: pre-wrap;\n * Mozilla:  white-space: -moz-pre-wrap;\n * Opera:    white-space: -o-pre-wrap;\n * IE6/7:    white-space: pre; word-wrap: break-word;\n *\n * @param {Element} el Element to enable pre-wrap for.\n */\ngoog.style.setPreWrap = function(el) {\n  var style = el.style;\n  if (goog.userAgent.IE && !goog.userAgent.isVersionOrHigher('8')) {\n    style.whiteSpace = 'pre';\n    style.wordWrap = 'break-word';\n  } else if (goog.userAgent.GECKO) {\n    style.whiteSpace = '-moz-pre-wrap';\n  } else {\n    style.whiteSpace = 'pre-wrap';\n  }\n};\n\n\n/**\n * Sets 'display: inline-block' for an element (cross-browser).\n * @param {Element} el Element to which the inline-block display style is to be\n *    applied.\n * @see ../demos/inline_block_quirks.html\n * @see ../demos/inline_block_standards.html\n */\ngoog.style.setInlineBlock = function(el) {\n  var style = el.style;\n  // Without position:relative, weirdness ensues.  Just accept it and move on.\n  style.position = 'relative';\n\n  if (goog.userAgent.IE && !goog.userAgent.isVersionOrHigher('8')) {\n    // IE8 supports inline-block so fall through to the else\n    // Zoom:1 forces hasLayout, display:inline gives inline behavior.\n    style.zoom = '1';\n    style.display = 'inline';\n  } else {\n    // Opera, Webkit, and Safari seem to do OK with the standard inline-block\n    // style.\n    style.display = 'inline-block';\n  }\n};\n\n\n/**\n * Returns true if the element is using right to left (rtl) direction.\n * @param {Element} el  The element to test.\n * @return {boolean} True for right to left, false for left to right.\n */\ngoog.style.isRightToLeft = function(el) {\n  return 'rtl' == goog.style.getStyle_(el, 'direction');\n};\n\n\n/**\n * The CSS style property corresponding to an element being\n * unselectable on the current browser platform (null if none).\n * Opera and IE instead use a DOM attribute 'unselectable'. MS Edge uses\n * the Webkit prefix.\n * @type {?string}\n * @private\n */\ngoog.style.unselectableStyle_ = goog.userAgent.GECKO ?\n    'MozUserSelect' :\n    goog.userAgent.WEBKIT || goog.userAgent.EDGE ? 'WebkitUserSelect' : null;\n\n\n/**\n * Returns true if the element is set to be unselectable, false otherwise.\n * Note that on some platforms (e.g. Mozilla), even if an element isn't set\n * to be unselectable, it will behave as such if any of its ancestors is\n * unselectable.\n * @param {Element} el  Element to check.\n * @return {boolean}  Whether the element is set to be unselectable.\n */\ngoog.style.isUnselectable = function(el) {\n  if (goog.style.unselectableStyle_) {\n    return el.style[goog.style.unselectableStyle_].toLowerCase() == 'none';\n  } else if (goog.userAgent.IE || goog.userAgent.OPERA) {\n    return el.getAttribute('unselectable') == 'on';\n  }\n  return false;\n};\n\n\n/**\n * Makes the element and its descendants selectable or unselectable.  Note\n * that on some platforms (e.g. Mozilla), even if an element isn't set to\n * be unselectable, it will behave as such if any of its ancestors is\n * unselectable.\n * @param {Element} el  The element to alter.\n * @param {boolean} unselectable  Whether the element and its descendants\n *     should be made unselectable.\n * @param {boolean=} opt_noRecurse  Whether to only alter the element's own\n *     selectable state, and leave its descendants alone; defaults to false.\n */\ngoog.style.setUnselectable = function(el, unselectable, opt_noRecurse) {\n  // TODO(attila): Do we need all of TR_DomUtil.makeUnselectable() in Closure?\n  var descendants = !opt_noRecurse ? el.getElementsByTagName('*') : null;\n  var name = goog.style.unselectableStyle_;\n  if (name) {\n    // Add/remove the appropriate CSS style to/from the element and its\n    // descendants.\n    var value = unselectable ? 'none' : '';\n    // MathML elements do not have a style property. Verify before setting.\n    if (el.style) {\n      el.style[name] = value;\n    }\n    if (descendants) {\n      for (var i = 0, descendant; descendant = descendants[i]; i++) {\n        if (descendant.style) {\n          descendant.style[name] = value;\n        }\n      }\n    }\n  } else if (goog.userAgent.IE || goog.userAgent.OPERA) {\n    // Toggle the 'unselectable' attribute on the element and its descendants.\n    var value = unselectable ? 'on' : '';\n    el.setAttribute('unselectable', value);\n    if (descendants) {\n      for (var i = 0, descendant; descendant = descendants[i]; i++) {\n        descendant.setAttribute('unselectable', value);\n      }\n    }\n  }\n};\n\n\n/**\n * Gets the border box size for an element.\n * @param {Element} element  The element to get the size for.\n * @return {!goog.math.Size} The border box size.\n */\ngoog.style.getBorderBoxSize = function(element) {\n  return new goog.math.Size(\n      /** @type {!HTMLElement} */ (element).offsetWidth,\n      /** @type {!HTMLElement} */ (element).offsetHeight);\n};\n\n\n/**\n * Sets the border box size of an element. This is potentially expensive in IE\n * if the document is CSS1Compat mode\n * @param {Element} element  The element to set the size on.\n * @param {goog.math.Size} size  The new size.\n */\ngoog.style.setBorderBoxSize = function(element, size) {\n  var doc = goog.dom.getOwnerDocument(element);\n  var isCss1CompatMode = goog.dom.getDomHelper(doc).isCss1CompatMode();\n\n  if (goog.userAgent.IE && !goog.userAgent.isVersionOrHigher('10') &&\n      (!isCss1CompatMode || !goog.userAgent.isVersionOrHigher('8'))) {\n    var style = element.style;\n    if (isCss1CompatMode) {\n      var paddingBox = goog.style.getPaddingBox(element);\n      var borderBox = goog.style.getBorderBox(element);\n      style.pixelWidth = size.width - borderBox.left - paddingBox.left -\n          paddingBox.right - borderBox.right;\n      style.pixelHeight = size.height - borderBox.top - paddingBox.top -\n          paddingBox.bottom - borderBox.bottom;\n    } else {\n      style.pixelWidth = size.width;\n      style.pixelHeight = size.height;\n    }\n  } else {\n    goog.style.setBoxSizingSize_(element, size, 'border-box');\n  }\n};\n\n\n/**\n * Gets the content box size for an element.  This is potentially expensive in\n * all browsers.\n * @param {Element} element  The element to get the size for.\n * @return {!goog.math.Size} The content box size.\n */\ngoog.style.getContentBoxSize = function(element) {\n  var doc = goog.dom.getOwnerDocument(element);\n  var ieCurrentStyle = goog.userAgent.IE && element.currentStyle;\n  if (ieCurrentStyle && goog.dom.getDomHelper(doc).isCss1CompatMode() &&\n      ieCurrentStyle.width != 'auto' && ieCurrentStyle.height != 'auto' &&\n      !ieCurrentStyle.boxSizing) {\n    // If IE in CSS1Compat mode than just use the width and height.\n    // If we have a boxSizing then fall back on measuring the borders etc.\n    var width = goog.style.getIePixelValue_(\n        element, /** @type {string} */ (ieCurrentStyle.width), 'width',\n        'pixelWidth');\n    var height = goog.style.getIePixelValue_(\n        element, /** @type {string} */ (ieCurrentStyle.height), 'height',\n        'pixelHeight');\n    return new goog.math.Size(width, height);\n  } else {\n    var borderBoxSize = goog.style.getBorderBoxSize(element);\n    var paddingBox = goog.style.getPaddingBox(element);\n    var borderBox = goog.style.getBorderBox(element);\n    return new goog.math.Size(\n        borderBoxSize.width - borderBox.left - paddingBox.left -\n            paddingBox.right - borderBox.right,\n        borderBoxSize.height - borderBox.top - paddingBox.top -\n            paddingBox.bottom - borderBox.bottom);\n  }\n};\n\n\n/**\n * Sets the content box size of an element. This is potentially expensive in IE\n * if the document is BackCompat mode.\n * @param {Element} element  The element to set the size on.\n * @param {goog.math.Size} size  The new size.\n */\ngoog.style.setContentBoxSize = function(element, size) {\n  var doc = goog.dom.getOwnerDocument(element);\n  var isCss1CompatMode = goog.dom.getDomHelper(doc).isCss1CompatMode();\n  if (goog.userAgent.IE && !goog.userAgent.isVersionOrHigher('10') &&\n      (!isCss1CompatMode || !goog.userAgent.isVersionOrHigher('8'))) {\n    var style = element.style;\n    if (isCss1CompatMode) {\n      style.pixelWidth = size.width;\n      style.pixelHeight = size.height;\n    } else {\n      var paddingBox = goog.style.getPaddingBox(element);\n      var borderBox = goog.style.getBorderBox(element);\n      style.pixelWidth = size.width + borderBox.left + paddingBox.left +\n          paddingBox.right + borderBox.right;\n      style.pixelHeight = size.height + borderBox.top + paddingBox.top +\n          paddingBox.bottom + borderBox.bottom;\n    }\n  } else {\n    goog.style.setBoxSizingSize_(element, size, 'content-box');\n  }\n};\n\n\n/**\n * Helper function that sets the box sizing as well as the width and height\n * @param {Element} element  The element to set the size on.\n * @param {goog.math.Size} size  The new size to set.\n * @param {string} boxSizing  The box-sizing value.\n * @private\n */\ngoog.style.setBoxSizingSize_ = function(element, size, boxSizing) {\n  var style = element.style;\n  if (goog.userAgent.GECKO) {\n    style.MozBoxSizing = boxSizing;\n  } else if (goog.userAgent.WEBKIT) {\n    style.WebkitBoxSizing = boxSizing;\n  } else {\n    // Includes IE8 and Opera 9.50+\n    style.boxSizing = boxSizing;\n  }\n\n  // Setting this to a negative value will throw an exception on IE\n  // (and doesn't do anything different than setting it to 0).\n  style.width = Math.max(size.width, 0) + 'px';\n  style.height = Math.max(size.height, 0) + 'px';\n};\n\n\n/**\n * IE specific function that converts a non pixel unit to pixels.\n * @param {Element} element  The element to convert the value for.\n * @param {string} value  The current value as a string. The value must not be\n *     ''.\n * @param {string} name  The CSS property name to use for the converstion. This\n *     should be 'left', 'top', 'width' or 'height'.\n * @param {string} pixelName  The CSS pixel property name to use to get the\n *     value in pixels.\n * @return {number} The value in pixels.\n * @private\n */\ngoog.style.getIePixelValue_ = function(element, value, name, pixelName) {\n  // Try if we already have a pixel value. IE does not do half pixels so we\n  // only check if it matches a number followed by 'px'.\n  if (/^\\d+px?$/.test(value)) {\n    return parseInt(value, 10);\n  } else {\n    var oldStyleValue = element.style[name];\n    var oldRuntimeValue = element.runtimeStyle[name];\n    // set runtime style to prevent changes\n    element.runtimeStyle[name] = element.currentStyle[name];\n    element.style[name] = value;\n    var pixelValue = element.style[pixelName];\n    // restore\n    element.style[name] = oldStyleValue;\n    element.runtimeStyle[name] = oldRuntimeValue;\n    return +pixelValue;\n  }\n};\n\n\n/**\n * Helper function for getting the pixel padding or margin for IE.\n * @param {Element} element  The element to get the padding for.\n * @param {string} propName  The property name.\n * @return {number} The pixel padding.\n * @private\n */\ngoog.style.getIePixelDistance_ = function(element, propName) {\n  var value = goog.style.getCascadedStyle(element, propName);\n  return value ?\n      goog.style.getIePixelValue_(element, value, 'left', 'pixelLeft') :\n      0;\n};\n\n\n/**\n * Gets the computed paddings or margins (on all sides) in pixels.\n * @param {Element} element  The element to get the padding for.\n * @param {string} stylePrefix  Pass 'padding' to retrieve the padding box,\n *     or 'margin' to retrieve the margin box.\n * @return {!goog.math.Box} The computed paddings or margins.\n * @private\n */\ngoog.style.getBox_ = function(element, stylePrefix) {\n  if (goog.userAgent.IE) {\n    var left = goog.style.getIePixelDistance_(element, stylePrefix + 'Left');\n    var right = goog.style.getIePixelDistance_(element, stylePrefix + 'Right');\n    var top = goog.style.getIePixelDistance_(element, stylePrefix + 'Top');\n    var bottom =\n        goog.style.getIePixelDistance_(element, stylePrefix + 'Bottom');\n    return new goog.math.Box(top, right, bottom, left);\n  } else {\n    // On non-IE browsers, getComputedStyle is always non-null.\n    var left = goog.style.getComputedStyle(element, stylePrefix + 'Left');\n    var right = goog.style.getComputedStyle(element, stylePrefix + 'Right');\n    var top = goog.style.getComputedStyle(element, stylePrefix + 'Top');\n    var bottom = goog.style.getComputedStyle(element, stylePrefix + 'Bottom');\n\n    // NOTE(arv): Gecko can return floating point numbers for the computed\n    // style values.\n    return new goog.math.Box(\n        parseFloat(top), parseFloat(right), parseFloat(bottom),\n        parseFloat(left));\n  }\n};\n\n\n/**\n * Gets the computed paddings (on all sides) in pixels.\n * @param {Element} element  The element to get the padding for.\n * @return {!goog.math.Box} The computed paddings.\n */\ngoog.style.getPaddingBox = function(element) {\n  return goog.style.getBox_(element, 'padding');\n};\n\n\n/**\n * Gets the computed margins (on all sides) in pixels.\n * @param {Element} element  The element to get the margins for.\n * @return {!goog.math.Box} The computed margins.\n */\ngoog.style.getMarginBox = function(element) {\n  return goog.style.getBox_(element, 'margin');\n};\n\n\n/**\n * A map used to map the border width keywords to a pixel width.\n * @type {!Object}\n * @private\n */\ngoog.style.ieBorderWidthKeywords_ = {\n  'thin': 2,\n  'medium': 4,\n  'thick': 6\n};\n\n\n/**\n * Helper function for IE to get the pixel border.\n * @param {Element} element  The element to get the pixel border for.\n * @param {string} prop  The part of the property name.\n * @return {number} The value in pixels.\n * @private\n */\ngoog.style.getIePixelBorder_ = function(element, prop) {\n  if (goog.style.getCascadedStyle(element, prop + 'Style') == 'none') {\n    return 0;\n  }\n  var width = goog.style.getCascadedStyle(element, prop + 'Width');\n  if (width in goog.style.ieBorderWidthKeywords_) {\n    return goog.style.ieBorderWidthKeywords_[width];\n  }\n  return goog.style.getIePixelValue_(element, width, 'left', 'pixelLeft');\n};\n\n\n/**\n * Gets the computed border widths (on all sides) in pixels\n * @param {Element} element  The element to get the border widths for.\n * @return {!goog.math.Box} The computed border widths.\n */\ngoog.style.getBorderBox = function(element) {\n  if (goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(9)) {\n    var left = goog.style.getIePixelBorder_(element, 'borderLeft');\n    var right = goog.style.getIePixelBorder_(element, 'borderRight');\n    var top = goog.style.getIePixelBorder_(element, 'borderTop');\n    var bottom = goog.style.getIePixelBorder_(element, 'borderBottom');\n    return new goog.math.Box(top, right, bottom, left);\n  } else {\n    // On non-IE browsers, getComputedStyle is always non-null.\n    var left = goog.style.getComputedStyle(element, 'borderLeftWidth');\n    var right = goog.style.getComputedStyle(element, 'borderRightWidth');\n    var top = goog.style.getComputedStyle(element, 'borderTopWidth');\n    var bottom = goog.style.getComputedStyle(element, 'borderBottomWidth');\n\n    return new goog.math.Box(\n        parseFloat(top), parseFloat(right), parseFloat(bottom),\n        parseFloat(left));\n  }\n};\n\n\n/**\n * Returns the font face applied to a given node. Opera and IE should return\n * the font actually displayed. Firefox returns the author's most-preferred\n * font (whether the browser is capable of displaying it or not.)\n * @param {Element} el  The element whose font family is returned.\n * @return {string} The font family applied to el.\n */\ngoog.style.getFontFamily = function(el) {\n  var doc = goog.dom.getOwnerDocument(el);\n  var font = '';\n  // The moveToElementText method from the TextRange only works if the element\n  // is attached to the owner document.\n  if (doc.body.createTextRange && goog.dom.contains(doc, el)) {\n    var range = doc.body.createTextRange();\n    range.moveToElementText(el);\n\n    try {\n      font = range.queryCommandValue('FontName');\n    } catch (e) {\n      // This is a workaround for a awkward exception.\n      // On some IE, there is an exception coming from it.\n      // The error description from this exception is:\n      // This window has already been registered as a drop target\n      // This is bogus description, likely due to a bug in ie.\n      font = '';\n    }\n  }\n  if (!font) {\n    // Note if for some reason IE can't derive FontName with a TextRange, we\n    // fallback to using currentStyle\n    font = goog.style.getStyle_(el, 'fontFamily');\n  }\n\n  // Firefox returns the applied font-family string (author's list of\n  // preferred fonts.) We want to return the most-preferred font, in lieu of\n  // the *actually* applied font.\n  var fontsArray = font.split(',');\n  if (fontsArray.length > 1) font = fontsArray[0];\n\n  // Sanitize for x-browser consistency:\n  // Strip quotes because browsers aren't consistent with how they're\n  // applied; Opera always encloses, Firefox sometimes, and IE never.\n  return goog.string.stripQuotes(font, '\"\\'');\n};\n\n\n/**\n * Regular expression used for getLengthUnits.\n * @type {RegExp}\n * @private\n */\ngoog.style.lengthUnitRegex_ = /[^\\d]+$/;\n\n\n/**\n * Returns the units used for a CSS length measurement.\n * @param {string} value  A CSS length quantity.\n * @return {?string} The units of measurement.\n */\ngoog.style.getLengthUnits = function(value) {\n  var units = value.match(goog.style.lengthUnitRegex_);\n  return units && units[0] || null;\n};\n\n\n/**\n * Map of absolute CSS length units\n * @type {!Object}\n * @private\n */\ngoog.style.ABSOLUTE_CSS_LENGTH_UNITS_ = {\n  'cm': 1,\n  'in': 1,\n  'mm': 1,\n  'pc': 1,\n  'pt': 1\n};\n\n\n/**\n * Map of relative CSS length units that can be accurately converted to px\n * font-size values using getIePixelValue_. Only units that are defined in\n * relation to a font size are convertible (%, small, etc. are not).\n * @type {!Object}\n * @private\n */\ngoog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_ = {\n  'em': 1,\n  'ex': 1\n};\n\n\n/**\n * Returns the font size, in pixels, of text in an element.\n * @param {Element} el  The element whose font size is returned.\n * @return {number} The font size (in pixels).\n */\ngoog.style.getFontSize = function(el) {\n  var fontSize = goog.style.getStyle_(el, 'fontSize');\n  var sizeUnits = goog.style.getLengthUnits(fontSize);\n  if (fontSize && 'px' == sizeUnits) {\n    // NOTE(user): This could be parseFloat instead, but IE doesn't return\n    // decimal fractions in getStyle_ and Firefox reports the fractions, but\n    // ignores them when rendering. Interestingly enough, when we force the\n    // issue and size something to e.g., 50% of 25px, the browsers round in\n    // opposite directions with Firefox reporting 12px and IE 13px. I punt.\n    return parseInt(fontSize, 10);\n  }\n\n  // In IE, we can convert absolute length units to a px value using\n  // goog.style.getIePixelValue_. Units defined in relation to a font size\n  // (em, ex) are applied relative to the element's parentNode and can also\n  // be converted.\n  if (goog.userAgent.IE) {\n    if (String(sizeUnits) in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_) {\n      return goog.style.getIePixelValue_(el, fontSize, 'left', 'pixelLeft');\n    } else if (\n        el.parentNode && el.parentNode.nodeType == goog.dom.NodeType.ELEMENT &&\n        String(sizeUnits) in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_) {\n      // Check the parent size - if it is the same it means the relative size\n      // value is inherited and we therefore don't want to count it twice.  If\n      // it is different, this element either has explicit style or has a CSS\n      // rule applying to it.\n      var parentElement = /** @type {!Element} */ (el.parentNode);\n      var parentSize = goog.style.getStyle_(parentElement, 'fontSize');\n      return goog.style.getIePixelValue_(\n          parentElement, fontSize == parentSize ? '1em' : fontSize, 'left',\n          'pixelLeft');\n    }\n  }\n\n  // Sometimes we can't cleanly find the font size (some units relative to a\n  // node's parent's font size are difficult: %, smaller et al), so we create\n  // an invisible, absolutely-positioned span sized to be the height of an 'M'\n  // rendered in its parent's (i.e., our target element's) font size. This is\n  // the definition of CSS's font size attribute.\n  var sizeElement = goog.dom.createDom(goog.dom.TagName.SPAN, {\n    'style': 'visibility:hidden;position:absolute;' +\n        'line-height:0;padding:0;margin:0;border:0;height:1em;'\n  });\n  goog.dom.appendChild(el, sizeElement);\n  fontSize = sizeElement.offsetHeight;\n  goog.dom.removeNode(sizeElement);\n\n  return fontSize;\n};\n\n\n/**\n * Parses a style attribute value.  Converts CSS property names to camel case.\n * @param {string} value The style attribute value.\n * @return {!Object} Map of CSS properties to string values.\n */\ngoog.style.parseStyleAttribute = function(value) {\n  var result = {};\n  goog.array.forEach(value.split(/\\s*;\\s*/), function(pair) {\n    var keyValue = pair.match(/\\s*([\\w-]+)\\s*\\:(.+)/);\n    if (keyValue) {\n      var styleName = keyValue[1];\n      var styleValue = goog.string.trim(keyValue[2]);\n      result[goog.string.toCamelCase(styleName.toLowerCase())] = styleValue;\n    }\n  });\n  return result;\n};\n\n\n/**\n * Reverse of parseStyleAttribute; that is, takes a style object and returns the\n * corresponding attribute value.  Converts camel case property names to proper\n * CSS selector names.\n * @param {Object} obj Map of CSS properties to values.\n * @return {string} The style attribute value.\n */\ngoog.style.toStyleAttribute = function(obj) {\n  var buffer = [];\n  goog.object.forEach(obj, function(value, key) {\n    buffer.push(goog.string.toSelectorCase(key), ':', value, ';');\n  });\n  return buffer.join('');\n};\n\n\n/**\n * Sets CSS float property on an element.\n * @param {Element} el The element to set float property on.\n * @param {string} value The value of float CSS property to set on this element.\n */\ngoog.style.setFloat = function(el, value) {\n  el.style[goog.userAgent.IE ? 'styleFloat' : 'cssFloat'] = value;\n};\n\n\n/**\n * Gets value of explicitly-set float CSS property on an element.\n * @param {Element} el The element to get float property of.\n * @return {string} The value of explicitly-set float CSS property on this\n *     element.\n */\ngoog.style.getFloat = function(el) {\n  return el.style[goog.userAgent.IE ? 'styleFloat' : 'cssFloat'] || '';\n};\n\n\n/**\n * Returns the scroll bar width (represents the width of both horizontal\n * and vertical scroll).\n *\n * @param {string=} opt_className An optional class name (or names) to apply\n *     to the invisible div created to measure the scrollbar. This is necessary\n *     if some scrollbars are styled differently than others.\n * @return {number} The scroll bar width in px.\n */\ngoog.style.getScrollbarWidth = function(opt_className) {\n  // Add two hidden divs.  The child div is larger than the parent and\n  // forces scrollbars to appear on it.\n  // Using overflow:scroll does not work consistently with scrollbars that\n  // are styled with ::-webkit-scrollbar.\n  var outerDiv = goog.dom.createElement(goog.dom.TagName.DIV);\n  if (opt_className) {\n    outerDiv.className = opt_className;\n  }\n  outerDiv.style.cssText = 'overflow:auto;' +\n      'position:absolute;top:0;width:100px;height:100px';\n  var innerDiv = goog.dom.createElement(goog.dom.TagName.DIV);\n  goog.style.setSize(innerDiv, '200px', '200px');\n  outerDiv.appendChild(innerDiv);\n  goog.dom.appendChild(goog.dom.getDocument().body, outerDiv);\n  var width = outerDiv.offsetWidth - outerDiv.clientWidth;\n  goog.dom.removeNode(outerDiv);\n  return width;\n};\n\n\n/**\n * Regular expression to extract x and y translation components from a CSS\n * transform Matrix representation.\n *\n * @type {!RegExp}\n * @const\n * @private\n */\ngoog.style.MATRIX_TRANSLATION_REGEX_ = new RegExp(\n    'matrix\\\\([0-9\\\\.\\\\-]+, [0-9\\\\.\\\\-]+, ' +\n    '[0-9\\\\.\\\\-]+, [0-9\\\\.\\\\-]+, ' +\n    '([0-9\\\\.\\\\-]+)p?x?, ([0-9\\\\.\\\\-]+)p?x?\\\\)');\n\n\n/**\n * Returns the x,y translation component of any CSS transforms applied to the\n * element, in pixels.\n *\n * @param {!Element} element The element to get the translation of.\n * @return {!goog.math.Coordinate} The CSS translation of the element in px.\n */\ngoog.style.getCssTranslation = function(element) {\n  var transform = goog.style.getComputedTransform(element);\n  if (!transform) {\n    return new goog.math.Coordinate(0, 0);\n  }\n  var matches = transform.match(goog.style.MATRIX_TRANSLATION_REGEX_);\n  if (!matches) {\n    return new goog.math.Coordinate(0, 0);\n  }\n  return new goog.math.Coordinate(\n      parseFloat(matches[1]), parseFloat(matches[2]));\n};\n","// Copyright 2010 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities for getting details about the user's platform.\n */\n\ngoog.provide('goog.userAgent.platform');\n\ngoog.require('goog.string');\ngoog.require('goog.userAgent');\n\n\n/**\n * Detects the version of the OS/platform the browser is running in. Not\n * supported for Linux, where an empty string is returned.\n *\n * @private\n * @return {string} The platform version.\n */\ngoog.userAgent.platform.determineVersion_ = function() {\n  var re;\n  if (goog.userAgent.WINDOWS) {\n    re = /Windows NT ([0-9.]+)/;\n    var match = re.exec(goog.userAgent.getUserAgentString());\n    if (match) {\n      return match[1];\n    } else {\n      return '0';\n    }\n  } else if (goog.userAgent.MAC) {\n    re = /10[_.][0-9_.]+/;\n    var match = re.exec(goog.userAgent.getUserAgentString());\n    // Note: some old versions of Camino do not report an OSX version.\n    // Default to 10.\n    return match ? match[0].replace(/_/g, '.') : '10';\n  } else if (goog.userAgent.ANDROID) {\n    re = /Android\\s+([^\\);]+)(\\)|;)/;\n    var match = re.exec(goog.userAgent.getUserAgentString());\n    return match ? match[1] : '';\n  } else if (\n      goog.userAgent.IPHONE || goog.userAgent.IPAD || goog.userAgent.IPOD) {\n    re = /(?:iPhone|CPU)\\s+OS\\s+(\\S+)/;\n    var match = re.exec(goog.userAgent.getUserAgentString());\n    // Report the version as x.y.z and not x_y_z\n    return match ? match[1].replace(/_/g, '.') : '';\n  }\n\n  return '';\n};\n\n\n/**\n * The version of the platform. We don't determine the version of Linux.\n * For Windows, we only look at the NT version. Non-NT-based versions\n * (e.g. 95, 98, etc.) are given version 0.0.\n * @type {string}\n */\ngoog.userAgent.platform.VERSION = goog.userAgent.platform.determineVersion_();\n\n\n/**\n * Whether the user agent platform version is higher or the same as the given\n * version.\n *\n * @param {string|number} version The version to check.\n * @return {boolean} Whether the user agent platform version is higher or the\n *     same as the given version.\n */\ngoog.userAgent.platform.isVersion = function(version) {\n  return goog.string.compareVersions(\n             goog.userAgent.platform.VERSION, version) >= 0;\n};\n","// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Detects the specific browser and not just the rendering engine.\n *\n */\n\ngoog.provide('goog.userAgent.product');\n\ngoog.require('goog.labs.userAgent.browser');\ngoog.require('goog.labs.userAgent.platform');\ngoog.require('goog.userAgent');\n\n\n/**\n * @define {boolean} Whether the code is running on the Firefox web browser.\n */\ngoog.define('goog.userAgent.product.ASSUME_FIREFOX', false);\n\n\n/**\n * @define {boolean} Whether we know at compile-time that the product is an\n *     iPhone.\n */\ngoog.define('goog.userAgent.product.ASSUME_IPHONE', false);\n\n\n/**\n * @define {boolean} Whether we know at compile-time that the product is an\n *     iPad.\n */\ngoog.define('goog.userAgent.product.ASSUME_IPAD', false);\n\n\n/**\n * @define {boolean} Whether we know at compile-time that the product is an\n *     AOSP browser or WebView inside a pre KitKat Android phone or tablet.\n */\ngoog.define('goog.userAgent.product.ASSUME_ANDROID', false);\n\n\n/**\n * @define {boolean} Whether the code is running on the Chrome web browser on\n * any platform or AOSP browser or WebView in a KitKat+ Android phone or tablet.\n */\ngoog.define('goog.userAgent.product.ASSUME_CHROME', false);\n\n\n/**\n * @define {boolean} Whether the code is running on the Safari web browser.\n */\ngoog.define('goog.userAgent.product.ASSUME_SAFARI', false);\n\n\n/**\n * Whether we know the product type at compile-time.\n * @type {boolean}\n * @private\n */\ngoog.userAgent.product.PRODUCT_KNOWN_ = goog.userAgent.ASSUME_IE ||\n    goog.userAgent.ASSUME_EDGE || goog.userAgent.ASSUME_OPERA ||\n    goog.userAgent.product.ASSUME_FIREFOX ||\n    goog.userAgent.product.ASSUME_IPHONE ||\n    goog.userAgent.product.ASSUME_IPAD ||\n    goog.userAgent.product.ASSUME_ANDROID ||\n    goog.userAgent.product.ASSUME_CHROME ||\n    goog.userAgent.product.ASSUME_SAFARI;\n\n\n/**\n * Whether the code is running on the Opera web browser.\n * @type {boolean}\n */\ngoog.userAgent.product.OPERA = goog.userAgent.OPERA;\n\n\n/**\n * Whether the code is running on an IE web browser.\n * @type {boolean}\n */\ngoog.userAgent.product.IE = goog.userAgent.IE;\n\n\n/**\n * Whether the code is running on an Edge web browser.\n * @type {boolean}\n */\ngoog.userAgent.product.EDGE = goog.userAgent.EDGE;\n\n\n/**\n * Whether the code is running on the Firefox web browser.\n * @type {boolean}\n */\ngoog.userAgent.product.FIREFOX = goog.userAgent.product.PRODUCT_KNOWN_ ?\n    goog.userAgent.product.ASSUME_FIREFOX :\n    goog.labs.userAgent.browser.isFirefox();\n\n\n/**\n * Whether the user agent is an iPhone or iPod (as in iPod touch).\n * @return {boolean}\n * @private\n */\ngoog.userAgent.product.isIphoneOrIpod_ = function() {\n  return goog.labs.userAgent.platform.isIphone() ||\n      goog.labs.userAgent.platform.isIpod();\n};\n\n\n/**\n * Whether the code is running on an iPhone or iPod touch.\n *\n * iPod touch is considered an iPhone for legacy reasons.\n * @type {boolean}\n */\ngoog.userAgent.product.IPHONE = goog.userAgent.product.PRODUCT_KNOWN_ ?\n    goog.userAgent.product.ASSUME_IPHONE :\n    goog.userAgent.product.isIphoneOrIpod_();\n\n\n/**\n * Whether the code is running on an iPad.\n * @type {boolean}\n */\ngoog.userAgent.product.IPAD = goog.userAgent.product.PRODUCT_KNOWN_ ?\n    goog.userAgent.product.ASSUME_IPAD :\n    goog.labs.userAgent.platform.isIpad();\n\n\n/**\n * Whether the code is running on AOSP browser or WebView inside\n * a pre KitKat Android phone or tablet.\n * @type {boolean}\n */\ngoog.userAgent.product.ANDROID = goog.userAgent.product.PRODUCT_KNOWN_ ?\n    goog.userAgent.product.ASSUME_ANDROID :\n    goog.labs.userAgent.browser.isAndroidBrowser();\n\n\n/**\n * Whether the code is running on the Chrome web browser on any platform\n * or AOSP browser or WebView in a KitKat+ Android phone or tablet.\n * @type {boolean}\n */\ngoog.userAgent.product.CHROME = goog.userAgent.product.PRODUCT_KNOWN_ ?\n    goog.userAgent.product.ASSUME_CHROME :\n    goog.labs.userAgent.browser.isChrome();\n\n\n/**\n * @return {boolean} Whether the browser is Safari on desktop.\n * @private\n */\ngoog.userAgent.product.isSafariDesktop_ = function() {\n  return goog.labs.userAgent.browser.isSafari() &&\n      !goog.labs.userAgent.platform.isIos();\n};\n\n\n/**\n * Whether the code is running on the desktop Safari web browser.\n * Note: the legacy behavior here is only true for Safari not running\n * on iOS.\n * @type {boolean}\n */\ngoog.userAgent.product.SAFARI = goog.userAgent.product.PRODUCT_KNOWN_ ?\n    goog.userAgent.product.ASSUME_SAFARI :\n    goog.userAgent.product.isSafariDesktop_();\n","// Copyright 2009 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Functions for understanding the version of the browser.\n * This is pulled out of product.js to ensure that only builds that need\n * this functionality actually get it, without having to rely on the compiler\n * to strip out unneeded pieces.\n *\n * TODO(nnaze): Move to more appropriate filename/namespace.\n *\n */\n\n\ngoog.provide('goog.userAgent.product.isVersion');\n\n\ngoog.require('goog.labs.userAgent.platform');\ngoog.require('goog.string');\ngoog.require('goog.userAgent');\ngoog.require('goog.userAgent.product');\n\n\n/**\n * @return {string} The string that describes the version number of the user\n *     agent product.  This is a string rather than a number because it may\n *     contain 'b', 'a', and so on.\n * @private\n */\ngoog.userAgent.product.determineVersion_ = function() {\n  // All browsers have different ways to detect the version and they all have\n  // different naming schemes.\n\n  if (goog.userAgent.product.FIREFOX) {\n    // Firefox/2.0.0.1 or Firefox/3.5.3\n    return goog.userAgent.product.getFirstRegExpGroup_(/Firefox\\/([0-9.]+)/);\n  }\n\n  if (goog.userAgent.product.IE || goog.userAgent.product.EDGE ||\n      goog.userAgent.product.OPERA) {\n    return goog.userAgent.VERSION;\n  }\n\n  if (goog.userAgent.product.CHROME) {\n    if (goog.labs.userAgent.platform.isIos()) {\n      // CriOS/56.0.2924.79\n      return goog.userAgent.product.getFirstRegExpGroup_(/CriOS\\/([0-9.]+)/);\n    }\n    // Chrome/4.0.223.1\n    return goog.userAgent.product.getFirstRegExpGroup_(/Chrome\\/([0-9.]+)/);\n  }\n\n  // This replicates legacy logic, which considered Safari and iOS to be\n  // different products.\n  if (goog.userAgent.product.SAFARI && !goog.labs.userAgent.platform.isIos()) {\n    // Version/5.0.3\n    //\n    // NOTE: Before version 3, Safari did not report a product version number.\n    // The product version number for these browsers will be the empty string.\n    // They may be differentiated by WebKit version number in goog.userAgent.\n    return goog.userAgent.product.getFirstRegExpGroup_(/Version\\/([0-9.]+)/);\n  }\n\n  if (goog.userAgent.product.IPHONE || goog.userAgent.product.IPAD) {\n    // Mozilla/5.0 (iPod; U; CPU like Mac OS X; en) AppleWebKit/420.1\n    // (KHTML, like Gecko) Version/3.0 Mobile/3A100a Safari/419.3\n    // Version is the browser version, Mobile is the build number. We combine\n    // the version string with the build number: 3.0.3A100a for the example.\n    var arr =\n        goog.userAgent.product.execRegExp_(/Version\\/(\\S+).*Mobile\\/(\\S+)/);\n    if (arr) {\n      return arr[1] + '.' + arr[2];\n    }\n  } else if (goog.userAgent.product.ANDROID) {\n    // Mozilla/5.0 (Linux; U; Android 0.5; en-us) AppleWebKit/522+\n    // (KHTML, like Gecko) Safari/419.3\n    //\n    // Mozilla/5.0 (Linux; U; Android 1.0; en-us; dream) AppleWebKit/525.10+\n    // (KHTML, like Gecko) Version/3.0.4 Mobile Safari/523.12.2\n    //\n    // Prefer Version number if present, else make do with the OS number\n    var version =\n        goog.userAgent.product.getFirstRegExpGroup_(/Android\\s+([0-9.]+)/);\n    if (version) {\n      return version;\n    }\n\n    return goog.userAgent.product.getFirstRegExpGroup_(/Version\\/([0-9.]+)/);\n  }\n\n  return '';\n};\n\n\n/**\n * Return the first group of the given regex.\n * @param {!RegExp} re Regular expression with at least one group.\n * @return {string} Contents of the first group or an empty string if no match.\n * @private\n */\ngoog.userAgent.product.getFirstRegExpGroup_ = function(re) {\n  var arr = goog.userAgent.product.execRegExp_(re);\n  return arr ? arr[1] : '';\n};\n\n\n/**\n * Run regexp's exec() on the userAgent string.\n * @param {!RegExp} re Regular expression.\n * @return {?IArrayLike<string>} A result array, or null for no match.\n * @private\n */\ngoog.userAgent.product.execRegExp_ = function(re) {\n  return re.exec(goog.userAgent.getUserAgentString());\n};\n\n\n/**\n * The version of the user agent. This is a string because it might contain\n * 'b' (as in beta) as well as multiple dots.\n * @type {string}\n */\ngoog.userAgent.product.VERSION = goog.userAgent.product.determineVersion_();\n\n\n/**\n * Whether the user agent product version is higher or the same as the given\n * version.\n *\n * @param {string|number} version The version to check.\n * @return {boolean} Whether the user agent product version is higher or the\n *     same as the given version.\n */\ngoog.userAgent.product.isVersion = function(version) {\n  return goog.string.compareVersions(goog.userAgent.product.VERSION, version) >=\n      0;\n};\n","// Copyright 2012 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Bidi utility functions.\n *\n */\n\ngoog.provide('goog.style.bidi');\n\ngoog.require('goog.dom');\ngoog.require('goog.style');\ngoog.require('goog.userAgent');\ngoog.require('goog.userAgent.platform');\ngoog.require('goog.userAgent.product');\ngoog.require('goog.userAgent.product.isVersion');\n\n\n/**\n * Returns the normalized scrollLeft position for a scrolled element.\n * @param {Element} element The scrolled element.\n * @return {number} The number of pixels the element is scrolled. 0 indicates\n *     that the element is not scrolled at all (which, in general, is the\n *     left-most position in ltr and the right-most position in rtl).\n */\ngoog.style.bidi.getScrollLeft = function(element) {\n  var isRtl = goog.style.isRightToLeft(element);\n  if (isRtl && goog.style.bidi.usesNegativeScrollLeftInRtl_()) {\n    return -element.scrollLeft;\n  } else if (\n      isRtl &&\n      !(goog.userAgent.EDGE_OR_IE && goog.userAgent.isVersionOrHigher('8'))) {\n    // ScrollLeft starts at the maximum positive value and decreases towards\n    // 0 as the element is scrolled towards the left. However, for overflow\n    // visible, there is no scrollLeft and the value always stays correctly at 0\n    var overflowX = goog.style.getComputedOverflowX(element);\n    if (overflowX == 'visible') {\n      return element.scrollLeft;\n    } else {\n      return element.scrollWidth - element.clientWidth - element.scrollLeft;\n    }\n  }\n  // ScrollLeft behavior is identical in rtl and ltr, it starts at 0 and\n  // increases as the element is scrolled away from the start.\n  return element.scrollLeft;\n};\n\n\n/**\n * Returns the \"offsetStart\" of an element, analogous to offsetLeft but\n * normalized for right-to-left environments and various browser\n * inconsistencies. This value returned can always be passed to setScrollOffset\n * to scroll to an element's left edge in a left-to-right offsetParent or\n * right edge in a right-to-left offsetParent.\n *\n * For example, here offsetStart is 10px in an LTR environment and 5px in RTL:\n *\n * <pre>\n * |          xxxxxxxxxx     |\n *  ^^^^^^^^^^   ^^^^   ^^^^^\n *     10px      elem    5px\n * </pre>\n *\n * If an element is positioned before the start of its offsetParent, the\n * startOffset may be negative.  This can be used with setScrollOffset to\n * reliably scroll to an element:\n *\n * <pre>\n * var scrollOffset = goog.style.bidi.getOffsetStart(element);\n * goog.style.bidi.setScrollOffset(element.offsetParent, scrollOffset);\n * </pre>\n *\n * @see setScrollOffset\n *\n * @param {Element} element The element for which we need to determine the\n *     offsetStart position.\n * @return {number} The offsetStart for that element.\n */\ngoog.style.bidi.getOffsetStart = function(element) {\n  element = /** @type {!HTMLElement} */ (element);\n  var offsetLeftForReal = element.offsetLeft;\n\n  // The element might not have an offsetParent.\n  // For example, the node might not be attached to the DOM tree,\n  // and position:fixed children do not have an offset parent.\n  // Just try to do the best we can with what we have.\n  var bestParent = element.offsetParent;\n\n  if (!bestParent && goog.style.getComputedPosition(element) == 'fixed') {\n    bestParent = goog.dom.getOwnerDocument(element).documentElement;\n  }\n\n  // Just give up in this case.\n  if (!bestParent) {\n    return offsetLeftForReal;\n  }\n\n  if (goog.userAgent.GECKO && !goog.userAgent.isVersionOrHigher(58)) {\n    // When calculating an element's offsetLeft, Firefox 57 and below\n    // erroneously subtracts the border width from the actual distance.\n    // So we need to add it back. (Fixed in FireFox 58+)\n    var borderWidths = goog.style.getBorderBox(bestParent);\n    offsetLeftForReal += borderWidths.left;\n  } else if (\n      goog.userAgent.isDocumentModeOrHigher(8) &&\n      !goog.userAgent.isDocumentModeOrHigher(9)) {\n    // When calculating an element's offsetLeft, IE8/9-Standards Mode\n    // erroneously adds the border width to the actual distance.  So we need to\n    // subtract it.\n    var borderWidths = goog.style.getBorderBox(bestParent);\n    offsetLeftForReal -= borderWidths.left;\n  }\n\n  if (goog.style.isRightToLeft(bestParent)) {\n    // Right edge of the element relative to the left edge of its parent.\n    var elementRightOffset = offsetLeftForReal + element.offsetWidth;\n\n    // Distance from the parent's right edge to the element's right edge.\n    return bestParent.clientWidth - elementRightOffset;\n  }\n\n  return offsetLeftForReal;\n};\n\n\n/**\n * Sets the element's scrollLeft attribute so it is correctly scrolled by\n * offsetStart pixels.  This takes into account whether the element is RTL and\n * the nuances of different browsers.  To scroll to the \"beginning\" of an\n * element use getOffsetStart to obtain the element's offsetStart value and then\n * pass the value to setScrollOffset.\n * @see getOffsetStart\n * @param {Element} element The element to set scrollLeft on.\n * @param {number} offsetStart The number of pixels to scroll the element.\n *     If this value is < 0, 0 is used.\n */\ngoog.style.bidi.setScrollOffset = function(element, offsetStart) {\n  offsetStart = Math.max(offsetStart, 0);\n  // In LTR and in \"mirrored\" browser RTL (such as IE), we set scrollLeft to\n  // the number of pixels to scroll.\n  // Otherwise, in RTL, we need to account for different browser behavior.\n  if (!goog.style.isRightToLeft(element)) {\n    element.scrollLeft = offsetStart;\n  } else if (goog.style.bidi.usesNegativeScrollLeftInRtl_()) {\n    element.scrollLeft = -offsetStart;\n  } else if (\n      !(goog.userAgent.EDGE_OR_IE && goog.userAgent.isVersionOrHigher('8'))) {\n    // Take the current scrollLeft value and move to the right by the\n    // offsetStart to get to the left edge of the element, and then by\n    // the clientWidth of the element to get to the right edge.\n    element.scrollLeft =\n        element.scrollWidth - offsetStart - element.clientWidth;\n  } else {\n    element.scrollLeft = offsetStart;\n  }\n};\n\n\n/**\n * @return {boolean} Whether the current browser returns negative scrollLeft\n *     values for RTL elements. If true, then scrollLeft starts at 0 and then\n *     becomes more negative as the element is scrolled towards the left.\n * @private\n */\ngoog.style.bidi.usesNegativeScrollLeftInRtl_ = function() {\n  var isSafari10Plus =\n      goog.userAgent.product.SAFARI && goog.userAgent.product.isVersion(10);\n  var isIOS10Plus = goog.userAgent.IOS && goog.userAgent.platform.isVersion(10);\n  return goog.userAgent.GECKO || isSafari10Plus || isIOS10Plus;\n};\n\n\n/**\n * Sets the element's left style attribute in LTR or right style attribute in\n * RTL.  Also clears the left attribute in RTL and the right attribute in LTR.\n * @param {Element} elem The element to position.\n * @param {number} left The left position in LTR; will be set as right in RTL.\n * @param {?number} top The top position.  If null only the left/right is set.\n * @param {boolean} isRtl Whether we are in RTL mode.\n */\ngoog.style.bidi.setPosition = function(elem, left, top, isRtl) {\n  if (!goog.isNull(top)) {\n    elem.style.top = top + 'px';\n  }\n  if (isRtl) {\n    elem.style.right = left + 'px';\n    elem.style.left = '';\n  } else {\n    elem.style.left = left + 'px';\n    elem.style.right = '';\n  }\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Drag Utilities.\n *\n * Provides extensible functionality for drag & drop behaviour.\n *\n * @see ../demos/drag.html\n * @see ../demos/dragger.html\n */\n\n\ngoog.provide('goog.fx.DragEvent');\ngoog.provide('goog.fx.Dragger');\ngoog.provide('goog.fx.Dragger.EventType');\n\ngoog.require('goog.dom');\ngoog.require('goog.dom.TagName');\ngoog.require('goog.events');\ngoog.require('goog.events.Event');\ngoog.require('goog.events.EventHandler');\ngoog.require('goog.events.EventTarget');\ngoog.require('goog.events.EventType');\ngoog.require('goog.math.Coordinate');\ngoog.require('goog.math.Rect');\ngoog.require('goog.style');\ngoog.require('goog.style.bidi');\ngoog.require('goog.userAgent');\n\n\n\n/**\n * A class that allows mouse or touch-based dragging (moving) of an element\n *\n * @param {Element} target The element that will be dragged.\n * @param {Element=} opt_handle An optional handle to control the drag, if null\n *     the target is used.\n * @param {goog.math.Rect=} opt_limits Object containing left, top, width,\n *     and height.\n *\n * @extends {goog.events.EventTarget}\n * @constructor\n * @struct\n */\ngoog.fx.Dragger = function(target, opt_handle, opt_limits) {\n  goog.fx.Dragger.base(this, 'constructor');\n\n  /**\n   * Reference to drag target element.\n   * @type {?Element}\n   */\n  this.target = target;\n\n  /**\n   * Reference to the handler that initiates the drag.\n   * @type {?Element}\n   */\n  this.handle = opt_handle || target;\n\n  /**\n   * Object representing the limits of the drag region.\n   * @type {goog.math.Rect}\n   */\n  this.limits = opt_limits || new goog.math.Rect(NaN, NaN, NaN, NaN);\n\n  /**\n   * Reference to a document object to use for the events.\n   * @private {Document}\n   */\n  this.document_ = goog.dom.getOwnerDocument(target);\n\n  /** @private {!goog.events.EventHandler} */\n  this.eventHandler_ = new goog.events.EventHandler(this);\n  this.registerDisposable(this.eventHandler_);\n\n  /**\n   * Whether the element is rendered right-to-left. We initialize this lazily.\n   * @private {boolean|undefined}}\n   */\n  this.rightToLeft_;\n\n  /**\n   * Current x position of mouse or touch relative to viewport.\n   * @type {number}\n   */\n  this.clientX = 0;\n\n  /**\n   * Current y position of mouse or touch relative to viewport.\n   * @type {number}\n   */\n  this.clientY = 0;\n\n  /**\n   * Current x position of mouse or touch relative to screen. Deprecated because\n   * it doesn't take into affect zoom level or pixel density.\n   * @type {number}\n   * @deprecated Consider switching to clientX instead.\n   */\n  this.screenX = 0;\n\n  /**\n   * Current y position of mouse or touch relative to screen. Deprecated because\n   * it doesn't take into affect zoom level or pixel density.\n   * @type {number}\n   * @deprecated Consider switching to clientY instead.\n   */\n  this.screenY = 0;\n\n  /**\n   * The x position where the first mousedown or touchstart occurred.\n   * @type {number}\n   */\n  this.startX = 0;\n\n  /**\n   * The y position where the first mousedown or touchstart occurred.\n   * @type {number}\n   */\n  this.startY = 0;\n\n  /**\n   * Current x position of drag relative to target's parent.\n   * @type {number}\n   */\n  this.deltaX = 0;\n\n  /**\n   * Current y position of drag relative to target's parent.\n   * @type {number}\n   */\n  this.deltaY = 0;\n\n  /**\n   * The current page scroll value.\n   * @type {?goog.math.Coordinate}\n   */\n  this.pageScroll;\n\n  /**\n   * Whether dragging is currently enabled.\n   * @private {boolean}\n   */\n  this.enabled_ = true;\n\n  /**\n   * Whether object is currently being dragged.\n   * @private {boolean}\n   */\n  this.dragging_ = false;\n\n  /**\n   * Whether mousedown should be default prevented.\n   * @private {boolean}\n   **/\n  this.preventMouseDown_ = true;\n\n  /**\n   * The amount of distance, in pixels, after which a mousedown or touchstart is\n   * considered a drag.\n   * @private {number}\n   */\n  this.hysteresisDistanceSquared_ = 0;\n\n  /**\n   * The SCROLL event target used to make drag element follow scrolling.\n   * @private {?EventTarget}\n   */\n  this.scrollTarget_;\n\n  /**\n   * Whether IE drag events cancelling is on.\n   * @private {boolean}\n   */\n  this.ieDragStartCancellingOn_ = false;\n\n  /**\n   * Whether the dragger implements the changes described in http://b/6324964,\n   * making it truly RTL.  This is a temporary flag to allow clients to\n   * transition to the new behavior at their convenience.  At some point it will\n   * be the default.\n   * @private {boolean}\n   */\n  this.useRightPositioningForRtl_ = false;\n\n  // Add listener. Do not use the event handler here since the event handler is\n  // used for listeners added and removed during the drag operation.\n  goog.events.listen(\n      this.handle,\n      [goog.events.EventType.TOUCHSTART, goog.events.EventType.MOUSEDOWN],\n      this.startDrag, false, this);\n\n  /** @private {boolean} Avoids setCapture() calls to fix click handlers. */\n  this.useSetCapture_ = goog.fx.Dragger.HAS_SET_CAPTURE_;\n};\ngoog.inherits(goog.fx.Dragger, goog.events.EventTarget);\n// Dragger is meant to be extended, but defines most properties on its\n// prototype, thus making it unsuitable for sealing.\ngoog.tagUnsealableClass(goog.fx.Dragger);\n\n\n/**\n * Whether setCapture is supported by the browser.\n * IE and Gecko after 1.9.3 have setCapture. MS Edge and WebKit\n * (https://bugs.webkit.org/show_bug.cgi?id=27330) don't.\n * @type {boolean}\n * @private\n */\ngoog.fx.Dragger.HAS_SET_CAPTURE_ = goog.global.document &&\n    goog.global.document.documentElement &&\n    !!goog.global.document.documentElement.setCapture &&\n    !!goog.global.document.releaseCapture;\n\n\n/**\n * Creates copy of node being dragged.  This is a utility function to be used\n * wherever it is inappropriate for the original source to follow the mouse\n * cursor itself.\n *\n * @param {Element} sourceEl Element to copy.\n * @return {!Element} The clone of `sourceEl`.\n */\ngoog.fx.Dragger.cloneNode = function(sourceEl) {\n  var clonedEl = sourceEl.cloneNode(true),\n      origTexts =\n          goog.dom.getElementsByTagName(goog.dom.TagName.TEXTAREA, sourceEl),\n      dragTexts =\n          goog.dom.getElementsByTagName(goog.dom.TagName.TEXTAREA, clonedEl);\n  // Cloning does not copy the current value of textarea elements, so correct\n  // this manually.\n  for (var i = 0; i < origTexts.length; i++) {\n    dragTexts[i].value = origTexts[i].value;\n  }\n  switch (sourceEl.tagName) {\n    case String(goog.dom.TagName.TR):\n      return goog.dom.createDom(\n          goog.dom.TagName.TABLE, null,\n          goog.dom.createDom(goog.dom.TagName.TBODY, null, clonedEl));\n    case String(goog.dom.TagName.TD):\n    case String(goog.dom.TagName.TH):\n      return goog.dom.createDom(\n          goog.dom.TagName.TABLE, null,\n          goog.dom.createDom(\n              goog.dom.TagName.TBODY, null,\n              goog.dom.createDom(goog.dom.TagName.TR, null, clonedEl)));\n    case String(goog.dom.TagName.TEXTAREA):\n      clonedEl.value = sourceEl.value;\n    default:\n      return clonedEl;\n  }\n};\n\n\n/**\n * Constants for event names.\n * @enum {string}\n */\ngoog.fx.Dragger.EventType = {\n  // The drag action was canceled before the START event. Possible reasons:\n  // disabled dragger, dragging with the right mouse button or releasing the\n  // button before reaching the hysteresis distance.\n  EARLY_CANCEL: 'earlycancel',\n  START: 'start',\n  BEFOREDRAG: 'beforedrag',\n  DRAG: 'drag',\n  END: 'end'\n};\n\n\n/**\n * Prevents the dragger from calling setCapture(), even in browsers that support\n * it.  If the draggable item has click handlers, setCapture() can break them.\n * @param {boolean} allow True to use setCapture if the browser supports it.\n */\ngoog.fx.Dragger.prototype.setAllowSetCapture = function(allow) {\n  this.useSetCapture_ = allow && goog.fx.Dragger.HAS_SET_CAPTURE_;\n};\n\n\n/**\n * Turns on/off true RTL behavior.  This should be called immediately after\n * construction.  This is a temporary flag to allow clients to transition\n * to the new component at their convenience.  At some point true will be the\n * default.\n * @param {boolean} useRightPositioningForRtl True if \"right\" should be used for\n *     positioning, false if \"left\" should be used for positioning.\n */\ngoog.fx.Dragger.prototype.enableRightPositioningForRtl = function(\n    useRightPositioningForRtl) {\n  this.useRightPositioningForRtl_ = useRightPositioningForRtl;\n};\n\n\n/**\n * Returns the event handler, intended for subclass use.\n * @return {!goog.events.EventHandler<T>} The event handler.\n * @this {T}\n * @template T\n */\ngoog.fx.Dragger.prototype.getHandler = function() {\n  // TODO(user): templated \"this\" values currently result in \"this\" being\n  // \"unknown\" in the body of the function.\n  var self = /** @type {goog.fx.Dragger} */ (this);\n  return self.eventHandler_;\n};\n\n\n/**\n * Sets (or reset) the Drag limits after a Dragger is created.\n * @param {goog.math.Rect?} limits Object containing left, top, width,\n *     height for new Dragger limits. If target is right-to-left and\n *     enableRightPositioningForRtl(true) is called, then rect is interpreted as\n *     right, top, width, and height.\n */\ngoog.fx.Dragger.prototype.setLimits = function(limits) {\n  this.limits = limits || new goog.math.Rect(NaN, NaN, NaN, NaN);\n};\n\n\n/**\n * Sets the distance the user has to drag the element before a drag operation is\n * started.\n * @param {number} distance The number of pixels after which a mousedown and\n *     move is considered a drag.\n */\ngoog.fx.Dragger.prototype.setHysteresis = function(distance) {\n  this.hysteresisDistanceSquared_ = Math.pow(distance, 2);\n};\n\n\n/**\n * Gets the distance the user has to drag the element before a drag operation is\n * started.\n * @return {number} distance The number of pixels after which a mousedown and\n *     move is considered a drag.\n */\ngoog.fx.Dragger.prototype.getHysteresis = function() {\n  return Math.sqrt(this.hysteresisDistanceSquared_);\n};\n\n\n/**\n * Sets the SCROLL event target to make drag element follow scrolling.\n *\n * @param {EventTarget} scrollTarget The event target that dispatches SCROLL\n *     events.\n */\ngoog.fx.Dragger.prototype.setScrollTarget = function(scrollTarget) {\n  this.scrollTarget_ = scrollTarget;\n};\n\n\n/**\n * Enables cancelling of built-in IE drag events.\n * @param {boolean} cancelIeDragStart Whether to enable cancelling of IE\n *     dragstart event.\n */\ngoog.fx.Dragger.prototype.setCancelIeDragStart = function(cancelIeDragStart) {\n  this.ieDragStartCancellingOn_ = cancelIeDragStart;\n};\n\n\n/**\n * @return {boolean} Whether the dragger is enabled.\n */\ngoog.fx.Dragger.prototype.getEnabled = function() {\n  return this.enabled_;\n};\n\n\n/**\n * Set whether dragger is enabled\n * @param {boolean} enabled Whether dragger is enabled.\n */\ngoog.fx.Dragger.prototype.setEnabled = function(enabled) {\n  this.enabled_ = enabled;\n};\n\n\n/**\n * Set whether mousedown should be default prevented.\n * @param {boolean} preventMouseDown Whether mousedown should be default\n *     prevented.\n */\ngoog.fx.Dragger.prototype.setPreventMouseDown = function(preventMouseDown) {\n  this.preventMouseDown_ = preventMouseDown;\n};\n\n\n/** @override */\ngoog.fx.Dragger.prototype.disposeInternal = function() {\n  goog.fx.Dragger.superClass_.disposeInternal.call(this);\n  goog.events.unlisten(\n      this.handle,\n      [goog.events.EventType.TOUCHSTART, goog.events.EventType.MOUSEDOWN],\n      this.startDrag, false, this);\n  this.cleanUpAfterDragging_();\n\n  this.target = null;\n  this.handle = null;\n};\n\n\n/**\n * Whether the DOM element being manipulated is rendered right-to-left.\n * @return {boolean} True if the DOM element is rendered right-to-left, false\n *     otherwise.\n * @private\n */\ngoog.fx.Dragger.prototype.isRightToLeft_ = function() {\n  if (!goog.isDef(this.rightToLeft_)) {\n    this.rightToLeft_ = goog.style.isRightToLeft(this.target);\n  }\n  return this.rightToLeft_;\n};\n\n\n/**\n * Event handler that is used to start the drag\n * @param {goog.events.BrowserEvent} e Event object.\n */\ngoog.fx.Dragger.prototype.startDrag = function(e) {\n  var isMouseDown = e.type == goog.events.EventType.MOUSEDOWN;\n\n  // Dragger.startDrag() can be called by AbstractDragDrop with a mousemove\n  // event and IE does not report pressed mouse buttons on mousemove. Also,\n  // it does not make sense to check for the button if the user is already\n  // dragging.\n\n  if (this.enabled_ && !this.dragging_ &&\n      (!isMouseDown || e.isMouseActionButton())) {\n    if (this.hysteresisDistanceSquared_ == 0) {\n      if (this.fireDragStart_(e)) {\n        this.dragging_ = true;\n        if (this.preventMouseDown_ && isMouseDown) {\n          e.preventDefault();\n        }\n      } else {\n        // If the start drag is cancelled, don't setup for a drag.\n        return;\n      }\n    } else if (this.preventMouseDown_ && isMouseDown) {\n      // Need to preventDefault for hysteresis to prevent page getting selected.\n      e.preventDefault();\n    }\n    this.setupDragHandlers();\n\n    this.clientX = this.startX = e.clientX;\n    this.clientY = this.startY = e.clientY;\n    this.screenX = e.screenX;\n    this.screenY = e.screenY;\n    this.computeInitialPosition();\n    this.pageScroll = goog.dom.getDomHelper(this.document_).getDocumentScroll();\n  } else {\n    this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);\n  }\n};\n\n\n/**\n * Sets up event handlers when dragging starts.\n * @protected\n */\ngoog.fx.Dragger.prototype.setupDragHandlers = function() {\n  var doc = this.document_;\n  var docEl = doc.documentElement;\n  // Use bubbling when we have setCapture since we got reports that IE has\n  // problems with the capturing events in combination with setCapture.\n  var useCapture = !this.useSetCapture_;\n\n  this.eventHandler_.listen(\n      doc, [goog.events.EventType.TOUCHMOVE, goog.events.EventType.MOUSEMOVE],\n      this.handleMove_, {capture: useCapture, passive: false});\n  this.eventHandler_.listen(\n      doc, [goog.events.EventType.TOUCHEND, goog.events.EventType.MOUSEUP],\n      this.endDrag, useCapture);\n\n  if (this.useSetCapture_) {\n    docEl.setCapture(false);\n    this.eventHandler_.listen(\n        docEl, goog.events.EventType.LOSECAPTURE, this.endDrag);\n  } else {\n    // Make sure we stop the dragging if the window loses focus.\n    // Don't use capture in this listener because we only want to end the drag\n    // if the actual window loses focus. Since blur events do not bubble we use\n    // a bubbling listener on the window.\n    this.eventHandler_.listen(\n        goog.dom.getWindow(doc), goog.events.EventType.BLUR, this.endDrag);\n  }\n\n  if (goog.userAgent.IE && this.ieDragStartCancellingOn_) {\n    // Cancel IE's 'ondragstart' event.\n    this.eventHandler_.listen(\n        doc, goog.events.EventType.DRAGSTART, goog.events.Event.preventDefault);\n  }\n\n  if (this.scrollTarget_) {\n    this.eventHandler_.listen(\n        this.scrollTarget_, goog.events.EventType.SCROLL, this.onScroll_,\n        useCapture);\n  }\n};\n\n\n/**\n * Fires a goog.fx.Dragger.EventType.START event.\n * @param {goog.events.BrowserEvent} e Browser event that triggered the drag.\n * @return {boolean} False iff preventDefault was called on the DragEvent.\n * @private\n */\ngoog.fx.Dragger.prototype.fireDragStart_ = function(e) {\n  return this.dispatchEvent(\n      new goog.fx.DragEvent(\n          goog.fx.Dragger.EventType.START, this, e.clientX, e.clientY, e));\n};\n\n\n/**\n * Unregisters the event handlers that are only active during dragging, and\n * releases mouse capture.\n * @private\n */\ngoog.fx.Dragger.prototype.cleanUpAfterDragging_ = function() {\n  this.eventHandler_.removeAll();\n  if (this.useSetCapture_) {\n    this.document_.releaseCapture();\n  }\n};\n\n\n/**\n * Event handler that is used to end the drag.\n * @param {goog.events.BrowserEvent} e Event object.\n * @param {boolean=} opt_dragCanceled Whether the drag has been canceled.\n */\ngoog.fx.Dragger.prototype.endDrag = function(e, opt_dragCanceled) {\n  this.cleanUpAfterDragging_();\n\n  if (this.dragging_) {\n    this.dragging_ = false;\n\n    var x = this.limitX(this.deltaX);\n    var y = this.limitY(this.deltaY);\n    var dragCanceled =\n        opt_dragCanceled || e.type == goog.events.EventType.TOUCHCANCEL;\n    this.dispatchEvent(\n        new goog.fx.DragEvent(\n            goog.fx.Dragger.EventType.END, this, e.clientX, e.clientY, e, x, y,\n            dragCanceled));\n  } else {\n    this.dispatchEvent(goog.fx.Dragger.EventType.EARLY_CANCEL);\n  }\n};\n\n\n/**\n * Event handler that is used to end the drag by cancelling it.\n * @param {goog.events.BrowserEvent} e Event object.\n */\ngoog.fx.Dragger.prototype.endDragCancel = function(e) {\n  this.endDrag(e, true);\n};\n\n\n/**\n * Event handler that is used on mouse / touch move to update the drag\n * @param {goog.events.BrowserEvent} e Event object.\n * @private\n */\ngoog.fx.Dragger.prototype.handleMove_ = function(e) {\n  if (this.enabled_) {\n    // dx in right-to-left cases is relative to the right.\n    var sign =\n        this.useRightPositioningForRtl_ && this.isRightToLeft_() ? -1 : 1;\n    var dx = sign * (e.clientX - this.clientX);\n    var dy = e.clientY - this.clientY;\n    this.clientX = e.clientX;\n    this.clientY = e.clientY;\n    this.screenX = e.screenX;\n    this.screenY = e.screenY;\n\n    if (!this.dragging_) {\n      var diffX = this.startX - this.clientX;\n      var diffY = this.startY - this.clientY;\n      var distance = diffX * diffX + diffY * diffY;\n      if (distance > this.hysteresisDistanceSquared_) {\n        if (this.fireDragStart_(e)) {\n          this.dragging_ = true;\n        } else {\n          // DragListGroup disposes of the dragger if BEFOREDRAGSTART is\n          // canceled.\n          if (!this.isDisposed()) {\n            this.endDrag(e);\n          }\n          return;\n        }\n      }\n    }\n\n    var pos = this.calculatePosition_(dx, dy);\n    var x = pos.x;\n    var y = pos.y;\n\n    if (this.dragging_) {\n      var rv = this.dispatchEvent(\n          new goog.fx.DragEvent(\n              goog.fx.Dragger.EventType.BEFOREDRAG, this, e.clientX, e.clientY,\n              e, x, y));\n\n      // Only do the defaultAction and dispatch drag event if predrag didn't\n      // prevent default\n      if (rv) {\n        this.doDrag(e, x, y, false);\n        e.preventDefault();\n      }\n    }\n  }\n};\n\n\n/**\n * Calculates the drag position.\n *\n * @param {number} dx The horizontal movement delta.\n * @param {number} dy The vertical movement delta.\n * @return {!goog.math.Coordinate} The newly calculated drag element position.\n * @private\n */\ngoog.fx.Dragger.prototype.calculatePosition_ = function(dx, dy) {\n  // Update the position for any change in body scrolling\n  var pageScroll = goog.dom.getDomHelper(this.document_).getDocumentScroll();\n  dx += pageScroll.x - this.pageScroll.x;\n  dy += pageScroll.y - this.pageScroll.y;\n  this.pageScroll = pageScroll;\n\n  this.deltaX += dx;\n  this.deltaY += dy;\n\n  var x = this.limitX(this.deltaX);\n  var y = this.limitY(this.deltaY);\n  return new goog.math.Coordinate(x, y);\n};\n\n\n/**\n * Event handler for scroll target scrolling.\n * @param {goog.events.BrowserEvent} e The event.\n * @private\n */\ngoog.fx.Dragger.prototype.onScroll_ = function(e) {\n  var pos = this.calculatePosition_(0, 0);\n  e.clientX = this.clientX;\n  e.clientY = this.clientY;\n  this.doDrag(e, pos.x, pos.y, true);\n};\n\n\n/**\n * @param {goog.events.BrowserEvent} e The closure object\n *     representing the browser event that caused a drag event.\n * @param {number} x The new horizontal position for the drag element.\n * @param {number} y The new vertical position for the drag element.\n * @param {boolean} dragFromScroll Whether dragging was caused by scrolling\n *     the associated scroll target.\n * @protected\n */\ngoog.fx.Dragger.prototype.doDrag = function(e, x, y, dragFromScroll) {\n  this.defaultAction(x, y);\n  this.dispatchEvent(\n      new goog.fx.DragEvent(\n          goog.fx.Dragger.EventType.DRAG, this, e.clientX, e.clientY, e, x, y));\n};\n\n\n/**\n * Returns the 'real' x after limits are applied (allows for some\n * limits to be undefined).\n * @param {number} x X-coordinate to limit.\n * @return {number} The 'real' X-coordinate after limits are applied.\n */\ngoog.fx.Dragger.prototype.limitX = function(x) {\n  var rect = this.limits;\n  var left = !isNaN(rect.left) ? rect.left : null;\n  var width = !isNaN(rect.width) ? rect.width : 0;\n  var maxX = left != null ? left + width : Infinity;\n  var minX = left != null ? left : -Infinity;\n  return Math.min(maxX, Math.max(minX, x));\n};\n\n\n/**\n * Returns the 'real' y after limits are applied (allows for some\n * limits to be undefined).\n * @param {number} y Y-coordinate to limit.\n * @return {number} The 'real' Y-coordinate after limits are applied.\n */\ngoog.fx.Dragger.prototype.limitY = function(y) {\n  var rect = this.limits;\n  var top = !isNaN(rect.top) ? rect.top : null;\n  var height = !isNaN(rect.height) ? rect.height : 0;\n  var maxY = top != null ? top + height : Infinity;\n  var minY = top != null ? top : -Infinity;\n  return Math.min(maxY, Math.max(minY, y));\n};\n\n\n/**\n * Overridable function for computing the initial position of the target\n * before dragging begins.\n * @protected\n */\ngoog.fx.Dragger.prototype.computeInitialPosition = function() {\n  this.deltaX = this.useRightPositioningForRtl_ ?\n      goog.style.bidi.getOffsetStart(this.target) :\n      /** @type {!HTMLElement} */ (this.target).offsetLeft;\n  this.deltaY = /** @type {!HTMLElement} */ (this.target).offsetTop;\n};\n\n\n/**\n * Overridable function for handling the default action of the drag behaviour.\n * Normally this is simply moving the element to x,y though in some cases it\n * might be used to resize the layer.  This is basically a shortcut to\n * implementing a default ondrag event handler.\n * @param {number} x X-coordinate for target element. In right-to-left, x this\n *     is the number of pixels the target should be moved to from the right.\n * @param {number} y Y-coordinate for target element.\n */\ngoog.fx.Dragger.prototype.defaultAction = function(x, y) {\n  if (this.useRightPositioningForRtl_ && this.isRightToLeft_()) {\n    this.target.style.right = x + 'px';\n  } else {\n    this.target.style.left = x + 'px';\n  }\n  this.target.style.top = y + 'px';\n};\n\n\n/**\n * @return {boolean} Whether the dragger is currently in the midst of a drag.\n */\ngoog.fx.Dragger.prototype.isDragging = function() {\n  return this.dragging_;\n};\n\n\n\n/**\n * Object representing a drag event\n * @param {string} type Event type.\n * @param {goog.fx.Dragger} dragobj Drag object initiating event.\n * @param {number} clientX X-coordinate relative to the viewport.\n * @param {number} clientY Y-coordinate relative to the viewport.\n * @param {goog.events.BrowserEvent} browserEvent The closure object\n *   representing the browser event that caused this drag event.\n * @param {number=} opt_actX Optional actual x for drag if it has been limited.\n * @param {number=} opt_actY Optional actual y for drag if it has been limited.\n * @param {boolean=} opt_dragCanceled Whether the drag has been canceled.\n * @constructor\n * @struct\n * @extends {goog.events.Event}\n */\ngoog.fx.DragEvent = function(\n    type, dragobj, clientX, clientY, browserEvent, opt_actX, opt_actY,\n    opt_dragCanceled) {\n  goog.events.Event.call(this, type);\n\n  /**\n   * X-coordinate relative to the viewport\n   * @type {number}\n   */\n  this.clientX = clientX;\n\n  /**\n   * Y-coordinate relative to the viewport\n   * @type {number}\n   */\n  this.clientY = clientY;\n\n  /**\n   * The closure object representing the browser event that caused this drag\n   * event.\n   * @type {goog.events.BrowserEvent}\n   */\n  this.browserEvent = browserEvent;\n\n  /**\n   * The real x-position of the drag if it has been limited\n   * @type {number}\n   */\n  this.left = goog.isDef(opt_actX) ? opt_actX : dragobj.deltaX;\n\n  /**\n   * The real y-position of the drag if it has been limited\n   * @type {number}\n   */\n  this.top = goog.isDef(opt_actY) ? opt_actY : dragobj.deltaY;\n\n  /**\n   * Reference to the drag object for this event\n   * @type {goog.fx.Dragger}\n   */\n  this.dragger = dragobj;\n\n  /**\n   * Whether drag was canceled with this event. Used to differentiate between\n   * a legitimate drag END that can result in an action and a drag END which is\n   * a result of a drag cancelation. For now it can happen 1) with drag END\n   * event on FireFox when user drags the mouse out of the window, 2) with\n   * drag END event on IE7 which is generated on MOUSEMOVE event when user\n   * moves the mouse into the document after the mouse button has been\n   * released, 3) when TOUCHCANCEL is raised instead of TOUCHEND (on touch\n   * events).\n   * @type {boolean}\n   */\n  this.dragCanceled = !!opt_dragCanceled;\n};\ngoog.inherits(goog.fx.DragEvent, goog.events.Event);\n","/**\r\n * A collection of helper functions for general use.\r\n */\r\ngoog.provide('annotorious.dom');\r\n\r\ngoog.require('goog.math.Rect');\r\ngoog.require('goog.fx.Dragger');\r\n\r\n/**\r\n * Computes the absolute top/left offset of a DOM element relative to the document.\r\n * @param {Element} el the DOM element\r\n * @return {Object} an object containing the offset { top, left }\r\n */\r\nannotorious.dom.getOffset = function(el) {\r\n  var _x = 0;\r\n  var _y = 0;\r\n  \r\n  while (el && !isNaN(el.offsetLeft) && !isNaN(el.offsetTop)) {\r\n    _x += el.offsetLeft - el.scrollLeft;\r\n    _y += el.offsetTop - el.scrollTop;\r\n    el = el.offsetParent;\r\n  }\r\n  return { top: _y, left: _x };\r\n}\r\n\r\n/**\r\n * Checks whether a certain DOM element is (partly) within the current viewport.\r\n * Cf. http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport\r\n * @param {Element} el the DOM element to check for visibility\r\n * @return {boolean} true if the element is within the current viewport\r\n */\r\nannotorious.dom.isInViewport = function(el) {\r\n  var top = el.offsetTop;\r\n  var left = el.offsetLeft;\r\n  var width = el.offsetWidth;\r\n  var height = el.offsetHeight;\r\n\r\n  while (el.offsetParent) {\r\n    el = el.offsetParent;\r\n    top += el.offsetTop;\r\n    left += el.offsetLeft;\r\n  }\r\n\r\n  return (\r\n    top < (window.pageYOffset + window.innerHeight) &&\r\n    left < (window.pageXOffset + window.innerWidth) &&\r\n    (top + height) > window.pageYOffset &&\r\n    (left + width) > window.pageXOffset\r\n  ); \r\n}\r\n\r\n/**\r\n * Adds an additional handler function to window.onload, without overwriting existing ones.\r\n * @param {Function} fn the handler function to add\r\n */\r\nannotorious.dom.addOnLoadHandler = function(fn) {\r\n  if (window.addEventListener)\r\n    window.addEventListener('load', fn, false);\r\n  else if (window.attachEvent) \r\n    window.attachEvent('onload', fn);\r\n}\r\n\r\n/**\r\n * Makes a DIV element resizable into horizontal direction.\r\n * @param {Element} div the DIV to make h-resizable\r\n * @param {Function=} opt_callback an optional function to be notified on resize\r\n */\r\nannotorious.dom.makeHResizable = function(div, opt_callback) {\r\n  var handle = goog.dom.createElement('div');\r\n  goog.style.setStyle(handle, 'position', 'absolute');\r\n  goog.style.setStyle(handle, 'top', '0px');\r\n  goog.style.setStyle(handle, 'right', '0px');\r\n  goog.style.setStyle(handle, 'width', '5px');\r\n  goog.style.setStyle(handle, 'height', '100%');\r\n  goog.style.setStyle(handle, 'cursor', 'e-resize');\r\n  goog.dom.appendChild(div, handle);\r\n  \r\n  var div_border = goog.style.getBorderBox(div);\r\n  var width_limit = goog.style.getBounds(div).width - div_border.right - div_border.left;\r\n\r\n  var dragger = new goog.fx.Dragger(handle);  \r\n  dragger.setLimits(new goog.math.Rect(width_limit, 0, 800, 0));\r\n  dragger.defaultAction = function(x) {\r\n    goog.style.setStyle(div, 'width', x + 'px');\r\n    if (opt_callback)\r\n      opt_callback();\r\n  };\r\n}\r\n\r\n/**\r\n * A utility method that transforms a relative URL to an absolute URL.\r\n * This function is safe to use with all URLs: if an absolute URL is passed\r\n * as a parameter, it will remain unchanged.\r\n * @param {String} url the URL\r\n */\r\nannotorious.dom.toAbsoluteURL = function(url) {\r\n  if (url.indexOf('://') > 0) {\r\n    return url;\r\n  } else {\r\n\tvar link = document.createElement('a');\r\n    link.href = url;\r\n    return link.protocol + '//' + link.host + link.pathname;\r\n  }\r\n}\r\n","goog.provide('annotorious.events');\r\n\r\ngoog.require('goog.array');\r\ngoog.require('goog.events');\r\n\r\n/**\r\n * A central 'event bus' to distribute the annotation lifecycle events.\r\n * @constructor\r\n */\r\nannotorious.events.EventBroker = function() {\r\n  /** @private **/\r\n  this._handlers = [];\r\n}\r\n\r\n/**\r\n * Adds an event handler.\r\n * @param {annotorious.events.EventType} type the event type\r\n * @param {Function} handler the handler function to add\r\n */\r\nannotorious.events.EventBroker.prototype.addHandler = function(type, handler) {\r\n  if (!this._handlers[type]) \r\n    this._handlers[type] = [];\r\n\r\n  this._handlers[type].push(handler);  \r\n}\r\n\r\n/**\r\n * Removes an event handler.\r\n * @param {annotorious.events.EventType} type the event type\r\n * @param {Function} handler the handler function to remove\r\n */\r\nannotorious.events.EventBroker.prototype.removeHandler = function(type, handler) {\r\n  var handlers = this._handlers[type];\r\n  if (handlers)\r\n    goog.array.remove(handlers, handler);  \r\n}\r\n\r\n/**\r\n * Fires an event, triggering execution of all registered handlers.\r\n * Event handlers may optionally return a boolean value to indicate whether\r\n * further steps following the event should be canceled (e.g. in case of \r\n * annotation removal). If there is no return value (or the return value is\r\n * 'true'), no action will be taken by Annotorious. \r\n * @param {annotorious.events.EventType} type the event type\r\n * @param {Object=} opt_event the event object\r\n * @return {boolean} the 'cancel event' flag\r\n */\r\nannotorious.events.EventBroker.prototype.fireEvent = function(type, opt_event, opt_extra) {\r\n  var cancelEvent = false;\r\n  var handlers = this._handlers[type];\r\n  if (handlers) {\r\n    goog.array.forEach(handlers, function(handler, idx, array) {\r\n      var retVal = handler(opt_event, opt_extra);\r\n      if (goog.isDef(retVal) && !retVal)\r\n        cancelEvent = true;\r\n    });\r\n  }    \r\n\r\n  return cancelEvent;\r\n}\r\n\r\n/**\r\n * Annotation lifecycle events.\r\n * @enum {string}\r\n */\r\nannotorious.events.EventType = {\r\n\r\n  /**\r\n   * The mouse entered the annotatable media area\r\n   */\r\n  MOUSE_OVER_ANNOTATABLE_ITEM: 'onMouseOverItem',\r\n\r\n  /**\r\n   * The mouse moved out of the annotatable media area\r\n   */\r\n  MOUSE_OUT_OF_ANNOTATABLE_ITEM: 'onMouseOutOfItem',\r\n\r\n  /** \r\n   * The mouse entered an annotation\r\n   */ \r\n  MOUSE_OVER_ANNOTATION: 'onMouseOverAnnotation',\r\n\r\n  /** \r\n   * The mouse moved out of an annotation\r\n   */ \r\n  MOUSE_OUT_OF_ANNOTATION: 'onMouseOutOfAnnotation',\r\n\r\n  /**\r\n   * A new selection was started\r\n   */\r\n  SELECTION_STARTED: 'onSelectionStarted',\r\n  \r\n  /**\r\n   * The current selection was canceled\r\n   */\r\n  SELECTION_CANCELED: 'onSelectionCanceled',\r\n  \r\n  /** \r\n   * The current selection was completed\r\n   */\r\n  SELECTION_COMPLETED: 'onSelectionCompleted',\r\n  \r\n  /** \r\n   * The current selection was changed\r\n   */\r\n  SELECTION_CHANGED: 'onSelectionChanged',\r\n\r\n    \r\n  /**\r\n   * The annotation editor is opening.  Pass the annotation object if it exists.\r\n   */\r\n  BEFORE_EDITOR_SHOWN: 'beforeEditorShown',\r\n\r\n  /**\r\n   * The annotation editor was opened.  Pass the annotation object if it exists.\r\n   */\r\n  EDITOR_SHOWN: 'onEditorShown',\r\n  \r\n  /**\r\n   * The annotation popop was opened.  Pass the annotation object.\r\n   */\r\n  POPUP_SHOWN: 'onPopupShown',\r\n\r\n  /**\r\n   * The annotation popup widget is about to hide\r\n   */\r\n  BEFORE_POPUP_HIDE: 'beforePopupHide',\r\n\r\n  /**\r\n   * The annotation is about to be removed\r\n   */\r\n  BEFORE_ANNOTATION_REMOVED: 'beforeAnnotationRemoved',\r\n\r\n  /**\r\n   * An annotation was removed\r\n   */\r\n  ANNOTATION_REMOVED: 'onAnnotationRemoved',\r\n\r\n  /**\r\n   * An annotation was created\r\n   */\r\n  ANNOTATION_CREATED: 'onAnnotationCreated',\r\n  \r\n  /**\r\n   * An existing annotation was updated\r\n   */\r\n  ANNOTATION_UPDATED: 'onAnnotationUpdated',\r\n\r\n  /**\r\n   * The annotation was clicked.  Pass the annotation object.\r\n   */\r\n  ANNOTATION_CLICKED: 'onAnnotationClicked'\r\n  \r\n};\r\n","// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities for creating functions. Loosely inspired by the\n * java classes: http://goo.gl/GM0Hmu and http://goo.gl/6k7nI8.\n *\n * @author nicksantos@google.com (Nick Santos)\n */\n\n\ngoog.provide('goog.functions');\n\n\n/**\n * Creates a function that always returns the same value.\n * @param {T} retValue The value to return.\n * @return {function():T} The new function.\n * @template T\n */\ngoog.functions.constant = function(retValue) {\n  return function() { return retValue; };\n};\n\n\n/**\n * Always returns false.\n * @type {function(...): boolean}\n */\ngoog.functions.FALSE = goog.functions.constant(false);\n\n\n/**\n * Always returns true.\n * @type {function(...): boolean}\n */\ngoog.functions.TRUE = goog.functions.constant(true);\n\n\n/**\n * Always returns NULL.\n * @type {function(...): null}\n */\ngoog.functions.NULL = goog.functions.constant(null);\n\n\n/**\n * A simple function that returns the first argument of whatever is passed\n * into it.\n * @param {T=} opt_returnValue The single value that will be returned.\n * @param {...*} var_args Optional trailing arguments. These are ignored.\n * @return {T} The first argument passed in, or undefined if nothing was passed.\n * @template T\n */\ngoog.functions.identity = function(opt_returnValue, var_args) {\n  return opt_returnValue;\n};\n\n\n/**\n * Creates a function that always throws an error with the given message.\n * @param {string} message The error message.\n * @return {!Function} The error-throwing function.\n */\ngoog.functions.error = function(message) {\n  return function() {\n    throw new Error(message);\n  };\n};\n\n\n/**\n * Creates a function that throws the given object.\n * @param {*} err An object to be thrown.\n * @return {!Function} The error-throwing function.\n */\ngoog.functions.fail = function(err) {\n  return function() { throw err; };\n};\n\n\n/**\n * Given a function, create a function that keeps opt_numArgs arguments and\n * silently discards all additional arguments.\n * @param {Function} f The original function.\n * @param {number=} opt_numArgs The number of arguments to keep. Defaults to 0.\n * @return {!Function} A version of f that only keeps the first opt_numArgs\n *     arguments.\n */\ngoog.functions.lock = function(f, opt_numArgs) {\n  opt_numArgs = opt_numArgs || 0;\n  return function() {\n    var self = /** @type {*} */ (this);\n    return f.apply(self, Array.prototype.slice.call(arguments, 0, opt_numArgs));\n  };\n};\n\n\n/**\n * Creates a function that returns its nth argument.\n * @param {number} n The position of the return argument.\n * @return {!Function} A new function.\n */\ngoog.functions.nth = function(n) {\n  return function() { return arguments[n]; };\n};\n\n\n/**\n * Like goog.partial(), except that arguments are added after arguments to the\n * returned function.\n *\n * Usage:\n * function f(arg1, arg2, arg3, arg4) { ... }\n * var g = goog.functions.partialRight(f, arg3, arg4);\n * g(arg1, arg2);\n *\n * @param {!Function} fn A function to partially apply.\n * @param {...*} var_args Additional arguments that are partially applied to fn\n *     at the end.\n * @return {!Function} A partially-applied form of the function goog.partial()\n *     was invoked as a method of.\n */\ngoog.functions.partialRight = function(fn, var_args) {\n  var rightArgs = Array.prototype.slice.call(arguments, 1);\n  return function() {\n    var self = /** @type {*} */ (this);\n    var newArgs = Array.prototype.slice.call(arguments);\n    newArgs.push.apply(newArgs, rightArgs);\n    return fn.apply(self, newArgs);\n  };\n};\n\n\n/**\n * Given a function, create a new function that swallows its return value\n * and replaces it with a new one.\n * @param {Function} f A function.\n * @param {T} retValue A new return value.\n * @return {function(...?):T} A new function.\n * @template T\n */\ngoog.functions.withReturnValue = function(f, retValue) {\n  return goog.functions.sequence(f, goog.functions.constant(retValue));\n};\n\n\n/**\n * Creates a function that returns whether its argument equals the given value.\n *\n * Example:\n * var key = goog.object.findKey(obj, goog.functions.equalTo('needle'));\n *\n * @param {*} value The value to compare to.\n * @param {boolean=} opt_useLooseComparison Whether to use a loose (==)\n *     comparison rather than a strict (===) one. Defaults to false.\n * @return {function(*):boolean} The new function.\n */\ngoog.functions.equalTo = function(value, opt_useLooseComparison) {\n  return function(other) {\n    return opt_useLooseComparison ? (value == other) : (value === other);\n  };\n};\n\n\n/**\n * Creates the composition of the functions passed in.\n * For example, (goog.functions.compose(f, g))(a) is equivalent to f(g(a)).\n * @param {function(...?):T} fn The final function.\n * @param {...Function} var_args A list of functions.\n * @return {function(...?):T} The composition of all inputs.\n * @template T\n */\ngoog.functions.compose = function(fn, var_args) {\n  var functions = arguments;\n  var length = functions.length;\n  return function() {\n    var self = /** @type {*} */ (this);\n    var result;\n    if (length) {\n      result = functions[length - 1].apply(self, arguments);\n    }\n\n    for (var i = length - 2; i >= 0; i--) {\n      result = functions[i].call(self, result);\n    }\n    return result;\n  };\n};\n\n\n/**\n * Creates a function that calls the functions passed in in sequence, and\n * returns the value of the last function. For example,\n * (goog.functions.sequence(f, g))(x) is equivalent to f(x),g(x).\n * @param {...Function} var_args A list of functions.\n * @return {!Function} A function that calls all inputs in sequence.\n */\ngoog.functions.sequence = function(var_args) {\n  var functions = arguments;\n  var length = functions.length;\n  return function() {\n    var self = /** @type {*} */ (this);\n    var result;\n    for (var i = 0; i < length; i++) {\n      result = functions[i].apply(self, arguments);\n    }\n    return result;\n  };\n};\n\n\n/**\n * Creates a function that returns true if each of its components evaluates\n * to true. The components are evaluated in order, and the evaluation will be\n * short-circuited as soon as a function returns false.\n * For example, (goog.functions.and(f, g))(x) is equivalent to f(x) && g(x).\n * @param {...Function} var_args A list of functions.\n * @return {function(...?):boolean} A function that ANDs its component\n *      functions.\n */\ngoog.functions.and = function(var_args) {\n  var functions = arguments;\n  var length = functions.length;\n  return function() {\n    var self = /** @type {*} */ (this);\n    for (var i = 0; i < length; i++) {\n      if (!functions[i].apply(self, arguments)) {\n        return false;\n      }\n    }\n    return true;\n  };\n};\n\n\n/**\n * Creates a function that returns true if any of its components evaluates\n * to true. The components are evaluated in order, and the evaluation will be\n * short-circuited as soon as a function returns true.\n * For example, (goog.functions.or(f, g))(x) is equivalent to f(x) || g(x).\n * @param {...Function} var_args A list of functions.\n * @return {function(...?):boolean} A function that ORs its component\n *    functions.\n */\ngoog.functions.or = function(var_args) {\n  var functions = arguments;\n  var length = functions.length;\n  return function() {\n    var self = /** @type {*} */ (this);\n    for (var i = 0; i < length; i++) {\n      if (functions[i].apply(self, arguments)) {\n        return true;\n      }\n    }\n    return false;\n  };\n};\n\n\n/**\n * Creates a function that returns the Boolean opposite of a provided function.\n * For example, (goog.functions.not(f))(x) is equivalent to !f(x).\n * @param {!Function} f The original function.\n * @return {function(...?):boolean} A function that delegates to f and returns\n * opposite.\n */\ngoog.functions.not = function(f) {\n  return function() {\n    var self = /** @type {*} */ (this);\n    return !f.apply(self, arguments);\n  };\n};\n\n\n/**\n * Generic factory function to construct an object given the constructor\n * and the arguments. Intended to be bound to create object factories.\n *\n * Example:\n *\n * var factory = goog.partial(goog.functions.create, Class);\n *\n * @param {function(new:T, ...)} constructor The constructor for the Object.\n * @param {...*} var_args The arguments to be passed to the constructor.\n * @return {T} A new instance of the class given in `constructor`.\n * @template T\n */\ngoog.functions.create = function(constructor, var_args) {\n  /**\n   * @constructor\n   * @final\n   */\n  var temp = function() {};\n  temp.prototype = constructor.prototype;\n\n  // obj will have constructor's prototype in its chain and\n  // 'obj instanceof constructor' will be true.\n  var obj = new temp();\n\n  // obj is initialized by constructor.\n  // arguments is only array-like so lacks shift(), but can be used with\n  // the Array prototype function.\n  constructor.apply(obj, Array.prototype.slice.call(arguments, 1));\n  return obj;\n};\n\n\n/**\n * @define {boolean} Whether the return value cache should be used.\n *    This should only be used to disable caches when testing.\n */\ngoog.define('goog.functions.CACHE_RETURN_VALUE', true);\n\n\n/**\n * Gives a wrapper function that caches the return value of a parameterless\n * function when first called.\n *\n * When called for the first time, the given function is called and its\n * return value is cached (thus this is only appropriate for idempotent\n * functions).  Subsequent calls will return the cached return value. This\n * allows the evaluation of expensive functions to be delayed until first used.\n *\n * To cache the return values of functions with parameters, see goog.memoize.\n *\n * @param {function():T} fn A function to lazily evaluate.\n * @return {function():T} A wrapped version the function.\n * @template T\n */\ngoog.functions.cacheReturnValue = function(fn) {\n  var called = false;\n  var value;\n\n  return function() {\n    if (!goog.functions.CACHE_RETURN_VALUE) {\n      return fn();\n    }\n\n    if (!called) {\n      value = fn();\n      called = true;\n    }\n\n    return value;\n  };\n};\n\n\n/**\n * Wraps a function to allow it to be called, at most, once. All\n * additional calls are no-ops.\n *\n * This is particularly useful for initialization functions\n * that should be called, at most, once.\n *\n * @param {function():*} f Function to call.\n * @return {function():undefined} Wrapped function.\n */\ngoog.functions.once = function(f) {\n  // Keep a reference to the function that we null out when we're done with\n  // it -- that way, the function can be GC'd when we're done with it.\n  var inner = f;\n  return function() {\n    if (inner) {\n      var tmp = inner;\n      inner = null;\n      tmp();\n    }\n  };\n};\n\n\n/**\n * Wraps a function to allow it to be called, at most, once per interval\n * (specified in milliseconds). If the wrapper function is called N times within\n * that interval, only the Nth call will go through.\n *\n * This is particularly useful for batching up repeated actions where the\n * last action should win. This can be used, for example, for refreshing an\n * autocomplete pop-up every so often rather than updating with every keystroke,\n * since the final text typed by the user is the one that should produce the\n * final autocomplete results. For more stateful debouncing with support for\n * pausing, resuming, and canceling debounced actions, use\n * `goog.async.Debouncer`.\n *\n * @param {function(this:SCOPE, ...?)} f Function to call.\n * @param {number} interval Interval over which to debounce. The function will\n *     only be called after the full interval has elapsed since the last call.\n * @param {SCOPE=} opt_scope Object in whose scope to call the function.\n * @return {function(...?): undefined} Wrapped function.\n * @template SCOPE\n */\ngoog.functions.debounce = function(f, interval, opt_scope) {\n  var timeout = 0;\n  return /** @type {function(...?)} */ (function(var_args) {\n    goog.global.clearTimeout(timeout);\n    var args = arguments;\n    timeout = goog.global.setTimeout(function() {\n      f.apply(opt_scope, args);\n    }, interval);\n  });\n};\n\n\n/**\n * Wraps a function to allow it to be called, at most, once per interval\n * (specified in milliseconds). If the wrapper function is called N times in\n * that interval, both the 1st and the Nth calls will go through.\n *\n * This is particularly useful for limiting repeated user requests where the\n * the last action should win, but you also don't want to wait until the end of\n * the interval before sending a request out, as it leads to a perception of\n * slowness for the user.\n *\n * @param {function(this:SCOPE, ...?)} f Function to call.\n * @param {number} interval Interval over which to throttle. The function can\n *     only be called once per interval.\n * @param {SCOPE=} opt_scope Object in whose scope to call the function.\n * @return {function(...?): undefined} Wrapped function.\n * @template SCOPE\n */\ngoog.functions.throttle = function(f, interval, opt_scope) {\n  var timeout = 0;\n  var shouldFire = false;\n  var args = [];\n\n  var handleTimeout = function() {\n    timeout = 0;\n    if (shouldFire) {\n      shouldFire = false;\n      fire();\n    }\n  };\n\n  var fire = function() {\n    timeout = goog.global.setTimeout(handleTimeout, interval);\n    f.apply(opt_scope, args);\n  };\n\n  return /** @type {function(...?)} */ (function(var_args) {\n    args = arguments;\n    if (!timeout) {\n      fire();\n    } else {\n      shouldFire = true;\n    }\n  });\n};\n\n\n/**\n * Wraps a function to allow it to be called, at most, once per interval\n * (specified in milliseconds). If the wrapper function is called N times within\n * that interval, only the 1st call will go through.\n *\n * This is particularly useful for limiting repeated user requests where the\n * first request is guaranteed to have all the data required to perform the\n * final action, so there's no need to wait until the end of the interval before\n * sending the request out.\n *\n * @param {function(this:SCOPE, ...?)} f Function to call.\n * @param {number} interval Interval over which to rate-limit. The function will\n *     only be called once per interval, and ignored for the remainer of the\n *     interval.\n * @param {SCOPE=} opt_scope Object in whose scope to call the function.\n * @return {function(...?): undefined} Wrapped function.\n * @template SCOPE\n */\ngoog.functions.rateLimit = function(f, interval, opt_scope) {\n  var timeout = 0;\n\n  var handleTimeout = function() {\n    timeout = 0;\n  };\n\n  return /** @type {function(...?)} */ (function(var_args) {\n    if (!timeout) {\n      timeout = goog.global.setTimeout(handleTimeout, interval);\n      f.apply(opt_scope, arguments);\n    }\n  });\n};\n","// Copyright 2007 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Python style iteration utilities.\n * @author arv@google.com (Erik Arvidsson)\n */\n\n\ngoog.provide('goog.iter');\ngoog.provide('goog.iter.Iterable');\ngoog.provide('goog.iter.Iterator');\ngoog.provide('goog.iter.StopIteration');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.functions');\ngoog.require('goog.math');\n\n\n/**\n * @typedef {goog.iter.Iterator|{length:number}|{__iterator__}}\n */\ngoog.iter.Iterable;\n\n\n/**\n * Singleton Error object that is used to terminate iterations.\n * @const {!Error}\n */\ngoog.iter.StopIteration = ('StopIteration' in goog.global) ?\n    // For script engines that support legacy iterators.\n    goog.global['StopIteration'] :\n    {message: 'StopIteration', stack: ''};\n\n\n\n/**\n * Class/interface for iterators.  An iterator needs to implement a `next`\n * method and it needs to throw a `goog.iter.StopIteration` when the\n * iteration passes beyond the end.  Iterators have no `hasNext` method.\n * It is recommended to always use the helper functions to iterate over the\n * iterator or in case you are only targeting JavaScript 1.7 for in loops.\n * @constructor\n * @template VALUE\n */\ngoog.iter.Iterator = function() {};\n\n\n/**\n * Returns the next value of the iteration.  This will throw the object\n * {@see goog.iter#StopIteration} when the iteration passes the end.\n * @return {VALUE} Any object or value.\n */\ngoog.iter.Iterator.prototype.next = function() {\n  throw goog.iter.StopIteration;\n};\n\n\n/**\n * Returns the `Iterator` object itself.  This is used to implement\n * the iterator protocol in JavaScript 1.7\n * @param {boolean=} opt_keys  Whether to return the keys or values. Default is\n *     to only return the values.  This is being used by the for-in loop (true)\n *     and the for-each-in loop (false).  Even though the param gives a hint\n *     about what the iterator will return there is no guarantee that it will\n *     return the keys when true is passed.\n * @return {!goog.iter.Iterator<VALUE>} The object itself.\n */\ngoog.iter.Iterator.prototype.__iterator__ = function(opt_keys) {\n  return this;\n};\n\n\n/**\n * Returns an iterator that knows how to iterate over the values in the object.\n * @param {goog.iter.Iterator<VALUE>|goog.iter.Iterable} iterable  If the\n *     object is an iterator it will be returned as is.  If the object has an\n *     `__iterator__` method that will be called to get the value\n *     iterator.  If the object is an array-like object we create an iterator\n *     for that.\n * @return {!goog.iter.Iterator<VALUE>} An iterator that knows how to iterate\n *     over the values in `iterable`.\n * @template VALUE\n */\ngoog.iter.toIterator = function(iterable) {\n  if (iterable instanceof goog.iter.Iterator) {\n    return iterable;\n  }\n  if (typeof iterable.__iterator__ == 'function') {\n    return /** @type {{__iterator__:function(this:?, boolean=)}} */ (iterable)\n        .__iterator__(false);\n  }\n  if (goog.isArrayLike(iterable)) {\n    var like = /** @type {!IArrayLike<number|string>} */ (iterable);\n    var i = 0;\n    var newIter = new goog.iter.Iterator;\n    newIter.next = function() {\n      while (true) {\n        if (i >= like.length) {\n          throw goog.iter.StopIteration;\n        }\n        // Don't include deleted elements.\n        if (!(i in like)) {\n          i++;\n          continue;\n        }\n        return like[i++];\n      }\n    };\n    return newIter;\n  }\n\n\n  // TODO(arv): Should we fall back on goog.structs.getValues()?\n  throw new Error('Not implemented');\n};\n\n\n/**\n * Calls a function for each element in the iterator with the element of the\n * iterator passed as argument.\n *\n * @param {goog.iter.Iterator<VALUE>|goog.iter.Iterable} iterable  The iterator\n *     to iterate over. If the iterable is an object `toIterator` will be\n *     called on it.\n * @param {function(this:THIS,VALUE,?,!goog.iter.Iterator<VALUE>)} f\n *     The function to call for every element.  This function takes 3 arguments\n *     (the element, undefined, and the iterator) and the return value is\n *     irrelevant.  The reason for passing undefined as the second argument is\n *     so that the same function can be used in {@see goog.array#forEach} as\n *     well as others.  The third parameter is of type \"number\" for\n *     arraylike objects, undefined, otherwise.\n * @param {THIS=} opt_obj  The object to be used as the value of 'this' within\n *     `f`.\n * @template THIS, VALUE\n */\ngoog.iter.forEach = function(iterable, f, opt_obj) {\n  if (goog.isArrayLike(iterable)) {\n\n    try {\n      // NOTES: this passes the index number to the second parameter\n      // of the callback contrary to the documentation above.\n      goog.array.forEach(\n          /** @type {IArrayLike<?>} */ (iterable), f, opt_obj);\n    } catch (ex) {\n      if (ex !== goog.iter.StopIteration) {\n        throw ex;\n      }\n    }\n  } else {\n    iterable = goog.iter.toIterator(iterable);\n\n    try {\n      while (true) {\n        f.call(opt_obj, iterable.next(), undefined, iterable);\n      }\n    } catch (ex) {\n      if (ex !== goog.iter.StopIteration) {\n        throw ex;\n      }\n    }\n  }\n};\n\n\n/**\n * Calls a function for every element in the iterator, and if the function\n * returns true adds the element to a new iterator.\n *\n * @param {goog.iter.Iterator<VALUE>|goog.iter.Iterable} iterable The iterator\n *     to iterate over.\n * @param {\n *     function(this:THIS,VALUE,undefined,!goog.iter.Iterator<VALUE>):boolean} f\n *     The function to call for every element. This function takes 3 arguments\n *     (the element, undefined, and the iterator) and should return a boolean.\n *     If the return value is true the element will be included in the returned\n *     iterator.  If it is false the element is not included.\n * @param {THIS=} opt_obj The object to be used as the value of 'this' within\n *     `f`.\n * @return {!goog.iter.Iterator<VALUE>} A new iterator in which only elements\n *     that passed the test are present.\n * @template THIS, VALUE\n */\ngoog.iter.filter = function(iterable, f, opt_obj) {\n  var iterator = goog.iter.toIterator(iterable);\n  var newIter = new goog.iter.Iterator;\n  newIter.next = function() {\n    while (true) {\n      var val = iterator.next();\n      if (f.call(opt_obj, val, undefined, iterator)) {\n        return val;\n      }\n    }\n  };\n  return newIter;\n};\n\n\n/**\n * Calls a function for every element in the iterator, and if the function\n * returns false adds the element to a new iterator.\n *\n * @param {goog.iter.Iterator<VALUE>|goog.iter.Iterable} iterable The iterator\n *     to iterate over.\n * @param {\n *     function(this:THIS,VALUE,undefined,!goog.iter.Iterator<VALUE>):boolean} f\n *     The function to call for every element. This function takes 3 arguments\n *     (the element, undefined, and the iterator) and should return a boolean.\n *     If the return value is false the element will be included in the returned\n *     iterator.  If it is true the element is not included.\n * @param {THIS=} opt_obj The object to be used as the value of 'this' within\n *     `f`.\n * @return {!goog.iter.Iterator<VALUE>} A new iterator in which only elements\n *     that did not pass the test are present.\n * @template THIS, VALUE\n */\ngoog.iter.filterFalse = function(iterable, f, opt_obj) {\n  return goog.iter.filter(iterable, goog.functions.not(f), opt_obj);\n};\n\n\n/**\n * Creates a new iterator that returns the values in a range.  This function\n * can take 1, 2 or 3 arguments:\n * <pre>\n * range(5) same as range(0, 5, 1)\n * range(2, 5) same as range(2, 5, 1)\n * </pre>\n *\n * @param {number} startOrStop  The stop value if only one argument is provided.\n *     The start value if 2 or more arguments are provided.  If only one\n *     argument is used the start value is 0.\n * @param {number=} opt_stop  The stop value.  If left out then the first\n *     argument is used as the stop value.\n * @param {number=} opt_step  The number to increment with between each call to\n *     next.  This can be negative.\n * @return {!goog.iter.Iterator<number>} A new iterator that returns the values\n *     in the range.\n */\ngoog.iter.range = function(startOrStop, opt_stop, opt_step) {\n  var start = 0;\n  var stop = startOrStop;\n  var step = opt_step || 1;\n  if (arguments.length > 1) {\n    start = startOrStop;\n    stop = +opt_stop;\n  }\n  if (step == 0) {\n    throw new Error('Range step argument must not be zero');\n  }\n\n  var newIter = new goog.iter.Iterator;\n  newIter.next = function() {\n    if (step > 0 && start >= stop || step < 0 && start <= stop) {\n      throw goog.iter.StopIteration;\n    }\n    var rv = start;\n    start += step;\n    return rv;\n  };\n  return newIter;\n};\n\n\n/**\n * Joins the values in a iterator with a delimiter.\n * @param {goog.iter.Iterator<VALUE>|goog.iter.Iterable} iterable The iterator\n *     to get the values from.\n * @param {string} deliminator  The text to put between the values.\n * @return {string} The joined value string.\n * @template VALUE\n */\ngoog.iter.join = function(iterable, deliminator) {\n  return goog.iter.toArray(iterable).join(deliminator);\n};\n\n\n/**\n * For every element in the iterator call a function and return a new iterator\n * with that value.\n *\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterator to iterate over.\n * @param {\n *     function(this:THIS,VALUE,undefined,!goog.iter.Iterator<VALUE>):RESULT} f\n *     The function to call for every element.  This function takes 3 arguments\n *     (the element, undefined, and the iterator) and should return a new value.\n * @param {THIS=} opt_obj The object to be used as the value of 'this' within\n *     `f`.\n * @return {!goog.iter.Iterator<RESULT>} A new iterator that returns the\n *     results of applying the function to each element in the original\n *     iterator.\n * @template THIS, VALUE, RESULT\n */\ngoog.iter.map = function(iterable, f, opt_obj) {\n  var iterator = goog.iter.toIterator(iterable);\n  var newIter = new goog.iter.Iterator;\n  newIter.next = function() {\n    var val = iterator.next();\n    return f.call(opt_obj, val, undefined, iterator);\n  };\n  return newIter;\n};\n\n\n/**\n * Passes every element of an iterator into a function and accumulates the\n * result.\n *\n * @param {goog.iter.Iterator<VALUE>|goog.iter.Iterable} iterable The iterator\n *     to iterate over.\n * @param {function(this:THIS,VALUE,VALUE):VALUE} f The function to call for\n *     every element. This function takes 2 arguments (the function's previous\n *     result or the initial value, and the value of the current element).\n *     function(previousValue, currentElement) : newValue.\n * @param {VALUE} val The initial value to pass into the function on the first\n *     call.\n * @param {THIS=} opt_obj  The object to be used as the value of 'this' within\n *     f.\n * @return {VALUE} Result of evaluating f repeatedly across the values of\n *     the iterator.\n * @template THIS, VALUE\n */\ngoog.iter.reduce = function(iterable, f, val, opt_obj) {\n  var rval = val;\n  goog.iter.forEach(\n      iterable, function(val) { rval = f.call(opt_obj, rval, val); });\n  return rval;\n};\n\n\n/**\n * Goes through the values in the iterator. Calls f for each of these, and if\n * any of them returns true, this returns true (without checking the rest). If\n * all return false this will return false.\n *\n * @param {goog.iter.Iterator<VALUE>|goog.iter.Iterable} iterable The iterator\n *     object.\n * @param {\n *     function(this:THIS,VALUE,undefined,!goog.iter.Iterator<VALUE>):boolean} f\n *     The function to call for every value. This function takes 3 arguments\n *     (the value, undefined, and the iterator) and should return a boolean.\n * @param {THIS=} opt_obj The object to be used as the value of 'this' within\n *     `f`.\n * @return {boolean} true if any value passes the test.\n * @template THIS, VALUE\n */\ngoog.iter.some = function(iterable, f, opt_obj) {\n  iterable = goog.iter.toIterator(iterable);\n\n  try {\n    while (true) {\n      if (f.call(opt_obj, iterable.next(), undefined, iterable)) {\n        return true;\n      }\n    }\n  } catch (ex) {\n    if (ex !== goog.iter.StopIteration) {\n      throw ex;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Goes through the values in the iterator. Calls f for each of these and if any\n * of them returns false this returns false (without checking the rest). If all\n * return true this will return true.\n *\n * @param {goog.iter.Iterator<VALUE>|goog.iter.Iterable} iterable The iterator\n *     object.\n * @param {\n *     function(this:THIS,VALUE,undefined,!goog.iter.Iterator<VALUE>):boolean} f\n *     The function to call for every value. This function takes 3 arguments\n *     (the value, undefined, and the iterator) and should return a boolean.\n * @param {THIS=} opt_obj The object to be used as the value of 'this' within\n *     `f`.\n * @return {boolean} true if every value passes the test.\n * @template THIS, VALUE\n */\ngoog.iter.every = function(iterable, f, opt_obj) {\n  iterable = goog.iter.toIterator(iterable);\n\n  try {\n    while (true) {\n      if (!f.call(opt_obj, iterable.next(), undefined, iterable)) {\n        return false;\n      }\n    }\n  } catch (ex) {\n    if (ex !== goog.iter.StopIteration) {\n      throw ex;\n    }\n  }\n  return true;\n};\n\n\n/**\n * Takes zero or more iterables and returns one iterator that will iterate over\n * them in the order chained.\n * @param {...!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} var_args Any\n *     number of iterable objects.\n * @return {!goog.iter.Iterator<VALUE>} Returns a new iterator that will\n *     iterate over all the given iterables' contents.\n * @template VALUE\n */\ngoog.iter.chain = function(var_args) {\n  return goog.iter.chainFromIterable(arguments);\n};\n\n\n/**\n * Takes a single iterable containing zero or more iterables and returns one\n * iterator that will iterate over each one in the order given.\n * @see https://goo.gl/5NRp5d\n * @param {goog.iter.Iterable} iterable The iterable of iterables to chain.\n * @return {!goog.iter.Iterator<VALUE>} Returns a new iterator that will\n *     iterate over all the contents of the iterables contained within\n *     `iterable`.\n * @template VALUE\n */\ngoog.iter.chainFromIterable = function(iterable) {\n  var iterator = goog.iter.toIterator(iterable);\n  var iter = new goog.iter.Iterator();\n  var current = null;\n\n  iter.next = function() {\n    while (true) {\n      if (current == null) {\n        var it = iterator.next();\n        current = goog.iter.toIterator(it);\n      }\n      try {\n        return current.next();\n      } catch (ex) {\n        if (ex !== goog.iter.StopIteration) {\n          throw ex;\n        }\n        current = null;\n      }\n    }\n  };\n\n  return iter;\n};\n\n\n/**\n * Builds a new iterator that iterates over the original, but skips elements as\n * long as a supplied function returns true.\n * @param {goog.iter.Iterator<VALUE>|goog.iter.Iterable} iterable The iterator\n *     object.\n * @param {\n *     function(this:THIS,VALUE,undefined,!goog.iter.Iterator<VALUE>):boolean} f\n *     The function to call for every value. This function takes 3 arguments\n *     (the value, undefined, and the iterator) and should return a boolean.\n * @param {THIS=} opt_obj The object to be used as the value of 'this' within\n *     `f`.\n * @return {!goog.iter.Iterator<VALUE>} A new iterator that drops elements from\n *     the original iterator as long as `f` is true.\n * @template THIS, VALUE\n */\ngoog.iter.dropWhile = function(iterable, f, opt_obj) {\n  var iterator = goog.iter.toIterator(iterable);\n  var newIter = new goog.iter.Iterator;\n  var dropping = true;\n  newIter.next = function() {\n    while (true) {\n      var val = iterator.next();\n      if (dropping && f.call(opt_obj, val, undefined, iterator)) {\n        continue;\n      } else {\n        dropping = false;\n      }\n      return val;\n    }\n  };\n  return newIter;\n};\n\n\n/**\n * Builds a new iterator that iterates over the original, but only as long as a\n * supplied function returns true.\n * @param {goog.iter.Iterator<VALUE>|goog.iter.Iterable} iterable The iterator\n *     object.\n * @param {\n *     function(this:THIS,VALUE,undefined,!goog.iter.Iterator<VALUE>):boolean} f\n *     The function to call for every value. This function takes 3 arguments\n *     (the value, undefined, and the iterator) and should return a boolean.\n * @param {THIS=} opt_obj This is used as the 'this' object in f when called.\n * @return {!goog.iter.Iterator<VALUE>} A new iterator that keeps elements in\n *     the original iterator as long as the function is true.\n * @template THIS, VALUE\n */\ngoog.iter.takeWhile = function(iterable, f, opt_obj) {\n  var iterator = goog.iter.toIterator(iterable);\n  var iter = new goog.iter.Iterator();\n  iter.next = function() {\n    var val = iterator.next();\n    if (f.call(opt_obj, val, undefined, iterator)) {\n      return val;\n    }\n    throw goog.iter.StopIteration;\n  };\n  return iter;\n};\n\n\n/**\n * Converts the iterator to an array\n * @param {goog.iter.Iterator<VALUE>|goog.iter.Iterable} iterable The iterator\n *     to convert to an array.\n * @return {!Array<VALUE>} An array of the elements the iterator iterates over.\n * @template VALUE\n */\ngoog.iter.toArray = function(iterable) {\n  // Fast path for array-like.\n  if (goog.isArrayLike(iterable)) {\n    return goog.array.toArray(/** @type {!IArrayLike<?>} */ (iterable));\n  }\n  iterable = goog.iter.toIterator(iterable);\n  var array = [];\n  goog.iter.forEach(iterable, function(val) { array.push(val); });\n  return array;\n};\n\n\n/**\n * Iterates over two iterables and returns true if they contain the same\n * sequence of elements and have the same length.\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable1 The first\n *     iterable object.\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable2 The second\n *     iterable object.\n * @param {function(VALUE,VALUE):boolean=} opt_equalsFn Optional comparison\n *     function.\n *     Should take two arguments to compare, and return true if the arguments\n *     are equal. Defaults to {@link goog.array.defaultCompareEquality} which\n *     compares the elements using the built-in '===' operator.\n * @return {boolean} true if the iterables contain the same sequence of elements\n *     and have the same length.\n * @template VALUE\n */\ngoog.iter.equals = function(iterable1, iterable2, opt_equalsFn) {\n  var fillValue = {};\n  var pairs = goog.iter.zipLongest(fillValue, iterable1, iterable2);\n  var equalsFn = opt_equalsFn || goog.array.defaultCompareEquality;\n  return goog.iter.every(\n      pairs, function(pair) { return equalsFn(pair[0], pair[1]); });\n};\n\n\n/**\n * Advances the iterator to the next position, returning the given default value\n * instead of throwing an exception if the iterator has no more entries.\n * @param {goog.iter.Iterator<VALUE>|goog.iter.Iterable} iterable The iterable\n *     object.\n * @param {VALUE} defaultValue The value to return if the iterator is empty.\n * @return {VALUE} The next item in the iteration, or defaultValue if the\n *     iterator was empty.\n * @template VALUE\n */\ngoog.iter.nextOrValue = function(iterable, defaultValue) {\n  try {\n    return goog.iter.toIterator(iterable).next();\n  } catch (e) {\n    if (e != goog.iter.StopIteration) {\n      throw e;\n    }\n    return defaultValue;\n  }\n};\n\n\n/**\n * Cartesian product of zero or more sets.  Gives an iterator that gives every\n * combination of one element chosen from each set.  For example,\n * ([1, 2], [3, 4]) gives ([1, 3], [1, 4], [2, 3], [2, 4]).\n * @see http://docs.python.org/library/itertools.html#itertools.product\n * @param {...!IArrayLike<VALUE>} var_args Zero or more sets, as\n *     arrays.\n * @return {!goog.iter.Iterator<!Array<VALUE>>} An iterator that gives each\n *     n-tuple (as an array).\n * @template VALUE\n */\ngoog.iter.product = function(var_args) {\n  var someArrayEmpty =\n      goog.array.some(arguments, function(arr) { return !arr.length; });\n\n  // An empty set in a cartesian product gives an empty set.\n  if (someArrayEmpty || !arguments.length) {\n    return new goog.iter.Iterator();\n  }\n\n  var iter = new goog.iter.Iterator();\n  var arrays = arguments;\n\n  // The first indices are [0, 0, ...]\n  /** @type {?Array<number>} */\n  var indicies = goog.array.repeat(0, arrays.length);\n\n  iter.next = function() {\n\n    if (indicies) {\n      var retVal = goog.array.map(indicies, function(valueIndex, arrayIndex) {\n        return arrays[arrayIndex][valueIndex];\n      });\n\n      // Generate the next-largest indices for the next call.\n      // Increase the rightmost index. If it goes over, increase the next\n      // rightmost (like carry-over addition).\n      for (var i = indicies.length - 1; i >= 0; i--) {\n        // Assertion prevents compiler warning below.\n        goog.asserts.assert(indicies);\n        if (indicies[i] < arrays[i].length - 1) {\n          indicies[i]++;\n          break;\n        }\n\n        // We're at the last indices (the last element of every array), so\n        // the iteration is over on the next call.\n        if (i == 0) {\n          indicies = null;\n          break;\n        }\n        // Reset the index in this column and loop back to increment the\n        // next one.\n        indicies[i] = 0;\n      }\n      return retVal;\n    }\n\n    throw goog.iter.StopIteration;\n  };\n\n  return iter;\n};\n\n\n/**\n * Create an iterator to cycle over the iterable's elements indefinitely.\n * For example, ([1, 2, 3]) would return : 1, 2, 3, 1, 2, 3, ...\n * @see: http://docs.python.org/library/itertools.html#itertools.cycle.\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterable object.\n * @return {!goog.iter.Iterator<VALUE>} An iterator that iterates indefinitely\n *     over the values in `iterable`.\n * @template VALUE\n */\ngoog.iter.cycle = function(iterable) {\n  var baseIterator = goog.iter.toIterator(iterable);\n\n  // We maintain a cache to store the iterable elements as we iterate\n  // over them. The cache is used to return elements once we have\n  // iterated over the iterable once.\n  var cache = [];\n  var cacheIndex = 0;\n\n  var iter = new goog.iter.Iterator();\n\n  // This flag is set after the iterable is iterated over once\n  var useCache = false;\n\n  iter.next = function() {\n    var returnElement = null;\n\n    // Pull elements off the original iterator if not using cache\n    if (!useCache) {\n      try {\n        // Return the element from the iterable\n        returnElement = baseIterator.next();\n        cache.push(returnElement);\n        return returnElement;\n      } catch (e) {\n        // If an exception other than StopIteration is thrown\n        // or if there are no elements to iterate over (the iterable was empty)\n        // throw an exception\n        if (e != goog.iter.StopIteration || goog.array.isEmpty(cache)) {\n          throw e;\n        }\n        // set useCache to true after we know that a 'StopIteration' exception\n        // was thrown and the cache is not empty (to handle the 'empty iterable'\n        // use case)\n        useCache = true;\n      }\n    }\n\n    returnElement = cache[cacheIndex];\n    cacheIndex = (cacheIndex + 1) % cache.length;\n\n    return returnElement;\n  };\n\n  return iter;\n};\n\n\n/**\n * Creates an iterator that counts indefinitely from a starting value.\n * @see http://docs.python.org/2/library/itertools.html#itertools.count\n * @param {number=} opt_start The starting value. Default is 0.\n * @param {number=} opt_step The number to increment with between each call to\n *     next. Negative and floating point numbers are allowed. Default is 1.\n * @return {!goog.iter.Iterator<number>} A new iterator that returns the values\n *     in the series.\n */\ngoog.iter.count = function(opt_start, opt_step) {\n  var counter = opt_start || 0;\n  var step = goog.isDef(opt_step) ? opt_step : 1;\n  var iter = new goog.iter.Iterator();\n\n  iter.next = function() {\n    var returnValue = counter;\n    counter += step;\n    return returnValue;\n  };\n\n  return iter;\n};\n\n\n/**\n * Creates an iterator that returns the same object or value repeatedly.\n * @param {VALUE} value Any object or value to repeat.\n * @return {!goog.iter.Iterator<VALUE>} A new iterator that returns the\n *     repeated value.\n * @template VALUE\n */\ngoog.iter.repeat = function(value) {\n  var iter = new goog.iter.Iterator();\n\n  iter.next = goog.functions.constant(value);\n\n  return iter;\n};\n\n\n/**\n * Creates an iterator that returns running totals from the numbers in\n * `iterable`. For example, the array {@code [1, 2, 3, 4, 5]} yields\n * {@code 1 -> 3 -> 6 -> 10 -> 15}.\n * @see http://docs.python.org/3.2/library/itertools.html#itertools.accumulate\n * @param {!goog.iter.Iterable} iterable The iterable of numbers to\n *     accumulate.\n * @return {!goog.iter.Iterator<number>} A new iterator that returns the\n *     numbers in the series.\n */\ngoog.iter.accumulate = function(iterable) {\n  var iterator = goog.iter.toIterator(iterable);\n  var total = 0;\n  var iter = new goog.iter.Iterator();\n\n  iter.next = function() {\n    total += iterator.next();\n    return total;\n  };\n\n  return iter;\n};\n\n\n/**\n * Creates an iterator that returns arrays containing the ith elements from the\n * provided iterables. The returned arrays will be the same size as the number\n * of iterables given in `var_args`. Once the shortest iterable is\n * exhausted, subsequent calls to `next()` will throw\n * `goog.iter.StopIteration`.\n * @see http://docs.python.org/2/library/itertools.html#itertools.izip\n * @param {...!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} var_args Any\n *     number of iterable objects.\n * @return {!goog.iter.Iterator<!Array<VALUE>>} A new iterator that returns\n *     arrays of elements from the provided iterables.\n * @template VALUE\n */\ngoog.iter.zip = function(var_args) {\n  var args = arguments;\n  var iter = new goog.iter.Iterator();\n\n  if (args.length > 0) {\n    var iterators = goog.array.map(args, goog.iter.toIterator);\n    iter.next = function() {\n      var arr = goog.array.map(iterators, function(it) { return it.next(); });\n      return arr;\n    };\n  }\n\n  return iter;\n};\n\n\n/**\n * Creates an iterator that returns arrays containing the ith elements from the\n * provided iterables. The returned arrays will be the same size as the number\n * of iterables given in `var_args`. Shorter iterables will be extended\n * with `fillValue`. Once the longest iterable is exhausted, subsequent\n * calls to `next()` will throw `goog.iter.StopIteration`.\n * @see http://docs.python.org/2/library/itertools.html#itertools.izip_longest\n * @param {VALUE} fillValue The object or value used to fill shorter iterables.\n * @param {...!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} var_args Any\n *     number of iterable objects.\n * @return {!goog.iter.Iterator<!Array<VALUE>>} A new iterator that returns\n *     arrays of elements from the provided iterables.\n * @template VALUE\n */\ngoog.iter.zipLongest = function(fillValue, var_args) {\n  var args = goog.array.slice(arguments, 1);\n  var iter = new goog.iter.Iterator();\n\n  if (args.length > 0) {\n    var iterators = goog.array.map(args, goog.iter.toIterator);\n\n    iter.next = function() {\n      var iteratorsHaveValues = false;  // false when all iterators are empty.\n      var arr = goog.array.map(iterators, function(it) {\n        var returnValue;\n        try {\n          returnValue = it.next();\n          // Iterator had a value, so we've not exhausted the iterators.\n          // Set flag accordingly.\n          iteratorsHaveValues = true;\n        } catch (ex) {\n          if (ex !== goog.iter.StopIteration) {\n            throw ex;\n          }\n          returnValue = fillValue;\n        }\n        return returnValue;\n      });\n\n      if (!iteratorsHaveValues) {\n        throw goog.iter.StopIteration;\n      }\n      return arr;\n    };\n  }\n\n  return iter;\n};\n\n\n/**\n * Creates an iterator that filters `iterable` based on a series of\n * `selectors`. On each call to `next()`, one item is taken from\n * both the `iterable` and `selectors` iterators. If the item from\n * `selectors` evaluates to true, the item from `iterable` is given.\n * Otherwise, it is skipped. Once either `iterable` or `selectors`\n * is exhausted, subsequent calls to `next()` will throw\n * `goog.iter.StopIteration`.\n * @see http://docs.python.org/2/library/itertools.html#itertools.compress\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterable to filter.\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} selectors An\n *     iterable of items to be evaluated in a boolean context to determine if\n *     the corresponding element in `iterable` should be included in the\n *     result.\n * @return {!goog.iter.Iterator<VALUE>} A new iterator that returns the\n *     filtered values.\n * @template VALUE\n */\ngoog.iter.compress = function(iterable, selectors) {\n  var selectorIterator = goog.iter.toIterator(selectors);\n\n  return goog.iter.filter(\n      iterable, function() { return !!selectorIterator.next(); });\n};\n\n\n\n/**\n * Implements the `goog.iter.groupBy` iterator.\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterable to group.\n * @param {function(VALUE): KEY=} opt_keyFunc  Optional function for\n *     determining the key value for each group in the `iterable`. Default\n *     is the identity function.\n * @constructor\n * @extends {goog.iter.Iterator<!Array<?>>}\n * @template KEY, VALUE\n * @private\n */\ngoog.iter.GroupByIterator_ = function(iterable, opt_keyFunc) {\n\n  /**\n   * The iterable to group, coerced to an iterator.\n   * @type {!goog.iter.Iterator}\n   */\n  this.iterator = goog.iter.toIterator(iterable);\n\n  /**\n   * A function for determining the key value for each element in the iterable.\n   * If no function is provided, the identity function is used and returns the\n   * element unchanged.\n   * @type {function(VALUE): KEY}\n   */\n  this.keyFunc = opt_keyFunc || goog.functions.identity;\n\n  /**\n   * The target key for determining the start of a group.\n   * @type {KEY}\n   */\n  this.targetKey;\n\n  /**\n   * The current key visited during iteration.\n   * @type {KEY}\n   */\n  this.currentKey;\n\n  /**\n   * The current value being added to the group.\n   * @type {VALUE}\n   */\n  this.currentValue;\n};\ngoog.inherits(goog.iter.GroupByIterator_, goog.iter.Iterator);\n\n\n/** @override */\ngoog.iter.GroupByIterator_.prototype.next = function() {\n  while (this.currentKey == this.targetKey) {\n    this.currentValue = this.iterator.next();  // Exits on StopIteration\n    this.currentKey = this.keyFunc(this.currentValue);\n  }\n  this.targetKey = this.currentKey;\n  return [this.currentKey, this.groupItems_(this.targetKey)];\n};\n\n\n/**\n * Performs the grouping of objects using the given key.\n * @param {KEY} targetKey  The target key object for the group.\n * @return {!Array<VALUE>} An array of grouped objects.\n * @private\n */\ngoog.iter.GroupByIterator_.prototype.groupItems_ = function(targetKey) {\n  var arr = [];\n  while (this.currentKey == targetKey) {\n    arr.push(this.currentValue);\n    try {\n      this.currentValue = this.iterator.next();\n    } catch (ex) {\n      if (ex !== goog.iter.StopIteration) {\n        throw ex;\n      }\n      break;\n    }\n    this.currentKey = this.keyFunc(this.currentValue);\n  }\n  return arr;\n};\n\n\n/**\n * Creates an iterator that returns arrays containing elements from the\n * `iterable` grouped by a key value. For iterables with repeated\n * elements (i.e. sorted according to a particular key function), this function\n * has a `uniq`-like effect. For example, grouping the array:\n * {@code [A, B, B, C, C, A]} produces\n * {@code [A, [A]], [B, [B, B]], [C, [C, C]], [A, [A]]}.\n * @see http://docs.python.org/2/library/itertools.html#itertools.groupby\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterable to group.\n * @param {function(VALUE): KEY=} opt_keyFunc  Optional function for\n *     determining the key value for each group in the `iterable`. Default\n *     is the identity function.\n * @return {!goog.iter.Iterator<!Array<?>>} A new iterator that returns\n *     arrays of consecutive key and groups.\n * @template KEY, VALUE\n */\ngoog.iter.groupBy = function(iterable, opt_keyFunc) {\n  return new goog.iter.GroupByIterator_(iterable, opt_keyFunc);\n};\n\n\n/**\n * Gives an iterator that gives the result of calling the given function\n * <code>f</code> with the arguments taken from the next element from\n * <code>iterable</code> (the elements are expected to also be iterables).\n *\n * Similar to {@see goog.iter#map} but allows the function to accept multiple\n * arguments from the iterable.\n *\n * @param {!goog.iter.Iterable} iterable The iterable of\n *     iterables to iterate over.\n * @param {function(this:THIS,...*):RESULT} f The function to call for every\n *     element.  This function takes N+2 arguments, where N represents the\n *     number of items from the next element of the iterable. The two\n *     additional arguments passed to the function are undefined and the\n *     iterator itself. The function should return a new value.\n * @param {THIS=} opt_obj The object to be used as the value of 'this' within\n *     `f`.\n * @return {!goog.iter.Iterator<RESULT>} A new iterator that returns the\n *     results of applying the function to each element in the original\n *     iterator.\n * @template THIS, RESULT\n */\ngoog.iter.starMap = function(iterable, f, opt_obj) {\n  var iterator = goog.iter.toIterator(iterable);\n  var iter = new goog.iter.Iterator();\n\n  iter.next = function() {\n    var args = goog.iter.toArray(iterator.next());\n    return f.apply(opt_obj, goog.array.concat(args, undefined, iterator));\n  };\n\n  return iter;\n};\n\n\n/**\n * Returns an array of iterators each of which can iterate over the values in\n * `iterable` without advancing the others.\n * @see http://docs.python.org/2/library/itertools.html#itertools.tee\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterable to tee.\n * @param {number=} opt_num  The number of iterators to create. Default is 2.\n * @return {!Array<goog.iter.Iterator<VALUE>>} An array of iterators.\n * @template VALUE\n */\ngoog.iter.tee = function(iterable, opt_num) {\n  var iterator = goog.iter.toIterator(iterable);\n  var num = goog.isNumber(opt_num) ? opt_num : 2;\n  var buffers =\n      goog.array.map(goog.array.range(num), function() { return []; });\n\n  var addNextIteratorValueToBuffers = function() {\n    var val = iterator.next();\n    goog.array.forEach(buffers, function(buffer) { buffer.push(val); });\n  };\n\n  var createIterator = function(buffer) {\n    // Each tee'd iterator has an associated buffer (initially empty). When a\n    // tee'd iterator's buffer is empty, it calls\n    // addNextIteratorValueToBuffers(), adding the next value to all tee'd\n    // iterators' buffers, and then returns that value. This allows each\n    // iterator to be advanced independently.\n    var iter = new goog.iter.Iterator();\n\n    iter.next = function() {\n      if (goog.array.isEmpty(buffer)) {\n        addNextIteratorValueToBuffers();\n      }\n      goog.asserts.assert(!goog.array.isEmpty(buffer));\n      return buffer.shift();\n    };\n\n    return iter;\n  };\n\n  return goog.array.map(buffers, createIterator);\n};\n\n\n/**\n * Creates an iterator that returns arrays containing a count and an element\n * obtained from the given `iterable`.\n * @see http://docs.python.org/2/library/functions.html#enumerate\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterable to enumerate.\n * @param {number=} opt_start  Optional starting value. Default is 0.\n * @return {!goog.iter.Iterator<!Array<?>>} A new iterator containing\n *     count/item pairs.\n * @template VALUE\n */\ngoog.iter.enumerate = function(iterable, opt_start) {\n  return goog.iter.zip(goog.iter.count(opt_start), iterable);\n};\n\n\n/**\n * Creates an iterator that returns the first `limitSize` elements from an\n * iterable. If this number is greater than the number of elements in the\n * iterable, all the elements are returned.\n * @see http://goo.gl/V0sihp Inspired by the limit iterator in Guava.\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterable to limit.\n * @param {number} limitSize  The maximum number of elements to return.\n * @return {!goog.iter.Iterator<VALUE>} A new iterator containing\n *     `limitSize` elements.\n * @template VALUE\n */\ngoog.iter.limit = function(iterable, limitSize) {\n  goog.asserts.assert(goog.math.isInt(limitSize) && limitSize >= 0);\n\n  var iterator = goog.iter.toIterator(iterable);\n\n  var iter = new goog.iter.Iterator();\n  var remaining = limitSize;\n\n  iter.next = function() {\n    if (remaining-- > 0) {\n      return iterator.next();\n    }\n    throw goog.iter.StopIteration;\n  };\n\n  return iter;\n};\n\n\n/**\n * Creates an iterator that is advanced `count` steps ahead. Consumed\n * values are silently discarded. If `count` is greater than the number\n * of elements in `iterable`, an empty iterator is returned. Subsequent\n * calls to `next()` will throw `goog.iter.StopIteration`.\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterable to consume.\n * @param {number} count  The number of elements to consume from the iterator.\n * @return {!goog.iter.Iterator<VALUE>} An iterator advanced zero or more steps\n *     ahead.\n * @template VALUE\n */\ngoog.iter.consume = function(iterable, count) {\n  goog.asserts.assert(goog.math.isInt(count) && count >= 0);\n\n  var iterator = goog.iter.toIterator(iterable);\n\n  while (count-- > 0) {\n    goog.iter.nextOrValue(iterator, null);\n  }\n\n  return iterator;\n};\n\n\n/**\n * Creates an iterator that returns a range of elements from an iterable.\n * Similar to {@see goog.array#slice} but does not support negative indexes.\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterable to slice.\n * @param {number} start  The index of the first element to return.\n * @param {number=} opt_end  The index after the last element to return. If\n *     defined, must be greater than or equal to `start`.\n * @return {!goog.iter.Iterator<VALUE>} A new iterator containing a slice of\n *     the original.\n * @template VALUE\n */\ngoog.iter.slice = function(iterable, start, opt_end) {\n  goog.asserts.assert(goog.math.isInt(start) && start >= 0);\n\n  var iterator = goog.iter.consume(iterable, start);\n\n  if (goog.isNumber(opt_end)) {\n    goog.asserts.assert(goog.math.isInt(opt_end) && opt_end >= start);\n    iterator = goog.iter.limit(iterator, opt_end - start /* limitSize */);\n  }\n\n  return iterator;\n};\n\n\n/**\n * Checks an array for duplicate elements.\n * @param {?IArrayLike<VALUE>} arr The array to check for\n *     duplicates.\n * @return {boolean} True, if the array contains duplicates, false otherwise.\n * @private\n * @template VALUE\n */\n// TODO(user): Consider moving this into goog.array as a public function.\ngoog.iter.hasDuplicates_ = function(arr) {\n  var deduped = [];\n  goog.array.removeDuplicates(arr, deduped);\n  return arr.length != deduped.length;\n};\n\n\n/**\n * Creates an iterator that returns permutations of elements in\n * `iterable`.\n *\n * Permutations are obtained by taking the Cartesian product of\n * `opt_length` iterables and filtering out those with repeated\n * elements. For example, the permutations of {@code [1,2,3]} are\n * {@code [[1,2,3], [1,3,2], [2,1,3], [2,3,1], [3,1,2], [3,2,1]]}.\n * @see http://docs.python.org/2/library/itertools.html#itertools.permutations\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterable from which to generate permutations.\n * @param {number=} opt_length Length of each permutation. If omitted, defaults\n *     to the length of `iterable`.\n * @return {!goog.iter.Iterator<!Array<VALUE>>} A new iterator containing the\n *     permutations of `iterable`.\n * @template VALUE\n */\ngoog.iter.permutations = function(iterable, opt_length) {\n  var elements = goog.iter.toArray(iterable);\n  var length = goog.isNumber(opt_length) ? opt_length : elements.length;\n\n  var sets = goog.array.repeat(elements, length);\n  var product = goog.iter.product.apply(undefined, sets);\n\n  return goog.iter.filter(\n      product, function(arr) { return !goog.iter.hasDuplicates_(arr); });\n};\n\n\n/**\n * Creates an iterator that returns combinations of elements from\n * `iterable`.\n *\n * Combinations are obtained by taking the {@see goog.iter#permutations} of\n * `iterable` and filtering those whose elements appear in the order they\n * are encountered in `iterable`. For example, the 3-length combinations\n * of {@code [0,1,2,3]} are {@code [[0,1,2], [0,1,3], [0,2,3], [1,2,3]]}.\n * @see http://docs.python.org/2/library/itertools.html#itertools.combinations\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterable from which to generate combinations.\n * @param {number} length The length of each combination.\n * @return {!goog.iter.Iterator<!Array<VALUE>>} A new iterator containing\n *     combinations from the `iterable`.\n * @template VALUE\n */\ngoog.iter.combinations = function(iterable, length) {\n  var elements = goog.iter.toArray(iterable);\n  var indexes = goog.iter.range(elements.length);\n  var indexIterator = goog.iter.permutations(indexes, length);\n  // sortedIndexIterator will now give arrays of with the given length that\n  // indicate what indexes into \"elements\" should be returned on each iteration.\n  var sortedIndexIterator = goog.iter.filter(\n      indexIterator, function(arr) { return goog.array.isSorted(arr); });\n\n  var iter = new goog.iter.Iterator();\n\n  function getIndexFromElements(index) { return elements[index]; }\n\n  iter.next = function() {\n    return goog.array.map(sortedIndexIterator.next(), getIndexFromElements);\n  };\n\n  return iter;\n};\n\n\n/**\n * Creates an iterator that returns combinations of elements from\n * `iterable`, with repeated elements possible.\n *\n * Combinations are obtained by taking the Cartesian product of `length`\n * iterables and filtering those whose elements appear in the order they are\n * encountered in `iterable`. For example, the 2-length combinations of\n * {@code [1,2,3]} are {@code [[1,1], [1,2], [1,3], [2,2], [2,3], [3,3]]}.\n * @see https://goo.gl/C0yXe4\n * @see https://goo.gl/djOCsk\n * @param {!goog.iter.Iterator<VALUE>|!goog.iter.Iterable} iterable The\n *     iterable to combine.\n * @param {number} length The length of each combination.\n * @return {!goog.iter.Iterator<!Array<VALUE>>} A new iterator containing\n *     combinations from the `iterable`.\n * @template VALUE\n */\ngoog.iter.combinationsWithReplacement = function(iterable, length) {\n  var elements = goog.iter.toArray(iterable);\n  var indexes = goog.array.range(elements.length);\n  var sets = goog.array.repeat(indexes, length);\n  var indexIterator = goog.iter.product.apply(undefined, sets);\n  // sortedIndexIterator will now give arrays of with the given length that\n  // indicate what indexes into \"elements\" should be returned on each iteration.\n  var sortedIndexIterator = goog.iter.filter(\n      indexIterator, function(arr) { return goog.array.isSorted(arr); });\n\n  var iter = new goog.iter.Iterator();\n\n  function getIndexFromElements(index) { return elements[index]; }\n\n  iter.next = function() {\n    return goog.array.map(\n        /** @type {!Array<number>} */\n        (sortedIndexIterator.next()), getIndexFromElements);\n  };\n\n  return iter;\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Datastructure: Hash Map.\n *\n * @author arv@google.com (Erik Arvidsson)\n *\n * This file contains an implementation of a Map structure. It implements a lot\n * of the methods used in goog.structs so those functions work on hashes. This\n * is best suited for complex key types. For simple keys such as numbers and\n * strings consider using the lighter-weight utilities in goog.object.\n */\n\n\ngoog.provide('goog.structs.Map');\n\ngoog.require('goog.iter.Iterator');\ngoog.require('goog.iter.StopIteration');\n\n\n\n/**\n * Class for Hash Map datastructure.\n * @param {*=} opt_map Map or Object to initialize the map with.\n * @param {...*} var_args If 2 or more arguments are present then they\n *     will be used as key-value pairs.\n * @constructor\n * @template K, V\n * @deprecated This type is misleading: use ES6 Map instead.\n */\ngoog.structs.Map = function(opt_map, var_args) {\n\n  /**\n   * Underlying JS object used to implement the map.\n   * @private {!Object}\n   */\n  this.map_ = {};\n\n  /**\n   * An array of keys. This is necessary for two reasons:\n   *   1. Iterating the keys using for (var key in this.map_) allocates an\n   *      object for every key in IE which is really bad for IE6 GC perf.\n   *   2. Without a side data structure, we would need to escape all the keys\n   *      as that would be the only way we could tell during iteration if the\n   *      key was an internal key or a property of the object.\n   *\n   * This array can contain deleted keys so it's necessary to check the map\n   * as well to see if the key is still in the map (this doesn't require a\n   * memory allocation in IE).\n   * @private {!Array<string>}\n   */\n  this.keys_ = [];\n\n  /**\n   * The number of key value pairs in the map.\n   * @private {number}\n   */\n  this.count_ = 0;\n\n  /**\n   * Version used to detect changes while iterating.\n   * @private {number}\n   */\n  this.version_ = 0;\n\n  var argLength = arguments.length;\n\n  if (argLength > 1) {\n    if (argLength % 2) {\n      throw new Error('Uneven number of arguments');\n    }\n    for (var i = 0; i < argLength; i += 2) {\n      this.set(arguments[i], arguments[i + 1]);\n    }\n  } else if (opt_map) {\n    this.addAll(/** @type {!Object} */ (opt_map));\n  }\n};\n\n\n/**\n * @return {number} The number of key-value pairs in the map.\n */\ngoog.structs.Map.prototype.getCount = function() {\n  return this.count_;\n};\n\n\n/**\n * Returns the values of the map.\n * @return {!Array<V>} The values in the map.\n */\ngoog.structs.Map.prototype.getValues = function() {\n  this.cleanupKeysArray_();\n\n  var rv = [];\n  for (var i = 0; i < this.keys_.length; i++) {\n    var key = this.keys_[i];\n    rv.push(this.map_[key]);\n  }\n  return rv;\n};\n\n\n/**\n * Returns the keys of the map.\n * @return {!Array<string>} Array of string values.\n */\ngoog.structs.Map.prototype.getKeys = function() {\n  this.cleanupKeysArray_();\n  return /** @type {!Array<string>} */ (this.keys_.concat());\n};\n\n\n/**\n * Whether the map contains the given key.\n * @param {*} key The key to check for.\n * @return {boolean} Whether the map contains the key.\n */\ngoog.structs.Map.prototype.containsKey = function(key) {\n  return goog.structs.Map.hasKey_(this.map_, key);\n};\n\n\n/**\n * Whether the map contains the given value. This is O(n).\n * @param {V} val The value to check for.\n * @return {boolean} Whether the map contains the value.\n */\ngoog.structs.Map.prototype.containsValue = function(val) {\n  for (var i = 0; i < this.keys_.length; i++) {\n    var key = this.keys_[i];\n    if (goog.structs.Map.hasKey_(this.map_, key) && this.map_[key] == val) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Whether this map is equal to the argument map.\n * @param {goog.structs.Map} otherMap The map against which to test equality.\n * @param {function(V, V): boolean=} opt_equalityFn Optional equality function\n *     to test equality of values. If not specified, this will test whether\n *     the values contained in each map are identical objects.\n * @return {boolean} Whether the maps are equal.\n */\ngoog.structs.Map.prototype.equals = function(otherMap, opt_equalityFn) {\n  if (this === otherMap) {\n    return true;\n  }\n\n  if (this.count_ != otherMap.getCount()) {\n    return false;\n  }\n\n  var equalityFn = opt_equalityFn || goog.structs.Map.defaultEquals;\n\n  this.cleanupKeysArray_();\n  for (var key, i = 0; key = this.keys_[i]; i++) {\n    if (!equalityFn(this.get(key), otherMap.get(key))) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n\n/**\n * Default equality test for values.\n * @param {*} a The first value.\n * @param {*} b The second value.\n * @return {boolean} Whether a and b reference the same object.\n */\ngoog.structs.Map.defaultEquals = function(a, b) {\n  return a === b;\n};\n\n\n/**\n * @return {boolean} Whether the map is empty.\n */\ngoog.structs.Map.prototype.isEmpty = function() {\n  return this.count_ == 0;\n};\n\n\n/**\n * Removes all key-value pairs from the map.\n */\ngoog.structs.Map.prototype.clear = function() {\n  this.map_ = {};\n  this.keys_.length = 0;\n  this.count_ = 0;\n  this.version_ = 0;\n};\n\n\n/**\n * Removes a key-value pair based on the key. This is O(logN) amortized due to\n * updating the keys array whenever the count becomes half the size of the keys\n * in the keys array.\n * @param {*} key  The key to remove.\n * @return {boolean} Whether object was removed.\n */\ngoog.structs.Map.prototype.remove = function(key) {\n  if (goog.structs.Map.hasKey_(this.map_, key)) {\n    delete this.map_[key];\n    this.count_--;\n    this.version_++;\n\n    // clean up the keys array if the threshold is hit\n    if (this.keys_.length > 2 * this.count_) {\n      this.cleanupKeysArray_();\n    }\n\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * Cleans up the temp keys array by removing entries that are no longer in the\n * map.\n * @private\n */\ngoog.structs.Map.prototype.cleanupKeysArray_ = function() {\n  if (this.count_ != this.keys_.length) {\n    // First remove keys that are no longer in the map.\n    var srcIndex = 0;\n    var destIndex = 0;\n    while (srcIndex < this.keys_.length) {\n      var key = this.keys_[srcIndex];\n      if (goog.structs.Map.hasKey_(this.map_, key)) {\n        this.keys_[destIndex++] = key;\n      }\n      srcIndex++;\n    }\n    this.keys_.length = destIndex;\n  }\n\n  if (this.count_ != this.keys_.length) {\n    // If the count still isn't correct, that means we have duplicates. This can\n    // happen when the same key is added and removed multiple times. Now we have\n    // to allocate one extra Object to remove the duplicates. This could have\n    // been done in the first pass, but in the common case, we can avoid\n    // allocating an extra object by only doing this when necessary.\n    var seen = {};\n    var srcIndex = 0;\n    var destIndex = 0;\n    while (srcIndex < this.keys_.length) {\n      var key = this.keys_[srcIndex];\n      if (!(goog.structs.Map.hasKey_(seen, key))) {\n        this.keys_[destIndex++] = key;\n        seen[key] = 1;\n      }\n      srcIndex++;\n    }\n    this.keys_.length = destIndex;\n  }\n};\n\n\n/**\n * Returns the value for the given key.  If the key is not found and the default\n * value is not given this will return `undefined`.\n * @param {*} key The key to get the value for.\n * @param {DEFAULT=} opt_val The value to return if no item is found for the\n *     given key, defaults to undefined.\n * @return {V|DEFAULT} The value for the given key.\n * @template DEFAULT\n */\ngoog.structs.Map.prototype.get = function(key, opt_val) {\n  if (goog.structs.Map.hasKey_(this.map_, key)) {\n    return this.map_[key];\n  }\n  return opt_val;\n};\n\n\n/**\n * Adds a key-value pair to the map.\n * @param {*} key The key.\n * @param {V} value The value to add.\n * @return {*} Some subclasses return a value.\n */\ngoog.structs.Map.prototype.set = function(key, value) {\n  if (!(goog.structs.Map.hasKey_(this.map_, key))) {\n    this.count_++;\n    // TODO(johnlenz): This class lies, it claims to return an array of string\n    // keys, but instead returns the original object used.\n    this.keys_.push(/** @type {?} */ (key));\n    // Only change the version if we add a new key.\n    this.version_++;\n  }\n  this.map_[key] = value;\n};\n\n\n/**\n * Adds multiple key-value pairs from another goog.structs.Map or Object.\n * @param {?Object} map Object containing the data to add.\n */\ngoog.structs.Map.prototype.addAll = function(map) {\n  if (map instanceof goog.structs.Map) {\n    var keys = map.getKeys();\n    for (var i = 0; i < keys.length; i++) {\n      this.set(keys[i], map.get(keys[i]));\n    }\n  } else {\n    for (var key in map) {\n      this.set(key, map[key]);\n    }\n  }\n};\n\n\n/**\n * Calls the given function on each entry in the map.\n * @param {function(this:T, V, K, goog.structs.Map<K,V>)} f\n * @param {T=} opt_obj The value of \"this\" inside f.\n * @template T\n */\ngoog.structs.Map.prototype.forEach = function(f, opt_obj) {\n  var keys = this.getKeys();\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = this.get(key);\n    f.call(opt_obj, value, key, this);\n  }\n};\n\n\n/**\n * Clones a map and returns a new map.\n * @return {!goog.structs.Map} A new map with the same key-value pairs.\n */\ngoog.structs.Map.prototype.clone = function() {\n  return new goog.structs.Map(this);\n};\n\n\n/**\n * Returns a new map in which all the keys and values are interchanged\n * (keys become values and values become keys). If multiple keys map to the\n * same value, the chosen transposed value is implementation-dependent.\n *\n * It acts very similarly to {goog.object.transpose(Object)}.\n *\n * @return {!goog.structs.Map} The transposed map.\n */\ngoog.structs.Map.prototype.transpose = function() {\n  var transposed = new goog.structs.Map();\n  for (var i = 0; i < this.keys_.length; i++) {\n    var key = this.keys_[i];\n    var value = this.map_[key];\n    transposed.set(value, key);\n  }\n\n  return transposed;\n};\n\n\n/**\n * @return {!Object} Object representation of the map.\n */\ngoog.structs.Map.prototype.toObject = function() {\n  this.cleanupKeysArray_();\n  var obj = {};\n  for (var i = 0; i < this.keys_.length; i++) {\n    var key = this.keys_[i];\n    obj[key] = this.map_[key];\n  }\n  return obj;\n};\n\n\n/**\n * Returns an iterator that iterates over the keys in the map.  Removal of keys\n * while iterating might have undesired side effects.\n * @return {!goog.iter.Iterator} An iterator over the keys in the map.\n */\ngoog.structs.Map.prototype.getKeyIterator = function() {\n  return this.__iterator__(true);\n};\n\n\n/**\n * Returns an iterator that iterates over the values in the map.  Removal of\n * keys while iterating might have undesired side effects.\n * @return {!goog.iter.Iterator} An iterator over the values in the map.\n */\ngoog.structs.Map.prototype.getValueIterator = function() {\n  return this.__iterator__(false);\n};\n\n\n/**\n * Returns an iterator that iterates over the values or the keys in the map.\n * This throws an exception if the map was mutated since the iterator was\n * created.\n * @param {boolean=} opt_keys True to iterate over the keys. False to iterate\n *     over the values.  The default value is false.\n * @return {!goog.iter.Iterator} An iterator over the values or keys in the map.\n */\ngoog.structs.Map.prototype.__iterator__ = function(opt_keys) {\n  // Clean up keys to minimize the risk of iterating over dead keys.\n  this.cleanupKeysArray_();\n\n  var i = 0;\n  var version = this.version_;\n  var selfObj = this;\n\n  var newIter = new goog.iter.Iterator;\n  newIter.next = function() {\n    if (version != selfObj.version_) {\n      throw new Error('The map has changed since the iterator was created');\n    }\n    if (i >= selfObj.keys_.length) {\n      throw goog.iter.StopIteration;\n    }\n    var key = selfObj.keys_[i++];\n    return opt_keys ? key : selfObj.map_[key];\n  };\n  return newIter;\n};\n\n\n/**\n * Safe way to test for hasOwnProperty.  It even allows testing for\n * 'hasOwnProperty'.\n * @param {!Object} obj The object to test for presence of the given key.\n * @param {*} key The key to check for.\n * @return {boolean} Whether the object has the key.\n * @private\n */\ngoog.structs.Map.hasKey_ = function(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n};\n","var crypto = self.crypto || self.msCrypto\n\nvar url = '_~getRandomVcryp0123456789bfhijklqsuvwxzABCDEFGHIJKLMNOPQSTUWXYZ'\n\nmodule.exports = function (size) {\n  size = size || 21\n  var id = ''\n  var bytes = crypto.getRandomValues(new Uint8Array(size))\n  while (0 < size--) {\n    id += url[bytes[size] & 63]\n  }\n  return id\n}\n","goog.provide('annotorious.shape.geom.Point');\r\n\r\n/**\r\n * A point.\r\n * @param {number} x the x coordinate\r\n * @param {number} y the y coordinate\r\n * @constructor\r\n */\r\nannotorious.shape.geom.Point = function(x, y) {\r\n  this.x = x;\r\n  this.y = y;\r\n}\r\n\r\n","goog.provide('annotorious.shape.geom.Polygon');\r\n\r\ngoog.require('annotorious.shape.geom.Point');\r\n\r\n/**\r\n * A polygon.\r\n * @param {Array.<annotorious.shape.geom.Point>} points the points\r\n * @constructor\r\n */\r\nannotorious.shape.geom.Polygon = function(points) {\r\n  this.points = points;\r\n}\r\n\r\n\r\n/** Polygon-specific helper functions & geometry computation utilities **/\r\n\r\n\r\n/**\r\n * Computes the area of a polygon. Note that the area can be <0, depending on the\r\n * clockwise/counterclockwise orientation of the polygon vertices!\r\n * @param {Array.<annotorious.shape.geom.Point>} points the points\r\n * @return {number} the area\r\n */\r\nannotorious.shape.geom.Polygon.computeArea = function(points) {\r\n    var area = 0.0;\r\n\r\n    var j = points.length - 1;\r\n    for (var i=0; i<points.length; i++) {\r\n      area += (points[j].x + points[i].x) * (points[j].y -points[i].y); \r\n      j = i; \r\n    }\r\n\r\n    return area / 2;  \r\n}\r\n\r\n/**\r\n * Tests if a polygon is oriented clockwise or counterclockwise.\r\n * @param {Array.<annotorious.shape.geom.Point>} points the points\r\n * @return {boolean} true if the geometry is in clockwise orientation\r\n */\r\nannotorious.shape.geom.Polygon.isClockwise = function(points) {\r\n  return annotorious.shape.geom.Polygon.computeArea(points) < 0;\r\n}\r\n\r\n/**\r\n * Computes the centroid coordinate of a polygon.\r\n * @param {Array.<annotorious.shape.geom.Point>} points the points\r\n * @returns {annotorious.shape.geom.Point} the centroid X/Y coordinate\r\n */\r\nannotorious.shape.geom.Polygon.computeCentroid = function(points) {\r\n  var x = 0;\r\n  var y = 0;\r\n  var f;\r\n  var j = points.length - 1;\r\n\r\n  for (var i=0; i<points.length; i++) {\r\n    f = points[i].x * points[j].y - points[j].x * points[i].y;\r\n    x += (points[i].x + points[j].x) * f;\r\n    y += (points[i].y + points[j].y) * f;\r\n    j = i;\r\n  }\r\n\r\n  f = annotorious.shape.geom.Polygon.computeArea(points) * 6;\r\n  return new annotorious.shape.geom.Point(Math.abs(x/f), Math.abs(y/f)); \r\n}\r\n\r\n/**\r\n * A simple triangle expansion algorithm that shifts triangle vertices in/outwards by a specified\r\n * delta, along the axis centroid->vertex. Used internally as a subroutine for polygon expansion.\r\n * @param {Array.<annotorious.shape.geom.Point>} points the points\r\n * @return {Array.<annotorious.shape.geom.Point>} the expanded triangle\r\n * @private\r\n */\r\nannotorious.shape.geom.Polygon._expandTriangle = function(points, delta) {\r\n  function signum(number) {\r\n    return number > 0 ? 1 : number < 0 ? -1 : 0;\r\n  }\r\n\r\n  function shiftAlongAxis(px, centroid, delta) {\r\n    var axis = { x: (px.x - centroid.x) , y: (px.y - centroid.y) };\r\n    var sign_delta = signum(delta);\r\n    var sign_x = signum(axis.x) * sign_delta;\r\n    var sign_y = signum(axis.y) * sign_delta;\r\n  \r\n    var dy = Math.sqrt(Math.pow(delta, 2) / (1 + Math.pow((axis.x / axis.y), 2)));\r\n    var dx = (axis.x / axis.y) * dy;\r\n    return { x: px.x + Math.abs(dx) * sign_x, y: px.y + Math.abs(dy) * sign_y };\r\n  }\r\n  \r\n  var centroid = annotorious.shape.geom.Polygon.computeCentroid(points);\r\n  var expanded = [];\r\n    \r\n  for (var i=0; i<points.length; i++) {\r\n    var sign = (annotorious.shape.geom.Polygon.isClockwise(points)) ? -1 : 1;\r\n    expanded.push(shiftAlongAxis(points[i], centroid, sign * delta));\r\n  }\r\n    \r\n  return expanded;\r\n}\r\n\r\n/**\r\n * A simple polygon expansion algorithm that generates a series of triangles from \r\n * the polygon, and then subsequently applies the _expandTriangle method.\r\n * @param {Array.<annotorious.shape.geom.Point>} points the points\r\n * @param {number} delta the distance by which to expand\r\n * @return {Array.<annotorious.shape.geom.Point>} the expanded polygon\r\n */\r\nannotorious.shape.geom.Polygon.expandPolygon = function(points, delta) {\r\n  var sign = (annotorious.shape.geom.Polygon.isClockwise(points)) ? -1 : 1;\r\n  \r\n  if (points.length < 4)\r\n    return annotorious.shape.geom.Polygon._expandTriangle(points, sign * delta);\r\n  \r\n  var prev = points.length - 1;\r\n  var next = 1;\r\n  \r\n  var expanded = [];\r\n  for (var current = 0; current<points.length; current++) {\r\n    var expTriangle = annotorious.shape.geom.Polygon._expandTriangle([ points[prev], points[current], points[next] ], sign * delta);\r\n    expanded.push(expTriangle[1]);\r\n    prev = current;\r\n    next++;\r\n    if (next > points.length - 1)\r\n      next = 0;\r\n  }\r\n  \r\n  return expanded;\r\n}\r\n","goog.provide('annotorious.shape.geom.Rectangle');\r\n\r\n/**\r\n * A rectangle.\r\n * @param {number} x the anchor point x coordinate\r\n * @param {number} y the anchor point y coordinate\r\n * @param {number} width the rectangle width\r\n * @param {number} height the rectangle height\r\n * @constructor\r\n */\r\nannotorious.shape.geom.Rectangle = function(x, y, width, height) {\r\n  if (width > 0) {\r\n    this.x = x;\r\n    this.width = width;\r\n  } else {\r\n    this.x = x + width;\r\n    this.width = -width;\r\n  }\r\n\r\n  if (height > 0) {\r\n    this.y = y;\r\n    this.height = height;\r\n  } else {\r\n    this.y = y + height;\r\n    this.height = -height;\r\n  }\r\n}\r\n\r\n","const nanoid = require('nanoid/index.browser');\r\n\r\ngoog.provide('annotorious.shape');\r\n\r\ngoog.require('annotorious.shape.geom.Point');\r\ngoog.require('annotorious.shape.geom.Polygon');\r\ngoog.require('annotorious.shape.geom.Rectangle');\r\n\r\n/**\r\n * A shape. Consists of descriptive shape metadata, plus the actual shape geometry.\r\n * @param {annotorious.shape.ShapeType} type the shape type\r\n * @param {annotorious.shape.geom.Point | annotorious.shape.geom.Rectangle | annotorious.shape.geom.Polygon} geometry the geometry\r\n * @param {annotorious.shape.Units=} units geometry measurement units\r\n * @param {Object} drawing style of the shape (optional)\r\n * @constructor\r\n */\r\nannotorious.shape.Shape = function(type, geometry, units, style) {\r\n  this.type = type\r\n  this.geometry = geometry;\r\n  if (units)\r\n    this.units = units;\r\n  if (style)\r\n    this.style = style;\r\n  else\r\n    this.style = {};\r\n}\r\n\r\n/**\r\n * Possible shape types\r\n * @enum {string}\r\n */\r\nannotorious.shape.ShapeType = {\r\n  POINT: 'point',\r\n  RECTANGLE: 'rect',\r\n  POLYGON: 'polygon'\r\n}\r\n\r\n/**\r\n * Possible unit types\r\n * @enum {string}\r\n */\r\nannotorious.shape.Units = {\r\n  PIXEL: 'pixel',\r\n  FRACTION: 'fraction'\r\n}\r\n\r\n\r\n/** Helper functions & geometry computation utilities **/\r\n\r\n\r\n/**\r\n * Checks whether a given shape intersects a point.\r\n * @param {annotorious.shape.Shape} shape the shape\r\n * @param {number} px the X coordinate\r\n * @param {number} py the Y coordinate\r\n * @return {boolean} true if the point intersects the shape\r\n */\r\nannotorious.shape.intersects = function(shape, px, py) {\r\n  if (shape.type == annotorious.shape.ShapeType.RECTANGLE) {\r\n    if (px < shape.geometry.x)\r\n      return false;\r\n\r\n    if (py < shape.geometry.y)\r\n      return false;\r\n\r\n    if (px > shape.geometry.x + shape.geometry.width)\r\n      return false;\r\n\r\n    if (py > shape.geometry.y + shape.geometry.height)\r\n      return false;\r\n    \r\n    return true;\r\n  } else if (shape.type == annotorious.shape.ShapeType.POLYGON) {\r\n    var points = shape.geometry.points;\r\n    var inside = false;\r\n\r\n    var j = points.length - 1;\r\n    for (var i=0; i<points.length; i++) {\r\n      if ((points[i].y > py) != (points[j].y > py) && \r\n          (px < (points[j].x - points[i].x) * (py - points[i].y) / (points[j].y-points[i].y) + points[i].x)) {\r\n        inside = !inside;\r\n      }\r\n      j = i;\r\n    }\r\n\r\n    return inside;\r\n  }\r\n    \r\n  return false;\r\n}\r\n\r\n/**\r\n * Returns the size of a shape.\r\n * @param {annotorious.shape.Shape} shape the shape\r\n * @return {number} the size\r\n */\r\nannotorious.shape.getSize = function(shape) {\r\n  if (shape.type == annotorious.shape.ShapeType.RECTANGLE) {\r\n    return shape.geometry.width * shape.geometry.height;\r\n  } else if (shape.type == annotorious.shape.ShapeType.POLYGON) {\r\n    return Math.abs(annotorious.shape.geom.Polygon.computeArea(shape.geometry.points));\r\n  }\r\n  return 0;\r\n}\r\n\r\n/**\r\n * Returns the bounding rectangle of a shape.\r\n * @param {annotorious.shape.Shape} shape the shape\r\n * @return {annotorious.shape.Shape | undefined} the bounding rectangle\r\n */\r\nannotorious.shape.getBoundingRect = function(shape) {\r\n  if (shape.type == annotorious.shape.ShapeType.RECTANGLE) {\r\n    return shape;\r\n  } else if (shape.type == annotorious.shape.ShapeType.POLYGON) {\r\n    var points = shape.geometry.points;\r\n\r\n    var left = points[0].x;\r\n    var right = points[0].x;\r\n    var top = points[0].y;\r\n    var bottom = points[0].y;\r\n\r\n    for (var i=1; i<points.length; i++) {\r\n      if (points[i].x > right)\r\n        right = points[i].x;\r\n\r\n      if (points[i].x < left)\r\n        left = points[i].x;\r\n\r\n      if (points[i].y > bottom)\r\n        bottom = points[i].y;\r\n\r\n      if (points[i].y < top)\r\n        top = points[i].y;\r\n    }\r\n    \r\n    return new annotorious.shape.Shape(annotorious.shape.ShapeType.RECTANGLE, \r\n      new annotorious.shape.geom.Rectangle(left, top, right - left, bottom - top),\r\n      false, shape.style\r\n    );\r\n  }\r\n  \r\n  return undefined;\r\n}\r\n\r\n/**\r\n * Computes the centroid coordinate for the specified shape.\r\n * @param {annotorious.shape.Shape} shape the shape\r\n * @returns {annotorious.shape.geom.Point | undefined} the centroid X/Y coordinate\r\n */\r\nannotorious.shape.getCentroid = function(shape) {\r\n  if (shape.type == annotorious.shape.ShapeType.RECTANGLE) {\r\n    var rect = shape.geometry;\r\n    return new annotorious.shape.geom.Point(rect.x + rect.width / 2, rect.y + rect.height / 2);\r\n  } else if (shape.type == annotorious.shape.ShapeType.POLYGON) {\r\n    return annotorious.shape.geom.Polygon.computeCentroid( shape.geometry.points);\r\n  }\r\n  \r\n  return undefined;\r\n}\r\n\r\n/**\r\n * Expands a shape by a specified delta.\r\n * @param {annotorious.shape.Shape} shape the shape\r\n * @param {number} delta the delta \r\n */\r\nannotorious.shape.expand = function(shape, delta) {\r\n  // TODO for the sake of completeness: implement for RECTANGLE\r\n  return new annotorious.shape.Shape(annotorious.shape.ShapeType.POLYGON,\r\n    new annotorious.shape.geom.Polygon(annotorious.shape.geom.Polygon.expandPolygon(shape.geometry.points, delta)),\r\n    false, shape.style);\r\n }\r\n\r\n/**\r\n * Transforms a shape from a source coordinate system to a destination coordinate\r\n * system. The transformation is calculated using the transformationFn parameter, \r\n * which must be a function(xy) that transforms a single XY coordinate.\r\n * @param {annotorious.shape.Shape} shape the shape to transform\r\n * @param {Function} transformationFn the transformation function\r\n * @return {annotorious.shape.Shape | undefined} the transformed shape\r\n */\r\nannotorious.shape.transform = function(shape, transformationFn) {\r\n  if (shape.type == annotorious.shape.ShapeType.RECTANGLE) {\r\n    var geom = shape.geometry;\r\n    var transformed = transformationFn(geom);\r\n    return new annotorious.shape.Shape(annotorious.shape.ShapeType.RECTANGLE, transformed, false, shape.style);\r\n  } else if (shape.type == annotorious.shape.ShapeType.POLYGON) {\r\n    var transformedPoints = [];\r\n    goog.array.forEach(shape.geometry.points, function(pt) {\r\n      transformedPoints.push(transformationFn(pt));\r\n    });\r\n    return new annotorious.shape.Shape(annotorious.shape.ShapeType.POLYGON,\r\n      new annotorious.shape.geom.Polygon(transformedPoints),\r\n      false, shape.style\r\n    );\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\n/**\r\n * Computes a 'hashCode' for the specified shape. Not the nicest (and most performat?)\r\n * way to do it. But we need a useful .toString kind-of fuctionality to use for hashtable\r\n * keys in the viewer!\r\n * @param {annotorious.shape.Shape} shape the shape\r\n * @return {string} a 'hashcode' for the shape\r\n */\r\nannotorious.shape.hashCode = function(shape) {\r\n  if (!shape.uuid){\r\n    shape.uuid = nanoid();\r\n  }\r\n  return shape.uuid;\r\n}\r\n","goog.provide('annotorious.Annotation');\r\n\r\ngoog.require('annotorious.shape');\r\n\r\n/**\r\n * A 'domain class' implementation of the external annotation interface.\r\n * @param {string} src the source URL of the annotated object\r\n * @param {string} text the annotation text\r\n * @param {annotorious.shape.Shape} shape the annotated fragment shape\r\n * @constructor\r\n */\r\nannotorious.Annotation = function(src, text, shape) {\r\n  this.src = src;\r\n  this.text = text;\r\n  this.shapes = [ shape ];\r\n  this['context'] = document.URL; // Prevents dead code removal\r\n}\r\n","goog.provide('annotorious.mediatypes.Module');\r\n\r\ngoog.require('goog.array');\r\ngoog.require('goog.dom');\r\ngoog.require('goog.events');\r\ngoog.require('goog.structs.Map');\r\n\r\ngoog.require('annotorious.Annotation');\r\n\r\n/**\r\n * A base class for Annotorious Module implementations.\r\n * @constructor\r\n */\r\nannotorious.mediatypes.Module = function() { }\r\n\r\n/**\r\n * Initializes the module instance's fields. Note that subclasses to Module\r\n * MUST ensure by themselves that this method is called on initialization (i.e.\r\n * in their constructor)!\r\n *\r\n * opt_preload_fn is an optional parameter: if provided, it must be a function\r\n * that returns a list of annotatable items. These will be put into the lazy\r\n * load queue and made annotatable when they appear on screen.\r\n *\r\n * @param {Function=} opt_preload_fn a function providing a list of pre-loadable items\r\n * @protected\r\n */\r\nannotorious.mediatypes.Module.prototype._initFields = function(opt_preload_fn) {\r\n  /** @private **/\r\n  this._annotators = new goog.structs.Map();\r\n  \r\n  /** @private **/\r\n  this._eventHandlers = [];\r\n\r\n  /** @private **/\r\n  this._plugins = []; \r\n\r\n  /** @private **/\r\n  this._itemsToLoad = [];\r\n  \r\n  /** @private **/\r\n  this._bufferedForAdding = [];\r\n  \r\n  /** @private **/\r\n  this._bufferedForRemoval = [];\r\n\r\n  /** @private **/\r\n  this._cachedGlobalSettings = { hide_selection_widget: false, hide_annotations: false };\r\n  \r\n  /** @private **/\r\n  this._cachedItemSettings = new goog.structs.Map();\r\n\r\n  /** @private **/\r\n  this._cachedProperties = undefined;\r\n\r\n  /** @private **/\r\n  this._preLoad = opt_preload_fn;\r\n}\r\n\r\n/**\r\n * Returns the settings for the specified annotator. If there are no cached settings\r\n * object yet, new settings will be created (initialized with defaults).\r\n * @param {string} item_url the URL of the item controlled by the annotator\r\n * @private\r\n * @suppress {missingProperties}\r\n */\r\nannotorious.mediatypes.Module.prototype._getSettings = function(item_url) {\r\n  var settings = this._cachedItemSettings.get(item_url);\r\n  if (!settings) {\r\n    settings = { hide_selection_widget: false, hide_annotations: false };\r\n    this._cachedItemSettings.set(item_url, settings);\r\n  }\r\n  return settings;\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nannotorious.mediatypes.Module.prototype._initAnnotator = function(item) {\r\n  var self = this,\r\n      item_src = this.getItemURL(item);\r\n\r\n  // Guard condition: don't make items annotatable if they already are  \r\n  if (this._annotators.get(item_src))\r\n    return;\r\n\r\n  var annotator = this.newAnnotator(item);\r\n\r\n  // Keep track of changes\r\n  var addedAnnotations = [];\r\n  var removedAnnotations = [];\r\n\r\n  // Attach handlers that are already registered\r\n  goog.array.forEach(this._eventHandlers, function(eventHandler) {\r\n    annotator.addHandler(eventHandler.type, eventHandler.handler);\r\n  });\r\n\r\n  // Callback to registered plugins\r\n  goog.array.forEach(this._plugins, function(plugin) {\r\n    self._initPlugin(plugin, annotator);\r\n  });\r\n            \r\n  // Cross-check with annotation add/remove buffers\r\n  goog.array.forEach(this._bufferedForAdding, function(annotation) {\r\n    if (annotation.src == item_src) {\r\n      annotator.addAnnotation(annotation);\r\n      addedAnnotations.push(annotation);\r\n    }\r\n  });\r\n      \r\n  goog.array.forEach(this._bufferedForRemoval, function(annotation) {\r\n    if (annotation.src == item_src) {\r\n      annotator.removeAnnotation(annotation);\r\n      removedAnnotations.push(annotation);\r\n    }\r\n  });\r\n\r\n  // Apply changes\r\n  goog.array.forEach(addedAnnotations, function(annotation) {\r\n    goog.array.remove(self._bufferedForAdding, annotation);\r\n  });\r\n  \r\n  goog.array.forEach(removedAnnotations, function(annotation) {\r\n    goog.array.remove(self._bufferedForRemoval, annotation);\r\n  });\r\n\r\n  // Apply cached settings & properties\r\n  var settings = this._cachedItemSettings.get(item_src);\r\n  if (settings) {\r\n    if (settings.hide_selection_widget)\r\n      annotator.hideSelectionWidget();\r\n\r\n    if (settings.hide_annotations)\r\n      annotator.hideAnnotations();\r\n\r\n    this._cachedItemSettings.remove(item_src);\r\n  } else {\r\n    if (this._cachedGlobalSettings.hide_selection_widget)\r\n      annotator.hideSelectionWidget();\r\n\r\n    if (this._cachedGlobalSettings.hide_annotations)\r\n      annotator.hideAnnotations();\r\n  }\r\n  if (this._cachedProperties)\r\n    annotator.setProperties(this._cachedProperties);\r\n  \r\n  // Update _annotators and _itemsToLoad lists\r\n  this._annotators.set(item_src, annotator);\r\n  goog.array.remove(this._itemsToLoad, item);\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nannotorious.mediatypes.Module.prototype._initPlugin = function(plugin, annotator) {\r\n  if (plugin.onInitAnnotator)\r\n    plugin.onInitAnnotator(annotator);\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nannotorious.mediatypes.Module.prototype._lazyLoad = function() {\r\n  var item, i;\r\n  for (i=this._itemsToLoad.length; i>0; i--) {\r\n    item = this._itemsToLoad[i - 1];\r\n    if (annotorious.dom.isInViewport(item))\r\n      this._initAnnotator(item);\r\n  }\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nannotorious.mediatypes.Module.prototype._setAnnotationVisibility = function(opt_item_url, visibility) {\r\n  if (opt_item_url) {\r\n    var annotator = this._annotators.get(opt_item_url);\r\n    if (annotator) {\r\n      // Item URL is provided, and item is loaded - set directly\r\n      if (visibility)\r\n        annotator.showAnnotations();\r\n      else \r\n        annotator.hideAnnotations();\r\n    } else {\r\n      // Item URL is provided, but item not yet loaded - cache for later\r\n      this._getSettings(opt_item_url).hide_annotations = visibility;\r\n    }\r\n  } else {\r\n    // Item URL is not provided - update all annotators...\r\n    goog.array.forEach(this._annotators.getValues(), function(annotator) {\r\n      if (visibility)\r\n        annotator.showAnnotations();\r\n      else\r\n        annotator.hideAnnotations();\r\n    });\r\n\r\n    // ...cache global settings...\r\n    this._cachedGlobalSettings.hide_annotations = !visibility;\r\n\r\n    // ...and update all cached item settings\r\n    goog.array.forEach(this._cachedItemSettings.getValues(), function(settings) {\r\n      settings.hide_annotations = !visibility;\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nannotorious.mediatypes.Module.prototype._setSelectionWidgetVisibility = function(opt_item_url, visibility) {\r\n  if (opt_item_url) {\r\n    var annotator = this._annotators.get(opt_item_url);\r\n    if (annotator) {\r\n      // Item URL is provided, and item is loaded - set directly\r\n      if (visibility)\r\n        annotator.showSelectionWidget();\r\n      else \r\n        annotator.hideSelectionWidget();\r\n    } else {\r\n      // Item URL is provided, but item not yet loaded - cache for later\r\n      this._getSettings(opt_item_url).hide_selection_widget = visibility;\r\n    }\r\n  } else {\r\n    // Item URL is not provided - update all annotators...\r\n    goog.array.forEach(this._annotators.getValues(), function(annotator) {\r\n      if (visibility)\r\n        annotator.showSelectionWidget();\r\n      else \r\n        annotator.hideSelectionWidget();\r\n    });\r\n\r\n    // ...cache global settings...\r\n    this._cachedGlobalSettings.hide_selection_widget = !visibility;\r\n\r\n    // ...and update all cached item settings\r\n    goog.array.forEach(this._cachedItemSettings.getValues(), function(settings) {\r\n      settings.hide_selection_widget = !visibility;\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * 'Manually' actives the selector, bypassing the selection widget. The function can take\r\n * a callback function as parameter, which will be called when the selector is deactivated \r\n * again.\r\n * @param {string | Function} opt_item_url_or_callback the URL of the item, or a callback function\r\n * @param {Function} opt_callback a callback function (if the first parameter was a URL)\r\n */\r\nannotorious.mediatypes.Module.prototype.activateSelector = function(opt_item_url_or_callback, opt_callback) {\r\n  var item_url = undefined,\r\n      callback = undefined;\r\n\r\n  if (goog.isString(opt_item_url_or_callback)) {\r\n    item_url = opt_item_url_or_callback;\r\n    callback = opt_callback;\r\n  } else if (goog.isFunction(opt_item_url_or_callback)) {\r\n    callback = opt_item_url_or_callback;\r\n  }\r\n\r\n  if (item_url) {\r\n    var annotator = this._annotators.get(item_url);\r\n    if (annotator)\r\n      annotator.activateSelector(callback);\r\n  } else {\r\n    goog.array.forEach(this._annotators.getValues(), function(annotator) {\r\n      annotator.activateSelector(callback);\r\n    });\r\n  }\r\n}\r\n\r\nannotorious.mediatypes.Module.prototype.stopSelection = function(opt_item_url) {\r\n  if (opt_item_url) {\r\n    var annotator = this._annotators.get(opt_item_url);\r\n    if (annotator)\r\n      annotator.stopSelection();\r\n  } else {\r\n    goog.array.forEach(this._annotators.getValues(), function(annotator) {\r\n      annotator.stopSelection();\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Adds an annotation to an item managed by this module.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n * @param {annotorious.Annotation} opt_replace optionally, an existing annotation to replace\r\n */\r\nannotorious.mediatypes.Module.prototype.addAnnotation = function(annotation, opt_replace) {\r\n  if (this.annotatesItem(annotation.src)) {\r\n    var annotator = this._annotators.get(annotation.src);\r\n    if (annotator) {\r\n      annotator.addAnnotation(annotation, opt_replace)\r\n    } else {\r\n      this._bufferedForAdding.push(annotation);\r\n      if (opt_replace)\r\n        goog.array.remove(this._bufferedForAdding, opt_replace);\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * Adds a lifecycle event handler to this module.\r\n * @param {annotorious.events.EventType} type the event type\r\n * @param {Function} handler the handler function\r\n */\r\nannotorious.mediatypes.Module.prototype.addHandler = function(type, handler) {\r\n  goog.array.forEach(this._annotators.getValues(), function(annotator, idx, array) {\r\n    annotator.addHandler(type, handler);\r\n  }); \r\n  this._eventHandlers.push({ type: type, handler: handler });\r\n}\r\n\r\n/**\r\n * Removes a/all lifecycle event handler/s to this module.\r\n * @param {annotorious.events.EventType} type the event type\r\n * @param {Function} handler the handler function (optional)\r\n */\r\nannotorious.mediatypes.Module.prototype.removeHandler = function(type, handler) {\r\n  goog.array.forEach(this._annotators.getValues(), function(annotator, idx, array) {\r\n    annotator.removeHandler(type, handler);\r\n  });\r\n    goog.array.forEach(this._eventHandlers, function(elem, index, array) {\r\n        if(elem.type === type) {\r\n            if(!handler || elem.handler === handler) {\r\n                goog.array.removeAt(array, index);\r\n            }         \r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Adds a plugin to this module.\r\n * @param {Plugin} plugin the plugin\r\n */\r\nannotorious.mediatypes.Module.prototype.addPlugin = function(plugin) {\r\n  this._plugins.push(plugin);\r\n  var self = this;\r\n  goog.array.forEach(this._annotators.getValues(), function(annotator) {\r\n    self._initPlugin(plugin, annotator);\r\n  });\r\n}\r\n\r\n/**\r\n * Tests if this module is in charge of managing the item with the specified URL.\r\n * @param {string} item_url the URL of the item\r\n * @return {boolean} true if this module is in charge of the media\r\n */ \r\nannotorious.mediatypes.Module.prototype.annotatesItem = function(item_url) {\r\n  if (this._annotators.containsKey(item_url)) {\r\n    return true;\r\n  } else {\r\n    var self = this;\r\n    var item = goog.array.find(this._itemsToLoad, function(item) {\r\n      return self.getItemURL(item) == item_url;\r\n    });\r\n    \r\n    return goog.isDefAndNotNull(item);\r\n  }\r\n}\r\n\r\n/**\r\n * Destroys the annotator on the specified item, or all annotators managed by this module.\r\n * @param {string=} opt_item_url the URL of the item on which to destroy the annotator.\r\n */\r\nannotorious.mediatypes.Module.prototype.destroy = function(opt_item_url) {\r\n  if (opt_item_url) {\r\n    var annotator = this._annotators.get(opt_item_url);\r\n    if (annotator) {\r\n      annotator.destroy();\r\n      this._annotators.remove(opt_item_url);\r\n    }\r\n  } else {\r\n    goog.array.forEach(this._annotators.getValues(), function(annotator) {\r\n      annotator.destroy();\r\n    }); \r\n    this._annotators.clear();\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the name of the selector that is currently activated on the item\r\n * with the specified URL (if managed by this module).\r\n * @param {string} item_url the URL of the item to query for the active selector\r\n * @return {string | undefined} the name of the active selector (or undefined)\r\n */\r\nannotorious.mediatypes.Module.prototype.getActiveSelector = function(item_url) {\r\n  if (this.annotatesItem(item_url)) {\r\n    var annotator = this._annotators.get(item_url);\r\n    if (annotator)\r\n      return annotator.getActiveSelector().getName();\r\n  }\r\n  return undefined;\r\n}\r\n\r\n/**\r\n * Returns all annotations on the item with the specified URL (if managed by this\r\n * module) or all annotations from this module in case no URL is specified.\r\n * @param {string | undefined} opt_item_url an item URL (optional)\r\n * @return {Array.<annotorious.Annotation>} the annotations\r\n */\r\nannotorious.mediatypes.Module.prototype.getAnnotations = function(opt_item_url) {\r\n  if (opt_item_url) {\r\n    var annotator = this._annotators.get(opt_item_url);\r\n    if (annotator) {\r\n      return annotator.getAnnotations();\r\n    } else {\r\n      return goog.array.filter(this._bufferedForAdding, function(annotation) {\r\n        return annotation.src == opt_item_url;\r\n      });\r\n    }\r\n  } else {\r\n    var annotations = [];\r\n    goog.array.forEach(this._annotators.getValues(), function(annotator) {\r\n      goog.array.extend(annotations, annotator.getAnnotations());\r\n    });\r\n    goog.array.extend(annotations, this._bufferedForAdding);\r\n    return annotations;\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the list of available shape selectors for a particular item.\r\n * @param {string} item_url the URL of the item to query for available selectors\r\n * @returns {Array.<string> | undefined} the list of selector names\r\n */\r\nannotorious.mediatypes.Module.prototype.getAvailableSelectors = function(item_url) {\r\n  if (this.annotatesItem(item_url)) {\r\n    var annotator = this._annotators.get(item_url);\r\n    if (annotator) {\r\n      return goog.array.map(annotator.getAvailableSelectors(), function(selector) {\r\n        return selector.getName();\r\n      });\r\n    }\r\n  }\r\n  return undefined;\r\n}\r\n\r\n/**\r\n * Hides existing annotations on all, or a specific item.\r\n * @param {string} opt_item_url the URL of the item\r\n */\r\nannotorious.mediatypes.Module.prototype.hideAnnotations = function(opt_item_url) {\r\n  this._setAnnotationVisibility(opt_item_url, false);\r\n}\r\n\r\n/**\r\n * Hides the selection widget, thus preventing users from creating new annotations.\r\n * The selection widget can be hidden on a specific item or all.\r\n * @param {string} opt_item_url the URL of the item on which to hide the selection widget\r\n */\r\nannotorious.mediatypes.Module.prototype.hideSelectionWidget = function(opt_item_url) {\r\n  this._setSelectionWidgetVisibility(opt_item_url, false);\r\n}\r\n\r\n/**\r\n * Highlights the specified annotation.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n */\r\nannotorious.mediatypes.Module.prototype.highlightAnnotation = function(annotation) {\r\n  if (annotation) {\r\n    if (this.annotatesItem(annotation.src)) {\r\n      var annotator = this._annotators.get(annotation.src);\r\n      if (annotator)\r\n        annotator.highlightAnnotation(annotation);\r\n    }  \r\n  } else {\r\n    goog.array.forEach(this._annotators.getValues(), function(annotator) {\r\n      annotator.highlightAnnotation();\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Lifecycle method: called by Annotorious on module initialization.\r\n */\r\nannotorious.mediatypes.Module.prototype.init = function() {    \r\n  if (this._preLoad)\r\n    goog.array.extend(this._itemsToLoad, this._preLoad()); \r\n\r\n  this._lazyLoad();\r\n  \r\n  var self = this;\r\n  var key = goog.events.listen(window, goog.events.EventType.SCROLL, function() {\r\n    if (self._itemsToLoad.length > 0)\r\n      self._lazyLoad();\r\n    else\r\n      goog.events.unlistenByKey(key);\r\n  });\r\n}\r\n\r\n/**\r\n * Makes an item annotatable, if it is supported by this module.\r\n * @param {Object} item the annotatable item\r\n */\r\nannotorious.mediatypes.Module.prototype.makeAnnotatable = function(item) {\r\n  if (this.supports(item))\r\n    this._initAnnotator(item);\r\n}\r\n\r\n/**\r\n * Removes an annotation from the item with the specified URL.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n */\r\nannotorious.mediatypes.Module.prototype.removeAnnotation = function(annotation) {\r\n  if (this.annotatesItem(annotation.src)) {\r\n    var annotator = this._annotators.get(annotation.src);\r\n    if (annotator)\r\n      annotator.removeAnnotation(annotation);\r\n    else\r\n      this._bufferedForRemoval.push(annotation);\r\n  }\r\n}\r\n\r\n/**\r\n * Sets a specific selector on a particular item.\r\n * @param {string} item_url the URL of the item on which to set the selector\r\n * @param {string} selector the name of the selector to set on the item\r\n */\r\nannotorious.mediatypes.Module.prototype.setActiveSelector = function(item_url, selector) {\r\n  if (this.annotatesItem(item_url)) {\r\n    var annotator = this._annotators.get(item_url);\r\n    if (annotator)\r\n      annotator.setCurrentSelector(selector);\r\n  }\r\n}\r\n\r\n/**\r\n * Sets the properties on this module.\r\n * @param {Object} props the properties object\r\n */\r\nannotorious.mediatypes.Module.prototype.setProperties = function(props) {\r\n  // TODO these should merge with the existing props rather than replace them!\r\n  this._cachedProperties = props;\r\n  goog.array.forEach(this._annotators.getValues(), function(annotator) {\r\n    annotator.setProperties(props);\r\n  });\r\n}\r\n\r\n/**\r\n * Shows existing annotations on all, or a specific item.\r\n * @param {string} opt_item_url the URL of the item\r\n */\r\nannotorious.mediatypes.Module.prototype.showAnnotations = function(opt_item_url) {\r\n  this._setAnnotationVisibility(opt_item_url, true);\r\n}\r\n\r\n/**\r\n * Shows the selection widget, thus enabling users to create new annotations.\r\n * The selection widget can be made visible on a specific item or all.\r\n * @param {string} opt_item_url the URL of the item on which to show the selection widget \r\n */\r\nannotorious.mediatypes.Module.prototype.showSelectionWidget = function(opt_item_url) {\r\n  this._setSelectionWidgetVisibility(opt_item_url, true);\r\n}\r\n\r\n/** Methods that must be implemented by subclasses of annotorious.modules.Module **/\r\n\r\n/**\r\n * Returns the identifying URL of the specified item.\r\n * @param {Element} item the item.\r\n * @return {string} the URL\r\n */\r\nannotorious.mediatypes.Module.prototype.getItemURL = goog.abstractMethod;\r\n\r\n/**\r\n * Returns a new annotator for the specified item.\r\n * @param {Element} item the item\r\n * @return {Object} an annotator for this item\r\n */\r\nannotorious.mediatypes.Module.prototype.newAnnotator = goog.abstractMethod;\r\n\r\n/**\r\n * Tests if this module supports the specified item's media type.\r\n * @param {Object} item the item\r\n * @return {boolean} true if this module supports the item\r\n */\r\nannotorious.mediatypes.Module.prototype.supports = goog.abstractMethod;\r\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities for adding, removing and setting classes.  Prefer\n * {@link goog.dom.classlist} over these utilities since goog.dom.classlist\n * conforms closer to the semantics of Element.classList, is faster (uses\n * native methods rather than parsing strings on every call) and compiles\n * to smaller code as a result.\n *\n * Note: these utilities are meant to operate on HTMLElements and\n * will not work on elements with differing interfaces (such as SVGElements).\n *\n * @author arv@google.com (Erik Arvidsson)\n */\n\n\ngoog.provide('goog.dom.classes');\n\ngoog.require('goog.array');\n\n\n/**\n * Sets the entire class name of an element.\n * @param {Node} element DOM node to set class of.\n * @param {string} className Class name(s) to apply to element.\n * @deprecated Use goog.dom.classlist.set instead.\n */\ngoog.dom.classes.set = function(element, className) {\n  /** @type {!HTMLElement} */ (element).className = className;\n};\n\n\n/**\n * Gets an array of class names on an element\n * @param {Node} element DOM node to get class of.\n * @return {!Array<?>} Class names on `element`. Some browsers add extra\n *     properties to the array. Do not depend on any of these!\n * @deprecated Use goog.dom.classlist.get instead.\n */\ngoog.dom.classes.get = function(element) {\n  var className = /** @type {!Element} */ (element).className;\n  // Some types of elements don't have a className in IE (e.g. iframes).\n  // Furthermore, in Firefox, className is not a string when the element is\n  // an SVG element.\n  return goog.isString(className) && className.match(/\\S+/g) || [];\n};\n\n\n/**\n * Adds a class or classes to an element. Does not add multiples of class names.\n * @param {Node} element DOM node to add class to.\n * @param {...string} var_args Class names to add.\n * @return {boolean} Whether class was added (or all classes were added).\n * @deprecated Use goog.dom.classlist.add or goog.dom.classlist.addAll instead.\n */\ngoog.dom.classes.add = function(element, var_args) {\n  var classes = goog.dom.classes.get(element);\n  var args = goog.array.slice(arguments, 1);\n  var expectedCount = classes.length + args.length;\n  goog.dom.classes.add_(classes, args);\n  goog.dom.classes.set(element, classes.join(' '));\n  return classes.length == expectedCount;\n};\n\n\n/**\n * Removes a class or classes from an element.\n * @param {Node} element DOM node to remove class from.\n * @param {...string} var_args Class name(s) to remove.\n * @return {boolean} Whether all classes in `var_args` were found and\n *     removed.\n * @deprecated Use goog.dom.classlist.remove or goog.dom.classlist.removeAll\n *     instead.\n */\ngoog.dom.classes.remove = function(element, var_args) {\n  var classes = goog.dom.classes.get(element);\n  var args = goog.array.slice(arguments, 1);\n  var newClasses = goog.dom.classes.getDifference_(classes, args);\n  goog.dom.classes.set(element, newClasses.join(' '));\n  return newClasses.length == classes.length - args.length;\n};\n\n\n/**\n * Helper method for {@link goog.dom.classes.add} and\n * {@link goog.dom.classes.addRemove}. Adds one or more classes to the supplied\n * classes array.\n * @param {Array<string>} classes All class names for the element, will be\n *     updated to have the classes supplied in `args` added.\n * @param {Array<string>} args Class names to add.\n * @private\n */\ngoog.dom.classes.add_ = function(classes, args) {\n  for (var i = 0; i < args.length; i++) {\n    if (!goog.array.contains(classes, args[i])) {\n      classes.push(args[i]);\n    }\n  }\n};\n\n\n/**\n * Helper method for {@link goog.dom.classes.remove} and\n * {@link goog.dom.classes.addRemove}. Calculates the difference of two arrays.\n * @param {!Array<string>} arr1 First array.\n * @param {!Array<string>} arr2 Second array.\n * @return {!Array<string>} The first array without the elements of the second\n *     array.\n * @private\n */\ngoog.dom.classes.getDifference_ = function(arr1, arr2) {\n  return goog.array.filter(\n      arr1, function(item) { return !goog.array.contains(arr2, item); });\n};\n\n\n/**\n * Switches a class on an element from one to another without disturbing other\n * classes. If the fromClass isn't removed, the toClass won't be added.\n * @param {Node} element DOM node to swap classes on.\n * @param {string} fromClass Class to remove.\n * @param {string} toClass Class to add.\n * @return {boolean} Whether classes were switched.\n * @deprecated Use goog.dom.classlist.swap instead.\n */\ngoog.dom.classes.swap = function(element, fromClass, toClass) {\n  var classes = goog.dom.classes.get(element);\n\n  var removed = false;\n  for (var i = 0; i < classes.length; i++) {\n    if (classes[i] == fromClass) {\n      goog.array.splice(classes, i--, 1);\n      removed = true;\n    }\n  }\n\n  if (removed) {\n    classes.push(toClass);\n    goog.dom.classes.set(element, classes.join(' '));\n  }\n\n  return removed;\n};\n\n\n/**\n * Adds zero or more classes to an element and removes zero or more as a single\n * operation. Unlike calling {@link goog.dom.classes.add} and\n * {@link goog.dom.classes.remove} separately, this is more efficient as it only\n * parses the class property once.\n *\n * If a class is in both the remove and add lists, it will be added. Thus,\n * you can use this instead of {@link goog.dom.classes.swap} when you have\n * more than two class names that you want to swap.\n *\n * @param {Node} element DOM node to swap classes on.\n * @param {?(string|Array<string>)} classesToRemove Class or classes to\n *     remove, if null no classes are removed.\n * @param {?(string|Array<string>)} classesToAdd Class or classes to add, if\n *     null no classes are added.\n * @deprecated Use goog.dom.classlist.addRemove instead.\n */\ngoog.dom.classes.addRemove = function(element, classesToRemove, classesToAdd) {\n  var classes = goog.dom.classes.get(element);\n  if (goog.isString(classesToRemove)) {\n    goog.array.remove(classes, classesToRemove);\n  } else if (goog.isArray(classesToRemove)) {\n    classes = goog.dom.classes.getDifference_(classes, classesToRemove);\n  }\n\n  if (goog.isString(classesToAdd) &&\n      !goog.array.contains(classes, classesToAdd)) {\n    classes.push(classesToAdd);\n  } else if (goog.isArray(classesToAdd)) {\n    goog.dom.classes.add_(classes, classesToAdd);\n  }\n\n  goog.dom.classes.set(element, classes.join(' '));\n};\n\n\n/**\n * Returns true if an element has a class.\n * @param {Node} element DOM node to test.\n * @param {string} className Class name to test for.\n * @return {boolean} Whether element has the class.\n * @deprecated Use goog.dom.classlist.contains instead.\n */\ngoog.dom.classes.has = function(element, className) {\n  return goog.array.contains(goog.dom.classes.get(element), className);\n};\n\n\n/**\n * Adds or removes a class depending on the enabled argument.\n * @param {Node} element DOM node to add or remove the class on.\n * @param {string} className Class name to add or remove.\n * @param {boolean} enabled Whether to add or remove the class (true adds,\n *     false removes).\n * @deprecated Use goog.dom.classlist.enable or goog.dom.classlist.enableAll\n *     instead.\n */\ngoog.dom.classes.enable = function(element, className, enabled) {\n  if (enabled) {\n    goog.dom.classes.add(element, className);\n  } else {\n    goog.dom.classes.remove(element, className);\n  }\n};\n\n\n/**\n * Removes a class if an element has it, and adds it the element doesn't have\n * it.  Won't affect other classes on the node.\n * @param {Node} element DOM node to toggle class on.\n * @param {string} className Class to toggle.\n * @return {boolean} True if class was added, false if it was removed\n *     (in other words, whether element has the class after this function has\n *     been called).\n * @deprecated Use goog.dom.classlist.toggle instead.\n */\ngoog.dom.classes.toggle = function(element, className) {\n  var add = !goog.dom.classes.has(element, className);\n  goog.dom.classes.enable(element, className, add);\n  return add;\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Transitional utilities to unsafely trust random strings as\n * goog.html types. Intended for temporary use when upgrading a library that\n * used to accept plain strings to use safe types, but where it's not\n * practical to transitively update callers.\n *\n * IMPORTANT: No new code should use the conversion functions in this file,\n * they are intended for refactoring old code to use goog.html types. New code\n * should construct goog.html types via their APIs, template systems or\n * sanitizers. If that\u2019s not possible it should use\n * goog.html.uncheckedconversions and undergo security review.\n\n *\n * The semantics of the conversions in goog.html.legacyconversions are very\n * different from the ones provided by goog.html.uncheckedconversions. The\n * latter are for use in code where it has been established through manual\n * security review that the value produced by a piece of code will always\n * satisfy the SafeHtml contract (e.g., the output of a secure HTML sanitizer).\n * In uses of goog.html.legacyconversions, this guarantee is not given -- the\n * value in question originates in unreviewed legacy code and there is no\n * guarantee that it satisfies the SafeHtml contract.\n *\n * There are only three valid uses of legacyconversions:\n *\n * 1. Introducing a goog.html version of a function which currently consumes\n * string and passes that string to a DOM API which can execute script - and\n * hence cause XSS - like innerHTML. For example, Dialog might expose a\n * setContent method which takes a string and sets the innerHTML property of\n * an element with it. In this case a setSafeHtmlContent function could be\n * added, consuming goog.html.SafeHtml instead of string, and using\n * goog.dom.safe.setInnerHtml instead of directly setting innerHTML.\n * setContent could then internally use legacyconversions to create a SafeHtml\n * from string and pass the SafeHtml to setSafeHtmlContent. In this scenario\n * remember to document the use of legacyconversions in the modified setContent\n * and consider deprecating it as well.\n *\n * 2. Automated refactoring of application code which handles HTML as string\n * but needs to call a function which only takes goog.html types. For example,\n * in the Dialog scenario from (1) an alternative option would be to refactor\n * setContent to accept goog.html.SafeHtml instead of string and then refactor\n * all current callers to use legacyconversions to pass SafeHtml. This is\n * generally preferable to (1) because it keeps the library clean of\n * legacyconversions, and makes code sites in application code that are\n * potentially vulnerable to XSS more apparent.\n *\n * 3. Old code which needs to call APIs which consume goog.html types and for\n * which it is prohibitively expensive to refactor to use goog.html types.\n * Generally, this is code where safety from XSS is either hopeless or\n * unimportant.\n */\n\n\ngoog.provide('goog.html.legacyconversions');\n\ngoog.require('goog.html.SafeHtml');\ngoog.require('goog.html.SafeScript');\ngoog.require('goog.html.SafeStyle');\ngoog.require('goog.html.SafeStyleSheet');\ngoog.require('goog.html.SafeUrl');\ngoog.require('goog.html.TrustedResourceUrl');\n\n\n/**\n * Performs an \"unchecked conversion\" from string to SafeHtml for legacy API\n * purposes.\n *\n * Please read fileoverview documentation before using.\n *\n * @param {string} html A string to be converted to SafeHtml.\n * @return {!goog.html.SafeHtml} The value of html, wrapped in a SafeHtml\n *     object.\n */\ngoog.html.legacyconversions.safeHtmlFromString = function(html) {\n  goog.html.legacyconversions.reportCallback_();\n  return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(\n      html, null /* dir */);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" from string to SafeScript for legacy API\n * purposes.\n *\n * Please read fileoverview documentation before using.\n *\n * @param {string} script A string to be converted to SafeScript.\n * @return {!goog.html.SafeScript} The value of script, wrapped in a SafeScript\n *     object.\n */\ngoog.html.legacyconversions.safeScriptFromString = function(script) {\n  goog.html.legacyconversions.reportCallback_();\n  return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(\n      script);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" from string to SafeStyle for legacy API\n * purposes.\n *\n * Please read fileoverview documentation before using.\n *\n * @param {string} style A string to be converted to SafeStyle.\n * @return {!goog.html.SafeStyle} The value of style, wrapped in a SafeStyle\n *     object.\n */\ngoog.html.legacyconversions.safeStyleFromString = function(style) {\n  goog.html.legacyconversions.reportCallback_();\n  return goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(\n      style);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" from string to SafeStyleSheet for legacy\n * API purposes.\n *\n * Please read fileoverview documentation before using.\n *\n * @param {string} styleSheet A string to be converted to SafeStyleSheet.\n * @return {!goog.html.SafeStyleSheet} The value of style sheet, wrapped in\n *     a SafeStyleSheet object.\n */\ngoog.html.legacyconversions.safeStyleSheetFromString = function(styleSheet) {\n  goog.html.legacyconversions.reportCallback_();\n  return goog.html.SafeStyleSheet\n      .createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(styleSheet);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" from string to SafeUrl for legacy API\n * purposes.\n *\n * Please read fileoverview documentation before using.\n *\n * @param {string} url A string to be converted to SafeUrl.\n * @return {!goog.html.SafeUrl} The value of url, wrapped in a SafeUrl\n *     object.\n */\ngoog.html.legacyconversions.safeUrlFromString = function(url) {\n  goog.html.legacyconversions.reportCallback_();\n  return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(url);\n};\n\n\n/**\n * Performs an \"unchecked conversion\" from string to TrustedResourceUrl for\n * legacy API purposes.\n *\n * Please read fileoverview documentation before using.\n *\n * @param {string} url A string to be converted to TrustedResourceUrl.\n * @return {!goog.html.TrustedResourceUrl} The value of url, wrapped in a\n *     TrustedResourceUrl object.\n */\ngoog.html.legacyconversions.trustedResourceUrlFromString = function(url) {\n  goog.html.legacyconversions.reportCallback_();\n  return goog.html.TrustedResourceUrl\n      .createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(url);\n};\n\n/**\n * @private {function(): undefined}\n */\ngoog.html.legacyconversions.reportCallback_ = goog.nullFunction;\n\n\n/**\n * Sets a function that will be called every time a legacy conversion is\n * performed. The function is called with no parameters but it can use\n * goog.debug.getStacktrace to get a stacktrace.\n *\n * @param {function(): undefined} callback Error callback as defined above.\n */\ngoog.html.legacyconversions.setReportCallback = function(callback) {\n  goog.html.legacyconversions.reportCallback_ = callback;\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Generics method for collection-like classes and objects.\n *\n * @author arv@google.com (Erik Arvidsson)\n *\n * This file contains functions to work with collections. It supports using\n * Map, Set, Array and Object and other classes that implement collection-like\n * methods.\n * @suppress {strictMissingProperties}\n */\n\n\ngoog.provide('goog.structs');\n\ngoog.require('goog.array');\ngoog.require('goog.object');\n\n\n// We treat an object as a dictionary if it has getKeys or it is an object that\n// isn't arrayLike.\n\n\n/**\n * Returns the number of values in the collection-like object.\n * @param {Object} col The collection-like object.\n * @return {number} The number of values in the collection-like object.\n */\ngoog.structs.getCount = function(col) {\n  if (col.getCount && typeof col.getCount == 'function') {\n    return col.getCount();\n  }\n  if (goog.isArrayLike(col) || goog.isString(col)) {\n    return col.length;\n  }\n  return goog.object.getCount(col);\n};\n\n\n/**\n * Returns the values of the collection-like object.\n * @param {Object} col The collection-like object.\n * @return {!Array<?>} The values in the collection-like object.\n */\ngoog.structs.getValues = function(col) {\n  if (col.getValues && typeof col.getValues == 'function') {\n    return col.getValues();\n  }\n  if (goog.isString(col)) {\n    return col.split('');\n  }\n  if (goog.isArrayLike(col)) {\n    var rv = [];\n    var l = col.length;\n    for (var i = 0; i < l; i++) {\n      rv.push(col[i]);\n    }\n    return rv;\n  }\n  return goog.object.getValues(col);\n};\n\n\n/**\n * Returns the keys of the collection. Some collections have no notion of\n * keys/indexes and this function will return undefined in those cases.\n * @param {Object} col The collection-like object.\n * @return {!Array|undefined} The keys in the collection.\n */\ngoog.structs.getKeys = function(col) {\n  if (col.getKeys && typeof col.getKeys == 'function') {\n    return col.getKeys();\n  }\n  // if we have getValues but no getKeys we know this is a key-less collection\n  if (col.getValues && typeof col.getValues == 'function') {\n    return undefined;\n  }\n  if (goog.isArrayLike(col) || goog.isString(col)) {\n    var rv = [];\n    var l = col.length;\n    for (var i = 0; i < l; i++) {\n      rv.push(i);\n    }\n    return rv;\n  }\n\n  return goog.object.getKeys(col);\n};\n\n\n/**\n * Whether the collection contains the given value. This is O(n) and uses\n * equals (==) to test the existence.\n * @param {Object} col The collection-like object.\n * @param {*} val The value to check for.\n * @return {boolean} True if the map contains the value.\n */\ngoog.structs.contains = function(col, val) {\n  if (col.contains && typeof col.contains == 'function') {\n    return col.contains(val);\n  }\n  if (col.containsValue && typeof col.containsValue == 'function') {\n    return col.containsValue(val);\n  }\n  if (goog.isArrayLike(col) || goog.isString(col)) {\n    return goog.array.contains(/** @type {!Array<?>} */ (col), val);\n  }\n  return goog.object.containsValue(col, val);\n};\n\n\n/**\n * Whether the collection is empty.\n * @param {Object} col The collection-like object.\n * @return {boolean} True if empty.\n */\ngoog.structs.isEmpty = function(col) {\n  if (col.isEmpty && typeof col.isEmpty == 'function') {\n    return col.isEmpty();\n  }\n\n  // We do not use goog.string.isEmptyOrWhitespace because here we treat the\n  // string as\n  // collection and as such even whitespace matters\n\n  if (goog.isArrayLike(col) || goog.isString(col)) {\n    return goog.array.isEmpty(/** @type {!Array<?>} */ (col));\n  }\n  return goog.object.isEmpty(col);\n};\n\n\n/**\n * Removes all the elements from the collection.\n * @param {Object} col The collection-like object.\n */\ngoog.structs.clear = function(col) {\n  // NOTE(arv): This should not contain strings because strings are immutable\n  if (col.clear && typeof col.clear == 'function') {\n    col.clear();\n  } else if (goog.isArrayLike(col)) {\n    goog.array.clear(/** @type {IArrayLike<?>} */ (col));\n  } else {\n    goog.object.clear(col);\n  }\n};\n\n\n/**\n * Calls a function for each value in a collection. The function takes\n * three arguments; the value, the key and the collection.\n *\n * @param {S} col The collection-like object.\n * @param {function(this:T,?,?,S):?} f The function to call for every value.\n *     This function takes\n *     3 arguments (the value, the key or undefined if the collection has no\n *     notion of keys, and the collection) and the return value is irrelevant.\n * @param {T=} opt_obj The object to be used as the value of 'this'\n *     within `f`.\n * @template T,S\n * @deprecated Use a more specific method, e.g. goog.array.forEach,\n *     goog.object.forEach, or for-of.\n */\ngoog.structs.forEach = function(col, f, opt_obj) {\n  if (col.forEach && typeof col.forEach == 'function') {\n    col.forEach(f, opt_obj);\n  } else if (goog.isArrayLike(col) || goog.isString(col)) {\n    goog.array.forEach(/** @type {!Array<?>} */ (col), f, opt_obj);\n  } else {\n    var keys = goog.structs.getKeys(col);\n    var values = goog.structs.getValues(col);\n    var l = values.length;\n    for (var i = 0; i < l; i++) {\n      f.call(/** @type {?} */ (opt_obj), values[i], keys && keys[i], col);\n    }\n  }\n};\n\n\n/**\n * Calls a function for every value in the collection. When a call returns true,\n * adds the value to a new collection (Array is returned by default).\n *\n * @param {S} col The collection-like object.\n * @param {function(this:T,?,?,S):boolean} f The function to call for every\n *     value. This function takes\n *     3 arguments (the value, the key or undefined if the collection has no\n *     notion of keys, and the collection) and should return a Boolean. If the\n *     return value is true the value is added to the result collection. If it\n *     is false the value is not included.\n * @param {T=} opt_obj The object to be used as the value of 'this'\n *     within `f`.\n * @return {!Object|!Array<?>} A new collection where the passed values are\n *     present. If col is a key-less collection an array is returned.  If col\n *     has keys and values a plain old JS object is returned.\n * @template T,S\n */\ngoog.structs.filter = function(col, f, opt_obj) {\n  if (typeof col.filter == 'function') {\n    return col.filter(f, opt_obj);\n  }\n  if (goog.isArrayLike(col) || goog.isString(col)) {\n    return goog.array.filter(/** @type {!Array<?>} */ (col), f, opt_obj);\n  }\n\n  var rv;\n  var keys = goog.structs.getKeys(col);\n  var values = goog.structs.getValues(col);\n  var l = values.length;\n  if (keys) {\n    rv = {};\n    for (var i = 0; i < l; i++) {\n      if (f.call(/** @type {?} */ (opt_obj), values[i], keys[i], col)) {\n        rv[keys[i]] = values[i];\n      }\n    }\n  } else {\n    // We should not use goog.array.filter here since we want to make sure that\n    // the index is undefined as well as make sure that col is passed to the\n    // function.\n    rv = [];\n    for (var i = 0; i < l; i++) {\n      if (f.call(opt_obj, values[i], undefined, col)) {\n        rv.push(values[i]);\n      }\n    }\n  }\n  return rv;\n};\n\n\n/**\n * Calls a function for every value in the collection and adds the result into a\n * new collection (defaults to creating a new Array).\n *\n * @param {S} col The collection-like object.\n * @param {function(this:T,?,?,S):V} f The function to call for every value.\n *     This function takes 3 arguments (the value, the key or undefined if the\n *     collection has no notion of keys, and the collection) and should return\n *     something. The result will be used as the value in the new collection.\n * @param {T=} opt_obj  The object to be used as the value of 'this'\n *     within `f`.\n * @return {!Object<V>|!Array<V>} A new collection with the new values.  If\n *     col is a key-less collection an array is returned.  If col has keys and\n *     values a plain old JS object is returned.\n * @template T,S,V\n */\ngoog.structs.map = function(col, f, opt_obj) {\n  if (typeof col.map == 'function') {\n    return col.map(f, opt_obj);\n  }\n  if (goog.isArrayLike(col) || goog.isString(col)) {\n    return goog.array.map(/** @type {!Array<?>} */ (col), f, opt_obj);\n  }\n\n  var rv;\n  var keys = goog.structs.getKeys(col);\n  var values = goog.structs.getValues(col);\n  var l = values.length;\n  if (keys) {\n    rv = {};\n    for (var i = 0; i < l; i++) {\n      rv[keys[i]] = f.call(/** @type {?} */ (opt_obj), values[i], keys[i], col);\n    }\n  } else {\n    // We should not use goog.array.map here since we want to make sure that\n    // the index is undefined as well as make sure that col is passed to the\n    // function.\n    rv = [];\n    for (var i = 0; i < l; i++) {\n      rv[i] = f.call(/** @type {?} */ (opt_obj), values[i], undefined, col);\n    }\n  }\n  return rv;\n};\n\n\n/**\n * Calls f for each value in a collection. If any call returns true this returns\n * true (without checking the rest). If all returns false this returns false.\n *\n * @param {S} col The collection-like object.\n * @param {function(this:T,?,?,S):boolean} f The function to call for every\n *     value. This function takes 3 arguments (the value, the key or undefined\n *     if the collection has no notion of keys, and the collection) and should\n *     return a boolean.\n * @param {T=} opt_obj  The object to be used as the value of 'this'\n *     within `f`.\n * @return {boolean} True if any value passes the test.\n * @template T,S\n */\ngoog.structs.some = function(col, f, opt_obj) {\n  if (typeof col.some == 'function') {\n    return col.some(f, opt_obj);\n  }\n  if (goog.isArrayLike(col) || goog.isString(col)) {\n    return goog.array.some(/** @type {!Array<?>} */ (col), f, opt_obj);\n  }\n  var keys = goog.structs.getKeys(col);\n  var values = goog.structs.getValues(col);\n  var l = values.length;\n  for (var i = 0; i < l; i++) {\n    if (f.call(/** @type {?} */ (opt_obj), values[i], keys && keys[i], col)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n\n/**\n * Calls f for each value in a collection. If all calls return true this return\n * true this returns true. If any returns false this returns false at this point\n *  and does not continue to check the remaining values.\n *\n * @param {S} col The collection-like object.\n * @param {function(this:T,?,?,S):boolean} f The function to call for every\n *     value. This function takes 3 arguments (the value, the key or\n *     undefined if the collection has no notion of keys, and the collection)\n *     and should return a boolean.\n * @param {T=} opt_obj  The object to be used as the value of 'this'\n *     within `f`.\n * @return {boolean} True if all key-value pairs pass the test.\n * @template T,S\n */\ngoog.structs.every = function(col, f, opt_obj) {\n  if (typeof col.every == 'function') {\n    return col.every(f, opt_obj);\n  }\n  if (goog.isArrayLike(col) || goog.isString(col)) {\n    return goog.array.every(/** @type {!Array<?>} */ (col), f, opt_obj);\n  }\n  var keys = goog.structs.getKeys(col);\n  var values = goog.structs.getValues(col);\n  var l = values.length;\n  for (var i = 0; i < l; i++) {\n    if (!f.call(/** @type {?} */ (opt_obj), values[i], keys && keys[i], col)) {\n      return false;\n    }\n  }\n  return true;\n};\n","// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Simple utilities for dealing with URI strings.\n *\n * This is intended to be a lightweight alternative to constructing goog.Uri\n * objects.  Whereas goog.Uri adds several kilobytes to the binary regardless\n * of how much of its functionality you use, this is designed to be a set of\n * mostly-independent utilities so that the compiler includes only what is\n * necessary for the task.  Estimated savings of porting is 5k pre-gzip and\n * 1.5k post-gzip.  To ensure the savings remain, future developers should\n * avoid adding new functionality to existing functions, but instead create\n * new ones and factor out shared code.\n *\n * Many of these utilities have limited functionality, tailored to common\n * cases.  The query parameter utilities assume that the parameter keys are\n * already encoded, since most keys are compile-time alphanumeric strings.  The\n * query parameter mutation utilities also do not tolerate fragment identifiers.\n *\n * By design, these functions can be slower than goog.Uri equivalents.\n * Repeated calls to some of functions may be quadratic in behavior for IE,\n * although the effect is somewhat limited given the 2kb limit.\n *\n * One advantage of the limited functionality here is that this approach is\n * less sensitive to differences in URI encodings than goog.Uri, since these\n * functions operate on strings directly, rather than decoding them and\n * then re-encoding.\n *\n * Uses features of RFC 3986 for parsing/formatting URIs:\n *   http://www.ietf.org/rfc/rfc3986.txt\n *\n * @author gboyer@google.com (Garrett Boyer) - The \"lightened\" design.\n * @author msamuel@google.com (Mike Samuel) - Domain knowledge and regexes.\n */\n\ngoog.provide('goog.uri.utils');\ngoog.provide('goog.uri.utils.ComponentIndex');\ngoog.provide('goog.uri.utils.QueryArray');\ngoog.provide('goog.uri.utils.QueryValue');\ngoog.provide('goog.uri.utils.StandardQueryParam');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.string');\n\n\n/**\n * Character codes inlined to avoid object allocations due to charCode.\n * @enum {number}\n * @private\n */\ngoog.uri.utils.CharCode_ = {\n  AMPERSAND: 38,\n  EQUAL: 61,\n  HASH: 35,\n  QUESTION: 63\n};\n\n\n/**\n * Builds a URI string from already-encoded parts.\n *\n * No encoding is performed.  Any component may be omitted as either null or\n * undefined.\n *\n * @param {?string=} opt_scheme The scheme such as 'http'.\n * @param {?string=} opt_userInfo The user name before the '@'.\n * @param {?string=} opt_domain The domain such as 'www.google.com', already\n *     URI-encoded.\n * @param {(string|number|null)=} opt_port The port number.\n * @param {?string=} opt_path The path, already URI-encoded.  If it is not\n *     empty, it must begin with a slash.\n * @param {?string=} opt_queryData The URI-encoded query data.\n * @param {?string=} opt_fragment The URI-encoded fragment identifier.\n * @return {string} The fully combined URI.\n */\ngoog.uri.utils.buildFromEncodedParts = function(\n    opt_scheme, opt_userInfo, opt_domain, opt_port, opt_path, opt_queryData,\n    opt_fragment) {\n  var out = '';\n\n  if (opt_scheme) {\n    out += opt_scheme + ':';\n  }\n\n  if (opt_domain) {\n    out += '//';\n\n    if (opt_userInfo) {\n      out += opt_userInfo + '@';\n    }\n\n    out += opt_domain;\n\n    if (opt_port) {\n      out += ':' + opt_port;\n    }\n  }\n\n  if (opt_path) {\n    out += opt_path;\n  }\n\n  if (opt_queryData) {\n    out += '?' + opt_queryData;\n  }\n\n  if (opt_fragment) {\n    out += '#' + opt_fragment;\n  }\n\n  return out;\n};\n\n\n/**\n * A regular expression for breaking a URI into its component parts.\n *\n * {@link http://www.ietf.org/rfc/rfc3986.txt} says in Appendix B\n * As the \"first-match-wins\" algorithm is identical to the \"greedy\"\n * disambiguation method used by POSIX regular expressions, it is natural and\n * commonplace to use a regular expression for parsing the potential five\n * components of a URI reference.\n *\n * The following line is the regular expression for breaking-down a\n * well-formed URI reference into its components.\n *\n * <pre>\n * ^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?\n *  12            3  4          5       6  7        8 9\n * </pre>\n *\n * The numbers in the second line above are only to assist readability; they\n * indicate the reference points for each subexpression (i.e., each paired\n * parenthesis). We refer to the value matched for subexpression <n> as $<n>.\n * For example, matching the above expression to\n * <pre>\n *     http://www.ics.uci.edu/pub/ietf/uri/#Related\n * </pre>\n * results in the following subexpression matches:\n * <pre>\n *    $1 = http:\n *    $2 = http\n *    $3 = //www.ics.uci.edu\n *    $4 = www.ics.uci.edu\n *    $5 = /pub/ietf/uri/\n *    $6 = <undefined>\n *    $7 = <undefined>\n *    $8 = #Related\n *    $9 = Related\n * </pre>\n * where <undefined> indicates that the component is not present, as is the\n * case for the query component in the above example. Therefore, we can\n * determine the value of the five components as\n * <pre>\n *    scheme    = $2\n *    authority = $4\n *    path      = $5\n *    query     = $7\n *    fragment  = $9\n * </pre>\n *\n * The regular expression has been modified slightly to expose the\n * userInfo, domain, and port separately from the authority.\n * The modified version yields\n * <pre>\n *    $1 = http              scheme\n *    $2 = <undefined>       userInfo -\\\n *    $3 = www.ics.uci.edu   domain     | authority\n *    $4 = <undefined>       port     -/\n *    $5 = /pub/ietf/uri/    path\n *    $6 = <undefined>       query without ?\n *    $7 = Related           fragment without #\n * </pre>\n * @type {!RegExp}\n * @private\n */\ngoog.uri.utils.splitRe_ = new RegExp(\n    '^' +\n    '(?:' +\n    '([^:/?#.]+)' +  // scheme - ignore special characters\n                     // used by other URL parts such as :,\n                     // ?, /, #, and .\n    ':)?' +\n    '(?://' +\n    '(?:([^/?#]*)@)?' +  // userInfo\n    '([^/#?]*?)' +       // domain\n    '(?::([0-9]+))?' +   // port\n    '(?=[/#?]|$)' +      // authority-terminating character\n    ')?' +\n    '([^?#]+)?' +          // path\n    '(?:\\\\?([^#]*))?' +    // query\n    '(?:#([\\\\s\\\\S]*))?' +  // fragment\n    '$');\n\n\n/**\n * The index of each URI component in the return value of goog.uri.utils.split.\n * @enum {number}\n */\ngoog.uri.utils.ComponentIndex = {\n  SCHEME: 1,\n  USER_INFO: 2,\n  DOMAIN: 3,\n  PORT: 4,\n  PATH: 5,\n  QUERY_DATA: 6,\n  FRAGMENT: 7\n};\n\n\n/**\n * Splits a URI into its component parts.\n *\n * Each component can be accessed via the component indices; for example:\n * <pre>\n * goog.uri.utils.split(someStr)[goog.uri.utils.ComponentIndex.QUERY_DATA];\n * </pre>\n *\n * @param {string} uri The URI string to examine.\n * @return {!Array<string|undefined>} Each component still URI-encoded.\n *     Each component that is present will contain the encoded value, whereas\n *     components that are not present will be undefined or empty, depending\n *     on the browser's regular expression implementation.  Never null, since\n *     arbitrary strings may still look like path names.\n */\ngoog.uri.utils.split = function(uri) {\n  // See @return comment -- never null.\n  return /** @type {!Array<string|undefined>} */ (\n      uri.match(goog.uri.utils.splitRe_));\n};\n\n\n/**\n * @param {?string} uri A possibly null string.\n * @param {boolean=} opt_preserveReserved If true, percent-encoding of RFC-3986\n *     reserved characters will not be removed.\n * @return {?string} The string URI-decoded, or null if uri is null.\n * @private\n */\ngoog.uri.utils.decodeIfPossible_ = function(uri, opt_preserveReserved) {\n  if (!uri) {\n    return uri;\n  }\n\n  return opt_preserveReserved ? decodeURI(uri) : decodeURIComponent(uri);\n};\n\n\n/**\n * Gets a URI component by index.\n *\n * It is preferred to use the getPathEncoded() variety of functions ahead,\n * since they are more readable.\n *\n * @param {goog.uri.utils.ComponentIndex} componentIndex The component index.\n * @param {string} uri The URI to examine.\n * @return {?string} The still-encoded component, or null if the component\n *     is not present.\n * @private\n */\ngoog.uri.utils.getComponentByIndex_ = function(componentIndex, uri) {\n  // Convert undefined, null, and empty string into null.\n  return goog.uri.utils.split(uri)[componentIndex] || null;\n};\n\n\n/**\n * @param {string} uri The URI to examine.\n * @return {?string} The protocol or scheme, or null if none.  Does not\n *     include trailing colons or slashes.\n */\ngoog.uri.utils.getScheme = function(uri) {\n  return goog.uri.utils.getComponentByIndex_(\n      goog.uri.utils.ComponentIndex.SCHEME, uri);\n};\n\n\n/**\n * Gets the effective scheme for the URL.  If the URL is relative then the\n * scheme is derived from the page's location.\n * @param {string} uri The URI to examine.\n * @return {string} The protocol or scheme, always lower case.\n */\ngoog.uri.utils.getEffectiveScheme = function(uri) {\n  var scheme = goog.uri.utils.getScheme(uri);\n  if (!scheme && goog.global.self && goog.global.self.location) {\n    var protocol = goog.global.self.location.protocol;\n    scheme = protocol.substr(0, protocol.length - 1);\n  }\n  // NOTE: When called from a web worker in Firefox 3.5, location maybe null.\n  // All other browsers with web workers support self.location from the worker.\n  return scheme ? scheme.toLowerCase() : '';\n};\n\n\n/**\n * @param {string} uri The URI to examine.\n * @return {?string} The user name still encoded, or null if none.\n */\ngoog.uri.utils.getUserInfoEncoded = function(uri) {\n  return goog.uri.utils.getComponentByIndex_(\n      goog.uri.utils.ComponentIndex.USER_INFO, uri);\n};\n\n\n/**\n * @param {string} uri The URI to examine.\n * @return {?string} The decoded user info, or null if none.\n */\ngoog.uri.utils.getUserInfo = function(uri) {\n  return goog.uri.utils.decodeIfPossible_(\n      goog.uri.utils.getUserInfoEncoded(uri));\n};\n\n\n/**\n * @param {string} uri The URI to examine.\n * @return {?string} The domain name still encoded, or null if none.\n */\ngoog.uri.utils.getDomainEncoded = function(uri) {\n  return goog.uri.utils.getComponentByIndex_(\n      goog.uri.utils.ComponentIndex.DOMAIN, uri);\n};\n\n\n/**\n * @param {string} uri The URI to examine.\n * @return {?string} The decoded domain, or null if none.\n */\ngoog.uri.utils.getDomain = function(uri) {\n  return goog.uri.utils.decodeIfPossible_(\n      goog.uri.utils.getDomainEncoded(uri), true /* opt_preserveReserved */);\n};\n\n\n/**\n * @param {string} uri The URI to examine.\n * @return {?number} The port number, or null if none.\n */\ngoog.uri.utils.getPort = function(uri) {\n  // Coerce to a number.  If the result of getComponentByIndex_ is null or\n  // non-numeric, the number coersion yields NaN.  This will then return\n  // null for all non-numeric cases (though also zero, which isn't a relevant\n  // port number).\n  return Number(\n             goog.uri.utils.getComponentByIndex_(\n                 goog.uri.utils.ComponentIndex.PORT, uri)) ||\n      null;\n};\n\n\n/**\n * @param {string} uri The URI to examine.\n * @return {?string} The path still encoded, or null if none. Includes the\n *     leading slash, if any.\n */\ngoog.uri.utils.getPathEncoded = function(uri) {\n  return goog.uri.utils.getComponentByIndex_(\n      goog.uri.utils.ComponentIndex.PATH, uri);\n};\n\n\n/**\n * @param {string} uri The URI to examine.\n * @return {?string} The decoded path, or null if none.  Includes the leading\n *     slash, if any.\n */\ngoog.uri.utils.getPath = function(uri) {\n  return goog.uri.utils.decodeIfPossible_(\n      goog.uri.utils.getPathEncoded(uri), true /* opt_preserveReserved */);\n};\n\n\n/**\n * @param {string} uri The URI to examine.\n * @return {?string} The query data still encoded, or null if none.  Does not\n *     include the question mark itself.\n */\ngoog.uri.utils.getQueryData = function(uri) {\n  return goog.uri.utils.getComponentByIndex_(\n      goog.uri.utils.ComponentIndex.QUERY_DATA, uri);\n};\n\n\n/**\n * @param {string} uri The URI to examine.\n * @return {?string} The fragment identifier, or null if none.  Does not\n *     include the hash mark itself.\n */\ngoog.uri.utils.getFragmentEncoded = function(uri) {\n  // The hash mark may not appear in any other part of the URL.\n  var hashIndex = uri.indexOf('#');\n  return hashIndex < 0 ? null : uri.substr(hashIndex + 1);\n};\n\n\n/**\n * @param {string} uri The URI to examine.\n * @param {?string} fragment The encoded fragment identifier, or null if none.\n *     Does not include the hash mark itself.\n * @return {string} The URI with the fragment set.\n */\ngoog.uri.utils.setFragmentEncoded = function(uri, fragment) {\n  return goog.uri.utils.removeFragment(uri) + (fragment ? '#' + fragment : '');\n};\n\n\n/**\n * @param {string} uri The URI to examine.\n * @return {?string} The decoded fragment identifier, or null if none.  Does\n *     not include the hash mark.\n */\ngoog.uri.utils.getFragment = function(uri) {\n  return goog.uri.utils.decodeIfPossible_(\n      goog.uri.utils.getFragmentEncoded(uri));\n};\n\n\n/**\n * Extracts everything up to the port of the URI.\n * @param {string} uri The URI string.\n * @return {string} Everything up to and including the port.\n */\ngoog.uri.utils.getHost = function(uri) {\n  var pieces = goog.uri.utils.split(uri);\n  return goog.uri.utils.buildFromEncodedParts(\n      pieces[goog.uri.utils.ComponentIndex.SCHEME],\n      pieces[goog.uri.utils.ComponentIndex.USER_INFO],\n      pieces[goog.uri.utils.ComponentIndex.DOMAIN],\n      pieces[goog.uri.utils.ComponentIndex.PORT]);\n};\n\n\n/**\n * Returns the origin for a given URL.\n * @param {string} uri The URI string.\n * @return {string} Everything up to and including the port.\n */\ngoog.uri.utils.getOrigin = function(uri) {\n  var pieces = goog.uri.utils.split(uri);\n  return goog.uri.utils.buildFromEncodedParts(\n      pieces[goog.uri.utils.ComponentIndex.SCHEME], null /* opt_userInfo */,\n      pieces[goog.uri.utils.ComponentIndex.DOMAIN],\n      pieces[goog.uri.utils.ComponentIndex.PORT]);\n};\n\n\n/**\n * Extracts the path of the URL and everything after.\n * @param {string} uri The URI string.\n * @return {string} The URI, starting at the path and including the query\n *     parameters and fragment identifier.\n */\ngoog.uri.utils.getPathAndAfter = function(uri) {\n  var pieces = goog.uri.utils.split(uri);\n  return goog.uri.utils.buildFromEncodedParts(\n      null, null, null, null, pieces[goog.uri.utils.ComponentIndex.PATH],\n      pieces[goog.uri.utils.ComponentIndex.QUERY_DATA],\n      pieces[goog.uri.utils.ComponentIndex.FRAGMENT]);\n};\n\n\n/**\n * Gets the URI with the fragment identifier removed.\n * @param {string} uri The URI to examine.\n * @return {string} Everything preceding the hash mark.\n */\ngoog.uri.utils.removeFragment = function(uri) {\n  // The hash mark may not appear in any other part of the URL.\n  var hashIndex = uri.indexOf('#');\n  return hashIndex < 0 ? uri : uri.substr(0, hashIndex);\n};\n\n\n/**\n * Ensures that two URI's have the exact same domain, scheme, and port.\n *\n * Unlike the version in goog.Uri, this checks protocol, and therefore is\n * suitable for checking against the browser's same-origin policy.\n *\n * @param {string} uri1 The first URI.\n * @param {string} uri2 The second URI.\n * @return {boolean} Whether they have the same scheme, domain and port.\n */\ngoog.uri.utils.haveSameDomain = function(uri1, uri2) {\n  var pieces1 = goog.uri.utils.split(uri1);\n  var pieces2 = goog.uri.utils.split(uri2);\n  return pieces1[goog.uri.utils.ComponentIndex.DOMAIN] ==\n      pieces2[goog.uri.utils.ComponentIndex.DOMAIN] &&\n      pieces1[goog.uri.utils.ComponentIndex.SCHEME] ==\n      pieces2[goog.uri.utils.ComponentIndex.SCHEME] &&\n      pieces1[goog.uri.utils.ComponentIndex.PORT] ==\n      pieces2[goog.uri.utils.ComponentIndex.PORT];\n};\n\n\n/**\n * Asserts that there are no fragment or query identifiers, only in uncompiled\n * mode.\n * @param {string} uri The URI to examine.\n * @private\n */\ngoog.uri.utils.assertNoFragmentsOrQueries_ = function(uri) {\n  goog.asserts.assert(\n      uri.indexOf('#') < 0 && uri.indexOf('?') < 0,\n      'goog.uri.utils: Fragment or query identifiers are not supported: [%s]',\n      uri);\n};\n\n\n/**\n * Supported query parameter values by the parameter serializing utilities.\n *\n * If a value is null or undefined, the key-value pair is skipped, as an easy\n * way to omit parameters conditionally.  Non-array parameters are converted\n * to a string and URI encoded.  Array values are expanded into multiple\n * &key=value pairs, with each element stringized and URI-encoded.\n *\n * @typedef {*}\n */\ngoog.uri.utils.QueryValue;\n\n\n/**\n * An array representing a set of query parameters with alternating keys\n * and values.\n *\n * Keys are assumed to be URI encoded already and live at even indices.  See\n * goog.uri.utils.QueryValue for details on how parameter values are encoded.\n *\n * Example:\n * <pre>\n * var data = [\n *   // Simple param: ?name=BobBarker\n *   'name', 'BobBarker',\n *   // Conditional param -- may be omitted entirely.\n *   'specialDietaryNeeds', hasDietaryNeeds() ? getDietaryNeeds() : null,\n *   // Multi-valued param: &house=LosAngeles&house=NewYork&house=null\n *   'house', ['LosAngeles', 'NewYork', null]\n * ];\n * </pre>\n *\n * @typedef {!Array<string|goog.uri.utils.QueryValue>}\n */\ngoog.uri.utils.QueryArray;\n\n\n/**\n * Parses encoded query parameters and calls callback function for every\n * parameter found in the string.\n *\n * Missing value of parameter (e.g. \u201c\u2026&key&\u2026\u201d) is treated as if the value was an\n * empty string.  Keys may be empty strings (e.g. \u201c\u2026&=value&\u2026\u201d) which also means\n * that \u201c\u2026&=&\u2026\u201d and \u201c\u2026&&\u2026\u201d will result in an empty key and value.\n *\n * @param {string} encodedQuery Encoded query string excluding question mark at\n *     the beginning.\n * @param {function(string, string)} callback Function called for every\n *     parameter found in query string.  The first argument (name) will not be\n *     urldecoded (so the function is consistent with buildQueryData), but the\n *     second will.  If the parameter has no value (i.e. \u201c=\u201d was not present)\n *     the second argument (value) will be an empty string.\n */\ngoog.uri.utils.parseQueryData = function(encodedQuery, callback) {\n  if (!encodedQuery) {\n    return;\n  }\n  var pairs = encodedQuery.split('&');\n  for (var i = 0; i < pairs.length; i++) {\n    var indexOfEquals = pairs[i].indexOf('=');\n    var name = null;\n    var value = null;\n    if (indexOfEquals >= 0) {\n      name = pairs[i].substring(0, indexOfEquals);\n      value = pairs[i].substring(indexOfEquals + 1);\n    } else {\n      name = pairs[i];\n    }\n    callback(name, value ? goog.string.urlDecode(value) : '');\n  }\n};\n\n\n/**\n * Split the URI into 3 parts where the [1] is the queryData without a leading\n * '?'. For example, the URI http://foo.com/bar?a=b#abc returns\n * ['http://foo.com/bar','a=b','#abc'].\n * @param {string} uri The URI to parse.\n * @return {!Array<string>} An array representation of uri of length 3 where the\n *     middle value is the queryData without a leading '?'.\n * @private\n */\ngoog.uri.utils.splitQueryData_ = function(uri) {\n  // Find the query data and and hash.\n  var hashIndex = uri.indexOf('#');\n  if (hashIndex < 0) {\n    hashIndex = uri.length;\n  }\n  var questionIndex = uri.indexOf('?');\n  var queryData;\n  if (questionIndex < 0 || questionIndex > hashIndex) {\n    questionIndex = hashIndex;\n    queryData = '';\n  } else {\n    queryData = uri.substring(questionIndex + 1, hashIndex);\n  }\n  return [uri.substr(0, questionIndex), queryData, uri.substr(hashIndex)];\n};\n\n\n/**\n * Join an array created by splitQueryData_ back into a URI.\n * @param {!Array<string>} parts A URI in the form generated by splitQueryData_.\n * @return {string} The joined URI.\n * @private\n */\ngoog.uri.utils.joinQueryData_ = function(parts) {\n  return parts[0] + (parts[1] ? '?' + parts[1] : '') + parts[2];\n};\n\n\n/**\n * @param {string} queryData\n * @param {string} newData\n * @return {string}\n * @private\n */\ngoog.uri.utils.appendQueryData_ = function(queryData, newData) {\n  if (!newData) {\n    return queryData;\n  }\n  return queryData ? queryData + '&' + newData : newData;\n};\n\n\n/**\n * @param {string} uri\n * @param {string} queryData\n * @return {string}\n * @private\n */\ngoog.uri.utils.appendQueryDataToUri_ = function(uri, queryData) {\n  if (!queryData) {\n    return uri;\n  }\n  var parts = goog.uri.utils.splitQueryData_(uri);\n  parts[1] = goog.uri.utils.appendQueryData_(parts[1], queryData);\n  return goog.uri.utils.joinQueryData_(parts);\n};\n\n\n/**\n * Appends key=value pairs to an array, supporting multi-valued objects.\n * @param {*} key The key prefix.\n * @param {goog.uri.utils.QueryValue} value The value to serialize.\n * @param {!Array<string>} pairs The array to which the 'key=value' strings\n *     should be appended.\n * @private\n */\ngoog.uri.utils.appendKeyValuePairs_ = function(key, value, pairs) {\n  goog.asserts.assertString(key);\n  if (goog.isArray(value)) {\n    // Convince the compiler it's an array.\n    goog.asserts.assertArray(value);\n    for (var j = 0; j < value.length; j++) {\n      // Convert to string explicitly, to short circuit the null and array\n      // logic in this function -- this ensures that null and undefined get\n      // written as literal 'null' and 'undefined', and arrays don't get\n      // expanded out but instead encoded in the default way.\n      goog.uri.utils.appendKeyValuePairs_(key, String(value[j]), pairs);\n    }\n  } else if (value != null) {\n    // Skip a top-level null or undefined entirely.\n    pairs.push(\n        key +\n        // Check for empty string. Zero gets encoded into the url as literal\n        // strings.  For empty string, skip the equal sign, to be consistent\n        // with UriBuilder.java.\n        (value === '' ? '' : '=' + goog.string.urlEncode(value)));\n  }\n};\n\n\n/**\n * Builds a query data string from a sequence of alternating keys and values.\n * Currently generates \"&key&\" for empty args.\n *\n * @param {!IArrayLike<string|goog.uri.utils.QueryValue>} keysAndValues\n *     Alternating keys and values. See the QueryArray typedef.\n * @param {number=} opt_startIndex A start offset into the arary, defaults to 0.\n * @return {string} The encoded query string, in the form 'a=1&b=2'.\n */\ngoog.uri.utils.buildQueryData = function(keysAndValues, opt_startIndex) {\n  goog.asserts.assert(\n      Math.max(keysAndValues.length - (opt_startIndex || 0), 0) % 2 == 0,\n      'goog.uri.utils: Key/value lists must be even in length.');\n\n  var params = [];\n  for (var i = opt_startIndex || 0; i < keysAndValues.length; i += 2) {\n    var key = /** @type {string} */ (keysAndValues[i]);\n    goog.uri.utils.appendKeyValuePairs_(key, keysAndValues[i + 1], params);\n  }\n  return params.join('&');\n};\n\n\n/**\n * Builds a query data string from a map.\n * Currently generates \"&key&\" for empty args.\n *\n * @param {!Object<string, goog.uri.utils.QueryValue>} map An object where keys\n *     are URI-encoded parameter keys, and the values are arbitrary types\n *     or arrays. Keys with a null value are dropped.\n * @return {string} The encoded query string, in the form 'a=1&b=2'.\n */\ngoog.uri.utils.buildQueryDataFromMap = function(map) {\n  var params = [];\n  for (var key in map) {\n    goog.uri.utils.appendKeyValuePairs_(key, map[key], params);\n  }\n  return params.join('&');\n};\n\n\n/**\n * Appends URI parameters to an existing URI.\n *\n * The variable arguments may contain alternating keys and values.  Keys are\n * assumed to be already URI encoded.  The values should not be URI-encoded,\n * and will instead be encoded by this function.\n * <pre>\n * appendParams('http://www.foo.com?existing=true',\n *     'key1', 'value1',\n *     'key2', 'value?willBeEncoded',\n *     'key3', ['valueA', 'valueB', 'valueC'],\n *     'key4', null);\n * result: 'http://www.foo.com?existing=true&' +\n *     'key1=value1&' +\n *     'key2=value%3FwillBeEncoded&' +\n *     'key3=valueA&key3=valueB&key3=valueC'\n * </pre>\n *\n * A single call to this function will not exhibit quadratic behavior in IE,\n * whereas multiple repeated calls may, although the effect is limited by\n * fact that URL's generally can't exceed 2kb.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {...(goog.uri.utils.QueryArray|goog.uri.utils.QueryValue)}\n * var_args\n *     An array or argument list conforming to goog.uri.utils.QueryArray.\n * @return {string} The URI with all query parameters added.\n */\ngoog.uri.utils.appendParams = function(uri, var_args) {\n  var queryData = arguments.length == 2 ?\n      goog.uri.utils.buildQueryData(arguments[1], 0) :\n      goog.uri.utils.buildQueryData(arguments, 1);\n  return goog.uri.utils.appendQueryDataToUri_(uri, queryData);\n};\n\n\n/**\n * Appends query parameters from a map.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {!Object<goog.uri.utils.QueryValue>} map An object where keys are\n *     URI-encoded parameter keys, and the values are arbitrary types or arrays.\n *     Keys with a null value are dropped.\n * @return {string} The new parameters.\n */\ngoog.uri.utils.appendParamsFromMap = function(uri, map) {\n  var queryData = goog.uri.utils.buildQueryDataFromMap(map);\n  return goog.uri.utils.appendQueryDataToUri_(uri, queryData);\n};\n\n\n/**\n * Appends a single URI parameter.\n *\n * Repeated calls to this can exhibit quadratic behavior in IE6 due to the\n * way string append works, though it should be limited given the 2kb limit.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {string} key The key, which must already be URI encoded.\n * @param {*=} opt_value The value, which will be stringized and encoded\n *     (assumed not already to be encoded).  If omitted, undefined, or null, the\n *     key will be added as a valueless parameter.\n * @return {string} The URI with the query parameter added.\n */\ngoog.uri.utils.appendParam = function(uri, key, opt_value) {\n  var value = goog.isDefAndNotNull(opt_value) ?\n      '=' + goog.string.urlEncode(opt_value) :\n      '';\n  return goog.uri.utils.appendQueryDataToUri_(uri, key + value);\n};\n\n\n/**\n * Finds the next instance of a query parameter with the specified name.\n *\n * Does not instantiate any objects.\n *\n * @param {string} uri The URI to search.  May contain a fragment identifier\n *     if opt_hashIndex is specified.\n * @param {number} startIndex The index to begin searching for the key at.  A\n *     match may be found even if this is one character after the ampersand.\n * @param {string} keyEncoded The URI-encoded key.\n * @param {number} hashOrEndIndex Index to stop looking at.  If a hash\n *     mark is present, it should be its index, otherwise it should be the\n *     length of the string.\n * @return {number} The position of the first character in the key's name,\n *     immediately after either a question mark or a dot.\n * @private\n */\ngoog.uri.utils.findParam_ = function(\n    uri, startIndex, keyEncoded, hashOrEndIndex) {\n  var index = startIndex;\n  var keyLength = keyEncoded.length;\n\n  // Search for the key itself and post-filter for surronuding punctuation,\n  // rather than expensively building a regexp.\n  while ((index = uri.indexOf(keyEncoded, index)) >= 0 &&\n         index < hashOrEndIndex) {\n    var precedingChar = uri.charCodeAt(index - 1);\n    // Ensure that the preceding character is '&' or '?'.\n    if (precedingChar == goog.uri.utils.CharCode_.AMPERSAND ||\n        precedingChar == goog.uri.utils.CharCode_.QUESTION) {\n      // Ensure the following character is '&', '=', '#', or NaN\n      // (end of string).\n      var followingChar = uri.charCodeAt(index + keyLength);\n      if (!followingChar || followingChar == goog.uri.utils.CharCode_.EQUAL ||\n          followingChar == goog.uri.utils.CharCode_.AMPERSAND ||\n          followingChar == goog.uri.utils.CharCode_.HASH) {\n        return index;\n      }\n    }\n    index += keyLength + 1;\n  }\n\n  return -1;\n};\n\n\n/**\n * Regular expression for finding a hash mark or end of string.\n * @type {RegExp}\n * @private\n */\ngoog.uri.utils.hashOrEndRe_ = /#|$/;\n\n\n/**\n * Determines if the URI contains a specific key.\n *\n * Performs no object instantiations.\n *\n * @param {string} uri The URI to process.  May contain a fragment\n *     identifier.\n * @param {string} keyEncoded The URI-encoded key.  Case-sensitive.\n * @return {boolean} Whether the key is present.\n */\ngoog.uri.utils.hasParam = function(uri, keyEncoded) {\n  return goog.uri.utils.findParam_(\n             uri, 0, keyEncoded, uri.search(goog.uri.utils.hashOrEndRe_)) >= 0;\n};\n\n\n/**\n * Gets the first value of a query parameter.\n * @param {string} uri The URI to process.  May contain a fragment.\n * @param {string} keyEncoded The URI-encoded key.  Case-sensitive.\n * @return {?string} The first value of the parameter (URI-decoded), or null\n *     if the parameter is not found.\n */\ngoog.uri.utils.getParamValue = function(uri, keyEncoded) {\n  var hashOrEndIndex = uri.search(goog.uri.utils.hashOrEndRe_);\n  var foundIndex =\n      goog.uri.utils.findParam_(uri, 0, keyEncoded, hashOrEndIndex);\n\n  if (foundIndex < 0) {\n    return null;\n  } else {\n    var endPosition = uri.indexOf('&', foundIndex);\n    if (endPosition < 0 || endPosition > hashOrEndIndex) {\n      endPosition = hashOrEndIndex;\n    }\n    // Progress forth to the end of the \"key=\" or \"key&\" substring.\n    foundIndex += keyEncoded.length + 1;\n    // Use substr, because it (unlike substring) will return empty string\n    // if foundIndex > endPosition.\n    return goog.string.urlDecode(\n        uri.substr(foundIndex, endPosition - foundIndex));\n  }\n};\n\n\n/**\n * Gets all values of a query parameter.\n * @param {string} uri The URI to process.  May contain a fragment.\n * @param {string} keyEncoded The URI-encoded key.  Case-sensitive.\n * @return {!Array<string>} All URI-decoded values with the given key.\n *     If the key is not found, this will have length 0, but never be null.\n */\ngoog.uri.utils.getParamValues = function(uri, keyEncoded) {\n  var hashOrEndIndex = uri.search(goog.uri.utils.hashOrEndRe_);\n  var position = 0;\n  var foundIndex;\n  var result = [];\n\n  while ((foundIndex = goog.uri.utils.findParam_(\n              uri, position, keyEncoded, hashOrEndIndex)) >= 0) {\n    // Find where this parameter ends, either the '&' or the end of the\n    // query parameters.\n    position = uri.indexOf('&', foundIndex);\n    if (position < 0 || position > hashOrEndIndex) {\n      position = hashOrEndIndex;\n    }\n\n    // Progress forth to the end of the \"key=\" or \"key&\" substring.\n    foundIndex += keyEncoded.length + 1;\n    // Use substr, because it (unlike substring) will return empty string\n    // if foundIndex > position.\n    result.push(\n        goog.string.urlDecode(uri.substr(foundIndex, position - foundIndex)));\n  }\n\n  return result;\n};\n\n\n/**\n * Regexp to find trailing question marks and ampersands.\n * @type {RegExp}\n * @private\n */\ngoog.uri.utils.trailingQueryPunctuationRe_ = /[?&]($|#)/;\n\n\n/**\n * Removes all instances of a query parameter.\n * @param {string} uri The URI to process.  Must not contain a fragment.\n * @param {string} keyEncoded The URI-encoded key.\n * @return {string} The URI with all instances of the parameter removed.\n */\ngoog.uri.utils.removeParam = function(uri, keyEncoded) {\n  var hashOrEndIndex = uri.search(goog.uri.utils.hashOrEndRe_);\n  var position = 0;\n  var foundIndex;\n  var buffer = [];\n\n  // Look for a query parameter.\n  while ((foundIndex = goog.uri.utils.findParam_(\n              uri, position, keyEncoded, hashOrEndIndex)) >= 0) {\n    // Get the portion of the query string up to, but not including, the ?\n    // or & starting the parameter.\n    buffer.push(uri.substring(position, foundIndex));\n    // Progress to immediately after the '&'.  If not found, go to the end.\n    // Avoid including the hash mark.\n    position = Math.min(\n        (uri.indexOf('&', foundIndex) + 1) || hashOrEndIndex, hashOrEndIndex);\n  }\n\n  // Append everything that is remaining.\n  buffer.push(uri.substr(position));\n\n  // Join the buffer, and remove trailing punctuation that remains.\n  return buffer.join('').replace(\n      goog.uri.utils.trailingQueryPunctuationRe_, '$1');\n};\n\n\n/**\n * Replaces all existing definitions of a parameter with a single definition.\n *\n * Repeated calls to this can exhibit quadratic behavior due to the need to\n * find existing instances and reconstruct the string, though it should be\n * limited given the 2kb limit.  Consider using appendParams or setParamsFromMap\n * to update multiple parameters in bulk.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {string} keyEncoded The key, which must already be URI encoded.\n * @param {*} value The value, which will be stringized and encoded (assumed\n *     not already to be encoded).\n * @return {string} The URI with the query parameter added.\n */\ngoog.uri.utils.setParam = function(uri, keyEncoded, value) {\n  return goog.uri.utils.appendParam(\n      goog.uri.utils.removeParam(uri, keyEncoded), keyEncoded, value);\n};\n\n\n/**\n * Effeciently set or remove multiple query parameters in a URI. Order of\n * unchanged parameters will not be modified, all updated parameters will be\n * appended to the end of the query. Params with values of null or undefined are\n * removed.\n *\n * @param {string} uri The URI to process.\n * @param {!Object<string, goog.uri.utils.QueryValue>} params A list of\n *     parameters to update. If null or undefined, the param will be removed.\n * @return {string} An updated URI where the query data has been updated with\n *     the params.\n */\ngoog.uri.utils.setParamsFromMap = function(uri, params) {\n  var parts = goog.uri.utils.splitQueryData_(uri);\n  var queryData = parts[1];\n  var buffer = [];\n  if (queryData) {\n    goog.array.forEach(queryData.split('&'), function(pair) {\n      var indexOfEquals = pair.indexOf('=');\n      var name = indexOfEquals >= 0 ? pair.substr(0, indexOfEquals) : pair;\n      if (!params.hasOwnProperty(name)) {\n        buffer.push(pair);\n      }\n    });\n  }\n  parts[1] = goog.uri.utils.appendQueryData_(\n      buffer.join('&'), goog.uri.utils.buildQueryDataFromMap(params));\n  return goog.uri.utils.joinQueryData_(parts);\n};\n\n\n/**\n * Generates a URI path using a given URI and a path with checks to\n * prevent consecutive \"//\". The baseUri passed in must not contain\n * query or fragment identifiers. The path to append may not contain query or\n * fragment identifiers.\n *\n * @param {string} baseUri URI to use as the base.\n * @param {string} path Path to append.\n * @return {string} Updated URI.\n */\ngoog.uri.utils.appendPath = function(baseUri, path) {\n  goog.uri.utils.assertNoFragmentsOrQueries_(baseUri);\n\n  // Remove any trailing '/'\n  if (goog.string.endsWith(baseUri, '/')) {\n    baseUri = baseUri.substr(0, baseUri.length - 1);\n  }\n  // Remove any leading '/'\n  if (goog.string.startsWith(path, '/')) {\n    path = path.substr(1);\n  }\n  return goog.string.buildString(baseUri, '/', path);\n};\n\n\n/**\n * Replaces the path.\n * @param {string} uri URI to use as the base.\n * @param {string} path New path.\n * @return {string} Updated URI.\n */\ngoog.uri.utils.setPath = function(uri, path) {\n  // Add any missing '/'.\n  if (!goog.string.startsWith(path, '/')) {\n    path = '/' + path;\n  }\n  var parts = goog.uri.utils.split(uri);\n  return goog.uri.utils.buildFromEncodedParts(\n      parts[goog.uri.utils.ComponentIndex.SCHEME],\n      parts[goog.uri.utils.ComponentIndex.USER_INFO],\n      parts[goog.uri.utils.ComponentIndex.DOMAIN],\n      parts[goog.uri.utils.ComponentIndex.PORT], path,\n      parts[goog.uri.utils.ComponentIndex.QUERY_DATA],\n      parts[goog.uri.utils.ComponentIndex.FRAGMENT]);\n};\n\n\n/**\n * Standard supported query parameters.\n * @enum {string}\n */\ngoog.uri.utils.StandardQueryParam = {\n\n  /** Unused parameter for unique-ifying. */\n  RANDOM: 'zx'\n};\n\n\n/**\n * Sets the zx parameter of a URI to a random value.\n * @param {string} uri Any URI.\n * @return {string} That URI with the \"zx\" parameter added or replaced to\n *     contain a random string.\n */\ngoog.uri.utils.makeUnique = function(uri) {\n  return goog.uri.utils.setParam(\n      uri, goog.uri.utils.StandardQueryParam.RANDOM,\n      goog.string.getRandomString());\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Class for parsing and formatting URIs.\n *\n * Use goog.Uri(string) to parse a URI string.  Use goog.Uri.create(...) to\n * create a new instance of the goog.Uri object from Uri parts.\n *\n * e.g: <code>var myUri = new goog.Uri(window.location);</code>\n *\n * Implements RFC 3986 for parsing/formatting URIs.\n * http://www.ietf.org/rfc/rfc3986.txt\n *\n * Some changes have been made to the interface (more like .NETs), though the\n * internal representation is now of un-encoded parts, this will change the\n * behavior slightly.\n *\n * @author msamuel@google.com (Mike Samuel)\n */\n\ngoog.provide('goog.Uri');\ngoog.provide('goog.Uri.QueryData');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.string');\ngoog.require('goog.structs');\ngoog.require('goog.structs.Map');\ngoog.require('goog.uri.utils');\ngoog.require('goog.uri.utils.ComponentIndex');\ngoog.require('goog.uri.utils.StandardQueryParam');\n\n\n\n/**\n * This class contains setters and getters for the parts of the URI.\n * The <code>getXyz</code>/<code>setXyz</code> methods return the decoded part\n * -- so<code>goog.Uri.parse('/foo%20bar').getPath()</code> will return the\n * decoded path, <code>/foo bar</code>.\n *\n * Reserved characters (see RFC 3986 section 2.2) can be present in\n * their percent-encoded form in scheme, domain, and path URI components and\n * will not be auto-decoded. For example:\n * <code>goog.Uri.parse('rel%61tive/path%2fto/resource').getPath()</code> will\n * return <code>relative/path%2fto/resource</code>.\n *\n * The constructor accepts an optional unparsed, raw URI string.  The parser\n * is relaxed, so special characters that aren't escaped but don't cause\n * ambiguities will not cause parse failures.\n *\n * All setters return <code>this</code> and so may be chained, a la\n * <code>goog.Uri.parse('/foo').setFragment('part').toString()</code>.\n *\n * @param {*=} opt_uri Optional string URI to parse\n *        (use goog.Uri.create() to create a URI from parts), or if\n *        a goog.Uri is passed, a clone is created.\n * @param {boolean=} opt_ignoreCase If true, #getParameterValue will ignore\n * the case of the parameter name.\n *\n * @throws URIError If opt_uri is provided and URI is malformed (that is,\n *     if decodeURIComponent fails on any of the URI components).\n * @constructor\n * @struct\n */\ngoog.Uri = function(opt_uri, opt_ignoreCase) {\n  /**\n   * Scheme such as \"http\".\n   * @private {string}\n   */\n  this.scheme_ = '';\n\n  /**\n   * User credentials in the form \"username:password\".\n   * @private {string}\n   */\n  this.userInfo_ = '';\n\n  /**\n   * Domain part, e.g. \"www.google.com\".\n   * @private {string}\n   */\n  this.domain_ = '';\n\n  /**\n   * Port, e.g. 8080.\n   * @private {?number}\n   */\n  this.port_ = null;\n\n  /**\n   * Path, e.g. \"/tests/img.png\".\n   * @private {string}\n   */\n  this.path_ = '';\n\n  /**\n   * The fragment without the #.\n   * @private {string}\n   */\n  this.fragment_ = '';\n\n  /**\n   * Whether or not this Uri should be treated as Read Only.\n   * @private {boolean}\n   */\n  this.isReadOnly_ = false;\n\n  /**\n   * Whether or not to ignore case when comparing query params.\n   * @private {boolean}\n   */\n  this.ignoreCase_ = false;\n\n  /**\n   * Object representing query data.\n   * @private {!goog.Uri.QueryData}\n   */\n  this.queryData_;\n\n  // Parse in the uri string\n  var m;\n  if (opt_uri instanceof goog.Uri) {\n    this.ignoreCase_ =\n        goog.isDef(opt_ignoreCase) ? opt_ignoreCase : opt_uri.getIgnoreCase();\n    this.setScheme(opt_uri.getScheme());\n    this.setUserInfo(opt_uri.getUserInfo());\n    this.setDomain(opt_uri.getDomain());\n    this.setPort(opt_uri.getPort());\n    this.setPath(opt_uri.getPath());\n    this.setQueryData(opt_uri.getQueryData().clone());\n    this.setFragment(opt_uri.getFragment());\n  } else if (opt_uri && (m = goog.uri.utils.split(String(opt_uri)))) {\n    this.ignoreCase_ = !!opt_ignoreCase;\n\n    // Set the parts -- decoding as we do so.\n    // COMPATIBILITY NOTE - In IE, unmatched fields may be empty strings,\n    // whereas in other browsers they will be undefined.\n    this.setScheme(m[goog.uri.utils.ComponentIndex.SCHEME] || '', true);\n    this.setUserInfo(m[goog.uri.utils.ComponentIndex.USER_INFO] || '', true);\n    this.setDomain(m[goog.uri.utils.ComponentIndex.DOMAIN] || '', true);\n    this.setPort(m[goog.uri.utils.ComponentIndex.PORT]);\n    this.setPath(m[goog.uri.utils.ComponentIndex.PATH] || '', true);\n    this.setQueryData(m[goog.uri.utils.ComponentIndex.QUERY_DATA] || '', true);\n    this.setFragment(m[goog.uri.utils.ComponentIndex.FRAGMENT] || '', true);\n\n  } else {\n    this.ignoreCase_ = !!opt_ignoreCase;\n    this.queryData_ = new goog.Uri.QueryData(null, null, this.ignoreCase_);\n  }\n};\n\n\n/**\n * Parameter name added to stop caching.\n * @type {string}\n */\ngoog.Uri.RANDOM_PARAM = goog.uri.utils.StandardQueryParam.RANDOM;\n\n\n/**\n * @return {string} The string form of the url.\n * @override\n */\ngoog.Uri.prototype.toString = function() {\n  var out = [];\n\n  var scheme = this.getScheme();\n  if (scheme) {\n    out.push(\n        goog.Uri.encodeSpecialChars_(\n            scheme, goog.Uri.reDisallowedInSchemeOrUserInfo_, true),\n        ':');\n  }\n\n  var domain = this.getDomain();\n  if (domain || scheme == 'file') {\n    out.push('//');\n\n    var userInfo = this.getUserInfo();\n    if (userInfo) {\n      out.push(\n          goog.Uri.encodeSpecialChars_(\n              userInfo, goog.Uri.reDisallowedInSchemeOrUserInfo_, true),\n          '@');\n    }\n\n    out.push(goog.Uri.removeDoubleEncoding_(goog.string.urlEncode(domain)));\n\n    var port = this.getPort();\n    if (port != null) {\n      out.push(':', String(port));\n    }\n  }\n\n  var path = this.getPath();\n  if (path) {\n    if (this.hasDomain() && path.charAt(0) != '/') {\n      out.push('/');\n    }\n    out.push(\n        goog.Uri.encodeSpecialChars_(\n            path, path.charAt(0) == '/' ? goog.Uri.reDisallowedInAbsolutePath_ :\n                                          goog.Uri.reDisallowedInRelativePath_,\n            true));\n  }\n\n  var query = this.getEncodedQuery();\n  if (query) {\n    out.push('?', query);\n  }\n\n  var fragment = this.getFragment();\n  if (fragment) {\n    out.push(\n        '#', goog.Uri.encodeSpecialChars_(\n                 fragment, goog.Uri.reDisallowedInFragment_));\n  }\n  return out.join('');\n};\n\n\n/**\n * Resolves the given relative URI (a goog.Uri object), using the URI\n * represented by this instance as the base URI.\n *\n * There are several kinds of relative URIs:<br>\n * 1. foo - replaces the last part of the path, the whole query and fragment<br>\n * 2. /foo - replaces the the path, the query and fragment<br>\n * 3. //foo - replaces everything from the domain on.  foo is a domain name<br>\n * 4. ?foo - replace the query and fragment<br>\n * 5. #foo - replace the fragment only\n *\n * Additionally, if relative URI has a non-empty path, all \"..\" and \".\"\n * segments will be resolved, as described in RFC 3986.\n *\n * @param {!goog.Uri} relativeUri The relative URI to resolve.\n * @return {!goog.Uri} The resolved URI.\n */\ngoog.Uri.prototype.resolve = function(relativeUri) {\n\n  var absoluteUri = this.clone();\n\n  // we satisfy these conditions by looking for the first part of relativeUri\n  // that is not blank and applying defaults to the rest\n\n  var overridden = relativeUri.hasScheme();\n\n  if (overridden) {\n    absoluteUri.setScheme(relativeUri.getScheme());\n  } else {\n    overridden = relativeUri.hasUserInfo();\n  }\n\n  if (overridden) {\n    absoluteUri.setUserInfo(relativeUri.getUserInfo());\n  } else {\n    overridden = relativeUri.hasDomain();\n  }\n\n  if (overridden) {\n    absoluteUri.setDomain(relativeUri.getDomain());\n  } else {\n    overridden = relativeUri.hasPort();\n  }\n\n  var path = relativeUri.getPath();\n  if (overridden) {\n    absoluteUri.setPort(relativeUri.getPort());\n  } else {\n    overridden = relativeUri.hasPath();\n    if (overridden) {\n      // resolve path properly\n      if (path.charAt(0) != '/') {\n        // path is relative\n        if (this.hasDomain() && !this.hasPath()) {\n          // RFC 3986, section 5.2.3, case 1\n          path = '/' + path;\n        } else {\n          // RFC 3986, section 5.2.3, case 2\n          var lastSlashIndex = absoluteUri.getPath().lastIndexOf('/');\n          if (lastSlashIndex != -1) {\n            path = absoluteUri.getPath().substr(0, lastSlashIndex + 1) + path;\n          }\n        }\n      }\n      path = goog.Uri.removeDotSegments(path);\n    }\n  }\n\n  if (overridden) {\n    absoluteUri.setPath(path);\n  } else {\n    overridden = relativeUri.hasQuery();\n  }\n\n  if (overridden) {\n    absoluteUri.setQueryData(relativeUri.getQueryData().clone());\n  } else {\n    overridden = relativeUri.hasFragment();\n  }\n\n  if (overridden) {\n    absoluteUri.setFragment(relativeUri.getFragment());\n  }\n\n  return absoluteUri;\n};\n\n\n/**\n * Clones the URI instance.\n * @return {!goog.Uri} New instance of the URI object.\n */\ngoog.Uri.prototype.clone = function() {\n  return new goog.Uri(this);\n};\n\n\n/**\n * @return {string} The encoded scheme/protocol for the URI.\n */\ngoog.Uri.prototype.getScheme = function() {\n  return this.scheme_;\n};\n\n\n/**\n * Sets the scheme/protocol.\n * @throws URIError If opt_decode is true and newScheme is malformed (that is,\n *     if decodeURIComponent fails).\n * @param {string} newScheme New scheme value.\n * @param {boolean=} opt_decode Optional param for whether to decode new value.\n * @return {!goog.Uri} Reference to this URI object.\n */\ngoog.Uri.prototype.setScheme = function(newScheme, opt_decode) {\n  this.enforceReadOnly();\n  this.scheme_ =\n      opt_decode ? goog.Uri.decodeOrEmpty_(newScheme, true) : newScheme;\n\n  // remove an : at the end of the scheme so somebody can pass in\n  // window.location.protocol\n  if (this.scheme_) {\n    this.scheme_ = this.scheme_.replace(/:$/, '');\n  }\n  return this;\n};\n\n\n/**\n * @return {boolean} Whether the scheme has been set.\n */\ngoog.Uri.prototype.hasScheme = function() {\n  return !!this.scheme_;\n};\n\n\n/**\n * @return {string} The decoded user info.\n */\ngoog.Uri.prototype.getUserInfo = function() {\n  return this.userInfo_;\n};\n\n\n/**\n * Sets the userInfo.\n * @throws URIError If opt_decode is true and newUserInfo is malformed (that is,\n *     if decodeURIComponent fails).\n * @param {string} newUserInfo New userInfo value.\n * @param {boolean=} opt_decode Optional param for whether to decode new value.\n * @return {!goog.Uri} Reference to this URI object.\n */\ngoog.Uri.prototype.setUserInfo = function(newUserInfo, opt_decode) {\n  this.enforceReadOnly();\n  this.userInfo_ =\n      opt_decode ? goog.Uri.decodeOrEmpty_(newUserInfo) : newUserInfo;\n  return this;\n};\n\n\n/**\n * @return {boolean} Whether the user info has been set.\n */\ngoog.Uri.prototype.hasUserInfo = function() {\n  return !!this.userInfo_;\n};\n\n\n/**\n * @return {string} The decoded domain.\n */\ngoog.Uri.prototype.getDomain = function() {\n  return this.domain_;\n};\n\n\n/**\n * Sets the domain.\n * @throws URIError If opt_decode is true and newDomain is malformed (that is,\n *     if decodeURIComponent fails).\n * @param {string} newDomain New domain value.\n * @param {boolean=} opt_decode Optional param for whether to decode new value.\n * @return {!goog.Uri} Reference to this URI object.\n */\ngoog.Uri.prototype.setDomain = function(newDomain, opt_decode) {\n  this.enforceReadOnly();\n  this.domain_ =\n      opt_decode ? goog.Uri.decodeOrEmpty_(newDomain, true) : newDomain;\n  return this;\n};\n\n\n/**\n * @return {boolean} Whether the domain has been set.\n */\ngoog.Uri.prototype.hasDomain = function() {\n  return !!this.domain_;\n};\n\n\n/**\n * @return {?number} The port number.\n */\ngoog.Uri.prototype.getPort = function() {\n  return this.port_;\n};\n\n\n/**\n * Sets the port number.\n * @param {*} newPort Port number. Will be explicitly casted to a number.\n * @return {!goog.Uri} Reference to this URI object.\n */\ngoog.Uri.prototype.setPort = function(newPort) {\n  this.enforceReadOnly();\n\n  if (newPort) {\n    newPort = Number(newPort);\n    if (isNaN(newPort) || newPort < 0) {\n      throw new Error('Bad port number ' + newPort);\n    }\n    this.port_ = newPort;\n  } else {\n    this.port_ = null;\n  }\n\n  return this;\n};\n\n\n/**\n * @return {boolean} Whether the port has been set.\n */\ngoog.Uri.prototype.hasPort = function() {\n  return this.port_ != null;\n};\n\n\n/**\n  * @return {string} The decoded path.\n */\ngoog.Uri.prototype.getPath = function() {\n  return this.path_;\n};\n\n\n/**\n * Sets the path.\n * @throws URIError If opt_decode is true and newPath is malformed (that is,\n *     if decodeURIComponent fails).\n * @param {string} newPath New path value.\n * @param {boolean=} opt_decode Optional param for whether to decode new value.\n * @return {!goog.Uri} Reference to this URI object.\n */\ngoog.Uri.prototype.setPath = function(newPath, opt_decode) {\n  this.enforceReadOnly();\n  this.path_ = opt_decode ? goog.Uri.decodeOrEmpty_(newPath, true) : newPath;\n  return this;\n};\n\n\n/**\n * @return {boolean} Whether the path has been set.\n */\ngoog.Uri.prototype.hasPath = function() {\n  return !!this.path_;\n};\n\n\n/**\n * @return {boolean} Whether the query string has been set.\n */\ngoog.Uri.prototype.hasQuery = function() {\n  return this.queryData_.toString() !== '';\n};\n\n\n/**\n * Sets the query data.\n * @param {goog.Uri.QueryData|string|undefined} queryData QueryData object.\n * @param {boolean=} opt_decode Optional param for whether to decode new value.\n *     Applies only if queryData is a string.\n * @return {!goog.Uri} Reference to this URI object.\n */\ngoog.Uri.prototype.setQueryData = function(queryData, opt_decode) {\n  this.enforceReadOnly();\n\n  if (queryData instanceof goog.Uri.QueryData) {\n    this.queryData_ = queryData;\n    this.queryData_.setIgnoreCase(this.ignoreCase_);\n  } else {\n    if (!opt_decode) {\n      // QueryData accepts encoded query string, so encode it if\n      // opt_decode flag is not true.\n      queryData = goog.Uri.encodeSpecialChars_(\n          queryData, goog.Uri.reDisallowedInQuery_);\n    }\n    this.queryData_ = new goog.Uri.QueryData(queryData, null, this.ignoreCase_);\n  }\n\n  return this;\n};\n\n\n/**\n * Sets the URI query.\n * @param {string} newQuery New query value.\n * @param {boolean=} opt_decode Optional param for whether to decode new value.\n * @return {!goog.Uri} Reference to this URI object.\n */\ngoog.Uri.prototype.setQuery = function(newQuery, opt_decode) {\n  return this.setQueryData(newQuery, opt_decode);\n};\n\n\n/**\n * @return {string} The encoded URI query, not including the ?.\n */\ngoog.Uri.prototype.getEncodedQuery = function() {\n  return this.queryData_.toString();\n};\n\n\n/**\n * @return {string} The decoded URI query, not including the ?.\n */\ngoog.Uri.prototype.getDecodedQuery = function() {\n  return this.queryData_.toDecodedString();\n};\n\n\n/**\n * Returns the query data.\n * @return {!goog.Uri.QueryData} QueryData object.\n */\ngoog.Uri.prototype.getQueryData = function() {\n  return this.queryData_;\n};\n\n\n/**\n * @return {string} The encoded URI query, not including the ?.\n *\n * Warning: This method, unlike other getter methods, returns encoded\n * value, instead of decoded one.\n */\ngoog.Uri.prototype.getQuery = function() {\n  return this.getEncodedQuery();\n};\n\n\n/**\n * Sets the value of the named query parameters, clearing previous values for\n * that key.\n *\n * @param {string} key The parameter to set.\n * @param {*} value The new value.\n * @return {!goog.Uri} Reference to this URI object.\n */\ngoog.Uri.prototype.setParameterValue = function(key, value) {\n  this.enforceReadOnly();\n  this.queryData_.set(key, value);\n  return this;\n};\n\n\n/**\n * Sets the values of the named query parameters, clearing previous values for\n * that key.  Not new values will currently be moved to the end of the query\n * string.\n *\n * So, <code>goog.Uri.parse('foo?a=b&c=d&e=f').setParameterValues('c', ['new'])\n * </code> yields <tt>foo?a=b&e=f&c=new</tt>.</p>\n *\n * @param {string} key The parameter to set.\n * @param {*} values The new values. If values is a single\n *     string then it will be treated as the sole value.\n * @return {!goog.Uri} Reference to this URI object.\n */\ngoog.Uri.prototype.setParameterValues = function(key, values) {\n  this.enforceReadOnly();\n\n  if (!goog.isArray(values)) {\n    values = [String(values)];\n  }\n\n  this.queryData_.setValues(key, values);\n\n  return this;\n};\n\n\n/**\n * Returns the value<b>s</b> for a given cgi parameter as a list of decoded\n * query parameter values.\n * @param {string} name The parameter to get values for.\n * @return {!Array<?>} The values for a given cgi parameter as a list of\n *     decoded query parameter values.\n */\ngoog.Uri.prototype.getParameterValues = function(name) {\n  return this.queryData_.getValues(name);\n};\n\n\n/**\n * Returns the first value for a given cgi parameter or undefined if the given\n * parameter name does not appear in the query string.\n * @param {string} paramName Unescaped parameter name.\n * @return {string|undefined} The first value for a given cgi parameter or\n *     undefined if the given parameter name does not appear in the query\n *     string.\n */\ngoog.Uri.prototype.getParameterValue = function(paramName) {\n  return /** @type {string|undefined} */ (this.queryData_.get(paramName));\n};\n\n\n/**\n * @return {string} The URI fragment, not including the #.\n */\ngoog.Uri.prototype.getFragment = function() {\n  return this.fragment_;\n};\n\n\n/**\n * Sets the URI fragment.\n * @throws URIError If opt_decode is true and newFragment is malformed (that is,\n *     if decodeURIComponent fails).\n * @param {string} newFragment New fragment value.\n * @param {boolean=} opt_decode Optional param for whether to decode new value.\n * @return {!goog.Uri} Reference to this URI object.\n */\ngoog.Uri.prototype.setFragment = function(newFragment, opt_decode) {\n  this.enforceReadOnly();\n  this.fragment_ =\n      opt_decode ? goog.Uri.decodeOrEmpty_(newFragment) : newFragment;\n  return this;\n};\n\n\n/**\n * @return {boolean} Whether the URI has a fragment set.\n */\ngoog.Uri.prototype.hasFragment = function() {\n  return !!this.fragment_;\n};\n\n\n/**\n * Returns true if this has the same domain as that of uri2.\n * @param {!goog.Uri} uri2 The URI object to compare to.\n * @return {boolean} true if same domain; false otherwise.\n */\ngoog.Uri.prototype.hasSameDomainAs = function(uri2) {\n  return ((!this.hasDomain() && !uri2.hasDomain()) ||\n          this.getDomain() == uri2.getDomain()) &&\n      ((!this.hasPort() && !uri2.hasPort()) ||\n       this.getPort() == uri2.getPort());\n};\n\n\n/**\n * Adds a random parameter to the Uri.\n * @return {!goog.Uri} Reference to this Uri object.\n */\ngoog.Uri.prototype.makeUnique = function() {\n  this.enforceReadOnly();\n  this.setParameterValue(goog.Uri.RANDOM_PARAM, goog.string.getRandomString());\n\n  return this;\n};\n\n\n/**\n * Removes the named query parameter.\n *\n * @param {string} key The parameter to remove.\n * @return {!goog.Uri} Reference to this URI object.\n */\ngoog.Uri.prototype.removeParameter = function(key) {\n  this.enforceReadOnly();\n  this.queryData_.remove(key);\n  return this;\n};\n\n\n/**\n * Sets whether Uri is read only. If this goog.Uri is read-only,\n * enforceReadOnly_ will be called at the start of any function that may modify\n * this Uri.\n * @param {boolean} isReadOnly whether this goog.Uri should be read only.\n * @return {!goog.Uri} Reference to this Uri object.\n */\ngoog.Uri.prototype.setReadOnly = function(isReadOnly) {\n  this.isReadOnly_ = isReadOnly;\n  return this;\n};\n\n\n/**\n * @return {boolean} Whether the URI is read only.\n */\ngoog.Uri.prototype.isReadOnly = function() {\n  return this.isReadOnly_;\n};\n\n\n/**\n * Checks if this Uri has been marked as read only, and if so, throws an error.\n * This should be called whenever any modifying function is called.\n */\ngoog.Uri.prototype.enforceReadOnly = function() {\n  if (this.isReadOnly_) {\n    throw new Error('Tried to modify a read-only Uri');\n  }\n};\n\n\n/**\n * Sets whether to ignore case.\n * NOTE: If there are already key/value pairs in the QueryData, and\n * ignoreCase_ is set to false, the keys will all be lower-cased.\n * @param {boolean} ignoreCase whether this goog.Uri should ignore case.\n * @return {!goog.Uri} Reference to this Uri object.\n */\ngoog.Uri.prototype.setIgnoreCase = function(ignoreCase) {\n  this.ignoreCase_ = ignoreCase;\n  if (this.queryData_) {\n    this.queryData_.setIgnoreCase(ignoreCase);\n  }\n  return this;\n};\n\n\n/**\n * @return {boolean} Whether to ignore case.\n */\ngoog.Uri.prototype.getIgnoreCase = function() {\n  return this.ignoreCase_;\n};\n\n\n//==============================================================================\n// Static members\n//==============================================================================\n\n\n/**\n * Creates a uri from the string form.  Basically an alias of new goog.Uri().\n * If a Uri object is passed to parse then it will return a clone of the object.\n *\n * @throws URIError If parsing the URI is malformed. The passed URI components\n *     should all be parseable by decodeURIComponent.\n * @param {*} uri Raw URI string or instance of Uri\n *     object.\n * @param {boolean=} opt_ignoreCase Whether to ignore the case of parameter\n * names in #getParameterValue.\n * @return {!goog.Uri} The new URI object.\n */\ngoog.Uri.parse = function(uri, opt_ignoreCase) {\n  return uri instanceof goog.Uri ? uri.clone() :\n                                   new goog.Uri(uri, opt_ignoreCase);\n};\n\n\n/**\n * Creates a new goog.Uri object from unencoded parts.\n *\n * @param {?string=} opt_scheme Scheme/protocol or full URI to parse.\n * @param {?string=} opt_userInfo username:password.\n * @param {?string=} opt_domain www.google.com.\n * @param {?number=} opt_port 9830.\n * @param {?string=} opt_path /some/path/to/a/file.html.\n * @param {string|goog.Uri.QueryData=} opt_query a=1&b=2.\n * @param {?string=} opt_fragment The fragment without the #.\n * @param {boolean=} opt_ignoreCase Whether to ignore parameter name case in\n *     #getParameterValue.\n *\n * @return {!goog.Uri} The new URI object.\n */\ngoog.Uri.create = function(\n    opt_scheme, opt_userInfo, opt_domain, opt_port, opt_path, opt_query,\n    opt_fragment, opt_ignoreCase) {\n\n  var uri = new goog.Uri(null, opt_ignoreCase);\n\n  // Only set the parts if they are defined and not empty strings.\n  opt_scheme && uri.setScheme(opt_scheme);\n  opt_userInfo && uri.setUserInfo(opt_userInfo);\n  opt_domain && uri.setDomain(opt_domain);\n  opt_port && uri.setPort(opt_port);\n  opt_path && uri.setPath(opt_path);\n  opt_query && uri.setQueryData(opt_query);\n  opt_fragment && uri.setFragment(opt_fragment);\n\n  return uri;\n};\n\n\n/**\n * Resolves a relative Uri against a base Uri, accepting both strings and\n * Uri objects.\n *\n * @param {*} base Base Uri.\n * @param {*} rel Relative Uri.\n * @return {!goog.Uri} Resolved uri.\n */\ngoog.Uri.resolve = function(base, rel) {\n  if (!(base instanceof goog.Uri)) {\n    base = goog.Uri.parse(base);\n  }\n\n  if (!(rel instanceof goog.Uri)) {\n    rel = goog.Uri.parse(rel);\n  }\n\n  return base.resolve(rel);\n};\n\n\n/**\n * Removes dot segments in given path component, as described in\n * RFC 3986, section 5.2.4.\n *\n * @param {string} path A non-empty path component.\n * @return {string} Path component with removed dot segments.\n */\ngoog.Uri.removeDotSegments = function(path) {\n  if (path == '..' || path == '.') {\n    return '';\n\n  } else if (\n      !goog.string.contains(path, './') && !goog.string.contains(path, '/.')) {\n    // This optimization detects uris which do not contain dot-segments,\n    // and as a consequence do not require any processing.\n    return path;\n\n  } else {\n    var leadingSlash = goog.string.startsWith(path, '/');\n    var segments = path.split('/');\n    var out = [];\n\n    for (var pos = 0; pos < segments.length;) {\n      var segment = segments[pos++];\n\n      if (segment == '.') {\n        if (leadingSlash && pos == segments.length) {\n          out.push('');\n        }\n      } else if (segment == '..') {\n        if (out.length > 1 || out.length == 1 && out[0] != '') {\n          out.pop();\n        }\n        if (leadingSlash && pos == segments.length) {\n          out.push('');\n        }\n      } else {\n        out.push(segment);\n        leadingSlash = true;\n      }\n    }\n\n    return out.join('/');\n  }\n};\n\n\n/**\n * Decodes a value or returns the empty string if it isn't defined or empty.\n * @throws URIError If decodeURIComponent fails to decode val.\n * @param {string|undefined} val Value to decode.\n * @param {boolean=} opt_preserveReserved If true, restricted characters will\n *     not be decoded.\n * @return {string} Decoded value.\n * @private\n */\ngoog.Uri.decodeOrEmpty_ = function(val, opt_preserveReserved) {\n  // Don't use UrlDecode() here because val is not a query parameter.\n  if (!val) {\n    return '';\n  }\n\n  // decodeURI has the same output for '%2f' and '%252f'. We double encode %25\n  // so that we can distinguish between the 2 inputs. This is later undone by\n  // removeDoubleEncoding_.\n  return opt_preserveReserved ? decodeURI(val.replace(/%25/g, '%2525')) :\n                                decodeURIComponent(val);\n};\n\n\n/**\n * If unescapedPart is non null, then escapes any characters in it that aren't\n * valid characters in a url and also escapes any special characters that\n * appear in extra.\n *\n * @param {*} unescapedPart The string to encode.\n * @param {RegExp} extra A character set of characters in [\\01-\\177].\n * @param {boolean=} opt_removeDoubleEncoding If true, remove double percent\n *     encoding.\n * @return {?string} null iff unescapedPart == null.\n * @private\n */\ngoog.Uri.encodeSpecialChars_ = function(\n    unescapedPart, extra, opt_removeDoubleEncoding) {\n  if (goog.isString(unescapedPart)) {\n    var encoded = encodeURI(unescapedPart).replace(extra, goog.Uri.encodeChar_);\n    if (opt_removeDoubleEncoding) {\n      // encodeURI double-escapes %XX sequences used to represent restricted\n      // characters in some URI components, remove the double escaping here.\n      encoded = goog.Uri.removeDoubleEncoding_(encoded);\n    }\n    return encoded;\n  }\n  return null;\n};\n\n\n/**\n * Converts a character in [\\01-\\177] to its unicode character equivalent.\n * @param {string} ch One character string.\n * @return {string} Encoded string.\n * @private\n */\ngoog.Uri.encodeChar_ = function(ch) {\n  var n = ch.charCodeAt(0);\n  return '%' + ((n >> 4) & 0xf).toString(16) + (n & 0xf).toString(16);\n};\n\n\n/**\n * Removes double percent-encoding from a string.\n * @param  {string} doubleEncodedString String\n * @return {string} String with double encoding removed.\n * @private\n */\ngoog.Uri.removeDoubleEncoding_ = function(doubleEncodedString) {\n  return doubleEncodedString.replace(/%25([0-9a-fA-F]{2})/g, '%$1');\n};\n\n\n/**\n * Regular expression for characters that are disallowed in the scheme or\n * userInfo part of the URI.\n * @type {RegExp}\n * @private\n */\ngoog.Uri.reDisallowedInSchemeOrUserInfo_ = /[#\\/\\?@]/g;\n\n\n/**\n * Regular expression for characters that are disallowed in a relative path.\n * Colon is included due to RFC 3986 3.3.\n * @type {RegExp}\n * @private\n */\ngoog.Uri.reDisallowedInRelativePath_ = /[\\#\\?:]/g;\n\n\n/**\n * Regular expression for characters that are disallowed in an absolute path.\n * @type {RegExp}\n * @private\n */\ngoog.Uri.reDisallowedInAbsolutePath_ = /[\\#\\?]/g;\n\n\n/**\n * Regular expression for characters that are disallowed in the query.\n * @type {RegExp}\n * @private\n */\ngoog.Uri.reDisallowedInQuery_ = /[\\#\\?@]/g;\n\n\n/**\n * Regular expression for characters that are disallowed in the fragment.\n * @type {RegExp}\n * @private\n */\ngoog.Uri.reDisallowedInFragment_ = /#/g;\n\n\n/**\n * Checks whether two URIs have the same domain.\n * @param {string} uri1String First URI string.\n * @param {string} uri2String Second URI string.\n * @return {boolean} true if the two URIs have the same domain; false otherwise.\n */\ngoog.Uri.haveSameDomain = function(uri1String, uri2String) {\n  // Differs from goog.uri.utils.haveSameDomain, since this ignores scheme.\n  // TODO(gboyer): Have this just call goog.uri.util.haveSameDomain.\n  var pieces1 = goog.uri.utils.split(uri1String);\n  var pieces2 = goog.uri.utils.split(uri2String);\n  return pieces1[goog.uri.utils.ComponentIndex.DOMAIN] ==\n      pieces2[goog.uri.utils.ComponentIndex.DOMAIN] &&\n      pieces1[goog.uri.utils.ComponentIndex.PORT] ==\n      pieces2[goog.uri.utils.ComponentIndex.PORT];\n};\n\n\n\n/**\n * Class used to represent URI query parameters.  It is essentially a hash of\n * name-value pairs, though a name can be present more than once.\n *\n * Has the same interface as the collections in goog.structs.\n *\n * @param {?string=} opt_query Optional encoded query string to parse into\n *     the object.\n * @param {goog.Uri=} opt_uri Optional uri object that should have its\n *     cache invalidated when this object updates. Deprecated -- this\n *     is no longer required.\n * @param {boolean=} opt_ignoreCase If true, ignore the case of the parameter\n *     name in #get.\n * @constructor\n * @struct\n * @final\n */\ngoog.Uri.QueryData = function(opt_query, opt_uri, opt_ignoreCase) {\n  /**\n   * The map containing name/value or name/array-of-values pairs.\n   * May be null if it requires parsing from the query string.\n   *\n   * We need to use a Map because we cannot guarantee that the key names will\n   * not be problematic for IE.\n   *\n   * @private {goog.structs.Map<string, !Array<*>>}\n   */\n  this.keyMap_ = null;\n\n  /**\n   * The number of params, or null if it requires computing.\n   * @private {?number}\n   */\n  this.count_ = null;\n\n  /**\n   * Encoded query string, or null if it requires computing from the key map.\n   * @private {?string}\n   */\n  this.encodedQuery_ = opt_query || null;\n\n  /**\n   * If true, ignore the case of the parameter name in #get.\n   * @private {boolean}\n   */\n  this.ignoreCase_ = !!opt_ignoreCase;\n};\n\n\n/**\n * If the underlying key map is not yet initialized, it parses the\n * query string and fills the map with parsed data.\n * @private\n */\ngoog.Uri.QueryData.prototype.ensureKeyMapInitialized_ = function() {\n  if (!this.keyMap_) {\n    this.keyMap_ = new goog.structs.Map();\n    this.count_ = 0;\n    if (this.encodedQuery_) {\n      var self = this;\n      goog.uri.utils.parseQueryData(this.encodedQuery_, function(name, value) {\n        self.add(goog.string.urlDecode(name), value);\n      });\n    }\n  }\n};\n\n\n/**\n * Creates a new query data instance from a map of names and values.\n *\n * @param {!goog.structs.Map<string, ?>|!Object} map Map of string parameter\n *     names to parameter value. If parameter value is an array, it is\n *     treated as if the key maps to each individual value in the\n *     array.\n * @param {goog.Uri=} opt_uri URI object that should have its cache\n *     invalidated when this object updates.\n * @param {boolean=} opt_ignoreCase If true, ignore the case of the parameter\n *     name in #get.\n * @return {!goog.Uri.QueryData} The populated query data instance.\n */\ngoog.Uri.QueryData.createFromMap = function(map, opt_uri, opt_ignoreCase) {\n  var keys = goog.structs.getKeys(map);\n  if (typeof keys == 'undefined') {\n    throw new Error('Keys are undefined');\n  }\n\n  var queryData = new goog.Uri.QueryData(null, null, opt_ignoreCase);\n  var values = goog.structs.getValues(map);\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var value = values[i];\n    if (!goog.isArray(value)) {\n      queryData.add(key, value);\n    } else {\n      queryData.setValues(key, value);\n    }\n  }\n  return queryData;\n};\n\n\n/**\n * Creates a new query data instance from parallel arrays of parameter names\n * and values. Allows for duplicate parameter names. Throws an error if the\n * lengths of the arrays differ.\n *\n * @param {!Array<string>} keys Parameter names.\n * @param {!Array<?>} values Parameter values.\n * @param {goog.Uri=} opt_uri URI object that should have its cache\n *     invalidated when this object updates.\n * @param {boolean=} opt_ignoreCase If true, ignore the case of the parameter\n *     name in #get.\n * @return {!goog.Uri.QueryData} The populated query data instance.\n */\ngoog.Uri.QueryData.createFromKeysValues = function(\n    keys, values, opt_uri, opt_ignoreCase) {\n  if (keys.length != values.length) {\n    throw new Error('Mismatched lengths for keys/values');\n  }\n  var queryData = new goog.Uri.QueryData(null, null, opt_ignoreCase);\n  for (var i = 0; i < keys.length; i++) {\n    queryData.add(keys[i], values[i]);\n  }\n  return queryData;\n};\n\n\n/**\n * @return {?number} The number of parameters.\n */\ngoog.Uri.QueryData.prototype.getCount = function() {\n  this.ensureKeyMapInitialized_();\n  return this.count_;\n};\n\n\n/**\n * Adds a key value pair.\n * @param {string} key Name.\n * @param {*} value Value.\n * @return {!goog.Uri.QueryData} Instance of this object.\n */\ngoog.Uri.QueryData.prototype.add = function(key, value) {\n  this.ensureKeyMapInitialized_();\n  this.invalidateCache_();\n\n  key = this.getKeyName_(key);\n  var values = this.keyMap_.get(key);\n  if (!values) {\n    this.keyMap_.set(key, (values = []));\n  }\n  values.push(value);\n  this.count_ = goog.asserts.assertNumber(this.count_) + 1;\n  return this;\n};\n\n\n/**\n * Removes all the params with the given key.\n * @param {string} key Name.\n * @return {boolean} Whether any parameter was removed.\n */\ngoog.Uri.QueryData.prototype.remove = function(key) {\n  this.ensureKeyMapInitialized_();\n\n  key = this.getKeyName_(key);\n  if (this.keyMap_.containsKey(key)) {\n    this.invalidateCache_();\n\n    // Decrement parameter count.\n    this.count_ =\n        goog.asserts.assertNumber(this.count_) - this.keyMap_.get(key).length;\n    return this.keyMap_.remove(key);\n  }\n  return false;\n};\n\n\n/**\n * Clears the parameters.\n */\ngoog.Uri.QueryData.prototype.clear = function() {\n  this.invalidateCache_();\n  this.keyMap_ = null;\n  this.count_ = 0;\n};\n\n\n/**\n * @return {boolean} Whether we have any parameters.\n */\ngoog.Uri.QueryData.prototype.isEmpty = function() {\n  this.ensureKeyMapInitialized_();\n  return this.count_ == 0;\n};\n\n\n/**\n * Whether there is a parameter with the given name\n * @param {string} key The parameter name to check for.\n * @return {boolean} Whether there is a parameter with the given name.\n */\ngoog.Uri.QueryData.prototype.containsKey = function(key) {\n  this.ensureKeyMapInitialized_();\n  key = this.getKeyName_(key);\n  return this.keyMap_.containsKey(key);\n};\n\n\n/**\n * Whether there is a parameter with the given value.\n * @param {*} value The value to check for.\n * @return {boolean} Whether there is a parameter with the given value.\n */\ngoog.Uri.QueryData.prototype.containsValue = function(value) {\n  // NOTE(arv): This solution goes through all the params even if it was the\n  // first param. We can get around this by not reusing code or by switching to\n  // iterators.\n  var vals = this.getValues();\n  return goog.array.contains(vals, value);\n};\n\n\n/**\n * Runs a callback on every key-value pair in the map, including duplicate keys.\n * This won't maintain original order when duplicate keys are interspersed (like\n * getKeys() / getValues()).\n * @param {function(this:SCOPE, ?, string, !goog.Uri.QueryData)} f\n * @param {SCOPE=} opt_scope The value of \"this\" inside f.\n * @template SCOPE\n */\ngoog.Uri.QueryData.prototype.forEach = function(f, opt_scope) {\n  this.ensureKeyMapInitialized_();\n  this.keyMap_.forEach(function(values, key) {\n    goog.array.forEach(values, function(value) {\n      f.call(opt_scope, value, key, this);\n    }, this);\n  }, this);\n};\n\n\n/**\n * Returns all the keys of the parameters. If a key is used multiple times\n * it will be included multiple times in the returned array\n * @return {!Array<string>} All the keys of the parameters.\n */\ngoog.Uri.QueryData.prototype.getKeys = function() {\n  this.ensureKeyMapInitialized_();\n  // We need to get the values to know how many keys to add.\n  var vals = this.keyMap_.getValues();\n  var keys = this.keyMap_.getKeys();\n  var rv = [];\n  for (var i = 0; i < keys.length; i++) {\n    var val = vals[i];\n    for (var j = 0; j < val.length; j++) {\n      rv.push(keys[i]);\n    }\n  }\n  return rv;\n};\n\n\n/**\n * Returns all the values of the parameters with the given name. If the query\n * data has no such key this will return an empty array. If no key is given\n * all values wil be returned.\n * @param {string=} opt_key The name of the parameter to get the values for.\n * @return {!Array<?>} All the values of the parameters with the given name.\n */\ngoog.Uri.QueryData.prototype.getValues = function(opt_key) {\n  this.ensureKeyMapInitialized_();\n  var rv = [];\n  if (goog.isString(opt_key)) {\n    if (this.containsKey(opt_key)) {\n      rv = goog.array.concat(rv, this.keyMap_.get(this.getKeyName_(opt_key)));\n    }\n  } else {\n    // Return all values.\n    var values = this.keyMap_.getValues();\n    for (var i = 0; i < values.length; i++) {\n      rv = goog.array.concat(rv, values[i]);\n    }\n  }\n  return rv;\n};\n\n\n/**\n * Sets a key value pair and removes all other keys with the same value.\n *\n * @param {string} key Name.\n * @param {*} value Value.\n * @return {!goog.Uri.QueryData} Instance of this object.\n */\ngoog.Uri.QueryData.prototype.set = function(key, value) {\n  this.ensureKeyMapInitialized_();\n  this.invalidateCache_();\n\n  // TODO(chrishenry): This could be better written as\n  // this.remove(key), this.add(key, value), but that would reorder\n  // the key (since the key is first removed and then added at the\n  // end) and we would have to fix unit tests that depend on key\n  // ordering.\n  key = this.getKeyName_(key);\n  if (this.containsKey(key)) {\n    this.count_ =\n        goog.asserts.assertNumber(this.count_) - this.keyMap_.get(key).length;\n  }\n  this.keyMap_.set(key, [value]);\n  this.count_ = goog.asserts.assertNumber(this.count_) + 1;\n  return this;\n};\n\n\n/**\n * Returns the first value associated with the key. If the query data has no\n * such key this will return undefined or the optional default.\n * @param {string} key The name of the parameter to get the value for.\n * @param {*=} opt_default The default value to return if the query data\n *     has no such key.\n * @return {*} The first string value associated with the key, or opt_default\n *     if there's no value.\n */\ngoog.Uri.QueryData.prototype.get = function(key, opt_default) {\n  if (!key) {\n    return opt_default;\n  }\n  var values = this.getValues(key);\n  return values.length > 0 ? String(values[0]) : opt_default;\n};\n\n\n/**\n * Sets the values for a key. If the key already exists, this will\n * override all of the existing values that correspond to the key.\n * @param {string} key The key to set values for.\n * @param {!Array<?>} values The values to set.\n */\ngoog.Uri.QueryData.prototype.setValues = function(key, values) {\n  this.remove(key);\n\n  if (values.length > 0) {\n    this.invalidateCache_();\n    this.keyMap_.set(this.getKeyName_(key), goog.array.clone(values));\n    this.count_ = goog.asserts.assertNumber(this.count_) + values.length;\n  }\n};\n\n\n/**\n * @return {string} Encoded query string.\n * @override\n */\ngoog.Uri.QueryData.prototype.toString = function() {\n  if (this.encodedQuery_) {\n    return this.encodedQuery_;\n  }\n\n  if (!this.keyMap_) {\n    return '';\n  }\n\n  var sb = [];\n\n  // In the past, we use this.getKeys() and this.getVals(), but that\n  // generates a lot of allocations as compared to simply iterating\n  // over the keys.\n  var keys = this.keyMap_.getKeys();\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var encodedKey = goog.string.urlEncode(key);\n    var val = this.getValues(key);\n    for (var j = 0; j < val.length; j++) {\n      var param = encodedKey;\n      // Ensure that null and undefined are encoded into the url as\n      // literal strings.\n      if (val[j] !== '') {\n        param += '=' + goog.string.urlEncode(val[j]);\n      }\n      sb.push(param);\n    }\n  }\n\n  return this.encodedQuery_ = sb.join('&');\n};\n\n\n/**\n * @throws URIError If URI is malformed (that is, if decodeURIComponent fails on\n *     any of the URI components).\n * @return {string} Decoded query string.\n */\ngoog.Uri.QueryData.prototype.toDecodedString = function() {\n  return goog.Uri.decodeOrEmpty_(this.toString());\n};\n\n\n/**\n * Invalidate the cache.\n * @private\n */\ngoog.Uri.QueryData.prototype.invalidateCache_ = function() {\n  this.encodedQuery_ = null;\n};\n\n\n/**\n * Removes all keys that are not in the provided list. (Modifies this object.)\n * @param {Array<string>} keys The desired keys.\n * @return {!goog.Uri.QueryData} a reference to this object.\n */\ngoog.Uri.QueryData.prototype.filterKeys = function(keys) {\n  this.ensureKeyMapInitialized_();\n  this.keyMap_.forEach(function(value, key) {\n    if (!goog.array.contains(keys, key)) {\n      this.remove(key);\n    }\n  }, this);\n  return this;\n};\n\n\n/**\n * Clone the query data instance.\n * @return {!goog.Uri.QueryData} New instance of the QueryData object.\n */\ngoog.Uri.QueryData.prototype.clone = function() {\n  var rv = new goog.Uri.QueryData();\n  rv.encodedQuery_ = this.encodedQuery_;\n  if (this.keyMap_) {\n    rv.keyMap_ = this.keyMap_.clone();\n    rv.count_ = this.count_;\n  }\n  return rv;\n};\n\n\n/**\n * Helper function to get the key name from a JavaScript object. Converts\n * the object to a string, and to lower case if necessary.\n * @private\n * @param {*} arg The object to get a key name from.\n * @return {string} valid key name which can be looked up in #keyMap_.\n */\ngoog.Uri.QueryData.prototype.getKeyName_ = function(arg) {\n  var keyName = String(arg);\n  if (this.ignoreCase_) {\n    keyName = keyName.toLowerCase();\n  }\n  return keyName;\n};\n\n\n/**\n * Ignore case in parameter names.\n * NOTE: If there are already key/value pairs in the QueryData, and\n * ignoreCase_ is set to false, the keys will all be lower-cased.\n * @param {boolean} ignoreCase whether this goog.Uri should ignore case.\n */\ngoog.Uri.QueryData.prototype.setIgnoreCase = function(ignoreCase) {\n  var resetKeys = ignoreCase && !this.ignoreCase_;\n  if (resetKeys) {\n    this.ensureKeyMapInitialized_();\n    this.invalidateCache_();\n    this.keyMap_.forEach(function(value, key) {\n      var lowerCase = key.toLowerCase();\n      if (key != lowerCase) {\n        this.remove(key);\n        this.setValues(lowerCase, value);\n      }\n    }, this);\n  }\n  this.ignoreCase_ = ignoreCase;\n};\n\n\n/**\n * Extends a query data object with another query data or map like object. This\n * operates 'in-place', it does not create a new QueryData object.\n *\n * @param {...(?goog.Uri.QueryData|?goog.structs.Map<?, ?>|?Object)} var_args\n *     The object from which key value pairs will be copied.\n * @suppress {deprecated} Use deprecated goog.structs.forEach to allow different\n * types of parameters.\n */\ngoog.Uri.QueryData.prototype.extend = function(var_args) {\n  for (var i = 0; i < arguments.length; i++) {\n    var data = arguments[i];\n    goog.structs.forEach(\n        data, function(value, key) { this.add(key, value); }, this);\n  }\n};\n","// Copyright 2012 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Soy data primitives.\n *\n * The goal is to encompass data types used by Soy, especially to mark content\n * as known to be \"safe\".\n *\n * @author gboyer@google.com (Garrett Boyer)\n */\n\ngoog.provide('goog.soy.data.SanitizedContent');\ngoog.provide('goog.soy.data.SanitizedContentKind');\ngoog.provide('goog.soy.data.SanitizedCss');\ngoog.provide('goog.soy.data.SanitizedHtml');\ngoog.provide('goog.soy.data.SanitizedHtmlAttribute');\ngoog.provide('goog.soy.data.SanitizedJs');\ngoog.provide('goog.soy.data.SanitizedStyle');\ngoog.provide('goog.soy.data.SanitizedTrustedResourceUri');\ngoog.provide('goog.soy.data.SanitizedUri');\ngoog.provide('goog.soy.data.UnsanitizedText');\n\ngoog.require('goog.Uri');\ngoog.require('goog.asserts');\ngoog.require('goog.html.SafeHtml');\ngoog.require('goog.html.SafeScript');\ngoog.require('goog.html.SafeStyle');\ngoog.require('goog.html.SafeStyleSheet');\ngoog.require('goog.html.SafeUrl');\ngoog.require('goog.html.TrustedResourceUrl');\ngoog.require('goog.html.uncheckedconversions');\ngoog.require('goog.i18n.bidi.Dir');\ngoog.require('goog.string.Const');\n\n\n/**\n * A type of textual content.\n *\n * This is an enum of type Object so that these values are unforgeable.\n *\n * @enum {!Object}\n */\ngoog.soy.data.SanitizedContentKind = {\n\n  /**\n   * A snippet of HTML that does not start or end inside a tag, comment, entity,\n   * or DOCTYPE; and that does not contain any executable code\n   * (JS, {@code <object>}s, etc.) from a different trust domain.\n   */\n  HTML: goog.DEBUG ? {sanitizedContentKindHtml: true} : {},\n\n  /**\n   * Executable Javascript code or expression, safe for insertion in a\n   * script-tag or event handler context, known to be free of any\n   * attacker-controlled scripts. This can either be side-effect-free\n   * Javascript (such as JSON) or Javascript that's entirely under Google's\n   * control.\n   */\n  JS: goog.DEBUG ? {sanitizedContentJsChars: true} : {},\n\n  /** A properly encoded portion of a URI. */\n  URI: goog.DEBUG ? {sanitizedContentUri: true} : {},\n\n  /** A resource URI not under attacker control. */\n  TRUSTED_RESOURCE_URI:\n      goog.DEBUG ? {sanitizedContentTrustedResourceUri: true} : {},\n\n  /**\n   * Repeated attribute names and values. For example,\n   * {@code dir=\"ltr\" foo=\"bar\" onclick=\"trustedFunction()\" checked}.\n   */\n  ATTRIBUTES: goog.DEBUG ? {sanitizedContentHtmlAttribute: true} : {},\n\n  // TODO: Consider separating rules, declarations, and values into\n  // separate types, but for simplicity, we'll treat explicitly blessed\n  // SanitizedContent as allowed in all of these contexts.\n  /**\n   * A CSS3 declaration, property, value or group of semicolon separated\n   * declarations.\n   */\n  STYLE: goog.DEBUG ? {sanitizedContentStyle: true} : {},\n\n  /** A CSS3 style sheet (list of rules). */\n  CSS: goog.DEBUG ? {sanitizedContentCss: true} : {},\n\n  /**\n   * Unsanitized plain-text content.\n   *\n   * This is effectively the \"null\" entry of this enum, and is sometimes used\n   * to explicitly mark content that should never be used unescaped. Since any\n   * string is safe to use as text, being of ContentKind.TEXT makes no\n   * guarantees about its safety in any other context such as HTML.\n   */\n  TEXT: goog.DEBUG ? {sanitizedContentKindText: true} : {}\n};\n\n\n\n/**\n * A string-like object that carries a content-type and a content direction.\n *\n * IMPORTANT! Do not create these directly, nor instantiate the subclasses.\n * Instead, use a trusted, centrally reviewed library as endorsed by your team\n * to generate these objects. Otherwise, you risk accidentally creating\n * SanitizedContent that is attacker-controlled and gets evaluated unescaped in\n * templates.\n *\n * @constructor\n */\ngoog.soy.data.SanitizedContent = function() {\n  throw new Error('Do not instantiate directly');\n};\n\n\n/**\n * The context in which this content is safe from XSS attacks.\n * @type {goog.soy.data.SanitizedContentKind}\n */\ngoog.soy.data.SanitizedContent.prototype.contentKind;\n\n\n/**\n * The content's direction; null if unknown and thus to be estimated when\n * necessary.\n * @type {?goog.i18n.bidi.Dir}\n */\ngoog.soy.data.SanitizedContent.prototype.contentDir = null;\n\n\n/**\n * The already-safe content.\n * @protected {string}\n */\ngoog.soy.data.SanitizedContent.prototype.content;\n\n\n/**\n * Gets the already-safe content.\n * @return {string}\n */\ngoog.soy.data.SanitizedContent.prototype.getContent = function() {\n  return this.content;\n};\n\n\n/** @override */\ngoog.soy.data.SanitizedContent.prototype.toString = function() {\n  return this.content;\n};\n\n\n/**\n * Converts sanitized content of kind TEXT or HTML into SafeHtml. HTML content\n * is converted without modification, while text content is HTML-escaped.\n * @return {!goog.html.SafeHtml}\n * @throws {Error} when the content kind is not TEXT or HTML.\n */\ngoog.soy.data.SanitizedContent.prototype.toSafeHtml = function() {\n  if (this.contentKind === goog.soy.data.SanitizedContentKind.TEXT) {\n    return goog.html.SafeHtml.htmlEscape(this.toString());\n  }\n  if (this.contentKind !== goog.soy.data.SanitizedContentKind.HTML) {\n    throw new Error('Sanitized content was not of kind TEXT or HTML.');\n  }\n  return goog.html.uncheckedconversions\n      .safeHtmlFromStringKnownToSatisfyTypeContract(\n          goog.string.Const.from(\n              'Soy SanitizedContent of kind HTML produces ' +\n              'SafeHtml-contract-compliant value.'),\n          this.toString(), this.contentDir);\n};\n\n\n/**\n * Converts sanitized content of kind URI into SafeUrl without modification.\n * @return {!goog.html.SafeUrl}\n * @throws {Error} when the content kind is not URI.\n */\ngoog.soy.data.SanitizedContent.prototype.toSafeUrl = function() {\n  if (this.contentKind !== goog.soy.data.SanitizedContentKind.URI) {\n    throw new Error('Sanitized content was not of kind URI.');\n  }\n  return goog.html.uncheckedconversions\n      .safeUrlFromStringKnownToSatisfyTypeContract(\n          goog.string.Const.from(\n              'Soy SanitizedContent of kind URI produces ' +\n              'SafeHtml-contract-compliant value.'),\n          this.toString());\n};\n\n\n/**\n * Unsanitized plain text string.\n *\n * While all strings are effectively safe to use as a plain text, there are no\n * guarantees about safety in any other context such as HTML. This is\n * sometimes used to mark that should never be used unescaped.\n *\n * @param {*} content Plain text with no guarantees.\n * @param {?goog.i18n.bidi.Dir=} opt_contentDir The content direction; null if\n *     unknown and thus to be estimated when necessary. Default: null.\n * @extends {goog.soy.data.SanitizedContent}\n * @constructor\n */\ngoog.soy.data.UnsanitizedText = function(content, opt_contentDir) {\n  // Not calling the superclass constructor which just throws an exception.\n\n  /** @override */\n  this.content = String(content);\n  this.contentDir = opt_contentDir != null ? opt_contentDir : null;\n};\ngoog.inherits(goog.soy.data.UnsanitizedText, goog.soy.data.SanitizedContent);\n\n\n/** @override */\ngoog.soy.data.UnsanitizedText.prototype.contentKind =\n    goog.soy.data.SanitizedContentKind.TEXT;\n\n\n\n/**\n * Content of type {@link goog.soy.data.SanitizedContentKind.HTML}.\n *\n * The content is a string of HTML that can safely be embedded in a PCDATA\n * context in your app.  If you would be surprised to find that an HTML\n * sanitizer produced `s` (e.g.  it runs code or fetches bad URLs) and\n * you wouldn't write a template that produces `s` on security or privacy\n * grounds, then don't pass `s` here. The default content direction is\n * unknown, i.e. to be estimated when necessary.\n *\n * @extends {goog.soy.data.SanitizedContent}\n * @constructor\n */\ngoog.soy.data.SanitizedHtml = function() {\n  goog.soy.data.SanitizedHtml.base(this, 'constructor');\n};\ngoog.inherits(goog.soy.data.SanitizedHtml, goog.soy.data.SanitizedContent);\n\n/** @override */\ngoog.soy.data.SanitizedHtml.prototype.contentKind =\n    goog.soy.data.SanitizedContentKind.HTML;\n\n/**\n * Checks if the value could be used as the Soy type {html}.\n * @param {*} value\n * @return {boolean}\n */\ngoog.soy.data.SanitizedHtml.isCompatibleWith = function(value) {\n  return goog.isString(value) ||\n      value instanceof goog.soy.data.SanitizedHtml ||\n      value instanceof goog.soy.data.UnsanitizedText ||\n      value instanceof goog.html.SafeHtml;\n};\n\n\n\n/**\n * Content of type {@link goog.soy.data.SanitizedContentKind.JS}.\n *\n * The content is JavaScript source that when evaluated does not execute any\n * attacker-controlled scripts. The content direction is LTR.\n *\n * @extends {goog.soy.data.SanitizedContent}\n * @constructor\n */\ngoog.soy.data.SanitizedJs = function() {\n  goog.soy.data.SanitizedJs.base(this, 'constructor');\n};\ngoog.inherits(goog.soy.data.SanitizedJs, goog.soy.data.SanitizedContent);\n\n/** @override */\ngoog.soy.data.SanitizedJs.prototype.contentKind =\n    goog.soy.data.SanitizedContentKind.JS;\n\n/** @override */\ngoog.soy.data.SanitizedJs.prototype.contentDir = goog.i18n.bidi.Dir.LTR;\n\n/**\n * Checks if the value could be used as the Soy type {js}.\n * @param {*} value\n * @return {boolean}\n */\ngoog.soy.data.SanitizedJs.isCompatibleWith = function(value) {\n  return goog.isString(value) ||\n      value instanceof goog.soy.data.SanitizedJs ||\n      value instanceof goog.soy.data.UnsanitizedText ||\n      value instanceof goog.html.SafeScript;\n};\n\n\n\n/**\n * Content of type {@link goog.soy.data.SanitizedContentKind.URI}.\n *\n * The content is a URI chunk that the caller knows is safe to emit in a\n * template. The content direction is LTR.\n *\n * @extends {goog.soy.data.SanitizedContent}\n * @constructor\n */\ngoog.soy.data.SanitizedUri = function() {\n  goog.soy.data.SanitizedUri.base(this, 'constructor');\n};\ngoog.inherits(goog.soy.data.SanitizedUri, goog.soy.data.SanitizedContent);\n\n/** @override */\ngoog.soy.data.SanitizedUri.prototype.contentKind =\n    goog.soy.data.SanitizedContentKind.URI;\n\n/** @override */\ngoog.soy.data.SanitizedUri.prototype.contentDir = goog.i18n.bidi.Dir.LTR;\n\n/**\n * Checks if the value could be used as the Soy type {uri}.\n * @param {*} value\n * @return {boolean}\n */\ngoog.soy.data.SanitizedUri.isCompatibleWith = function(value) {\n  return goog.isString(value) ||\n      value instanceof goog.soy.data.SanitizedUri ||\n      value instanceof goog.soy.data.UnsanitizedText ||\n      value instanceof goog.html.SafeUrl ||\n      value instanceof goog.html.TrustedResourceUrl ||\n      value instanceof goog.Uri;\n};\n\n\n\n/**\n * Content of type\n * {@link goog.soy.data.SanitizedContentKind.TRUSTED_RESOURCE_URI}.\n *\n * The content is a TrustedResourceUri chunk that is not under attacker control.\n * The content direction is LTR.\n *\n * @extends {goog.soy.data.SanitizedContent}\n * @constructor\n */\ngoog.soy.data.SanitizedTrustedResourceUri = function() {\n  goog.soy.data.SanitizedTrustedResourceUri.base(this, 'constructor');\n};\ngoog.inherits(\n    goog.soy.data.SanitizedTrustedResourceUri, goog.soy.data.SanitizedContent);\n\n/** @override */\ngoog.soy.data.SanitizedTrustedResourceUri.prototype.contentKind =\n    goog.soy.data.SanitizedContentKind.TRUSTED_RESOURCE_URI;\n\n/** @override */\ngoog.soy.data.SanitizedTrustedResourceUri.prototype.contentDir =\n    goog.i18n.bidi.Dir.LTR;\n\n/**\n * Converts sanitized content into TrustedResourceUrl without modification.\n * @return {!goog.html.TrustedResourceUrl}\n */\ngoog.soy.data.SanitizedTrustedResourceUri.prototype.toTrustedResourceUrl =\n    function() {\n  return goog.html.uncheckedconversions\n      .trustedResourceUrlFromStringKnownToSatisfyTypeContract(\n          goog.string.Const.from(\n              'Soy SanitizedContent of kind TRUSTED_RESOURCE_URI produces ' +\n              'TrustedResourceUrl-contract-compliant value.'),\n          this.toString());\n};\n\n/**\n * Checks if the value could be used as the Soy type {trusted_resource_uri}.\n * @param {*} value\n * @return {boolean}\n */\ngoog.soy.data.SanitizedTrustedResourceUri.isCompatibleWith = function(value) {\n  return goog.isString(value) ||\n      value instanceof goog.soy.data.SanitizedTrustedResourceUri ||\n      value instanceof goog.soy.data.UnsanitizedText ||\n      value instanceof goog.html.TrustedResourceUrl;\n};\n\n\n\n/**\n * Content of type {@link goog.soy.data.SanitizedContentKind.ATTRIBUTES}.\n *\n * The content should be safely embeddable within an open tag, such as a\n * key=\"value\" pair. The content direction is LTR.\n *\n * @extends {goog.soy.data.SanitizedContent}\n * @constructor\n */\ngoog.soy.data.SanitizedHtmlAttribute = function() {\n  goog.soy.data.SanitizedHtmlAttribute.base(this, 'constructor');\n};\ngoog.inherits(\n    goog.soy.data.SanitizedHtmlAttribute, goog.soy.data.SanitizedContent);\n\n/** @override */\ngoog.soy.data.SanitizedHtmlAttribute.prototype.contentKind =\n    goog.soy.data.SanitizedContentKind.ATTRIBUTES;\n\n/** @override */\ngoog.soy.data.SanitizedHtmlAttribute.prototype.contentDir =\n    goog.i18n.bidi.Dir.LTR;\n\n/**\n * Checks if the value could be used as the Soy type {attribute}.\n * @param {*} value\n * @return {boolean}\n */\ngoog.soy.data.SanitizedHtmlAttribute.isCompatibleWith = function(value) {\n  return goog.isString(value) ||\n      value instanceof goog.soy.data.SanitizedHtmlAttribute ||\n      value instanceof goog.soy.data.UnsanitizedText;\n};\n\n\n\n/**\n * Content of type {@link goog.soy.data.SanitizedContentKind.STYLE}.\n *\n * The content is non-attacker-exploitable CSS, such as `color:#c3d9ff`.\n * The content direction is LTR.\n *\n * @extends {goog.soy.data.SanitizedContent}\n * @constructor\n */\ngoog.soy.data.SanitizedStyle = function() {\n  goog.soy.data.SanitizedStyle.base(this, 'constructor');\n};\ngoog.inherits(goog.soy.data.SanitizedStyle, goog.soy.data.SanitizedContent);\n\n\n/** @override */\ngoog.soy.data.SanitizedStyle.prototype.contentKind =\n    goog.soy.data.SanitizedContentKind.STYLE;\n\n\n/** @override */\ngoog.soy.data.SanitizedStyle.prototype.contentDir = goog.i18n.bidi.Dir.LTR;\n\n\n/**\n * Checks if the value could be used as the Soy type {css}.\n * @param {*} value\n * @return {boolean}\n */\ngoog.soy.data.SanitizedStyle.isCompatibleWith = function(value) {\n  return goog.isString(value) ||\n      value instanceof goog.soy.data.SanitizedStyle ||\n      value instanceof goog.soy.data.UnsanitizedText ||\n      value instanceof goog.html.SafeStyle;\n};\n\n\n\n/**\n * Content of type {@link goog.soy.data.SanitizedContentKind.CSS}.\n *\n * The content is non-attacker-exploitable CSS, such as {@code @import url(x)}.\n * The content direction is LTR.\n *\n * @extends {goog.soy.data.SanitizedContent}\n * @constructor\n */\ngoog.soy.data.SanitizedCss = function() {\n  goog.soy.data.SanitizedCss.base(this, 'constructor');\n};\ngoog.inherits(goog.soy.data.SanitizedCss, goog.soy.data.SanitizedContent);\n\n\n/** @override */\ngoog.soy.data.SanitizedCss.prototype.contentKind =\n    goog.soy.data.SanitizedContentKind.CSS;\n\n\n/** @override */\ngoog.soy.data.SanitizedCss.prototype.contentDir = goog.i18n.bidi.Dir.LTR;\n\n\n/**\n * Checks if the value could be used as the Soy type {css}.\n * @param {*} value\n * @return {boolean}\n */\ngoog.soy.data.SanitizedCss.isCompatibleWith = function(value) {\n  return goog.isString(value) ||\n      value instanceof goog.soy.data.SanitizedCss ||\n      value instanceof goog.soy.data.UnsanitizedText ||\n      value instanceof goog.html.SafeStyle ||  // TODO(jakubvrana): Delete.\n      value instanceof goog.html.SafeStyleSheet;\n};\n\n\n/**\n * Converts SanitizedCss into SafeStyleSheet.\n * Note: SanitizedCss in Soy represents both SafeStyle and SafeStyleSheet in\n * Closure. It's about to be split so that SanitizedCss represents only\n * SafeStyleSheet.\n * @return {!goog.html.SafeStyleSheet}\n */\ngoog.soy.data.SanitizedCss.prototype.toSafeStyleSheet = function() {\n  var value = this.toString();\n  // TODO(jakubvrana): Remove this check when there's a separate type for style\n  // declaration.\n  goog.asserts.assert(\n      /[@{]|^\\s*$/.test(value),\n      'value doesn\\'t look like style sheet: ' + value);\n  return goog.html.uncheckedconversions\n      .safeStyleSheetFromStringKnownToSatisfyTypeContract(\n          goog.string.Const.from(\n              'Soy SanitizedCss produces SafeStyleSheet-contract-compliant ' +\n              'value.'),\n          value);\n};\n","// Copyright 2011 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Provides utility methods to render soy template.\n * @author chrishenry@google.com (Chris Henry)\n */\n\ngoog.provide('goog.soy');\n\ngoog.require('goog.asserts');\ngoog.require('goog.dom');\ngoog.require('goog.dom.NodeType');\ngoog.require('goog.dom.TagName');\ngoog.require('goog.html.legacyconversions');\ngoog.require('goog.soy.data.SanitizedContent');\ngoog.require('goog.soy.data.SanitizedContentKind');\ngoog.require('goog.string');\n\n\n/**\n * @define {boolean} Whether to require all Soy templates to be \"strict html\".\n * Soy templates that use strict autoescaping forbid noAutoescape along with\n * many dangerous directives, and return a runtime type SanitizedContent that\n * marks them as safe.\n *\n * If this flag is enabled, Soy templates will fail to render if a template\n * returns plain text -- indicating it is a non-strict template.\n */\ngoog.define('goog.soy.REQUIRE_STRICT_AUTOESCAPE', false);\n\n\n/**\n * Type definition for strict Soy templates. Very useful when passing a template\n * as an argument.\n * @typedef {function(?, null=, ?Object<string, *>=):\n *     !goog.soy.data.SanitizedContent}\n */\ngoog.soy.StrictTemplate;\n\n\n/**\n * Type definition for strict Soy HTML templates. Very useful when passing\n * a template as an argument.\n * @typedef {function(?, null=, ?Object<string, *>=):\n *     !goog.soy.data.SanitizedHtml}\n */\ngoog.soy.StrictHtmlTemplate;\n\n\n/**\n * Sets the processed template as the innerHTML of an element. It is recommended\n * to use this helper function instead of directly setting innerHTML in your\n * hand-written code, so that it will be easier to audit the code for cross-site\n * scripting vulnerabilities.\n *\n * @param {?Element} element The element whose content we are rendering into.\n * @param {!goog.soy.data.SanitizedContent} templateResult The processed\n *     template of kind HTML or TEXT (which will be escaped).\n * @template ARG_TYPES\n */\ngoog.soy.renderHtml = function(element, templateResult) {\n  element.innerHTML = goog.soy.ensureTemplateOutputHtml_(templateResult);\n};\n\n\n/**\n * Renders a Soy template and then set the output string as\n * the innerHTML of an element. It is recommended to use this helper function\n * instead of directly setting innerHTML in your hand-written code, so that it\n * will be easier to audit the code for cross-site scripting vulnerabilities.\n *\n * @param {Element} element The element whose content we are rendering into.\n * @param {?function(ARG_TYPES, Object<string, *>=):*|\n *     ?function(ARG_TYPES, null=, Object<string, *>=):*} template\n *     The Soy template defining the element's content.\n * @param {ARG_TYPES=} opt_templateData The data for the template.\n * @param {Object=} opt_injectedData The injected data for the template.\n * @template ARG_TYPES\n */\ngoog.soy.renderElement = function(\n    element, template, opt_templateData, opt_injectedData) {\n  // Soy template parameter is only nullable for historical reasons.\n  goog.asserts.assert(template, 'Soy template may not be null.');\n  element.innerHTML = goog.soy.ensureTemplateOutputHtml_(\n      template(\n          opt_templateData || goog.soy.defaultTemplateData_, undefined,\n          opt_injectedData));\n};\n\n\n/**\n * Renders a Soy template into a single node or a document\n * fragment. If the rendered HTML string represents a single node, then that\n * node is returned (note that this is *not* a fragment, despite them name of\n * the method). Otherwise a document fragment is returned containing the\n * rendered nodes.\n *\n * @param {?function(ARG_TYPES, Object<string, *>=):*|\n *     ?function(ARG_TYPES, null=, Object<string, *>=):*} template\n *     The Soy template defining the element's content.\n * @param {ARG_TYPES=} opt_templateData The data for the template.\n * @param {Object=} opt_injectedData The injected data for the template.\n * @param {goog.dom.DomHelper=} opt_domHelper The DOM helper used to\n *     create DOM nodes; defaults to `goog.dom.getDomHelper`.\n * @return {!Node} The resulting node or document fragment.\n * @template ARG_TYPES\n */\ngoog.soy.renderAsFragment = function(\n    template, opt_templateData, opt_injectedData, opt_domHelper) {\n  // Soy template parameter is only nullable for historical reasons.\n  goog.asserts.assert(template, 'Soy template may not be null.');\n  var dom = opt_domHelper || goog.dom.getDomHelper();\n  var output = template(\n      opt_templateData || goog.soy.defaultTemplateData_, undefined,\n      opt_injectedData);\n  var html = goog.soy.ensureTemplateOutputHtml_(output);\n  goog.soy.assertFirstTagValid_(html);\n  var safeHtml = output instanceof goog.soy.data.SanitizedContent ?\n      output.toSafeHtml() :\n      goog.html.legacyconversions.safeHtmlFromString(html);\n  return dom.safeHtmlToNode(safeHtml);\n};\n\n\n/**\n * Renders a Soy template into a single node. If the rendered\n * HTML string represents a single node, then that node is returned. Otherwise,\n * a DIV element is returned containing the rendered nodes.\n *\n * @param {?function(ARG_TYPES, Object<string, *>=):*|\n *     ?function(ARG_TYPES, null=, Object<string, *>=):*} template\n *     The Soy template defining the element's content.\n * @param {ARG_TYPES=} opt_templateData The data for the template.\n * @param {Object=} opt_injectedData The injected data for the template.\n * @param {goog.dom.DomHelper=} opt_domHelper The DOM helper used to\n *     create DOM nodes; defaults to `goog.dom.getDomHelper`.\n * @return {!Element} Rendered template contents, wrapped in a parent DIV\n *     element if necessary.\n * @template ARG_TYPES\n */\ngoog.soy.renderAsElement = function(\n    template, opt_templateData, opt_injectedData, opt_domHelper) {\n  // Soy template parameter is only nullable for historical reasons.\n  goog.asserts.assert(template, 'Soy template may not be null.');\n  return goog.soy.convertToElement_(\n      template(\n          opt_templateData || goog.soy.defaultTemplateData_, undefined,\n          opt_injectedData),\n      opt_domHelper);\n};\n\n\n/**\n * Converts a processed Soy template into a single node. If the rendered\n * HTML string represents a single node, then that node is returned. Otherwise,\n * a DIV element is returned containing the rendered nodes.\n *\n * @param {!goog.soy.data.SanitizedContent} templateResult The processed\n *     template of kind HTML or TEXT (which will be escaped).\n * @param {?goog.dom.DomHelper=} opt_domHelper The DOM helper used to\n *     create DOM nodes; defaults to `goog.dom.getDomHelper`.\n * @return {!Element} Rendered template contents, wrapped in a parent DIV\n *     element if necessary.\n */\ngoog.soy.convertToElement = function(templateResult, opt_domHelper) {\n  return goog.soy.convertToElement_(templateResult, opt_domHelper);\n};\n\n\n/**\n * Non-strict version of `goog.soy.convertToElement`.\n *\n * @param {*} templateResult The processed template.\n * @param {?goog.dom.DomHelper=} opt_domHelper The DOM helper used to\n *     create DOM nodes; defaults to `goog.dom.getDomHelper`.\n * @return {!Element} Rendered template contents, wrapped in a parent DIV\n *     element if necessary.\n * @private\n */\ngoog.soy.convertToElement_ = function(templateResult, opt_domHelper) {\n  var dom = opt_domHelper || goog.dom.getDomHelper();\n  var wrapper = dom.createElement(goog.dom.TagName.DIV);\n  var html = goog.soy.ensureTemplateOutputHtml_(templateResult);\n  goog.soy.assertFirstTagValid_(html);\n  wrapper.innerHTML = html;\n\n  // If the template renders as a single element, return it.\n  if (wrapper.childNodes.length == 1) {\n    var firstChild = wrapper.firstChild;\n    if (firstChild.nodeType == goog.dom.NodeType.ELEMENT) {\n      return /** @type {!Element} */ (firstChild);\n    }\n  }\n\n  // Otherwise, return the wrapper DIV.\n  return wrapper;\n};\n\n\n/**\n * Ensures the result is \"safe\" to insert as HTML.\n *\n * Note if the template has non-strict autoescape, the guarantees here are very\n * weak. It is recommended applications switch to requiring strict\n * autoescaping over time by tweaking goog.soy.REQUIRE_STRICT_AUTOESCAPE.\n *\n * In the case the argument is a SanitizedContent object, it either must\n * already be of kind HTML, or if it is kind=\"text\", the output will be HTML\n * escaped.\n *\n * @param {*} templateResult The template result.\n * @return {string} The assumed-safe HTML output string.\n * @private\n */\ngoog.soy.ensureTemplateOutputHtml_ = function(templateResult) {\n  // Allow strings as long as strict autoescaping is not mandated. Note we\n  // allow everything that isn't an object, because some non-escaping templates\n  // end up returning non-strings if their only print statement is a\n  // non-escaped argument, plus some unit tests spoof templates.\n  // TODO(gboyer): Track down and fix these cases.\n  if (!goog.soy.REQUIRE_STRICT_AUTOESCAPE && !goog.isObject(templateResult)) {\n    return String(templateResult);\n  }\n\n  // Allow SanitizedContent of kind HTML.\n  if (templateResult instanceof goog.soy.data.SanitizedContent) {\n    templateResult =\n        /** @type {!goog.soy.data.SanitizedContent} */ (templateResult);\n    var ContentKind = goog.soy.data.SanitizedContentKind;\n    if (templateResult.contentKind === ContentKind.HTML) {\n      return goog.asserts.assertString(templateResult.getContent());\n    }\n    if (templateResult.contentKind === ContentKind.TEXT) {\n      // Allow text to be rendered, as long as we escape it. Other content\n      // kinds will fail, since we don't know what to do with them.\n      // TODO(gboyer): Perhaps also include URI in this case.\n      return goog.string.htmlEscape(templateResult.getContent());\n    }\n  }\n\n  goog.asserts.fail(\n      'Soy template output is unsafe for use as HTML: ' + templateResult);\n\n  // In production, return a safe string, rather than failing hard.\n  return 'zSoyz';\n};\n\n\n/**\n * Checks that the rendered HTML does not start with an invalid tag that would\n * likely cause unexpected output from renderAsElement or renderAsFragment.\n * See {@link http://www.w3.org/TR/html5/semantics.html#semantics} for reference\n * as to which HTML elements can be parents of each other.\n * @param {string} html The output of a template.\n * @private\n */\ngoog.soy.assertFirstTagValid_ = function(html) {\n  if (goog.asserts.ENABLE_ASSERTS) {\n    var matches = html.match(goog.soy.INVALID_TAG_TO_RENDER_);\n    goog.asserts.assert(\n        !matches, 'This template starts with a %s, which ' +\n            'cannot be a child of a <div>, as required by soy internals. ' +\n            'Consider using goog.soy.renderElement instead.\\nTemplate output: %s',\n        matches && matches[0], html);\n  }\n};\n\n\n/**\n * A pattern to find templates that cannot be rendered by renderAsElement or\n * renderAsFragment, as these elements cannot exist as the child of a <div>.\n * @type {!RegExp}\n * @private\n */\ngoog.soy.INVALID_TAG_TO_RENDER_ =\n    /^<(body|caption|col|colgroup|head|html|tr|td|th|tbody|thead|tfoot)>/i;\n\n\n/**\n * Immutable object that is passed into templates that are rendered\n * without any data.\n * @private @const\n */\ngoog.soy.defaultTemplateData_ = {};\n","// Copyright 2016 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n/**\n * @fileoverview Contains the attribute whitelists for use in the Html\n * sanitizer.\n */\n\ngoog.provide('goog.html.sanitizer.AttributeSanitizedWhitelist');\ngoog.provide('goog.html.sanitizer.AttributeWhitelist');\n\n\n/**\n * A whitelist for attributes that are always safe and allowed by default.\n * The sanitizer only applies whitespace trimming to these.\n * @const @dict {boolean}\n */\ngoog.html.sanitizer.AttributeWhitelist = {\n  '* ARIA-CHECKED': true,\n  '* ARIA-COLCOUNT': true,\n  '* ARIA-COLINDEX': true,\n  '* ARIA-DESCRIBEDBY': true,\n  '* ARIA-DISABLED': true,\n  '* ARIA-LABEL': true,\n  '* ARIA-LABELLEDBY': true,\n  '* ARIA-READONLY': true,\n  '* ARIA-REQUIRED': true,\n  '* ARIA-ROWCOUNT': true,\n  '* ARIA-ROWINDEX': true,\n  '* ARIA-SELECTED': true,\n  '* ABBR': true,\n  '* ACCEPT': true,\n  '* ACCESSKEY': true,\n  '* ALIGN': true,\n  '* ALT': true,\n  '* AUTOCOMPLETE': true,\n  '* AXIS': true,\n  '* BGCOLOR': true,\n  '* BORDER': true,\n  '* CELLPADDING': true,\n  '* CELLSPACING': true,\n  '* CHAROFF': true,\n  '* CHAR': true,\n  '* CHECKED': true,\n  '* CLEAR': true,\n  '* COLOR': true,\n  '* COLSPAN': true,\n  '* COLS': true,\n  '* COMPACT': true,\n  '* COORDS': true,\n  '* DATETIME': true,\n  '* DIR': true,\n  '* DISABLED': true,\n  '* ENCTYPE': true,\n  '* FACE': true,\n  '* FRAME': true,\n  '* HEIGHT': true,\n  '* HREFLANG': true,\n  '* HSPACE': true,\n  '* ISMAP': true,\n  '* LABEL': true,\n  '* LANG': true,\n  '* MAXLENGTH': true,\n  '* METHOD': true,\n  '* MULTIPLE': true,\n  '* NOHREF': true,\n  '* NOSHADE': true,\n  '* NOWRAP': true,\n  '* READONLY': true,\n  '* REL': true,\n  '* REV': true,\n  '* ROLE': true,\n  '* ROWSPAN': true,\n  '* ROWS': true,\n  '* RULES': true,\n  '* SCOPE': true,\n  '* SELECTED': true,\n  '* SHAPE': true,\n  '* SIZE': true,\n  '* SPAN': true,\n  '* START': true,\n  '* SUMMARY': true,\n  '* TABINDEX': true,\n  '* TITLE': true,\n  '* TYPE': true,\n  '* VALIGN': true,\n  '* VALUE': true,\n  '* VSPACE': true,\n  '* WIDTH': true\n};\n\n/**\n * A whitelist for attributes that are not safe to allow unrestricted, but are\n * made safe by default policies installed by the sanitizer in\n * goog.html.sanitizer.HtmlSanitizer.Builder.prototype.build, and thus allowed\n * by default under these policies.\n * @const @dict {boolean}\n */\ngoog.html.sanitizer.AttributeSanitizedWhitelist = {\n\n  // Attributes which can contain URL fragments\n  '* USEMAP': true,\n  // Attributes which can contain URLs\n  '* ACTION': true,\n  '* CITE': true,\n  '* HREF': true,\n  // Attributes which can cause network requests\n  '* LONGDESC': true,\n  '* SRC': true,\n  'LINK HREF': true,\n  // Prevents clobbering\n  '* FOR': true,\n  '* HEADERS': true,\n  '* NAME': true,\n  // Controls where a window is opened. Prevents tab-nabbing\n  'A TARGET': true,\n\n  // Attributes which could cause UI redressing.\n  '* CLASS': true,\n  '* ID': true,\n\n  // CSS style can cause network requests and XSSs\n  '* STYLE': true\n};\n","// Copyright 2016 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/** @fileoverview Calculator for specificity of CSS selectors. */\n\ngoog.module('goog.html.CssSpecificity');\ngoog.module.declareLegacyNamespace();\n\nvar userAgent = goog.require('goog.userAgent');\nvar userAgentProduct = goog.require('goog.userAgent.product');\n\n\n/**\n * Cached mapping from selectors to specificities.\n * @type {!Object<string, !Array<number>>}\n */\nvar specificityCache = {};\n\n/**\n * Calculates the specificity of CSS selectors, using a global cache if\n * supported.\n * @see http://www.w3.org/TR/css3-selectors/#specificity\n * @see https://specificity.keegan.st/\n * @param {string} selector The CSS selector.\n * @return {!Array<number>} The CSS specificity.\n * @supported IE9+, other browsers.\n */\nfunction getSpecificity(selector) {\n  if (userAgentProduct.IE && !userAgent.isVersionOrHigher(9)) {\n    // IE8 has buggy regex support.\n    return [0, 0, 0, 0];\n  }\n  var specificity = specificityCache.hasOwnProperty(selector) ?\n      specificityCache[selector] :\n      null;\n  if (specificity) {\n    return specificity;\n  }\n  if (Object.keys(specificityCache).length > (1 << 16)) {\n    // Limit the size of cache to (1 << 16) == 65536. Normally HTML pages don't\n    // have such numbers of selectors.\n    specificityCache = {};\n  }\n  specificity = calculateSpecificity(selector);\n  specificityCache[selector] = specificity;\n  return specificity;\n}\n\n/**\n * Find matches for a regular expression in the selector and increase count.\n * @param {string} selector The selector to match the regex with.\n * @param {!Array<number>} specificity The current specificity.\n * @param {!RegExp} regex The regular expression.\n * @param {number} typeIndex Index of type count.\n * @return {string}\n */\nfunction replaceWithEmptyText(selector, specificity, regex, typeIndex) {\n  return selector.replace(regex, function(match) {\n    specificity[typeIndex] += 1;\n    // Replace this simple selector with whitespace so it won't be counted\n    // in further simple selectors.\n    return Array(match.length + 1).join(' ');\n  });\n}\n\n/**\n * Replace escaped characters with plain text, using the \"A\" character.\n * @see https://www.w3.org/TR/CSS21/syndata.html#characters\n * @param {string} selector\n * @param {!RegExp} regex\n * @return {string}\n */\nfunction replaceWithPlainText(selector, regex) {\n  return selector.replace(regex, function(match) {\n    return Array(match.length + 1).join('A');\n  });\n}\n\n/**\n * Calculates the specificity of CSS selectors\n * @see http://www.w3.org/TR/css3-selectors/#specificity\n * @see https://github.com/keeganstreet/specificity\n * @see https://specificity.keegan.st/\n * @param {string} selector\n * @return {!Array<number>} The CSS specificity.\n */\nfunction calculateSpecificity(selector) {\n  var specificity = [0, 0, 0, 0];\n\n  // Cannot use RegExp literals for all regular expressions, IE does not accept\n  // the syntax.\n\n  // Matches a backslash followed by six hexadecimal digits followed by an\n  // optional single whitespace character.\n  var escapeHexadecimalRegex = new RegExp('\\\\\\\\[0-9A-Fa-f]{6}\\\\s?', 'g');\n  // Matches a backslash followed by fewer than six hexadecimal digits\n  // followed by a mandatory single whitespace character.\n  var escapeHexadecimalRegex2 = new RegExp('\\\\\\\\[0-9A-Fa-f]{1,5}\\\\s', 'g');\n  // Matches a backslash followed by any character\n  var escapeSpecialCharacter = /\\\\./g;\n  selector = replaceWithPlainText(selector, escapeHexadecimalRegex);\n  selector = replaceWithPlainText(selector, escapeHexadecimalRegex2);\n  selector = replaceWithPlainText(selector, escapeSpecialCharacter);\n\n  // Remove the negation pseudo-class (:not) but leave its argument because\n  // specificity is calculated on its argument.\n  var pseudoClassWithNotRegex = new RegExp(':not\\\\(([^\\\\)]*)\\\\)', 'g');\n  selector = selector.replace(pseudoClassWithNotRegex, '     $1 ');\n\n  // Remove anything after a left brace in case a user has pasted in a rule,\n  // not just a selector.\n  var rulesRegex = new RegExp('{[^]*', 'gm');\n  selector = selector.replace(rulesRegex, '');\n\n  // The following regular expressions assume that selectors matching the\n  // preceding regular expressions have been removed.\n\n  // SPECIFICITY 2: Counts attribute selectors.\n  var attributeRegex = new RegExp('(\\\\[[^\\\\]]+\\\\])', 'g');\n  selector = replaceWithEmptyText(selector, specificity, attributeRegex, 2);\n\n  // SPECIFICITY 1: Counts ID selectors.\n  var idRegex = new RegExp('(#[^\\\\#\\\\s\\\\+>~\\\\.\\\\[:]+)', 'g');\n  selector = replaceWithEmptyText(selector, specificity, idRegex, 1);\n\n  // SPECIFICITY 2: Counts class selectors.\n  var classRegex = new RegExp('(\\\\.[^\\\\s\\\\+>~\\\\.\\\\[:]+)', 'g');\n  selector = replaceWithEmptyText(selector, specificity, classRegex, 2);\n\n  // SPECIFICITY 3: Counts pseudo-element selectors.\n  var pseudoElementRegex =\n      /(::[^\\s\\+>~\\.\\[:]+|:first-line|:first-letter|:before|:after)/gi;\n  selector = replaceWithEmptyText(selector, specificity, pseudoElementRegex, 3);\n\n  // SPECIFICITY 2: Counts pseudo-class selectors.\n  // A regex for pseudo classes with brackets. For example:\n  //   :nth-child()\n  //   :nth-last-child()\n  //   :nth-of-type()\n  //   :nth-last-type()\n  //   :lang()\n  var pseudoClassWithBracketsRegex = /(:[\\w-]+\\([^\\)]*\\))/gi;\n  selector = replaceWithEmptyText(\n      selector, specificity, pseudoClassWithBracketsRegex, 2);\n  // A regex for other pseudo classes, which don't have brackets.\n  var pseudoClassRegex = /(:[^\\s\\+>~\\.\\[:]+)/g;\n  selector = replaceWithEmptyText(selector, specificity, pseudoClassRegex, 2);\n\n  // Remove universal selector and separator characters.\n  selector = selector.replace(/[\\*\\s\\+>~]/g, ' ');\n\n  // Remove any stray dots or hashes which aren't attached to words.\n  // These may be present if the user is live-editing this selector.\n  selector = selector.replace(/[#\\.]/g, ' ');\n\n  // SPECIFICITY 3: The only things left should be element selectors.\n  var elementRegex = /([^\\s\\+>~\\.\\[:]+)/g;\n  selector = replaceWithEmptyText(selector, specificity, elementRegex, 3);\n\n  return specificity;\n}\n\nexports = {\n  getSpecificity: getSpecificity\n};\n","// Copyright 2017 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utility DOM functions resistant to DOM clobbering. Clobbering\n * resistance is offered as a best-effort feature -- it is not available on\n * older browsers such as IE <10, Chrome <43, etc. In some cases, we can at\n * least detect clobbering attempts and abort. Note that this is not intended to\n * be a general-purpose library -- it is only used by the HTML sanitizer to\n * accept and sanitize clobbered input. If your projects needs to protect\n * against clobbered content, consider using the HTML sanitizer and configuring\n * it to defuse clobbering by prefixing all element ids and names in the\n * output.\n * @supported Unless specified in the method documentation, IE 10 and newer.\n */\n\ngoog.module('goog.html.sanitizer.noclobber');\ngoog.module.declareLegacyNamespace();\n\nvar NodeType = goog.require('goog.dom.NodeType');\nvar googAsserts = goog.require('goog.asserts');\nvar userAgentProduct = goog.require('goog.userAgent.product');\n\n/**\n * Note about browser support:\n * - IE 8 and 9 don't have DOM prototypes. There is no simple way of saving\n *   the methods and accessors for a clobber-safe call.\n * - Chrome <43 doesn't have attributes on DOM prototypes, so there is no way of\n *   making clobber-safe calls for attribute descriptors.\n * - IE 8 and 9 don't even have Node and HTMLElement, so there is no\n *   straightforward way of checking if the result was clobbered for many of the\n *   methods.\n * - IE 8 and 9 have alternate names for getPropertyValue/setProperty in\n *   CSSStyleDeclaration.\n * For simplicity, we don't support IE 8 and 9 for anything but the CSS methods\n * which already had IE8 and IE9 support. Chrome 41 must still be supported.\n */\n\n/**\n * Shorthand for `Object.getOwnPropertyDescriptor(...).get` to improve\n * readability during initialization of `Methods`.\n * @param {string} className\n * @param {string} property\n * @return {?Function}\n */\nfunction getterOrNull(className, property) {\n  var ctor = goog.global[className];\n  if (!ctor || !ctor.prototype) {\n    return null;\n  }\n  var descriptor = Object.getOwnPropertyDescriptor(ctor.prototype, property);\n  return (descriptor && descriptor.get) || null;\n}\n\n/**\n * Shorthand for `DOMInterface.prototype.method` to improve readability\n * during initialization of `Methods`.\n * @param {string} className\n * @param {string} method\n * @return {?Function}\n */\nfunction prototypeMethodOrNull(className, method) {\n  var ctor = goog.global[className];\n  return (ctor && ctor.prototype && ctor.prototype[method]) || null;\n}\n\n// Functions we use to avoid looking up the prototypes and the descriptors\n// multiple times.\n/** @const @enum {?Function} */\nvar Methods = {\n  ATTRIBUTES_GETTER: getterOrNull('Element', 'attributes') ||\n      // Edge and IE10 define this Element property on Node instead of\n      // Element.\n      getterOrNull('Node', 'attributes'),\n  HAS_ATTRIBUTE: prototypeMethodOrNull('Element', 'hasAttribute'),\n  GET_ATTRIBUTE: prototypeMethodOrNull('Element', 'getAttribute'),\n  SET_ATTRIBUTE: prototypeMethodOrNull('Element', 'setAttribute'),\n  REMOVE_ATTRIBUTE: prototypeMethodOrNull('Element', 'removeAttribute'),\n  INNER_HTML_GETTER: getterOrNull('Element', 'innerHTML') ||\n      // IE 10 defines this Element property on HTMLElement.\n      getterOrNull('HTMLElement', 'innerHTML'),\n  GET_ELEMENTS_BY_TAG_NAME:\n      prototypeMethodOrNull('Element', 'getElementsByTagName'),\n  MATCHES: prototypeMethodOrNull('Element', 'matches') ||\n      prototypeMethodOrNull('Element', 'msMatchesSelector'),\n  NODE_NAME_GETTER: getterOrNull('Node', 'nodeName'),\n  NODE_TYPE_GETTER: getterOrNull('Node', 'nodeType'),\n  PARENT_NODE_GETTER: getterOrNull('Node', 'parentNode'),\n  CHILD_NODES_GETTER: getterOrNull('Node', 'childNodes'),\n  APPEND_CHILD: prototypeMethodOrNull('Node', 'appendChild'),\n  STYLE_GETTER: getterOrNull('HTMLElement', 'style') ||\n      // Safari 10 defines the property on Element instead of\n      // HTMLElement.\n      getterOrNull('Element', 'style'),\n  SHEET_GETTER: getterOrNull('HTMLStyleElement', 'sheet'),\n  GET_PROPERTY_VALUE:\n      prototypeMethodOrNull('CSSStyleDeclaration', 'getPropertyValue'),\n  SET_PROPERTY: prototypeMethodOrNull('CSSStyleDeclaration', 'setProperty')\n};\n\n/**\n * Calls the provided DOM property descriptor and returns its result. If the\n * descriptor is not available, use fallbackPropertyName to get the property\n * value in a clobber-vulnerable way, and use fallbackTest to check if the\n * property was clobbered, throwing an exception if so.\n * @param {?Function} fn\n * @param {*} object\n * @param {string} fallbackPropertyName\n * @param {function(*):boolean} fallbackTest\n * @return {?}\n */\nfunction genericPropertyGet(fn, object, fallbackPropertyName, fallbackTest) {\n  if (fn) {\n    return fn.apply(object);\n  }\n  var propertyValue = object[fallbackPropertyName];\n  if (!fallbackTest(propertyValue)) {\n    throw new Error('Clobbering detected');\n  }\n  return propertyValue;\n}\n\n/**\n * Calls the provided DOM prototype method and returns its result. If the\n * method is not available, use fallbackMethodName to call the method in a\n * clobber-vulnerable way, and use fallbackTest to check if the\n * method was clobbered, throwing an exception if so.\n * @param {?Function} fn\n * @param {*} object\n * @param {string} fallbackMethodName\n * @param {!Array<*>} args\n * @return {?}\n */\nfunction genericMethodCall(fn, object, fallbackMethodName, args) {\n  if (fn) {\n    return fn.apply(object, args);\n  }\n  // IE8 and IE9 will return 'object' for\n  // CSSStyleDeclaration.(get|set)Attribute, so we can't use typeof.\n  if (userAgentProduct.IE && document.documentMode < 10) {\n    if (!object[fallbackMethodName].call) {\n      throw new Error('IE Clobbering detected');\n    }\n  } else if (typeof object[fallbackMethodName] != 'function') {\n    throw new Error('Clobbering detected');\n  }\n  return object[fallbackMethodName].apply(object, args);\n}\n\n/**\n * Returns an element's attributes without falling prey to things like\n * <form><input name=\"attributes\"></form>. Equivalent to\n * `node.attributes`.\n * @param {!Element} element\n * @return {!NamedNodeMap}\n */\nfunction getElementAttributes(element) {\n  return genericPropertyGet(\n      Methods.ATTRIBUTES_GETTER, element, 'attributes', function(attributes) {\n        return attributes instanceof NamedNodeMap;\n      });\n}\n\n/**\n * Returns whether an element has a specific attribute, without falling prey to\n * things like <form><input name=\"hasAttribute\"></form>.\n * Equivalent to {@code element.hasAttribute(\"foo\")}.\n * @param {!Element} element\n * @param {string} attrName\n * @return {boolean}\n */\nfunction hasElementAttribute(element, attrName) {\n  return genericMethodCall(\n      Methods.HAS_ATTRIBUTE, element, 'hasAttribute', [attrName]);\n}\n\n/**\n * Returns a specific attribute from an element without falling prey to\n * things like <form><input name=\"getAttribute\"></form>.\n * Equivalent to {@code element.getAttribute(\"foo\")}.\n * @param {!Element} element\n * @param {string} attrName\n * @return {?string}\n */\nfunction getElementAttribute(element, attrName) {\n  // Older browsers might return empty string instead of null to follow the\n  // DOM 3 Core Specification.\n  return genericMethodCall(\n             Methods.GET_ATTRIBUTE, element, 'getAttribute', [attrName]) ||\n      null;\n}\n\n/**\n * Sets an element's attributes without falling prey to things like\n * <form><input name=\"setAttribute\"></form>. Equivalent to {@code\n * element.setAttribute(\"foo\", \"bar\")}.\n * @param {!Element} element\n * @param {string} name\n * @param {string} value\n */\nfunction setElementAttribute(element, name, value) {\n  try {\n    genericMethodCall(\n        Methods.SET_ATTRIBUTE, element, 'setAttribute', [name, value]);\n  } catch (e) {\n    // IE throws an exception if the src attribute contains HTTP credentials.\n    // However the attribute gets set anyway.\n    if (e.message.indexOf('A security problem occurred') != -1) {\n      return;\n    }\n    throw e;\n  }\n}\n\n/**\n * Deletes a specific attribute from an element without falling prey to\n * things like <form><input name=\"removeAttribute\"></form>.\n * Equivalent to {@code element.removeAttribute(\"foo\")}.\n * @param {!Element} element\n * @param {string} attrName\n */\nfunction removeElementAttribute(element, attrName) {\n  genericMethodCall(\n      Methods.REMOVE_ATTRIBUTE, element, 'removeAttribute', [attrName]);\n}\n\n/**\n * Returns a node's innerHTML property value without falling prey to things like\n * <form><input name=\"innerHTML\"></form>. Equivalent to\n * `element.innerHTML`.\n * @param {!Element} element\n * @return {string}\n */\nfunction getElementInnerHTML(element) {\n  return genericPropertyGet(\n      Methods.INNER_HTML_GETTER, element, 'innerHTML', function(html) {\n        return typeof html == 'string';\n      });\n}\n\n/**\n * Returns an element's style without falling prey to things like\n * <form><input name=\"style\"></form>.\n * @param {!Element} element\n * @return {!CSSStyleDeclaration}\n */\nfunction getElementStyle(element) {\n  assertHTMLElement(element);\n  return genericPropertyGet(\n      Methods.STYLE_GETTER, element, 'style', function(style) {\n        return style instanceof CSSStyleDeclaration;\n      });\n}\n\n/**\n * Asserts that the Element is an HTMLElement, or throws an exception.\n * @param {!Element} element\n */\nfunction assertHTMLElement(element) {\n  if (googAsserts.ENABLE_ASSERTS && !(element instanceof HTMLElement)) {\n    throw new Error('Not an HTMLElement');\n  }\n}\n\n/**\n * Get the children of a specific tag matching the provided tag name without\n * falling prey to things like <form><input name=\"getElementsByTagName\"></form>.\n * Equivalent to {@code element.getElementsByTagName(\"foo\")}.\n * @param {!Element} element\n * @param {string} name\n * @return {!Array<!Element>}\n */\nfunction getElementsByTagName(element, name) {\n  return Array.from(genericMethodCall(\n      Methods.GET_ELEMENTS_BY_TAG_NAME, element, 'getElementsByTagName',\n      [name]));\n}\n\n/**\n * Returns an element's style without falling prey to things like\n * <form><input name=\"style\"></form>.\n * @param {!Element} element\n * @return {!CSSStyleSheet}\n */\nfunction getElementStyleSheet(element) {\n  assertHTMLElement(element);\n  return genericPropertyGet(\n      Methods.SHEET_GETTER, element, 'sheet', function(sheet) {\n        return sheet instanceof CSSStyleSheet;\n      });\n}\n\n/**\n * Returns true if the element would be selected by the provided selector,\n * without falling prey to things like <form><input name=\"setAttribute\"></form>.\n * Equivalent to {@code element.matches(\"foo\")}.\n * @param {!Element} element\n * @param {string} selector\n * @return {boolean}\n */\nfunction elementMatches(element, selector) {\n  return genericMethodCall(\n      Methods.MATCHES, element,\n      element.matches ? 'matches' : 'msMatchesSelector', [selector]);\n}\n\n/**\n * Asserts that a Node is an Element, without falling prey to things like\n * <form><input name=\"nodeType\"></form>.\n * @param {!Node} node\n * @return {!Element}\n */\nfunction assertNodeIsElement(node) {\n  if (googAsserts.ENABLE_ASSERTS && !isNodeElement(node)) {\n    googAsserts.fail(\n        'Expected Node of type Element but got Node of type %s',\n        getNodeType(node));\n  }\n  return /** @type {!Element} */ (node);\n}\n\n/**\n * Returns whether the node is an Element, without falling prey to things like\n * <form><input name=\"nodeType\"></form>.\n * @param {!Node} node\n * @return {boolean}\n */\nfunction isNodeElement(node) {\n  return getNodeType(node) == NodeType.ELEMENT;\n}\n\n/**\n * Returns a node's nodeName without falling prey to things like\n * <form><input name=\"nodeName\"></form>.\n * @param {!Node} node\n * @return {string}\n */\nfunction getNodeName(node) {\n  return genericPropertyGet(\n      Methods.NODE_NAME_GETTER, node, 'nodeName', function(name) {\n        return typeof name == 'string';\n      });\n}\n\n/**\n * Returns a node's nodeType without falling prey to things like\n * `<form><input name=\"nodeType\"></form>`.\n * @param {!Node} node\n * @return {number}\n */\nfunction getNodeType(node) {\n  return genericPropertyGet(\n      Methods.NODE_TYPE_GETTER, node, 'nodeType', function(type) {\n        return typeof type == 'number';\n      });\n}\n\n/**\n * Returns a node's parentNode without falling prey to things like\n * <form><input name=\"parentNode\"></form>.\n * @param {!Node} node\n * @return {?Node}\n */\nfunction getParentNode(node) {\n  return genericPropertyGet(\n      Methods.PARENT_NODE_GETTER, node, 'parentNode', function(parentNode) {\n        // We need to ensure that parentNode is returning the actual parent node\n        // and not a child node that happens to have a name of \"parentNode\".\n        // We check that the node returned by parentNode is itself not named\n        // \"parentNode\" - this could happen legitimately but on IE we have no\n        // better means of avoiding the pitfall.\n        return !(\n            parentNode && typeof parentNode.name == 'string' &&\n            parentNode.name && parentNode.name.toLowerCase() == 'parentnode');\n      });\n}\n\n/**\n * Returns the value of node.childNodes without falling prey to things like\n * <form><input name=\"childNodes\"></form>.\n * @param {!Node} node\n * @return {!NodeList<!Node>}\n */\nfunction getChildNodes(node) {\n  return genericPropertyGet(\n      Methods.CHILD_NODES_GETTER, node, 'childNodes', function(childNodes) {\n        return childNodes instanceof NodeList;\n      });\n}\n\n/**\n * Appends a child to a node without falling prey to things like\n * <form><input name=\"appendChild\"></form>.\n * @param {!Node} parent\n * @param {!Node} child\n * @return {!Node}\n */\nfunction appendNodeChild(parent, child) {\n  return genericMethodCall(\n      Methods.APPEND_CHILD, parent, 'appendChild', [child]);\n}\n\n/**\n * Provides a way cross-browser way to get a CSS value from a CSS declaration.\n * @param {!CSSStyleDeclaration} cssStyle A CSS style object.\n * @param {string} propName A property name.\n * @return {string} Value of the property as parsed by the browser.\n * @supported IE8 and newer.\n */\nfunction getCssPropertyValue(cssStyle, propName) {\n  return genericMethodCall(\n             Methods.GET_PROPERTY_VALUE, cssStyle,\n             cssStyle.getPropertyValue ? 'getPropertyValue' : 'getAttribute',\n             [propName]) ||\n      '';\n}\n\n/**\n * Provides a cross-browser way to set a CSS value on a CSS declaration.\n * @param {!CSSStyleDeclaration} cssStyle A CSS style object.\n * @param {string} propName A property name.\n * @param {string} sanitizedValue Sanitized value of the property to be set\n *     on the CSS style object.\n * @supported IE8 and newer.\n */\nfunction setCssProperty(cssStyle, propName, sanitizedValue) {\n  genericMethodCall(\n      Methods.SET_PROPERTY, cssStyle,\n      cssStyle.setProperty ? 'setProperty' : 'setAttribute',\n      [propName, sanitizedValue]);\n}\n\nexports = {\n  getElementAttributes: getElementAttributes,\n  hasElementAttribute: hasElementAttribute,\n  getElementAttribute: getElementAttribute,\n  setElementAttribute: setElementAttribute,\n  removeElementAttribute: removeElementAttribute,\n  getElementInnerHTML: getElementInnerHTML,\n  getElementStyle: getElementStyle,\n  getElementsByTagName: getElementsByTagName,\n  getElementStyleSheet: getElementStyleSheet,\n  elementMatches: elementMatches,\n  assertNodeIsElement: assertNodeIsElement,\n  isNodeElement: isNodeElement,\n  getNodeName: getNodeName,\n  getNodeType: getNodeType,\n  getParentNode: getParentNode,\n  getChildNodes: getChildNodes,\n  appendNodeChild: appendNodeChild,\n  getCssPropertyValue: getCssPropertyValue,\n  setCssProperty: setCssProperty,\n  /** @package */\n  Methods: Methods,\n};\n","// Copyright 2016 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview\n * JavaScript support for client-side CSS sanitization.\n *\n * @author danesh@google.com (Danesh Irani)\n * @author mikesamuel@gmail.com (Mike Samuel)\n */\n\ngoog.provide('goog.html.sanitizer.CssSanitizer');\n\ngoog.require('goog.array');\ngoog.require('goog.dom');\ngoog.require('goog.dom.TagName');\ngoog.require('goog.html.CssSpecificity');\ngoog.require('goog.html.SafeStyle');\ngoog.require('goog.html.SafeStyleSheet');\ngoog.require('goog.html.SafeUrl');\ngoog.require('goog.html.sanitizer.noclobber');\ngoog.require('goog.html.uncheckedconversions');\ngoog.require('goog.object');\ngoog.require('goog.string');\ngoog.require('goog.userAgent');\ngoog.require('goog.userAgent.product');\n\n\n/**\n * The set of characters that need to be normalized inside url(\"...\").\n * We normalize newlines because they are not allowed inside quoted strings,\n * normalize quote characters, angle-brackets, and asterisks because they\n * could be used to break out of the URL or introduce targets for CSS\n * error recovery.  We normalize parentheses since they delimit unquoted\n * URLs and calls and could be a target for error recovery.\n * @const @private {!RegExp}\n */\ngoog.html.sanitizer.CssSanitizer.NORM_URL_REGEXP_ = /[\\n\\f\\r\\\"\\'()*<>]/g;\n\n\n/**\n * The replacements for NORM_URL_REGEXP.\n * @private @const {!Object<string, string>}\n */\ngoog.html.sanitizer.CssSanitizer.NORM_URL_REPLACEMENTS_ = {\n  '\\n': '%0a',\n  '\\f': '%0c',\n  '\\r': '%0d',\n  '\"': '%22',\n  '\\'': '%27',\n  '(': '%28',\n  ')': '%29',\n  '*': '%2a',\n  '<': '%3c',\n  '>': '%3e'\n};\n\n\n/**\n * A regular expression to match each selector in a CSS rule. Selectors are\n * separated by commas, but can have strings within them (e.g. foo[name=\"bar\"])\n * that can contain commas and escaped quotes.\n * @private {?RegExp}\n */\ngoog.html.sanitizer.CssSanitizer.SELECTOR_REGEX_ =\n    // Don't even evaluate it on older browsers (IE8 and IE9), it throws a\n    // syntax error and we don't use it anyway.\n    !(goog.userAgent.IE && document.documentMode < 10) ?\n    new RegExp(\n        '\\\\s*' +              // Discard initial space\n            '([^\\\\s\\'\",]+' +  // Beginning of the match. Anything but a comma,\n                              // spaces or a string delimiter. This is the only\n                              // non-optional component of the regex.\n            '[^\\'\",]*' +      // Spaces are fine afterwards (e.g. \"a > b\").\n            ('(' +  // A series of optional strings with matching delimiters\n                    // that can contain anything, and optional non-quoted text\n                    // without commas.\n             '(\\'([^\\'\\\\r\\\\n\\\\f\\\\\\\\]|\\\\\\\\[^])*\\')|' +  // Optional single-quoted\n                                                       // string.\n             '(\"([^\"\\\\r\\\\n\\\\f\\\\\\\\]|\\\\\\\\[^])*\")|' +     // Optional double-quoted\n                                                       // string.\n             '[^\\'\",]' +  // Optional non-string content.\n             ')*') +      // String and non-string\n                          // content can come in any\n                          // order.\n            ')',          // End of the match.\n        'g') :\n    null;\n\n\n/**\n * Normalizes a character for use in a url() directive.\n * @param {string} ch Character to be normalized.\n * @return {?string} Normalized character.\n * @private\n */\ngoog.html.sanitizer.CssSanitizer.normalizeUrlChar_ = function(ch) {\n  return goog.html.sanitizer.CssSanitizer.NORM_URL_REPLACEMENTS_[ch] || null;\n};\n\n\n/**\n * Constructs a safe URI from a given URI and prop using a given uriRewriter\n * function.\n * @param {string} uri URI to be sanitized.\n * @param {string} propName Property name which contained the URI.\n * @param {?function(string, string):?goog.html.SafeUrl} uriRewriter A URI\n *    rewriter that returns a goog.html.SafeUrl.\n * @return {?string} Safe URI for use in CSS.\n * @private\n */\ngoog.html.sanitizer.CssSanitizer.getSafeUri_ = function(\n    uri, propName, uriRewriter) {\n  if (!uriRewriter) {\n    return null;\n  }\n  var safeUri = uriRewriter(uri, propName);\n  if (safeUri &&\n      goog.html.SafeUrl.unwrap(safeUri) != goog.html.SafeUrl.INNOCUOUS_STRING) {\n    return 'url(\"' +\n        goog.html.SafeUrl.unwrap(safeUri).replace(\n            goog.html.sanitizer.CssSanitizer.NORM_URL_REGEXP_,\n            goog.html.sanitizer.CssSanitizer.normalizeUrlChar_) +\n        '\")';\n  }\n  return null;\n};\n\n\n/**\n * Used to detect the beginning of the argument list of a CSS property value\n * containing a CSS function call.\n * @private @const {string}\n */\ngoog.html.sanitizer.CssSanitizer.FUNCTION_ARGUMENTS_BEGIN_ = '(';\n\n\n/**\n * Used to detect the end of the argument list of a CSS property value\n * containing a CSS function call.\n * @private @const {string}\n */\ngoog.html.sanitizer.CssSanitizer.FUNCTION_ARGUMENTS_END_ = ')';\n\n\n/**\n * Allowed CSS functions\n * @const @private {!Array<string>}\n */\ngoog.html.sanitizer.CssSanitizer.ALLOWED_FUNCTIONS_ = [\n  'rgb',\n  'rgba',\n  'alpha',\n  'rect',\n  'image',\n  'linear-gradient',\n  'radial-gradient',\n  'repeating-linear-gradient',\n  'repeating-radial-gradient',\n  'cubic-bezier',\n  'matrix',\n  'perspective',\n  'rotate',\n  'rotate3d',\n  'rotatex',\n  'rotatey',\n  'steps',\n  'rotatez',\n  'scale',\n  'scale3d',\n  'scalex',\n  'scaley',\n  'scalez',\n  'skew',\n  'skewx',\n  'skewy',\n  'translate',\n  'translate3d',\n  'translatex',\n  'translatey',\n  'translatez'\n];\n\n\n/**\n * Removes a vendor prefix from a property name.\n * @param {string} propName A property name.\n * @return {string} A property name without vendor prefixes.\n * @private\n */\ngoog.html.sanitizer.CssSanitizer.withoutVendorPrefix_ = function(propName) {\n  // http://stackoverflow.com/a/5411098/20394 has a fairly extensive list\n  // of vendor prefices. Blink has not declared a vendor prefix distinct from\n  // -webkit- and http://css-tricks.com/tldr-on-vendor-prefix-drama/ discusses\n  // how Mozilla recognizes some -webkit- prefixes.\n  // http://wiki.csswg.org/spec/vendor-prefixes talks more about\n  // cross-implementation, and lists other prefixes.\n  return propName.replace(\n      /^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/i, '');\n};\n\n\n/**\n * Sanitizes the value for a given a browser-parsed CSS value.\n * @param {string} propName A property name.\n * @param {string} propValue Value of the property as parsed by the browser.\n * @param {function(string, string):?goog.html.SafeUrl=} opt_uriRewriter A URI\n *     rewriter that returns an unwrapped goog.html.SafeUrl.\n * @return {?string} Sanitized property value or null.\n * @private\n */\ngoog.html.sanitizer.CssSanitizer.sanitizeProperty_ = function(\n    propName, propValue, opt_uriRewriter) {\n  var outputPropValue = goog.string.trim(propValue);\n  if (outputPropValue == '') {\n    return null;\n  }\n\n  if (goog.string.caseInsensitiveStartsWith(outputPropValue, 'url(')) {\n    // Urls are rewritten according to the policy implemented in\n    // opt_uriRewriter.\n    // TODO(pelizzi): use HtmlSanitizerUrlPolicy for opt_uriRewriter.\n    if (!opt_uriRewriter) {\n      return null;\n    }\n    // TODO(danesh): Check if we need to resolve this URI.\n    var uri = goog.string.stripQuotes(\n        outputPropValue.substring(4, outputPropValue.length - 1), '\"\\'');\n\n    return goog.html.sanitizer.CssSanitizer.getSafeUri_(\n        uri, propName, opt_uriRewriter);\n  } else if (outputPropValue.indexOf('(') > 0) {\n    // Functions are filtered through a whitelist. Nesting whitelisted functions\n    // is not supported.\n    if (goog.string.countOf(\n            outputPropValue,\n            goog.html.sanitizer.CssSanitizer.FUNCTION_ARGUMENTS_BEGIN_) > 1 ||\n        !(goog.array.contains(\n              goog.html.sanitizer.CssSanitizer.ALLOWED_FUNCTIONS_,\n              outputPropValue\n                  .substring(\n                      0,\n                      outputPropValue.indexOf(goog.html.sanitizer.CssSanitizer\n                                                  .FUNCTION_ARGUMENTS_BEGIN_))\n                  .toLowerCase()) &&\n          goog.string.endsWith(\n              outputPropValue,\n              goog.html.sanitizer.CssSanitizer.FUNCTION_ARGUMENTS_END_))) {\n      // TODO(b/34222379): Handle functions that may need recursing or that may\n      // appear in the middle of a string. For now, just allow functions which\n      // aren't nested.\n      return null;\n    }\n    return outputPropValue;\n  } else {\n    // Everything else is allowed.\n    return outputPropValue;\n  }\n};\n\n\n/**\n * Sanitizes a {@link CSSStyleSheet}.\n * @param {!CSSStyleSheet} cssStyleSheet\n * @param {?string} containerId An ID to restrict the scope of the rules being\n *     sanitized. If null, no restriction is applied.\n * @param {function(string, string):?goog.html.SafeUrl|undefined} uriRewriter A\n *     URI rewriter that returns a goog.html.SafeUrl.\n * @return {!goog.html.SafeStyleSheet}\n * @private\n */\ngoog.html.sanitizer.CssSanitizer.sanitizeStyleSheet_ = function(\n    cssStyleSheet, containerId, uriRewriter) {\n  var sanitizedRules = [];\n  var cssRules = goog.html.sanitizer.CssSanitizer.getOnlyStyleRules_(\n      goog.array.toArray(cssStyleSheet.cssRules));\n  goog.array.forEach(cssRules, function(cssRule) {\n    if (containerId && !/[a-zA-Z][\\w-:\\.]*/.test(containerId)) {\n      // Sanity check on the element ID that will confine the new CSS rules.\n      throw new Error('Invalid container id');\n    }\n    if (containerId && goog.userAgent.product.IE &&\n        document.documentMode == 10 && /\\\\['\"]/.test(cssRule.selectorText)) {\n      // If a container ID was specified, drop selectors with escaped quotes in\n      // strings on IE 10 due to a regex bug.\n      return;\n    }\n    // If a container ID was specified, restrict all selectors in this rule to\n    // be descendants of the node with such an ID. Use a regex to exclude commas\n    // within selector strings.\n    var scopedSelector = containerId ?\n        cssRule.selectorText.replace(\n            goog.html.sanitizer.CssSanitizer.SELECTOR_REGEX_,\n            '#' + containerId + ' $1') :\n        cssRule.selectorText;\n    sanitizedRules.push(goog.html.SafeStyleSheet.createRule(\n        scopedSelector,\n        goog.html.sanitizer.CssSanitizer.sanitizeInlineStyle(\n            cssRule.style, uriRewriter)));\n  });\n  return goog.html.SafeStyleSheet.concat(sanitizedRules);\n};\n\n\n/**\n * Used to filter out at-rules like @media, @font, etc. Currently, none of these\n * are supported.\n * @param {!Array<!CSSRule>} cssRules\n * @return {!Array<!CSSStyleRule>}\n * @private\n */\n// TODO(pelizzi): some of these at-rules are safe, consider adding partial\n// support for them.\ngoog.html.sanitizer.CssSanitizer.getOnlyStyleRules_ = function(cssRules) {\n  return /** @type {!Array<!CSSStyleRule>} */ (\n      goog.array.filter(cssRules, function(cssRule) {\n        return cssRule instanceof CSSStyleRule ||\n            cssRule.type == CSSRule.STYLE_RULE;\n      }));\n};\n\n\n/**\n * Sanitizes the contents of a STYLE tag.\n * @param {string} textContent The textual content of the STYLE tag.\n * @param {?string=} opt_containerId The ID of a node that will contain the\n *     STYLE tag that includes the sanitized content, to restrict the effects of\n *     the rules being sanitized to descendants of this node.\n * @param {function(string, string):?goog.html.SafeUrl=} opt_uriRewriter A URI\n *     rewriter that returns a goog.html.SafeUrl.\n * @return {!goog.html.SafeStyleSheet}\n * @supported IE 10+, Chrome 26+, Firefox 22+, Safari 7.1+, Opera 15+. On IE10,\n *     support for escaped quotes inside quoted strings (e.g. `a[name=\"it\\'s\"]`)\n *     is unreliable, and some (but not all!) rules containing these are\n *     silently dropped.\n */\ngoog.html.sanitizer.CssSanitizer.sanitizeStyleSheetString = function(\n    textContent, opt_containerId, opt_uriRewriter) {\n  var styleTag =\n      goog.html.sanitizer.CssSanitizer.safeParseHtmlAndGetInertElement(\n          '<style>' + textContent + '</style>');\n  if (styleTag == null) {\n    return goog.html.SafeStyleSheet.EMPTY;\n  }\n  var containerId = opt_containerId != undefined ? opt_containerId : null;\n  return goog.html.sanitizer.CssSanitizer.sanitizeStyleSheet_(\n      styleTag.sheet, containerId, opt_uriRewriter);\n};\n\n\n/**\n * Returns an inert DOM tree produced by parsing the provided html using\n * DOMParser. \"Inert\" here means that merely parsing the string won't execute\n * scripts or load images. If you attach this tree to a non-inert document, it\n * will execute these side effects! In this package we prefer using the TEMPLATE\n * tag over DOMParser to produce inert trees, but at least on Chrome the inert\n * STYLE tag does not have a CSSStyleSheet object attached to it.\n * @param {string} html\n * @return {?Element}\n */\ngoog.html.sanitizer.CssSanitizer.safeParseHtmlAndGetInertElement = function(\n    html) {\n  if ((goog.userAgent.IE && !goog.userAgent.isVersionOrHigher(10)) ||\n      typeof goog.global.DOMParser != 'function') {\n    return null;\n  }\n  var parser = new DOMParser();\n  return parser\n      .parseFromString(\n          '<html><head></head><body>' + html + '</body></html>', 'text/html')\n      .body.children[0];\n};\n\n\n/**\n * Sanitizes an inline style attribute. Short-hand attributes are expanded to\n * their individual elements. Note: The sanitizer does not output vendor\n * prefixed styles.\n * @param {?CSSStyleDeclaration} cssStyle A CSS style object.\n * @param {function(string, string):?goog.html.SafeUrl=} opt_uriRewriter A URI\n *     rewriter that returns a goog.html.SafeUrl.\n * @return {!goog.html.SafeStyle} A sanitized inline cssText.\n */\ngoog.html.sanitizer.CssSanitizer.sanitizeInlineStyle = function(\n    cssStyle, opt_uriRewriter) {\n  if (!cssStyle) {\n    return goog.html.SafeStyle.EMPTY;\n  }\n\n  var cleanCssStyle = document.createElement('div').style;\n  var cssPropNames =\n      goog.html.sanitizer.CssSanitizer.getCssPropNames_(cssStyle);\n\n  for (var i = 0; i < cssPropNames.length; i++) {\n    var propName =\n        goog.html.sanitizer.CssSanitizer.withoutVendorPrefix_(cssPropNames[i]);\n    if (!goog.html.sanitizer.CssSanitizer.isDisallowedPropertyName_(propName)) {\n      var propValue =\n          goog.html.sanitizer.noclobber.getCssPropertyValue(cssStyle, propName);\n\n      var sanitizedValue = goog.html.sanitizer.CssSanitizer.sanitizeProperty_(\n          propName, propValue, opt_uriRewriter);\n      if (sanitizedValue != null) {\n        goog.html.sanitizer.noclobber.setCssProperty(\n            cleanCssStyle, propName, sanitizedValue);\n      }\n    }\n  }\n  return goog.html.uncheckedconversions\n      .safeStyleFromStringKnownToSatisfyTypeContract(\n          goog.string.Const.from('Output of CSS sanitizer'),\n          cleanCssStyle.cssText || '');\n};\n\n\n/**\n * Sanitizes inline CSS text and returns it as a SafeStyle object. When adequate\n * browser support is not available, such as for IE9 and below, a\n * SafeStyle-wrapped empty string is returned.\n * @param {string} cssText CSS text to be sanitized.\n * @param {function(string, string):?goog.html.SafeUrl=} opt_uriRewriter A URI\n *     rewriter that returns a goog.html.SafeUrl.\n * @return {!goog.html.SafeStyle} A sanitized inline cssText.\n */\ngoog.html.sanitizer.CssSanitizer.sanitizeInlineStyleString = function(\n    cssText, opt_uriRewriter) {\n  // same check as in goog.html.sanitizer.HTML_SANITIZER_SUPPORTED_\n  if (goog.userAgent.IE && document.documentMode < 10) {\n    return new goog.html.SafeStyle();\n  }\n\n  var div = goog.html.sanitizer.CssSanitizer\n      .createInertDocument_()\n      .createElement('DIV');\n  div.style.cssText = cssText;\n  return goog.html.sanitizer.CssSanitizer.sanitizeInlineStyle(\n      div.style, opt_uriRewriter);\n};\n\n\n/**\n * Converts rules in STYLE tags into style attributes on the tags they apply to.\n * Modifies the provided DOM subtree in-place.\n * @param {!Element} element\n * @package\n */\ngoog.html.sanitizer.CssSanitizer.inlineStyleRules = function(element) {\n  // Note that Webkit used to offer the perfect function for the job:\n  // getMatchedCSSRules. Unfortunately, it was never supported cross-browser and\n  // is deprecated now. On the other hand, getComputedStyle cannot be used to\n  // differentiate property values that are set by a style sheet from those set\n  // by a style attribute or default values. This algorithm with\n  // O(nr_of_elements * nr_of_rules) complexity that has to manually sort\n  // selectors by specificity is the best we can do.\n\n  // Extract all rules from STYLE tags found in the subtree.\n  /** @type {!Array<!HTMLStyleElement>} */\n  var styleTags =\n      goog.html.sanitizer.noclobber.getElementsByTagName(element, 'STYLE');\n  var cssRules = goog.array.concatMap(styleTags, function(styleTag) {\n    return goog.array.toArray(\n        goog.html.sanitizer.noclobber.getElementStyleSheet(styleTag).cssRules);\n  });\n  cssRules = goog.html.sanitizer.CssSanitizer.getOnlyStyleRules_(cssRules);\n  // Sort the rules by descending specificity.\n  cssRules.sort(function(a, b) {\n    var aSpecificity = goog.html.CssSpecificity.getSpecificity(a.selectorText);\n    var bSpecificity = goog.html.CssSpecificity.getSpecificity(b.selectorText);\n    return -goog.array.compare3(aSpecificity, bSpecificity);\n  });\n  // For each element, apply the matching rules to the element style attribute.\n  // If a property is already explicitly defined, do not update it. This\n  // guarantees that the rule with selectors with the highest priority (or the\n  // properties defined in the style attribute itself) have precedence over\n  // lower priority ones.\n  var subTreeWalker = document.createTreeWalker(\n      element, NodeFilter.SHOW_ELEMENT, null /* filter */,\n      false /* entityReferenceExpansion */);\n  var currentElement;\n  while (currentElement = /** @type {!Element} */ (subTreeWalker.nextNode())) {\n    goog.array.forEach(cssRules, function(rule) {\n      if (!goog.html.sanitizer.noclobber.elementMatches(\n              currentElement, rule.selectorText)) {\n        return;\n      }\n      if (!rule.style) {\n        return;\n      }\n      goog.html.sanitizer.CssSanitizer.mergeStyleDeclarations_(\n          currentElement, rule.style);\n    });\n  }\n  // Delete the STYLE tags.\n  goog.array.forEach(styleTags, goog.dom.removeNode);\n};\n\n\n/**\n * Merges style properties from `styleDeclaration` into\n * `element.style`.\n * @param {!Element} element\n * @param {!CSSStyleDeclaration} styleDeclaration\n * @private\n */\ngoog.html.sanitizer.CssSanitizer.mergeStyleDeclarations_ = function(\n    element, styleDeclaration) {\n  var existingPropNames =\n      goog.html.sanitizer.CssSanitizer.getCssPropNames_(element.style);\n  var newPropNames =\n      goog.html.sanitizer.CssSanitizer.getCssPropNames_(styleDeclaration);\n\n  goog.array.forEach(newPropNames, function(propName) {\n    if (existingPropNames.indexOf(propName) >= 0) {\n      // This was either a property set by the style attribute or a stylesheet\n      // rule with a higher priority. Leave the existing value.\n      return;\n    }\n    var propValue = goog.html.sanitizer.noclobber.getCssPropertyValue(\n        styleDeclaration, propName);\n    goog.html.sanitizer.noclobber.setCssProperty(\n        element.style, propName, propValue);\n  });\n};\n\n\n/**\n * Creates an DOM Document object that will not execute scripts or make\n * network requests while parsing HTML.\n * @return {!Document}\n * @private\n */\ngoog.html.sanitizer.CssSanitizer.createInertDocument_ = function() {\n  // Documents created using window.document.implementation.createHTMLDocument()\n  // use the same custom component registry as their parent document. This means\n  // that parsing arbitrary HTML can result in calls to user-defined JavaScript.\n  // This is worked around by creating a template element and its content's\n  // document. See https://github.com/cure53/DOMPurify/issues/47.\n  var doc = document;\n  if (typeof HTMLTemplateElement === 'function') {\n    doc =\n        goog.dom.createElement(goog.dom.TagName.TEMPLATE).content.ownerDocument;\n  }\n  return doc.implementation.createHTMLDocument('');\n};\n\n\n/**\n * Provides a cross-browser way to get a CSS property names.\n * @param {!CSSStyleDeclaration} cssStyle A CSS style object.\n * @return {!Array<string>} CSS property names.\n * @private\n */\ngoog.html.sanitizer.CssSanitizer.getCssPropNames_ = function(cssStyle) {\n  var propNames = [];\n  if (goog.isArrayLike(cssStyle)) {\n    // Gets property names via item().\n    // https://drafts.csswg.org/cssom/#dom-cssstyledeclaration-item\n    propNames = goog.array.toArray(cssStyle);\n  } else {\n    // In IE8 and other older browsers we have to iterate over all the property\n    // names. We skip cssText because it contains the unsanitized CSS, which\n    // defeats the purpose.\n    propNames = goog.object.getKeys(cssStyle);\n    goog.array.remove(propNames, 'cssText');\n  }\n  return propNames;\n};\n\n\n/**\n * Checks whether the property name specified should be disallowed.\n * @param {string} propName A property name.\n * @return {boolean} Whether the property name is disallowed.\n * @private\n */\ngoog.html.sanitizer.CssSanitizer.isDisallowedPropertyName_ = function(\n    propName) {\n  // getPropertyValue doesn't deal with custom variables properly and will NOT\n  // decode CSS escapes (but the browser will do so silently). Simply disallow\n  // custom variables (http://www.w3.org/TR/css-variables/#defining-variables).\n  return goog.string.startsWith(propName, '--') ||\n      goog.string.startsWith(propName, 'var');\n};\n","// Copyright 2017 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @package\n * @supported IE 10+ and other browsers. IE 8 and IE 9 could be supported by\n * by making anti-clobbering support optional.\n */\n\ngoog.module('goog.html.sanitizer.ElementWeakMap');\ngoog.module.declareLegacyNamespace();\n\nvar noclobber = goog.require('goog.html.sanitizer.noclobber');\n\n// We also need to check if WeakMap has been polyfilled, because we want to use\n// ElementWeakMap instead of the polyfill.\n/** @const {boolean} */\nvar NATIVE_WEAKMAP_SUPPORTED = typeof WeakMap != 'undefined' &&\n    WeakMap.toString().indexOf('[native code]') != -1;\n\n/** @const {string} */\nvar DATA_ATTRIBUTE_NAME_PREFIX = 'data-elementweakmap-index-';\n\n// Increased every time a new ElementWeakMap is constructed, to guarantee\n// that each weakmap uses a different attribute name.\nvar weakMapCount = 0;\n\n/**\n * A weakmap-like implementation for browsers that don't support native WeakMap.\n * It uses a data attribute on the key element for O(1) lookups.\n * @template T\n * @constructor\n */\nvar ElementWeakMap = function() {\n  /** @private {!Array<!Element>} */\n  this.keys_ = [];\n\n  /** @private {!Array<!T>} */\n  this.values_ = [];\n\n  /** @private @const {string} */\n  this.dataAttributeName_ = DATA_ATTRIBUTE_NAME_PREFIX + weakMapCount++;\n};\n\n/**\n * Stores a `elementKey` -> `value` mapping.\n * @param {!Element} elementKey\n * @param {!T} value\n * @return {!ElementWeakMap}\n */\nElementWeakMap.prototype.set = function(elementKey, value) {\n  if (noclobber.hasElementAttribute(elementKey, this.dataAttributeName_)) {\n    var itemIndex = parseInt(\n        noclobber.getElementAttribute(elementKey, this.dataAttributeName_), 10);\n    this.values_[itemIndex] = value;\n  } else {\n    var itemIndex = this.values_.push(value) - 1;\n    noclobber.setElementAttribute(\n        elementKey, this.dataAttributeName_, itemIndex.toString());\n    this.keys_.push(elementKey);\n  }\n  return this;\n};\n\n/**\n * Gets the value previously stored for `elementKey`, or undefined if no\n * value was stored for such key.\n * @param {!Element} elementKey\n * @return {!Element|undefined}\n */\nElementWeakMap.prototype.get = function(elementKey) {\n  if (!noclobber.hasElementAttribute(elementKey, this.dataAttributeName_)) {\n    return undefined;\n  }\n  var itemIndex = parseInt(\n      noclobber.getElementAttribute(elementKey, this.dataAttributeName_), 10);\n  return this.values_[itemIndex];\n};\n\n/** Clears the map. */\nElementWeakMap.prototype.clear = function() {\n  this.keys_.forEach(function(el) {\n    noclobber.removeElementAttribute(el, this.dataAttributeName_);\n  }, this);\n  this.keys_ = [];\n  this.values_ = [];\n};\n\n/**\n * Returns either this weakmap adapter or the native weakmap implmentation, if\n * available.\n * @return {!ElementWeakMap|!WeakMap}\n */\nElementWeakMap.newWeakMap = function() {\n  return NATIVE_WEAKMAP_SUPPORTED ? new WeakMap() : new ElementWeakMap();\n};\n\nexports = ElementWeakMap;\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Definition of the LogRecord class. Please minimize\n * dependencies this file has on other closure classes as any dependency it\n * takes won't be able to use the logging infrastructure.\n *\n */\n\ngoog.provide('goog.debug.LogRecord');\n\n\n\n/**\n * LogRecord objects are used to pass logging requests between\n * the logging framework and individual log Handlers.\n * @constructor\n * @param {goog.debug.Logger.Level} level One of the level identifiers.\n * @param {string} msg The string message.\n * @param {string} loggerName The name of the source logger.\n * @param {number=} opt_time Time this log record was created if other than now.\n *     If 0, we use #goog.now.\n * @param {number=} opt_sequenceNumber Sequence number of this log record. This\n *     should only be passed in when restoring a log record from persistence.\n */\ngoog.debug.LogRecord = function(\n    level, msg, loggerName, opt_time, opt_sequenceNumber) {\n  this.reset(level, msg, loggerName, opt_time, opt_sequenceNumber);\n};\n\n\n/**\n * Time the LogRecord was created.\n * @type {number}\n * @private\n */\ngoog.debug.LogRecord.prototype.time_;\n\n\n/**\n * Level of the LogRecord\n * @type {goog.debug.Logger.Level}\n * @private\n */\ngoog.debug.LogRecord.prototype.level_;\n\n\n/**\n * Message associated with the record\n * @type {string}\n * @private\n */\ngoog.debug.LogRecord.prototype.msg_;\n\n\n/**\n * Name of the logger that created the record.\n * @type {string}\n * @private\n */\ngoog.debug.LogRecord.prototype.loggerName_;\n\n\n/**\n * Sequence number for the LogRecord. Each record has a unique sequence number\n * that is greater than all log records created before it.\n * @type {number}\n * @private\n */\ngoog.debug.LogRecord.prototype.sequenceNumber_ = 0;\n\n\n/**\n * Exception associated with the record\n * @type {Object}\n * @private\n */\ngoog.debug.LogRecord.prototype.exception_ = null;\n\n\n/**\n * @define {boolean} Whether to enable log sequence numbers.\n */\ngoog.define('goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS', true);\n\n\n/**\n * A sequence counter for assigning increasing sequence numbers to LogRecord\n * objects.\n * @type {number}\n * @private\n */\ngoog.debug.LogRecord.nextSequenceNumber_ = 0;\n\n\n/**\n * Sets all fields of the log record.\n * @param {goog.debug.Logger.Level} level One of the level identifiers.\n * @param {string} msg The string message.\n * @param {string} loggerName The name of the source logger.\n * @param {number=} opt_time Time this log record was created if other than now.\n *     If 0, we use #goog.now.\n * @param {number=} opt_sequenceNumber Sequence number of this log record. This\n *     should only be passed in when restoring a log record from persistence.\n */\ngoog.debug.LogRecord.prototype.reset = function(\n    level, msg, loggerName, opt_time, opt_sequenceNumber) {\n  if (goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS) {\n    this.sequenceNumber_ = typeof opt_sequenceNumber == 'number' ?\n        opt_sequenceNumber :\n        goog.debug.LogRecord.nextSequenceNumber_++;\n  }\n\n  this.time_ = opt_time || goog.now();\n  this.level_ = level;\n  this.msg_ = msg;\n  this.loggerName_ = loggerName;\n  delete this.exception_;\n};\n\n\n/**\n * Get the source Logger's name.\n *\n * @return {string} source logger name (may be null).\n */\ngoog.debug.LogRecord.prototype.getLoggerName = function() {\n  return this.loggerName_;\n};\n\n\n/**\n * Get the exception that is part of the log record.\n *\n * @return {Object} the exception.\n */\ngoog.debug.LogRecord.prototype.getException = function() {\n  return this.exception_;\n};\n\n\n/**\n * Set the exception that is part of the log record.\n *\n * @param {Object} exception the exception.\n */\ngoog.debug.LogRecord.prototype.setException = function(exception) {\n  this.exception_ = exception;\n};\n\n\n/**\n * Get the source Logger's name.\n *\n * @param {string} loggerName source logger name (may be null).\n */\ngoog.debug.LogRecord.prototype.setLoggerName = function(loggerName) {\n  this.loggerName_ = loggerName;\n};\n\n\n/**\n * Get the logging message level, for example Level.SEVERE.\n * @return {goog.debug.Logger.Level} the logging message level.\n */\ngoog.debug.LogRecord.prototype.getLevel = function() {\n  return this.level_;\n};\n\n\n/**\n * Set the logging message level, for example Level.SEVERE.\n * @param {goog.debug.Logger.Level} level the logging message level.\n */\ngoog.debug.LogRecord.prototype.setLevel = function(level) {\n  this.level_ = level;\n};\n\n\n/**\n * Get the \"raw\" log message, before localization or formatting.\n *\n * @return {string} the raw message string.\n */\ngoog.debug.LogRecord.prototype.getMessage = function() {\n  return this.msg_;\n};\n\n\n/**\n * Set the \"raw\" log message, before localization or formatting.\n *\n * @param {string} msg the raw message string.\n */\ngoog.debug.LogRecord.prototype.setMessage = function(msg) {\n  this.msg_ = msg;\n};\n\n\n/**\n * Get event time in milliseconds since 1970.\n *\n * @return {number} event time in millis since 1970.\n */\ngoog.debug.LogRecord.prototype.getMillis = function() {\n  return this.time_;\n};\n\n\n/**\n * Set event time in milliseconds since 1970.\n *\n * @param {number} time event time in millis since 1970.\n */\ngoog.debug.LogRecord.prototype.setMillis = function(time) {\n  this.time_ = time;\n};\n\n\n/**\n * Get the sequence number.\n * <p>\n * Sequence numbers are normally assigned in the LogRecord\n * constructor, which assigns unique sequence numbers to\n * each new LogRecord in increasing order.\n * @return {number} the sequence number.\n */\ngoog.debug.LogRecord.prototype.getSequenceNumber = function() {\n  return this.sequenceNumber_;\n};\n","// Copyright 2010 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview A buffer for log records. The purpose of this is to improve\n * logging performance by re-using old objects when the buffer becomes full and\n * to eliminate the need for each app to implement their own log buffer. The\n * disadvantage to doing this is that log handlers cannot maintain references to\n * log records and expect that they are not overwriten at a later point.\n *\n * @author agrieve@google.com (Andrew Grieve)\n */\n\ngoog.provide('goog.debug.LogBuffer');\n\ngoog.require('goog.asserts');\ngoog.require('goog.debug.LogRecord');\n\n\n\n/**\n * Creates the log buffer.\n * @constructor\n * @final\n */\ngoog.debug.LogBuffer = function() {\n  goog.asserts.assert(\n      goog.debug.LogBuffer.isBufferingEnabled(),\n      'Cannot use goog.debug.LogBuffer without defining ' +\n          'goog.debug.LogBuffer.CAPACITY.');\n  this.clear();\n};\n\n\n/**\n * A static method that always returns the same instance of LogBuffer.\n * @return {!goog.debug.LogBuffer} The LogBuffer singleton instance.\n */\ngoog.debug.LogBuffer.getInstance = function() {\n  if (!goog.debug.LogBuffer.instance_) {\n    // This function is written with the return statement after the assignment\n    // to avoid the jscompiler StripCode bug described in http://b/2608064.\n    // After that bug is fixed this can be refactored.\n    goog.debug.LogBuffer.instance_ = new goog.debug.LogBuffer();\n  }\n  return goog.debug.LogBuffer.instance_;\n};\n\n\n/**\n * @define {number} The number of log records to buffer. 0 means disable\n * buffering.\n */\ngoog.define('goog.debug.LogBuffer.CAPACITY', 0);\n\n\n/**\n * The array to store the records.\n * @type {!Array<!goog.debug.LogRecord|undefined>}\n * @private\n */\ngoog.debug.LogBuffer.prototype.buffer_;\n\n\n/**\n * The index of the most recently added record or -1 if there are no records.\n * @type {number}\n * @private\n */\ngoog.debug.LogBuffer.prototype.curIndex_;\n\n\n/**\n * Whether the buffer is at capacity.\n * @type {boolean}\n * @private\n */\ngoog.debug.LogBuffer.prototype.isFull_;\n\n\n/**\n * Adds a log record to the buffer, possibly overwriting the oldest record.\n * @param {goog.debug.Logger.Level} level One of the level identifiers.\n * @param {string} msg The string message.\n * @param {string} loggerName The name of the source logger.\n * @return {!goog.debug.LogRecord} The log record.\n */\ngoog.debug.LogBuffer.prototype.addRecord = function(level, msg, loggerName) {\n  var curIndex = (this.curIndex_ + 1) % goog.debug.LogBuffer.CAPACITY;\n  this.curIndex_ = curIndex;\n  if (this.isFull_) {\n    var ret = this.buffer_[curIndex];\n    ret.reset(level, msg, loggerName);\n    return ret;\n  }\n  this.isFull_ = curIndex == goog.debug.LogBuffer.CAPACITY - 1;\n  return this.buffer_[curIndex] =\n             new goog.debug.LogRecord(level, msg, loggerName);\n};\n\n\n/**\n * @return {boolean} Whether the log buffer is enabled.\n */\ngoog.debug.LogBuffer.isBufferingEnabled = function() {\n  return goog.debug.LogBuffer.CAPACITY > 0;\n};\n\n\n/**\n * Removes all buffered log records.\n */\ngoog.debug.LogBuffer.prototype.clear = function() {\n  this.buffer_ = new Array(goog.debug.LogBuffer.CAPACITY);\n  this.curIndex_ = -1;\n  this.isFull_ = false;\n};\n\n\n/**\n * Calls the given function for each buffered log record, starting with the\n * oldest one.\n * @param {function(!goog.debug.LogRecord)} func The function to call.\n */\ngoog.debug.LogBuffer.prototype.forEachRecord = function(func) {\n  var buffer = this.buffer_;\n  // Corner case: no records.\n  if (!buffer[0]) {\n    return;\n  }\n  var curIndex = this.curIndex_;\n  var i = this.isFull_ ? curIndex : -1;\n  do {\n    i = (i + 1) % goog.debug.LogBuffer.CAPACITY;\n    func(/** @type {!goog.debug.LogRecord} */ (buffer[i]));\n  } while (i != curIndex);\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Definition of the Logger class. Please minimize dependencies\n * this file has on other closure classes as any dependency it takes won't be\n * able to use the logging infrastructure.\n *\n * @see ../demos/debug.html\n */\n\ngoog.provide('goog.debug.LogManager');\ngoog.provide('goog.debug.Loggable');\ngoog.provide('goog.debug.Logger');\ngoog.provide('goog.debug.Logger.Level');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.debug');\ngoog.require('goog.debug.LogBuffer');\ngoog.require('goog.debug.LogRecord');\n\n\n/**\n * A message value that can be handled by a Logger.\n *\n * Functions are treated like callbacks, but are only called when the event's\n * log level is enabled. This is useful for logging messages that are expensive\n * to construct.\n *\n * @typedef {string|function(): string}\n */\ngoog.debug.Loggable;\n\n\n\n/**\n * The Logger is an object used for logging debug messages. Loggers are\n * normally named, using a hierarchical dot-separated namespace. Logger names\n * can be arbitrary strings, but they should normally be based on the package\n * name or class name of the logged component, such as goog.net.BrowserChannel.\n *\n * The Logger object is loosely based on the java class\n * java.util.logging.Logger. It supports different levels of filtering for\n * different loggers.\n *\n * The logger object should never be instantiated by application code. It\n * should always use the goog.debug.Logger.getLogger function.\n *\n * @constructor\n * @param {string} name The name of the Logger.\n * @final\n */\ngoog.debug.Logger = function(name) {\n  /**\n   * Name of the Logger. Generally a dot-separated namespace\n   * @private {string}\n   */\n  this.name_ = name;\n\n  /**\n   * Parent Logger.\n   * @private {goog.debug.Logger}\n   */\n  this.parent_ = null;\n\n  /**\n   * Level that this logger only filters above. Null indicates it should\n   * inherit from the parent.\n   * @private {goog.debug.Logger.Level}\n   */\n  this.level_ = null;\n\n  /**\n   * Map of children loggers. The keys are the leaf names of the children and\n   * the values are the child loggers.\n   * @private {Object}\n   */\n  this.children_ = null;\n\n  /**\n   * Handlers that are listening to this logger.\n   * @private {Array<Function>}\n   */\n  this.handlers_ = null;\n};\n\n\n/** @const */\ngoog.debug.Logger.ROOT_LOGGER_NAME = '';\n\n\n/**\n * @define {boolean} Toggles whether loggers other than the root logger can have\n *     log handlers attached to them and whether they can have their log level\n *     set. Logging is a bit faster when this is set to false.\n */\ngoog.define('goog.debug.Logger.ENABLE_HIERARCHY', true);\n\n\n/**\n * @define {boolean} Toggles whether active log statements are also recorded\n *     to the profiler.\n */\ngoog.define('goog.debug.Logger.ENABLE_PROFILER_LOGGING', false);\n\n\nif (!goog.debug.Logger.ENABLE_HIERARCHY) {\n  /**\n   * @type {!Array<Function>}\n   * @private\n   */\n  goog.debug.Logger.rootHandlers_ = [];\n\n\n  /**\n   * @type {goog.debug.Logger.Level}\n   * @private\n   */\n  goog.debug.Logger.rootLevel_;\n}\n\n\n\n/**\n * The Level class defines a set of standard logging levels that\n * can be used to control logging output.  The logging Level objects\n * are ordered and are specified by ordered integers.  Enabling logging\n * at a given level also enables logging at all higher levels.\n * <p>\n * Clients should normally use the predefined Level constants such\n * as Level.SEVERE.\n * <p>\n * The levels in descending order are:\n * <ul>\n * <li>SEVERE (highest value)\n * <li>WARNING\n * <li>INFO\n * <li>CONFIG\n * <li>FINE\n * <li>FINER\n * <li>FINEST  (lowest value)\n * </ul>\n * In addition there is a level OFF that can be used to turn\n * off logging, and a level ALL that can be used to enable\n * logging of all messages.\n *\n * @param {string} name The name of the level.\n * @param {number} value The numeric value of the level.\n * @constructor\n * @final\n */\ngoog.debug.Logger.Level = function(name, value) {\n  /**\n   * The name of the level\n   * @type {string}\n   */\n  this.name = name;\n\n  /**\n   * The numeric value of the level\n   * @type {number}\n   */\n  this.value = value;\n};\n\n\n/**\n * @return {string} String representation of the logger level.\n * @override\n */\ngoog.debug.Logger.Level.prototype.toString = function() {\n  return this.name;\n};\n\n\n/**\n * OFF is a special level that can be used to turn off logging.\n * This level is initialized to <CODE>Infinity</CODE>.\n * @type {!goog.debug.Logger.Level}\n */\ngoog.debug.Logger.Level.OFF = new goog.debug.Logger.Level('OFF', Infinity);\n\n\n/**\n * SHOUT is a message level for extra debugging loudness.\n * This level is initialized to <CODE>1200</CODE>.\n * @type {!goog.debug.Logger.Level}\n */\ngoog.debug.Logger.Level.SHOUT = new goog.debug.Logger.Level('SHOUT', 1200);\n\n\n/**\n * SEVERE is a message level indicating a serious failure.\n * This level is initialized to <CODE>1000</CODE>.\n * @type {!goog.debug.Logger.Level}\n */\ngoog.debug.Logger.Level.SEVERE = new goog.debug.Logger.Level('SEVERE', 1000);\n\n\n/**\n * WARNING is a message level indicating a potential problem.\n * This level is initialized to <CODE>900</CODE>.\n * @type {!goog.debug.Logger.Level}\n */\ngoog.debug.Logger.Level.WARNING = new goog.debug.Logger.Level('WARNING', 900);\n\n\n/**\n * INFO is a message level for informational messages.\n * This level is initialized to <CODE>800</CODE>.\n * @type {!goog.debug.Logger.Level}\n */\ngoog.debug.Logger.Level.INFO = new goog.debug.Logger.Level('INFO', 800);\n\n\n/**\n * CONFIG is a message level for static configuration messages.\n * This level is initialized to <CODE>700</CODE>.\n * @type {!goog.debug.Logger.Level}\n */\ngoog.debug.Logger.Level.CONFIG = new goog.debug.Logger.Level('CONFIG', 700);\n\n\n/**\n * FINE is a message level providing tracing information.\n * This level is initialized to <CODE>500</CODE>.\n * @type {!goog.debug.Logger.Level}\n */\ngoog.debug.Logger.Level.FINE = new goog.debug.Logger.Level('FINE', 500);\n\n\n/**\n * FINER indicates a fairly detailed tracing message.\n * This level is initialized to <CODE>400</CODE>.\n * @type {!goog.debug.Logger.Level}\n */\ngoog.debug.Logger.Level.FINER = new goog.debug.Logger.Level('FINER', 400);\n\n/**\n * FINEST indicates a highly detailed tracing message.\n * This level is initialized to <CODE>300</CODE>.\n * @type {!goog.debug.Logger.Level}\n */\n\ngoog.debug.Logger.Level.FINEST = new goog.debug.Logger.Level('FINEST', 300);\n\n\n/**\n * ALL indicates that all messages should be logged.\n * This level is initialized to <CODE>0</CODE>.\n * @type {!goog.debug.Logger.Level}\n */\ngoog.debug.Logger.Level.ALL = new goog.debug.Logger.Level('ALL', 0);\n\n\n/**\n * The predefined levels.\n * @type {!Array<!goog.debug.Logger.Level>}\n * @final\n */\ngoog.debug.Logger.Level.PREDEFINED_LEVELS = [\n  goog.debug.Logger.Level.OFF, goog.debug.Logger.Level.SHOUT,\n  goog.debug.Logger.Level.SEVERE, goog.debug.Logger.Level.WARNING,\n  goog.debug.Logger.Level.INFO, goog.debug.Logger.Level.CONFIG,\n  goog.debug.Logger.Level.FINE, goog.debug.Logger.Level.FINER,\n  goog.debug.Logger.Level.FINEST, goog.debug.Logger.Level.ALL\n];\n\n\n/**\n * A lookup map used to find the level object based on the name or value of\n * the level object.\n * @type {Object}\n * @private\n */\ngoog.debug.Logger.Level.predefinedLevelsCache_ = null;\n\n\n/**\n * Creates the predefined levels cache and populates it.\n * @private\n */\ngoog.debug.Logger.Level.createPredefinedLevelsCache_ = function() {\n  goog.debug.Logger.Level.predefinedLevelsCache_ = {};\n  for (var i = 0, level; level = goog.debug.Logger.Level.PREDEFINED_LEVELS[i];\n       i++) {\n    goog.debug.Logger.Level.predefinedLevelsCache_[level.value] = level;\n    goog.debug.Logger.Level.predefinedLevelsCache_[level.name] = level;\n  }\n};\n\n\n/**\n * Gets the predefined level with the given name.\n * @param {string} name The name of the level.\n * @return {goog.debug.Logger.Level} The level, or null if none found.\n */\ngoog.debug.Logger.Level.getPredefinedLevel = function(name) {\n  if (!goog.debug.Logger.Level.predefinedLevelsCache_) {\n    goog.debug.Logger.Level.createPredefinedLevelsCache_();\n  }\n\n  return goog.debug.Logger.Level.predefinedLevelsCache_[name] || null;\n};\n\n\n/**\n * Gets the highest predefined level <= #value.\n * @param {number} value Level value.\n * @return {goog.debug.Logger.Level} The level, or null if none found.\n */\ngoog.debug.Logger.Level.getPredefinedLevelByValue = function(value) {\n  if (!goog.debug.Logger.Level.predefinedLevelsCache_) {\n    goog.debug.Logger.Level.createPredefinedLevelsCache_();\n  }\n\n  if (value in /** @type {!Object} */ (\n          goog.debug.Logger.Level.predefinedLevelsCache_)) {\n    return goog.debug.Logger.Level.predefinedLevelsCache_[value];\n  }\n\n  for (var i = 0; i < goog.debug.Logger.Level.PREDEFINED_LEVELS.length; ++i) {\n    var level = goog.debug.Logger.Level.PREDEFINED_LEVELS[i];\n    if (level.value <= value) {\n      return level;\n    }\n  }\n  return null;\n};\n\n\n/**\n * Finds or creates a logger for a named subsystem. If a logger has already been\n * created with the given name it is returned. Otherwise a new logger is\n * created. If a new logger is created its log level will be configured based\n * on the LogManager configuration and it will configured to also send logging\n * output to its parent's handlers. It will be registered in the LogManager\n * global namespace.\n *\n * @param {string} name A name for the logger. This should be a dot-separated\n * name and should normally be based on the package name or class name of the\n * subsystem, such as goog.net.BrowserChannel.\n * @return {!goog.debug.Logger} The named logger.\n * @deprecated use {@link goog.log} instead.\n */\ngoog.debug.Logger.getLogger = function(name) {\n  return goog.debug.LogManager.getLogger(name);\n};\n\n\n/**\n * Logs a message to profiling tools, if available.\n * {@see https://developers.google.com/web-toolkit/speedtracer/logging-api}\n * {@see http://msdn.microsoft.com/en-us/library/dd433074(VS.85).aspx}\n * @param {string} msg The message to log.\n */\ngoog.debug.Logger.logToProfilers = function(msg) {\n  // Some browsers also log timeStamp calls to the console, only log\n  // if actually asked.\n  if (goog.debug.Logger.ENABLE_PROFILER_LOGGING) {\n    var msWriteProfilerMark = goog.global['msWriteProfilerMark'];\n    if (msWriteProfilerMark) {\n      // Logs a message to the Microsoft profiler\n      // On IE, console['timeStamp'] may output to console\n      msWriteProfilerMark(msg);\n      return;\n    }\n\n    // Using goog.global, as loggers might be used in window-less contexts.\n    var console = goog.global['console'];\n    if (console && console['timeStamp']) {\n      // Logs a message to Firebug, Web Inspector, SpeedTracer, etc.\n      console['timeStamp'](msg);\n    }\n  }\n};\n\n\n/**\n * Gets the name of this logger.\n * @return {string} The name of this logger.\n */\ngoog.debug.Logger.prototype.getName = function() {\n  return this.name_;\n};\n\n\n/**\n * Adds a handler to the logger. This doesn't use the event system because\n * we want to be able to add logging to the event system.\n * @param {Function} handler Handler function to add.\n */\ngoog.debug.Logger.prototype.addHandler = function(handler) {\n  if (goog.debug.LOGGING_ENABLED) {\n    if (goog.debug.Logger.ENABLE_HIERARCHY) {\n      if (!this.handlers_) {\n        this.handlers_ = [];\n      }\n      this.handlers_.push(handler);\n    } else {\n      goog.asserts.assert(\n          !this.name_, 'Cannot call addHandler on a non-root logger when ' +\n              'goog.debug.Logger.ENABLE_HIERARCHY is false.');\n      goog.debug.Logger.rootHandlers_.push(handler);\n    }\n  }\n};\n\n\n/**\n * Removes a handler from the logger. This doesn't use the event system because\n * we want to be able to add logging to the event system.\n * @param {Function} handler Handler function to remove.\n * @return {boolean} Whether the handler was removed.\n */\ngoog.debug.Logger.prototype.removeHandler = function(handler) {\n  if (goog.debug.LOGGING_ENABLED) {\n    var handlers = goog.debug.Logger.ENABLE_HIERARCHY ?\n        this.handlers_ :\n        goog.debug.Logger.rootHandlers_;\n    return !!handlers && goog.array.remove(handlers, handler);\n  } else {\n    return false;\n  }\n};\n\n\n/**\n * Returns the parent of this logger.\n * @return {goog.debug.Logger} The parent logger or null if this is the root.\n */\ngoog.debug.Logger.prototype.getParent = function() {\n  return this.parent_;\n};\n\n\n/**\n * Returns the children of this logger as a map of the child name to the logger.\n * @return {!Object} The map where the keys are the child leaf names and the\n *     values are the Logger objects.\n */\ngoog.debug.Logger.prototype.getChildren = function() {\n  if (!this.children_) {\n    this.children_ = {};\n  }\n  return this.children_;\n};\n\n\n/**\n * Set the log level specifying which message levels will be logged by this\n * logger. Message levels lower than this value will be discarded.\n * The level value Level.OFF can be used to turn off logging. If the new level\n * is null, it means that this node should inherit its level from its nearest\n * ancestor with a specific (non-null) level value.\n *\n * @param {goog.debug.Logger.Level} level The new level.\n */\ngoog.debug.Logger.prototype.setLevel = function(level) {\n  if (goog.debug.LOGGING_ENABLED) {\n    if (goog.debug.Logger.ENABLE_HIERARCHY) {\n      this.level_ = level;\n    } else {\n      goog.asserts.assert(\n          !this.name_, 'Cannot call setLevel() on a non-root logger when ' +\n              'goog.debug.Logger.ENABLE_HIERARCHY is false.');\n      goog.debug.Logger.rootLevel_ = level;\n    }\n  }\n};\n\n\n/**\n * Gets the log level specifying which message levels will be logged by this\n * logger. Message levels lower than this value will be discarded.\n * The level value Level.OFF can be used to turn off logging. If the level\n * is null, it means that this node should inherit its level from its nearest\n * ancestor with a specific (non-null) level value.\n *\n * @return {goog.debug.Logger.Level} The level.\n */\ngoog.debug.Logger.prototype.getLevel = function() {\n  return goog.debug.LOGGING_ENABLED ? this.level_ : goog.debug.Logger.Level.OFF;\n};\n\n\n/**\n * Returns the effective level of the logger based on its ancestors' levels.\n * @return {goog.debug.Logger.Level} The level.\n */\ngoog.debug.Logger.prototype.getEffectiveLevel = function() {\n  if (!goog.debug.LOGGING_ENABLED) {\n    return goog.debug.Logger.Level.OFF;\n  }\n\n  if (!goog.debug.Logger.ENABLE_HIERARCHY) {\n    return goog.debug.Logger.rootLevel_;\n  }\n  if (this.level_) {\n    return this.level_;\n  }\n  if (this.parent_) {\n    return this.parent_.getEffectiveLevel();\n  }\n  goog.asserts.fail('Root logger has no level set.');\n  return null;\n};\n\n\n/**\n * Checks if a message of the given level would actually be logged by this\n * logger. This check is based on the Loggers effective level, which may be\n * inherited from its parent.\n * @param {goog.debug.Logger.Level} level The level to check.\n * @return {boolean} Whether the message would be logged.\n */\ngoog.debug.Logger.prototype.isLoggable = function(level) {\n  return goog.debug.LOGGING_ENABLED &&\n      level.value >= this.getEffectiveLevel().value;\n};\n\n\n/**\n * Logs a message. If the logger is currently enabled for the\n * given message level then the given message is forwarded to all the\n * registered output Handler objects.\n * @param {goog.debug.Logger.Level} level One of the level identifiers.\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error|Object=} opt_exception An exception associated with the\n *     message.\n */\ngoog.debug.Logger.prototype.log = function(level, msg, opt_exception) {\n  // java caches the effective level, not sure it's necessary here\n  if (goog.debug.LOGGING_ENABLED && this.isLoggable(level)) {\n    // Message callbacks can be useful when a log message is expensive to build.\n    if (goog.isFunction(msg)) {\n      msg = msg();\n    }\n\n    this.doLogRecord_(this.getLogRecord(level, msg, opt_exception));\n  }\n};\n\n\n/**\n * Creates a new log record and adds the exception (if present) to it.\n * @param {goog.debug.Logger.Level} level One of the level identifiers.\n * @param {string} msg The string message.\n * @param {Error|Object=} opt_exception An exception associated with the\n *     message.\n * @return {!goog.debug.LogRecord} A log record.\n * @suppress {es5Strict}\n */\ngoog.debug.Logger.prototype.getLogRecord = function(level, msg, opt_exception) {\n  if (goog.debug.LogBuffer.isBufferingEnabled()) {\n    var logRecord =\n        goog.debug.LogBuffer.getInstance().addRecord(level, msg, this.name_);\n  } else {\n    logRecord = new goog.debug.LogRecord(level, String(msg), this.name_);\n  }\n  if (opt_exception) {\n    logRecord.setException(opt_exception);\n  }\n  return logRecord;\n};\n\n\n/**\n * Logs a message at the Logger.Level.SHOUT level.\n * If the logger is currently enabled for the given message level then the\n * given message is forwarded to all the registered output Handler objects.\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error=} opt_exception An exception associated with the message.\n */\ngoog.debug.Logger.prototype.shout = function(msg, opt_exception) {\n  if (goog.debug.LOGGING_ENABLED) {\n    this.log(goog.debug.Logger.Level.SHOUT, msg, opt_exception);\n  }\n};\n\n\n/**\n * Logs a message at the Logger.Level.SEVERE level.\n * If the logger is currently enabled for the given message level then the\n * given message is forwarded to all the registered output Handler objects.\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error=} opt_exception An exception associated with the message.\n */\ngoog.debug.Logger.prototype.severe = function(msg, opt_exception) {\n  if (goog.debug.LOGGING_ENABLED) {\n    this.log(goog.debug.Logger.Level.SEVERE, msg, opt_exception);\n  }\n};\n\n\n/**\n * Logs a message at the Logger.Level.WARNING level.\n * If the logger is currently enabled for the given message level then the\n * given message is forwarded to all the registered output Handler objects.\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error=} opt_exception An exception associated with the message.\n */\ngoog.debug.Logger.prototype.warning = function(msg, opt_exception) {\n  if (goog.debug.LOGGING_ENABLED) {\n    this.log(goog.debug.Logger.Level.WARNING, msg, opt_exception);\n  }\n};\n\n\n/**\n * Logs a message at the Logger.Level.INFO level.\n * If the logger is currently enabled for the given message level then the\n * given message is forwarded to all the registered output Handler objects.\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error=} opt_exception An exception associated with the message.\n */\ngoog.debug.Logger.prototype.info = function(msg, opt_exception) {\n  if (goog.debug.LOGGING_ENABLED) {\n    this.log(goog.debug.Logger.Level.INFO, msg, opt_exception);\n  }\n};\n\n\n/**\n * Logs a message at the Logger.Level.CONFIG level.\n * If the logger is currently enabled for the given message level then the\n * given message is forwarded to all the registered output Handler objects.\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error=} opt_exception An exception associated with the message.\n */\ngoog.debug.Logger.prototype.config = function(msg, opt_exception) {\n  if (goog.debug.LOGGING_ENABLED) {\n    this.log(goog.debug.Logger.Level.CONFIG, msg, opt_exception);\n  }\n};\n\n\n/**\n * Logs a message at the Logger.Level.FINE level.\n * If the logger is currently enabled for the given message level then the\n * given message is forwarded to all the registered output Handler objects.\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error=} opt_exception An exception associated with the message.\n */\ngoog.debug.Logger.prototype.fine = function(msg, opt_exception) {\n  if (goog.debug.LOGGING_ENABLED) {\n    this.log(goog.debug.Logger.Level.FINE, msg, opt_exception);\n  }\n};\n\n\n/**\n * Logs a message at the Logger.Level.FINER level.\n * If the logger is currently enabled for the given message level then the\n * given message is forwarded to all the registered output Handler objects.\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error=} opt_exception An exception associated with the message.\n */\ngoog.debug.Logger.prototype.finer = function(msg, opt_exception) {\n  if (goog.debug.LOGGING_ENABLED) {\n    this.log(goog.debug.Logger.Level.FINER, msg, opt_exception);\n  }\n};\n\n\n/**\n * Logs a message at the Logger.Level.FINEST level.\n * If the logger is currently enabled for the given message level then the\n * given message is forwarded to all the registered output Handler objects.\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error=} opt_exception An exception associated with the message.\n */\ngoog.debug.Logger.prototype.finest = function(msg, opt_exception) {\n  if (goog.debug.LOGGING_ENABLED) {\n    this.log(goog.debug.Logger.Level.FINEST, msg, opt_exception);\n  }\n};\n\n\n/**\n * Logs a LogRecord. If the logger is currently enabled for the\n * given message level then the given message is forwarded to all the\n * registered output Handler objects.\n * @param {goog.debug.LogRecord} logRecord A log record to log.\n */\ngoog.debug.Logger.prototype.logRecord = function(logRecord) {\n  if (goog.debug.LOGGING_ENABLED && this.isLoggable(logRecord.getLevel())) {\n    this.doLogRecord_(logRecord);\n  }\n};\n\n\n/**\n * Logs a LogRecord.\n * @param {goog.debug.LogRecord} logRecord A log record to log.\n * @private\n */\ngoog.debug.Logger.prototype.doLogRecord_ = function(logRecord) {\n  if (goog.debug.Logger.ENABLE_PROFILER_LOGGING) {\n    goog.debug.Logger.logToProfilers('log:' + logRecord.getMessage());\n  }\n  if (goog.debug.Logger.ENABLE_HIERARCHY) {\n    var target = this;\n    while (target) {\n      target.callPublish_(logRecord);\n      target = target.getParent();\n    }\n  } else {\n    for (var i = 0, handler; handler = goog.debug.Logger.rootHandlers_[i++];) {\n      handler(logRecord);\n    }\n  }\n};\n\n\n/**\n * Calls the handlers for publish.\n * @param {goog.debug.LogRecord} logRecord The log record to publish.\n * @private\n */\ngoog.debug.Logger.prototype.callPublish_ = function(logRecord) {\n  if (this.handlers_) {\n    for (var i = 0, handler; handler = this.handlers_[i]; i++) {\n      handler(logRecord);\n    }\n  }\n};\n\n\n/**\n * Sets the parent of this logger. This is used for setting up the logger tree.\n * @param {goog.debug.Logger} parent The parent logger.\n * @private\n */\ngoog.debug.Logger.prototype.setParent_ = function(parent) {\n  this.parent_ = parent;\n};\n\n\n/**\n * Adds a child to this logger. This is used for setting up the logger tree.\n * @param {string} name The leaf name of the child.\n * @param {goog.debug.Logger} logger The child logger.\n * @private\n */\ngoog.debug.Logger.prototype.addChild_ = function(name, logger) {\n  this.getChildren()[name] = logger;\n};\n\n\n/**\n * There is a single global LogManager object that is used to maintain a set of\n * shared state about Loggers and log services. This is loosely based on the\n * java class java.util.logging.LogManager.\n * @const\n */\ngoog.debug.LogManager = {};\n\n\n/**\n * Map of logger names to logger objects.\n *\n * @type {!Object<string, !goog.debug.Logger>}\n * @private\n */\ngoog.debug.LogManager.loggers_ = {};\n\n\n/**\n * The root logger which is the root of the logger tree.\n * @type {goog.debug.Logger}\n * @private\n */\ngoog.debug.LogManager.rootLogger_ = null;\n\n\n/**\n * Initializes the LogManager if not already initialized.\n */\ngoog.debug.LogManager.initialize = function() {\n  if (!goog.debug.LogManager.rootLogger_) {\n    goog.debug.LogManager.rootLogger_ =\n        new goog.debug.Logger(goog.debug.Logger.ROOT_LOGGER_NAME);\n    goog.debug.LogManager.loggers_[goog.debug.Logger.ROOT_LOGGER_NAME] =\n        goog.debug.LogManager.rootLogger_;\n    goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG);\n  }\n};\n\n\n/**\n * Returns all the loggers.\n * @return {!Object<string, !goog.debug.Logger>} Map of logger names to logger\n *     objects.\n */\ngoog.debug.LogManager.getLoggers = function() {\n  return goog.debug.LogManager.loggers_;\n};\n\n\n/**\n * Returns the root of the logger tree namespace, the logger with the empty\n * string as its name.\n *\n * @return {!goog.debug.Logger} The root logger.\n */\ngoog.debug.LogManager.getRoot = function() {\n  goog.debug.LogManager.initialize();\n  return /** @type {!goog.debug.Logger} */ (goog.debug.LogManager.rootLogger_);\n};\n\n\n/**\n * Finds a named logger.\n *\n * @param {string} name A name for the logger. This should be a dot-separated\n * name and should normally be based on the package name or class name of the\n * subsystem, such as goog.net.BrowserChannel.\n * @return {!goog.debug.Logger} The named logger.\n */\ngoog.debug.LogManager.getLogger = function(name) {\n  goog.debug.LogManager.initialize();\n  var ret = goog.debug.LogManager.loggers_[name];\n  return ret || goog.debug.LogManager.createLogger_(name);\n};\n\n\n/**\n * Creates a function that can be passed to goog.debug.catchErrors. The function\n * will log all reported errors using the given logger.\n * @param {goog.debug.Logger=} opt_logger The logger to log the errors to.\n *     Defaults to the root logger.\n * @return {function(Object)} The created function.\n */\ngoog.debug.LogManager.createFunctionForCatchErrors = function(opt_logger) {\n  return function(info) {\n    var logger = opt_logger || goog.debug.LogManager.getRoot();\n    logger.severe(\n        'Error: ' + info.message + ' (' + info.fileName + ' @ Line: ' +\n        info.line + ')');\n  };\n};\n\n\n/**\n * Creates the named logger. Will also create the parents of the named logger\n * if they don't yet exist.\n * @param {string} name The name of the logger.\n * @return {!goog.debug.Logger} The named logger.\n * @private\n */\ngoog.debug.LogManager.createLogger_ = function(name) {\n  // find parent logger\n  var logger = new goog.debug.Logger(name);\n  if (goog.debug.Logger.ENABLE_HIERARCHY) {\n    var lastDotIndex = name.lastIndexOf('.');\n    var parentName = name.substr(0, lastDotIndex);\n    var leafName = name.substr(lastDotIndex + 1);\n    var parentLogger = goog.debug.LogManager.getLogger(parentName);\n\n    // tell the parent about the child and the child about the parent\n    parentLogger.addChild_(leafName, logger);\n    logger.setParent_(parentLogger);\n  }\n\n  goog.debug.LogManager.loggers_[name] = logger;\n  return logger;\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Basic strippable logging definitions.\n * @see http://go/closurelogging\n *\n * @author johnlenz@google.com (John Lenz)\n */\n\ngoog.provide('goog.log');\ngoog.provide('goog.log.Level');\ngoog.provide('goog.log.LogRecord');\ngoog.provide('goog.log.Logger');\n\ngoog.require('goog.debug');\ngoog.require('goog.debug.LogManager');\ngoog.require('goog.debug.LogRecord');\ngoog.require('goog.debug.Logger');\n\n\n/** @define {boolean} Whether logging is enabled. */\ngoog.define('goog.log.ENABLED', goog.debug.LOGGING_ENABLED);\n\n\n/** @const {string} */\ngoog.log.ROOT_LOGGER_NAME = goog.debug.Logger.ROOT_LOGGER_NAME;\n\n\n\n/**\n * @constructor\n * @final\n */\ngoog.log.Logger = goog.debug.Logger;\n\n\n\n/**\n * @constructor\n * @final\n */\ngoog.log.Level = goog.debug.Logger.Level;\n\n\n\n/**\n * @constructor\n * @final\n */\ngoog.log.LogRecord = goog.debug.LogRecord;\n\n\n/**\n * Finds or creates a logger for a named subsystem. If a logger has already been\n * created with the given name it is returned. Otherwise a new logger is\n * created. If a new logger is created its log level will be configured based\n * on the goog.debug.LogManager configuration and it will configured to also\n * send logging output to its parent's handlers.\n * @see goog.debug.LogManager\n *\n * @param {string} name A name for the logger. This should be a dot-separated\n *     name and should normally be based on the package name or class name of\n *     the subsystem, such as goog.net.BrowserChannel.\n * @param {goog.log.Level=} opt_level If provided, override the\n *     default logging level with the provided level.\n * @return {goog.log.Logger} The named logger or null if logging is disabled.\n */\ngoog.log.getLogger = function(name, opt_level) {\n  if (goog.log.ENABLED) {\n    var logger = goog.debug.LogManager.getLogger(name);\n    if (opt_level && logger) {\n      logger.setLevel(opt_level);\n    }\n    return logger;\n  } else {\n    return null;\n  }\n};\n\n\n// TODO(johnlenz): try to tighten the types to these functions.\n/**\n * Adds a handler to the logger. This doesn't use the event system because\n * we want to be able to add logging to the event system.\n * @param {goog.log.Logger} logger\n * @param {Function} handler Handler function to add.\n */\ngoog.log.addHandler = function(logger, handler) {\n  if (goog.log.ENABLED && logger) {\n    logger.addHandler(handler);\n  }\n};\n\n\n/**\n * Removes a handler from the logger. This doesn't use the event system because\n * we want to be able to add logging to the event system.\n * @param {goog.log.Logger} logger\n * @param {Function} handler Handler function to remove.\n * @return {boolean} Whether the handler was removed.\n */\ngoog.log.removeHandler = function(logger, handler) {\n  if (goog.log.ENABLED && logger) {\n    return logger.removeHandler(handler);\n  } else {\n    return false;\n  }\n};\n\n\n/**\n * Logs a message. If the logger is currently enabled for the\n * given message level then the given message is forwarded to all the\n * registered output Handler objects.\n * @param {goog.log.Logger} logger\n * @param {goog.log.Level} level One of the level identifiers.\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error|Object=} opt_exception An exception associated with the\n *     message.\n */\ngoog.log.log = function(logger, level, msg, opt_exception) {\n  if (goog.log.ENABLED && logger) {\n    logger.log(level, msg, opt_exception);\n  }\n};\n\n\n/**\n * Logs a message at the Level.SEVERE level.\n * If the logger is currently enabled for the given message level then the\n * given message is forwarded to all the registered output Handler objects.\n * @param {goog.log.Logger} logger\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error=} opt_exception An exception associated with the message.\n */\ngoog.log.error = function(logger, msg, opt_exception) {\n  if (goog.log.ENABLED && logger) {\n    logger.severe(msg, opt_exception);\n  }\n};\n\n\n/**\n * Logs a message at the Level.WARNING level.\n * If the logger is currently enabled for the given message level then the\n * given message is forwarded to all the registered output Handler objects.\n * @param {goog.log.Logger} logger\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error=} opt_exception An exception associated with the message.\n */\ngoog.log.warning = function(logger, msg, opt_exception) {\n  if (goog.log.ENABLED && logger) {\n    logger.warning(msg, opt_exception);\n  }\n};\n\n\n/**\n * Logs a message at the Level.INFO level.\n * If the logger is currently enabled for the given message level then the\n * given message is forwarded to all the registered output Handler objects.\n * @param {goog.log.Logger} logger\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error=} opt_exception An exception associated with the message.\n */\ngoog.log.info = function(logger, msg, opt_exception) {\n  if (goog.log.ENABLED && logger) {\n    logger.info(msg, opt_exception);\n  }\n};\n\n\n/**\n * Logs a message at the Level.Fine level.\n * If the logger is currently enabled for the given message level then the\n * given message is forwarded to all the registered output Handler objects.\n * @param {goog.log.Logger} logger\n * @param {goog.debug.Loggable} msg The message to log.\n * @param {Error=} opt_exception An exception associated with the message.\n */\ngoog.log.fine = function(logger, msg, opt_exception) {\n  if (goog.log.ENABLED && logger) {\n    logger.fine(msg, opt_exception);\n  }\n};\n","// Copyright 2017 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n/**\n * @fileoverview A base class to safely parse and transform an HTML string\n * using an inert DOM, which avoids executing scripts and loading images. Note:\n * this class does *not* guarantee that the output does not contain scripts and\n * images that eventually execute once the output is inserted into an active DOM\n * document. If any subclass claims to produce SafeHtml output, it must be\n * reviewed separately.\n * @supported IE 10+, Chrome 26+, Firefox 22+, Safari 7.1+, Opera 15+\n */\n\ngoog.module('goog.html.sanitizer.SafeDomTreeProcessor');\ngoog.module.declareLegacyNamespace();\n\nvar ElementWeakMap = goog.require('goog.html.sanitizer.ElementWeakMap');\nvar NodeType = goog.require('goog.dom.NodeType');\nvar TagName = goog.require('goog.dom.TagName');\nvar googDom = goog.require('goog.dom');\nvar googLog = goog.require('goog.log');\nvar noclobber = goog.require('goog.html.sanitizer.noclobber');\nvar userAgent = goog.require('goog.userAgent');\n\n/** @const {?googLog.Logger} */\nvar logger = googLog.getLogger('goog.html.sanitizer.SafeDomTreeProcessor');\n\n/**\n * Whether the HTML sanitizer is supported. For now mainly exclude\n * IE9 or below, for which we know the sanitizer is insecure or broken.\n * @const {boolean}\n */\nvar SAFE_PARSING_SUPPORTED =\n    !userAgent.IE || userAgent.isDocumentModeOrHigher(10);\n\n/**\n * Parses a string of unsanitized HTML and provides an iterator over the\n * resulting DOM tree nodes. The parsing operation is inert (that is,\n * it does not cause execution of any active content or cause the browser to\n * issue any requests). The returned iterator is guaranteed to iterate over a\n * parent element before iterating over any of its children.\n * @param {string} html\n * @return {!TreeWalker}\n */\nfunction getDomTreeWalker(html) {\n  var iteratorParent;\n  // Use a <template> element if possible.\n  var templateElement = document.createElement('template');\n  if ('content' in templateElement) {\n    templateElement.innerHTML = html;\n    iteratorParent = templateElement.content;\n  } else {\n    // In browsers where <template> is not implemented, use an inert\n    // HTMLDocument.\n    var doc = document.implementation.createHTMLDocument('x');\n    iteratorParent = doc.body;\n    doc.body.innerHTML = html;\n  }\n  return document.createTreeWalker(\n      iteratorParent, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT,\n      null /* filter */, false /* entityReferenceExpansion */);\n}\n\n/**\n * Constructs a {@link SafeDomTreeProcessor} object that safely parses an input\n * string into a DOM tree using an inert document, and creates a new tree based\n * on the original tree, optionally transforming it in the process. The\n * transformation is not specified in this abstract class; subclasses are\n * supposed to override its protected methods to define a transformation that\n * allows tags and attributes, drops entire subtrees, modifies tag names or\n * attributes, etc.\n * @constructor @struct @abstract\n */\nvar SafeDomTreeProcessor = function() {};\n\n/**\n * Parses an HTML string and walks the resulting DOM forest to apply the\n * transformation function and generate a new forest. Returns the string\n * representation of the forest.\n * @param {string} html\n * @return {string}\n * @protected @final\n */\nSafeDomTreeProcessor.prototype.processToString = function(html) {\n  if (!SAFE_PARSING_SUPPORTED) {\n    return '';\n  }\n\n  var newTree = this.processToTree(html);\n  if (noclobber.getElementAttributes(newTree).length > 0) {\n    // We want to preserve the outer SPAN tag, because the processor has\n    // attached attributes to it. To do so, we make a new SPAN tag the parent of\n    // the existing root span tag, so that the rest of the function will remove\n    // that one instead.\n    var newRoot = googDom.createElement(TagName.SPAN);\n    newRoot.appendChild(newTree);\n    newTree = newRoot;\n  }\n  // The XMLSerializer will add a spurious xmlns attribute to the root node.\n  var serializedNewTree = new XMLSerializer().serializeToString(newTree);\n  // Remove the outer span before returning the string representation of the\n  // processed copy.\n  return serializedNewTree.slice(\n      serializedNewTree.indexOf('>') + 1, serializedNewTree.lastIndexOf('</'));\n};\n\n/**\n * Parses an HTML string and walks the resulting DOM forest to apply the\n * transformation function and generate a copy of the forest. Returns the forest\n * wrapped in a common SPAN parent, so that the result is always a tree.\n * @param {string} html\n * @return {!HTMLSpanElement}\n * @protected @final\n */\nSafeDomTreeProcessor.prototype.processToTree = function(html) {\n  if (!SAFE_PARSING_SUPPORTED) {\n    return googDom.createElement(TagName.SPAN);\n  }\n  var newRoot = googDom.createElement(TagName.SPAN);\n  // Allow subclasses to attach properties to the root.\n  this.processRoot(newRoot);\n\n  // Allow subclasses to pre-process the HTML string before performing the main\n  // tree-based transformation.\n  html = this.preProcessHtml(html);\n  var originalTreeWalker = getDomTreeWalker(html);\n\n  // Mapping from original nodes to new nodes, used to find the parent to which\n  // a newly processed node should be attached.\n  var elementMap = ElementWeakMap.newWeakMap();\n\n  var originalNode;\n  while (originalNode = originalTreeWalker.nextNode()) {\n    // Make a copy of the node, potentially dropping it or changing its content,\n    // tag name, etc.\n    var newNode = this.createNode_(originalNode);\n    if (!newNode) {\n      // The transformation function chose not to copy over the node. We delete\n      // the children so that the current treeWalker will stop iterating on\n      // them.\n      googDom.removeChildren(originalNode);\n      continue;\n    }\n    if (noclobber.isNodeElement(newNode)) {\n      elementMap.set(originalNode, newNode);\n    }\n\n    // Finds the new parent to which newNode should be appended. The tree is\n    // copied top-down, so the parent of the current node has already been\n    // copied and placed into the new tree. The new parent is either the root\n    // of the new tree or a node found using originalToNewElementMap.\n    var originalParent = noclobber.getParentNode(originalNode);\n    var isParentRoot = false;\n    if (originalParent) {\n      var originalParentNodeType = noclobber.getNodeType(originalParent);\n      var originalParentNodeName =\n          noclobber.getNodeName(originalParent).toLowerCase();\n      var originalGrandParent = noclobber.getParentNode(originalParent);\n      // The following checks if newParent is an immediate child of the inert\n      // parent template element.\n      if (originalParentNodeType == NodeType.DOCUMENT_FRAGMENT &&\n          !originalGrandParent) {\n        isParentRoot = true;\n      } else if (originalParentNodeName == 'body' && originalGrandParent) {\n        // The following checks if newParent is an immediate child of the\n        // inert parent HtmlDocument.\n        var dirtyGreatGrandParent =\n            noclobber.getParentNode(originalGrandParent);\n        if (dirtyGreatGrandParent &&\n            !noclobber.getParentNode(dirtyGreatGrandParent)) {\n          isParentRoot = true;\n        }\n      }\n      var newParent = null;\n      if (isParentRoot || !originalParent) {\n        newParent = newRoot;\n      } else if (noclobber.isNodeElement(originalParent)) {\n        newParent = elementMap.get(originalParent);\n      }\n      if (newParent.content) {\n        newParent = newParent.content;\n      }\n      newParent.appendChild(newNode);\n    }\n  }\n  if (elementMap.clear) {\n    // Clear the map. On browsers that don't support WeakMap, entries are not\n    // automatically cleaned up.\n    elementMap.clear();\n  }\n  return newRoot;\n};\n\n/**\n * Creates the root SPAN element for the new tree. This function can be\n * overridden to add attributes to the tag. Note that if any attributes are\n * added to the element, then {@link processToString} will not strip it from the\n * generated string to preserve the attributes.\n * @param {!HTMLSpanElement} newRoot\n * @protected @abstract\n */\nSafeDomTreeProcessor.prototype.processRoot = function(newRoot) {};\n\n/**\n * Pre-processes the input html before the main tree-based transformation.\n * @param {string} html\n * @return {string}\n * @protected @abstract\n */\nSafeDomTreeProcessor.prototype.preProcessHtml = function(html) {};\n\n/**\n * Returns a new node based on the transformation of an original node, or null\n * if the node and all its children should not be copied over to the new tree.\n * @param {!Node} originalNode\n * @return {?Node}\n * @private\n */\nSafeDomTreeProcessor.prototype.createNode_ = function(originalNode) {\n  var nodeType = noclobber.getNodeType(originalNode);\n  switch (nodeType) {\n    case NodeType.TEXT:\n      return this.createTextNode(originalNode);\n    case NodeType.ELEMENT:\n      return this.createElement_(noclobber.assertNodeIsElement(originalNode));\n    default:\n      googLog.warning(logger, 'Dropping unknown node type: ' + nodeType);\n      return null;\n  }\n};\n\n/**\n * Creates a new text node from the original text node, or null if the node\n * should not be copied over to the new tree.\n * @param {!Node} originalNode\n * @return {?Node}\n * @protected @abstract\n */\nSafeDomTreeProcessor.prototype.createTextNode = function(originalNode) {};\n\n/**\n * Creates a new element from the original element, potentially applying\n * transformations to the element's tagname and attributes.\n * @param {!Element} originalElement\n * @return {?Element}\n * @private\n */\nSafeDomTreeProcessor.prototype.createElement_ = function(originalElement) {\n  if (noclobber.getNodeName(originalElement).toUpperCase() == 'TEMPLATE') {\n    // Processing TEMPLATE tags is not supported, they are automatically\n    // dropped.\n    return null;\n  }\n  var newElement = this.createElementWithoutAttributes(originalElement);\n  if (!newElement) {\n    return null;\n  }\n  // Copy over element attributes, applying a transformation on each attribute.\n  this.processElementAttributes_(originalElement, newElement);\n  return newElement;\n};\n\n/**\n * Creates a new element from the original element. This function should only\n * either create a new element (optionally changing the tag name from the\n * original element) or return null to prevent the entire subtree from appearing\n * in the output. Note that TEMPLATE tags and their contents are automatically\n * dropped, and this function is not called to decide whether to keep them or\n * not.\n * @param {!Element} originalElement\n * @return {?Element}\n * @protected @abstract\n */\nSafeDomTreeProcessor.prototype.createElementWithoutAttributes = function(\n    originalElement) {};\n\n/**\n * Copies over the attributes of an original node to its corresponding new node\n * generated with {@link processNode}.\n * @param {!Element} originalElement\n * @param {!Element} newElement\n * @private\n */\nSafeDomTreeProcessor.prototype.processElementAttributes_ = function(\n    originalElement, newElement) {\n  var attributes = noclobber.getElementAttributes(originalElement);\n  if (attributes == null) {\n    return;\n  }\n  for (var i = 0, attribute; attribute = attributes[i]; i++) {\n    if (attribute.specified) {\n      var newValue = this.processElementAttribute(originalElement, attribute);\n      if (!goog.isNull(newValue)) {\n        noclobber.setElementAttribute(newElement, attribute.name, newValue);\n      }\n    }\n  }\n};\n\n/**\n * Returns the new value for an attribute, or null if the attribute should be\n * dropped.\n * @param {!Element} element\n * @param {!Attr} attribute\n * @return {?string}\n * @protected @abstract\n */\nSafeDomTreeProcessor.prototype.processElementAttribute = function(\n    element, attribute) {};\n\n/** @const {boolean} */\nSafeDomTreeProcessor.SAFE_PARSING_SUPPORTED = SAFE_PARSING_SUPPORTED;\nexports = SafeDomTreeProcessor;\n","// Copyright 2016 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n/**\n * @fileoverview Contains the tag blacklist for use in the Html sanitizer.\n */\n\ngoog.provide('goog.html.sanitizer.TagBlacklist');\n\n\n/**\n * A list of tags which should be removed entirely from the DOM, rather than\n * merely being made inert. Tag names must be in all caps. Note that even if\n * TEMPLATE is removed from this blacklist (or even whitelisted) it will\n * continue to be removed from the HTML  as TEMPLATE is used interally to\n * denote nodes which should not be added to the sanitized HTML.\n * @const @dict {boolean}\n */\ngoog.html.sanitizer.TagBlacklist = {\n  'APPLET': true,\n  'AUDIO': true,\n  'BASE': true,\n  'BGSOUND': true,\n  'EMBED': true,\n  // Blacklisted by default, can be allowed using allowFormTag.\n  'FORM': true,\n  // NOTE: can remove this for old browser behavior\n  'IFRAME': true,\n  // Can result in network requests\n  'ISINDEX': true,\n  // Unused and just unnecessarily increase attack surface\n  'KEYGEN': true,\n  'LAYER': true,\n  'LINK': true,\n  'META': true,\n  'OBJECT': true,\n  'SCRIPT': true,\n  // Can result in an XSS in FF\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1205631\n  'SVG': true,\n  // Blacklisted by default, can be allowed using allowStyleTag.\n  'STYLE': true,\n  // Unsafe in most cases, and sanitizing its contents is not supported by the\n  // underlying SafeDomTreeProcessor.\n  'TEMPLATE': true,\n  'VIDEO': true\n};\n","// Copyright 2016 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n/**\n * @fileoverview Contains the tag whitelist for use in the Html sanitizer.\n */\n\ngoog.provide('goog.html.sanitizer.TagWhitelist');\n\n\n/**\n * A tag whitelist for allowed tags. Tag names must be in all caps.\n * @const @dict {boolean}\n */\ngoog.html.sanitizer.TagWhitelist = {\n  'A': true,           // HTMLAnchorElement\n  'ABBR': true,        // HTMLElement\n  'ACRONYM': true,     // HTMLElement\n  'ADDRESS': true,     // HTMLElement\n  'AREA': true,        // HTMLAreaElement\n  'ARTICLE': true,     // HTMLElement\n  'ASIDE': true,       // HTMLElement\n  'B': true,           // HTMLElement\n  'BDI': true,         // HTMLElement\n  'BDO': true,         // HTMLElement\n  'BIG': true,         // HTMLElement\n  'BLOCKQUOTE': true,  // HTMLQuoteElement\n  'BR': true,          // HTMLBRElement\n  'BUTTON': true,      // HTMLButtonElement\n  'CAPTION': true,     // HTMLTableCaptionElement\n  'CENTER': true,      // HTMLElement\n  'CITE': true,        // HTMLElement\n  'CODE': true,        // HTMLElement\n  'COL': true,         // HTMLTableColElement\n  'COLGROUP': true,    // HTMLTableColElement\n  'DATA': true,        // HTMLElement\n  'DATALIST': true,    // HTMLDataListElement\n  'DD': true,          // HTMLElement\n  'DEL': true,         // HTMLModElement\n  'DETAILS': true,     // HTMLDetailsElement\n  'DFN': true,         // HTMLElement\n  'DIALOG': true,      // HTMLDialogElement\n  'DIR': true,         // HTMLDirectoryElement\n  'DIV': true,         // HTMLDivElement\n  'DL': true,          // HTMLDListElement\n  'DT': true,          // HTMLElement\n  'EM': true,          // HTMLElement\n  'FIELDSET': true,    // HTMLFieldSetElement\n  'FIGCAPTION': true,  // HTMLElement\n  'FIGURE': true,      // HTMLElement\n  'FONT': true,        // HTMLFontElement\n  'FOOTER': true,      // HTMLElement\n  // Disallowed by default via tagBlacklist unless allowed via the builder.\n  'FORM': true,      // HTMLFormElement\n  'H1': true,        // HTMLHeadingElement\n  'H2': true,        // HTMLHeadingElement\n  'H3': true,        // HTMLHeadingElement\n  'H4': true,        // HTMLHeadingElement\n  'H5': true,        // HTMLHeadingElement\n  'H6': true,        // HTMLHeadingElement\n  'HEADER': true,    // HTMLElement\n  'HGROUP': true,    // HTMLElement\n  'HR': true,        // HTMLHRElement\n  'I': true,         // HTMLElement\n  'IMG': true,       // HTMLImageElement\n  'INPUT': true,     // HTMLInputElement\n  'INS': true,       // HTMLModElement\n  'KBD': true,       // HTMLElement\n  'LABEL': true,     // HTMLLabelElement\n  'LEGEND': true,    // HTMLLegendElement\n  'LI': true,        // HTMLLIElement\n  'MAIN': true,      // HTMLElement\n  'MAP': true,       // HTMLMapElement\n  'MARK': true,      // HTMLElement\n  'MENU': true,      // HTMLMenuElement\n  'METER': true,     // HTMLMeterElement\n  'NAV': true,       // HTMLElement\n  'NOSCRIPT': true,  // HTMLElement\n  'OL': true,        // HTMLOListElement\n  'OPTGROUP': true,  // HTMLOptGroupElement\n  'OPTION': true,    // HTMLOptionElement\n  'OUTPUT': true,    // HTMLOutputElement\n  'P': true,         // HTMLParagraphElement\n  'PRE': true,       // HTMLPreElement\n  'PROGRESS': true,  // HTMLProgressElement\n  'Q': true,         // HTMLQuoteElement\n  'S': true,         // HTMLElement\n  'SAMP': true,      // HTMLElement\n  'SECTION': true,   // HTMLElement\n  'SELECT': true,    // HTMLSelectElement\n  'SMALL': true,     // HTMLElement\n  'SOURCE': true,    // HTMLSourceElement\n  'SPAN': true,      // HTMLSpanElement\n  'STRIKE': true,    // HTMLElement\n  'STRONG': true,    // HTMLElement\n  // Disallowed by default via tagBlacklist unless allowed via the builder.\n  'STYLE': true,     // HTMLStyleElement\n  'SUB': true,       // HTMLElement\n  'SUMMARY': true,   // HTMLElement\n  'SUP': true,       // HTMLElement\n  'TABLE': true,     // HTMLTableElement\n  'TBODY': true,     // HTMLTableSectionElement\n  'TD': true,        // HTMLTableDataCellElement\n  'TEXTAREA': true,  // HTMLTextAreaElement\n  'TFOOT': true,     // HTMLTableSectionElement\n  'TH': true,        // HTMLTableHeaderCellElement\n  'THEAD': true,     // HTMLTableSectionElement\n  'TIME': true,      // HTMLTimeElement\n  'TR': true,        // HTMLTableRowElement\n  'TT': true,        // HTMLElement\n  'U': true,         // HTMLElement\n  'UL': true,        // HTMLUListElement\n  'VAR': true,       // HTMLElement\n  'WBR': true        // HTMLElement\n};\n","// Copyright 2016 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n/**\n * @fileoverview An HTML sanitizer that can satisfy a variety of security\n * policies.\n *\n * This package provides html sanitizing functions. It does not enforce string\n * to string conversion, instead returning a dom-like element when possible.\n *\n * Examples of usage of the static `goog.goog.html.sanitizer.sanitize`:\n * <pre>\n *   var safeHtml = goog.html.sanitizer.sanitize('<script src=\"xss.js\" />');\n *   goog.dom.safe.setInnerHtml(el, safeHtml);\n * </pre>\n *\n * @supported IE 10+, Chrome 26+, Firefox 22+, Safari 7.1+, Opera 15+\n */\n\ngoog.provide('goog.html.sanitizer.HtmlSanitizer');\ngoog.provide('goog.html.sanitizer.HtmlSanitizer.Builder');\ngoog.provide('goog.html.sanitizer.HtmlSanitizerAttributePolicy');\ngoog.provide('goog.html.sanitizer.HtmlSanitizerPolicy');\ngoog.provide('goog.html.sanitizer.HtmlSanitizerPolicyContext');\ngoog.provide('goog.html.sanitizer.HtmlSanitizerPolicyHints');\ngoog.provide('goog.html.sanitizer.HtmlSanitizerUrlPolicy');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.dom');\ngoog.require('goog.dom.TagName');\ngoog.require('goog.functions');\ngoog.require('goog.html.SafeHtml');\ngoog.require('goog.html.SafeStyle');\ngoog.require('goog.html.SafeStyleSheet');\ngoog.require('goog.html.SafeUrl');\ngoog.require('goog.html.sanitizer.AttributeSanitizedWhitelist');\ngoog.require('goog.html.sanitizer.AttributeWhitelist');\ngoog.require('goog.html.sanitizer.CssSanitizer');\ngoog.require('goog.html.sanitizer.SafeDomTreeProcessor');\ngoog.require('goog.html.sanitizer.TagBlacklist');\ngoog.require('goog.html.sanitizer.TagWhitelist');\ngoog.require('goog.html.sanitizer.noclobber');\ngoog.require('goog.html.uncheckedconversions');\ngoog.require('goog.object');\ngoog.require('goog.string');\ngoog.require('goog.string.Const');\ngoog.require('goog.userAgent');\n\n\n/**\n * Type for optional hints to policy handler functions.\n * @typedef {{\n *     tagName: (string|undefined),\n *     attributeName: (string|undefined),\n *     cssProperty: (string|undefined)\n *     }}\n */\ngoog.html.sanitizer.HtmlSanitizerPolicyHints;\n\n\n/**\n * Type for optional context objects to the policy handler functions.\n * @typedef {{\n *     cssStyle: (?CSSStyleDeclaration|undefined)\n *     }}\n */\ngoog.html.sanitizer.HtmlSanitizerPolicyContext;\n\n\n/**\n * Type for a policy function.\n * @typedef {function(string, goog.html.sanitizer.HtmlSanitizerPolicyHints=,\n *     goog.html.sanitizer.HtmlSanitizerPolicyContext=,\n *     (function(string, ?=, ?=, ?=):?string)=):?string}\n */\ngoog.html.sanitizer.HtmlSanitizerPolicy;\n\n\n/**\n * Type for a URL policy function.\n *\n * @typedef {function(string, !goog.html.sanitizer.HtmlSanitizerPolicyHints=):\n *     ?goog.html.SafeUrl}\n */\ngoog.html.sanitizer.HtmlSanitizerUrlPolicy;\n\n\n/**\n * Type for attribute policy configuration.\n * @typedef {{\n *     tagName: string,\n *     attributeName: string,\n *     policy: ?goog.html.sanitizer.HtmlSanitizerPolicy\n * }}\n */\ngoog.html.sanitizer.HtmlSanitizerAttributePolicy;\n\n\n/**\n * Whether the template tag is supported.\n * @package @const {boolean}\n */\ngoog.html.sanitizer.HTML_SANITIZER_TEMPLATE_SUPPORTED =\n    !goog.userAgent.IE || document.documentMode == null;\n\n\n/**\n * Prefix used by all internal html sanitizer booking properties.\n * @private @const {string}\n */\ngoog.html.sanitizer.HTML_SANITIZER_BOOKKEEPING_PREFIX_ = 'data-sanitizer-';\n\n\n/**\n * Attribute name added to span tags that replace unknown tags. The value of\n * this attribute is the name of the tag before the sanitization occurred.\n * @private @const {string}\n */\ngoog.html.sanitizer.HTML_SANITIZER_SANITIZED_ATTR_NAME_ =\n    goog.html.sanitizer.HTML_SANITIZER_BOOKKEEPING_PREFIX_ + 'original-tag';\n\n\n/**\n * Special value for the STYLE container ID, which makes the sanitizer choose\n * a new random ID on each call to {@link sanitize}.\n * @private @const {string}\n */\ngoog.html.sanitizer.RANDOM_CONTAINER_ = '*';\n\n\n\n/**\n * Creates an HTML sanitizer.\n * @param {!goog.html.sanitizer.HtmlSanitizer.Builder=} opt_builder\n * @final @constructor @struct\n * @extends {goog.html.sanitizer.SafeDomTreeProcessor}\n */\ngoog.html.sanitizer.HtmlSanitizer = function(opt_builder) {\n  goog.html.sanitizer.SafeDomTreeProcessor.call(this);\n\n  var builder = opt_builder || new goog.html.sanitizer.HtmlSanitizer.Builder();\n\n  builder.installPolicies_();\n\n  /**\n   * @private @const {!Object<string, !goog.html.sanitizer.HtmlSanitizerPolicy>}\n   */\n  this.attributeHandlers_ = goog.object.clone(builder.attributeWhitelist_);\n\n  /** @private @const {!Object<string, boolean>} */\n  this.tagBlacklist_ = goog.object.clone(builder.tagBlacklist_);\n\n  /** @private @const {!Object<string, boolean>} */\n  this.tagWhitelist_ = goog.object.clone(builder.tagWhitelist_);\n\n  /** @private @const {boolean} */\n  this.shouldAddOriginalTagNames_ = builder.shouldAddOriginalTagNames_;\n\n  // Add whitelist data-* attributes from the builder to the attributeHandlers\n  // with a default cleanUpAttribute function. data-* attributes are inert as\n  // per HTML5 specs, so not much sanitization needed.\n  goog.array.forEach(builder.dataAttributeWhitelist_, function(dataAttr) {\n    goog.asserts.assert(goog.string.startsWith(dataAttr, 'data-'));\n    goog.asserts.assert(!goog.string.startsWith(\n        dataAttr, goog.html.sanitizer.HTML_SANITIZER_BOOKKEEPING_PREFIX_));\n\n    this.attributeHandlers_['* ' + dataAttr.toUpperCase()] =\n        /** @type {!goog.html.sanitizer.HtmlSanitizerPolicy} */ (\n            goog.html.sanitizer.HtmlSanitizer.cleanUpAttribute_);\n  }, this);\n\n  /** @private @const {!goog.html.sanitizer.HtmlSanitizerUrlPolicy} */\n  this.networkRequestUrlPolicy_ = builder.networkRequestUrlPolicy_;\n\n  /** @private @const {?string} */\n  this.styleContainerId_ = builder.styleContainerId_;\n\n  /** @private {?string} */\n  this.currentStyleContainerId_ = null;\n\n  /** @private @const {boolean} */\n  this.inlineStyleRules_ = builder.inlineStyleRules_;\n};\ngoog.inherits(\n    goog.html.sanitizer.HtmlSanitizer,\n    goog.html.sanitizer.SafeDomTreeProcessor);\n\n\n/**\n * Transforms a {@link HtmlSanitizerUrlPolicy} into a\n * {@link HtmlSanitizerPolicy} by returning a wrapper that calls the {@link\n * HtmlSanitizerUrlPolicy} with the required arguments and unwraps the returned\n * {@link SafeUrl}. This is necessary because internally the sanitizer works\n * with {@HtmlSanitizerPolicy} to sanitize attributes, but its public API must\n * use {@HtmlSanitizerUrlPolicy} to ensure that callers do not violate SafeHtml\n * invariants in their custom handlers.\n * @param {!goog.html.sanitizer.HtmlSanitizerUrlPolicy} urlPolicy\n * @return {!goog.html.sanitizer.HtmlSanitizerPolicy}\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.wrapUrlPolicy_ = function(urlPolicy) {\n  return /** @type {!goog.html.sanitizer.HtmlSanitizerPolicy} */ (function(\n      url, policyHints) {\n    var trimmed = goog.html.sanitizer.HtmlSanitizer.cleanUpAttribute_(url);\n    var safeUrl = urlPolicy(trimmed, policyHints);\n    if (safeUrl &&\n        goog.html.SafeUrl.unwrap(safeUrl) !=\n            goog.html.SafeUrl.INNOCUOUS_STRING) {\n      return goog.html.SafeUrl.unwrap(safeUrl);\n    } else {\n      return null;\n    }\n  });\n};\n\n\n\n/**\n * The builder for the HTML Sanitizer. All methods except build return\n * `this`.\n * @final @constructor @struct\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder = function() {\n  /**\n   * A set of attribute sanitization functions. Default built-in handlers are\n   * all tag-agnostic by design. Note that some attributes behave differently\n   * when attached to different nodes (for example, the href attribute will\n   * generally not make a network request, but &lt;link href=\"\"&gt; does), and\n   * so when necessary a tag-specific handler can be used to override a\n   * tag-agnostic one.\n   * @private {!Object<string, !goog.html.sanitizer.HtmlSanitizerPolicy>}\n   */\n  this.attributeWhitelist_ = {};\n  goog.array.forEach(\n      [\n        goog.html.sanitizer.AttributeWhitelist,\n        goog.html.sanitizer.AttributeSanitizedWhitelist\n      ],\n      function(wl) {\n        goog.array.forEach(goog.object.getKeys(wl), function(attr) {\n          this.attributeWhitelist_[attr] =\n              /** @type {!goog.html.sanitizer.HtmlSanitizerPolicy} */\n              (goog.html.sanitizer.HtmlSanitizer.cleanUpAttribute_);\n        }, this);\n      },\n      this);\n\n  /**\n   * A set of attribute handlers that should not inherit their default policy\n   * during build().\n   * @private @const {!Object<string, boolean>}\n   */\n  this.attributeOverrideList_ = {};\n\n  /**\n   * List of data attributes to whitelist. Data-attributes are inert and don't\n   * require sanitization.\n   * @private @const {!Array<string>}\n   */\n  this.dataAttributeWhitelist_ = [];\n\n  /**\n   * A tag blacklist, to effectively remove an element and its children from the\n   * dom.\n   * @private @const {!Object<string, boolean>}\n   */\n  this.tagBlacklist_ = goog.object.clone(goog.html.sanitizer.TagBlacklist);\n\n  /**\n   * A tag whitelist, to effectively allow an element and its children from the\n   * dom.\n   * @private {!Object<string, boolean>}\n   */\n  this.tagWhitelist_ = goog.object.clone(goog.html.sanitizer.TagWhitelist);\n\n  /**\n   * Whether non-whitelisted and non-blacklisted tags that have been converted\n   * to &lt;span&rt; tags will contain the original tag in a data attribute.\n   * @private {boolean}\n   */\n  this.shouldAddOriginalTagNames_ = false;\n\n  /**\n   * A function to be applied to URLs found on the parsing process which do not\n   * trigger requests.\n   * @private {!goog.html.sanitizer.HtmlSanitizerUrlPolicy}\n   */\n  this.urlPolicy_ = goog.html.sanitizer.HtmlSanitizer.defaultUrlPolicy_;\n\n  /**\n   * A function to be applied to urls found on the parsing process which may\n   * trigger requests.\n   * @private {!goog.html.sanitizer.HtmlSanitizerUrlPolicy}\n   */\n  this.networkRequestUrlPolicy_ =\n      goog.html.sanitizer.HtmlSanitizer.defaultNetworkRequestUrlPolicy_;\n\n  /**\n   * A function to be applied to names found on the parsing process.\n   * @private {!goog.html.sanitizer.HtmlSanitizerPolicy}\n   */\n  this.namePolicy_ = goog.html.sanitizer.HtmlSanitizer.defaultNamePolicy_;\n\n  /**\n   * A function to be applied to other tokens (i.e. classes and IDs) found on\n   * the parsing process.\n   * @private {!goog.html.sanitizer.HtmlSanitizerPolicy}\n   */\n  this.tokenPolicy_ = goog.html.sanitizer.HtmlSanitizer.defaultTokenPolicy_;\n\n  /**\n   * A function to sanitize inline CSS styles. Defaults to deny all.\n   * @private {function(\n   *     !goog.html.sanitizer.HtmlSanitizerPolicy,\n   *     string,\n   *     !goog.html.sanitizer.HtmlSanitizerPolicyHints,\n   *     !goog.html.sanitizer.HtmlSanitizerPolicyContext):?string}\n   */\n  this.sanitizeInlineCssPolicy_ = goog.functions.NULL;\n\n  /**\n   * An optional ID to restrict the scope of CSS rules when STYLE tags are\n   * allowed.\n   * @private {?string}\n   */\n  this.styleContainerId_ = null;\n\n  /**\n   * Whether rules in STYLE tags should be inlined into style attributes.\n   * @private {boolean}\n   */\n  this.inlineStyleRules_ = false;\n\n  /**\n   * True iff policies have been installed for the instance.\n   * @private {boolean}\n   */\n  this.policiesInstalled_ = false;\n};\n\n\n/**\n * Extends the list of allowed data attributes.\n * @param {!Array<string>} dataAttributeWhitelist\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.allowDataAttributes =\n    function(dataAttributeWhitelist) {\n  goog.array.extend(this.dataAttributeWhitelist_, dataAttributeWhitelist);\n  return this;\n};\n\n\n/**\n * Allows form tags in the HTML. Without this all form tags and content will be\n * dropped.\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.allowFormTag = function() {\n  delete this.tagBlacklist_['FORM'];\n  return this;\n};\n\n\n/**\n * Allows STYLE tags. Note that the sanitizer wraps the output of each call to\n * {@link sanitize} with a SPAN tag, give it a random ID unique across multiple\n * calls, and then restrict all CSS rules found inside STYLE tags to only apply\n * to children of the SPAN tag. This means that CSS rules in STYLE tags will\n * only apply to content provided in the same call to {@link sanitize}. This\n * feature is not compatible with {@link inlineStyleRules}.\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.allowStyleTag = function() {\n  if (this.inlineStyleRules_) {\n    throw new Error('Rules from STYLE tags are already being inlined.');\n  }\n  delete this.tagBlacklist_['STYLE'];\n  this.styleContainerId_ = goog.html.sanitizer.RANDOM_CONTAINER_;\n  return this;\n};\n\n\n/**\n * Fixes the ID of the style container used for CSS rules found in STYLE tags,\n * and disables automatic wrapping with the container. This allows multiple\n * calls to {@link sanitize} to share STYLE rules. If opt_styleContainer is\n * missing, the sanitizer will stop restricting the scope of CSS rules\n * altogether. Requires {@link allowStyleTag} to be called first.\n * @param {string=} opt_styleContainer An optional container ID to restrict the\n *     scope of any CSS rule found in STYLE tags.\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.withStyleContainer =\n    function(opt_styleContainer) {\n  if ('STYLE' in this.tagBlacklist_) {\n    throw new Error('STYLE tags must first be allowed through allowStyleTag.');\n  }\n  if (opt_styleContainer != undefined) {\n    if (!/^[a-zA-Z][\\w-:\\.]*$/.test(opt_styleContainer)) {\n      throw new Error('Invalid ID.');\n    }\n    this.styleContainerId_ = opt_styleContainer;\n  } else {\n    this.styleContainerId_ = null;\n  }\n  return this;\n};\n\n\n/**\n * Converts rules in STYLE tags into style attributes on the tags they apply to.\n * This feature is not compatible with {@link withStyleContainer} and {@link\n * allowStyleTag}. This method requires {@link allowCssStyles} (otherwise rules\n * would be deleted after being inlined), and is not compatible with {@link\n * allowStyleTag}.\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.inlineStyleRules =\n    function() {\n  if (this.sanitizeInlineCssPolicy_ == goog.functions.NULL) {\n    throw new Error(\n        'Inlining style rules requires allowing STYLE attributes ' +\n        'first.');\n  }\n  if (!('STYLE' in this.tagBlacklist_)) {\n    throw new Error(\n        'You have already configured the builder to allow STYLE tags in the ' +\n        'output. Inlining style rules would prevent STYLE tags from ' +\n        'appearing in the output and conflict with such directive.');\n  }\n  this.inlineStyleRules_ = true;\n  return this;\n};\n\n\n/**\n * Allows inline CSS styles.\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.allowCssStyles =\n    function() {\n  this.sanitizeInlineCssPolicy_ =\n      goog.html.sanitizer.HtmlSanitizer.sanitizeCssDeclarationList_;\n  return this;\n};\n\n\n/**\n * Extends the tag whitelist (Package-internal utility method only).\n * @param {!Array<string>} tags The list of tags to be added to the whitelist.\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n * @package\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype\n    .alsoAllowTagsPrivateDoNotAccessOrElse = function(tags) {\n  goog.array.forEach(tags, function(tag) {\n    this.tagWhitelist_[tag.toUpperCase()] = true;\n  }, this);\n  return this;\n};\n\n\n/**\n * Extends the attribute whitelist (Package-internal utility method only).\n * @param {!Array<(string|!goog.html.sanitizer.HtmlSanitizerAttributePolicy)>}\n *     attrs The list of attributes to be added to the whitelist.\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n * @package\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype\n    .alsoAllowAttributesPrivateDoNotAccessOrElse = function(attrs) {\n  goog.array.forEach(attrs, function(attr) {\n    if (goog.isString(attr)) {\n      attr = {tagName: '*', attributeName: attr, policy: null};\n    }\n    var handlerName = goog.html.sanitizer.HtmlSanitizer.attrIdentifier_(\n        attr.tagName, attr.attributeName);\n    this.attributeWhitelist_[handlerName] = attr.policy ?\n        attr.policy :\n        /** @type {!goog.html.sanitizer.HtmlSanitizerPolicy} */ (\n            goog.html.sanitizer.HtmlSanitizer.cleanUpAttribute_);\n    this.attributeOverrideList_[handlerName] = true;\n  }, this);\n  return this;\n};\n\n\n/**\n * Allows only the provided whitelist of tags. Tags still need to be in the\n * TagWhitelist to be allowed.\n * <p>\n * SPAN tags are ALWAYS ALLOWED as part of the mechanism required to preserve\n * the HTML tree structure (when removing non-blacklisted tags and\n * non-whitelisted tags).\n * @param {!Array<string>} tagWhitelist\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n * @throws {Error} Thrown if an attempt is made to allow a non-whitelisted tag.\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.onlyAllowTags = function(\n    tagWhitelist) {\n  this.tagWhitelist_ = {'SPAN': true};\n  goog.array.forEach(tagWhitelist, function(tag) {\n    tag = tag.toUpperCase();\n    if (goog.html.sanitizer.TagWhitelist[tag]) {\n      this.tagWhitelist_[tag] = true;\n    } else {\n      throw new Error(\n          'Only whitelisted tags can be allowed. See ' +\n          'goog.html.sanitizer.TagWhitelist.');\n    }\n  }, this);\n  return this;\n};\n\n\n/**\n * Allows only the provided whitelist of attributes, possibly setting a custom\n * policy for them. The set of tag/attribute combinations need to be a subset of\n * the currently allowed combinations.\n * <p>\n * Note that you cannot define a generic handler for an attribute if only a\n * tag-specific one is present, and vice versa. To configure the sanitizer to\n * accept an attribute only for a specific tag when only a generic handler is\n * whitelisted, use the goog.html.sanitizer.HtmlSanitizerPolicyHints parameter\n * and simply reject the attribute in unwanted tags.\n * <p>\n * Also note that the sanitizer's policy is still called after the provided one,\n * to ensure that supplying misconfigured policy cannot introduce\n * vulnerabilities. To completely override an existing attribute policy or to\n * allow new attributes, see the goog.html.sanitizer.unsafe package.\n * @param {!Array<(string|!goog.html.sanitizer.HtmlSanitizerAttributePolicy)>}\n *     attrWhitelist The subset of attributes that the sanitizer will accept.\n *     Attributes can come in of two forms:\n *     - string: allow all values for this attribute on all tags.\n *     - HtmlSanitizerAttributePolicy: allows specifying a policy for a\n *         particular tag. The tagName can be \"*\", which means all tags. If no\n *         policy is passed, the default is to allow all values.\n *     The tag and attribute names are case-insensitive.\n *     Note that the policy for id, URLs, names etc is controlled separately\n *     (using withCustom* methods).\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n * @throws {Error} Thrown if an attempt is made to allow a non-whitelisted\n *     attribute.\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.onlyAllowAttributes =\n    function(attrWhitelist) {\n  var oldWhitelist = this.attributeWhitelist_;\n  this.attributeWhitelist_ = {};\n  goog.array.forEach(attrWhitelist, function(attr) {\n    if (goog.typeOf(attr) === 'string') {\n      attr = {tagName: '*', attributeName: attr.toUpperCase(), policy: null};\n    }\n    var handlerName = goog.html.sanitizer.HtmlSanitizer.attrIdentifier_(\n        attr.tagName, attr.attributeName);\n    if (!oldWhitelist[handlerName]) {\n      throw new Error('Only whitelisted attributes can be allowed.');\n    }\n    this.attributeWhitelist_[handlerName] = attr.policy ?\n        attr.policy :\n        /** @type {goog.html.sanitizer.HtmlSanitizerPolicy} */ (\n            goog.html.sanitizer.HtmlSanitizer.cleanUpAttribute_);\n  }, this);\n  return this;\n};\n\n\n/**\n * Adds the original tag name in the data attribute 'original-tag' when unknown\n * tags are sanitized to &lt;span&rt;, so that caller can distinguish them from\n * actual &lt;span&rt; tags.\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.addOriginalTagNames =\n    function() {\n  this.shouldAddOriginalTagNames_ = true;\n  return this;\n};\n\n\n/**\n * Sets a custom network URL policy.\n * @param {!goog.html.sanitizer.HtmlSanitizerUrlPolicy}\n *     customNetworkReqUrlPolicy\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype\n    .withCustomNetworkRequestUrlPolicy = function(customNetworkReqUrlPolicy) {\n  this.networkRequestUrlPolicy_ = customNetworkReqUrlPolicy;\n  return this;\n};\n\n\n/**\n * Sets a custom non-network URL policy.\n * @param {!goog.html.sanitizer.HtmlSanitizerUrlPolicy} customUrlPolicy\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.withCustomUrlPolicy =\n    function(customUrlPolicy) {\n  this.urlPolicy_ = customUrlPolicy;\n  return this;\n};\n\n\n/**\n * Sets a custom name policy.\n * @param {!goog.html.sanitizer.HtmlSanitizerPolicy} customNamePolicy\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.withCustomNamePolicy =\n    function(customNamePolicy) {\n  this.namePolicy_ = customNamePolicy;\n  return this;\n};\n\n\n/**\n * Sets a custom token policy.\n * @param {!goog.html.sanitizer.HtmlSanitizerPolicy} customTokenPolicy\n * @return {!goog.html.sanitizer.HtmlSanitizer.Builder}\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.withCustomTokenPolicy =\n    function(customTokenPolicy) {\n  this.tokenPolicy_ = customTokenPolicy;\n  return this;\n};\n\n\n/**\n * Wraps a custom policy function with the sanitizer's default policy.\n * @param {?goog.html.sanitizer.HtmlSanitizerPolicy} customPolicy The custom\n *     policy for the tag/attribute combination.\n * @param {!goog.html.sanitizer.HtmlSanitizerPolicy} defaultPolicy The\n *     sanitizer's policy that is always called after the custom policy.\n * @return {!goog.html.sanitizer.HtmlSanitizerPolicy}\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.wrapPolicy_ = function(\n    customPolicy, defaultPolicy) {\n  return /** @type {!goog.html.sanitizer.HtmlSanitizerPolicy} */ (function(\n      value, hints, ctx, policy) {\n    var result = customPolicy(value, hints, ctx, policy);\n    return result == null ? null : defaultPolicy(result, hints, ctx, policy);\n  });\n};\n\n\n/**\n * Installs the sanitizer's default policy for a specific tag/attribute\n * combination on the provided whitelist, but only if a policy already exists.\n * @param {!Object<string, !goog.html.sanitizer.HtmlSanitizerPolicy>}\n *     whitelist The whitelist to modify.\n * @param {!Object<string, boolean>} overrideList The set of attributes handlers\n *     that should not be wrapped with a default policy.\n * @param {string} key The tag/attribute combination\n * @param {!goog.html.sanitizer.HtmlSanitizerPolicy} defaultPolicy The\n *     sanitizer's policy.\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.installDefaultPolicy_ = function(\n    whitelist, overrideList, key, defaultPolicy) {\n  if (whitelist[key] && !overrideList[key]) {\n    whitelist[key] = goog.html.sanitizer.HtmlSanitizer.wrapPolicy_(\n        whitelist[key], defaultPolicy);\n  }\n};\n\n\n/**\n * Builds and returns a goog.html.sanitizer.HtmlSanitizer object.\n * @return {!goog.html.sanitizer.HtmlSanitizer}\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.build = function() {\n  return new goog.html.sanitizer.HtmlSanitizer(this);\n};\n\n\n/**\n * Installs the sanitization policies for the attributes.\n * May only be called once.\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.Builder.prototype.installPolicies_ =\n    function() {\n  if (this.policiesInstalled_) {\n    throw new Error('HtmlSanitizer.Builder.build() can only be used once.');\n  }\n\n  var installPolicy = goog.html.sanitizer.HtmlSanitizer.installDefaultPolicy_;\n\n  // Binding all the non-trivial attribute sanitizers to the appropriate,\n  // potentially customizable, handling functions at build().\n  installPolicy(\n      this.attributeWhitelist_, this.attributeOverrideList_, '* USEMAP',\n      /** @type {!goog.html.sanitizer.HtmlSanitizerPolicy} */ (\n          goog.html.sanitizer.HtmlSanitizer.sanitizeUrlFragment_));\n\n  var urlAttributes = ['* ACTION', '* CITE', '* HREF'];\n  var urlPolicy =\n      goog.html.sanitizer.HtmlSanitizer.wrapUrlPolicy_(this.urlPolicy_);\n  goog.array.forEach(urlAttributes, function(attribute) {\n    installPolicy(\n        this.attributeWhitelist_, this.attributeOverrideList_, attribute,\n        urlPolicy);\n  }, this);\n\n  var networkUrlAttributes = [\n    // LONGDESC can result in a network request. See b/23381636.\n    '* LONGDESC', '* SRC', 'LINK HREF'\n  ];\n  var networkRequestUrlPolicy =\n      goog.html.sanitizer.HtmlSanitizer.wrapUrlPolicy_(\n          this.networkRequestUrlPolicy_);\n  goog.array.forEach(networkUrlAttributes, function(attribute) {\n    installPolicy(\n        this.attributeWhitelist_, this.attributeOverrideList_, attribute,\n        networkRequestUrlPolicy);\n  }, this);\n\n  var nameAttributes = ['* FOR', '* HEADERS', '* NAME'];\n  goog.array.forEach(nameAttributes, function(attribute) {\n    installPolicy(\n        this.attributeWhitelist_, this.attributeOverrideList_, attribute,\n        /** @type {!goog.html.sanitizer.HtmlSanitizerPolicy} */ (goog.partial(\n            goog.html.sanitizer.HtmlSanitizer.sanitizeName_,\n            this.namePolicy_)));\n  }, this);\n\n  installPolicy(\n      this.attributeWhitelist_, this.attributeOverrideList_, 'A TARGET',\n      /** @type {!goog.html.sanitizer.HtmlSanitizerPolicy} */ (goog.partial(\n          goog.html.sanitizer.HtmlSanitizer.allowedAttributeValues_,\n          ['_blank', '_self'])));\n\n  installPolicy(\n      this.attributeWhitelist_, this.attributeOverrideList_, '* CLASS',\n      /** @type {!goog.html.sanitizer.HtmlSanitizerPolicy} */ (goog.partial(\n          goog.html.sanitizer.HtmlSanitizer.sanitizeClasses_,\n          this.tokenPolicy_)));\n\n  installPolicy(\n      this.attributeWhitelist_, this.attributeOverrideList_, '* ID',\n      /** @type {!goog.html.sanitizer.HtmlSanitizerPolicy} */ (goog.partial(\n          goog.html.sanitizer.HtmlSanitizer.sanitizeId_, this.tokenPolicy_)));\n\n  installPolicy(\n      this.attributeWhitelist_, this.attributeOverrideList_, '* STYLE',\n      /** @type {!goog.html.sanitizer.HtmlSanitizerPolicy} */\n      (goog.partial(this.sanitizeInlineCssPolicy_, networkRequestUrlPolicy)));\n\n  this.policiesInstalled_ = true;\n};\n\n\n/**\n * The default policy for URLs: allow any.\n * @private @const {!goog.html.sanitizer.HtmlSanitizerUrlPolicy}\n */\ngoog.html.sanitizer.HtmlSanitizer.defaultUrlPolicy_ =\n    goog.html.SafeUrl.sanitize;\n\n\n/**\n * The default policy for URLs which cause network requests: drop all.\n * @private @const {!goog.html.sanitizer.HtmlSanitizerUrlPolicy}\n */\ngoog.html.sanitizer.HtmlSanitizer.defaultNetworkRequestUrlPolicy_ =\n    goog.functions.NULL;\n\n\n/**\n * The default policy for attribute names: drop all.\n * @private @const {!goog.html.sanitizer.HtmlSanitizerPolicy}\n */\ngoog.html.sanitizer.HtmlSanitizer.defaultNamePolicy_ = goog.functions.NULL;\n\n\n/**\n * The default policy for other tokens (i.e. class names and IDs): drop all.\n * @private @const {!goog.html.sanitizer.HtmlSanitizerPolicy}\n */\ngoog.html.sanitizer.HtmlSanitizer.defaultTokenPolicy_ = goog.functions.NULL;\n\n\n\n/**\n * Returns a key into the attribute handlers dictionary given a node name and\n * an attribute name. If no node name is given, returns a key applying to all\n * nodes.\n * @param {?string} nodeName\n * @param {string} attributeName\n * @return {string} key into attribute handlers dict\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.attrIdentifier_ = function(\n    nodeName, attributeName) {\n  if (!nodeName) {\n    nodeName = '*';\n  }\n  return (nodeName + ' ' + attributeName).toUpperCase();\n};\n\n\n/**\n * Sanitizes a list of CSS declarations.\n * @param {goog.html.sanitizer.HtmlSanitizerPolicy} policySanitizeUrl\n * @param {string} attrValue\n * @param {goog.html.sanitizer.HtmlSanitizerPolicyHints} policyHints\n * @param {goog.html.sanitizer.HtmlSanitizerPolicyContext} policyContext\n * @return {?string} sanitizedCss from the policyContext\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.sanitizeCssDeclarationList_ = function(\n    policySanitizeUrl, attrValue, policyHints, policyContext) {\n  if (!policyContext.cssStyle) {\n    return null;\n  }\n  var naiveUriRewriter = function(uri, prop) {\n    policyHints.cssProperty = prop;\n    var sanitizedUrl = policySanitizeUrl(uri, policyHints);\n    if (sanitizedUrl == null) {\n      return null;\n    }\n    return goog.html.uncheckedconversions\n        .safeUrlFromStringKnownToSatisfyTypeContract(\n            goog.string.Const.from(\n                'HtmlSanitizerPolicy created with networkRequestUrlPolicy_ ' +\n                'when installing \\'* STYLE\\' handler.'),\n            sanitizedUrl);\n  };\n  var sanitizedStyle = goog.html.SafeStyle.unwrap(\n      goog.html.sanitizer.CssSanitizer.sanitizeInlineStyle(\n          policyContext.cssStyle, naiveUriRewriter));\n  return sanitizedStyle == '' ? null : sanitizedStyle;\n};\n\n\n/**\n * Cleans up an attribute value that we don't particularly want to do anything\n * to. At the moment we just trim the whitespace.\n * @param {string} attrValue\n * @return {string} sanitizedAttrValue\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.cleanUpAttribute_ = function(attrValue) {\n  return goog.string.trim(attrValue);\n};\n\n\n/**\n * Allows a set of attribute values.\n * @param {!Array<string>} allowedValues Set of allowed values lowercased.\n * @param {string} attrValue\n * @param {goog.html.sanitizer.HtmlSanitizerPolicyHints} policyHints\n * @return {?string} sanitizedAttrValue\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.allowedAttributeValues_ = function(\n    allowedValues, attrValue, policyHints) {\n  var trimmed = goog.string.trim(attrValue);\n  return goog.array.contains(allowedValues, trimmed.toLowerCase()) ? trimmed :\n                                                                     null;\n};\n\n\n/**\n * Sanitizes URL fragments.\n * @param {string} urlFragment\n * @param {goog.html.sanitizer.HtmlSanitizerPolicyHints} policyHints\n * @return {?string} sanitizedAttrValue\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.sanitizeUrlFragment_ = function(\n    urlFragment, policyHints) {\n  var trimmed = goog.string.trim(urlFragment);\n  if (trimmed && trimmed.charAt(0) == '#') {\n    // We do not apply the name or token policy to Url Fragments by design.\n    return trimmed;\n  }\n  return null;\n};\n\n\n/**\n * Runs an attribute name through a name policy.\n * @param {goog.html.sanitizer.HtmlSanitizerPolicy} namePolicy\n * @param {string} attrName\n * @param {goog.html.sanitizer.HtmlSanitizerPolicyHints} policyHints\n * @return {?string} sanitizedAttrValue\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.sanitizeName_ = function(\n    namePolicy, attrName, policyHints) {\n  var trimmed = goog.string.trim(attrName);\n  /* NOTE(user):\n   * There are two cases to be concerned about - escaped quotes in attribute\n   * values which is the responsibility of the serializer and illegal\n   * characters.  The latter does violate the spec but I do not believe it has\n   * a security consequence.\n   */\n  return namePolicy(trimmed, policyHints);\n};\n\n\n/**\n * Ensures that the class prefix is present on all space-separated tokens\n * (i.e. all class names).\n * @param {goog.html.sanitizer.HtmlSanitizerPolicy} tokenPolicy\n * @param {string} attrValue\n * @param {goog.html.sanitizer.HtmlSanitizerPolicyHints} policyHints\n * @return {?string} sanitizedAttrValue\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.sanitizeClasses_ = function(\n    tokenPolicy, attrValue, policyHints) {\n  var classes = attrValue.split(/(?:\\s+)/);\n  var sanitizedClasses = [];\n  for (var i = 0; i < classes.length; i++) {\n    var sanitizedClass = tokenPolicy(classes[i], policyHints);\n    if (sanitizedClass) {\n      sanitizedClasses.push(sanitizedClass);\n    }\n  }\n  return sanitizedClasses.length == 0 ? null : sanitizedClasses.join(' ');\n};\n\n\n/**\n * Ensures that the id prefix is present.\n * @param {goog.html.sanitizer.HtmlSanitizerPolicy} tokenPolicy\n * @param {string} attrValue\n * @param {goog.html.sanitizer.HtmlSanitizerPolicyHints} policyHints\n * @return {?string} sanitizedAttrValue\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.sanitizeId_ = function(\n    tokenPolicy, attrValue, policyHints) {\n  var trimmed = goog.string.trim(attrValue);\n  return tokenPolicy(trimmed, policyHints);\n};\n\n\n/**\n * Retrieves a HtmlSanitizerPolicyContext from a dirty node given an attribute\n * name.\n * @param {string} attributeName\n * @param {!Element} dirtyElement\n * @return {!goog.html.sanitizer.HtmlSanitizerPolicyContext}\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.getContext_ = function(\n    attributeName, dirtyElement) {\n  var policyContext = {cssStyle: undefined};\n  if (attributeName == 'style') {\n    policyContext.cssStyle =\n        goog.html.sanitizer.noclobber.getElementStyle(dirtyElement);\n  }\n  return policyContext;\n};\n\n\n/**\n * Parses the DOM tree of a given HTML string, then walks the tree. For each\n * element, it creates a new sanitized version, applies sanitized attributes,\n * and returns a SafeHtml object representing the sanitized tree.\n * @param {string} unsanitizedHtml\n * @return {!goog.html.SafeHtml} Sanitized HTML\n */\ngoog.html.sanitizer.HtmlSanitizer.prototype.sanitize = function(\n    unsanitizedHtml) {\n  this.currentStyleContainerId_ = this.getStyleContainerId_();\n  var sanitizedString = this.processToString(unsanitizedHtml);\n  return goog.html.uncheckedconversions\n      .safeHtmlFromStringKnownToSatisfyTypeContract(\n          goog.string.Const.from('Output of HTML sanitizer'), sanitizedString);\n};\n\n\n/**\n * Parses the DOM tree of a given HTML string, then walks the tree. For each\n * element, it creates a new sanitized version, applies sanitized attributes,\n * and returns a span element containing the sanitized content. The root element\n * might define a class name to restrict the visibility of CSS rules contained\n * in tree.\n * @param {string} unsanitizedHtml\n * @return {!HTMLSpanElement} Sanitized HTML\n */\ngoog.html.sanitizer.HtmlSanitizer.prototype.sanitizeToDomNode = function(\n    unsanitizedHtml) {\n  this.currentStyleContainerId_ = this.getStyleContainerId_();\n  return goog.html.sanitizer.SafeDomTreeProcessor.prototype.processToTree.call(\n      this, unsanitizedHtml);\n};\n\n\n/** @override */\ngoog.html.sanitizer.HtmlSanitizer.prototype.processRoot = function(newRoot) {\n  // If the container ID was manually specified, we let the caller add the\n  // ancestor to activate the rules.\n  if (this.currentStyleContainerId_ &&\n      this.styleContainerId_ == goog.html.sanitizer.RANDOM_CONTAINER_) {\n    newRoot.id = this.currentStyleContainerId_;\n  }\n};\n\n\n/** @override */\ngoog.html.sanitizer.HtmlSanitizer.prototype.preProcessHtml = function(\n    unsanitizedHtml) {\n  if (!this.inlineStyleRules_) {\n    return unsanitizedHtml;\n  }\n  // Inline style rules on the unsanitized input, so that we don't have to\n  // worry about customTokenPolicy and customNamePolicy interferring with\n  // selectors.\n  // TODO(pelizzi): To generate an inert document tree to walk on, we are going\n  // to parse the document into a DOM tree twice --\n  // first with DOMParser here, and then by setting innerHTML on a new TEMPLATE\n  // element in the main sanitization loop (see getDomTreeWalker in\n  // safedomtreeprocessor.js). It would be best if we used one technique\n  // consistently, parsing the input string once and passing a single inert tree\n  // from one phase to another, but the decision to use TEMPLATE rather than\n  // DomParser or document.createHtmlImplementation as the inert HTML container\n  // for the main sanitization logic predates the work on supporting STYLE tags,\n  // and we later found on that TEMPLATE inert documents do not have computed\n  // stylesheet information on STYLE tags.\n  var inertUnsanitizedDom =\n      goog.html.sanitizer.CssSanitizer.safeParseHtmlAndGetInertElement(\n          '<div>' + unsanitizedHtml + '</div>');\n  goog.asserts.assert(\n      inertUnsanitizedDom,\n      'Older browsers that don\\'t support inert ' +\n          'parsing should not get to this branch');\n  goog.html.sanitizer.CssSanitizer.inlineStyleRules(inertUnsanitizedDom);\n  return inertUnsanitizedDom.innerHTML;\n};\n\n\n/**\n * Gets the style container ID for the sanitized output, or creates a new random\n * one. If no style container is necessary or style containment is disabled,\n * returns null.\n * @return {?string}\n * @private\n */\ngoog.html.sanitizer.HtmlSanitizer.prototype.getStyleContainerId_ = function() {\n  var randomStyleContainmentEnabled =\n      this.styleContainerId_ == goog.html.sanitizer.RANDOM_CONTAINER_;\n  var randomStyleContainmentNecessary =\n      !('STYLE' in this.tagBlacklist_) && 'STYLE' in this.tagWhitelist_;\n  // If the builder was configured to create a random unique ID, create one, but\n  // do so only if STYLE is allowed to begin with.\n  return randomStyleContainmentEnabled && randomStyleContainmentNecessary ?\n      'sanitizer-' + goog.string.getRandomString() :\n      this.styleContainerId_;\n};\n\n\n/** @override */\ngoog.html.sanitizer.HtmlSanitizer.prototype.createTextNode = function(\n    dirtyNode) {\n  // Text nodes don't need to be sanitized, unless they are children of STYLE\n  // and STYLE tags are allowed.\n  var textContent = dirtyNode.data;\n  // If STYLE is allowed, apply a policy to its text content. Ideally\n  // sanitizing text content of tags shouldn't be hardcoded for STYLE, but we\n  // have no plans to support sanitizing the text content of other nodes for\n  // now.\n  var dirtyParent = goog.html.sanitizer.noclobber.getParentNode(dirtyNode);\n  if (dirtyParent &&\n      goog.html.sanitizer.noclobber.getNodeName(dirtyParent).toLowerCase() ==\n          'style' &&\n      !('STYLE' in this.tagBlacklist_) && 'STYLE' in this.tagWhitelist_) {\n    // Note that we don't have access to the parsed CSS declarations inside a\n    // TEMPLATE tag, so the CSS sanitizer accepts a string and parses it\n    // on its own using DOMParser.\n    textContent = goog.html.SafeStyleSheet.unwrap(\n        goog.html.sanitizer.CssSanitizer.sanitizeStyleSheetString(\n            textContent, this.currentStyleContainerId_,\n            goog.bind(function(uri, propName) {\n              return this.networkRequestUrlPolicy_(\n                  uri, {cssProperty: propName});\n            }, this)));\n  }\n  return document.createTextNode(textContent);\n};\n\n\n/** @override */\ngoog.html.sanitizer.HtmlSanitizer.prototype.createElementWithoutAttributes =\n    function(dirtyElement) {\n  var dirtyName =\n      goog.html.sanitizer.noclobber.getNodeName(dirtyElement).toUpperCase();\n  if (dirtyName in this.tagBlacklist_) {\n    // If it's blacklisted, completely remove the tag and its descendants.\n    return null;\n  }\n  if (this.tagWhitelist_[dirtyName]) {\n    // If it's whitelisted, keep as is.\n    return document.createElement(dirtyName);\n  }\n  // If it's neither blacklisted nor whitelisted, replace with span. If the\n  // relevant builder option is enabled, the tag will bear the original tag\n  // name in a data attribute.\n  var spanElement = goog.dom.createElement(goog.dom.TagName.SPAN);\n  if (this.shouldAddOriginalTagNames_) {\n    goog.html.sanitizer.noclobber.setElementAttribute(\n        spanElement, goog.html.sanitizer.HTML_SANITIZER_SANITIZED_ATTR_NAME_,\n        dirtyName.toLowerCase());\n  }\n  return spanElement;\n};\n\n\n/** @override */\ngoog.html.sanitizer.HtmlSanitizer.prototype.processElementAttribute = function(\n    dirtyElement, attribute) {\n  var attributeName = attribute.name;\n  if (goog.string.startsWith(\n          attributeName,\n          goog.html.sanitizer.HTML_SANITIZER_BOOKKEEPING_PREFIX_)) {\n    // This is the namespace for the data attributes added by the sanitizer. We\n    // prevent untrusted content from setting them in the output.\n    return null;\n  }\n\n  var elementName = goog.html.sanitizer.noclobber.getNodeName(dirtyElement);\n  var unsanitizedAttrValue = attribute.value;\n\n  // Create policy hints object\n  var policyHints = {\n    tagName: goog.string.trim(elementName).toLowerCase(),\n    attributeName: goog.string.trim(attributeName).toLowerCase()\n  };\n  var policyContext = goog.html.sanitizer.HtmlSanitizer.getContext_(\n      policyHints.attributeName, dirtyElement);\n\n  // Prefer attribute handler for this specific tag.\n  var tagHandlerIndex = goog.html.sanitizer.HtmlSanitizer.attrIdentifier_(\n      elementName, attributeName);\n  if (tagHandlerIndex in this.attributeHandlers_) {\n    var handler = this.attributeHandlers_[tagHandlerIndex];\n    return handler(unsanitizedAttrValue, policyHints, policyContext);\n  }\n  // Fall back on attribute handler for wildcard tag.\n  var genericHandlerIndex =\n      goog.html.sanitizer.HtmlSanitizer.attrIdentifier_(null, attributeName);\n  if (genericHandlerIndex in this.attributeHandlers_) {\n    var handler = this.attributeHandlers_[genericHandlerIndex];\n    return handler(unsanitizedAttrValue, policyHints, policyContext);\n  }\n  return null;\n};\n\n\n/**\n * Sanitizes a HTML string using a sanitizer with default options.\n * @param {string} unsanitizedHtml\n * @return {!goog.html.SafeHtml} sanitizedHtml\n */\ngoog.html.sanitizer.HtmlSanitizer.sanitize = function(unsanitizedHtml) {\n  var sanitizer = new goog.html.sanitizer.HtmlSanitizer.Builder().build();\n  return sanitizer.sanitize(unsanitizedHtml);\n};\n","// Copyright 2012 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utilities for detecting, adding and removing classes.  Prefer\n * this over goog.dom.classes for new code since it attempts to use classList\n * (DOMTokenList: http://dom.spec.whatwg.org/#domtokenlist) which is faster\n * and requires less code.\n *\n * Note: these utilities are meant to operate on HTMLElements\n * and may have unexpected behavior on elements with differing interfaces\n * (such as SVGElements).\n */\n\n\ngoog.provide('goog.dom.classlist');\n\ngoog.require('goog.array');\n\n\n/**\n * Override this define at build-time if you know your target supports it.\n * @define {boolean} Whether to use the classList property (DOMTokenList).\n */\ngoog.define('goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST', false);\n\n\n/**\n * Gets an array-like object of class names on an element.\n * @param {Element} element DOM node to get the classes of.\n * @return {!IArrayLike<?>} Class names on `element`.\n */\ngoog.dom.classlist.get = function(element) {\n  if (goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || element.classList) {\n    return element.classList;\n  }\n\n  var className = element.className;\n  // Some types of elements don't have a className in IE (e.g. iframes).\n  // Furthermore, in Firefox, className is not a string when the element is\n  // an SVG element.\n  return goog.isString(className) && className.match(/\\S+/g) || [];\n};\n\n\n/**\n * Sets the entire class name of an element.\n * @param {Element} element DOM node to set class of.\n * @param {string} className Class name(s) to apply to element.\n */\ngoog.dom.classlist.set = function(element, className) {\n  element.className = className;\n};\n\n\n/**\n * Returns true if an element has a class.  This method may throw a DOM\n * exception for an invalid or empty class name if DOMTokenList is used.\n * @param {Element} element DOM node to test.\n * @param {string} className Class name to test for.\n * @return {boolean} Whether element has the class.\n */\ngoog.dom.classlist.contains = function(element, className) {\n  if (goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || element.classList) {\n    return element.classList.contains(className);\n  }\n  return goog.array.contains(goog.dom.classlist.get(element), className);\n};\n\n\n/**\n * Adds a class to an element.  Does not add multiples of class names.  This\n * method may throw a DOM exception for an invalid or empty class name if\n * DOMTokenList is used.\n * @param {Element} element DOM node to add class to.\n * @param {string} className Class name to add.\n */\ngoog.dom.classlist.add = function(element, className) {\n  if (goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || element.classList) {\n    element.classList.add(className);\n    return;\n  }\n\n  if (!goog.dom.classlist.contains(element, className)) {\n    // Ensure we add a space if this is not the first class name added.\n    element.className +=\n        element.className.length > 0 ? (' ' + className) : className;\n  }\n};\n\n\n/**\n * Convenience method to add a number of class names at once.\n * @param {Element} element The element to which to add classes.\n * @param {IArrayLike<string>} classesToAdd An array-like object\n * containing a collection of class names to add to the element.\n * This method may throw a DOM exception if classesToAdd contains invalid\n * or empty class names.\n */\ngoog.dom.classlist.addAll = function(element, classesToAdd) {\n  if (goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || element.classList) {\n    goog.array.forEach(classesToAdd, function(className) {\n      goog.dom.classlist.add(element, className);\n    });\n    return;\n  }\n\n  var classMap = {};\n\n  // Get all current class names into a map.\n  goog.array.forEach(goog.dom.classlist.get(element), function(className) {\n    classMap[className] = true;\n  });\n\n  // Add new class names to the map.\n  goog.array.forEach(\n      classesToAdd, function(className) { classMap[className] = true; });\n\n  // Flatten the keys of the map into the className.\n  element.className = '';\n  for (var className in classMap) {\n    element.className +=\n        element.className.length > 0 ? (' ' + className) : className;\n  }\n};\n\n\n/**\n * Removes a class from an element.  This method may throw a DOM exception\n * for an invalid or empty class name if DOMTokenList is used.\n * @param {Element} element DOM node to remove class from.\n * @param {string} className Class name to remove.\n */\ngoog.dom.classlist.remove = function(element, className) {\n  if (goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || element.classList) {\n    element.classList.remove(className);\n    return;\n  }\n\n  if (goog.dom.classlist.contains(element, className)) {\n    // Filter out the class name.\n    element.className = goog.array\n                            .filter(\n                                goog.dom.classlist.get(element),\n                                function(c) { return c != className; })\n                            .join(' ');\n  }\n};\n\n\n/**\n * Removes a set of classes from an element.  Prefer this call to\n * repeatedly calling `goog.dom.classlist.remove` if you want to remove\n * a large set of class names at once.\n * @param {Element} element The element from which to remove classes.\n * @param {IArrayLike<string>} classesToRemove An array-like object\n * containing a collection of class names to remove from the element.\n * This method may throw a DOM exception if classesToRemove contains invalid\n * or empty class names.\n */\ngoog.dom.classlist.removeAll = function(element, classesToRemove) {\n  if (goog.dom.classlist.ALWAYS_USE_DOM_TOKEN_LIST || element.classList) {\n    goog.array.forEach(classesToRemove, function(className) {\n      goog.dom.classlist.remove(element, className);\n    });\n    return;\n  }\n  // Filter out those classes in classesToRemove.\n  element.className =\n      goog.array\n          .filter(\n              goog.dom.classlist.get(element),\n              function(className) {\n                // If this class is not one we are trying to remove,\n                // add it to the array of new class names.\n                return !goog.array.contains(classesToRemove, className);\n              })\n          .join(' ');\n};\n\n\n/**\n * Adds or removes a class depending on the enabled argument.  This method\n * may throw a DOM exception for an invalid or empty class name if DOMTokenList\n * is used.\n * @param {Element} element DOM node to add or remove the class on.\n * @param {string} className Class name to add or remove.\n * @param {boolean} enabled Whether to add or remove the class (true adds,\n *     false removes).\n */\ngoog.dom.classlist.enable = function(element, className, enabled) {\n  if (enabled) {\n    goog.dom.classlist.add(element, className);\n  } else {\n    goog.dom.classlist.remove(element, className);\n  }\n};\n\n\n/**\n * Adds or removes a set of classes depending on the enabled argument.  This\n * method may throw a DOM exception for an invalid or empty class name if\n * DOMTokenList is used.\n * @param {!Element} element DOM node to add or remove the class on.\n * @param {?IArrayLike<string>} classesToEnable An array-like object\n *     containing a collection of class names to add or remove from the element.\n * @param {boolean} enabled Whether to add or remove the classes (true adds,\n *     false removes).\n */\ngoog.dom.classlist.enableAll = function(element, classesToEnable, enabled) {\n  var f = enabled ? goog.dom.classlist.addAll : goog.dom.classlist.removeAll;\n  f(element, classesToEnable);\n};\n\n\n/**\n * Switches a class on an element from one to another without disturbing other\n * classes. If the fromClass isn't removed, the toClass won't be added.  This\n * method may throw a DOM exception if the class names are empty or invalid.\n * @param {Element} element DOM node to swap classes on.\n * @param {string} fromClass Class to remove.\n * @param {string} toClass Class to add.\n * @return {boolean} Whether classes were switched.\n */\ngoog.dom.classlist.swap = function(element, fromClass, toClass) {\n  if (goog.dom.classlist.contains(element, fromClass)) {\n    goog.dom.classlist.remove(element, fromClass);\n    goog.dom.classlist.add(element, toClass);\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * Removes a class if an element has it, and adds it the element doesn't have\n * it.  Won't affect other classes on the node.  This method may throw a DOM\n * exception if the class name is empty or invalid.\n * @param {Element} element DOM node to toggle class on.\n * @param {string} className Class to toggle.\n * @return {boolean} True if class was added, false if it was removed\n *     (in other words, whether element has the class after this function has\n *     been called).\n */\ngoog.dom.classlist.toggle = function(element, className) {\n  var add = !goog.dom.classlist.contains(element, className);\n  goog.dom.classlist.enable(element, className, add);\n  return add;\n};\n\n\n/**\n * Adds and removes a class of an element.  Unlike\n * {@link goog.dom.classlist.swap}, this method adds the classToAdd regardless\n * of whether the classToRemove was present and had been removed.  This method\n * may throw a DOM exception if the class names are empty or invalid.\n *\n * @param {Element} element DOM node to swap classes on.\n * @param {string} classToRemove Class to remove.\n * @param {string} classToAdd Class to add.\n */\ngoog.dom.classlist.addRemove = function(element, classToRemove, classToAdd) {\n  goog.dom.classlist.remove(element, classToRemove);\n  goog.dom.classlist.add(element, classToAdd);\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Constant declarations for common key codes.\n *\n * @author eae@google.com (Emil A Eklund)\n * @see ../demos/keyhandler.html\n */\n\ngoog.provide('goog.events.KeyCodes');\n\ngoog.require('goog.userAgent');\n\ngoog.forwardDeclare('goog.events.BrowserEvent');\n\n\n/**\n * Key codes for common characters.\n *\n * This list is not localized and therefore some of the key codes are not\n * correct for non US keyboard layouts. See comments below.\n *\n * @enum {number}\n */\ngoog.events.KeyCodes = {\n  WIN_KEY_FF_LINUX: 0,\n  MAC_ENTER: 3,\n  BACKSPACE: 8,\n  TAB: 9,\n  NUM_CENTER: 12,  // NUMLOCK on FF/Safari Mac\n  ENTER: 13,\n  SHIFT: 16,\n  CTRL: 17,\n  ALT: 18,\n  PAUSE: 19,\n  CAPS_LOCK: 20,\n  ESC: 27,\n  SPACE: 32,\n  PAGE_UP: 33,    // also NUM_NORTH_EAST\n  PAGE_DOWN: 34,  // also NUM_SOUTH_EAST\n  END: 35,        // also NUM_SOUTH_WEST\n  HOME: 36,       // also NUM_NORTH_WEST\n  LEFT: 37,       // also NUM_WEST\n  UP: 38,         // also NUM_NORTH\n  RIGHT: 39,      // also NUM_EAST\n  DOWN: 40,       // also NUM_SOUTH\n  PLUS_SIGN: 43,  // NOT numpad plus\n  PRINT_SCREEN: 44,\n  INSERT: 45,  // also NUM_INSERT\n  DELETE: 46,  // also NUM_DELETE\n  ZERO: 48,\n  ONE: 49,\n  TWO: 50,\n  THREE: 51,\n  FOUR: 52,\n  FIVE: 53,\n  SIX: 54,\n  SEVEN: 55,\n  EIGHT: 56,\n  NINE: 57,\n  FF_SEMICOLON: 59,   // Firefox (Gecko) fires this for semicolon instead of 186\n  FF_EQUALS: 61,      // Firefox (Gecko) fires this for equals instead of 187\n  FF_DASH: 173,       // Firefox (Gecko) fires this for dash instead of 189\n  QUESTION_MARK: 63,  // needs localization\n  AT_SIGN: 64,\n  A: 65,\n  B: 66,\n  C: 67,\n  D: 68,\n  E: 69,\n  F: 70,\n  G: 71,\n  H: 72,\n  I: 73,\n  J: 74,\n  K: 75,\n  L: 76,\n  M: 77,\n  N: 78,\n  O: 79,\n  P: 80,\n  Q: 81,\n  R: 82,\n  S: 83,\n  T: 84,\n  U: 85,\n  V: 86,\n  W: 87,\n  X: 88,\n  Y: 89,\n  Z: 90,\n  META: 91,  // WIN_KEY_LEFT\n  WIN_KEY_RIGHT: 92,\n  CONTEXT_MENU: 93,\n  NUM_ZERO: 96,\n  NUM_ONE: 97,\n  NUM_TWO: 98,\n  NUM_THREE: 99,\n  NUM_FOUR: 100,\n  NUM_FIVE: 101,\n  NUM_SIX: 102,\n  NUM_SEVEN: 103,\n  NUM_EIGHT: 104,\n  NUM_NINE: 105,\n  NUM_MULTIPLY: 106,\n  NUM_PLUS: 107,\n  NUM_MINUS: 109,\n  NUM_PERIOD: 110,\n  NUM_DIVISION: 111,\n  F1: 112,\n  F2: 113,\n  F3: 114,\n  F4: 115,\n  F5: 116,\n  F6: 117,\n  F7: 118,\n  F8: 119,\n  F9: 120,\n  F10: 121,\n  F11: 122,\n  F12: 123,\n  NUMLOCK: 144,\n  SCROLL_LOCK: 145,\n\n  // OS-specific media keys like volume controls and browser controls.\n  FIRST_MEDIA_KEY: 166,\n  LAST_MEDIA_KEY: 183,\n\n  SEMICOLON: 186,             // needs localization\n  DASH: 189,                  // needs localization\n  EQUALS: 187,                // needs localization\n  COMMA: 188,                 // needs localization\n  PERIOD: 190,                // needs localization\n  SLASH: 191,                 // needs localization\n  APOSTROPHE: 192,            // needs localization\n  TILDE: 192,                 // needs localization\n  SINGLE_QUOTE: 222,          // needs localization\n  OPEN_SQUARE_BRACKET: 219,   // needs localization\n  BACKSLASH: 220,             // needs localization\n  CLOSE_SQUARE_BRACKET: 221,  // needs localization\n  WIN_KEY: 224,\n  MAC_FF_META:\n      224,  // Firefox (Gecko) fires this for the meta key instead of 91\n  MAC_WK_CMD_LEFT: 91,   // WebKit Left Command key fired, same as META\n  MAC_WK_CMD_RIGHT: 93,  // WebKit Right Command key fired, different from META\n  WIN_IME: 229,\n\n  // \"Reserved for future use\". Some programs (e.g. the SlingPlayer 2.4 ActiveX\n  // control) fire this as a hacky way to disable screensavers.\n  VK_NONAME: 252,\n\n  // We've seen users whose machines fire this keycode at regular one\n  // second intervals. The common thread among these users is that\n  // they're all using Dell Inspiron laptops, so we suspect that this\n  // indicates a hardware/bios problem.\n  // http://en.community.dell.com/support-forums/laptop/f/3518/p/19285957/19523128.aspx\n  PHANTOM: 255\n};\n\n\n/**\n * Returns false if the event does not contain a text modifying key.\n *\n * When it returns true, the event might be text modifying. It is infeasible to\n * say for sure because of the many different keyboard layouts, so this method\n * errs on the side of assuming a key event is text-modifiable if we cannot be\n * certain it is not. As an example, it will return true for ctrl+a, though in\n * many standard keyboard layouts that key combination would mean \"select all\",\n * and not actually modify the text.\n *\n * @param {goog.events.BrowserEvent} e A key event.\n * @return {boolean} Whether it's a text modifying key.\n */\ngoog.events.KeyCodes.isTextModifyingKeyEvent = function(e) {\n  if (e.altKey && !e.ctrlKey || e.metaKey ||\n      // Function keys don't generate text\n      e.keyCode >= goog.events.KeyCodes.F1 &&\n          e.keyCode <= goog.events.KeyCodes.F12) {\n    return false;\n  }\n\n  // The following keys are quite harmless, even in combination with\n  // CTRL, ALT or SHIFT.\n  switch (e.keyCode) {\n    case goog.events.KeyCodes.ALT:\n    case goog.events.KeyCodes.CAPS_LOCK:\n    case goog.events.KeyCodes.CONTEXT_MENU:\n    case goog.events.KeyCodes.CTRL:\n    case goog.events.KeyCodes.DOWN:\n    case goog.events.KeyCodes.END:\n    case goog.events.KeyCodes.ESC:\n    case goog.events.KeyCodes.HOME:\n    case goog.events.KeyCodes.INSERT:\n    case goog.events.KeyCodes.LEFT:\n    case goog.events.KeyCodes.MAC_FF_META:\n    case goog.events.KeyCodes.META:\n    case goog.events.KeyCodes.NUMLOCK:\n    case goog.events.KeyCodes.NUM_CENTER:\n    case goog.events.KeyCodes.PAGE_DOWN:\n    case goog.events.KeyCodes.PAGE_UP:\n    case goog.events.KeyCodes.PAUSE:\n    case goog.events.KeyCodes.PHANTOM:\n    case goog.events.KeyCodes.PRINT_SCREEN:\n    case goog.events.KeyCodes.RIGHT:\n    case goog.events.KeyCodes.SCROLL_LOCK:\n    case goog.events.KeyCodes.SHIFT:\n    case goog.events.KeyCodes.UP:\n    case goog.events.KeyCodes.VK_NONAME:\n    case goog.events.KeyCodes.WIN_KEY:\n    case goog.events.KeyCodes.WIN_KEY_RIGHT:\n      return false;\n    case goog.events.KeyCodes.WIN_KEY_FF_LINUX:\n      return !goog.userAgent.GECKO;\n    default:\n      return e.keyCode < goog.events.KeyCodes.FIRST_MEDIA_KEY ||\n          e.keyCode > goog.events.KeyCodes.LAST_MEDIA_KEY;\n  }\n};\n\n\n/**\n * Returns true if the key fires a keypress event in the current browser.\n *\n * Accoridng to MSDN [1] IE only fires keypress events for the following keys:\n * - Letters: A - Z (uppercase and lowercase)\n * - Numerals: 0 - 9\n * - Symbols: ! @ # $ % ^ & * ( ) _ - + = < [ ] { } , . / ? \\ | ' ` \" ~\n * - System: ESC, SPACEBAR, ENTER\n *\n * That's not entirely correct though, for instance there's no distinction\n * between upper and lower case letters.\n *\n * [1] http://msdn2.microsoft.com/en-us/library/ms536939(VS.85).aspx)\n *\n * Safari is similar to IE, but does not fire keypress for ESC.\n *\n * Additionally, IE6 does not fire keydown or keypress events for letters when\n * the control or alt keys are held down and the shift key is not. IE7 does\n * fire keydown in these cases, though, but not keypress.\n *\n * @param {number} keyCode A key code.\n * @param {number=} opt_heldKeyCode Key code of a currently-held key.\n * @param {boolean=} opt_shiftKey Whether the shift key is held down.\n * @param {boolean=} opt_ctrlKey Whether the control key is held down.\n * @param {boolean=} opt_altKey Whether the alt key is held down.\n * @param {boolean=} opt_metaKey Whether the meta key is held down.\n * @return {boolean} Whether it's a key that fires a keypress event.\n */\ngoog.events.KeyCodes.firesKeyPressEvent = function(\n    keyCode, opt_heldKeyCode, opt_shiftKey, opt_ctrlKey, opt_altKey,\n    opt_metaKey) {\n  if (goog.userAgent.WEBKIT && !goog.userAgent.isVersionOrHigher('525')) {\n    return true;\n  }\n\n  if (goog.userAgent.MAC && opt_altKey) {\n    return goog.events.KeyCodes.isCharacterKey(keyCode);\n  }\n\n  // Alt but not AltGr which is represented as Alt+Ctrl.\n  if (opt_altKey && !opt_ctrlKey) {\n    return false;\n  }\n\n  // Saves Ctrl or Alt + key for IE and WebKit 525+, which won't fire keypress.\n  // WebKit prior to 525 won't get this far so no need to check the user agent.\n  // Gecko doesn't need to use the held key for modifiers, it just checks the\n  // ctrl/meta/alt/shiftKey fields.\n  if (!goog.userAgent.GECKO) {\n    if (goog.isNumber(opt_heldKeyCode)) {\n      opt_heldKeyCode = goog.events.KeyCodes.normalizeKeyCode(opt_heldKeyCode);\n    }\n    var heldKeyIsModifier = opt_heldKeyCode == goog.events.KeyCodes.CTRL ||\n        opt_heldKeyCode == goog.events.KeyCodes.ALT ||\n        goog.userAgent.MAC && opt_heldKeyCode == goog.events.KeyCodes.META;\n    // The Shift key blocks keypresses on Mac iff accompanied by another\n    // modifier.\n    var modifiedShiftKey = opt_heldKeyCode == goog.events.KeyCodes.SHIFT &&\n        (opt_ctrlKey || opt_metaKey);\n    if ((!opt_shiftKey || goog.userAgent.MAC) && heldKeyIsModifier ||\n        goog.userAgent.MAC && modifiedShiftKey) {\n      return false;\n    }\n  }\n\n  // Some keys with Ctrl/Shift do not issue keypress in WEBKIT.\n  if ((goog.userAgent.WEBKIT || goog.userAgent.EDGE) && opt_ctrlKey &&\n      opt_shiftKey) {\n    switch (keyCode) {\n      case goog.events.KeyCodes.BACKSLASH:\n      case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:\n      case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:\n      case goog.events.KeyCodes.TILDE:\n      case goog.events.KeyCodes.SEMICOLON:\n      case goog.events.KeyCodes.DASH:\n      case goog.events.KeyCodes.EQUALS:\n      case goog.events.KeyCodes.COMMA:\n      case goog.events.KeyCodes.PERIOD:\n      case goog.events.KeyCodes.SLASH:\n      case goog.events.KeyCodes.APOSTROPHE:\n      case goog.events.KeyCodes.SINGLE_QUOTE:\n        return false;\n    }\n  }\n\n  // When Ctrl+<somekey> is held in IE, it only fires a keypress once, but it\n  // continues to fire keydown events as the event repeats.\n  if (goog.userAgent.IE && opt_ctrlKey && opt_heldKeyCode == keyCode) {\n    return false;\n  }\n\n  switch (keyCode) {\n    case goog.events.KeyCodes.ENTER:\n      if (goog.userAgent.GECKO) {\n        // Only Enter, Shift + Enter, Ctrl + Enter causes keypress event on\n        // Firefox.\n        if (opt_metaKey || opt_altKey) {\n          return false;\n        }\n        return !(opt_shiftKey && opt_ctrlKey);\n      } else {\n        return true;\n      }\n    case goog.events.KeyCodes.ESC:\n      return !(\n          goog.userAgent.WEBKIT || goog.userAgent.EDGE || goog.userAgent.GECKO);\n  }\n\n  // Gecko won't fire a keypress event even when the key is a character key if\n  // ctrl, meta or alt are pressed. In all other cases, a keypress event is\n  // only fired when the key is a character.\n  if (goog.userAgent.GECKO && (opt_ctrlKey || opt_altKey || opt_metaKey)) {\n    return false;\n  } else {\n    return goog.events.KeyCodes.isCharacterKey(keyCode);\n  }\n};\n\n\n/**\n * Returns true if the key produces a character.\n * This does not cover characters on non-US keyboards (Russian, Hebrew, etc.).\n *\n * @param {number} keyCode A key code.\n * @return {boolean} Whether it's a character key.\n */\ngoog.events.KeyCodes.isCharacterKey = function(keyCode) {\n  if (keyCode >= goog.events.KeyCodes.ZERO &&\n      keyCode <= goog.events.KeyCodes.NINE) {\n    return true;\n  }\n\n  if (keyCode >= goog.events.KeyCodes.NUM_ZERO &&\n      keyCode <= goog.events.KeyCodes.NUM_MULTIPLY) {\n    return true;\n  }\n\n  if (keyCode >= goog.events.KeyCodes.A && keyCode <= goog.events.KeyCodes.Z) {\n    return true;\n  }\n\n  // Safari sends zero key code for non-latin characters.\n  if ((goog.userAgent.WEBKIT || goog.userAgent.EDGE) && keyCode == 0) {\n    return true;\n  }\n\n  switch (keyCode) {\n    case goog.events.KeyCodes.SPACE:\n    case goog.events.KeyCodes.PLUS_SIGN:\n    case goog.events.KeyCodes.QUESTION_MARK:\n    case goog.events.KeyCodes.AT_SIGN:\n    case goog.events.KeyCodes.NUM_PLUS:\n    case goog.events.KeyCodes.NUM_MINUS:\n    case goog.events.KeyCodes.NUM_PERIOD:\n    case goog.events.KeyCodes.NUM_DIVISION:\n    case goog.events.KeyCodes.SEMICOLON:\n    case goog.events.KeyCodes.FF_SEMICOLON:\n    case goog.events.KeyCodes.DASH:\n    case goog.events.KeyCodes.EQUALS:\n    case goog.events.KeyCodes.FF_EQUALS:\n    case goog.events.KeyCodes.COMMA:\n    case goog.events.KeyCodes.PERIOD:\n    case goog.events.KeyCodes.SLASH:\n    case goog.events.KeyCodes.APOSTROPHE:\n    case goog.events.KeyCodes.SINGLE_QUOTE:\n    case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:\n    case goog.events.KeyCodes.BACKSLASH:\n    case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:\n      return true;\n    default:\n      return false;\n  }\n};\n\n\n/**\n * Normalizes key codes from OS/Browser-specific value to the general one.\n * @param {number} keyCode The native key code.\n * @return {number} The normalized key code.\n */\ngoog.events.KeyCodes.normalizeKeyCode = function(keyCode) {\n  if (goog.userAgent.GECKO) {\n    return goog.events.KeyCodes.normalizeGeckoKeyCode(keyCode);\n  } else if (goog.userAgent.MAC && goog.userAgent.WEBKIT) {\n    return goog.events.KeyCodes.normalizeMacWebKitKeyCode(keyCode);\n  } else {\n    return keyCode;\n  }\n};\n\n\n/**\n * Normalizes key codes from their Gecko-specific value to the general one.\n * @param {number} keyCode The native key code.\n * @return {number} The normalized key code.\n */\ngoog.events.KeyCodes.normalizeGeckoKeyCode = function(keyCode) {\n  switch (keyCode) {\n    case goog.events.KeyCodes.FF_EQUALS:\n      return goog.events.KeyCodes.EQUALS;\n    case goog.events.KeyCodes.FF_SEMICOLON:\n      return goog.events.KeyCodes.SEMICOLON;\n    case goog.events.KeyCodes.FF_DASH:\n      return goog.events.KeyCodes.DASH;\n    case goog.events.KeyCodes.MAC_FF_META:\n      return goog.events.KeyCodes.META;\n    case goog.events.KeyCodes.WIN_KEY_FF_LINUX:\n      return goog.events.KeyCodes.WIN_KEY;\n    default:\n      return keyCode;\n  }\n};\n\n\n/**\n * Normalizes key codes from their Mac WebKit-specific value to the general one.\n * @param {number} keyCode The native key code.\n * @return {number} The normalized key code.\n */\ngoog.events.KeyCodes.normalizeMacWebKitKeyCode = function(keyCode) {\n  switch (keyCode) {\n    case goog.events.KeyCodes.MAC_WK_CMD_RIGHT:  // 93\n      return goog.events.KeyCodes.META;          // 91\n    default:\n      return keyCode;\n  }\n};\n","// Copyright 2007 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview This file contains a class for working with keyboard events\n * that repeat consistently across browsers and platforms. It also unifies the\n * key code so that it is the same in all browsers and platforms.\n *\n * Different web browsers have very different keyboard event handling. Most\n * importantly is that only certain browsers repeat keydown events:\n * IE, Opera, FF/Win32, and Safari 3 repeat keydown events.\n * FF/Mac and Safari 2 do not.\n *\n * For the purposes of this code, \"Safari 3\" means WebKit 525+, when WebKit\n * decided that they should try to match IE's key handling behavior.\n * Safari 3.0.4, which shipped with Leopard (WebKit 523), has the\n * Safari 2 behavior.\n *\n * Firefox, Safari, Opera prevent on keypress\n *\n * IE prevents on keydown\n *\n * Firefox does not fire keypress for shift, ctrl, alt\n * Firefox does fire keydown for shift, ctrl, alt, meta\n * Firefox does not repeat keydown for shift, ctrl, alt, meta\n *\n * Firefox does not fire keypress for up and down in an input\n *\n * Opera fires keypress for shift, ctrl, alt, meta\n * Opera does not repeat keypress for shift, ctrl, alt, meta\n *\n * Safari 2 and 3 do not fire keypress for shift, ctrl, alt\n * Safari 2 does not fire keydown for shift, ctrl, alt\n * Safari 3 *does* fire keydown for shift, ctrl, alt\n *\n * IE provides the keycode for keyup/down events and the charcode (in the\n * keycode field) for keypress.\n *\n * Mozilla provides the keycode for keyup/down and the charcode for keypress\n * unless it's a non text modifying key in which case the keycode is provided.\n *\n * Safari 3 provides the keycode and charcode for all events.\n *\n * Opera provides the keycode for keyup/down event and either the charcode or\n * the keycode (in the keycode field) for keypress events.\n *\n * Firefox x11 doesn't fire keydown events if a another key is already held down\n * until the first key is released. This can cause a key event to be fired with\n * a keyCode for the first key and a charCode for the second key.\n *\n * Safari in keypress\n *\n *        charCode keyCode which\n * ENTER:       13      13    13\n * F1:       63236   63236 63236\n * F8:       63243   63243 63243\n * ...\n * p:          112     112   112\n * P:           80      80    80\n *\n * Firefox, keypress:\n *\n *        charCode keyCode which\n * ENTER:        0      13    13\n * F1:           0     112     0\n * F8:           0     119     0\n * ...\n * p:          112       0   112\n * P:           80       0    80\n *\n * Opera, Mac+Win32, keypress:\n *\n *         charCode keyCode which\n * ENTER: undefined      13    13\n * F1:    undefined     112     0\n * F8:    undefined     119     0\n * ...\n * p:     undefined     112   112\n * P:     undefined      80    80\n *\n * IE7, keydown\n *\n *         charCode keyCode     which\n * ENTER: undefined      13 undefined\n * F1:    undefined     112 undefined\n * F8:    undefined     119 undefined\n * ...\n * p:     undefined      80 undefined\n * P:     undefined      80 undefined\n *\n * @author arv@google.com (Erik Arvidsson)\n * @author eae@google.com (Emil A Eklund)\n * @see ../demos/keyhandler.html\n */\n\ngoog.provide('goog.events.KeyEvent');\ngoog.provide('goog.events.KeyHandler');\ngoog.provide('goog.events.KeyHandler.EventType');\n\ngoog.require('goog.events');\ngoog.require('goog.events.BrowserEvent');\ngoog.require('goog.events.EventTarget');\ngoog.require('goog.events.EventType');\ngoog.require('goog.events.KeyCodes');\ngoog.require('goog.userAgent');\n\n\n\n/**\n * A wrapper around an element that you want to listen to keyboard events on.\n * @param {Element|Document=} opt_element The element or document to listen on.\n * @param {boolean=} opt_capture Whether to listen for browser events in\n *     capture phase (defaults to false).\n * @constructor\n * @extends {goog.events.EventTarget}\n * @final\n */\ngoog.events.KeyHandler = function(opt_element, opt_capture) {\n  goog.events.EventTarget.call(this);\n\n  if (opt_element) {\n    this.attach(opt_element, opt_capture);\n  }\n};\ngoog.inherits(goog.events.KeyHandler, goog.events.EventTarget);\n\n\n/**\n * This is the element that we will listen to the real keyboard events on.\n * @type {Element|Document|null}\n * @private\n */\ngoog.events.KeyHandler.prototype.element_ = null;\n\n\n/**\n * The key for the key press listener.\n * @type {goog.events.Key}\n * @private\n */\ngoog.events.KeyHandler.prototype.keyPressKey_ = null;\n\n\n/**\n * The key for the key down listener.\n * @type {goog.events.Key}\n * @private\n */\ngoog.events.KeyHandler.prototype.keyDownKey_ = null;\n\n\n/**\n * The key for the key up listener.\n * @type {goog.events.Key}\n * @private\n */\ngoog.events.KeyHandler.prototype.keyUpKey_ = null;\n\n\n/**\n * Used to detect keyboard repeat events.\n * @private\n * @type {number}\n */\ngoog.events.KeyHandler.prototype.lastKey_ = -1;\n\n\n/**\n * Keycode recorded for key down events. As most browsers don't report the\n * keycode in the key press event we need to record it in the key down phase.\n * @private\n * @type {number}\n */\ngoog.events.KeyHandler.prototype.keyCode_ = -1;\n\n\n/**\n * Alt key recorded for key down events. FF on Mac does not report the alt key\n * flag in the key press event, we need to record it in the key down phase.\n * @type {boolean}\n * @private\n */\ngoog.events.KeyHandler.prototype.altKey_ = false;\n\n\n/**\n * Enum type for the events fired by the key handler\n * @enum {string}\n */\ngoog.events.KeyHandler.EventType = {\n  KEY: 'key'\n};\n\n\n/**\n * An enumeration of key codes that Safari 2 does incorrectly\n * @type {Object}\n * @private\n */\ngoog.events.KeyHandler.safariKey_ = {\n  '3': goog.events.KeyCodes.ENTER,             // 13\n  '12': goog.events.KeyCodes.NUMLOCK,          // 144\n  '63232': goog.events.KeyCodes.UP,            // 38\n  '63233': goog.events.KeyCodes.DOWN,          // 40\n  '63234': goog.events.KeyCodes.LEFT,          // 37\n  '63235': goog.events.KeyCodes.RIGHT,         // 39\n  '63236': goog.events.KeyCodes.F1,            // 112\n  '63237': goog.events.KeyCodes.F2,            // 113\n  '63238': goog.events.KeyCodes.F3,            // 114\n  '63239': goog.events.KeyCodes.F4,            // 115\n  '63240': goog.events.KeyCodes.F5,            // 116\n  '63241': goog.events.KeyCodes.F6,            // 117\n  '63242': goog.events.KeyCodes.F7,            // 118\n  '63243': goog.events.KeyCodes.F8,            // 119\n  '63244': goog.events.KeyCodes.F9,            // 120\n  '63245': goog.events.KeyCodes.F10,           // 121\n  '63246': goog.events.KeyCodes.F11,           // 122\n  '63247': goog.events.KeyCodes.F12,           // 123\n  '63248': goog.events.KeyCodes.PRINT_SCREEN,  // 44\n  '63272': goog.events.KeyCodes.DELETE,        // 46\n  '63273': goog.events.KeyCodes.HOME,          // 36\n  '63275': goog.events.KeyCodes.END,           // 35\n  '63276': goog.events.KeyCodes.PAGE_UP,       // 33\n  '63277': goog.events.KeyCodes.PAGE_DOWN,     // 34\n  '63289': goog.events.KeyCodes.NUMLOCK,       // 144\n  '63302': goog.events.KeyCodes.INSERT         // 45\n};\n\n\n/**\n * An enumeration of key identifiers currently part of the W3C draft for DOM3\n * and their mappings to keyCodes.\n * http://www.w3.org/TR/DOM-Level-3-Events/keyset.html#KeySet-Set\n * This is currently supported in Safari and should be platform independent.\n * @type {Object}\n * @private\n */\ngoog.events.KeyHandler.keyIdentifier_ = {\n  'Up': goog.events.KeyCodes.UP,               // 38\n  'Down': goog.events.KeyCodes.DOWN,           // 40\n  'Left': goog.events.KeyCodes.LEFT,           // 37\n  'Right': goog.events.KeyCodes.RIGHT,         // 39\n  'Enter': goog.events.KeyCodes.ENTER,         // 13\n  'F1': goog.events.KeyCodes.F1,               // 112\n  'F2': goog.events.KeyCodes.F2,               // 113\n  'F3': goog.events.KeyCodes.F3,               // 114\n  'F4': goog.events.KeyCodes.F4,               // 115\n  'F5': goog.events.KeyCodes.F5,               // 116\n  'F6': goog.events.KeyCodes.F6,               // 117\n  'F7': goog.events.KeyCodes.F7,               // 118\n  'F8': goog.events.KeyCodes.F8,               // 119\n  'F9': goog.events.KeyCodes.F9,               // 120\n  'F10': goog.events.KeyCodes.F10,             // 121\n  'F11': goog.events.KeyCodes.F11,             // 122\n  'F12': goog.events.KeyCodes.F12,             // 123\n  'U+007F': goog.events.KeyCodes.DELETE,       // 46\n  'Home': goog.events.KeyCodes.HOME,           // 36\n  'End': goog.events.KeyCodes.END,             // 35\n  'PageUp': goog.events.KeyCodes.PAGE_UP,      // 33\n  'PageDown': goog.events.KeyCodes.PAGE_DOWN,  // 34\n  'Insert': goog.events.KeyCodes.INSERT        // 45\n};\n\n\n/**\n * If true, the KeyEvent fires on keydown. Otherwise, it fires on keypress.\n *\n * @type {boolean}\n * @private\n */\ngoog.events.KeyHandler.USES_KEYDOWN_ =\n    !goog.userAgent.WEBKIT || goog.userAgent.isVersionOrHigher('525');\n\n\n/**\n * If true, the alt key flag is saved during the key down and reused when\n * handling the key press. FF on Mac does not set the alt flag in the key press\n * event.\n * @type {boolean}\n * @private\n */\ngoog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_ =\n    goog.userAgent.MAC && goog.userAgent.GECKO;\n\n\n/**\n * Records the keycode for browsers that only returns the keycode for key up/\n * down events. For browser/key combinations that doesn't trigger a key pressed\n * event it also fires the patched key event.\n * @param {goog.events.BrowserEvent} e The key down event.\n * @private\n */\ngoog.events.KeyHandler.prototype.handleKeyDown_ = function(e) {\n  // Ctrl-Tab and Alt-Tab can cause the focus to be moved to another window\n  // before we've caught a key-up event.  If the last-key was one of these we\n  // reset the state.\n  if (goog.userAgent.WEBKIT || goog.userAgent.EDGE) {\n    if (this.lastKey_ == goog.events.KeyCodes.CTRL && !e.ctrlKey ||\n        this.lastKey_ == goog.events.KeyCodes.ALT && !e.altKey ||\n        goog.userAgent.MAC && this.lastKey_ == goog.events.KeyCodes.META &&\n            !e.metaKey) {\n      this.resetState();\n    }\n  }\n\n  if (this.lastKey_ == -1) {\n    if (e.ctrlKey && e.keyCode != goog.events.KeyCodes.CTRL) {\n      this.lastKey_ = goog.events.KeyCodes.CTRL;\n    } else if (e.altKey && e.keyCode != goog.events.KeyCodes.ALT) {\n      this.lastKey_ = goog.events.KeyCodes.ALT;\n    } else if (e.metaKey && e.keyCode != goog.events.KeyCodes.META) {\n      this.lastKey_ = goog.events.KeyCodes.META;\n    }\n  }\n\n  if (goog.events.KeyHandler.USES_KEYDOWN_ &&\n      !goog.events.KeyCodes.firesKeyPressEvent(\n          e.keyCode, this.lastKey_, e.shiftKey, e.ctrlKey, e.altKey,\n          e.metaKey)) {\n    this.handleEvent(e);\n  } else {\n    this.keyCode_ = goog.events.KeyCodes.normalizeKeyCode(e.keyCode);\n    if (goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_) {\n      this.altKey_ = e.altKey;\n    }\n  }\n};\n\n\n/**\n * Resets the stored previous values. Needed to be called for webkit which will\n * not generate a key up for meta key operations. This should only be called\n * when having finished with repeat key possibilities.\n */\ngoog.events.KeyHandler.prototype.resetState = function() {\n  this.lastKey_ = -1;\n  this.keyCode_ = -1;\n};\n\n\n/**\n * Clears the stored previous key value, resetting the key repeat status. Uses\n * -1 because the Safari 3 Windows beta reports 0 for certain keys (like Home\n * and End.)\n * @param {goog.events.BrowserEvent} e The keyup event.\n * @private\n */\ngoog.events.KeyHandler.prototype.handleKeyup_ = function(e) {\n  this.resetState();\n  this.altKey_ = e.altKey;\n};\n\n\n/**\n * Handles the events on the element.\n * @param {goog.events.BrowserEvent} e  The keyboard event sent from the\n *     browser.\n */\ngoog.events.KeyHandler.prototype.handleEvent = function(e) {\n  var be = e.getBrowserEvent();\n  var keyCode, charCode;\n  var altKey = be.altKey;\n\n  // IE reports the character code in the keyCode field for keypress events.\n  // There are two exceptions however, Enter and Escape.\n  if (goog.userAgent.IE && e.type == goog.events.EventType.KEYPRESS) {\n    keyCode = this.keyCode_;\n    charCode = keyCode != goog.events.KeyCodes.ENTER &&\n            keyCode != goog.events.KeyCodes.ESC ?\n        be.keyCode :\n        0;\n\n    // Safari reports the character code in the keyCode field for keypress\n    // events but also has a charCode field.\n  } else if (\n      (goog.userAgent.WEBKIT || goog.userAgent.EDGE) &&\n      e.type == goog.events.EventType.KEYPRESS) {\n    keyCode = this.keyCode_;\n    charCode = be.charCode >= 0 && be.charCode < 63232 &&\n            goog.events.KeyCodes.isCharacterKey(keyCode) ?\n        be.charCode :\n        0;\n\n    // Opera reports the keycode or the character code in the keyCode field.\n  } else if (goog.userAgent.OPERA && !goog.userAgent.WEBKIT) {\n    keyCode = this.keyCode_;\n    charCode = goog.events.KeyCodes.isCharacterKey(keyCode) ? be.keyCode : 0;\n\n    // Mozilla reports the character code in the charCode field.\n  } else {\n    keyCode = be.keyCode || this.keyCode_;\n    charCode = be.charCode || 0;\n    if (goog.events.KeyHandler.SAVE_ALT_FOR_KEYPRESS_ &&\n        e.type == goog.events.EventType.KEYPRESS) {\n      altKey = this.altKey_;\n    }\n    // On the Mac, shift-/ triggers a question mark char code and no key code\n    // (WIN_KEY_FF_LINUX), so we synthesize the latter.\n    if (goog.userAgent.MAC && charCode == goog.events.KeyCodes.QUESTION_MARK &&\n        keyCode == goog.events.KeyCodes.WIN_KEY) {\n      keyCode = goog.events.KeyCodes.SLASH;\n    }\n  }\n\n  keyCode = goog.events.KeyCodes.normalizeKeyCode(keyCode);\n  var key = keyCode;\n\n  // Correct the key value for certain browser-specific quirks.\n  if (keyCode) {\n    if (keyCode >= 63232 && keyCode in goog.events.KeyHandler.safariKey_) {\n      // NOTE(nicksantos): Safari 3 has fixed this problem,\n      // this is only needed for Safari 2.\n      key = goog.events.KeyHandler.safariKey_[keyCode];\n    } else {\n      // Safari returns 25 for Shift+Tab instead of 9.\n      if (keyCode == 25 && e.shiftKey) {\n        key = 9;\n      }\n    }\n  } else if (\n      be.keyIdentifier &&\n      be.keyIdentifier in goog.events.KeyHandler.keyIdentifier_) {\n    // This is needed for Safari Windows because it currently doesn't give a\n    // keyCode/which for non printable keys.\n    key = goog.events.KeyHandler.keyIdentifier_[be.keyIdentifier];\n  }\n\n  // If this was a redundant keypress event, we ignore it to avoid double-firing\n  // an event as the event would've been handled by KEYDOWN. Gecko is currently\n  // in the process of removing keypress events for non-printable characters\n  // (https://bugzilla.mozilla.org/show_bug.cgi?id=968056) so we simulate this\n  // logic here for older Gecko versions which still fire the events.\n  if (goog.userAgent.GECKO && goog.events.KeyHandler.USES_KEYDOWN_ &&\n      e.type == goog.events.EventType.KEYPRESS &&\n      !goog.events.KeyCodes.firesKeyPressEvent(\n          key, this.lastKey_, e.shiftKey, e.ctrlKey, altKey, e.metaKey)) {\n    return;\n  }\n\n  // If we get the same keycode as a keydown/keypress without having seen a\n  // keyup event, then this event was caused by key repeat.\n  var repeat = key == this.lastKey_;\n  this.lastKey_ = key;\n\n  var event = new goog.events.KeyEvent(key, charCode, repeat, be);\n  event.altKey = altKey;\n  this.dispatchEvent(event);\n};\n\n\n/**\n * Returns the element listened on for the real keyboard events.\n * @return {Element|Document|null} The element listened on for the real\n *     keyboard events.\n */\ngoog.events.KeyHandler.prototype.getElement = function() {\n  return this.element_;\n};\n\n\n/**\n * Adds the proper key event listeners to the element.\n * @param {Element|Document} element The element to listen on.\n * @param {boolean=} opt_capture Whether to listen for browser events in\n *     capture phase (defaults to false).\n */\ngoog.events.KeyHandler.prototype.attach = function(element, opt_capture) {\n  if (this.keyUpKey_) {\n    this.detach();\n  }\n\n  this.element_ = element;\n\n  this.keyPressKey_ = goog.events.listen(\n      this.element_, goog.events.EventType.KEYPRESS, this, opt_capture);\n\n  // Most browsers (Safari 2 being the notable exception) doesn't include the\n  // keyCode in keypress events (IE has the char code in the keyCode field and\n  // Mozilla only included the keyCode if there's no charCode). Thus we have to\n  // listen for keydown to capture the keycode.\n  this.keyDownKey_ = goog.events.listen(\n      this.element_, goog.events.EventType.KEYDOWN, this.handleKeyDown_,\n      opt_capture, this);\n\n\n  this.keyUpKey_ = goog.events.listen(\n      this.element_, goog.events.EventType.KEYUP, this.handleKeyup_,\n      opt_capture, this);\n};\n\n\n/**\n * Removes the listeners that may exist.\n */\ngoog.events.KeyHandler.prototype.detach = function() {\n  if (this.keyPressKey_) {\n    goog.events.unlistenByKey(this.keyPressKey_);\n    goog.events.unlistenByKey(this.keyDownKey_);\n    goog.events.unlistenByKey(this.keyUpKey_);\n    this.keyPressKey_ = null;\n    this.keyDownKey_ = null;\n    this.keyUpKey_ = null;\n  }\n  this.element_ = null;\n  this.lastKey_ = -1;\n  this.keyCode_ = -1;\n};\n\n\n/** @override */\ngoog.events.KeyHandler.prototype.disposeInternal = function() {\n  goog.events.KeyHandler.superClass_.disposeInternal.call(this);\n  this.detach();\n};\n\n\n\n/**\n * This class is used for the goog.events.KeyHandler.EventType.KEY event and\n * it overrides the key code with the fixed key code.\n * @param {number} keyCode The adjusted key code.\n * @param {number} charCode The unicode character code.\n * @param {boolean} repeat Whether this event was generated by keyboard repeat.\n * @param {Event} browserEvent Browser event object.\n * @constructor\n * @extends {goog.events.BrowserEvent}\n * @final\n */\ngoog.events.KeyEvent = function(keyCode, charCode, repeat, browserEvent) {\n  goog.events.BrowserEvent.call(this, browserEvent);\n  this.type = goog.events.KeyHandler.EventType.KEY;\n\n  /**\n   * Keycode of key press.\n   * @type {number}\n   */\n  this.keyCode = keyCode;\n\n  /**\n   * Unicode character code.\n   * @type {number}\n   */\n  this.charCode = charCode;\n\n  /**\n   * True if this event was generated by keyboard auto-repeat (i.e., the user is\n   * holding the key down.)\n   * @type {boolean}\n   */\n  this.repeat = repeat;\n};\ngoog.inherits(goog.events.KeyEvent, goog.events.BrowserEvent);\n","// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Generator for unique element IDs.\n *\n */\n\ngoog.provide('goog.ui.IdGenerator');\n\n\n\n/**\n * Creates a new id generator.\n * @constructor\n * @final\n */\ngoog.ui.IdGenerator = function() {};\ngoog.addSingletonGetter(goog.ui.IdGenerator);\n\n\n/**\n * Next unique ID to use\n * @type {number}\n * @private\n */\ngoog.ui.IdGenerator.prototype.nextId_ = 0;\n\n\n/**\n * Gets the next unique ID.\n * @return {string} The next unique identifier.\n */\ngoog.ui.IdGenerator.prototype.getNextUniqueId = function() {\n  return ':' + (this.nextId_++).toString(36);\n};\n","// Copyright 2007 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Abstract class for all UI components. This defines the standard\n * design pattern that all UI components should follow.\n *\n * @author attila@google.com (Attila Bodis)\n * @see ../demos/samplecomponent.html\n * @see http://code.google.com/p/closure-library/wiki/IntroToComponents\n */\n\ngoog.provide('goog.ui.Component');\ngoog.provide('goog.ui.Component.Error');\ngoog.provide('goog.ui.Component.EventType');\ngoog.provide('goog.ui.Component.State');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.dom');\ngoog.require('goog.dom.NodeType');\ngoog.require('goog.dom.TagName');\ngoog.require('goog.events.EventHandler');\ngoog.require('goog.events.EventTarget');\ngoog.require('goog.object');\ngoog.require('goog.style');\ngoog.require('goog.ui.IdGenerator');\n\n\n\n/**\n * Default implementation of UI component.\n *\n * @param {goog.dom.DomHelper=} opt_domHelper Optional DOM helper.\n * @constructor\n * @extends {goog.events.EventTarget}\n * @suppress {underscore}\n */\ngoog.ui.Component = function(opt_domHelper) {\n  goog.events.EventTarget.call(this);\n  /**\n   * DomHelper used to interact with the document, allowing components to be\n   * created in a different window.\n   * @protected {!goog.dom.DomHelper}\n   * @suppress {underscore|visibility}\n   */\n  this.dom_ = opt_domHelper || goog.dom.getDomHelper();\n\n  /**\n   * Whether the component is rendered right-to-left.  Right-to-left is set\n   * lazily when {@link #isRightToLeft} is called the first time, unless it has\n   * been set by calling {@link #setRightToLeft} explicitly.\n   * @private {?boolean}\n   */\n  this.rightToLeft_ = goog.ui.Component.defaultRightToLeft_;\n\n  /**\n   * Unique ID of the component, lazily initialized in {@link\n   * goog.ui.Component#getId} if needed.  This property is strictly private and\n   * must not be accessed directly outside of this class!\n   * @private {?string}\n   */\n  this.id_ = null;\n\n  /**\n   * Whether the component is in the document.\n   * @private {boolean}\n   */\n  this.inDocument_ = false;\n\n  // TODO(attila): Stop referring to this private field in subclasses.\n  /**\n   * The DOM element for the component.\n   * @private {Element}\n   */\n  this.element_ = null;\n\n  /**\n   * Event handler.\n   * TODO(user): rename it to handler_ after all component subclasses in\n   * inside Google have been cleaned up.\n   * Code search: http://go/component_code_search\n   * @private {goog.events.EventHandler|undefined}\n   */\n  this.googUiComponentHandler_ = void 0;\n\n  /**\n   * Arbitrary data object associated with the component.  Such as meta-data.\n   * @private {*}\n   */\n  this.model_ = null;\n\n  /**\n   * Parent component to which events will be propagated.  This property is\n   * strictly private and must not be accessed directly outside of this class!\n   * @private {goog.ui.Component?}\n   */\n  this.parent_ = null;\n\n  /**\n   * Array of child components.  Lazily initialized on first use.  Must be kept\n   * in sync with `childIndex_`.  This property is strictly private and\n   * must not be accessed directly outside of this class!\n   * @private {Array<goog.ui.Component>?}\n   */\n  this.children_ = null;\n\n  /**\n   * Map of child component IDs to child components.  Used for constant-time\n   * random access to child components by ID.  Lazily initialized on first use.\n   * Must be kept in sync with `children_`.  This property is strictly\n   * private and must not be accessed directly outside of this class!\n   *\n   * We use a plain Object, not a {@link goog.structs.Map}, for simplicity.\n   * This means components can't have children with IDs such as 'constructor' or\n   * 'valueOf', but this shouldn't really be an issue in practice, and if it is,\n   * we can always fix it later without changing the API.\n   *\n   * @private {Object}\n   */\n  this.childIndex_ = null;\n\n  /**\n   * Flag used to keep track of whether a component decorated an already\n   * existing element or whether it created the DOM itself.\n   *\n   * If an element is decorated, dispose will leave the node in the document.\n   * It is up to the app to remove the node.\n   *\n   * If an element was rendered, dispose will remove the node automatically.\n   *\n   * @private {boolean}\n   */\n  this.wasDecorated_ = false;\n\n  /**\n   * If true, listen for PointerEvent types rather than MouseEvent types. This\n   * allows supporting drag gestures for touch/stylus input.\n   * @private {boolean}\n   */\n  this.pointerEventsEnabled_ = false;\n};\ngoog.inherits(goog.ui.Component, goog.events.EventTarget);\n\n\n/**\n * @define {boolean} Whether to support calling decorate with an element that is\n *     not yet in the document. If true, we check if the element is in the\n *     document, and avoid calling enterDocument if it isn't. If false, we\n *     maintain legacy behavior (always call enterDocument from decorate).\n */\ngoog.define('goog.ui.Component.ALLOW_DETACHED_DECORATION', false);\n\n\n/**\n * Generator for unique IDs.\n * @type {goog.ui.IdGenerator}\n * @private\n */\ngoog.ui.Component.prototype.idGenerator_ = goog.ui.IdGenerator.getInstance();\n\n\n// TODO(gboyer): See if we can remove this and just check goog.i18n.bidi.IS_RTL.\n/**\n * @define {number} Defines the default BIDI directionality.\n *     0: Unknown.\n *     1: Left-to-right.\n *     -1: Right-to-left.\n */\ngoog.define('goog.ui.Component.DEFAULT_BIDI_DIR', 0);\n\n\n/**\n * The default right to left value.\n * @type {?boolean}\n * @private\n */\ngoog.ui.Component.defaultRightToLeft_ =\n    (goog.ui.Component.DEFAULT_BIDI_DIR == 1) ?\n    false :\n    (goog.ui.Component.DEFAULT_BIDI_DIR == -1) ? true : null;\n\n\n/**\n * Common events fired by components so that event propagation is useful.  Not\n * all components are expected to dispatch or listen for all event types.\n * Events dispatched before a state transition should be cancelable to prevent\n * the corresponding state change.\n * @enum {string}\n */\ngoog.ui.Component.EventType = {\n  /** Dispatched before the component becomes visible. */\n  BEFORE_SHOW: 'beforeshow',\n\n  /**\n   * Dispatched after the component becomes visible.\n   * NOTE(user): For goog.ui.Container, this actually fires before containers\n   * are shown.  Use goog.ui.Container.EventType.AFTER_SHOW if you want an event\n   * that fires after a goog.ui.Container is shown.\n   */\n  SHOW: 'show',\n\n  /** Dispatched before the component becomes hidden. */\n  HIDE: 'hide',\n\n  /** Dispatched before the component becomes disabled. */\n  DISABLE: 'disable',\n\n  /** Dispatched before the component becomes enabled. */\n  ENABLE: 'enable',\n\n  /** Dispatched before the component becomes highlighted. */\n  HIGHLIGHT: 'highlight',\n\n  /** Dispatched before the component becomes un-highlighted. */\n  UNHIGHLIGHT: 'unhighlight',\n\n  /** Dispatched before the component becomes activated. */\n  ACTIVATE: 'activate',\n\n  /** Dispatched before the component becomes deactivated. */\n  DEACTIVATE: 'deactivate',\n\n  /** Dispatched before the component becomes selected. */\n  SELECT: 'select',\n\n  /** Dispatched before the component becomes un-selected. */\n  UNSELECT: 'unselect',\n\n  /** Dispatched before a component becomes checked. */\n  CHECK: 'check',\n\n  /** Dispatched before a component becomes un-checked. */\n  UNCHECK: 'uncheck',\n\n  /** Dispatched before a component becomes focused. */\n  FOCUS: 'focus',\n\n  /** Dispatched before a component becomes blurred. */\n  BLUR: 'blur',\n\n  /** Dispatched before a component is opened (expanded). */\n  OPEN: 'open',\n\n  /** Dispatched before a component is closed (collapsed). */\n  CLOSE: 'close',\n\n  /** Dispatched after a component is moused over. */\n  ENTER: 'enter',\n\n  /** Dispatched after a component is moused out of. */\n  LEAVE: 'leave',\n\n  /** Dispatched after the user activates the component. */\n  ACTION: 'action',\n\n  /** Dispatched after the external-facing state of a component is changed. */\n  CHANGE: 'change'\n};\n\n\n/**\n * Errors thrown by the component.\n * @enum {string}\n */\ngoog.ui.Component.Error = {\n  /**\n   * Error when a method is not supported.\n   */\n  NOT_SUPPORTED: 'Method not supported',\n\n  /**\n   * Error when the given element can not be decorated.\n   */\n  DECORATE_INVALID: 'Invalid element to decorate',\n\n  /**\n   * Error when the component is already rendered and another render attempt is\n   * made.\n   */\n  ALREADY_RENDERED: 'Component already rendered',\n\n  /**\n   * Error when an attempt is made to set the parent of a component in a way\n   * that would result in an inconsistent object graph.\n   */\n  PARENT_UNABLE_TO_BE_SET: 'Unable to set parent component',\n\n  /**\n   * Error when an attempt is made to add a child component at an out-of-bounds\n   * index.  We don't support sparse child arrays.\n   */\n  CHILD_INDEX_OUT_OF_BOUNDS: 'Child component index out of bounds',\n\n  /**\n   * Error when an attempt is made to remove a child component from a component\n   * other than its parent.\n   */\n  NOT_OUR_CHILD: 'Child is not in parent component',\n\n  /**\n   * Error when an operation requiring DOM interaction is made when the\n   * component is not in the document\n   */\n  NOT_IN_DOCUMENT: 'Operation not supported while component is not in document',\n\n  /**\n   * Error when an invalid component state is encountered.\n   */\n  STATE_INVALID: 'Invalid component state'\n};\n\n\n/**\n * Common component states.  Components may have distinct appearance depending\n * on what state(s) apply to them.  Not all components are expected to support\n * all states.\n * @enum {number}\n */\ngoog.ui.Component.State = {\n  /**\n   * Union of all supported component states.\n   */\n  ALL: 0xFF,\n\n  /**\n   * Component is disabled.\n   * @see goog.ui.Component.EventType.DISABLE\n   * @see goog.ui.Component.EventType.ENABLE\n   */\n  DISABLED: 0x01,\n\n  /**\n   * Component is highlighted.\n   * @see goog.ui.Component.EventType.HIGHLIGHT\n   * @see goog.ui.Component.EventType.UNHIGHLIGHT\n   */\n  HOVER: 0x02,\n\n  /**\n   * Component is active (or \"pressed\").\n   * @see goog.ui.Component.EventType.ACTIVATE\n   * @see goog.ui.Component.EventType.DEACTIVATE\n   */\n  ACTIVE: 0x04,\n\n  /**\n   * Component is selected.\n   * @see goog.ui.Component.EventType.SELECT\n   * @see goog.ui.Component.EventType.UNSELECT\n   */\n  SELECTED: 0x08,\n\n  /**\n   * Component is checked.\n   * @see goog.ui.Component.EventType.CHECK\n   * @see goog.ui.Component.EventType.UNCHECK\n   */\n  CHECKED: 0x10,\n\n  /**\n   * Component has focus.\n   * @see goog.ui.Component.EventType.FOCUS\n   * @see goog.ui.Component.EventType.BLUR\n   */\n  FOCUSED: 0x20,\n\n  /**\n   * Component is opened (expanded).  Applies to tree nodes, menu buttons,\n   * submenus, zippys (zippies?), etc.\n   * @see goog.ui.Component.EventType.OPEN\n   * @see goog.ui.Component.EventType.CLOSE\n   */\n  OPENED: 0x40\n};\n\n\n/**\n * Static helper method; returns the type of event components are expected to\n * dispatch when transitioning to or from the given state.\n * @param {goog.ui.Component.State} state State to/from which the component\n *     is transitioning.\n * @param {boolean} isEntering Whether the component is entering or leaving the\n *     state.\n * @return {goog.ui.Component.EventType} Event type to dispatch.\n */\ngoog.ui.Component.getStateTransitionEvent = function(state, isEntering) {\n  switch (state) {\n    case goog.ui.Component.State.DISABLED:\n      return isEntering ? goog.ui.Component.EventType.DISABLE :\n                          goog.ui.Component.EventType.ENABLE;\n    case goog.ui.Component.State.HOVER:\n      return isEntering ? goog.ui.Component.EventType.HIGHLIGHT :\n                          goog.ui.Component.EventType.UNHIGHLIGHT;\n    case goog.ui.Component.State.ACTIVE:\n      return isEntering ? goog.ui.Component.EventType.ACTIVATE :\n                          goog.ui.Component.EventType.DEACTIVATE;\n    case goog.ui.Component.State.SELECTED:\n      return isEntering ? goog.ui.Component.EventType.SELECT :\n                          goog.ui.Component.EventType.UNSELECT;\n    case goog.ui.Component.State.CHECKED:\n      return isEntering ? goog.ui.Component.EventType.CHECK :\n                          goog.ui.Component.EventType.UNCHECK;\n    case goog.ui.Component.State.FOCUSED:\n      return isEntering ? goog.ui.Component.EventType.FOCUS :\n                          goog.ui.Component.EventType.BLUR;\n    case goog.ui.Component.State.OPENED:\n      return isEntering ? goog.ui.Component.EventType.OPEN :\n                          goog.ui.Component.EventType.CLOSE;\n    default:\n      // Fall through.\n  }\n\n  // Invalid state.\n  throw new Error(goog.ui.Component.Error.STATE_INVALID);\n};\n\n\n/**\n * Set the default right-to-left value. This causes all component's created from\n * this point forward to have the given value. This is useful for cases where\n * a given page is always in one directionality, avoiding unnecessary\n * right to left determinations.\n * @param {?boolean} rightToLeft Whether the components should be rendered\n *     right-to-left. Null iff components should determine their directionality.\n */\ngoog.ui.Component.setDefaultRightToLeft = function(rightToLeft) {\n  goog.ui.Component.defaultRightToLeft_ = rightToLeft;\n};\n\n\n/**\n * Gets the unique ID for the instance of this component.  If the instance\n * doesn't already have an ID, generates one on the fly.\n * @return {string} Unique component ID.\n */\ngoog.ui.Component.prototype.getId = function() {\n  return this.id_ || (this.id_ = this.idGenerator_.getNextUniqueId());\n};\n\n\n/**\n * Assigns an ID to this component instance.  It is the caller's responsibility\n * to guarantee that the ID is unique.  If the component is a child of a parent\n * component, then the parent component's child index is updated to reflect the\n * new ID; this may throw an error if the parent already has a child with an ID\n * that conflicts with the new ID.\n * @param {string} id Unique component ID.\n */\ngoog.ui.Component.prototype.setId = function(id) {\n  if (this.parent_ && this.parent_.childIndex_) {\n    // Update the parent's child index.\n    goog.object.remove(this.parent_.childIndex_, this.id_);\n    goog.object.add(this.parent_.childIndex_, id, this);\n  }\n\n  // Update the component ID.\n  this.id_ = id;\n};\n\n\n/**\n * Gets the component's element.\n * @return {Element} The element for the component.\n */\ngoog.ui.Component.prototype.getElement = function() {\n  return this.element_;\n};\n\n\n/**\n * Gets the component's element. This differs from getElement in that\n * it assumes that the element exists (i.e. the component has been\n * rendered/decorated) and will cause an assertion error otherwise (if\n * assertion is enabled).\n * @return {!Element} The element for the component.\n */\ngoog.ui.Component.prototype.getElementStrict = function() {\n  var el = this.element_;\n  goog.asserts.assert(\n      el, 'Can not call getElementStrict before rendering/decorating.');\n  return el;\n};\n\n\n/**\n * Sets the component's root element to the given element.  Considered\n * protected and final.\n *\n * This should generally only be called during createDom. Setting the element\n * does not actually change which element is rendered, only the element that is\n * associated with this UI component.\n *\n * This should only be used by subclasses and its associated renderers.\n *\n * @param {Element} element Root element for the component.\n */\ngoog.ui.Component.prototype.setElementInternal = function(element) {\n  this.element_ = element;\n};\n\n\n/**\n * Returns an array of all the elements in this component's DOM with the\n * provided className.\n * @param {string} className The name of the class to look for.\n * @return {!IArrayLike<!Element>} The items found with the class name provided.\n */\ngoog.ui.Component.prototype.getElementsByClass = function(className) {\n  return this.element_ ?\n      this.dom_.getElementsByClass(className, this.element_) :\n      [];\n};\n\n\n/**\n * Returns the first element in this component's DOM with the provided\n * className.\n * @param {string} className The name of the class to look for.\n * @return {Element} The first item with the class name provided.\n */\ngoog.ui.Component.prototype.getElementByClass = function(className) {\n  return this.element_ ? this.dom_.getElementByClass(className, this.element_) :\n                         null;\n};\n\n\n/**\n * Similar to `getElementByClass` except that it expects the\n * element to be present in the dom thus returning a required value. Otherwise,\n * will assert.\n * @param {string} className The name of the class to look for.\n * @return {!Element} The first item with the class name provided.\n */\ngoog.ui.Component.prototype.getRequiredElementByClass = function(className) {\n  var el = this.getElementByClass(className);\n  goog.asserts.assert(\n      el, 'Expected element in component with class: %s', className);\n  return el;\n};\n\n\n/**\n * Returns the event handler for this component, lazily created the first time\n * this method is called.\n * @return {!goog.events.EventHandler<T>} Event handler for this component.\n * @protected\n * @this {T}\n * @template T\n */\ngoog.ui.Component.prototype.getHandler = function() {\n  // TODO(user): templated \"this\" values currently result in \"this\" being\n  // \"unknown\" in the body of the function.\n  var self = /** @type {goog.ui.Component} */ (this);\n  if (!self.googUiComponentHandler_) {\n    self.googUiComponentHandler_ = new goog.events.EventHandler(self);\n  }\n  return goog.asserts.assert(self.googUiComponentHandler_);\n};\n\n\n/**\n * Sets the parent of this component to use for event bubbling.  Throws an error\n * if the component already has a parent or if an attempt is made to add a\n * component to itself as a child.  Callers must use `removeChild`\n * or `removeChildAt` to remove components from their containers before\n * calling this method.\n * @see goog.ui.Component#removeChild\n * @see goog.ui.Component#removeChildAt\n * @param {goog.ui.Component} parent The parent component.\n */\ngoog.ui.Component.prototype.setParent = function(parent) {\n  if (this == parent) {\n    // Attempting to add a child to itself is an error.\n    throw new Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);\n  }\n\n  if (parent && this.parent_ && this.id_ && this.parent_.getChild(this.id_) &&\n      this.parent_ != parent) {\n    // This component is already the child of some parent, so it should be\n    // removed using removeChild/removeChildAt first.\n    throw new Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);\n  }\n\n  this.parent_ = parent;\n  goog.ui.Component.superClass_.setParentEventTarget.call(this, parent);\n};\n\n\n/**\n * Returns the component's parent, if any.\n * @return {goog.ui.Component?} The parent component.\n */\ngoog.ui.Component.prototype.getParent = function() {\n  return this.parent_;\n};\n\n\n/**\n * Overrides {@link goog.events.EventTarget#setParentEventTarget} to throw an\n * error if the parent component is set, and the argument is not the parent.\n * @override\n */\ngoog.ui.Component.prototype.setParentEventTarget = function(parent) {\n  if (this.parent_ && this.parent_ != parent) {\n    throw new Error(goog.ui.Component.Error.NOT_SUPPORTED);\n  }\n  goog.ui.Component.superClass_.setParentEventTarget.call(this, parent);\n};\n\n\n/**\n * Returns the dom helper that is being used on this component.\n * @return {!goog.dom.DomHelper} The dom helper used on this component.\n */\ngoog.ui.Component.prototype.getDomHelper = function() {\n  return this.dom_;\n};\n\n\n/**\n * Determines whether the component has been added to the document.\n * @return {boolean} TRUE if rendered. Otherwise, FALSE.\n */\ngoog.ui.Component.prototype.isInDocument = function() {\n  return this.inDocument_;\n};\n\n\n/**\n * Creates the initial DOM representation for the component.  The default\n * implementation is to set this.element_ = div.\n */\ngoog.ui.Component.prototype.createDom = function() {\n  this.element_ = this.dom_.createElement(goog.dom.TagName.DIV);\n};\n\n\n/**\n * Renders the component.  If a parent element is supplied, the component's\n * element will be appended to it.  If there is no optional parent element and\n * the element doesn't have a parentNode then it will be appended to the\n * document body.\n *\n * If this component has a parent component, and the parent component is\n * not in the document already, then this will not call `enterDocument`\n * on this component.\n *\n * Throws an Error if the component is already rendered.\n *\n * @param {Element=} opt_parentElement Optional parent element to render the\n *    component into.\n */\ngoog.ui.Component.prototype.render = function(opt_parentElement) {\n  this.render_(opt_parentElement);\n};\n\n\n/**\n * Renders the component before another element. The other element should be in\n * the document already.\n *\n * Throws an Error if the component is already rendered.\n *\n * @param {Node} sibling Node to render the component before.\n */\ngoog.ui.Component.prototype.renderBefore = function(sibling) {\n  this.render_(/** @type {Element} */ (sibling.parentNode), sibling);\n};\n\n\n/**\n * Renders the component.  If a parent element is supplied, the component's\n * element will be appended to it.  If there is no optional parent element and\n * the element doesn't have a parentNode then it will be appended to the\n * document body.\n *\n * If this component has a parent component, and the parent component is\n * not in the document already, then this will not call `enterDocument`\n * on this component.\n *\n * Throws an Error if the component is already rendered.\n *\n * @param {Element=} opt_parentElement Optional parent element to render the\n *    component into.\n * @param {Node=} opt_beforeNode Node before which the component is to\n *    be rendered.  If left out the node is appended to the parent element.\n * @private\n */\ngoog.ui.Component.prototype.render_ = function(\n    opt_parentElement, opt_beforeNode) {\n  if (this.inDocument_) {\n    throw new Error(goog.ui.Component.Error.ALREADY_RENDERED);\n  }\n\n  if (!this.element_) {\n    this.createDom();\n  }\n\n  if (opt_parentElement) {\n    opt_parentElement.insertBefore(this.element_, opt_beforeNode || null);\n  } else {\n    this.dom_.getDocument().body.appendChild(this.element_);\n  }\n\n  // If this component has a parent component that isn't in the document yet,\n  // we don't call enterDocument() here.  Instead, when the parent component\n  // enters the document, the enterDocument() call will propagate to its\n  // children, including this one.  If the component doesn't have a parent\n  // or if the parent is already in the document, we call enterDocument().\n  if (!this.parent_ || this.parent_.isInDocument()) {\n    this.enterDocument();\n  }\n};\n\n\n/**\n * Decorates the element for the UI component. If the element is in the\n * document, the enterDocument method will be called.\n *\n * If goog.ui.Component.ALLOW_DETACHED_DECORATION is false, the caller must\n * pass an element that is in the document.\n *\n * @param {Element} element Element to decorate.\n */\ngoog.ui.Component.prototype.decorate = function(element) {\n  if (this.inDocument_) {\n    throw new Error(goog.ui.Component.Error.ALREADY_RENDERED);\n  } else if (element && this.canDecorate(element)) {\n    this.wasDecorated_ = true;\n\n    // Set the DOM helper of the component to match the decorated element.\n    var doc = goog.dom.getOwnerDocument(element);\n    if (!this.dom_ || this.dom_.getDocument() != doc) {\n      this.dom_ = goog.dom.getDomHelper(element);\n    }\n\n    // Call specific component decorate logic.\n    this.decorateInternal(element);\n\n    // If supporting detached decoration, check that element is in doc.\n    if (!goog.ui.Component.ALLOW_DETACHED_DECORATION ||\n        goog.dom.contains(doc, element)) {\n      this.enterDocument();\n    }\n  } else {\n    throw new Error(goog.ui.Component.Error.DECORATE_INVALID);\n  }\n};\n\n\n/**\n * Determines if a given element can be decorated by this type of component.\n * This method should be overridden by inheriting objects.\n * @param {Element} element Element to decorate.\n * @return {boolean} True if the element can be decorated, false otherwise.\n */\ngoog.ui.Component.prototype.canDecorate = function(element) {\n  return true;\n};\n\n\n/**\n * @return {boolean} Whether the component was decorated.\n */\ngoog.ui.Component.prototype.wasDecorated = function() {\n  return this.wasDecorated_;\n};\n\n\n/**\n * Actually decorates the element. Should be overridden by inheriting objects.\n * This method can assume there are checks to ensure the component has not\n * already been rendered have occurred and that enter document will be called\n * afterwards. This method is considered protected.\n * @param {Element} element Element to decorate.\n * @protected\n */\ngoog.ui.Component.prototype.decorateInternal = function(element) {\n  this.element_ = element;\n};\n\n\n/**\n * Called when the component's element is known to be in the document. Anything\n * using document.getElementById etc. should be done at this stage.\n *\n * If the component contains child components, this call is propagated to its\n * children.\n */\ngoog.ui.Component.prototype.enterDocument = function() {\n  this.inDocument_ = true;\n\n  // Propagate enterDocument to child components that have a DOM, if any.\n  // If a child was decorated before entering the document (permitted when\n  // goog.ui.Component.ALLOW_DETACHED_DECORATION is true), its enterDocument\n  // will be called here.\n  this.forEachChild(function(child) {\n    if (!child.isInDocument() && child.getElement()) {\n      child.enterDocument();\n    }\n  });\n};\n\n\n/**\n * Called by dispose to clean up the elements and listeners created by a\n * component, or by a parent component/application who has removed the\n * component from the document but wants to reuse it later.\n *\n * If the component contains child components, this call is propagated to its\n * children.\n *\n * It should be possible for the component to be rendered again once this method\n * has been called.\n */\ngoog.ui.Component.prototype.exitDocument = function() {\n  // Propagate exitDocument to child components that have been rendered, if any.\n  this.forEachChild(function(child) {\n    if (child.isInDocument()) {\n      child.exitDocument();\n    }\n  });\n\n  if (this.googUiComponentHandler_) {\n    this.googUiComponentHandler_.removeAll();\n  }\n\n  this.inDocument_ = false;\n};\n\n\n/**\n * Disposes of the component.  Calls `exitDocument`, which is expected to\n * remove event handlers and clean up the component.  Propagates the call to\n * the component's children, if any. Removes the component's DOM from the\n * document unless it was decorated.\n * @override\n * @protected\n */\ngoog.ui.Component.prototype.disposeInternal = function() {\n  if (this.inDocument_) {\n    this.exitDocument();\n  }\n\n  if (this.googUiComponentHandler_) {\n    this.googUiComponentHandler_.dispose();\n    delete this.googUiComponentHandler_;\n  }\n\n  // Disposes of the component's children, if any.\n  this.forEachChild(function(child) { child.dispose(); });\n\n  // Detach the component's element from the DOM, unless it was decorated.\n  if (!this.wasDecorated_ && this.element_) {\n    goog.dom.removeNode(this.element_);\n  }\n\n  this.children_ = null;\n  this.childIndex_ = null;\n  this.element_ = null;\n  this.model_ = null;\n  this.parent_ = null;\n\n  goog.ui.Component.superClass_.disposeInternal.call(this);\n};\n\n\n/**\n * Helper function for subclasses that gets a unique id for a given fragment,\n * this can be used by components to generate unique string ids for DOM\n * elements.\n * @param {string} idFragment A partial id.\n * @return {string} Unique element id.\n */\ngoog.ui.Component.prototype.makeId = function(idFragment) {\n  return this.getId() + '.' + idFragment;\n};\n\n\n/**\n * Makes a collection of ids.  This is a convenience method for makeId.  The\n * object's values are the id fragments and the new values are the generated\n * ids.  The key will remain the same.\n * @param {Object} object The object that will be used to create the ids.\n * @return {!Object<string, string>} An object of id keys to generated ids.\n */\ngoog.ui.Component.prototype.makeIds = function(object) {\n  var ids = {};\n  for (var key in object) {\n    ids[key] = this.makeId(object[key]);\n  }\n  return ids;\n};\n\n\n/**\n * Returns the model associated with the UI component.\n * @return {*} The model.\n */\ngoog.ui.Component.prototype.getModel = function() {\n  return this.model_;\n};\n\n\n/**\n * Sets the model associated with the UI component.\n * @param {*} obj The model.\n */\ngoog.ui.Component.prototype.setModel = function(obj) {\n  this.model_ = obj;\n};\n\n\n/**\n * Helper function for returning the fragment portion of an id generated using\n * makeId().\n * @param {string} id Id generated with makeId().\n * @return {string} Fragment.\n */\ngoog.ui.Component.prototype.getFragmentFromId = function(id) {\n  return id.substring(this.getId().length + 1);\n};\n\n\n/**\n * Helper function for returning an element in the document with a unique id\n * generated using makeId().\n * @param {string} idFragment The partial id.\n * @return {Element} The element with the unique id, or null if it cannot be\n *     found.\n */\ngoog.ui.Component.prototype.getElementByFragment = function(idFragment) {\n  if (!this.inDocument_) {\n    throw new Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);\n  }\n  return this.dom_.getElement(this.makeId(idFragment));\n};\n\n\n/**\n * Adds the specified component as the last child of this component.  See\n * {@link goog.ui.Component#addChildAt} for detailed semantics.\n *\n * @see goog.ui.Component#addChildAt\n * @param {goog.ui.Component} child The new child component.\n * @param {boolean=} opt_render If true, the child component will be rendered\n *    into the parent.\n */\ngoog.ui.Component.prototype.addChild = function(child, opt_render) {\n  // TODO(gboyer): addChildAt(child, this.getChildCount(), false) will\n  // reposition any already-rendered child to the end.  Instead, perhaps\n  // addChild(child, false) should never reposition the child; instead, clients\n  // that need the repositioning will use addChildAt explicitly.  Right now,\n  // clients can get around this by calling addChild before calling decorate.\n  this.addChildAt(child, this.getChildCount(), opt_render);\n};\n\n\n/**\n * Adds the specified component as a child of this component at the given\n * 0-based index.\n *\n * Both `addChild` and `addChildAt` assume the following contract\n * between parent and child components:\n *  <ul>\n *    <li>the child component's element must be a descendant of the parent\n *        component's element, and\n *    <li>the DOM state of the child component must be consistent with the DOM\n *        state of the parent component (see `isInDocument`) in the\n *        steady state -- the exception is to addChildAt(child, i, false) and\n *        then immediately decorate/render the child.\n *  </ul>\n *\n * In particular, `parent.addChild(child)` will throw an error if the\n * child component is already in the document, but the parent isn't.\n *\n * Clients of this API may call `addChild` and `addChildAt` with\n * `opt_render` set to true.  If `opt_render` is true, calling these\n * methods will automatically render the child component's element into the\n * parent component's element. If the parent does not yet have an element, then\n * `createDom` will automatically be invoked on the parent before\n * rendering the child.\n *\n * Invoking {@code parent.addChild(child, true)} will throw an error if the\n * child component is already in the document, regardless of the parent's DOM\n * state.\n *\n * If `opt_render` is true and the parent component is not already\n * in the document, `enterDocument` will not be called on this component\n * at this point.\n *\n * Finally, this method also throws an error if the new child already has a\n * different parent, or the given index is out of bounds.\n *\n * @see goog.ui.Component#addChild\n * @param {goog.ui.Component} child The new child component.\n * @param {number} index 0-based index at which the new child component is to be\n *    added; must be between 0 and the current child count (inclusive).\n * @param {boolean=} opt_render If true, the child component will be rendered\n *    into the parent.\n * @return {void} Nada.\n */\ngoog.ui.Component.prototype.addChildAt = function(child, index, opt_render) {\n  goog.asserts.assert(!!child, 'Provided element must not be null.');\n\n  if (child.inDocument_ && (opt_render || !this.inDocument_)) {\n    // Adding a child that's already in the document is an error, except if the\n    // parent is also in the document and opt_render is false (e.g. decorate()).\n    throw new Error(goog.ui.Component.Error.ALREADY_RENDERED);\n  }\n\n  if (index < 0 || index > this.getChildCount()) {\n    // Allowing sparse child arrays would lead to strange behavior, so we don't.\n    throw new Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);\n  }\n\n  // Create the index and the child array on first use.\n  if (!this.childIndex_ || !this.children_) {\n    this.childIndex_ = {};\n    this.children_ = [];\n  }\n\n  // Moving child within component, remove old reference.\n  if (child.getParent() == this) {\n    goog.object.set(this.childIndex_, child.getId(), child);\n    goog.array.remove(this.children_, child);\n\n    // Add the child to this component.  goog.object.add() throws an error if\n    // a child with the same ID already exists.\n  } else {\n    goog.object.add(this.childIndex_, child.getId(), child);\n  }\n\n  // Set the parent of the child to this component.  This throws an error if\n  // the child is already contained by another component.\n  child.setParent(this);\n  goog.array.insertAt(this.children_, child, index);\n\n  if (child.inDocument_ && this.inDocument_ && child.getParent() == this) {\n    // Changing the position of an existing child, move the DOM node (if\n    // necessary).\n    var contentElement = this.getContentElement();\n    var insertBeforeElement = contentElement.childNodes[index] || null;\n    if (insertBeforeElement != child.getElement()) {\n      contentElement.insertBefore(child.getElement(), insertBeforeElement);\n    }\n  } else if (opt_render) {\n    // If this (parent) component doesn't have a DOM yet, call createDom now\n    // to make sure we render the child component's element into the correct\n    // parent element (otherwise render_ with a null first argument would\n    // render the child into the document body, which is almost certainly not\n    // what we want).\n    if (!this.element_) {\n      this.createDom();\n    }\n    // Render the child into the parent at the appropriate location.  Note that\n    // getChildAt(index + 1) returns undefined if inserting at the end.\n    // TODO(attila): We should have a renderer with a renderChildAt API.\n    var sibling = this.getChildAt(index + 1);\n    // render_() calls enterDocument() if the parent is already in the document.\n    child.render_(this.getContentElement(), sibling ? sibling.element_ : null);\n  } else if (\n      this.inDocument_ && !child.inDocument_ && child.element_ &&\n      child.element_.parentNode &&\n      // Under some circumstances, IE8 implicitly creates a Document Fragment\n      // for detached nodes, so ensure the parent is an Element as it should be.\n      child.element_.parentNode.nodeType == goog.dom.NodeType.ELEMENT) {\n    // We don't touch the DOM, but if the parent is in the document, and the\n    // child element is in the document but not marked as such, then we call\n    // enterDocument on the child.\n    // TODO(gboyer): It would be nice to move this condition entirely, but\n    // there's a large risk of breaking existing applications that manually\n    // append the child to the DOM and then call addChild.\n    child.enterDocument();\n  }\n};\n\n\n/**\n * Returns the DOM element into which child components are to be rendered,\n * or null if the component itself hasn't been rendered yet.  This default\n * implementation returns the component's root element.  Subclasses with\n * complex DOM structures must override this method.\n * @return {Element} Element to contain child elements (null if none).\n */\ngoog.ui.Component.prototype.getContentElement = function() {\n  return this.element_;\n};\n\n\n/**\n * Returns true if the component is rendered right-to-left, false otherwise.\n * The first time this function is invoked, the right-to-left rendering property\n * is set if it has not been already.\n * @return {boolean} Whether the control is rendered right-to-left.\n */\ngoog.ui.Component.prototype.isRightToLeft = function() {\n  if (this.rightToLeft_ == null) {\n    this.rightToLeft_ = goog.style.isRightToLeft(\n        this.inDocument_ ? this.element_ : this.dom_.getDocument().body);\n  }\n  return this.rightToLeft_;\n};\n\n\n/**\n * Set is right-to-left. This function should be used if the component needs\n * to know the rendering direction during dom creation (i.e. before\n * {@link #enterDocument} is called and is right-to-left is set).\n * @param {boolean} rightToLeft Whether the component is rendered\n *     right-to-left.\n */\ngoog.ui.Component.prototype.setRightToLeft = function(rightToLeft) {\n  if (this.inDocument_) {\n    throw new Error(goog.ui.Component.Error.ALREADY_RENDERED);\n  }\n  this.rightToLeft_ = rightToLeft;\n};\n\n\n/**\n * Returns true if the component has children.\n * @return {boolean} True if the component has children.\n */\ngoog.ui.Component.prototype.hasChildren = function() {\n  return !!this.children_ && this.children_.length != 0;\n};\n\n\n/**\n * Returns the number of children of this component.\n * @return {number} The number of children.\n */\ngoog.ui.Component.prototype.getChildCount = function() {\n  return this.children_ ? this.children_.length : 0;\n};\n\n\n/**\n * Returns an array containing the IDs of the children of this component, or an\n * empty array if the component has no children.\n * @return {!Array<string>} Child component IDs.\n */\ngoog.ui.Component.prototype.getChildIds = function() {\n  var ids = [];\n\n  // We don't use goog.object.getKeys(this.childIndex_) because we want to\n  // return the IDs in the correct order as determined by this.children_.\n  this.forEachChild(function(child) {\n    // addChild()/addChildAt() guarantee that the child array isn't sparse.\n    ids.push(child.getId());\n  });\n\n  return ids;\n};\n\n\n/**\n * Returns the child with the given ID, or null if no such child exists.\n * @param {string} id Child component ID.\n * @return {goog.ui.Component?} The child with the given ID; null if none.\n */\ngoog.ui.Component.prototype.getChild = function(id) {\n  // Use childIndex_ for O(1) access by ID.\n  return (this.childIndex_ && id) ?\n      /** @type {goog.ui.Component} */ (\n          goog.object.get(this.childIndex_, id)) ||\n          null :\n      null;\n};\n\n\n/**\n * Returns the child at the given index, or null if the index is out of bounds.\n * @param {number} index 0-based index.\n * @return {goog.ui.Component?} The child at the given index; null if none.\n */\ngoog.ui.Component.prototype.getChildAt = function(index) {\n  // Use children_ for access by index.\n  return this.children_ ? this.children_[index] || null : null;\n};\n\n\n/**\n * Calls the given function on each of this component's children in order.  If\n * `opt_obj` is provided, it will be used as the 'this' object in the\n * function when called.  The function should take two arguments:  the child\n * component and its 0-based index.  The return value is ignored.\n * @param {function(this:T,?,number):?} f The function to call for every\n * child component; should take 2 arguments (the child and its index).\n * @param {T=} opt_obj Used as the 'this' object in f when called.\n * @template T\n */\ngoog.ui.Component.prototype.forEachChild = function(f, opt_obj) {\n  if (this.children_) {\n    goog.array.forEach(this.children_, f, opt_obj);\n  }\n};\n\n\n/**\n * Returns the 0-based index of the given child component, or -1 if no such\n * child is found.\n * @param {goog.ui.Component?} child The child component.\n * @return {number} 0-based index of the child component; -1 if not found.\n */\ngoog.ui.Component.prototype.indexOfChild = function(child) {\n  return (this.children_ && child) ? goog.array.indexOf(this.children_, child) :\n                                     -1;\n};\n\n\n/**\n * Removes the given child from this component, and returns it.  Throws an error\n * if the argument is invalid or if the specified child isn't found in the\n * parent component.  The argument can either be a string (interpreted as the\n * ID of the child component to remove) or the child component itself.\n *\n * If `opt_unrender` is true, calls {@link goog.ui.component#exitDocument}\n * on the removed child, and subsequently detaches the child's DOM from the\n * document.  Otherwise it is the caller's responsibility to clean up the child\n * component's DOM.\n *\n * @see goog.ui.Component#removeChildAt\n * @param {string|goog.ui.Component|null} child The ID of the child to remove,\n *    or the child component itself.\n * @param {boolean=} opt_unrender If true, calls `exitDocument` on the\n *    removed child component, and detaches its DOM from the document.\n * @return {goog.ui.Component} The removed component, if any.\n */\ngoog.ui.Component.prototype.removeChild = function(child, opt_unrender) {\n  if (child) {\n    // Normalize child to be the object and id to be the ID string.  This also\n    // ensures that the child is really ours.\n    var id = goog.isString(child) ? child : child.getId();\n    child = this.getChild(id);\n\n    if (id && child) {\n      goog.object.remove(this.childIndex_, id);\n      goog.array.remove(this.children_, child);\n\n      if (opt_unrender) {\n        // Remove the child component's DOM from the document.  We have to call\n        // exitDocument first (see documentation).\n        child.exitDocument();\n        if (child.element_) {\n          goog.dom.removeNode(child.element_);\n        }\n      }\n\n      // Child's parent must be set to null after exitDocument is called\n      // so that the child can unlisten to its parent if required.\n      child.setParent(null);\n    }\n  }\n\n  if (!child) {\n    throw new Error(goog.ui.Component.Error.NOT_OUR_CHILD);\n  }\n\n  return /** @type {!goog.ui.Component} */ (child);\n};\n\n\n/**\n * Removes the child at the given index from this component, and returns it.\n * Throws an error if the argument is out of bounds, or if the specified child\n * isn't found in the parent.  See {@link goog.ui.Component#removeChild} for\n * detailed semantics.\n *\n * @see goog.ui.Component#removeChild\n * @param {number} index 0-based index of the child to remove.\n * @param {boolean=} opt_unrender If true, calls `exitDocument` on the\n *    removed child component, and detaches its DOM from the document.\n * @return {goog.ui.Component} The removed component, if any.\n */\ngoog.ui.Component.prototype.removeChildAt = function(index, opt_unrender) {\n  // removeChild(null) will throw error.\n  return this.removeChild(this.getChildAt(index), opt_unrender);\n};\n\n\n/**\n * Removes every child component attached to this one and returns them.\n *\n * @see goog.ui.Component#removeChild\n * @param {boolean=} opt_unrender If true, calls {@link #exitDocument} on the\n *    removed child components, and detaches their DOM from the document.\n * @return {!Array<goog.ui.Component>} The removed components if any.\n */\ngoog.ui.Component.prototype.removeChildren = function(opt_unrender) {\n  var removedChildren = [];\n  while (this.hasChildren()) {\n    removedChildren.push(this.removeChildAt(0, opt_unrender));\n  }\n  return removedChildren;\n};\n\n\n/**\n * Returns whether this component should listen for PointerEvent types rather\n * than MouseEvent types. This allows supporting drag gestures for touch/stylus\n * input.\n * @return {boolean}\n */\ngoog.ui.Component.prototype.pointerEventsEnabled = function() {\n  return this.pointerEventsEnabled_;\n};\n\n\n/**\n * Indicates whether this component should listen for PointerEvent types rather\n * than MouseEvent types. This allows supporting drag gestures for touch/stylus\n * input. Must be called before enterDocument to listen for the correct event\n * types.\n * @param {boolean} enable\n */\ngoog.ui.Component.prototype.setPointerEventsEnabled = function(enable) {\n  if (this.inDocument_) {\n    throw new Error(goog.ui.Component.Error.ALREADY_RENDERED);\n  }\n  this.pointerEventsEnabled_ = enable;\n};\n","// Copyright 2018 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Static utility methods for UI components.\n */\n\ngoog.provide('goog.ui.ComponentUtil');\n\ngoog.require('goog.events.EventType');\ngoog.require('goog.events.PointerAsMouseEventType');\n\n\n\n/**\n * @param {!goog.ui.Component} component\n * @return {!Object} The mouse event type the given component should listen for.\n */\ngoog.ui.ComponentUtil.getMouseEventType = function(component) {\n  return component.pointerEventsEnabled() ?\n      goog.events.PointerAsMouseEventType :\n      goog.events.EventType;\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n/**\n * @fileoverview The file contains generated enumerations for ARIA roles\n * as defined by W3C ARIA standard: http://www.w3.org/TR/wai-aria/.\n *\n * This is auto-generated code. Do not manually edit! For more details\n * about how to edit it via the generator check go/closure-ariagen.\n */\n\ngoog.provide('goog.a11y.aria.Role');\n\n\n/**\n * ARIA role values.\n * @enum {string}\n */\ngoog.a11y.aria.Role = {\n  // ARIA role for an alert element that doesn't need to be explicitly closed.\n  ALERT: 'alert',\n\n  // ARIA role for an alert dialog element that takes focus and must be closed.\n  ALERTDIALOG: 'alertdialog',\n\n  // ARIA role for an application that implements its own keyboard navigation.\n  APPLICATION: 'application',\n\n  // ARIA role for an article.\n  ARTICLE: 'article',\n\n  // ARIA role for a banner containing mostly site content, not page content.\n  BANNER: 'banner',\n\n  // ARIA role for a button element.\n  BUTTON: 'button',\n\n  // ARIA role for a checkbox button element; use with the CHECKED state.\n  CHECKBOX: 'checkbox',\n\n  // ARIA role for a column header of a table or grid.\n  COLUMNHEADER: 'columnheader',\n\n  // ARIA role for a combo box element.\n  COMBOBOX: 'combobox',\n\n  // ARIA role for a supporting section of the document.\n  COMPLEMENTARY: 'complementary',\n\n  // ARIA role for a large perceivable region that contains information\n  // about the parent document.\n  CONTENTINFO: 'contentinfo',\n\n  // ARIA role for a definition of a term or concept.\n  DEFINITION: 'definition',\n\n  // ARIA role for a dialog, some descendant must take initial focus.\n  DIALOG: 'dialog',\n\n  // ARIA role for a directory, like a table of contents.\n  DIRECTORY: 'directory',\n\n  // ARIA role for a part of a page that's a document, not a web application.\n  DOCUMENT: 'document',\n\n  // ARIA role for a landmark region logically considered one form.\n  FORM: 'form',\n\n  // ARIA role for an interactive control of tabular data.\n  GRID: 'grid',\n\n  // ARIA role for a cell in a grid.\n  GRIDCELL: 'gridcell',\n\n  // ARIA role for a group of related elements like tree item siblings.\n  GROUP: 'group',\n\n  // ARIA role for a heading element.\n  HEADING: 'heading',\n\n  // ARIA role for a container of elements that together comprise one image.\n  IMG: 'img',\n\n  // ARIA role for a link.\n  LINK: 'link',\n\n  // ARIA role for a list of non-interactive list items.\n  LIST: 'list',\n\n  // ARIA role for a listbox.\n  LISTBOX: 'listbox',\n\n  // ARIA role for a list item.\n  LISTITEM: 'listitem',\n\n  // ARIA role for a live region where new information is added.\n  LOG: 'log',\n\n  // ARIA landmark role for the main content in a document. Use only once.\n  MAIN: 'main',\n\n  // ARIA role for a live region of non-essential information that changes.\n  MARQUEE: 'marquee',\n\n  // ARIA role for a mathematical expression.\n  MATH: 'math',\n\n  // ARIA role for a popup menu.\n  MENU: 'menu',\n\n  // ARIA role for a menubar element containing menu elements.\n  MENUBAR: 'menubar',\n\n  // ARIA role for menu item elements.\n  MENU_ITEM: 'menuitem',\n\n  // ARIA role for a checkbox box element inside a menu.\n  MENU_ITEM_CHECKBOX: 'menuitemcheckbox',\n\n  // ARIA role for a radio button element inside a menu.\n  MENU_ITEM_RADIO: 'menuitemradio',\n\n  // ARIA landmark role for a collection of navigation links.\n  NAVIGATION: 'navigation',\n\n  // ARIA role for a section ancillary to the main content.\n  NOTE: 'note',\n\n  // ARIA role for option items that are  children of combobox, listbox, menu,\n  // radiogroup, or tree elements.\n  OPTION: 'option',\n\n  // ARIA role for ignorable cosmetic elements with no semantic significance.\n  PRESENTATION: 'presentation',\n\n  // ARIA role for a progress bar element.\n  PROGRESSBAR: 'progressbar',\n\n  // ARIA role for a radio button element.\n  RADIO: 'radio',\n\n  // ARIA role for a group of connected radio button elements.\n  RADIOGROUP: 'radiogroup',\n\n  // ARIA role for an important region of the page.\n  REGION: 'region',\n\n  // ARIA role for a row of cells in a grid.\n  ROW: 'row',\n\n  // ARIA role for a group of one or more rows in a grid.\n  ROWGROUP: 'rowgroup',\n\n  // ARIA role for a row header of a table or grid.\n  ROWHEADER: 'rowheader',\n\n  // ARIA role for a scrollbar element.\n  SCROLLBAR: 'scrollbar',\n\n  // ARIA landmark role for a part of the page providing search functionality.\n  SEARCH: 'search',\n\n  // ARIA role for a menu separator.\n  SEPARATOR: 'separator',\n\n  // ARIA role for a slider.\n  SLIDER: 'slider',\n\n  // ARIA role for a spin button.\n  SPINBUTTON: 'spinbutton',\n\n  // ARIA role for a live region with advisory info less severe than an alert.\n  STATUS: 'status',\n\n  // ARIA role for a tab button.\n  TAB: 'tab',\n\n  // ARIA role for a tab bar (i.e. a list of tab buttons).\n  TAB_LIST: 'tablist',\n\n  // ARIA role for a tab page (i.e. the element holding tab contents).\n  TAB_PANEL: 'tabpanel',\n\n  // ARIA role for a textbox element.\n  TEXTBOX: 'textbox',\n\n  // ARIA role for a textinfo element.\n  TEXTINFO: 'textinfo',\n\n  // ARIA role for an element displaying elapsed time or time remaining.\n  TIMER: 'timer',\n\n  // ARIA role for a toolbar element.\n  TOOLBAR: 'toolbar',\n\n  // ARIA role for a tooltip element.\n  TOOLTIP: 'tooltip',\n\n  // ARIA role for a tree.\n  TREE: 'tree',\n\n  // ARIA role for a grid whose rows can be expanded and collapsed like a tree.\n  TREEGRID: 'treegrid',\n\n  // ARIA role for a tree item that sometimes may be expanded or collapsed.\n  TREEITEM: 'treeitem'\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n/**\n * @fileoverview The file contains generated enumerations for ARIA states\n * and properties as defined by W3C ARIA standard:\n * http://www.w3.org/TR/wai-aria/.\n *\n * This is auto-generated code. Do not manually edit! For more details\n * about how to edit it via the generator check go/closure-ariagen.\n */\n\ngoog.provide('goog.a11y.aria.AutoCompleteValues');\ngoog.provide('goog.a11y.aria.CheckedValues');\ngoog.provide('goog.a11y.aria.DropEffectValues');\ngoog.provide('goog.a11y.aria.ExpandedValues');\ngoog.provide('goog.a11y.aria.GrabbedValues');\ngoog.provide('goog.a11y.aria.InvalidValues');\ngoog.provide('goog.a11y.aria.LivePriority');\ngoog.provide('goog.a11y.aria.OrientationValues');\ngoog.provide('goog.a11y.aria.PressedValues');\ngoog.provide('goog.a11y.aria.RelevantValues');\ngoog.provide('goog.a11y.aria.SelectedValues');\ngoog.provide('goog.a11y.aria.SortValues');\ngoog.provide('goog.a11y.aria.State');\n\n\n/**\n * ARIA states and properties.\n * @enum {string}\n */\ngoog.a11y.aria.State = {\n  // ARIA property for setting the currently active descendant of an element,\n  // for example the selected item in a list box. Value: ID of an element.\n  ACTIVEDESCENDANT: 'activedescendant',\n\n  // ARIA property that, if true, indicates that all of a changed region should\n  // be presented, instead of only parts. Value: one of {true, false}.\n  ATOMIC: 'atomic',\n\n  // ARIA property to specify that input completion is provided. Value:\n  // one of {'inline', 'list', 'both', 'none'}.\n  AUTOCOMPLETE: 'autocomplete',\n\n  // ARIA state to indicate that an element and its subtree are being updated.\n  // Value: one of {true, false}.\n  BUSY: 'busy',\n\n  // ARIA state for a checked item. Value: one of {'true', 'false', 'mixed',\n  // undefined}.\n  CHECKED: 'checked',\n\n  // ARIA state that defines an element's column index or position with respect\n  // to the total number of columns within a table, grid, or treegrid.\n  // Value: number.\n  COLINDEX: 'colindex',\n\n  // ARIA property that identifies the element or elements whose contents or\n  // presence are controlled by this element.\n  // Value: space-separated IDs of other elements.\n  CONTROLS: 'controls',\n\n  // ARIA property that identifies the element or elements that describe\n  // this element. Value: space-separated IDs of other elements.\n  DESCRIBEDBY: 'describedby',\n\n  // ARIA state for a disabled item. Value: one of {true, false}.\n  DISABLED: 'disabled',\n\n  // ARIA property that indicates what functions can be performed when a\n  // dragged object is released on the drop target.  Value: one of\n  // {'copy', 'move', 'link', 'execute', 'popup', 'none'}.\n  DROPEFFECT: 'dropeffect',\n\n  // ARIA state for setting whether the element like a tree node is expanded.\n  // Value: one of {true, false, undefined}.\n  EXPANDED: 'expanded',\n\n  // ARIA property that identifies the next element (or elements) in the\n  // recommended reading order of content. Value: space-separated ids of\n  // elements to flow to.\n  FLOWTO: 'flowto',\n\n  // ARIA state that indicates an element's \"grabbed\" state in drag-and-drop.\n  // Value: one of {true, false, undefined}.\n  GRABBED: 'grabbed',\n\n  // ARIA property indicating whether the element has a popup.\n  // Value: one of {true, false}.\n  HASPOPUP: 'haspopup',\n\n  // ARIA state indicating that the element is not visible or perceivable\n  // to any user. Value: one of {true, false}.\n  HIDDEN: 'hidden',\n\n  // ARIA state indicating that the entered value does not conform. Value:\n  // one of {false, true, 'grammar', 'spelling'}\n  INVALID: 'invalid',\n\n  // ARIA property that provides a label to override any other text, value, or\n  // contents used to describe this element. Value: string.\n  LABEL: 'label',\n\n  // ARIA property for setting the element which labels another element.\n  // Value: space-separated IDs of elements.\n  LABELLEDBY: 'labelledby',\n\n  // ARIA property for setting the level of an element in the hierarchy.\n  // Value: integer.\n  LEVEL: 'level',\n\n  // ARIA property indicating that an element will be updated, and\n  // describes the types of updates the user agents, assistive technologies,\n  // and user can expect from the live region. Value: one of {'off', 'polite',\n  // 'assertive'}.\n  LIVE: 'live',\n\n  // ARIA property indicating whether a text box can accept multiline input.\n  // Value: one of {true, false}.\n  MULTILINE: 'multiline',\n\n  // ARIA property indicating if the user may select more than one item.\n  // Value: one of {true, false}.\n  MULTISELECTABLE: 'multiselectable',\n\n  // ARIA property indicating if the element is horizontal or vertical.\n  // Value: one of {'vertical', 'horizontal'}.\n  ORIENTATION: 'orientation',\n\n  // ARIA property creating a visual, functional, or contextual parent/child\n  // relationship when the DOM hierarchy can't be used to represent it.\n  // Value: Space-separated IDs of elements.\n  OWNS: 'owns',\n\n  // ARIA property that defines an element's number of position in a list.\n  // Value: integer.\n  POSINSET: 'posinset',\n\n  // ARIA state for a pressed item.\n  // Value: one of {true, false, undefined, 'mixed'}.\n  PRESSED: 'pressed',\n\n  // ARIA property indicating that an element is not editable.\n  // Value: one of {true, false}.\n  READONLY: 'readonly',\n\n  // ARIA property indicating that change notifications within this subtree\n  // of a live region should be announced. Value: one of {'additions',\n  // 'removals', 'text', 'all', 'additions text'}.\n  RELEVANT: 'relevant',\n\n  // ARIA property indicating that user input is required on this element\n  // before a form may be submitted. Value: one of {true, false}.\n  REQUIRED: 'required',\n\n  // ARIA state that defines an element's row index or position with respect\n  // to the total number of rows within a table, grid, or treegrid.\n  // Value: number.\n  ROWINDEX: 'rowindex',\n\n  // ARIA state for setting the currently selected item in the list.\n  // Value: one of {true, false, undefined}.\n  SELECTED: 'selected',\n\n  // ARIA property defining the number of items in a list. Value: integer.\n  SETSIZE: 'setsize',\n\n  // ARIA property indicating if items are sorted. Value: one of {'ascending',\n  // 'descending', 'none', 'other'}.\n  SORT: 'sort',\n\n  // ARIA property for slider maximum value. Value: number.\n  VALUEMAX: 'valuemax',\n\n  // ARIA property for slider minimum value. Value: number.\n  VALUEMIN: 'valuemin',\n\n  // ARIA property for slider active value. Value: number.\n  VALUENOW: 'valuenow',\n\n  // ARIA property for slider active value represented as text.\n  // Value: string.\n  VALUETEXT: 'valuetext'\n};\n\n\n/**\n * ARIA state values for AutoCompleteValues.\n * @enum {string}\n */\ngoog.a11y.aria.AutoCompleteValues = {\n  // The system provides text after the caret as a suggestion\n  // for how to complete the field.\n  INLINE: 'inline',\n  // A list of choices appears from which the user can choose,\n  // but the edit box retains focus.\n  LIST: 'list',\n  // A list of choices appears and the currently selected suggestion\n  // also appears inline.\n  BOTH: 'both',\n  // No input completion suggestions are provided.\n  NONE: 'none'\n};\n\n\n/**\n * ARIA state values for DropEffectValues.\n * @enum {string}\n */\ngoog.a11y.aria.DropEffectValues = {\n  // A duplicate of the source object will be dropped into the target.\n  COPY: 'copy',\n  // The source object will be removed from its current location\n  // and dropped into the target.\n  MOVE: 'move',\n  // A reference or shortcut to the dragged object\n  // will be created in the target object.\n  LINK: 'link',\n  // A function supported by the drop target is\n  // executed, using the drag source as an input.\n  EXECUTE: 'execute',\n  // There is a popup menu or dialog that allows the user to choose\n  // one of the drag operations (copy, move, link, execute) and any other\n  // drag functionality, such as cancel.\n  POPUP: 'popup',\n  // No operation can be performed; effectively\n  // cancels the drag operation if an attempt is made to drop on this object.\n  NONE: 'none'\n};\n\n\n/**\n * ARIA state values for LivePriority.\n * @enum {string}\n */\ngoog.a11y.aria.LivePriority = {\n  // Updates to the region will not be presented to the user\n  // unless the assitive technology is currently focused on that region.\n  OFF: 'off',\n  // (Background change) Assistive technologies SHOULD announce\n  // updates at the next graceful opportunity, such as at the end of\n  // speaking the current sentence or when the user pauses typing.\n  POLITE: 'polite',\n  // This information has the highest priority and assistive\n  // technologies SHOULD notify the user immediately.\n  // Because an interruption may disorient users or cause them to not complete\n  // their current task, authors SHOULD NOT use the assertive value unless the\n  // interruption is imperative.\n  ASSERTIVE: 'assertive'\n};\n\n\n/**\n * ARIA state values for OrientationValues.\n * @enum {string}\n */\ngoog.a11y.aria.OrientationValues = {\n  // The element is oriented vertically.\n  VERTICAL: 'vertical',\n  // The element is oriented horizontally.\n  HORIZONTAL: 'horizontal'\n};\n\n\n/**\n * ARIA state values for RelevantValues.\n * @enum {string}\n */\ngoog.a11y.aria.RelevantValues = {\n  // Element nodes are added to the DOM within the live region.\n  ADDITIONS: 'additions',\n  // Text or element nodes within the live region are removed from the DOM.\n  REMOVALS: 'removals',\n  // Text is added to any DOM descendant nodes of the live region.\n  TEXT: 'text',\n  // Equivalent to the combination of all values, \"additions removals text\".\n  ALL: 'all'\n};\n\n\n/**\n * ARIA state values for SortValues.\n * @enum {string}\n */\ngoog.a11y.aria.SortValues = {\n  // Items are sorted in ascending order by this column.\n  ASCENDING: 'ascending',\n  // Items are sorted in descending order by this column.\n  DESCENDING: 'descending',\n  // There is no defined sort applied to the column.\n  NONE: 'none',\n  // A sort algorithm other than ascending or descending has been applied.\n  OTHER: 'other'\n};\n\n\n/**\n * ARIA state values for CheckedValues.\n * @enum {string}\n */\ngoog.a11y.aria.CheckedValues = {\n  // The selectable element is checked.\n  TRUE: 'true',\n  // The selectable element is not checked.\n  FALSE: 'false',\n  // Indicates a mixed mode value for a tri-state\n  // checkbox or menuitemcheckbox.\n  MIXED: 'mixed',\n  // The element does not support being checked.\n  UNDEFINED: 'undefined'\n};\n\n\n/**\n * ARIA state values for ExpandedValues.\n * @enum {string}\n */\ngoog.a11y.aria.ExpandedValues = {\n  // The element, or another grouping element it controls, is expanded.\n  TRUE: 'true',\n  // The element, or another grouping element it controls, is collapsed.\n  FALSE: 'false',\n  // The element, or another grouping element\n  // it controls, is neither expandable nor collapsible; all its\n  // child elements are shown or there are no child elements.\n  UNDEFINED: 'undefined'\n};\n\n\n/**\n * ARIA state values for GrabbedValues.\n * @enum {string}\n */\ngoog.a11y.aria.GrabbedValues = {\n  // Indicates that the element has been \"grabbed\" for dragging.\n  TRUE: 'true',\n  // Indicates that the element supports being dragged.\n  FALSE: 'false',\n  // Indicates that the element does not support being dragged.\n  UNDEFINED: 'undefined'\n};\n\n\n/**\n * ARIA state values for InvalidValues.\n * @enum {string}\n */\ngoog.a11y.aria.InvalidValues = {\n  // There are no detected errors in the value.\n  FALSE: 'false',\n  // The value entered by the user has failed validation.\n  TRUE: 'true',\n  // A grammatical error was detected.\n  GRAMMAR: 'grammar',\n  // A spelling error was detected.\n  SPELLING: 'spelling'\n};\n\n\n/**\n * ARIA state values for PressedValues.\n * @enum {string}\n */\ngoog.a11y.aria.PressedValues = {\n  // The element is pressed.\n  TRUE: 'true',\n  // The element supports being pressed but is not currently pressed.\n  FALSE: 'false',\n  // Indicates a mixed mode value for a tri-state toggle button.\n  MIXED: 'mixed',\n  // The element does not support being pressed.\n  UNDEFINED: 'undefined'\n};\n\n\n/**\n * ARIA state values for SelectedValues.\n * @enum {string}\n */\ngoog.a11y.aria.SelectedValues = {\n  // The selectable element is selected.\n  TRUE: 'true',\n  // The selectable element is not selected.\n  FALSE: 'false',\n  // The element is not selectable.\n  UNDEFINED: 'undefined'\n};\n","// Copyright 2013 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n/**\n * @fileoverview The file contains data tables generated from the ARIA\n * standard schema http://www.w3.org/TR/wai-aria/.\n *\n * This is auto-generated code. Do not manually edit!\n */\n\ngoog.provide('goog.a11y.aria.datatables');\n\ngoog.require('goog.a11y.aria.State');\ngoog.require('goog.object');\n\n\n/**\n * A map that contains mapping between an ARIA state and the default value\n * for it. Note that not all ARIA states have default values.\n *\n * @type {Object<!(goog.a11y.aria.State|string), (string|boolean|number)>}\n */\ngoog.a11y.aria.DefaultStateValueMap_;\n\n\n/**\n * A method that creates a map that contains mapping between an ARIA state and\n * the default value for it. Note that not all ARIA states have default values.\n *\n * @return {!Object<!(goog.a11y.aria.State|string), (string|boolean|number)>}\n *      The names for each of the notification methods.\n */\ngoog.a11y.aria.datatables.getDefaultValuesMap = function() {\n  if (!goog.a11y.aria.DefaultStateValueMap_) {\n    goog.a11y.aria.DefaultStateValueMap_ = goog.object.create(\n        goog.a11y.aria.State.ATOMIC, false, goog.a11y.aria.State.AUTOCOMPLETE,\n        'none', goog.a11y.aria.State.DROPEFFECT, 'none',\n        goog.a11y.aria.State.HASPOPUP, false, goog.a11y.aria.State.LIVE, 'off',\n        goog.a11y.aria.State.MULTILINE, false,\n        goog.a11y.aria.State.MULTISELECTABLE, false,\n        goog.a11y.aria.State.ORIENTATION, 'vertical',\n        goog.a11y.aria.State.READONLY, false, goog.a11y.aria.State.RELEVANT,\n        'additions text', goog.a11y.aria.State.REQUIRED, false,\n        goog.a11y.aria.State.SORT, 'none', goog.a11y.aria.State.BUSY, false,\n        goog.a11y.aria.State.DISABLED, false, goog.a11y.aria.State.HIDDEN,\n        false, goog.a11y.aria.State.INVALID, 'false');\n  }\n\n  return goog.a11y.aria.DefaultStateValueMap_;\n};\n","// Copyright 2007 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n/**\n * @fileoverview Utilities for adding, removing and setting ARIA roles and\n * states as defined by W3C ARIA standard: http://www.w3.org/TR/wai-aria/\n * All modern browsers have some form of ARIA support, so no browser checks are\n * performed when adding ARIA to components.\n *\n */\n\ngoog.provide('goog.a11y.aria');\n\ngoog.require('goog.a11y.aria.Role');\ngoog.require('goog.a11y.aria.State');\ngoog.require('goog.a11y.aria.datatables');\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.dom');\ngoog.require('goog.dom.TagName');\ngoog.require('goog.object');\ngoog.require('goog.string');\n\n\n/**\n * ARIA states/properties prefix.\n * @private\n */\ngoog.a11y.aria.ARIA_PREFIX_ = 'aria-';\n\n\n/**\n * ARIA role attribute.\n * @private\n */\ngoog.a11y.aria.ROLE_ATTRIBUTE_ = 'role';\n\n\n/**\n * A list of tag names for which we don't need to set ARIA role and states\n * because they have well supported semantics for screen readers or because\n * they don't contain content to be made accessible.\n * @private\n */\ngoog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_ = goog.object.createSet([\n  goog.dom.TagName.A, goog.dom.TagName.AREA, goog.dom.TagName.BUTTON,\n  goog.dom.TagName.HEAD, goog.dom.TagName.INPUT, goog.dom.TagName.LINK,\n  goog.dom.TagName.MENU, goog.dom.TagName.META, goog.dom.TagName.OPTGROUP,\n  goog.dom.TagName.OPTION, goog.dom.TagName.PROGRESS, goog.dom.TagName.STYLE,\n  goog.dom.TagName.SELECT, goog.dom.TagName.SOURCE, goog.dom.TagName.TEXTAREA,\n  goog.dom.TagName.TITLE, goog.dom.TagName.TRACK\n]);\n\n\n/**\n * A list of roles which are considered container roles.\n * Container roles are ARIA roles which use the aria-activedescendant property\n * to manage their active descendants or children. See\n * {@link http://www.w3.org/TR/wai-aria/states_and_properties\n * #aria-activedescendant} for more information.\n * @private @const {!Array<goog.a11y.aria.Role>}\n */\ngoog.a11y.aria.CONTAINER_ROLES_ = [\n  goog.a11y.aria.Role.COMBOBOX, goog.a11y.aria.Role.GRID,\n  goog.a11y.aria.Role.GROUP, goog.a11y.aria.Role.LISTBOX,\n  goog.a11y.aria.Role.MENU, goog.a11y.aria.Role.MENUBAR,\n  goog.a11y.aria.Role.RADIOGROUP, goog.a11y.aria.Role.ROW,\n  goog.a11y.aria.Role.ROWGROUP, goog.a11y.aria.Role.TAB_LIST,\n  goog.a11y.aria.Role.TEXTBOX, goog.a11y.aria.Role.TOOLBAR,\n  goog.a11y.aria.Role.TREE, goog.a11y.aria.Role.TREEGRID\n];\n\n\n/**\n * Sets the role of an element. If the roleName is\n * empty string or null, the role for the element is removed.\n * We encourage clients to call the goog.a11y.aria.removeRole\n * method instead of setting null and empty string values.\n * Special handling for this case is added to ensure\n * backword compatibility with existing code.\n *\n * @param {!Element} element DOM node to set role of.\n * @param {!goog.a11y.aria.Role|string} roleName role name(s).\n */\ngoog.a11y.aria.setRole = function(element, roleName) {\n  if (!roleName) {\n    // Setting the ARIA role to empty string is not allowed\n    // by the ARIA standard.\n    goog.a11y.aria.removeRole(element);\n  } else {\n    if (goog.asserts.ENABLE_ASSERTS) {\n      goog.asserts.assert(\n          goog.object.containsValue(goog.a11y.aria.Role, roleName),\n          'No such ARIA role ' + roleName);\n    }\n    element.setAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_, roleName);\n  }\n};\n\n\n/**\n * Gets role of an element.\n * @param {!Element} element DOM element to get role of.\n * @return {?goog.a11y.aria.Role} ARIA Role name.\n */\ngoog.a11y.aria.getRole = function(element) {\n  var role = element.getAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_);\n  return /** @type {goog.a11y.aria.Role} */ (role) || null;\n};\n\n\n/**\n * Removes role of an element.\n * @param {!Element} element DOM element to remove the role from.\n */\ngoog.a11y.aria.removeRole = function(element) {\n  element.removeAttribute(goog.a11y.aria.ROLE_ATTRIBUTE_);\n};\n\n\n/**\n * Sets the state or property of an element.\n * @param {!Element} element DOM node where we set state.\n * @param {!(goog.a11y.aria.State|string)} stateName State attribute being set.\n *     Automatically adds prefix 'aria-' to the state name if the attribute is\n *     not an extra attribute.\n * @param {string|boolean|number|!Array<string>} value Value\n * for the state attribute.\n */\ngoog.a11y.aria.setState = function(element, stateName, value) {\n  if (goog.isArray(value)) {\n    value = value.join(' ');\n  }\n  var attrStateName = goog.a11y.aria.getAriaAttributeName_(stateName);\n  if (value === '' || value == undefined) {\n    var defaultValueMap = goog.a11y.aria.datatables.getDefaultValuesMap();\n    // Work around for browsers that don't properly support ARIA.\n    // According to the ARIA W3C standard, user agents should allow\n    // setting empty value which results in setting the default value\n    // for the ARIA state if such exists. The exact text from the ARIA W3C\n    // standard (http://www.w3.org/TR/wai-aria/states_and_properties):\n    // \"When a value is indicated as the default, the user agent\n    // MUST follow the behavior prescribed by this value when the state or\n    // property is empty or undefined.\"\n    // The defaultValueMap contains the default values for the ARIA states\n    // and has as a key the goog.a11y.aria.State constant for the state.\n    if (stateName in defaultValueMap) {\n      element.setAttribute(attrStateName, defaultValueMap[stateName]);\n    } else {\n      element.removeAttribute(attrStateName);\n    }\n  } else {\n    element.setAttribute(attrStateName, value);\n  }\n};\n\n\n/**\n * Toggles the ARIA attribute of an element.\n * Meant for attributes with a true/false value, but works with any attribute.\n * If the attribute does not have a true/false value, the following rules apply:\n * A not empty attribute will be removed.\n * An empty attribute will be set to true.\n * @param {!Element} el DOM node for which to set attribute.\n * @param {!(goog.a11y.aria.State|string)} attr ARIA attribute being set.\n *     Automatically adds prefix 'aria-' to the attribute name if the attribute\n *     is not an extra attribute.\n */\ngoog.a11y.aria.toggleState = function(el, attr) {\n  var val = goog.a11y.aria.getState(el, attr);\n  if (!goog.string.isEmptyOrWhitespace(goog.string.makeSafe(val)) &&\n      !(val == 'true' || val == 'false')) {\n    goog.a11y.aria.removeState(el, /** @type {!goog.a11y.aria.State} */ (attr));\n    return;\n  }\n  goog.a11y.aria.setState(el, attr, val == 'true' ? 'false' : 'true');\n};\n\n\n/**\n * Remove the state or property for the element.\n * @param {!Element} element DOM node where we set state.\n * @param {!goog.a11y.aria.State} stateName State name.\n */\ngoog.a11y.aria.removeState = function(element, stateName) {\n  element.removeAttribute(goog.a11y.aria.getAriaAttributeName_(stateName));\n};\n\n\n/**\n * Gets value of specified state or property.\n * @param {!Element} element DOM node to get state from.\n * @param {!goog.a11y.aria.State|string} stateName State name.\n * @return {string} Value of the state attribute.\n */\ngoog.a11y.aria.getState = function(element, stateName) {\n  // TODO(user): return properly typed value result --\n  // boolean, number, string, null. We should be able to chain\n  // getState(...) and setState(...) methods.\n\n  var attr =\n      /** @type {string|number|boolean} */ (\n          element.getAttribute(\n              goog.a11y.aria.getAriaAttributeName_(stateName)));\n  var isNullOrUndefined = attr == null || attr == undefined;\n  return isNullOrUndefined ? '' : String(attr);\n};\n\n\n/**\n * Returns the activedescendant element for the input element by\n * using the activedescendant ARIA property of the given element.\n * @param {!Element} element DOM node to get activedescendant\n *     element for.\n * @return {?Element} DOM node of the activedescendant, if found.\n */\ngoog.a11y.aria.getActiveDescendant = function(element) {\n  var id =\n      goog.a11y.aria.getState(element, goog.a11y.aria.State.ACTIVEDESCENDANT);\n  return goog.dom.getOwnerDocument(element).getElementById(id);\n};\n\n\n/**\n * Sets the activedescendant ARIA property value for an element.\n * If the activeElement is not null, it should have an id set.\n * @param {!Element} element DOM node to set activedescendant ARIA property to.\n * @param {?Element} activeElement DOM node being set as activedescendant.\n */\ngoog.a11y.aria.setActiveDescendant = function(element, activeElement) {\n  var id = '';\n  if (activeElement) {\n    id = activeElement.id;\n    goog.asserts.assert(id, 'The active element should have an id.');\n  }\n\n  goog.a11y.aria.setState(element, goog.a11y.aria.State.ACTIVEDESCENDANT, id);\n};\n\n\n/**\n * Gets the label of the given element.\n * @param {!Element} element DOM node to get label from.\n * @return {string} label The label.\n */\ngoog.a11y.aria.getLabel = function(element) {\n  return goog.a11y.aria.getState(element, goog.a11y.aria.State.LABEL);\n};\n\n\n/**\n * Sets the label of the given element.\n * @param {!Element} element DOM node to set label to.\n * @param {string} label The label to set.\n */\ngoog.a11y.aria.setLabel = function(element, label) {\n  goog.a11y.aria.setState(element, goog.a11y.aria.State.LABEL, label);\n};\n\n\n/**\n * Asserts that the element has a role set if it's not an HTML element whose\n * semantics is well supported by most screen readers.\n * Only to be used internally by the ARIA library in goog.a11y.aria.*.\n * @param {!Element} element The element to assert an ARIA role set.\n * @param {!IArrayLike<string>} allowedRoles The child roles of\n * the roles.\n */\ngoog.a11y.aria.assertRoleIsSetInternalUtil = function(element, allowedRoles) {\n  if (goog.a11y.aria.TAGS_WITH_ASSUMED_ROLES_[element.tagName]) {\n    return;\n  }\n  var elementRole = /** @type {string}*/ (goog.a11y.aria.getRole(element));\n  goog.asserts.assert(\n      elementRole != null, 'The element ARIA role cannot be null.');\n\n  goog.asserts.assert(\n      goog.array.contains(allowedRoles, elementRole),\n      'Non existing or incorrect role set for element.' +\n          'The role set is \"' + elementRole + '\". The role should be any of \"' +\n          allowedRoles + '\". Check the ARIA specification for more details ' +\n          'http://www.w3.org/TR/wai-aria/roles.');\n};\n\n\n/**\n * Gets the boolean value of an ARIA state/property.\n * @param {!Element} element The element to get the ARIA state for.\n * @param {!goog.a11y.aria.State|string} stateName the ARIA state name.\n * @return {?boolean} Boolean value for the ARIA state value or null if\n *     the state value is not 'true', not 'false', or not set.\n */\ngoog.a11y.aria.getStateBoolean = function(element, stateName) {\n  var attr =\n      /** @type {string|boolean|null} */ (element.getAttribute(\n          goog.a11y.aria.getAriaAttributeName_(stateName)));\n  goog.asserts.assert(\n      goog.isBoolean(attr) || attr == null || attr == 'true' ||\n      attr == 'false');\n  if (attr == null) {\n    return attr;\n  }\n  return goog.isBoolean(attr) ? attr : attr == 'true';\n};\n\n\n/**\n * Gets the number value of an ARIA state/property.\n * @param {!Element} element The element to get the ARIA state for.\n * @param {!goog.a11y.aria.State|string} stateName the ARIA state name.\n * @return {?number} Number value for the ARIA state value or null if\n *     the state value is not a number or not set.\n */\ngoog.a11y.aria.getStateNumber = function(element, stateName) {\n  var attr =\n      /** @type {string|number} */ (\n          element.getAttribute(\n              goog.a11y.aria.getAriaAttributeName_(stateName)));\n  goog.asserts.assert(\n      (attr == null || !isNaN(Number(attr))) && !goog.isBoolean(attr));\n  return attr == null ? null : Number(attr);\n};\n\n\n/**\n * Gets the string value of an ARIA state/property.\n * @param {!Element} element The element to get the ARIA state for.\n * @param {!goog.a11y.aria.State|string} stateName the ARIA state name.\n * @return {?string} String value for the ARIA state value or null if\n *     the state value is empty string or not set.\n */\ngoog.a11y.aria.getStateString = function(element, stateName) {\n  var attr =\n      element.getAttribute(goog.a11y.aria.getAriaAttributeName_(stateName));\n  goog.asserts.assert(\n      (attr == null || goog.isString(attr)) &&\n      (attr == '' || isNaN(Number(attr))) && attr != 'true' && attr != 'false');\n  return (attr == null || attr == '') ? null : attr;\n};\n\n\n/**\n * Gets array of strings value of the specified state or\n * property for the element.\n * Only to be used internally by the ARIA library in goog.a11y.aria.*.\n * @param {!Element} element DOM node to get state from.\n * @param {!goog.a11y.aria.State} stateName State name.\n * @return {!IArrayLike<string>} string Array\n *     value of the state attribute.\n */\ngoog.a11y.aria.getStringArrayStateInternalUtil = function(element, stateName) {\n  var attrValue =\n      element.getAttribute(goog.a11y.aria.getAriaAttributeName_(stateName));\n  return goog.a11y.aria.splitStringOnWhitespace_(attrValue);\n};\n\n\n/**\n * Returns true if element has an ARIA state/property, false otherwise.\n * @param {!Element} element The element to get the ARIA state for.\n * @param {!goog.a11y.aria.State|string} stateName the ARIA state name.\n * @return {boolean}\n */\ngoog.a11y.aria.hasState = function(element, stateName) {\n  return element.hasAttribute(goog.a11y.aria.getAriaAttributeName_(stateName));\n};\n\n\n/**\n * Returns whether the element has a container ARIA role.\n * Container roles are ARIA roles that use the aria-activedescendant property\n * to manage their active descendants or children. See\n * {@link http://www.w3.org/TR/wai-aria/states_and_properties\n * #aria-activedescendant} for more information.\n * @param {!Element} element\n * @return {boolean}\n */\ngoog.a11y.aria.isContainerRole = function(element) {\n  var role = goog.a11y.aria.getRole(element);\n  return goog.array.contains(goog.a11y.aria.CONTAINER_ROLES_, role);\n};\n\n\n/**\n * Splits the input stringValue on whitespace.\n * @param {string} stringValue The value of the string to split.\n * @return {!IArrayLike<string>} string Array\n *     value as result of the split.\n * @private\n */\ngoog.a11y.aria.splitStringOnWhitespace_ = function(stringValue) {\n  return stringValue ? stringValue.split(/\\s+/) : [];\n};\n\n\n/**\n * Adds the 'aria-' prefix to ariaName.\n * @param {string} ariaName ARIA state/property name.\n * @private\n * @return {string} The ARIA attribute name with added 'aria-' prefix.\n * @throws {Error} If no such attribute exists.\n */\ngoog.a11y.aria.getAriaAttributeName_ = function(ariaName) {\n  if (goog.asserts.ENABLE_ASSERTS) {\n    goog.asserts.assert(ariaName, 'ARIA attribute cannot be empty.');\n    goog.asserts.assert(\n        goog.object.containsValue(goog.a11y.aria.State, ariaName),\n        'No such ARIA attribute ' + ariaName);\n  }\n  return goog.a11y.aria.ARIA_PREFIX_ + ariaName;\n};\n","// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Base class for control renderers.\n * TODO(attila):  If the renderer framework works well, pull it into Component.\n *\n * @author attila@google.com (Attila Bodis)\n */\n\ngoog.provide('goog.ui.ControlRenderer');\n\ngoog.require('goog.a11y.aria');\ngoog.require('goog.a11y.aria.Role');\ngoog.require('goog.a11y.aria.State');\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.dom');\ngoog.require('goog.dom.TagName');\ngoog.require('goog.dom.classlist');\ngoog.require('goog.object');\ngoog.require('goog.string');\ngoog.require('goog.style');\ngoog.require('goog.ui.Component');\ngoog.require('goog.ui.ControlContent');\ngoog.require('goog.userAgent');\n\ngoog.forwardDeclare('goog.ui.Control');  // circular\n\n\n\n/**\n * Default renderer for {@link goog.ui.Control}s.  Can be used as-is, but\n * subclasses of Control will probably want to use renderers specifically\n * tailored for them by extending this class.  Controls that use renderers\n * delegate one or more of the following API methods to the renderer:\n * <ul>\n *    <li>`createDom` - renders the DOM for the component\n *    <li>`canDecorate` - determines whether an element can be decorated\n *        by the component\n *    <li>`decorate` - decorates an existing element with the component\n *    <li>`setState` - updates the appearance of the component based on\n *        its state\n *    <li>`getContent` - returns the component's content\n *    <li>`setContent` - sets the component's content\n * </ul>\n * Controls are stateful; renderers, on the other hand, should be stateless and\n * reusable.\n * @constructor\n */\ngoog.ui.ControlRenderer = function() {};\ngoog.addSingletonGetter(goog.ui.ControlRenderer);\ngoog.tagUnsealableClass(goog.ui.ControlRenderer);\n\n\n/**\n * Constructs a new renderer and sets the CSS class that the renderer will use\n * as the base CSS class to apply to all elements rendered by that renderer.\n * An example to use this function using a color palette:\n *\n * <pre>\n * var myCustomRenderer = goog.ui.ControlRenderer.getCustomRenderer(\n *     goog.ui.PaletteRenderer, 'my-special-palette');\n * var newColorPalette = new goog.ui.ColorPalette(\n *     colors, myCustomRenderer, opt_domHelper);\n * </pre>\n *\n * Your CSS can look like this now:\n * <pre>\n * .my-special-palette { }\n * .my-special-palette-table { }\n * .my-special-palette-cell { }\n * etc.\n * </pre>\n *\n * <em>instead</em> of\n * <pre>\n * .CSS_MY_SPECIAL_PALETTE .goog-palette { }\n * .CSS_MY_SPECIAL_PALETTE .goog-palette-table { }\n * .CSS_MY_SPECIAL_PALETTE .goog-palette-cell { }\n * etc.\n * </pre>\n *\n * You would want to use this functionality when you want an instance of a\n * component to have specific styles different than the other components of the\n * same type in your application.  This avoids using descendant selectors to\n * apply the specific styles to this component.\n *\n * @param {Function} ctor The constructor of the renderer you are trying to\n *     create.\n * @param {string} cssClassName The name of the CSS class for this renderer.\n * @return {goog.ui.ControlRenderer} An instance of the desired renderer with\n *     its getCssClass() method overridden to return the supplied custom CSS\n *     class name.\n */\ngoog.ui.ControlRenderer.getCustomRenderer = function(ctor, cssClassName) {\n  var renderer = new ctor();\n\n  /**\n   * Returns the CSS class to be applied to the root element of components\n   * rendered using this renderer.\n   * @return {string} Renderer-specific CSS class.\n   */\n  renderer.getCssClass = function() { return cssClassName; };\n\n  return renderer;\n};\n\n\n/**\n * Default CSS class to be applied to the root element of components rendered\n * by this renderer.\n * @type {string}\n */\ngoog.ui.ControlRenderer.CSS_CLASS = goog.getCssName('goog-control');\n\n\n/**\n * Array of arrays of CSS classes that we want composite classes added and\n * removed for in IE6 and lower as a workaround for lack of multi-class CSS\n * selector support.\n *\n * Subclasses that have accompanying CSS requiring this workaround should define\n * their own static IE6_CLASS_COMBINATIONS constant and override\n * getIe6ClassCombinations to return it.\n *\n * For example, if your stylesheet uses the selector .button.collapse-left\n * (and is compiled to .button_collapse-left for the IE6 version of the\n * stylesheet,) you should include ['button', 'collapse-left'] in this array\n * and the class button_collapse-left will be applied to the root element\n * whenever both button and collapse-left are applied individually.\n *\n * Members of each class name combination will be joined with underscores in the\n * order that they're defined in the array. You should alphabetize them (for\n * compatibility with the CSS compiler) unless you are doing something special.\n * @type {Array<Array<string>>}\n */\ngoog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS = [];\n\n\n/**\n * Map of component states to corresponding ARIA attributes.  Since the mapping\n * of component states to ARIA attributes is neither component- nor\n * renderer-specific, this is a static property of the renderer class, and is\n * initialized on first use.\n * @type {Object<goog.ui.Component.State, goog.a11y.aria.State>}\n * @private\n */\ngoog.ui.ControlRenderer.ariaAttributeMap_;\n\n\n/**\n * Map of certain ARIA states to ARIA roles that support them. Used for checked\n * and selected Component states because they are used on Components with ARIA\n * roles that do not support the corresponding ARIA state.\n * @private {!Object<goog.a11y.aria.Role, goog.a11y.aria.State>}\n * @const\n */\ngoog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_ = goog.object.create(\n    goog.a11y.aria.Role.BUTTON, goog.a11y.aria.State.PRESSED,\n    goog.a11y.aria.Role.CHECKBOX, goog.a11y.aria.State.CHECKED,\n    goog.a11y.aria.Role.MENU_ITEM, goog.a11y.aria.State.SELECTED,\n    goog.a11y.aria.Role.MENU_ITEM_CHECKBOX, goog.a11y.aria.State.CHECKED,\n    goog.a11y.aria.Role.MENU_ITEM_RADIO, goog.a11y.aria.State.CHECKED,\n    goog.a11y.aria.Role.RADIO, goog.a11y.aria.State.CHECKED,\n    goog.a11y.aria.Role.TAB, goog.a11y.aria.State.SELECTED,\n    goog.a11y.aria.Role.TREEITEM, goog.a11y.aria.State.SELECTED);\n\n\n/**\n * Returns the ARIA role to be applied to the control.\n * See http://wiki/Main/ARIA for more info.\n * @return {goog.a11y.aria.Role|undefined} ARIA role.\n */\ngoog.ui.ControlRenderer.prototype.getAriaRole = function() {\n  // By default, the ARIA role is unspecified.\n  return undefined;\n};\n\n\n/**\n * Returns the control's contents wrapped in a DIV, with the renderer's own\n * CSS class and additional state-specific classes applied to it.\n * @param {goog.ui.Control} control Control to render.\n * @return {Element} Root element for the control.\n */\ngoog.ui.ControlRenderer.prototype.createDom = function(control) {\n  // Create and return DIV wrapping contents.\n  var element = control.getDomHelper().createDom(\n      goog.dom.TagName.DIV, this.getClassNames(control).join(' '),\n      control.getContent());\n\n  return element;\n};\n\n\n/**\n * Takes the control's root element and returns the parent element of the\n * control's contents.  Since by default controls are rendered as a single\n * DIV, the default implementation returns the element itself.  Subclasses\n * with more complex DOM structures must override this method as needed.\n * @param {Element} element Root element of the control whose content element\n *     is to be returned.\n * @return {Element} The control's content element.\n */\ngoog.ui.ControlRenderer.prototype.getContentElement = function(element) {\n  return element;\n};\n\n\n/**\n * Updates the control's DOM by adding or removing the specified class name\n * to/from its root element. May add additional combined classes as needed in\n * IE6 and lower. Because of this, subclasses should use this method when\n * modifying class names on the control's root element.\n * @param {goog.ui.Control|Element} control Control instance (or root element)\n *     to be updated.\n * @param {string} className CSS class name to add or remove.\n * @param {boolean} enable Whether to add or remove the class name.\n */\ngoog.ui.ControlRenderer.prototype.enableClassName = function(\n    control, className, enable) {\n  var element = /** @type {Element} */ (\n      control.getElement ? control.getElement() : control);\n  if (element) {\n    var classNames = [className];\n\n    // For IE6, we need to enable any combined classes involving this class\n    // as well.\n    // TODO(user): Remove this as IE6 is no longer in use.\n    if (goog.userAgent.IE && !goog.userAgent.isVersionOrHigher('7')) {\n      classNames = this.getAppliedCombinedClassNames_(\n          goog.dom.classlist.get(element), className);\n      classNames.push(className);\n    }\n\n    goog.dom.classlist.enableAll(element, classNames, enable);\n  }\n};\n\n\n/**\n * Updates the control's DOM by adding or removing the specified extra class\n * name to/from its element.\n * @param {goog.ui.Control} control Control to be updated.\n * @param {string} className CSS class name to add or remove.\n * @param {boolean} enable Whether to add or remove the class name.\n */\ngoog.ui.ControlRenderer.prototype.enableExtraClassName = function(\n    control, className, enable) {\n  // The base class implementation is trivial; subclasses should override as\n  // needed.\n  this.enableClassName(control, className, enable);\n};\n\n\n/**\n * Returns true if this renderer can decorate the element, false otherwise.\n * The default implementation always returns true.\n * @param {Element} element Element to decorate.\n * @return {boolean} Whether the renderer can decorate the element.\n */\ngoog.ui.ControlRenderer.prototype.canDecorate = function(element) {\n  return true;\n};\n\n\n/**\n * Default implementation of `decorate` for {@link goog.ui.Control}s.\n * Initializes the control's ID, content, and state based on the ID of the\n * element, its child nodes, and its CSS classes, respectively.  Returns the\n * element.\n * @param {goog.ui.Control} control Control instance to decorate the element.\n * @param {Element} element Element to decorate.\n * @return {Element} Decorated element.\n */\ngoog.ui.ControlRenderer.prototype.decorate = function(control, element) {\n  // Set the control's ID to the decorated element's DOM ID, if any.\n  if (element.id) {\n    control.setId(element.id);\n  }\n\n  // Set the control's content to the decorated element's content.\n  var contentElem = this.getContentElement(element);\n  if (contentElem && contentElem.firstChild) {\n    control.setContentInternal(\n        contentElem.firstChild.nextSibling ?\n            goog.array.clone(contentElem.childNodes) :\n            contentElem.firstChild);\n  } else {\n    control.setContentInternal(null);\n  }\n\n  // Initialize the control's state based on the decorated element's CSS class.\n  // This implementation is optimized to minimize object allocations, string\n  // comparisons, and DOM access.\n  var state = 0x00;\n  var rendererClassName = this.getCssClass();\n  var structuralClassName = this.getStructuralCssClass();\n  var hasRendererClassName = false;\n  var hasStructuralClassName = false;\n  var hasCombinedClassName = false;\n  var classNames = goog.array.toArray(goog.dom.classlist.get(element));\n  goog.array.forEach(classNames, function(className) {\n    if (!hasRendererClassName && className == rendererClassName) {\n      hasRendererClassName = true;\n      if (structuralClassName == rendererClassName) {\n        hasStructuralClassName = true;\n      }\n    } else if (!hasStructuralClassName && className == structuralClassName) {\n      hasStructuralClassName = true;\n    } else {\n      state |= this.getStateFromClass(className);\n    }\n    if (this.getStateFromClass(className) == goog.ui.Component.State.DISABLED) {\n      goog.asserts.assertElement(contentElem);\n      if (goog.dom.isFocusableTabIndex(contentElem)) {\n        goog.dom.setFocusableTabIndex(contentElem, false);\n      }\n    }\n  }, this);\n  control.setStateInternal(state);\n\n  // Make sure the element has the renderer's CSS classes applied, as well as\n  // any extra class names set on the control.\n  if (!hasRendererClassName) {\n    classNames.push(rendererClassName);\n    if (structuralClassName == rendererClassName) {\n      hasStructuralClassName = true;\n    }\n  }\n  if (!hasStructuralClassName) {\n    classNames.push(structuralClassName);\n  }\n  var extraClassNames = control.getExtraClassNames();\n  if (extraClassNames) {\n    classNames.push.apply(classNames, extraClassNames);\n  }\n\n  // For IE6, rewrite all classes on the decorated element if any combined\n  // classes apply.\n  if (goog.userAgent.IE && !goog.userAgent.isVersionOrHigher('7')) {\n    var combinedClasses = this.getAppliedCombinedClassNames_(classNames);\n    if (combinedClasses.length > 0) {\n      classNames.push.apply(classNames, combinedClasses);\n      hasCombinedClassName = true;\n    }\n  }\n\n  // Only write to the DOM if new class names had to be added to the element.\n  if (!hasRendererClassName || !hasStructuralClassName || extraClassNames ||\n      hasCombinedClassName) {\n    goog.dom.classlist.set(element, classNames.join(' '));\n  }\n\n  return element;\n};\n\n\n/**\n * Initializes the control's DOM by configuring properties that can only be set\n * after the DOM has entered the document.  This implementation sets up BiDi\n * and keyboard focus.  Called from {@link goog.ui.Control#enterDocument}.\n * @param {goog.ui.Control} control Control whose DOM is to be initialized\n *     as it enters the document.\n */\ngoog.ui.ControlRenderer.prototype.initializeDom = function(control) {\n  // Initialize render direction (BiDi).  We optimize the left-to-right render\n  // direction by assuming that elements are left-to-right by default, and only\n  // updating their styling if they are explicitly set to right-to-left.\n  if (control.isRightToLeft()) {\n    this.setRightToLeft(control.getElement(), true);\n  }\n\n  // Initialize keyboard focusability (tab index).  We assume that components\n  // aren't focusable by default (i.e have no tab index), and only touch the\n  // DOM if the component is focusable, enabled, and visible, and therefore\n  // needs a tab index.\n  if (control.isEnabled()) {\n    this.setFocusable(control, control.isVisible());\n  }\n};\n\n\n/**\n * Sets the element's ARIA role.\n * @param {Element} element Element to update.\n * @param {?goog.a11y.aria.Role=} opt_preferredRole The preferred ARIA role.\n */\ngoog.ui.ControlRenderer.prototype.setAriaRole = function(\n    element, opt_preferredRole) {\n  var ariaRole = opt_preferredRole || this.getAriaRole();\n  if (ariaRole) {\n    goog.asserts.assert(\n        element, 'The element passed as a first parameter cannot be null.');\n    var currentRole = goog.a11y.aria.getRole(element);\n    if (ariaRole == currentRole) {\n      return;\n    }\n    goog.a11y.aria.setRole(element, ariaRole);\n  }\n};\n\n\n/**\n * Sets the element's ARIA attributes, including distinguishing between\n * universally supported ARIA properties and ARIA states that are only\n * supported by certain ARIA roles. Only attributes which are initialized to be\n * true will be set.\n * @param {!goog.ui.Control} control Control whose ARIA state will be updated.\n * @param {!Element} element Element whose ARIA state is to be updated.\n */\ngoog.ui.ControlRenderer.prototype.setAriaStates = function(control, element) {\n  goog.asserts.assert(control);\n  goog.asserts.assert(element);\n\n  var ariaLabel = control.getAriaLabel();\n  if (goog.isDefAndNotNull(ariaLabel)) {\n    this.setAriaLabel(element, ariaLabel);\n  }\n\n  if (!control.isVisible()) {\n    goog.a11y.aria.setState(\n        element, goog.a11y.aria.State.HIDDEN, !control.isVisible());\n  }\n  if (!control.isEnabled()) {\n    this.updateAriaState(\n        element, goog.ui.Component.State.DISABLED, !control.isEnabled());\n  }\n  if (control.isSupportedState(goog.ui.Component.State.SELECTED)) {\n    this.updateAriaState(\n        element, goog.ui.Component.State.SELECTED, control.isSelected());\n  }\n  if (control.isSupportedState(goog.ui.Component.State.CHECKED)) {\n    this.updateAriaState(\n        element, goog.ui.Component.State.CHECKED, control.isChecked());\n  }\n  if (control.isSupportedState(goog.ui.Component.State.OPENED)) {\n    this.updateAriaState(\n        element, goog.ui.Component.State.OPENED, control.isOpen());\n  }\n};\n\n\n/**\n * Sets the element's ARIA label. This should be overriden by subclasses that\n * don't apply the role directly on control.element_.\n * @param {!Element} element Element whose ARIA label is to be updated.\n * @param {string} ariaLabel Label to add to the element.\n */\ngoog.ui.ControlRenderer.prototype.setAriaLabel = function(element, ariaLabel) {\n  goog.a11y.aria.setLabel(element, ariaLabel);\n};\n\n\n/**\n * Allows or disallows text selection within the control's DOM.\n * @param {Element} element The control's root element.\n * @param {boolean} allow Whether the element should allow text selection.\n */\ngoog.ui.ControlRenderer.prototype.setAllowTextSelection = function(\n    element, allow) {\n  // On all browsers other than IE and Opera, it isn't necessary to recursively\n  // apply unselectable styling to the element's children.\n  goog.style.setUnselectable(\n      element, !allow, !goog.userAgent.IE && !goog.userAgent.OPERA);\n};\n\n\n/**\n * Applies special styling to/from the control's element if it is rendered\n * right-to-left, and removes it if it is rendered left-to-right.\n * @param {Element} element The control's root element.\n * @param {boolean} rightToLeft Whether the component is rendered\n *     right-to-left.\n */\ngoog.ui.ControlRenderer.prototype.setRightToLeft = function(\n    element, rightToLeft) {\n  this.enableClassName(\n      element, goog.getCssName(this.getStructuralCssClass(), 'rtl'),\n      rightToLeft);\n};\n\n\n/**\n * Returns true if the control's key event target supports keyboard focus\n * (based on its `tabIndex` attribute), false otherwise.\n * @param {goog.ui.Control} control Control whose key event target is to be\n *     checked.\n * @return {boolean} Whether the control's key event target is focusable.\n */\ngoog.ui.ControlRenderer.prototype.isFocusable = function(control) {\n  var keyTarget;\n  if (control.isSupportedState(goog.ui.Component.State.FOCUSED) &&\n      (keyTarget = control.getKeyEventTarget())) {\n    return goog.dom.isFocusableTabIndex(keyTarget);\n  }\n  return false;\n};\n\n\n/**\n * Updates the control's key event target to make it focusable or non-focusable\n * via its `tabIndex` attribute.  Does nothing if the control doesn't\n * support the `FOCUSED` state, or if it has no key event target.\n * @param {goog.ui.Control} control Control whose key event target is to be\n *     updated.\n * @param {boolean} focusable Whether to enable keyboard focus support on the\n *     control's key event target.\n */\ngoog.ui.ControlRenderer.prototype.setFocusable = function(control, focusable) {\n  var keyTarget;\n  if (control.isSupportedState(goog.ui.Component.State.FOCUSED) &&\n      (keyTarget = control.getKeyEventTarget())) {\n    if (!focusable && control.isFocused()) {\n      // Blur before hiding.  Note that IE calls onblur handlers asynchronously.\n      try {\n        keyTarget.blur();\n      } catch (e) {\n        // TODO(user|user):  Find out why this fails on IE.\n      }\n      // The blur event dispatched by the key event target element when blur()\n      // was called on it should have been handled by the control's handleBlur()\n      // method, so at this point the control should no longer be focused.\n      // However, blur events are unreliable on IE and FF3, so if at this point\n      // the control is still focused, we trigger its handleBlur() method\n      // programmatically.\n      if (control.isFocused()) {\n        control.handleBlur(null);\n      }\n    }\n    // Don't overwrite existing tab index values unless needed.\n    if (goog.dom.isFocusableTabIndex(keyTarget) != focusable) {\n      goog.dom.setFocusableTabIndex(keyTarget, focusable);\n    }\n  }\n};\n\n\n/**\n * Shows or hides the element.\n * @param {Element} element Element to update.\n * @param {boolean} visible Whether to show the element.\n */\ngoog.ui.ControlRenderer.prototype.setVisible = function(element, visible) {\n  // The base class implementation is trivial; subclasses should override as\n  // needed.  It should be possible to do animated reveals, for example.\n  goog.style.setElementShown(element, visible);\n  if (element) {\n    goog.a11y.aria.setState(element, goog.a11y.aria.State.HIDDEN, !visible);\n  }\n};\n\n\n/**\n * Updates the appearance of the control in response to a state change.\n * @param {goog.ui.Control} control Control instance to update.\n * @param {goog.ui.Component.State} state State to enable or disable.\n * @param {boolean} enable Whether the control is entering or exiting the state.\n */\ngoog.ui.ControlRenderer.prototype.setState = function(control, state, enable) {\n  var element = control.getElement();\n  if (element) {\n    var className = this.getClassForState(state);\n    if (className) {\n      this.enableClassName(control, className, enable);\n    }\n    this.updateAriaState(element, state, enable);\n  }\n};\n\n\n/**\n * Updates the element's ARIA (accessibility) attributes , including\n * distinguishing between universally supported ARIA properties and ARIA states\n * that are only supported by certain ARIA roles.\n * @param {Element} element Element whose ARIA state is to be updated.\n * @param {goog.ui.Component.State} state Component state being enabled or\n *     disabled.\n * @param {boolean} enable Whether the state is being enabled or disabled.\n * @protected\n */\ngoog.ui.ControlRenderer.prototype.updateAriaState = function(\n    element, state, enable) {\n  // Ensure the ARIA attribute map exists.\n  if (!goog.ui.ControlRenderer.ariaAttributeMap_) {\n    goog.ui.ControlRenderer.ariaAttributeMap_ = goog.object.create(\n        goog.ui.Component.State.DISABLED, goog.a11y.aria.State.DISABLED,\n        goog.ui.Component.State.SELECTED, goog.a11y.aria.State.SELECTED,\n        goog.ui.Component.State.CHECKED, goog.a11y.aria.State.CHECKED,\n        goog.ui.Component.State.OPENED, goog.a11y.aria.State.EXPANDED);\n  }\n  goog.asserts.assert(\n      element, 'The element passed as a first parameter cannot be null.');\n  var ariaAttr = goog.ui.ControlRenderer.getAriaStateForAriaRole_(\n      element, goog.ui.ControlRenderer.ariaAttributeMap_[state]);\n  if (ariaAttr) {\n    goog.a11y.aria.setState(element, ariaAttr, enable);\n  }\n};\n\n\n/**\n * Returns the appropriate ARIA attribute based on ARIA role if the ARIA\n * attribute is an ARIA state.\n * @param {!Element} element The element from which to get the ARIA role for\n * matching ARIA state.\n * @param {goog.a11y.aria.State} attr The ARIA attribute to check to see if it\n * can be applied to the given ARIA role.\n * @return {goog.a11y.aria.State} An ARIA attribute that can be applied to the\n * given ARIA role.\n * @private\n */\ngoog.ui.ControlRenderer.getAriaStateForAriaRole_ = function(element, attr) {\n  var role = goog.a11y.aria.getRole(element);\n  if (!role) {\n    return attr;\n  }\n  role = /** @type {goog.a11y.aria.Role} */ (role);\n  var matchAttr = goog.ui.ControlRenderer.TOGGLE_ARIA_STATE_MAP_[role] || attr;\n  return goog.ui.ControlRenderer.isAriaState_(attr) ? matchAttr : attr;\n};\n\n\n/**\n * Determines if the given ARIA attribute is an ARIA property or ARIA state.\n * @param {goog.a11y.aria.State} attr The ARIA attribute to classify.\n * @return {boolean} If the ARIA attribute is an ARIA state.\n * @private\n */\ngoog.ui.ControlRenderer.isAriaState_ = function(attr) {\n  return attr == goog.a11y.aria.State.CHECKED ||\n      attr == goog.a11y.aria.State.SELECTED;\n};\n\n\n/**\n * Takes a control's root element, and sets its content to the given text\n * caption or DOM structure.  The default implementation replaces the children\n * of the given element.  Renderers that create more complex DOM structures\n * must override this method accordingly.\n * @param {Element} element The control's root element.\n * @param {goog.ui.ControlContent} content Text caption or DOM structure to be\n *     set as the control's content. The DOM nodes will not be cloned, they\n *     will only moved under the content element of the control.\n */\ngoog.ui.ControlRenderer.prototype.setContent = function(element, content) {\n  var contentElem = this.getContentElement(element);\n  if (contentElem) {\n    goog.dom.removeChildren(contentElem);\n    if (content) {\n      if (goog.isString(content)) {\n        goog.dom.setTextContent(contentElem, content);\n      } else {\n        var childHandler = function(child) {\n          if (child) {\n            var doc = goog.dom.getOwnerDocument(contentElem);\n            contentElem.appendChild(\n                goog.isString(child) ? doc.createTextNode(child) : child);\n          }\n        };\n        if (goog.isArray(content)) {\n          // Array of nodes.\n          goog.array.forEach(content, childHandler);\n        } else if (goog.isArrayLike(content) && !('nodeType' in content)) {\n          // NodeList. The second condition filters out TextNode which also has\n          // length attribute but is not array like. The nodes have to be cloned\n          // because childHandler removes them from the list during iteration.\n          goog.array.forEach(\n              goog.array.clone(/** @type {!NodeList<?>} */ (content)),\n              childHandler);\n        } else {\n          // Node or string.\n          childHandler(content);\n        }\n      }\n    }\n  }\n};\n\n\n/**\n * Returns the element within the component's DOM that should receive keyboard\n * focus (null if none).  The default implementation returns the control's root\n * element.\n * @param {goog.ui.Control} control Control whose key event target is to be\n *     returned.\n * @return {Element} The key event target.\n */\ngoog.ui.ControlRenderer.prototype.getKeyEventTarget = function(control) {\n  return control.getElement();\n};\n\n\n// CSS class name management.\n\n\n/**\n * Returns the CSS class name to be applied to the root element of all\n * components rendered or decorated using this renderer.  The class name\n * is expected to uniquely identify the renderer class, i.e. no two\n * renderer classes are expected to share the same CSS class name.\n * @return {string} Renderer-specific CSS class name.\n */\ngoog.ui.ControlRenderer.prototype.getCssClass = function() {\n  return goog.ui.ControlRenderer.CSS_CLASS;\n};\n\n\n/**\n * Returns an array of combinations of classes to apply combined class names for\n * in IE6 and below. See {@link IE6_CLASS_COMBINATIONS} for more detail. This\n * method doesn't reference {@link IE6_CLASS_COMBINATIONS} so that it can be\n * compiled out, but subclasses should return their IE6_CLASS_COMBINATIONS\n * static constant instead.\n * @return {Array<Array<string>>} Array of class name combinations.\n */\ngoog.ui.ControlRenderer.prototype.getIe6ClassCombinations = function() {\n  return [];\n};\n\n\n/**\n * Returns the name of a DOM structure-specific CSS class to be applied to the\n * root element of all components rendered or decorated using this renderer.\n * Unlike the class name returned by {@link #getCssClass}, the structural class\n * name may be shared among different renderers that generate similar DOM\n * structures.  The structural class name also serves as the basis of derived\n * class names used to identify and style structural elements of the control's\n * DOM, as well as the basis for state-specific class names.  The default\n * implementation returns the same class name as {@link #getCssClass}, but\n * subclasses are expected to override this method as needed.\n * @return {string} DOM structure-specific CSS class name (same as the renderer-\n *     specific CSS class name by default).\n */\ngoog.ui.ControlRenderer.prototype.getStructuralCssClass = function() {\n  return this.getCssClass();\n};\n\n\n/**\n * Returns all CSS class names applicable to the given control, based on its\n * state.  The return value is an array of strings containing\n * <ol>\n *   <li>the renderer-specific CSS class returned by {@link #getCssClass},\n *       followed by\n *   <li>the structural CSS class returned by {@link getStructuralCssClass} (if\n *       different from the renderer-specific CSS class), followed by\n *   <li>any state-specific classes returned by {@link #getClassNamesForState},\n *       followed by\n *   <li>any extra classes returned by the control's `getExtraClassNames`\n *       method and\n *   <li>for IE6 and lower, additional combined classes from\n *       {@link getAppliedCombinedClassNames_}.\n * </ol>\n * Since all controls have at least one renderer-specific CSS class name, this\n * method is guaranteed to return an array of at least one element.\n * @param {goog.ui.Control} control Control whose CSS classes are to be\n *     returned.\n * @return {!Array<string>} Array of CSS class names applicable to the control.\n * @protected\n */\ngoog.ui.ControlRenderer.prototype.getClassNames = function(control) {\n  var cssClass = this.getCssClass();\n\n  // Start with the renderer-specific class name.\n  var classNames = [cssClass];\n\n  // Add structural class name, if different.\n  var structuralCssClass = this.getStructuralCssClass();\n  if (structuralCssClass != cssClass) {\n    classNames.push(structuralCssClass);\n  }\n\n  // Add state-specific class names, if any.\n  var classNamesForState = this.getClassNamesForState(control.getState());\n  classNames.push.apply(classNames, classNamesForState);\n\n  // Add extra class names, if any.\n  var extraClassNames = control.getExtraClassNames();\n  if (extraClassNames) {\n    classNames.push.apply(classNames, extraClassNames);\n  }\n\n  // Add composite classes for IE6 support\n  if (goog.userAgent.IE && !goog.userAgent.isVersionOrHigher('7')) {\n    classNames.push.apply(\n        classNames, this.getAppliedCombinedClassNames_(classNames));\n  }\n\n  return classNames;\n};\n\n\n/**\n * Returns an array of all the combined class names that should be applied based\n * on the given list of classes. Checks the result of\n * {@link getIe6ClassCombinations} for any combinations that have all\n * members contained in classes. If a combination matches, the members are\n * joined with an underscore (in order), and added to the return array.\n *\n * If opt_includedClass is provided, return only the combined classes that have\n * all members contained in classes AND include opt_includedClass as well.\n * opt_includedClass is added to classes as well.\n * @param {IArrayLike<string>} classes Array-like thing of classes to\n *     return matching combined classes for.\n * @param {?string=} opt_includedClass If provided, get only the combined\n *     classes that include this one.\n * @return {!Array<string>} Array of combined class names that should be\n *     applied.\n * @private\n */\ngoog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_ = function(\n    classes, opt_includedClass) {\n  var toAdd = [];\n  if (opt_includedClass) {\n    classes = goog.array.concat(classes, [opt_includedClass]);\n  }\n  goog.array.forEach(this.getIe6ClassCombinations(), function(combo) {\n    if (goog.array.every(combo, goog.partial(goog.array.contains, classes)) &&\n        (!opt_includedClass || goog.array.contains(combo, opt_includedClass))) {\n      toAdd.push(combo.join('_'));\n    }\n  });\n  return toAdd;\n};\n\n\n/**\n * Takes a bit mask of {@link goog.ui.Component.State}s, and returns an array\n * of the appropriate class names representing the given state, suitable to be\n * applied to the root element of a component rendered using this renderer, or\n * null if no state-specific classes need to be applied.  This default\n * implementation uses the renderer's {@link getClassForState} method to\n * generate each state-specific class.\n * @param {number} state Bit mask of component states.\n * @return {!Array<string>} Array of CSS class names representing the given\n *     state.\n * @protected\n */\ngoog.ui.ControlRenderer.prototype.getClassNamesForState = function(state) {\n  var classNames = [];\n  while (state) {\n    // For each enabled state, push the corresponding CSS class name onto\n    // the classNames array.\n    var mask = state & -state;  // Least significant bit\n    classNames.push(\n        this.getClassForState(\n            /** @type {goog.ui.Component.State} */ (mask)));\n    state &= ~mask;\n  }\n  return classNames;\n};\n\n\n/**\n * Takes a single {@link goog.ui.Component.State}, and returns the\n * corresponding CSS class name (null if none).\n * @param {goog.ui.Component.State} state Component state.\n * @return {string|undefined} CSS class representing the given state (undefined\n *     if none).\n * @protected\n */\ngoog.ui.ControlRenderer.prototype.getClassForState = function(state) {\n  if (!this.classByState_) {\n    this.createClassByStateMap_();\n  }\n  return this.classByState_[state];\n};\n\n\n/**\n * Takes a single CSS class name which may represent a component state, and\n * returns the corresponding component state (0x00 if none).\n * @param {string} className CSS class name, possibly representing a component\n *     state.\n * @return {goog.ui.Component.State} state Component state corresponding\n *     to the given CSS class (0x00 if none).\n * @protected\n */\ngoog.ui.ControlRenderer.prototype.getStateFromClass = function(className) {\n  if (!this.stateByClass_) {\n    this.createStateByClassMap_();\n  }\n  var state = parseInt(this.stateByClass_[className], 10);\n  return /** @type {goog.ui.Component.State} */ (isNaN(state) ? 0x00 : state);\n};\n\n\n/**\n * Creates the lookup table of states to classes, used during state changes.\n * @private\n */\ngoog.ui.ControlRenderer.prototype.createClassByStateMap_ = function() {\n  var baseClass = this.getStructuralCssClass();\n\n  // This ensures space-separated css classnames are not allowed, which some\n  // ControlRenderers had been doing.  See http://b/13694665.\n  var isValidClassName =\n      !goog.string.contains(goog.string.normalizeWhitespace(baseClass), ' ');\n  goog.asserts.assert(\n      isValidClassName,\n      'ControlRenderer has an invalid css class: \\'' + baseClass + '\\'');\n\n  /**\n   * Map of component states to state-specific structural class names,\n   * used when changing the DOM in response to a state change.  Precomputed\n   * and cached on first use to minimize object allocations and string\n   * concatenation.\n   * @type {Object}\n   * @private\n   */\n  this.classByState_ = goog.object.create(\n      goog.ui.Component.State.DISABLED, goog.getCssName(baseClass, 'disabled'),\n      goog.ui.Component.State.HOVER, goog.getCssName(baseClass, 'hover'),\n      goog.ui.Component.State.ACTIVE, goog.getCssName(baseClass, 'active'),\n      goog.ui.Component.State.SELECTED, goog.getCssName(baseClass, 'selected'),\n      goog.ui.Component.State.CHECKED, goog.getCssName(baseClass, 'checked'),\n      goog.ui.Component.State.FOCUSED, goog.getCssName(baseClass, 'focused'),\n      goog.ui.Component.State.OPENED, goog.getCssName(baseClass, 'open'));\n};\n\n\n/**\n * Creates the lookup table of classes to states, used during decoration.\n * @private\n */\ngoog.ui.ControlRenderer.prototype.createStateByClassMap_ = function() {\n  // We need the classByState_ map so we can transpose it.\n  if (!this.classByState_) {\n    this.createClassByStateMap_();\n  }\n\n  /**\n   * Map of state-specific structural class names to component states,\n   * used during element decoration.  Precomputed and cached on first use\n   * to minimize object allocations and string concatenation.\n   * @type {Object}\n   * @private\n   */\n  this.stateByClass_ = goog.object.transpose(this.classByState_);\n};\n","// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Global renderer and decorator registry.\n * @author attila@google.com (Attila Bodis)\n */\n\ngoog.provide('goog.ui.registry');\n\ngoog.require('goog.asserts');\ngoog.require('goog.dom.classlist');\n\ngoog.forwardDeclare('goog.ui.Component');\ngoog.forwardDeclare('goog.ui.ControlRenderer');\n\n\n/**\n * Given a {@link goog.ui.Component} constructor, returns an instance of its\n * default renderer.  If the default renderer is a singleton, returns the\n * singleton instance; otherwise returns a new instance of the renderer class.\n * @param {Function} componentCtor Component constructor function (for example\n *     `goog.ui.Button`).\n * @return {goog.ui.ControlRenderer?} Renderer instance (for example the\n *     singleton instance of `goog.ui.ButtonRenderer`), or null if\n *     no default renderer was found.\n */\ngoog.ui.registry.getDefaultRenderer = function(componentCtor) {\n  // Locate the default renderer based on the constructor's unique ID.  If no\n  // renderer is registered for this class, walk up the superClass_ chain.\n  var key;\n  /** @type {Function|undefined} */ var rendererCtor;\n  while (componentCtor) {\n    key = goog.getUid(componentCtor);\n    if ((rendererCtor = goog.ui.registry.defaultRenderers_[key])) {\n      break;\n    }\n    componentCtor = componentCtor.superClass_ ?\n        componentCtor.superClass_.constructor :\n        null;\n  }\n\n  // If the renderer has a static getInstance method, return the singleton\n  // instance; otherwise create and return a new instance.\n  if (rendererCtor) {\n    return goog.isFunction(rendererCtor.getInstance) ?\n        rendererCtor.getInstance() :\n        new rendererCtor();\n  }\n\n  return null;\n};\n\n\n/**\n * Sets the default renderer for the given {@link goog.ui.Component}\n * constructor.\n * @param {Function} componentCtor Component constructor function (for example\n *     `goog.ui.Button`).\n * @param {Function} rendererCtor Renderer constructor function (for example\n *     `goog.ui.ButtonRenderer`).\n * @throws {Error} If the arguments aren't functions.\n */\ngoog.ui.registry.setDefaultRenderer = function(componentCtor, rendererCtor) {\n  // In this case, explicit validation has negligible overhead (since each\n  // renderer is only registered once), and helps catch subtle bugs.\n  if (!goog.isFunction(componentCtor)) {\n    throw new Error('Invalid component class ' + componentCtor);\n  }\n  if (!goog.isFunction(rendererCtor)) {\n    throw new Error('Invalid renderer class ' + rendererCtor);\n  }\n\n  // Map the component constructor's unique ID to the renderer constructor.\n  var key = goog.getUid(componentCtor);\n  goog.ui.registry.defaultRenderers_[key] = rendererCtor;\n};\n\n\n/**\n * Returns the {@link goog.ui.Component} instance created by the decorator\n * factory function registered for the given CSS class name, or null if no\n * decorator factory function was found.\n * @param {string} className CSS class name.\n * @return {goog.ui.Component?} Component instance.\n */\ngoog.ui.registry.getDecoratorByClassName = function(className) {\n  return className in goog.ui.registry.decoratorFunctions_ ?\n      goog.ui.registry.decoratorFunctions_[className]() :\n      null;\n};\n\n\n/**\n * Maps a CSS class name to a function that returns a new instance of\n * {@link goog.ui.Component} or a subclass, suitable to decorate an element\n * that has the specified CSS class.\n * @param {string} className CSS class name.\n * @param {Function} decoratorFn No-argument function that returns a new\n *     instance of a {@link goog.ui.Component} to decorate an element.\n * @throws {Error} If the class name or the decorator function is invalid.\n */\ngoog.ui.registry.setDecoratorByClassName = function(className, decoratorFn) {\n  // In this case, explicit validation has negligible overhead (since each\n  // decorator  is only registered once), and helps catch subtle bugs.\n  if (!className) {\n    throw new Error('Invalid class name ' + className);\n  }\n  if (!goog.isFunction(decoratorFn)) {\n    throw new Error('Invalid decorator function ' + decoratorFn);\n  }\n\n  goog.ui.registry.decoratorFunctions_[className] = decoratorFn;\n};\n\n\n/**\n * Returns an instance of {@link goog.ui.Component} or a subclass suitable to\n * decorate the given element, based on its CSS class.\n *\n * TODO(nnaze): Type of element should be {!Element}.\n *\n * @param {Element} element Element to decorate.\n * @return {goog.ui.Component?} Component to decorate the element (null if\n *     none).\n */\ngoog.ui.registry.getDecorator = function(element) {\n  var decorator;\n  goog.asserts.assert(element);\n  var classNames = goog.dom.classlist.get(element);\n  for (var i = 0, len = classNames.length; i < len; i++) {\n    if ((decorator = goog.ui.registry.getDecoratorByClassName(classNames[i]))) {\n      return decorator;\n    }\n  }\n  return null;\n};\n\n\n/**\n * Resets the global renderer and decorator registry.\n */\ngoog.ui.registry.reset = function() {\n  goog.ui.registry.defaultRenderers_ = {};\n  goog.ui.registry.decoratorFunctions_ = {};\n};\n\n\n/**\n * Map of {@link goog.ui.Component} constructor unique IDs to the constructors\n * of their default {@link goog.ui.Renderer}s.\n * @type {Object}\n * @private\n */\ngoog.ui.registry.defaultRenderers_ = {};\n\n\n/**\n * Map of CSS class names to registry factory functions.  The keys are\n * class names.  The values are function objects that return new instances\n * of {@link goog.ui.registry} or one of its subclasses, suitable to\n * decorate elements marked with the corresponding CSS class.  Used by\n * containers while decorating their children.\n * @type {Object}\n * @private\n */\ngoog.ui.registry.decoratorFunctions_ = {};\n","// Copyright 2007 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Base class for UI controls such as buttons, menus, menu items,\n * toolbar buttons, etc.  The implementation is based on a generalized version\n * of {@link goog.ui.MenuItem}.\n * TODO(attila):  If the renderer framework works well, pull it into Component.\n *\n * @author attila@google.com (Attila Bodis)\n * @see ../demos/control.html\n * @see http://code.google.com/p/closure-library/wiki/IntroToControls\n */\n\ngoog.provide('goog.ui.Control');\n\ngoog.require('goog.Disposable');\ngoog.require('goog.array');\ngoog.require('goog.dom');\ngoog.require('goog.events.BrowserEvent');\ngoog.require('goog.events.Event');\ngoog.require('goog.events.EventHandler');\ngoog.require('goog.events.EventType');\ngoog.require('goog.events.KeyCodes');\ngoog.require('goog.events.KeyHandler');\ngoog.require('goog.string');\ngoog.require('goog.ui.Component');\ngoog.require('goog.ui.ComponentUtil');\n/** @suppress {extraRequire} */\ngoog.require('goog.ui.ControlContent');\ngoog.require('goog.ui.ControlRenderer');\ngoog.require('goog.ui.registry');\ngoog.require('goog.userAgent');\n\n\n\n/**\n * Base class for UI controls.  Extends {@link goog.ui.Component} by adding\n * the following:\n *  <ul>\n *    <li>a {@link goog.events.KeyHandler}, to simplify keyboard handling,\n *    <li>a pluggable <em>renderer</em> framework, to simplify the creation of\n *        simple controls without the need to subclass this class,\n *    <li>the notion of component <em>content</em>, like a text caption or DOM\n *        structure displayed in the component (e.g. a button label),\n *    <li>getter and setter for component content, as well as a getter and\n *        setter specifically for caption text (for convenience),\n *    <li>support for hiding/showing the component,\n      <li>fine-grained control over supported states and state transition\n          events, and\n *    <li>default mouse and keyboard event handling.\n *  </ul>\n * This class has sufficient built-in functionality for most simple UI controls.\n * All controls dispatch SHOW, HIDE, ENTER, LEAVE, and ACTION events on show,\n * hide, mouseover, mouseout, and user action, respectively.  Additional states\n * are also supported.  See closure/demos/control.html\n * for example usage.\n * @param {goog.ui.ControlContent=} opt_content Text caption or DOM structure\n *     to display as the content of the control (if any).\n * @param {goog.ui.ControlRenderer=} opt_renderer Renderer used to render or\n *     decorate the component; defaults to {@link goog.ui.ControlRenderer}.\n * @param {goog.dom.DomHelper=} opt_domHelper Optional DOM helper, used for\n *     document interaction.\n * @constructor\n * @extends {goog.ui.Component}\n */\ngoog.ui.Control = function(opt_content, opt_renderer, opt_domHelper) {\n  goog.ui.Component.call(this, opt_domHelper);\n  this.renderer_ =\n      opt_renderer || goog.ui.registry.getDefaultRenderer(this.constructor);\n  this.setContentInternal(goog.isDef(opt_content) ? opt_content : null);\n\n  /** @private {?string} The control's aria-label. */\n  this.ariaLabel_ = null;\n\n  /** @private {goog.ui.Control.IeMouseEventSequenceSimulator_} */\n  this.ieMouseEventSequenceSimulator_;\n};\ngoog.inherits(goog.ui.Control, goog.ui.Component);\ngoog.tagUnsealableClass(goog.ui.Control);\n\n\n// Renderer registry.\n// TODO(attila): Refactor existing usages inside Google in a follow-up CL.\n\n\n/**\n * Maps a CSS class name to a function that returns a new instance of\n * {@link goog.ui.Control} or a subclass thereof, suitable to decorate\n * an element that has the specified CSS class.  UI components that extend\n * {@link goog.ui.Control} and want {@link goog.ui.Container}s to be able\n * to discover and decorate elements using them should register a factory\n * function via this API.\n * @param {string} className CSS class name.\n * @param {Function} decoratorFunction Function that takes no arguments and\n *     returns a new instance of a control to decorate an element with the\n *     given class.\n * @deprecated Use {@link goog.ui.registry.setDecoratorByClassName} instead.\n */\ngoog.ui.Control.registerDecorator = goog.ui.registry.setDecoratorByClassName;\n\n\n/**\n * Takes an element and returns a new instance of {@link goog.ui.Control}\n * or a subclass, suitable to decorate it (based on the element's CSS class).\n * @param {Element} element Element to decorate.\n * @return {goog.ui.Control?} New control instance to decorate the element\n *     (null if none).\n * @deprecated Use {@link goog.ui.registry.getDecorator} instead.\n */\ngoog.ui.Control.getDecorator =\n    /** @type {function(Element): goog.ui.Control} */ (\n        goog.ui.registry.getDecorator);\n\n\n/**\n * Renderer associated with the component.\n * @type {goog.ui.ControlRenderer|undefined}\n * @private\n */\ngoog.ui.Control.prototype.renderer_;\n\n\n/**\n * Text caption or DOM structure displayed in the component.\n * @type {goog.ui.ControlContent}\n * @private\n */\ngoog.ui.Control.prototype.content_ = null;\n\n\n/**\n * Current component state; a bit mask of {@link goog.ui.Component.State}s.\n * @type {number}\n * @private\n */\ngoog.ui.Control.prototype.state_ = 0x00;\n\n\n/**\n * A bit mask of {@link goog.ui.Component.State}s this component supports.\n * @type {number}\n * @private\n */\ngoog.ui.Control.prototype.supportedStates_ = goog.ui.Component.State.DISABLED |\n    goog.ui.Component.State.HOVER | goog.ui.Component.State.ACTIVE |\n    goog.ui.Component.State.FOCUSED;\n\n\n/**\n * A bit mask of {@link goog.ui.Component.State}s for which this component\n * provides default event handling.  For example, a component that handles\n * the HOVER state automatically will highlight itself on mouseover, whereas\n * a component that doesn't handle HOVER automatically will only dispatch\n * ENTER and LEAVE events but not call {@link setHighlighted} on itself.\n * By default, components provide default event handling for all states.\n * Controls hosted in containers (e.g. menu items in a menu, or buttons in a\n * toolbar) will typically want to have their container manage their highlight\n * state.  Selectable controls managed by a selection model will also typically\n * want their selection state to be managed by the model.\n * @type {number}\n * @private\n */\ngoog.ui.Control.prototype.autoStates_ = goog.ui.Component.State.ALL;\n\n\n/**\n * A bit mask of {@link goog.ui.Component.State}s for which this component\n * dispatches state transition events.  Because events are expensive, the\n * default behavior is to not dispatch any state transition events at all.\n * Use the {@link #setDispatchTransitionEvents} API to request transition\n * events  as needed.  Subclasses may enable transition events by default.\n * Controls hosted in containers or managed by a selection model will typically\n * want to dispatch transition events.\n * @type {number}\n * @private\n */\ngoog.ui.Control.prototype.statesWithTransitionEvents_ = 0x00;\n\n\n/**\n * Component visibility.\n * @type {boolean}\n * @private\n */\ngoog.ui.Control.prototype.visible_ = true;\n\n\n/**\n * Keyboard event handler.\n * @type {goog.events.KeyHandler}\n * @private\n */\ngoog.ui.Control.prototype.keyHandler_;\n\n\n/**\n * Additional class name(s) to apply to the control's root element, if any.\n * @type {Array<string>?}\n * @private\n */\ngoog.ui.Control.prototype.extraClassNames_ = null;\n\n\n/**\n * Whether the control should listen for and handle mouse events; defaults to\n * true.\n * @type {boolean}\n * @private\n */\ngoog.ui.Control.prototype.handleMouseEvents_ = true;\n\n\n/**\n * Whether the control allows text selection within its DOM.  Defaults to false.\n * @type {boolean}\n * @private\n */\ngoog.ui.Control.prototype.allowTextSelection_ = false;\n\n\n/**\n * The control's preferred ARIA role.\n * @type {?goog.a11y.aria.Role}\n * @private\n */\ngoog.ui.Control.prototype.preferredAriaRole_ = null;\n\n\n// Event handler and renderer management.\n\n\n/**\n * Returns true if the control is configured to handle its own mouse events,\n * false otherwise.  Controls not hosted in {@link goog.ui.Container}s have\n * to handle their own mouse events, but controls hosted in containers may\n * allow their parent to handle mouse events on their behalf.  Considered\n * protected; should only be used within this package and by subclasses.\n * @return {boolean} Whether the control handles its own mouse events.\n */\ngoog.ui.Control.prototype.isHandleMouseEvents = function() {\n  return this.handleMouseEvents_;\n};\n\n\n/**\n * Enables or disables mouse event handling for the control.  Containers may\n * use this method to disable mouse event handling in their child controls.\n * Considered protected; should only be used within this package and by\n * subclasses.\n * @param {boolean} enable Whether to enable or disable mouse event handling.\n */\ngoog.ui.Control.prototype.setHandleMouseEvents = function(enable) {\n  if (this.isInDocument() && enable != this.handleMouseEvents_) {\n    // Already in the document; need to update event handler.\n    this.enableMouseEventHandling_(enable);\n  }\n  this.handleMouseEvents_ = enable;\n};\n\n\n/**\n * Returns the DOM element on which the control is listening for keyboard\n * events (null if none).\n * @return {Element} Element on which the control is listening for key\n *     events.\n */\ngoog.ui.Control.prototype.getKeyEventTarget = function() {\n  // Delegate to renderer.\n  return this.renderer_.getKeyEventTarget(this);\n};\n\n\n/**\n * Returns the keyboard event handler for this component, lazily created the\n * first time this method is called.  Considered protected; should only be\n * used within this package and by subclasses.\n * @return {!goog.events.KeyHandler} Keyboard event handler for this component.\n * @protected\n */\ngoog.ui.Control.prototype.getKeyHandler = function() {\n  return this.keyHandler_ || (this.keyHandler_ = new goog.events.KeyHandler());\n};\n\n\n/**\n * Returns the renderer used by this component to render itself or to decorate\n * an existing element.\n * @return {goog.ui.ControlRenderer|undefined} Renderer used by the component\n *     (undefined if none).\n */\ngoog.ui.Control.prototype.getRenderer = function() {\n  return this.renderer_;\n};\n\n\n/**\n * Registers the given renderer with the component.  Changing renderers after\n * the component has entered the document is an error.\n * @param {goog.ui.ControlRenderer} renderer Renderer used by the component.\n * @throws {Error} If the control is already in the document.\n */\ngoog.ui.Control.prototype.setRenderer = function(renderer) {\n  if (this.isInDocument()) {\n    // Too late.\n    throw new Error(goog.ui.Component.Error.ALREADY_RENDERED);\n  }\n\n  if (this.getElement()) {\n    // The component has already been rendered, but isn't yet in the document.\n    // Replace the renderer and delete the current DOM, so it can be re-rendered\n    // using the new renderer the next time someone calls render().\n    this.setElementInternal(null);\n  }\n\n  this.renderer_ = renderer;\n};\n\n\n// Support for additional styling.\n\n\n/**\n * Returns any additional class name(s) to be applied to the component's\n * root element, or null if no extra class names are needed.\n * @return {Array<string>?} Additional class names to be applied to\n *     the component's root element (null if none).\n */\ngoog.ui.Control.prototype.getExtraClassNames = function() {\n  return this.extraClassNames_;\n};\n\n\n/**\n * Adds the given class name to the list of classes to be applied to the\n * component's root element.\n * @param {string} className Additional class name to be applied to the\n *     component's root element.\n */\ngoog.ui.Control.prototype.addClassName = function(className) {\n  if (className) {\n    if (this.extraClassNames_) {\n      if (!goog.array.contains(this.extraClassNames_, className)) {\n        this.extraClassNames_.push(className);\n      }\n    } else {\n      this.extraClassNames_ = [className];\n    }\n    this.renderer_.enableExtraClassName(this, className, true);\n  }\n};\n\n\n/**\n * Removes the given class name from the list of classes to be applied to\n * the component's root element.\n * @param {string} className Class name to be removed from the component's root\n *     element.\n */\ngoog.ui.Control.prototype.removeClassName = function(className) {\n  if (className && this.extraClassNames_ &&\n      goog.array.remove(this.extraClassNames_, className)) {\n    if (this.extraClassNames_.length == 0) {\n      this.extraClassNames_ = null;\n    }\n    this.renderer_.enableExtraClassName(this, className, false);\n  }\n};\n\n\n/**\n * Adds or removes the given class name to/from the list of classes to be\n * applied to the component's root element.\n * @param {string} className CSS class name to add or remove.\n * @param {boolean} enable Whether to add or remove the class name.\n */\ngoog.ui.Control.prototype.enableClassName = function(className, enable) {\n  if (enable) {\n    this.addClassName(className);\n  } else {\n    this.removeClassName(className);\n  }\n};\n\n\n// Standard goog.ui.Component implementation.\n\n\n/**\n * Creates the control's DOM.  Overrides {@link goog.ui.Component#createDom} by\n * delegating DOM manipulation to the control's renderer.\n * @override\n */\ngoog.ui.Control.prototype.createDom = function() {\n  var element = this.renderer_.createDom(this);\n  this.setElementInternal(element);\n\n  // Initialize ARIA role.\n  this.renderer_.setAriaRole(element, this.getPreferredAriaRole());\n\n  // Initialize text selection.\n  if (!this.isAllowTextSelection()) {\n    // The renderer is assumed to create selectable elements.  Since making\n    // elements unselectable is expensive, only do it if needed (bug 1037090).\n    this.renderer_.setAllowTextSelection(element, false);\n  }\n\n  // Initialize visibility.\n  if (!this.isVisible()) {\n    // The renderer is assumed to create visible elements. Since hiding\n    // elements can be expensive, only do it if needed (bug 1037105).\n    this.renderer_.setVisible(element, false);\n  }\n};\n\n\n/**\n * Returns the control's preferred ARIA role. This can be used by a control to\n * override the role that would be assigned by the renderer.  This is useful in\n * cases where a different ARIA role is appropriate for a control because of the\n * context in which it's used.  E.g., a {@link goog.ui.MenuButton} added to a\n * {@link goog.ui.Select} should have an ARIA role of LISTBOX and not MENUITEM.\n * @return {?goog.a11y.aria.Role} This control's preferred ARIA role or null if\n *     no preferred ARIA role is set.\n */\ngoog.ui.Control.prototype.getPreferredAriaRole = function() {\n  return this.preferredAriaRole_;\n};\n\n\n/**\n * Sets the control's preferred ARIA role. This can be used to override the role\n * that would be assigned by the renderer.  This is useful in cases where a\n * different ARIA role is appropriate for a control because of the\n * context in which it's used.  E.g., a {@link goog.ui.MenuButton} added to a\n * {@link goog.ui.Select} should have an ARIA role of LISTBOX and not MENUITEM.\n * @param {goog.a11y.aria.Role} role This control's preferred ARIA role.\n */\ngoog.ui.Control.prototype.setPreferredAriaRole = function(role) {\n  this.preferredAriaRole_ = role;\n};\n\n\n/**\n * Gets the control's aria label.\n * @return {?string} This control's aria label.\n */\ngoog.ui.Control.prototype.getAriaLabel = function() {\n  return this.ariaLabel_;\n};\n\n\n/**\n * Sets the control's aria label. This can be used to assign aria label to the\n * element after it is rendered.\n * @param {string} label The string to set as the aria label for this control.\n *     No escaping is done on this value.\n */\ngoog.ui.Control.prototype.setAriaLabel = function(label) {\n  this.ariaLabel_ = label;\n  var element = this.getElement();\n  if (element) {\n    this.renderer_.setAriaLabel(element, label);\n  }\n};\n\n\n/**\n * Returns the DOM element into which child components are to be rendered,\n * or null if the control itself hasn't been rendered yet.  Overrides\n * {@link goog.ui.Component#getContentElement} by delegating to the renderer.\n * @return {Element} Element to contain child elements (null if none).\n * @override\n */\ngoog.ui.Control.prototype.getContentElement = function() {\n  // Delegate to renderer.\n  return this.renderer_.getContentElement(this.getElement());\n};\n\n\n/**\n * Returns true if the given element can be decorated by this component.\n * Overrides {@link goog.ui.Component#canDecorate}.\n * @param {Element} element Element to decorate.\n * @return {boolean} Whether the element can be decorated by this component.\n * @override\n */\ngoog.ui.Control.prototype.canDecorate = function(element) {\n  // Controls support pluggable renderers; delegate to the renderer.\n  return this.renderer_.canDecorate(element);\n};\n\n\n/**\n * Decorates the given element with this component. Overrides {@link\n * goog.ui.Component#decorateInternal} by delegating DOM manipulation\n * to the control's renderer.\n * @param {Element} element Element to decorate.\n * @protected\n * @override\n */\ngoog.ui.Control.prototype.decorateInternal = function(element) {\n  element = this.renderer_.decorate(this, element);\n  this.setElementInternal(element);\n\n  // Initialize ARIA role.\n  this.renderer_.setAriaRole(element, this.getPreferredAriaRole());\n\n  // Initialize text selection.\n  if (!this.isAllowTextSelection()) {\n    // Decorated elements are assumed to be selectable.  Since making elements\n    // unselectable is expensive, only do it if needed (bug 1037090).\n    this.renderer_.setAllowTextSelection(element, false);\n  }\n\n  // Initialize visibility based on the decorated element's styling.\n  this.visible_ = element.style.display != 'none';\n};\n\n\n/**\n * Configures the component after its DOM has been rendered, and sets up event\n * handling.  Overrides {@link goog.ui.Component#enterDocument}.\n * @override\n */\ngoog.ui.Control.prototype.enterDocument = function() {\n  goog.ui.Control.superClass_.enterDocument.call(this);\n\n  // Call the renderer's setAriaStates method to set element's aria attributes.\n  this.renderer_.setAriaStates(this, this.getElementStrict());\n\n  // Call the renderer's initializeDom method to configure properties of the\n  // control's DOM that can only be done once it's in the document.\n  this.renderer_.initializeDom(this);\n\n  // Initialize event handling if at least one state other than DISABLED is\n  // supported.\n  if (this.supportedStates_ & ~goog.ui.Component.State.DISABLED) {\n    // Initialize mouse event handling if the control is configured to handle\n    // its own mouse events.  (Controls hosted in containers don't need to\n    // handle their own mouse events.)\n    if (this.isHandleMouseEvents()) {\n      this.enableMouseEventHandling_(true);\n    }\n\n    // Initialize keyboard event handling if the control is focusable and has\n    // a key event target.  (Controls hosted in containers typically aren't\n    // focusable, allowing their container to handle keyboard events for them.)\n    if (this.isSupportedState(goog.ui.Component.State.FOCUSED)) {\n      var keyTarget = this.getKeyEventTarget();\n      if (keyTarget) {\n        var keyHandler = this.getKeyHandler();\n        keyHandler.attach(keyTarget);\n        this.getHandler()\n            .listen(\n                keyHandler, goog.events.KeyHandler.EventType.KEY,\n                this.handleKeyEvent)\n            .listen(keyTarget, goog.events.EventType.FOCUS, this.handleFocus)\n            .listen(keyTarget, goog.events.EventType.BLUR, this.handleBlur);\n      }\n    }\n  }\n};\n\n\n/**\n * Enables or disables mouse event handling on the control.\n * @param {boolean} enable Whether to enable mouse event handling.\n * @private\n */\ngoog.ui.Control.prototype.enableMouseEventHandling_ = function(enable) {\n  var MouseEventType = goog.ui.ComponentUtil.getMouseEventType(this);\n\n  var handler = this.getHandler();\n  var element = this.getElement();\n  if (enable) {\n    handler\n        .listen(element, MouseEventType.MOUSEOVER, this.handleMouseOver)\n        .listen(element, MouseEventType.MOUSEDOWN, this.handleMouseDown)\n        .listen(\n            element, [MouseEventType.MOUSEUP, MouseEventType.MOUSECANCEL],\n            this.handleMouseUp)\n        .listen(element, MouseEventType.MOUSEOUT, this.handleMouseOut);\n    if (this.pointerEventsEnabled()) {\n      // Prevent pointer events from capturing the target element so they behave\n      // more like mouse events.\n      handler.listen(\n          element, goog.events.EventType.GOTPOINTERCAPTURE,\n          this.preventPointerCapture_);\n    }\n    if (this.handleContextMenu != goog.nullFunction) {\n      handler.listen(\n          element, goog.events.EventType.CONTEXTMENU, this.handleContextMenu);\n    }\n    if (goog.userAgent.IE) {\n      // Versions of IE before 9 send only one click event followed by a\n      // dblclick, so we must explicitly listen for these. In later versions,\n      // two click events are fired  and so a dblclick listener is unnecessary.\n      if (!goog.userAgent.isVersionOrHigher(9)) {\n        handler.listen(\n            element, goog.events.EventType.DBLCLICK, this.handleDblClick);\n      }\n      if (!this.ieMouseEventSequenceSimulator_) {\n        this.ieMouseEventSequenceSimulator_ =\n            new goog.ui.Control.IeMouseEventSequenceSimulator_(this);\n        this.registerDisposable(this.ieMouseEventSequenceSimulator_);\n      }\n    }\n  } else {\n    handler\n        .unlisten(element, MouseEventType.MOUSEOVER, this.handleMouseOver)\n        .unlisten(element, MouseEventType.MOUSEDOWN, this.handleMouseDown)\n        .unlisten(\n            element, [MouseEventType.MOUSEUP, MouseEventType.MOUSECANCEL],\n            this.handleMouseUp)\n        .unlisten(element, MouseEventType.MOUSEOUT, this.handleMouseOut);\n    if (this.pointerEventsEnabled()) {\n      handler.unlisten(\n          element, goog.events.EventType.GOTPOINTERCAPTURE,\n          this.preventPointerCapture_);\n    }\n    if (this.handleContextMenu != goog.nullFunction) {\n      handler.unlisten(\n          element, goog.events.EventType.CONTEXTMENU, this.handleContextMenu);\n    }\n    if (goog.userAgent.IE) {\n      if (!goog.userAgent.isVersionOrHigher(9)) {\n        handler.unlisten(\n            element, goog.events.EventType.DBLCLICK, this.handleDblClick);\n      }\n      goog.dispose(this.ieMouseEventSequenceSimulator_);\n      this.ieMouseEventSequenceSimulator_ = null;\n    }\n  }\n};\n\n\n/**\n * Cleans up the component before its DOM is removed from the document, and\n * removes event handlers.  Overrides {@link goog.ui.Component#exitDocument}\n * by making sure that components that are removed from the document aren't\n * focusable (i.e. have no tab index).\n * @override\n */\ngoog.ui.Control.prototype.exitDocument = function() {\n  goog.ui.Control.superClass_.exitDocument.call(this);\n  if (this.keyHandler_) {\n    this.keyHandler_.detach();\n  }\n  if (this.isVisible() && this.isEnabled()) {\n    this.renderer_.setFocusable(this, false);\n  }\n};\n\n\n/** @override */\ngoog.ui.Control.prototype.disposeInternal = function() {\n  goog.ui.Control.superClass_.disposeInternal.call(this);\n  if (this.keyHandler_) {\n    this.keyHandler_.dispose();\n    delete this.keyHandler_;\n  }\n  delete this.renderer_;\n  this.content_ = null;\n  this.extraClassNames_ = null;\n  this.ieMouseEventSequenceSimulator_ = null;\n};\n\n\n// Component content management.\n\n\n/**\n * Returns the text caption or DOM structure displayed in the component.\n * @return {goog.ui.ControlContent} Text caption or DOM structure\n *     comprising the component's contents.\n */\ngoog.ui.Control.prototype.getContent = function() {\n  return this.content_;\n};\n\n\n/**\n * Sets the component's content to the given text caption, element, or array of\n * nodes.  (If the argument is an array of nodes, it must be an actual array,\n * not an array-like object.)\n * @param {goog.ui.ControlContent} content Text caption or DOM\n *     structure to set as the component's contents.\n */\ngoog.ui.Control.prototype.setContent = function(content) {\n  // Controls support pluggable renderers; delegate to the renderer.\n  this.renderer_.setContent(this.getElement(), content);\n\n  // setContentInternal needs to be after the renderer, since the implementation\n  // may depend on the content being in the DOM.\n  this.setContentInternal(content);\n};\n\n\n/**\n * Sets the component's content to the given text caption, element, or array\n * of nodes.  Unlike {@link #setContent}, doesn't modify the component's DOM.\n * Called by renderers during element decoration.\n *\n * This should only be used by subclasses and its associated renderers.\n *\n * @param {goog.ui.ControlContent} content Text caption or DOM structure\n *     to set as the component's contents.\n */\ngoog.ui.Control.prototype.setContentInternal = function(content) {\n  this.content_ = content;\n};\n\n\n/**\n * @return {string} Text caption of the control or empty string if none.\n */\ngoog.ui.Control.prototype.getCaption = function() {\n  var content = this.getContent();\n  if (!content) {\n    return '';\n  }\n  var caption = goog.isString(content) ?\n      content :\n      goog.isArray(content) ?\n      goog.array.map(content, goog.dom.getRawTextContent).join('') :\n      goog.dom.getTextContent(/** @type {!Node} */ (content));\n  return goog.string.collapseBreakingSpaces(caption);\n};\n\n\n/**\n * Sets the text caption of the component.\n * @param {string} caption Text caption of the component.\n */\ngoog.ui.Control.prototype.setCaption = function(caption) {\n  this.setContent(caption);\n};\n\n\n// Component state management.\n\n\n/** @override */\ngoog.ui.Control.prototype.setRightToLeft = function(rightToLeft) {\n  // The superclass implementation ensures the control isn't in the document.\n  goog.ui.Control.superClass_.setRightToLeft.call(this, rightToLeft);\n\n  var element = this.getElement();\n  if (element) {\n    this.renderer_.setRightToLeft(element, rightToLeft);\n  }\n};\n\n\n/**\n * Returns true if the control allows text selection within its DOM, false\n * otherwise.  Controls that disallow text selection have the appropriate\n * unselectable styling applied to their elements.  Note that controls hosted\n * in containers will report that they allow text selection even if their\n * container disallows text selection.\n * @return {boolean} Whether the control allows text selection.\n */\ngoog.ui.Control.prototype.isAllowTextSelection = function() {\n  return this.allowTextSelection_;\n};\n\n\n/**\n * Allows or disallows text selection within the control's DOM.\n * @param {boolean} allow Whether the control should allow text selection.\n */\ngoog.ui.Control.prototype.setAllowTextSelection = function(allow) {\n  this.allowTextSelection_ = allow;\n\n  var element = this.getElement();\n  if (element) {\n    this.renderer_.setAllowTextSelection(element, allow);\n  }\n};\n\n\n/**\n * Returns true if the component's visibility is set to visible, false if\n * it is set to hidden.  A component that is set to hidden is guaranteed\n * to be hidden from the user, but the reverse isn't necessarily true.\n * A component may be set to visible but can otherwise be obscured by another\n * element, rendered off-screen, or hidden using direct CSS manipulation.\n * @return {boolean} Whether the component is visible.\n */\ngoog.ui.Control.prototype.isVisible = function() {\n  return this.visible_;\n};\n\n\n/**\n * Shows or hides the component.  Does nothing if the component already has\n * the requested visibility.  Otherwise, dispatches a SHOW or HIDE event as\n * appropriate, giving listeners a chance to prevent the visibility change.\n * When showing a component that is both enabled and focusable, ensures that\n * its key target has a tab index.  When hiding a component that is enabled\n * and focusable, blurs its key target and removes its tab index.\n * @param {boolean} visible Whether to show or hide the component.\n * @param {boolean=} opt_force If true, doesn't check whether the component\n *     already has the requested visibility, and doesn't dispatch any events.\n * @return {boolean} Whether the visibility was changed.\n */\ngoog.ui.Control.prototype.setVisible = function(visible, opt_force) {\n  if (opt_force || (this.visible_ != visible &&\n                    this.dispatchEvent(\n                        visible ? goog.ui.Component.EventType.SHOW :\n                                  goog.ui.Component.EventType.HIDE))) {\n    var element = this.getElement();\n    if (element) {\n      this.renderer_.setVisible(element, visible);\n    }\n    if (this.isEnabled()) {\n      this.renderer_.setFocusable(this, visible);\n    }\n    this.visible_ = visible;\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * Returns true if the component is enabled, false otherwise.\n * @return {boolean} Whether the component is enabled.\n */\ngoog.ui.Control.prototype.isEnabled = function() {\n  return !this.hasState(goog.ui.Component.State.DISABLED);\n};\n\n\n/**\n * Returns true if the control has a parent that is itself disabled, false\n * otherwise.\n * @return {boolean} Whether the component is hosted in a disabled container.\n * @private\n */\ngoog.ui.Control.prototype.isParentDisabled_ = function() {\n  var parent = this.getParent();\n  return !!parent && typeof parent.isEnabled == 'function' &&\n      !parent.isEnabled();\n};\n\n\n/**\n * Enables or disables the component.  Does nothing if this state transition\n * is disallowed.  If the component is both visible and focusable, updates its\n * focused state and tab index as needed.  If the component is being disabled,\n * ensures that it is also deactivated and un-highlighted first.  Note that the\n * component's enabled/disabled state is \"locked\" as long as it is hosted in a\n * {@link goog.ui.Container} that is itself disabled; this is to prevent clients\n * from accidentally re-enabling a control that is in a disabled container.\n * @param {boolean} enable Whether to enable or disable the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setEnabled = function(enable) {\n  if (!this.isParentDisabled_() &&\n      this.isTransitionAllowed(goog.ui.Component.State.DISABLED, !enable)) {\n    if (!enable) {\n      this.setActive(false);\n      this.setHighlighted(false);\n    }\n    if (this.isVisible()) {\n      this.renderer_.setFocusable(this, enable);\n    }\n    this.setState(goog.ui.Component.State.DISABLED, !enable, true);\n  }\n};\n\n\n/**\n * Returns true if the component is currently highlighted, false otherwise.\n * @return {boolean} Whether the component is highlighted.\n */\ngoog.ui.Control.prototype.isHighlighted = function() {\n  return this.hasState(goog.ui.Component.State.HOVER);\n};\n\n\n/**\n * Highlights or unhighlights the component.  Does nothing if this state\n * transition is disallowed.\n * @param {boolean} highlight Whether to highlight or unhighlight the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setHighlighted = function(highlight) {\n  if (this.isTransitionAllowed(goog.ui.Component.State.HOVER, highlight)) {\n    this.setState(goog.ui.Component.State.HOVER, highlight);\n  }\n};\n\n\n/**\n * Returns true if the component is active (pressed), false otherwise.\n * @return {boolean} Whether the component is active.\n */\ngoog.ui.Control.prototype.isActive = function() {\n  return this.hasState(goog.ui.Component.State.ACTIVE);\n};\n\n\n/**\n * Activates or deactivates the component.  Does nothing if this state\n * transition is disallowed.\n * @param {boolean} active Whether to activate or deactivate the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setActive = function(active) {\n  if (this.isTransitionAllowed(goog.ui.Component.State.ACTIVE, active)) {\n    this.setState(goog.ui.Component.State.ACTIVE, active);\n  }\n};\n\n\n/**\n * Returns true if the component is selected, false otherwise.\n * @return {boolean} Whether the component is selected.\n */\ngoog.ui.Control.prototype.isSelected = function() {\n  return this.hasState(goog.ui.Component.State.SELECTED);\n};\n\n\n/**\n * Selects or unselects the component.  Does nothing if this state transition\n * is disallowed.\n * @param {boolean} select Whether to select or unselect the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setSelected = function(select) {\n  if (this.isTransitionAllowed(goog.ui.Component.State.SELECTED, select)) {\n    this.setState(goog.ui.Component.State.SELECTED, select);\n  }\n};\n\n\n/**\n * Returns true if the component is checked, false otherwise.\n * @return {boolean} Whether the component is checked.\n */\ngoog.ui.Control.prototype.isChecked = function() {\n  return this.hasState(goog.ui.Component.State.CHECKED);\n};\n\n\n/**\n * Checks or unchecks the component.  Does nothing if this state transition\n * is disallowed.\n * @param {boolean} check Whether to check or uncheck the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setChecked = function(check) {\n  if (this.isTransitionAllowed(goog.ui.Component.State.CHECKED, check)) {\n    this.setState(goog.ui.Component.State.CHECKED, check);\n  }\n};\n\n\n/**\n * Returns true if the component is styled to indicate that it has keyboard\n * focus, false otherwise.  Note that `isFocused()` returning true\n * doesn't guarantee that the component's key event target has keyboard focus,\n * only that it is styled as such.\n * @return {boolean} Whether the component is styled to indicate as having\n *     keyboard focus.\n */\ngoog.ui.Control.prototype.isFocused = function() {\n  return this.hasState(goog.ui.Component.State.FOCUSED);\n};\n\n\n/**\n * Applies or removes styling indicating that the component has keyboard focus.\n * Note that unlike the other \"set\" methods, this method is called as a result\n * of the component's element having received or lost keyboard focus, not the\n * other way around, so calling `setFocused(true)` doesn't guarantee that\n * the component's key event target has keyboard focus, only that it is styled\n * as such.\n * @param {boolean} focused Whether to apply or remove styling to indicate that\n *     the component's element has keyboard focus.\n */\ngoog.ui.Control.prototype.setFocused = function(focused) {\n  if (this.isTransitionAllowed(goog.ui.Component.State.FOCUSED, focused)) {\n    this.setState(goog.ui.Component.State.FOCUSED, focused);\n  }\n};\n\n\n/**\n * Returns true if the component is open (expanded), false otherwise.\n * @return {boolean} Whether the component is open.\n */\ngoog.ui.Control.prototype.isOpen = function() {\n  return this.hasState(goog.ui.Component.State.OPENED);\n};\n\n\n/**\n * Opens (expands) or closes (collapses) the component.  Does nothing if this\n * state transition is disallowed.\n * @param {boolean} open Whether to open or close the component.\n * @see #isTransitionAllowed\n */\ngoog.ui.Control.prototype.setOpen = function(open) {\n  if (this.isTransitionAllowed(goog.ui.Component.State.OPENED, open)) {\n    this.setState(goog.ui.Component.State.OPENED, open);\n  }\n};\n\n\n/**\n * Returns the component's state as a bit mask of {@link\n * goog.ui.Component.State}s.\n * @return {number} Bit mask representing component state.\n */\ngoog.ui.Control.prototype.getState = function() {\n  return this.state_;\n};\n\n\n/**\n * Returns true if the component is in the specified state, false otherwise.\n * @param {goog.ui.Component.State} state State to check.\n * @return {boolean} Whether the component is in the given state.\n */\ngoog.ui.Control.prototype.hasState = function(state) {\n  return !!(this.state_ & state);\n};\n\n\n/**\n * Sets or clears the given state on the component, and updates its styling\n * accordingly.  Does nothing if the component is already in the correct state\n * or if it doesn't support the specified state.  Doesn't dispatch any state\n * transition events; use advisedly.\n * @param {goog.ui.Component.State} state State to set or clear.\n * @param {boolean} enable Whether to set or clear the state (if supported).\n * @param {boolean=} opt_calledFrom Prevents looping with setEnabled.\n */\ngoog.ui.Control.prototype.setState = function(state, enable, opt_calledFrom) {\n  if (!opt_calledFrom && state == goog.ui.Component.State.DISABLED) {\n    this.setEnabled(!enable);\n    return;\n  }\n  if (this.isSupportedState(state) && enable != this.hasState(state)) {\n    // Delegate actual styling to the renderer, since it is DOM-specific.\n    this.renderer_.setState(this, state, enable);\n    this.state_ = enable ? this.state_ | state : this.state_ & ~state;\n  }\n};\n\n\n/**\n * Sets the component's state to the state represented by a bit mask of\n * {@link goog.ui.Component.State}s.  Unlike {@link #setState}, doesn't\n * update the component's styling, and doesn't reject unsupported states.\n * Called by renderers during element decoration.  Considered protected;\n * should only be used within this package and by subclasses.\n *\n * This should only be used by subclasses and its associated renderers.\n *\n * @param {number} state Bit mask representing component state.\n */\ngoog.ui.Control.prototype.setStateInternal = function(state) {\n  this.state_ = state;\n};\n\n\n/**\n * Returns true if the component supports the specified state, false otherwise.\n * @param {goog.ui.Component.State} state State to check.\n * @return {boolean} Whether the component supports the given state.\n */\ngoog.ui.Control.prototype.isSupportedState = function(state) {\n  return !!(this.supportedStates_ & state);\n};\n\n\n/**\n * Enables or disables support for the given state. Disabling support\n * for a state while the component is in that state is an error.\n * @param {goog.ui.Component.State} state State to support or de-support.\n * @param {boolean} support Whether the component should support the state.\n * @throws {Error} If disabling support for a state the control is currently in.\n */\ngoog.ui.Control.prototype.setSupportedState = function(state, support) {\n  if (this.isInDocument() && this.hasState(state) && !support) {\n    // Since we hook up event handlers in enterDocument(), this is an error.\n    throw new Error(goog.ui.Component.Error.ALREADY_RENDERED);\n  }\n\n  if (!support && this.hasState(state)) {\n    // We are removing support for a state that the component is currently in.\n    this.setState(state, false);\n  }\n\n  this.supportedStates_ =\n      support ? this.supportedStates_ | state : this.supportedStates_ & ~state;\n};\n\n\n/**\n * Returns true if the component provides default event handling for the state,\n * false otherwise.\n * @param {goog.ui.Component.State} state State to check.\n * @return {boolean} Whether the component provides default event handling for\n *     the state.\n */\ngoog.ui.Control.prototype.isAutoState = function(state) {\n  return !!(this.autoStates_ & state) && this.isSupportedState(state);\n};\n\n\n/**\n * Enables or disables automatic event handling for the given state(s).\n * @param {number} states Bit mask of {@link goog.ui.Component.State}s for which\n *     default event handling is to be enabled or disabled.\n * @param {boolean} enable Whether the component should provide default event\n *     handling for the state(s).\n */\ngoog.ui.Control.prototype.setAutoStates = function(states, enable) {\n  this.autoStates_ =\n      enable ? this.autoStates_ | states : this.autoStates_ & ~states;\n};\n\n\n/**\n * Returns true if the component is set to dispatch transition events for the\n * given state, false otherwise.\n * @param {goog.ui.Component.State} state State to check.\n * @return {boolean} Whether the component dispatches transition events for\n *     the state.\n */\ngoog.ui.Control.prototype.isDispatchTransitionEvents = function(state) {\n  return !!(this.statesWithTransitionEvents_ & state) &&\n      this.isSupportedState(state);\n};\n\n\n/**\n * Enables or disables transition events for the given state(s).  Controls\n * handle state transitions internally by default, and only dispatch state\n * transition events if explicitly requested to do so by calling this method.\n * @param {number} states Bit mask of {@link goog.ui.Component.State}s for\n *     which transition events should be enabled or disabled.\n * @param {boolean} enable Whether transition events should be enabled.\n */\ngoog.ui.Control.prototype.setDispatchTransitionEvents = function(\n    states, enable) {\n  this.statesWithTransitionEvents_ = enable ?\n      this.statesWithTransitionEvents_ | states :\n      this.statesWithTransitionEvents_ & ~states;\n};\n\n\n/**\n * Returns true if the transition into or out of the given state is allowed to\n * proceed, false otherwise.  A state transition is allowed under the following\n * conditions:\n * <ul>\n *   <li>the component supports the state,\n *   <li>the component isn't already in the target state,\n *   <li>either the component is configured not to dispatch events for this\n *       state transition, or a transition event was dispatched and wasn't\n *       canceled by any event listener, and\n *   <li>the component hasn't been disposed of\n * </ul>\n * Considered protected; should only be used within this package and by\n * subclasses.\n * @param {goog.ui.Component.State} state State to/from which the control is\n *     transitioning.\n * @param {boolean} enable Whether the control is entering or leaving the state.\n * @return {boolean} Whether the state transition is allowed to proceed.\n * @protected\n */\ngoog.ui.Control.prototype.isTransitionAllowed = function(state, enable) {\n  return this.isSupportedState(state) && this.hasState(state) != enable &&\n      (!(this.statesWithTransitionEvents_ & state) ||\n       this.dispatchEvent(\n           goog.ui.Component.getStateTransitionEvent(state, enable))) &&\n      !this.isDisposed();\n};\n\n\n// Default event handlers, to be overridden in subclasses.\n\n\n/**\n * Handles mouseover events.  Dispatches an ENTER event; if the event isn't\n * canceled, the component is enabled, and it supports auto-highlighting,\n * highlights the component.  Considered protected; should only be used\n * within this package and by subclasses.\n * @param {goog.events.BrowserEvent} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleMouseOver = function(e) {\n  // Ignore mouse moves between descendants.\n  if (!goog.ui.Control.isMouseEventWithinElement_(e, this.getElement()) &&\n      this.dispatchEvent(goog.ui.Component.EventType.ENTER) &&\n      this.isEnabled() && this.isAutoState(goog.ui.Component.State.HOVER)) {\n    this.setHighlighted(true);\n  }\n};\n\n\n/**\n * Handles mouseout events.  Dispatches a LEAVE event; if the event isn't\n * canceled, and the component supports auto-highlighting, deactivates and\n * un-highlights the component.  Considered protected; should only be used\n * within this package and by subclasses.\n * @param {goog.events.BrowserEvent} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleMouseOut = function(e) {\n  if (!goog.ui.Control.isMouseEventWithinElement_(e, this.getElement()) &&\n      this.dispatchEvent(goog.ui.Component.EventType.LEAVE)) {\n    if (this.isAutoState(goog.ui.Component.State.ACTIVE)) {\n      // Deactivate on mouseout; otherwise we lose track of the mouse button.\n      this.setActive(false);\n    }\n    if (this.isAutoState(goog.ui.Component.State.HOVER)) {\n      this.setHighlighted(false);\n    }\n  }\n};\n\n\n/**\n * @param {!goog.events.BrowserEvent} e Event to handle.\n * @private\n */\ngoog.ui.Control.prototype.preventPointerCapture_ = function(e) {\n  var elem = /** @type {!Element} */ (e.target);\n  if (!!elem.releasePointerCapture) {\n    elem.releasePointerCapture(e.pointerId);\n  }\n};\n\n\n/**\n * Handles contextmenu events.\n * @param {goog.events.BrowserEvent} e Event to handle.\n */\ngoog.ui.Control.prototype.handleContextMenu = goog.nullFunction;\n\n\n/**\n * Checks if a mouse event (mouseover or mouseout) occurred below an element.\n * @param {goog.events.BrowserEvent} e Mouse event (should be mouseover or\n *     mouseout).\n * @param {Element} elem The ancestor element.\n * @return {boolean} Whether the event has a relatedTarget (the element the\n *     mouse is coming from) and it's a descendant of elem.\n * @private\n */\ngoog.ui.Control.isMouseEventWithinElement_ = function(e, elem) {\n  // If relatedTarget is null, it means there was no previous element (e.g.\n  // the mouse moved out of the window).  Assume this means that the mouse\n  // event was not within the element.\n  return !!e.relatedTarget && goog.dom.contains(elem, e.relatedTarget);\n};\n\n\n/**\n * Handles mousedown events.  If the component is enabled, highlights and\n * activates it.  If the component isn't configured for keyboard access,\n * prevents it from receiving keyboard focus.  Considered protected; should\n * only be used within this package and by subclasses.\n * @param {goog.events.Event} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleMouseDown = function(e) {\n  if (this.isEnabled()) {\n    // Highlight enabled control on mousedown, regardless of the mouse button.\n    if (this.isAutoState(goog.ui.Component.State.HOVER)) {\n      this.setHighlighted(true);\n    }\n\n    // For the left button only, activate the control, and focus its key event\n    // target (if supported).\n    if (e.isMouseActionButton()) {\n      if (this.isAutoState(goog.ui.Component.State.ACTIVE)) {\n        this.setActive(true);\n      }\n      if (this.renderer_ && this.renderer_.isFocusable(this)) {\n        this.getKeyEventTarget().focus();\n      }\n    }\n  }\n\n  // Cancel the default action unless the control allows text selection.\n  if (!this.isAllowTextSelection() && e.isMouseActionButton()) {\n    e.preventDefault();\n  }\n};\n\n\n/**\n * Handles mouseup events.  If the component is enabled, highlights it.  If\n * the component has previously been activated, performs its associated action\n * by calling {@link performActionInternal}, then deactivates it.  Considered\n * protected; should only be used within this package and by subclasses.\n * @param {goog.events.Event} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleMouseUp = function(e) {\n  if (this.isEnabled()) {\n    if (this.isAutoState(goog.ui.Component.State.HOVER)) {\n      this.setHighlighted(true);\n    }\n    if (this.isActive() && this.performActionInternal(e) &&\n        this.isAutoState(goog.ui.Component.State.ACTIVE)) {\n      this.setActive(false);\n    }\n  }\n};\n\n\n/**\n * Handles dblclick events.  Should only be registered if the user agent is\n * IE.  If the component is enabled, performs its associated action by calling\n * {@link performActionInternal}.  This is used to allow more performant\n * buttons in IE.  In IE, no mousedown event is fired when that mousedown will\n * trigger a dblclick event.  Because of this, a user clicking quickly will\n * only cause ACTION events to fire on every other click.  This is a workaround\n * to generate ACTION events for every click.  Unfortunately, this workaround\n * won't ever trigger the ACTIVE state.  This is roughly the same behaviour as\n * if this were a 'button' element with a listener on mouseup.  Considered\n * protected; should only be used within this package and by subclasses.\n * @param {goog.events.Event} e Mouse event to handle.\n */\ngoog.ui.Control.prototype.handleDblClick = function(e) {\n  if (this.isEnabled()) {\n    this.performActionInternal(e);\n  }\n};\n\n\n/**\n * Performs the appropriate action when the control is activated by the user.\n * The default implementation first updates the checked and selected state of\n * controls that support them, then dispatches an ACTION event.  Considered\n * protected; should only be used within this package and by subclasses.\n * @param {goog.events.Event} e Event that triggered the action.\n * @return {boolean} Whether the action is allowed to proceed.\n * @protected\n */\ngoog.ui.Control.prototype.performActionInternal = function(e) {\n  if (this.isAutoState(goog.ui.Component.State.CHECKED)) {\n    this.setChecked(!this.isChecked());\n  }\n  if (this.isAutoState(goog.ui.Component.State.SELECTED)) {\n    this.setSelected(true);\n  }\n  if (this.isAutoState(goog.ui.Component.State.OPENED)) {\n    this.setOpen(!this.isOpen());\n  }\n\n  var actionEvent =\n      new goog.events.Event(goog.ui.Component.EventType.ACTION, this);\n  if (e) {\n    actionEvent.altKey = e.altKey;\n    actionEvent.ctrlKey = e.ctrlKey;\n    actionEvent.metaKey = e.metaKey;\n    actionEvent.shiftKey = e.shiftKey;\n    actionEvent.platformModifierKey = e.platformModifierKey;\n  }\n  return this.dispatchEvent(actionEvent);\n};\n\n\n/**\n * Handles focus events on the component's key event target element.  If the\n * component is focusable, updates its state and styling to indicate that it\n * now has keyboard focus.  Considered protected; should only be used within\n * this package and by subclasses.  <b>Warning:</b> IE dispatches focus and\n * blur events asynchronously!\n * @param {goog.events.Event} e Focus event to handle.\n */\ngoog.ui.Control.prototype.handleFocus = function(e) {\n  if (this.isAutoState(goog.ui.Component.State.FOCUSED)) {\n    this.setFocused(true);\n  }\n};\n\n\n/**\n * Handles blur events on the component's key event target element.  Always\n * deactivates the component.  In addition, if the component is focusable,\n * updates its state and styling to indicate that it no longer has keyboard\n * focus.  Considered protected; should only be used within this package and\n * by subclasses.  <b>Warning:</b> IE dispatches focus and blur events\n * asynchronously!\n * @param {goog.events.Event} e Blur event to handle.\n */\ngoog.ui.Control.prototype.handleBlur = function(e) {\n  if (this.isAutoState(goog.ui.Component.State.ACTIVE)) {\n    this.setActive(false);\n  }\n  if (this.isAutoState(goog.ui.Component.State.FOCUSED)) {\n    this.setFocused(false);\n  }\n};\n\n\n/**\n * Attempts to handle a keyboard event, if the component is enabled and visible,\n * by calling {@link handleKeyEventInternal}.  Considered protected; should only\n * be used within this package and by subclasses.\n * @param {goog.events.KeyEvent} e Key event to handle.\n * @return {boolean} Whether the key event was handled.\n */\ngoog.ui.Control.prototype.handleKeyEvent = function(e) {\n  if (this.isVisible() && this.isEnabled() && this.handleKeyEventInternal(e)) {\n    e.preventDefault();\n    e.stopPropagation();\n    return true;\n  }\n  return false;\n};\n\n\n/**\n * Attempts to handle a keyboard event; returns true if the event was handled,\n * false otherwise.  Considered protected; should only be used within this\n * package and by subclasses.\n * @param {goog.events.KeyEvent} e Key event to handle.\n * @return {boolean} Whether the key event was handled.\n * @protected\n */\ngoog.ui.Control.prototype.handleKeyEventInternal = function(e) {\n  return e.keyCode == goog.events.KeyCodes.ENTER &&\n      this.performActionInternal(e);\n};\n\n\n// Register the default renderer for goog.ui.Controls.\ngoog.ui.registry.setDefaultRenderer(goog.ui.Control, goog.ui.ControlRenderer);\n\n\n// Register a decorator factory function for goog.ui.Controls.\ngoog.ui.registry.setDecoratorByClassName(\n    goog.ui.ControlRenderer.CSS_CLASS,\n    function() { return new goog.ui.Control(null); });\n\n\n\n/**\n * A singleton that helps goog.ui.Control instances play well with screen\n * readers.  It necessitated by shortcomings in IE, and need not be\n * instantiated in any other browser.\n *\n * In most cases, a click on a goog.ui.Control results in a sequence of events:\n * MOUSEDOWN, MOUSEUP and CLICK.  UI controls rely on this sequence since most\n * behavior is trigged by MOUSEDOWN and MOUSEUP.  But when IE is used with some\n * traditional screen readers (JAWS, NVDA and perhaps others), IE only sends\n * the CLICK event, resulting in the control being unresponsive.  This class\n * monitors the sequence of these events, and if it detects a CLICK event not\n * not preceded by a MOUSEUP event, directly calls the control's event handlers\n * for MOUSEDOWN, then MOUSEUP.  While the resulting sequence is different from\n * the norm (the CLICK comes first instead of last), testing thus far shows\n * the resulting behavior to be correct.\n *\n * See http://goo.gl/qvQR4C for more details.\n *\n * @param {!goog.ui.Control} control\n * @constructor\n * @extends {goog.Disposable}\n * @private\n */\ngoog.ui.Control.IeMouseEventSequenceSimulator_ = function(control) {\n  goog.ui.Control.IeMouseEventSequenceSimulator_.base(this, 'constructor');\n\n  /** @private {goog.ui.Control}*/\n  this.control_ = control;\n\n  /** @private {boolean} */\n  this.clickExpected_ = false;\n\n  /** @private @const {!goog.events.EventHandler<\n   *                       !goog.ui.Control.IeMouseEventSequenceSimulator_>}\n   */\n  this.handler_ = new goog.events.EventHandler(this);\n  this.registerDisposable(this.handler_);\n\n  var element = this.control_.getElementStrict();\n  this.handler_\n      .listen(element, goog.events.EventType.MOUSEDOWN, this.handleMouseDown_)\n      .listen(element, goog.events.EventType.MOUSEUP, this.handleMouseUp_)\n      .listen(element, goog.events.EventType.CLICK, this.handleClick_);\n};\ngoog.inherits(goog.ui.Control.IeMouseEventSequenceSimulator_, goog.Disposable);\n\n\n/**\n * Whether this browser supports synthetic MouseEvents.\n *\n * See https://msdn.microsoft.com/library/dn905219(v=vs.85).aspx for details.\n *\n * @private {boolean}\n * @const\n */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_ =\n    !goog.userAgent.IE || goog.userAgent.isDocumentModeOrHigher(9);\n\n\n/** @private */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_ =\n    function() {\n  this.clickExpected_ = false;\n};\n\n\n/** @private */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_ =\n    function() {\n  this.clickExpected_ = true;\n};\n\n\n/**\n * @param {!MouseEvent} e\n * @param {goog.events.EventType} typeArg\n * @return {!MouseEvent}\n * @private\n */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_ = function(\n    e, typeArg) {\n  'use strict';\n\n  if (!goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_) {\n    // IE < 9 does not support synthetic mouse events. Therefore, reuse the\n    // existing MouseEvent by overwriting the read only button and type\n    // properties. As IE < 9 does not support ES5 strict mode this will not\n    // generate an exception even when the script specifies \"use strict\".\n    e.button = goog.events.BrowserEvent.MouseButton.LEFT;\n    e.type = typeArg;\n    return e;\n  }\n\n  var event = /** @type {!MouseEvent} */ (document.createEvent('MouseEvents'));\n  event.initMouseEvent(\n      typeArg, e.bubbles, e.cancelable,\n      e.view || null,  // IE9 errors if view is undefined\n      e.detail, e.screenX, e.screenY, e.clientX, e.clientY, e.ctrlKey, e.altKey,\n      e.shiftKey, e.metaKey, goog.events.BrowserEvent.MouseButton.LEFT,\n      e.relatedTarget || null);  // IE9 errors if relatedTarget is undefined\n  return event;\n};\n\n\n/**\n * @param {!goog.events.Event} e\n * @private\n */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_ =\n    function(e) {\n  if (this.clickExpected_) {\n    // This is the end of a normal click sequence: mouse-down, mouse-up, click.\n    // Assume appropriate actions have already been performed.\n    this.clickExpected_ = false;\n    return;\n  }\n\n  // For click events not part of a normal sequence, similate the mouse-down and\n  // mouse-up events by creating synthetic events for each and directly invoke\n  // the corresponding event listeners in order.\n\n  var browserEvent = /** @type {goog.events.BrowserEvent} */ (e);\n\n  var event = /** @type {!MouseEvent} */ (browserEvent.getBrowserEvent());\n  var origEventButton = event.button;\n  var origEventType = event.type;\n\n  var down = goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(\n      event, goog.events.EventType.MOUSEDOWN);\n  this.control_.handleMouseDown(\n      new goog.events.BrowserEvent(down, browserEvent.currentTarget));\n\n  var up = goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_(\n      event, goog.events.EventType.MOUSEUP);\n  this.control_.handleMouseUp(\n      new goog.events.BrowserEvent(up, browserEvent.currentTarget));\n\n  if (goog.ui.Control.IeMouseEventSequenceSimulator_.SYNTHETIC_EVENTS_) {\n    // This browser supports synthetic events. Avoid resetting the read only\n    // properties (type, button) as they were not overwritten and writing them\n    // results in an exception when running in ES5 strict mode.\n    return;\n  }\n\n  // Restore original values for click handlers that have not yet been invoked.\n  event.button = origEventButton;\n  event.type = origEventType;\n};\n\n\n/** @override */\ngoog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal =\n    function() {\n  this.control_ = null;\n  goog.ui.Control.IeMouseEventSequenceSimulator_.base(this, 'disposeInternal');\n};\n","// Copyright 2010 The Closure Library Authors. All Rights Reserved.\n\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Native browser textarea renderer for {@link goog.ui.Textarea}s.\n */\n\ngoog.provide('goog.ui.TextareaRenderer');\n\ngoog.require('goog.dom.TagName');\ngoog.require('goog.ui.Component');\ngoog.require('goog.ui.ControlRenderer');\n\n\n\n/**\n * Renderer for {@link goog.ui.Textarea}s.  Renders and decorates native HTML\n * textarea elements.  Since native HTML textareas have built-in support for\n * many features, overrides many expensive (and redundant) superclass methods to\n * be no-ops.\n * @constructor\n * @extends {goog.ui.ControlRenderer}\n */\ngoog.ui.TextareaRenderer = function() {\n  goog.ui.ControlRenderer.call(this);\n};\ngoog.inherits(goog.ui.TextareaRenderer, goog.ui.ControlRenderer);\ngoog.addSingletonGetter(goog.ui.TextareaRenderer);\n\n\n/**\n * Default CSS class to be applied to the root element of components rendered\n * by this renderer.\n * @type {string}\n */\ngoog.ui.TextareaRenderer.CSS_CLASS = goog.getCssName('goog-textarea');\n\n\n/** @override */\ngoog.ui.TextareaRenderer.prototype.getAriaRole = function() {\n  // textareas don't need ARIA roles to be recognized by screen readers.\n  return undefined;\n};\n\n\n/** @override */\ngoog.ui.TextareaRenderer.prototype.decorate = function(control, element) {\n  this.setUpTextarea_(control);\n  goog.ui.TextareaRenderer.superClass_.decorate.call(this, control, element);\n  control.setContent(element.value);\n  return element;\n};\n\n\n/**\n * Returns the textarea's contents wrapped in an HTML textarea element.  Sets\n * the textarea's disabled attribute as needed.\n * @param {goog.ui.Control} textarea Textarea to render.\n * @return {!Element} Root element for the Textarea control (an HTML textarea\n *     element).\n * @override\n */\ngoog.ui.TextareaRenderer.prototype.createDom = function(textarea) {\n  this.setUpTextarea_(textarea);\n  var element = textarea.getDomHelper().createDom(\n      goog.dom.TagName.TEXTAREA, {\n        'class': this.getClassNames(textarea).join(' '),\n        'disabled': !textarea.isEnabled()\n      },\n      textarea.getContent() || '');\n  return element;\n};\n\n\n/**\n * Overrides {@link goog.ui.TextareaRenderer#canDecorate} by returning true only\n * if the element is an HTML textarea.\n * @param {Element} element Element to decorate.\n * @return {boolean} Whether the renderer can decorate the element.\n * @override\n */\ngoog.ui.TextareaRenderer.prototype.canDecorate = function(element) {\n  return element.tagName == goog.dom.TagName.TEXTAREA;\n};\n\n\n/**\n * Textareas natively support right-to-left rendering.\n * @override\n */\ngoog.ui.TextareaRenderer.prototype.setRightToLeft = goog.nullFunction;\n\n\n/**\n * Textareas are always focusable as long as they are enabled.\n * @override\n */\ngoog.ui.TextareaRenderer.prototype.isFocusable = function(textarea) {\n  return textarea.isEnabled();\n};\n\n\n/**\n * Textareas natively support keyboard focus.\n * @override\n */\ngoog.ui.TextareaRenderer.prototype.setFocusable = goog.nullFunction;\n\n\n/**\n * Textareas also expose the DISABLED state in the HTML textarea's\n * `disabled` attribute.\n * @override\n */\ngoog.ui.TextareaRenderer.prototype.setState = function(\n    textarea, state, enable) {\n  goog.ui.TextareaRenderer.superClass_.setState.call(\n      this, textarea, state, enable);\n  var element = textarea.getElement();\n  if (element && state == goog.ui.Component.State.DISABLED) {\n    element.disabled = enable;\n  }\n};\n\n\n/**\n * Textareas don't need ARIA states to support accessibility, so this is\n * a no-op.\n * @override\n */\ngoog.ui.TextareaRenderer.prototype.updateAriaState = goog.nullFunction;\n\n\n/**\n * Sets up the textarea control such that it doesn't waste time adding\n * functionality that is already natively supported by browser\n * textareas.\n * @param {goog.ui.Control} textarea Textarea control to configure.\n * @private\n */\ngoog.ui.TextareaRenderer.prototype.setUpTextarea_ = function(textarea) {\n  textarea.setHandleMouseEvents(false);\n  textarea.setAutoStates(goog.ui.Component.State.ALL, false);\n  textarea.setSupportedState(goog.ui.Component.State.FOCUSED, false);\n};\n\n\n/** @override **/\ngoog.ui.TextareaRenderer.prototype.setContent = function(element, value) {\n  if (element) {\n    element.value = value;\n  }\n};\n\n\n/** @override **/\ngoog.ui.TextareaRenderer.prototype.getCssClass = function() {\n  return goog.ui.TextareaRenderer.CSS_CLASS;\n};\n","// Copyright 2010 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview A content-aware textarea control that grows and shrinks\n * automatically. This implementation extends {@link goog.ui.Control}.\n * This code is inspired by Dojo Dijit's Textarea implementation with\n * modifications to support native (when available) textarea resizing and\n * minHeight and maxHeight enforcement.\n *\n * @see ../demos/textarea.html\n */\n\ngoog.provide('goog.ui.Textarea');\ngoog.provide('goog.ui.Textarea.EventType');\n\ngoog.require('goog.asserts');\ngoog.require('goog.dom');\ngoog.require('goog.dom.classlist');\ngoog.require('goog.events.EventType');\ngoog.require('goog.style');\ngoog.require('goog.ui.Control');\ngoog.require('goog.ui.TextareaRenderer');\ngoog.require('goog.userAgent');\n\n\n\n/**\n * A textarea control to handle growing/shrinking with textarea.value.\n *\n * @param {string} content Text to set as the textarea's value.\n * @param {goog.ui.TextareaRenderer=} opt_renderer Renderer used to render or\n *     decorate the textarea. Defaults to {@link goog.ui.TextareaRenderer}.\n * @param {goog.dom.DomHelper=} opt_domHelper Optional DOM helper, used for\n *     document interaction.\n * @constructor\n * @extends {goog.ui.Control}\n */\ngoog.ui.Textarea = function(content, opt_renderer, opt_domHelper) {\n  goog.ui.Control.call(\n      this, content, opt_renderer || goog.ui.TextareaRenderer.getInstance(),\n      opt_domHelper);\n\n  this.setHandleMouseEvents(false);\n  this.setAllowTextSelection(true);\n  this.hasUserInput_ = (content != '');\n  if (!content) {\n    this.setContentInternal('');\n  }\n};\ngoog.inherits(goog.ui.Textarea, goog.ui.Control);\ngoog.tagUnsealableClass(goog.ui.Textarea);\n\n\n/**\n * Some UAs will shrink the textarea automatically, some won't.\n * @type {boolean}\n * @private\n */\ngoog.ui.Textarea.NEEDS_HELP_SHRINKING_ =\n    !(goog.userAgent.IE && !goog.userAgent.isDocumentModeOrHigher(11));\n\n\n/**\n * True if the resizing function is executing, false otherwise.\n * @type {boolean}\n * @private\n */\ngoog.ui.Textarea.prototype.isResizing_ = false;\n\n\n/**\n * Represents if we have focus on the textarea element, used only\n * to render the placeholder if we don't have native placeholder\n * support.\n * @type {boolean}\n * @private\n */\ngoog.ui.Textarea.prototype.hasFocusForPlaceholder_ = false;\n\n\n/**\n * @type {boolean}\n * @private\n */\ngoog.ui.Textarea.prototype.hasUserInput_ = false;\n\n\n/**\n * The height of the textarea as last measured.\n * @type {number}\n * @private\n */\ngoog.ui.Textarea.prototype.height_ = 0;\n\n\n/**\n * A maximum height for the textarea. When set to 0, the default, there is no\n * enforcement of this value during resize.\n * @type {number}\n * @private\n */\ngoog.ui.Textarea.prototype.maxHeight_ = 0;\n\n\n/**\n * A minimum height for the textarea. When set to 0, the default, there is no\n * enforcement of this value during resize.\n * @type {number}\n * @private\n */\ngoog.ui.Textarea.prototype.minHeight_ = 0;\n\n\n/**\n * Whether or not textarea rendering characteristics have been discovered.\n * Specifically we determine, at runtime:\n *    If the padding and border box is included in offsetHeight.\n *    @see {goog.ui.Textarea.prototype.needsPaddingBorderFix_}\n *    If the padding and border box is included in scrollHeight.\n *    @see {goog.ui.Textarea.prototype.scrollHeightIncludesPadding_} and\n *    @see {goog.ui.Textarea.prototype.scrollHeightIncludesBorder_}\n * TODO(user): See if we can determine goog.ui.Textarea.NEEDS_HELP_SHRINKING_.\n * @type {boolean}\n * @private\n */\ngoog.ui.Textarea.prototype.hasDiscoveredTextareaCharacteristics_ = false;\n\n\n/**\n * If a user agent doesn't correctly support the box-sizing:border-box CSS\n * value then we'll need to adjust our height calculations.\n * @see {goog.ui.Textarea.prototype.discoverTextareaCharacteristics_}\n * @type {boolean}\n * @private\n */\ngoog.ui.Textarea.prototype.needsPaddingBorderFix_ = false;\n\n\n/**\n * Whether or not scrollHeight of a textarea includes the padding box.\n * @type {boolean}\n * @private\n */\ngoog.ui.Textarea.prototype.scrollHeightIncludesPadding_ = false;\n\n\n/**\n * Whether or not scrollHeight of a textarea includes the border box.\n * @type {boolean}\n * @private\n */\ngoog.ui.Textarea.prototype.scrollHeightIncludesBorder_ = false;\n\n\n/**\n * For storing the padding box size during enterDocument, to prevent possible\n * measurement differences that can happen after text zooming.\n * Note: runtime padding changes will cause problems with this.\n * @type {goog.math.Box}\n * @private\n */\ngoog.ui.Textarea.prototype.paddingBox_;\n\n\n/**\n * For storing the border box size during enterDocument, to prevent possible\n * measurement differences that can happen after text zooming.\n * Note: runtime border width changes will cause problems with this.\n * @type {goog.math.Box}\n * @private\n */\ngoog.ui.Textarea.prototype.borderBox_;\n\n\n/**\n * Default text content for the textarea when it is unchanged and unfocussed.\n * We use the placeholder attribute for all browsers that have support for\n * it (new in HTML5 for the following browsers:\n *\n *   Internet Explorer 10.0\n *   Firefox 4.0\n *   Opera 11.6\n *   Chrome 4.0\n *   Safari 5.0\n *\n * For older browsers, we save the placeholderText_ and set it as the element's\n * value and add the TEXTAREA_PLACEHOLDER_CLASS to indicate that it's a\n * placeholder string.\n * @type {string}\n * @private\n */\ngoog.ui.Textarea.prototype.placeholderText_ = '';\n\n\n/**\n * Constants for event names.\n * @enum {string}\n */\ngoog.ui.Textarea.EventType = {\n  RESIZE: 'resize'\n};\n\n\n/**\n * Sets the default text for the textarea.\n * @param {string} text The default text for the textarea.\n */\ngoog.ui.Textarea.prototype.setPlaceholder = function(text) {\n  this.placeholderText_ = text;\n  if (this.getElement()) {\n    this.restorePlaceholder_();\n  }\n};\n\n\n/**\n * @return {number} The padding plus the border box height.\n * @private\n */\ngoog.ui.Textarea.prototype.getPaddingBorderBoxHeight_ = function() {\n  var paddingBorderBoxHeight = this.paddingBox_.top + this.paddingBox_.bottom +\n      this.borderBox_.top + this.borderBox_.bottom;\n  return paddingBorderBoxHeight;\n};\n\n\n/**\n * @return {number} The minHeight value.\n */\ngoog.ui.Textarea.prototype.getMinHeight = function() {\n  return this.minHeight_;\n};\n\n\n/**\n * @return {number} The minHeight value with a potential padding fix.\n * @private\n */\ngoog.ui.Textarea.prototype.getMinHeight_ = function() {\n  var minHeight = this.minHeight_;\n  var textarea = this.getElement();\n  if (minHeight && textarea && this.needsPaddingBorderFix_) {\n    minHeight -= this.getPaddingBorderBoxHeight_();\n  }\n  return minHeight;\n};\n\n\n/**\n * Sets a minimum height for the textarea, and calls resize if rendered.\n * @param {number} height New minHeight value.\n */\ngoog.ui.Textarea.prototype.setMinHeight = function(height) {\n  this.minHeight_ = height;\n  this.resize();\n};\n\n\n/**\n * @return {number} The maxHeight value.\n */\ngoog.ui.Textarea.prototype.getMaxHeight = function() {\n  return this.maxHeight_;\n};\n\n\n/**\n * @return {number} The maxHeight value with a potential padding fix.\n * @private\n */\ngoog.ui.Textarea.prototype.getMaxHeight_ = function() {\n  var maxHeight = this.maxHeight_;\n  var textarea = this.getElement();\n  if (maxHeight && textarea && this.needsPaddingBorderFix_) {\n    maxHeight -= this.getPaddingBorderBoxHeight_();\n  }\n  return maxHeight;\n};\n\n\n/**\n * Sets a maximum height for the textarea, and calls resize if rendered.\n * @param {number} height New maxHeight value.\n */\ngoog.ui.Textarea.prototype.setMaxHeight = function(height) {\n  this.maxHeight_ = height;\n  this.resize();\n};\n\n\n/**\n * Sets the textarea's value.\n * @param {*} value The value property for the textarea, will be cast to a\n *     string by the browser when setting textarea.value.\n */\ngoog.ui.Textarea.prototype.setValue = function(value) {\n  this.setContent(String(value));\n};\n\n\n/**\n * Gets the textarea's value.\n * @return {string} value The value of the textarea.\n */\ngoog.ui.Textarea.prototype.getValue = function() {\n  // We potentially have the placeholder stored in the value.\n  // If a client of this class sets this.getElement().value directly\n  // we don't set the this.hasUserInput_ boolean. Thus, we need to\n  // explicitly check if the value != the placeholder text. This has\n  // the unfortunate edge case of:\n  //   If the client sets this.getElement().value to the placeholder\n  //   text, we'll return the empty string.\n  // The normal use case shouldn't be an issue, however, since the\n  // default placeholderText is the empty string. Also, if the end user\n  // inputs text, then this.hasUserInput_ will always be true.\n  if (this.getElement().value != this.placeholderText_ ||\n      this.supportsNativePlaceholder_() || this.hasUserInput_) {\n    // We don't do anything fancy here.\n    return this.getElement().value;\n  }\n  return '';\n};\n\n\n/** @override */\ngoog.ui.Textarea.prototype.setContent = function(content) {\n  goog.ui.Textarea.superClass_.setContent.call(this, content);\n  this.hasUserInput_ = (content != '');\n  this.resize();\n};\n\n\n/** @override **/\ngoog.ui.Textarea.prototype.setEnabled = function(enable) {\n  goog.ui.Textarea.superClass_.setEnabled.call(this, enable);\n  this.getElement().disabled = !enable;\n};\n\n\n/**\n * Resizes the textarea vertically.\n */\ngoog.ui.Textarea.prototype.resize = function() {\n  if (this.getElement()) {\n    this.grow_();\n  }\n};\n\n\n/**\n * @return {boolean} True if the element supports the placeholder attribute.\n * @private\n */\ngoog.ui.Textarea.prototype.supportsNativePlaceholder_ = function() {\n  goog.asserts.assert(this.getElement());\n  return 'placeholder' in this.getElement();\n};\n\n\n/**\n * Sets the value of the textarea element to the default text.\n * @private\n */\ngoog.ui.Textarea.prototype.restorePlaceholder_ = function() {\n  if (!this.placeholderText_) {\n    // Return early if there is no placeholder to mess with.\n    return;\n  }\n  // Check again in case something changed since this was scheduled.\n  // We check that the element is still there since this is called by a timer\n  // and the dispose method may have been called prior to this.\n  if (this.supportsNativePlaceholder_()) {\n    this.getElement().placeholder = this.placeholderText_;\n  } else if (\n      this.getElement() && !this.hasUserInput_ &&\n      !this.hasFocusForPlaceholder_) {\n    // We only want to set the value + placeholder CSS if we actually have\n    // some placeholder text to show.\n    goog.dom.classlist.add(\n        goog.asserts.assert(this.getElement()),\n        goog.ui.Textarea.TEXTAREA_PLACEHOLDER_CLASS);\n    this.getElement().value = this.placeholderText_;\n  }\n};\n\n\n/** @override **/\ngoog.ui.Textarea.prototype.enterDocument = function() {\n  goog.ui.Textarea.base(this, 'enterDocument');\n  var textarea = this.getElement();\n\n  // Eliminates the vertical scrollbar and changes the box-sizing mode for the\n  // textarea to the border-box (aka quirksmode) paradigm.\n  goog.style.setStyle(textarea, {\n    'overflowY': 'hidden',\n    'overflowX': 'auto',\n    'boxSizing': 'border-box',\n    'MsBoxSizing': 'border-box',\n    'WebkitBoxSizing': 'border-box',\n    'MozBoxSizing': 'border-box'\n  });\n\n  this.paddingBox_ = goog.style.getPaddingBox(textarea);\n  this.borderBox_ = goog.style.getBorderBox(textarea);\n\n  this.getHandler()\n      .listen(textarea, goog.events.EventType.SCROLL, this.grow_)\n      .listen(textarea, goog.events.EventType.FOCUS, this.grow_)\n      .listen(textarea, goog.events.EventType.KEYUP, this.grow_)\n      .listen(textarea, goog.events.EventType.MOUSEUP, this.mouseUpListener_)\n      .listen(textarea, goog.events.EventType.BLUR, this.blur_);\n\n  this.restorePlaceholder_();\n  this.resize();\n};\n\n\n/**\n * Gets the textarea's content height + padding height + border height.\n * This is done by getting the scrollHeight and adjusting from there.\n * In the end this result is what we want the new offsetHeight to equal.\n * @return {number} The height of the textarea.\n * @private\n */\ngoog.ui.Textarea.prototype.getHeight_ = function() {\n  this.discoverTextareaCharacteristics_();\n  var textarea = this.getElement();\n  // Because enterDocument can be called even when the component is rendered\n  // without being in a document, we may not have cached the correct paddingBox\n  // data on render(). We try to make up for this here.\n  if (isNaN(this.paddingBox_.top)) {\n    this.paddingBox_ = goog.style.getPaddingBox(textarea);\n    this.borderBox_ = goog.style.getBorderBox(textarea);\n  }\n  // Accounts for a possible (though unlikely) horizontal scrollbar.\n  var height =\n      this.getElement().scrollHeight + this.getHorizontalScrollBarHeight_();\n  if (this.needsPaddingBorderFix_) {\n    height -= this.getPaddingBorderBoxHeight_();\n  } else {\n    if (!this.scrollHeightIncludesPadding_) {\n      var paddingBox = this.paddingBox_;\n      var paddingBoxHeight = paddingBox.top + paddingBox.bottom;\n      height += paddingBoxHeight;\n    }\n    if (!this.scrollHeightIncludesBorder_) {\n      var borderBox = goog.style.getBorderBox(textarea);\n      var borderBoxHeight = borderBox.top + borderBox.bottom;\n      height += borderBoxHeight;\n    }\n  }\n  return height;\n};\n\n\n/**\n * Sets the textarea's height.\n * @param {number} height The height to set.\n * @private\n */\ngoog.ui.Textarea.prototype.setHeight_ = function(height) {\n  if (this.height_ != height) {\n    this.height_ = height;\n    this.getElement().style.height = height + 'px';\n  }\n};\n\n\n/**\n * Sets the textarea's rows attribute to be the number of newlines + 1.\n * This is necessary when the textarea is hidden, in which case scrollHeight\n * is not available.\n * @private\n */\ngoog.ui.Textarea.prototype.setHeightToEstimate_ = function() {\n  var textarea = this.getElement();\n  textarea.style.height = 'auto';\n  var newlines = textarea.value.match(/\\n/g) || [];\n  textarea.rows = newlines.length + 1;\n  this.height_ = 0;\n};\n\n\n/**\n * Gets the the height of (possibly present) horizontal scrollbar.\n * @return {number} The height of the horizontal scrollbar.\n * @private\n */\ngoog.ui.Textarea.prototype.getHorizontalScrollBarHeight_ = function() {\n  var textarea = /** @type {!HTMLElement} */ (this.getElement());\n  var height = textarea.offsetHeight - textarea.clientHeight;\n  if (!this.scrollHeightIncludesPadding_) {\n    var paddingBox = this.paddingBox_;\n    var paddingBoxHeight = paddingBox.top + paddingBox.bottom;\n    height -= paddingBoxHeight;\n  }\n  if (!this.scrollHeightIncludesBorder_) {\n    var borderBox = goog.style.getBorderBox(textarea);\n    var borderBoxHeight = borderBox.top + borderBox.bottom;\n    height -= borderBoxHeight;\n  }\n  // Prevent negative number results, which sometimes show up.\n  return height > 0 ? height : 0;\n};\n\n\n/**\n * In order to assess the correct height for a textarea, we need to know\n * whether the scrollHeight (the full height of the text) property includes\n * the values for padding and borders. We can also test whether the\n * box-sizing: border-box setting is working and then tweak accordingly.\n * Instead of hardcoding a list of currently known behaviors and testing\n * for quirksmode, we do a runtime check out of the flow. The performance\n * impact should be very small.\n * @private\n */\ngoog.ui.Textarea.prototype.discoverTextareaCharacteristics_ = function() {\n  if (!this.hasDiscoveredTextareaCharacteristics_) {\n    var textarea =\n        /** @type {!HTMLElement} */ (this.getElement().cloneNode(false));\n    // We need to overwrite/write box model specific styles that might\n    // affect height.\n    goog.style.setStyle(textarea, {\n      'position': 'absolute',\n      'height': 'auto',\n      'top': '-9999px',\n      'margin': '0',\n      'padding': '1px',\n      'border': '1px solid #000',\n      'overflow': 'hidden'\n    });\n    goog.dom.appendChild(this.getDomHelper().getDocument().body, textarea);\n    var initialScrollHeight = textarea.scrollHeight;\n\n    textarea.style.padding = '10px';\n    var paddingScrollHeight = textarea.scrollHeight;\n    this.scrollHeightIncludesPadding_ =\n        paddingScrollHeight > initialScrollHeight;\n\n    initialScrollHeight = paddingScrollHeight;\n    textarea.style.borderWidth = '10px';\n    var borderScrollHeight = textarea.scrollHeight;\n    this.scrollHeightIncludesBorder_ = borderScrollHeight > initialScrollHeight;\n\n    // Tests if border-box sizing is working or not.\n    textarea.style.height = '100px';\n    var offsetHeightAtHeight100 = textarea.offsetHeight;\n    if (offsetHeightAtHeight100 != 100) {\n      this.needsPaddingBorderFix_ = true;\n    }\n\n    goog.dom.removeNode(textarea);\n    this.hasDiscoveredTextareaCharacteristics_ = true;\n  }\n};\n\n\n/**\n * The CSS class name to add to the input when the user has not entered a\n * value.\n */\ngoog.ui.Textarea.TEXTAREA_PLACEHOLDER_CLASS =\n    goog.getCssName('textarea-placeholder-input');\n\n\n/**\n * Called when the element goes out of focus.\n * @param {goog.events.Event=} opt_e The browser event.\n * @private\n */\ngoog.ui.Textarea.prototype.blur_ = function(opt_e) {\n  if (!this.supportsNativePlaceholder_()) {\n    this.hasFocusForPlaceholder_ = false;\n    if (this.getElement().value == '') {\n      // Only transition to the default text if we have\n      // no user input.\n      this.hasUserInput_ = false;\n      this.restorePlaceholder_();\n    }\n  }\n};\n\n\n/**\n * Resizes the textarea to grow/shrink to match its contents.\n * @param {goog.events.Event=} opt_e The browser event.\n * @private\n */\ngoog.ui.Textarea.prototype.grow_ = function(opt_e) {\n  if (this.isResizing_) {\n    return;\n  }\n  var textarea = /** @type {!HTMLElement} */ (this.getElement());\n  // If the element is getting focus and we don't support placeholders\n  // natively, then remove the placeholder class.\n  if (!this.supportsNativePlaceholder_() && opt_e &&\n      opt_e.type == goog.events.EventType.FOCUS) {\n    // We must have a textarea element, since we're growing it.\n    // Remove the placeholder CSS + set the value to empty if we're currently\n    // showing the placeholderText_ value if this is the first time we're\n    // getting focus.\n    if (textarea.value == this.placeholderText_ && this.placeholderText_ &&\n        !this.hasFocusForPlaceholder_) {\n      goog.dom.classlist.remove(\n          textarea, goog.ui.Textarea.TEXTAREA_PLACEHOLDER_CLASS);\n      textarea.value = '';\n    }\n    this.hasFocusForPlaceholder_ = true;\n    this.hasUserInput_ = (textarea.value != '');\n  }\n  var shouldCallShrink = false;\n  this.isResizing_ = true;\n  var oldHeight = this.height_;\n  if (textarea.scrollHeight) {\n    var setMinHeight = false;\n    var setMaxHeight = false;\n    var newHeight = this.getHeight_();\n    var currentHeight = textarea.offsetHeight;\n    var minHeight = this.getMinHeight_();\n    var maxHeight = this.getMaxHeight_();\n    if (minHeight && newHeight < minHeight) {\n      this.setHeight_(minHeight);\n      setMinHeight = true;\n    } else if (maxHeight && newHeight > maxHeight) {\n      this.setHeight_(maxHeight);\n      // If the content is greater than the height, we'll want the vertical\n      // scrollbar back.\n      textarea.style.overflowY = '';\n      setMaxHeight = true;\n    } else if (currentHeight != newHeight) {\n      this.setHeight_(newHeight);\n      // Makes sure that height_ is at least set.\n    } else if (!this.height_) {\n      this.height_ = newHeight;\n    }\n    if (!setMinHeight && !setMaxHeight &&\n        goog.ui.Textarea.NEEDS_HELP_SHRINKING_) {\n      shouldCallShrink = true;\n    }\n  } else {\n    this.setHeightToEstimate_();\n  }\n  this.isResizing_ = false;\n\n  if (shouldCallShrink) {\n    this.shrink_();\n  }\n  if (oldHeight != this.height_) {\n    this.dispatchEvent(goog.ui.Textarea.EventType.RESIZE);\n  }\n};\n\n\n/**\n * Resizes the textarea to shrink to fit its contents. The way this works is\n * by increasing the padding of the textarea by 1px (it's important here that\n * we're in box-sizing: border-box mode). If the size of the textarea grows,\n * then the box is filled up to the padding box with text.\n * If it doesn't change, then we can shrink.\n * @private\n */\ngoog.ui.Textarea.prototype.shrink_ = function() {\n  var textarea = this.getElement();\n  if (!this.isResizing_) {\n    this.isResizing_ = true;\n    var scrollHeight = textarea.scrollHeight;\n    if (!scrollHeight) {\n      this.setHeightToEstimate_();\n    } else {\n      var currentHeight = this.getHeight_();\n      var minHeight = this.getMinHeight_();\n      if (!(minHeight && currentHeight <= minHeight)) {\n        // Nudge the padding by 1px.\n        var paddingBox = this.paddingBox_;\n        textarea.style.paddingBottom = paddingBox.bottom + 1 + 'px';\n        var heightAfterNudge = this.getHeight_();\n        // If the one px of padding had no effect, then we can shrink.\n        if (heightAfterNudge == currentHeight) {\n          textarea.style.paddingBottom =\n              paddingBox.bottom + scrollHeight + 'px';\n          textarea.scrollTop = 0;\n          var shrinkToHeight = this.getHeight_() - scrollHeight;\n          if (shrinkToHeight >= minHeight) {\n            this.setHeight_(shrinkToHeight);\n          } else {\n            this.setHeight_(minHeight);\n          }\n        }\n        textarea.style.paddingBottom = paddingBox.bottom + 'px';\n      }\n    }\n    this.isResizing_ = false;\n  }\n};\n\n\n/**\n * We use this listener to check if the textarea has been natively resized\n * and if so we reset minHeight so that we don't ever shrink smaller than\n * the user's manually set height. Note that we cannot check size on mousedown\n * and then just compare here because we cannot capture mousedown on\n * the textarea resizer, while mouseup fires reliably.\n * @param {goog.events.BrowserEvent} e The mousedown event.\n * @private\n */\ngoog.ui.Textarea.prototype.mouseUpListener_ = function(e) {\n  var textarea = /** @type {!HTMLElement} */ (this.getElement());\n  var height = textarea.offsetHeight;\n\n  // This solves for when the MSIE DropShadow filter is enabled,\n  // as it affects the offsetHeight value, even with MsBoxSizing:border-box.\n  if (textarea['filters'] && textarea['filters'].length) {\n    var dropShadow =\n        textarea['filters']['item']('DXImageTransform.Microsoft.DropShadow');\n    if (dropShadow) {\n      height -= dropShadow['offX'];\n    }\n  }\n\n  if (height != this.height_) {\n    this.minHeight_ = height;\n    this.height_ = height;\n  }\n};\n","// Copyright 2009 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Collection of utility functions for Unicode character.\n *\n */\n\ngoog.provide('goog.i18n.uChar');\n\n\n// Constants for handling Unicode supplementary characters (surrogate pairs).\n\n\n/**\n * The minimum value for Supplementary code points.\n * @type {number}\n * @private\n */\ngoog.i18n.uChar.SUPPLEMENTARY_CODE_POINT_MIN_VALUE_ = 0x10000;\n\n\n/**\n * The highest Unicode code point value (scalar value) according to the Unicode\n * Standard.\n * @type {number}\n * @private\n */\ngoog.i18n.uChar.CODE_POINT_MAX_VALUE_ = 0x10FFFF;\n\n\n/**\n * Lead surrogate minimum value.\n * @type {number}\n * @private\n */\ngoog.i18n.uChar.LEAD_SURROGATE_MIN_VALUE_ = 0xD800;\n\n\n/**\n * Lead surrogate maximum value.\n * @type {number}\n * @private\n */\ngoog.i18n.uChar.LEAD_SURROGATE_MAX_VALUE_ = 0xDBFF;\n\n\n/**\n * Trail surrogate minimum value.\n * @type {number}\n * @private\n */\ngoog.i18n.uChar.TRAIL_SURROGATE_MIN_VALUE_ = 0xDC00;\n\n\n/**\n * Trail surrogate maximum value.\n * @type {number}\n * @private\n */\ngoog.i18n.uChar.TRAIL_SURROGATE_MAX_VALUE_ = 0xDFFF;\n\n\n/**\n * The number of least significant bits of a supplementary code point that in\n * UTF-16 become the least significant bits of the trail surrogate. The rest of\n * the in-use bits of the supplementary code point become the least significant\n * bits of the lead surrogate.\n * @type {number}\n * @private\n */\ngoog.i18n.uChar.TRAIL_SURROGATE_BIT_COUNT_ = 10;\n\n\n/**\n * Gets the U+ notation string of a Unicode character. Ex: 'U+0041' for 'A'.\n * @param {string} ch The given character.\n * @return {string} The U+ notation of the given character.\n */\ngoog.i18n.uChar.toHexString = function(ch) {\n  var chCode = goog.i18n.uChar.toCharCode(ch);\n  var chCodeStr = 'U+' +\n      goog.i18n.uChar.padString_(chCode.toString(16).toUpperCase(), 4, '0');\n\n  return chCodeStr;\n};\n\n\n/**\n * Gets a string padded with given character to get given size.\n * @param {string} str The given string to be padded.\n * @param {number} length The target size of the string.\n * @param {string} ch The character to be padded with.\n * @return {string} The padded string.\n * @private\n */\ngoog.i18n.uChar.padString_ = function(str, length, ch) {\n  while (str.length < length) {\n    str = ch + str;\n  }\n  return str;\n};\n\n\n/**\n * Gets Unicode value of the given character.\n * @param {string} ch The given character, which in the case of a supplementary\n * character is actually a surrogate pair. The remainder of the string is\n * ignored.\n * @return {number} The Unicode value of the character.\n */\ngoog.i18n.uChar.toCharCode = function(ch) {\n  return goog.i18n.uChar.getCodePointAround(ch, 0);\n};\n\n\n/**\n * Gets a character from the given Unicode value. If the given code point is not\n * a valid Unicode code point, null is returned.\n * @param {number} code The Unicode value of the character.\n * @return {?string} The character corresponding to the given Unicode value.\n */\ngoog.i18n.uChar.fromCharCode = function(code) {\n  if (!goog.isDefAndNotNull(code) ||\n      !(code >= 0 && code <= goog.i18n.uChar.CODE_POINT_MAX_VALUE_)) {\n    return null;\n  }\n  if (goog.i18n.uChar.isSupplementaryCodePoint(code)) {\n    // First, we split the code point into the trail surrogate part (the\n    // TRAIL_SURROGATE_BIT_COUNT_ least significant bits) and the lead surrogate\n    // part (the rest of the bits, shifted down; note that for now this includes\n    // the supplementary offset, also shifted down, to be subtracted off below).\n    var leadBits = code >> goog.i18n.uChar.TRAIL_SURROGATE_BIT_COUNT_;\n    var trailBits = code &\n        // A bit-mask to get the TRAIL_SURROGATE_BIT_COUNT_ (i.e. 10) least\n        // significant bits. 1 << 10 = 0x0400. 0x0400 - 1 = 0x03FF.\n        ((1 << goog.i18n.uChar.TRAIL_SURROGATE_BIT_COUNT_) - 1);\n\n    // Now we calculate the code point of each surrogate by adding each offset\n    // to the corresponding base code point.\n    var leadCodePoint = leadBits +\n        (goog.i18n.uChar.LEAD_SURROGATE_MIN_VALUE_ -\n         // Subtract off the supplementary offset, which had been shifted down\n         // with the rest of leadBits. We do this here instead of before the\n         // shift in order to save a separate subtraction step.\n         (goog.i18n.uChar.SUPPLEMENTARY_CODE_POINT_MIN_VALUE_ >>\n          goog.i18n.uChar.TRAIL_SURROGATE_BIT_COUNT_));\n    var trailCodePoint = trailBits + goog.i18n.uChar.TRAIL_SURROGATE_MIN_VALUE_;\n\n    // Convert the code points into a 2-character long string.\n    return String.fromCharCode(leadCodePoint) +\n        String.fromCharCode(trailCodePoint);\n  }\n  return String.fromCharCode(code);\n};\n\n\n/**\n * Returns the Unicode code point at the specified index.\n *\n * If the char value specified at the given index is in the leading-surrogate\n * range, and the following index is less than the length of `string`, and\n * the char value at the following index is in the trailing-surrogate range,\n * then the supplementary code point corresponding to this surrogate pair is\n * returned.\n *\n * If the char value specified at the given index is in the trailing-surrogate\n * range, and the preceding index is not before the start of `string`, and\n * the char value at the preceding index is in the leading-surrogate range, then\n * the negated supplementary code point corresponding to this surrogate pair is\n * returned.\n *\n * The negation allows the caller to differentiate between the case where the\n * given index is at the leading surrogate and the one where it is at the\n * trailing surrogate, and thus deduce where the next character starts and\n * preceding character ends.\n *\n * Otherwise, the char value at the given index is returned. Thus, a leading\n * surrogate is returned when it is not followed by a trailing surrogate, and a\n * trailing surrogate is returned when it is not preceded by a leading\n * surrogate.\n *\n * @param {string} string The string.\n * @param {number} index The index from which the code point is to be retrieved.\n * @return {number} The code point at the given index. If the given index is\n * that of the start (i.e. lead surrogate) of a surrogate pair, returns the code\n * point encoded by the pair. If the given index is that of the end (i.e. trail\n * surrogate) of a surrogate pair, returns the negated code pointed encoded by\n * the pair.\n */\ngoog.i18n.uChar.getCodePointAround = function(string, index) {\n  var charCode = string.charCodeAt(index);\n  if (goog.i18n.uChar.isLeadSurrogateCodePoint(charCode) &&\n      index + 1 < string.length) {\n    var trail = string.charCodeAt(index + 1);\n    if (goog.i18n.uChar.isTrailSurrogateCodePoint(trail)) {\n      // Part of a surrogate pair.\n      return /** @type {number} */ (\n          goog.i18n.uChar.buildSupplementaryCodePoint(charCode, trail));\n    }\n  } else if (goog.i18n.uChar.isTrailSurrogateCodePoint(charCode) && index > 0) {\n    var lead = string.charCodeAt(index - 1);\n    if (goog.i18n.uChar.isLeadSurrogateCodePoint(lead)) {\n      // Part of a surrogate pair.\n      var codepoint = /** @type {number} */ (\n          goog.i18n.uChar.buildSupplementaryCodePoint(lead, charCode));\n      return -codepoint;\n    }\n  }\n  return charCode;\n};\n\n\n/**\n * Determines the length of the string needed to represent the specified\n * Unicode code point.\n * @param {number} codePoint\n * @return {number} 2 if codePoint is a supplementary character, 1 otherwise.\n */\ngoog.i18n.uChar.charCount = function(codePoint) {\n  return goog.i18n.uChar.isSupplementaryCodePoint(codePoint) ? 2 : 1;\n};\n\n\n/**\n * Determines whether the specified Unicode code point is in the supplementary\n * Unicode characters range.\n * @param {number} codePoint\n * @return {boolean} Whether then given code point is a supplementary character.\n */\ngoog.i18n.uChar.isSupplementaryCodePoint = function(codePoint) {\n  return codePoint >= goog.i18n.uChar.SUPPLEMENTARY_CODE_POINT_MIN_VALUE_ &&\n      codePoint <= goog.i18n.uChar.CODE_POINT_MAX_VALUE_;\n};\n\n\n/**\n * Gets whether the given code point is a leading surrogate character.\n * @param {number} codePoint\n * @return {boolean} Whether the given code point is a leading surrogate\n * character.\n */\ngoog.i18n.uChar.isLeadSurrogateCodePoint = function(codePoint) {\n  return codePoint >= goog.i18n.uChar.LEAD_SURROGATE_MIN_VALUE_ &&\n      codePoint <= goog.i18n.uChar.LEAD_SURROGATE_MAX_VALUE_;\n};\n\n\n/**\n * Gets whether the given code point is a trailing surrogate character.\n * @param {number} codePoint\n * @return {boolean} Whether the given code point is a trailing surrogate\n * character.\n */\ngoog.i18n.uChar.isTrailSurrogateCodePoint = function(codePoint) {\n  return codePoint >= goog.i18n.uChar.TRAIL_SURROGATE_MIN_VALUE_ &&\n      codePoint <= goog.i18n.uChar.TRAIL_SURROGATE_MAX_VALUE_;\n};\n\n\n/**\n * Composes a supplementary Unicode code point from the given UTF-16 surrogate\n * pair. If leadSurrogate isn't a leading surrogate code point or trailSurrogate\n * isn't a trailing surrogate code point, null is returned.\n * @param {number} lead The leading surrogate code point.\n * @param {number} trail The trailing surrogate code point.\n * @return {?number} The supplementary Unicode code point obtained by decoding\n * the given UTF-16 surrogate pair.\n */\ngoog.i18n.uChar.buildSupplementaryCodePoint = function(lead, trail) {\n  if (goog.i18n.uChar.isLeadSurrogateCodePoint(lead) &&\n      goog.i18n.uChar.isTrailSurrogateCodePoint(trail)) {\n    var shiftedLeadOffset =\n        (lead << goog.i18n.uChar.TRAIL_SURROGATE_BIT_COUNT_) -\n        (goog.i18n.uChar.LEAD_SURROGATE_MIN_VALUE_\n         << goog.i18n.uChar.TRAIL_SURROGATE_BIT_COUNT_);\n    var trailOffset = trail - goog.i18n.uChar.TRAIL_SURROGATE_MIN_VALUE_ +\n        goog.i18n.uChar.SUPPLEMENTARY_CODE_POINT_MIN_VALUE_;\n    return shiftedLeadOffset + trailOffset;\n  }\n  return null;\n};\n","// Copyright 2008 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Provides inversion and inversion map functionality for storing\n * integer ranges and corresponding values.\n *\n */\n\ngoog.provide('goog.structs.InversionMap');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\n\n\n\n/**\n * Maps ranges to values.\n * @param {Array<number>} rangeArray An array of monotonically\n *     increasing integer values, with at least one instance.\n * @param {Array<T>} valueArray An array of corresponding values.\n *     Length must be the same as rangeArray.\n * @param {boolean=} opt_delta If true, saves only delta from previous value.\n * @constructor\n * @template T\n */\ngoog.structs.InversionMap = function(rangeArray, valueArray, opt_delta) {\n  /**\n   * @protected {Array<number>}\n   */\n  this.rangeArray = null;\n\n  goog.asserts.assert(\n      rangeArray.length == valueArray.length,\n      'rangeArray and valueArray must have the same length.');\n  this.storeInversion_(rangeArray, opt_delta);\n\n  /** @protected {Array<T>} */\n  this.values = valueArray;\n};\n\n\n/**\n * Stores the integers as ranges (half-open).\n * If delta is true, the integers are delta from the previous value and\n * will be restored to the absolute value.\n * When used as a set, even indices are IN, and odd are OUT.\n * @param {Array<number>} rangeArray An array of monotonically\n *     increasing integer values, with at least one instance.\n * @param {boolean=} opt_delta If true, saves only delta from previous value.\n * @private\n */\ngoog.structs.InversionMap.prototype.storeInversion_ = function(\n    rangeArray, opt_delta) {\n  this.rangeArray = rangeArray;\n\n  for (var i = 1; i < rangeArray.length; i++) {\n    if (rangeArray[i] == null) {\n      rangeArray[i] = rangeArray[i - 1] + 1;\n    } else if (opt_delta) {\n      rangeArray[i] += rangeArray[i - 1];\n    }\n  }\n};\n\n\n/**\n * Splices a range -> value map into this inversion map.\n * @param {Array<number>} rangeArray An array of monotonically\n *     increasing integer values, with at least one instance.\n * @param {Array<T>} valueArray An array of corresponding values.\n *     Length must be the same as rangeArray.\n * @param {boolean=} opt_delta If true, saves only delta from previous value.\n */\ngoog.structs.InversionMap.prototype.spliceInversion = function(\n    rangeArray, valueArray, opt_delta) {\n  // By building another inversion map, we build the arrays that we need\n  // to splice in.\n  var otherMap =\n      new goog.structs.InversionMap(rangeArray, valueArray, opt_delta);\n\n  // Figure out where to splice those arrays.\n  var startRange = otherMap.rangeArray[0];\n  var endRange =\n      /** @type {number} */ (goog.array.peek(otherMap.rangeArray));\n  var startSplice = this.getLeast(startRange);\n  var endSplice = this.getLeast(endRange);\n\n  // The inversion map works by storing the start points of ranges...\n  if (startRange != this.rangeArray[startSplice]) {\n    // ...if we're splicing in a start point that isn't already here,\n    // then we need to insert it after the insertion point.\n    startSplice++;\n  }  // otherwise we overwrite the insertion point.\n\n  this.rangeArray = this.rangeArray.slice(0, startSplice)\n                        .concat(otherMap.rangeArray)\n                        .concat(this.rangeArray.slice(endSplice + 1));\n  this.values = this.values.slice(0, startSplice)\n                    .concat(otherMap.values)\n                    .concat(this.values.slice(endSplice + 1));\n};\n\n\n/**\n * Gets the value corresponding to a number from the inversion map.\n * @param {number} intKey The number for which value needs to be retrieved\n *     from inversion map.\n * @return {T|null} Value retrieved from inversion map; null if not found.\n */\ngoog.structs.InversionMap.prototype.at = function(intKey) {\n  var index = this.getLeast(intKey);\n  if (index < 0) {\n    return null;\n  }\n  return this.values[index];\n};\n\n\n/**\n * Gets the largest index such that rangeArray[index] <= intKey from the\n * inversion map.\n * @param {number} intKey The probe for which rangeArray is searched.\n * @return {number} Largest index such that rangeArray[index] <= intKey.\n * @protected\n */\ngoog.structs.InversionMap.prototype.getLeast = function(intKey) {\n  var arr = this.rangeArray;\n  var low = 0;\n  var high = arr.length;\n  while (high - low > 8) {\n    var mid = (high + low) >> 1;\n    if (arr[mid] <= intKey) {\n      low = mid;\n    } else {\n      high = mid;\n    }\n  }\n  for (; low < high; ++low) {\n    if (intKey < arr[low]) {\n      break;\n    }\n  }\n  return low - 1;\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Detect Grapheme Cluster Break in a pair of codepoints. Follows\n * Unicode 10 UAX#29. Tailoring for Virama \u00d7 Indic Letters is used.\n *\n * Reference: http://unicode.org/reports/tr29\n *\n */\n\ngoog.provide('goog.i18n.GraphemeBreak');\n\ngoog.require('goog.asserts');\ngoog.require('goog.i18n.uChar');\ngoog.require('goog.structs.InversionMap');\n\n/**\n * Enum for all Grapheme Cluster Break properties.\n * These enums directly corresponds to Grapheme_Cluster_Break property values\n * mentioned in http://unicode.org/reports/tr29 table 2. VIRAMA and\n * INDIC_LETTER are for the Virama \u00d7 Base tailoring mentioned in the notes.\n *\n * @protected @enum {number}\n */\ngoog.i18n.GraphemeBreak.property = {\n  OTHER: 0,\n  CONTROL: 1,\n  EXTEND: 2,\n  PREPEND: 3,\n  SPACING_MARK: 4,\n  INDIC_LETTER: 5,\n  VIRAMA: 6,\n  L: 7,\n  V: 8,\n  T: 9,\n  LV: 10,\n  LVT: 11,\n  CR: 12,\n  LF: 13,\n  REGIONAL_INDICATOR: 14,\n  ZWJ: 15,\n  E_BASE: 16,\n  GLUE_AFTER_ZWJ: 17,\n  E_MODIFIER: 18,\n  E_BASE_GAZ: 19\n};\n\n\n/**\n * Grapheme Cluster Break property values for all codepoints as inversion map.\n * Constructed lazily.\n *\n * @private {?goog.structs.InversionMap}\n */\ngoog.i18n.GraphemeBreak.inversions_ = null;\n\n\n/**\n * Indicates if a and b form a grapheme cluster.\n *\n * This implements the rules in:\n * http://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundary_Rules\n *\n * @param {number|string} a Code point or string with the first side of\n *     grapheme cluster.\n * @param {number|string} b Code point or string with the second side of\n *     grapheme cluster.\n * @param {boolean} extended If true, indicates extended grapheme cluster;\n *     If false, indicates legacy cluster.\n * @return {boolean} True if a & b do not form a cluster; False otherwise.\n * @private\n */\ngoog.i18n.GraphemeBreak.applyBreakRules_ = function(a, b, extended) {\n  var prop = goog.i18n.GraphemeBreak.property;\n\n  var aCode = goog.isString(a) ?\n      goog.i18n.GraphemeBreak.getCodePoint_(a, a.length - 1) :\n      a;\n  var bCode =\n      goog.isString(b) ? goog.i18n.GraphemeBreak.getCodePoint_(b, 0) : b;\n\n  var aProp = goog.i18n.GraphemeBreak.getBreakProp_(aCode);\n  var bProp = goog.i18n.GraphemeBreak.getBreakProp_(bCode);\n\n  var isString = goog.isString(a);\n\n  // GB3.\n  if (aProp === prop.CR && bProp === prop.LF) {\n    return false;\n  }\n\n  // GB4.\n  if (aProp === prop.CONTROL || aProp === prop.CR || aProp === prop.LF) {\n    return true;\n  }\n\n  // GB5.\n  if (bProp === prop.CONTROL || bProp === prop.CR || bProp === prop.LF) {\n    return true;\n  }\n\n  // GB6.\n  if (aProp === prop.L &&\n      (bProp === prop.L || bProp === prop.V || bProp === prop.LV ||\n       bProp === prop.LVT)) {\n    return false;\n  }\n\n  // GB7.\n  if ((aProp === prop.LV || aProp === prop.V) &&\n      (bProp === prop.V || bProp === prop.T)) {\n    return false;\n  }\n\n  // GB8.\n  if ((aProp === prop.LVT || aProp === prop.T) && bProp === prop.T) {\n    return false;\n  }\n\n  // GB9.\n  if (bProp === prop.EXTEND || bProp === prop.ZWJ || bProp === prop.VIRAMA) {\n    return false;\n  }\n\n  // GB9a, GB9b.\n  if (extended && (aProp === prop.PREPEND || bProp === prop.SPACING_MARK)) {\n    return false;\n  }\n\n  // Tailorings for basic aksara support.\n  if (extended && aProp === prop.VIRAMA && bProp === prop.INDIC_LETTER) {\n    return false;\n  }\n\n  var aStr, index, codePoint, codePointProp;\n\n  // GB10.\n  if (isString) {\n    if (bProp === prop.E_MODIFIER) {\n      // If using new API, consume the string's code points starting from the\n      // end and test the left side of: (E_Base | EBG) Extend* \u00d7 E_Modifier.\n      aStr = /** @type {string} */ (a);\n      index = aStr.length - 1;\n      codePoint = aCode;\n      codePointProp = aProp;\n      while (index > 0 && codePointProp === prop.EXTEND) {\n        index -= goog.i18n.uChar.charCount(codePoint);\n        codePoint = goog.i18n.GraphemeBreak.getCodePoint_(aStr, index);\n        codePointProp = goog.i18n.GraphemeBreak.getBreakProp_(codePoint);\n      }\n      if (codePointProp === prop.E_BASE || codePointProp === prop.E_BASE_GAZ) {\n        return false;\n      }\n    }\n  } else {\n    // If using legacy API, return best effort by testing:\n    // (E_Base | EBG) \u00d7 E_Modifier.\n    if ((aProp === prop.E_BASE || aProp === prop.E_BASE_GAZ) &&\n        bProp === prop.E_MODIFIER) {\n      return false;\n    }\n  }\n\n  // GB11.\n  if (aProp === prop.ZWJ &&\n      (bProp === prop.GLUE_AFTER_ZWJ || bProp === prop.E_BASE_GAZ)) {\n    return false;\n  }\n\n  // GB12, GB13.\n  if (isString) {\n    if (bProp === prop.REGIONAL_INDICATOR) {\n      // If using new API, consume the string's code points starting from the\n      // end and test the left side of these rules:\n      // - sot (RI RI)* RI \u00d7 RI\n      // - [^RI] (RI RI)* RI \u00d7 RI.\n      var numberOfRi = 0;\n      aStr = /** @type {string} */ (a);\n      index = aStr.length - 1;\n      codePoint = aCode;\n      codePointProp = aProp;\n      while (index > 0 && codePointProp === prop.REGIONAL_INDICATOR) {\n        numberOfRi++;\n        index -= goog.i18n.uChar.charCount(codePoint);\n        codePoint = goog.i18n.GraphemeBreak.getCodePoint_(aStr, index);\n        codePointProp = goog.i18n.GraphemeBreak.getBreakProp_(codePoint);\n      }\n      if (codePointProp === prop.REGIONAL_INDICATOR) {\n        numberOfRi++;\n      }\n      if (numberOfRi % 2 === 1) {\n        return false;\n      }\n    }\n  } else {\n    // If using legacy API, return best effort by testing: RI \u00d7 RI.\n    if (aProp === prop.REGIONAL_INDICATOR &&\n        bProp === prop.REGIONAL_INDICATOR) {\n      return false;\n    }\n  }\n\n  // GB999.\n  return true;\n};\n\n\n/**\n * Method to return property enum value of the code point. If it is Hangul LV or\n * LVT, then it is computed; for the rest it is picked from the inversion map.\n *\n * @param {number} codePoint The code point value of the character.\n * @return {number} Property enum value of code point.\n * @private\n */\ngoog.i18n.GraphemeBreak.getBreakProp_ = function(codePoint) {\n  if (0xAC00 <= codePoint && codePoint <= 0xD7A3) {\n    var prop = goog.i18n.GraphemeBreak.property;\n    if (codePoint % 0x1C === 0x10) {\n      return prop.LV;\n    }\n    return prop.LVT;\n  } else {\n    if (!goog.i18n.GraphemeBreak.inversions_) {\n      goog.i18n.GraphemeBreak.inversions_ = new goog.structs.InversionMap(\n          [\n            0,      10,   1,     2,   1,    18,   95,    33,    13,  1,\n            594,    112,  275,   7,   263,  45,   1,     1,     1,   2,\n            1,      2,    1,     1,   56,   6,    10,    11,    1,   1,\n            46,     21,   16,    1,   101,  7,    1,     1,     6,   2,\n            2,      1,    4,     33,  1,    1,    1,     30,    27,  91,\n            11,     58,   9,     34,  4,    1,    9,     1,     3,   1,\n            5,      43,   3,     120, 14,   1,    32,    1,     17,  37,\n            1,      1,    1,     1,   3,    8,    4,     1,     2,   1,\n            7,      8,    2,     2,   21,   7,    1,     1,     2,   17,\n            39,     1,    1,     1,   2,    6,    6,     1,     9,   5,\n            4,      2,    2,     12,  2,    15,   2,     1,     17,  39,\n            2,      3,    12,    4,   8,    6,    17,    2,     3,   14,\n            1,      17,   39,    1,   1,    3,    8,     4,     1,   20,\n            2,      29,   1,     2,   17,   39,   1,     1,     2,   1,\n            6,      6,    9,     6,   4,    2,    2,     13,    1,   16,\n            1,      18,   41,    1,   1,    1,    12,    1,     9,   1,\n            40,     1,    3,     17,  31,   1,    5,     4,     3,   5,\n            7,      8,    3,     2,   8,    2,    29,    1,     2,   17,\n            39,     1,    1,     1,   1,    2,    1,     3,     1,   5,\n            1,      8,    9,     1,   3,    2,    29,    1,     2,   17,\n            38,     3,    1,     2,   5,    7,    1,     1,     8,   1,\n            10,     2,    30,    2,   22,   48,   5,     1,     2,   6,\n            7,      1,    18,    2,   13,   46,   2,     1,     1,   1,\n            6,      1,    12,    8,   50,   46,   2,     1,     1,   1,\n            9,      11,   6,     14,  2,    58,   2,     27,    1,   1,\n            1,      1,    1,     4,   2,    49,   14,    1,     4,   1,\n            1,      2,    5,     48,  9,    1,    57,    33,    12,  4,\n            1,      6,    1,     2,   2,    2,    1,     16,    2,   4,\n            2,      2,    4,     3,   1,    3,    2,     7,     3,   4,\n            13,     1,    1,     1,   2,    6,    1,     1,     14,  1,\n            98,     96,   72,    88,  349,  3,    931,   15,    2,   1,\n            14,     15,   2,     1,   14,   15,   2,     15,    15,  14,\n            35,     17,   2,     1,   7,    8,    1,     2,     9,   1,\n            1,      9,    1,     45,  3,    1,    118,   2,     34,  1,\n            87,     28,   3,     3,   4,    2,    9,     1,     6,   3,\n            20,     19,   29,    44,  84,   23,   2,     2,     1,   4,\n            45,     6,    2,     1,   1,    1,    8,     1,     1,   1,\n            2,      8,    6,     13,  48,   84,   1,     14,    33,  1,\n            1,      5,    1,     1,   5,    1,    1,     1,     7,   31,\n            9,      12,   2,     1,   7,    23,   1,     4,     2,   2,\n            2,      2,    2,     11,  3,    2,    36,    2,     1,   1,\n            2,      3,    1,     1,   3,    2,    12,    36,    8,   8,\n            2,      2,    21,    3,   128,  3,    1,     13,    1,   7,\n            4,      1,    4,     2,   1,    3,    2,     198,   64,  523,\n            1,      1,    1,     2,   24,   7,    49,    16,    96,  33,\n            1324,   1,    34,    1,   1,    1,    82,    2,     98,  1,\n            14,     1,    1,     4,   86,   1,    1418,  3,     141, 1,\n            96,     32,   554,   6,   105,  2,    30164, 4,     1,   10,\n            32,     2,    80,    2,   272,  1,    3,     1,     4,   1,\n            23,     2,    2,     1,   24,   30,   4,     4,     3,   8,\n            1,      1,    13,    2,   16,   34,   16,    1,     1,   26,\n            18,     24,   24,    4,   8,    2,    23,    11,    1,   1,\n            12,     32,   3,     1,   5,    3,    3,     36,    1,   2,\n            4,      2,    1,     3,   1,    36,   1,     32,    35,  6,\n            2,      2,    2,     2,   12,   1,    8,     1,     1,   18,\n            16,     1,    3,     6,   1,    1,    1,     3,     48,  1,\n            1,      3,    2,     2,   5,    2,    1,     1,     32,  9,\n            1,      2,    2,     5,   1,    1,    201,   14,    2,   1,\n            1,      9,    8,     2,   1,    2,    1,     2,     1,   1,\n            1,      18,   11184, 27,  49,   1028, 1024,  6942,  1,   737,\n            16,     16,   16,    207, 1,    158,  2,     89,    3,   513,\n            1,      226,  1,     149, 5,    1670, 15,    40,    7,   1,\n            165,    2,    1305,  1,   1,    1,    53,    14,    1,   56,\n            1,      2,    1,     45,  3,    4,    2,     1,     1,   2,\n            1,      66,   3,     36,  5,    1,    6,     2,     62,  1,\n            12,     2,    1,     48,  3,    9,    1,     1,     1,   2,\n            6,      3,    95,    3,   3,    2,    1,     1,     2,   6,\n            1,      160,  1,     3,   7,    1,    21,    2,     2,   56,\n            1,      1,    1,     1,   1,    12,   1,     9,     1,   10,\n            4,      15,   192,   3,   8,    2,    1,     2,     1,   1,\n            105,    1,    2,     6,   1,    1,    2,     1,     1,   2,\n            1,      1,    1,     235, 1,    2,    6,     4,     2,   1,\n            1,      1,    27,    2,   82,   3,    8,     2,     1,   1,\n            1,      1,    106,   1,   1,    1,    2,     6,     1,   1,\n            101,    3,    2,     4,   1,    4,    1,     1283,  1,   14,\n            1,      1,    82,    23,  1,    7,    1,     2,     1,   2,\n            20025,  5,    59,    7,   1050, 62,   4,     19722, 2,   1,\n            4,      5313, 1,     1,   3,    3,    1,     5,     8,   8,\n            2,      7,    30,    4,   148,  3,    1979,  55,    4,   50,\n            8,      1,    14,    1,   22,   1424, 2213,  7,     109, 7,\n            2203,   26,   264,   1,   53,   1,    52,    1,     17,  1,\n            13,     1,    16,    1,   3,    1,    25,    3,     2,   1,\n            2,      3,    30,    1,   1,    1,    13,    5,     66,  2,\n            2,      11,   21,    4,   4,    1,    1,     9,     3,   1,\n            4,      3,    1,     3,   3,    1,    30,    1,     16,  2,\n            106,    1,    4,     1,   71,   2,    4,     1,     21,  1,\n            4,      2,    81,    1,   92,   3,    3,     5,     48,  1,\n            17,     1,    16,    1,   16,   3,    9,     1,     11,  1,\n            587,    5,    1,     1,   7,    1,    9,     10,    3,   2,\n            788162, 31\n          ],\n          [\n            1,  13, 1,  12, 1,  0, 1,  0, 1,  0,  2,  0, 2,  0, 2,  0,  2,  0,\n            2,  0,  2,  0,  2,  0, 3,  0, 2,  0,  1,  0, 2,  0, 2,  0,  2,  3,\n            0,  2,  0,  2,  0,  2, 0,  3, 0,  2,  0,  2, 0,  2, 0,  2,  0,  2,\n            0,  2,  0,  2,  0,  2, 0,  2, 0,  2,  3,  2, 4,  0, 5,  2,  4,  2,\n            0,  4,  2,  4,  6,  4, 0,  2, 5,  0,  2,  0, 5,  0, 2,  4,  0,  5,\n            2,  0,  2,  4,  2,  4, 6,  0, 2,  5,  0,  2, 0,  5, 0,  2,  4,  0,\n            5,  2,  4,  2,  6,  2, 5,  0, 2,  0,  2,  4, 0,  5, 2,  0,  4,  2,\n            4,  6,  0,  2,  0,  2, 4,  0, 5,  2,  0,  2, 4,  2, 4,  6,  2,  5,\n            0,  2,  0,  5,  0,  2, 0,  5, 2,  4,  2,  4, 6,  0, 2,  0,  2,  4,\n            0,  5,  0,  5,  0,  2, 4,  2, 6,  2,  5,  0, 2,  0, 2,  4,  0,  5,\n            2,  0,  4,  2,  4,  2, 4,  2, 4,  2,  6,  2, 5,  0, 2,  0,  2,  4,\n            0,  5,  0,  2,  4,  2, 4,  6, 3,  0,  2,  0, 2,  0, 4,  0,  5,  6,\n            2,  4,  2,  4,  2,  0, 4,  0, 5,  0,  2,  0, 4,  2, 6,  0,  2,  0,\n            5,  0,  2,  0,  4,  2, 0,  2, 0,  5,  0,  2, 0,  2, 0,  2,  0,  2,\n            0,  4,  5,  2,  4,  2, 6,  0, 2,  0,  2,  0, 2,  0, 5,  0,  2,  4,\n            2,  0,  6,  4,  2,  5, 0,  5, 0,  4,  2,  5, 2,  5, 0,  5,  0,  5,\n            2,  5,  2,  0,  4,  2, 0,  2, 5,  0,  2,  0, 7,  8, 9,  0,  2,  0,\n            5,  2,  6,  0,  5,  2, 6,  0, 5,  2,  0,  5, 2,  5, 0,  2,  4,  2,\n            4,  2,  4,  2,  6,  2, 0,  2, 0,  2,  1,  0, 2,  0, 2,  0,  5,  0,\n            2,  4,  2,  4,  2,  4, 2,  0, 5,  0,  5,  0, 5,  2, 4,  2,  0,  5,\n            0,  5,  4,  2,  4,  2, 6,  0, 2,  0,  2,  4, 2,  0, 2,  4,  0,  5,\n            2,  4,  2,  4,  2,  4, 2,  4, 6,  5,  0,  2, 0,  2, 4,  0,  5,  4,\n            2,  4,  2,  6,  2,  5, 0,  5, 0,  5,  0,  2, 4,  2, 4,  2,  4,  2,\n            6,  0,  5,  4,  2,  4, 2,  0, 5,  0,  2,  0, 2,  4, 2,  0,  2,  0,\n            4,  2,  0,  2,  0,  2, 0,  1, 2,  15, 1,  0, 1,  0, 1,  0,  2,  0,\n            16, 0,  17, 0,  17, 0, 17, 0, 16, 0,  17, 0, 16, 0, 17, 0,  2,  0,\n            6,  0,  2,  0,  2,  0, 2,  0, 2,  0,  2,  0, 2,  0, 2,  0,  2,  0,\n            6,  5,  2,  5,  4,  2, 4,  0, 5,  0,  5,  0, 5,  0, 5,  0,  4,  0,\n            5,  4,  6,  2,  0,  2, 0,  5, 0,  2,  0,  5, 2,  4, 6,  0,  7,  2,\n            4,  0,  5,  0,  5,  2, 4,  2, 4,  2,  4,  6, 0,  2, 0,  5,  2,  4,\n            2,  4,  2,  0,  2,  0, 2,  4, 0,  5,  0,  5, 0,  5, 0,  2,  0,  5,\n            2,  0,  2,  0,  2,  0, 2,  0, 2,  0,  5,  4, 2,  4, 0,  4,  6,  0,\n            5,  0,  5,  0,  5,  0, 4,  2, 4,  2,  4,  0, 4,  6, 0,  11, 8,  9,\n            0,  2,  0,  2,  0,  2, 0,  2, 0,  1,  0,  2, 0,  1, 0,  2,  0,  2,\n            0,  2,  0,  2,  0,  2, 6,  0, 2,  0,  4,  2, 4,  0, 2,  6,  0,  6,\n            2,  4,  0,  4,  2,  4, 6,  2, 0,  3,  0,  2, 0,  2, 4,  2,  6,  0,\n            2,  0,  2,  4,  0,  4, 2,  4, 6,  0,  3,  0, 2,  0, 4,  2,  4,  2,\n            6,  2,  0,  2,  0,  2, 4,  2, 6,  0,  2,  4, 0,  2, 0,  2,  4,  2,\n            4,  6,  0,  2,  0,  4, 2,  0, 4,  2,  4,  6, 2,  4, 2,  0,  2,  4,\n            2,  4,  2,  4,  2,  4, 2,  4, 6,  2,  0,  2, 4,  2, 4,  2,  4,  6,\n            2,  0,  2,  0,  4,  2, 4,  2, 4,  6,  2,  0, 2,  4, 2,  4,  2,  6,\n            2,  0,  2,  4,  2,  4, 2,  6, 0,  4,  2,  4, 6,  0, 2,  4,  2,  4,\n            2,  4,  2,  0,  2,  0, 2,  0, 4,  2,  0,  2, 0,  1, 0,  2,  4,  2,\n            0,  4,  2,  1,  2,  0, 2,  0, 2,  0,  2,  0, 2,  0, 2,  0,  2,  0,\n            2,  0,  2,  0,  2,  0, 2,  0, 14, 0,  17, 0, 17, 0, 17, 0,  16, 0,\n            17, 0,  17, 0,  17, 0, 16, 0, 16, 0,  16, 0, 17, 0, 17, 0,  18, 0,\n            16, 0,  16, 0,  19, 0, 16, 0, 16, 0,  16, 0, 16, 0, 16, 0,  17, 0,\n            16, 0,  17, 0,  17, 0, 17, 0, 16, 0,  16, 0, 16, 0, 16, 0,  17, 0,\n            16, 0,  16, 0,  17, 0, 17, 0, 16, 0,  16, 0, 16, 0, 16, 0,  16, 0,\n            16, 0,  16, 0,  16, 0, 16, 0, 1,  2\n          ],\n          true);\n    }\n    return /** @type {number} */ (\n        goog.i18n.GraphemeBreak.inversions_.at(codePoint));\n  }\n};\n\n/**\n * Extracts a code point from a string at the specified index.\n *\n * @param {string} str\n * @param {number} index\n * @return {number} Extracted code point.\n * @private\n */\ngoog.i18n.GraphemeBreak.getCodePoint_ = function(str, index) {\n  var codePoint = goog.i18n.uChar.getCodePointAround(str, index);\n  return (codePoint < 0) ? -codePoint : codePoint;\n};\n\n/**\n * Indicates if there is a grapheme cluster boundary between a and b.\n *\n * Legacy function. Does not cover cases where a sequence of code points is\n * required in order to decide if there is a grapheme cluster boundary, such as\n * emoji modifier sequences and emoji flag sequences. To cover all cases please\n * use `hasGraphemeBreakStrings`.\n *\n * There are two kinds of grapheme clusters: 1) Legacy 2) Extended. This method\n * is to check for both using a boolean flag to switch between them. If no flag\n * is provided rules for the extended clusters will be used by default.\n *\n * @param {number} a The code point value of the first character.\n * @param {number} b The code point value of the second character.\n * @param {boolean=} opt_extended If true, indicates extended grapheme cluster;\n *     If false, indicates legacy cluster. Default value is true.\n * @return {boolean} True if there is a grapheme cluster boundary between\n *     a and b; False otherwise.\n */\ngoog.i18n.GraphemeBreak.hasGraphemeBreak = function(a, b, opt_extended) {\n  return goog.i18n.GraphemeBreak.applyBreakRules_(a, b, opt_extended !== false);\n};\n\n/**\n * Indicates if there is a grapheme cluster boundary between a and b.\n *\n * There are two kinds of grapheme clusters: 1) Legacy 2) Extended. This method\n * is to check for both using a boolean flag to switch between them. If no flag\n * is provided rules for the extended clusters will be used by default.\n *\n * @param {string} a String with the first sequence of characters.\n * @param {string} b String with the second sequence of characters.\n * @param {boolean=} opt_extended If true, indicates extended grapheme cluster;\n *     If false, indicates legacy cluster. Default value is true.\n * @return {boolean} True if there is a grapheme cluster boundary between\n *     a and b; False otherwise.\n */\ngoog.i18n.GraphemeBreak.hasGraphemeBreakStrings = function(a, b, opt_extended) {\n  goog.asserts.assert(goog.isDef(a), 'First string should be defined.');\n  goog.asserts.assert(goog.isDef(b), 'Second string should be defined.');\n\n  // Break if any of the strings is empty.\n  if (a.length === 0 || b.length === 0) {\n    return true;\n  }\n\n  return goog.i18n.GraphemeBreak.applyBreakRules_(a, b, opt_extended !== false);\n};\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Provides utility functions for formatting strings, numbers etc.\n *\n */\n\ngoog.provide('goog.format');\n\ngoog.require('goog.i18n.GraphemeBreak');\ngoog.require('goog.string');\ngoog.require('goog.userAgent');\n\n\n/**\n * Formats a number of bytes in human readable form.\n * 54, 450K, 1.3M, 5G etc.\n * @param {number} bytes The number of bytes to show.\n * @param {number=} opt_decimals The number of decimals to use.  Defaults to 2.\n * @return {string} The human readable form of the byte size.\n */\ngoog.format.fileSize = function(bytes, opt_decimals) {\n  return goog.format.numBytesToString(bytes, opt_decimals, false);\n};\n\n\n/**\n * Checks whether string value containing scaling units (K, M, G, T, P, m,\n * u, n) can be converted to a number.\n *\n * Where there is a decimal, there must be a digit to the left of the\n * decimal point.\n *\n * Negative numbers are valid.\n *\n * Examples:\n *   0, 1, 1.0, 10.4K, 2.3M, -0.3P, 1.2m\n *\n * @param {string} val String value to check.\n * @return {boolean} True if string could be converted to a numeric value.\n */\ngoog.format.isConvertableScaledNumber = function(val) {\n  return goog.format.SCALED_NUMERIC_RE_.test(val);\n};\n\n\n/**\n * Converts a string to numeric value, taking into account the units.\n * If string ends in 'B', use binary conversion.\n * @param {string} stringValue String to be converted to numeric value.\n * @return {number} Numeric value for string.\n */\ngoog.format.stringToNumericValue = function(stringValue) {\n  if (goog.string.endsWith(stringValue, 'B')) {\n    return goog.format.stringToNumericValue_(\n        stringValue, goog.format.NUMERIC_SCALES_BINARY_);\n  }\n  return goog.format.stringToNumericValue_(\n      stringValue, goog.format.NUMERIC_SCALES_SI_);\n};\n\n\n/**\n * Converts a string to number of bytes, taking into account the units.\n * Binary conversion.\n * @param {string} stringValue String to be converted to numeric value.\n * @return {number} Numeric value for string.\n */\ngoog.format.stringToNumBytes = function(stringValue) {\n  return goog.format.stringToNumericValue_(\n      stringValue, goog.format.NUMERIC_SCALES_BINARY_);\n};\n\n\n/**\n * Converts a numeric value to string representation. SI conversion.\n * @param {number} val Value to be converted.\n * @param {number=} opt_decimals The number of decimals to use.  Defaults to 2.\n * @return {string} String representation of number.\n */\ngoog.format.numericValueToString = function(val, opt_decimals) {\n  return goog.format.numericValueToString_(\n      val, goog.format.NUMERIC_SCALES_SI_, opt_decimals);\n};\n\n\n/**\n * Converts number of bytes to string representation. Binary conversion.\n * Default is to return the additional 'B' suffix only for scales greater than\n * 1K, e.g. '10.5KB' to minimize confusion with counts that are scaled by powers\n * of 1000. Otherwise, suffix is empty string.\n * @param {number} val Value to be converted.\n * @param {number=} opt_decimals The number of decimals to use.  Defaults to 2.\n * @param {boolean=} opt_suffix If true, include trailing 'B' in returned\n *     string.  Default is true.\n * @param {boolean=} opt_useSeparator If true, number and scale will be\n *     separated by a no break space. Default is false.\n * @return {string} String representation of number of bytes.\n */\ngoog.format.numBytesToString = function(\n    val, opt_decimals, opt_suffix, opt_useSeparator) {\n  var suffix = '';\n  if (!goog.isDef(opt_suffix) || opt_suffix) {\n    suffix = 'B';\n  }\n  return goog.format.numericValueToString_(\n      val, goog.format.NUMERIC_SCALES_BINARY_, opt_decimals, suffix,\n      opt_useSeparator);\n};\n\n\n/**\n * Converts a string to numeric value, taking into account the units.\n * @param {string} stringValue String to be converted to numeric value.\n * @param {Object} conversion Dictionary of conversion scales.\n * @return {number} Numeric value for string.  If it cannot be converted,\n *    returns NaN.\n * @private\n */\ngoog.format.stringToNumericValue_ = function(stringValue, conversion) {\n  var match = stringValue.match(goog.format.SCALED_NUMERIC_RE_);\n  if (!match) {\n    return NaN;\n  }\n  var val = Number(match[1]) * conversion[match[2]];\n  return val;\n};\n\n\n/**\n * Converts a numeric value to string, using specified conversion\n * scales.\n * @param {number} val Value to be converted.\n * @param {Object} conversion Dictionary of scaling factors.\n * @param {number=} opt_decimals The number of decimals to use.  Default is 2.\n * @param {string=} opt_suffix Optional suffix to append.\n * @param {boolean=} opt_useSeparator If true, number and scale will be\n *     separated by a space. Default is false.\n * @return {string} The human readable form of the byte size.\n * @private\n */\ngoog.format.numericValueToString_ = function(\n    val, conversion, opt_decimals, opt_suffix, opt_useSeparator) {\n  var prefixes = goog.format.NUMERIC_SCALE_PREFIXES_;\n  var orig_val = val;\n  var symbol = '';\n  var separator = '';\n  var scale = 1;\n  if (val < 0) {\n    val = -val;\n  }\n  for (var i = 0; i < prefixes.length; i++) {\n    var unit = prefixes[i];\n    scale = conversion[unit];\n    if (val >= scale || (scale <= 1 && val > 0.1 * scale)) {\n      // Treat values less than 1 differently, allowing 0.5 to be \"0.5\" rather\n      // than \"500m\"\n      symbol = unit;\n      break;\n    }\n  }\n  if (!symbol) {\n    scale = 1;\n  } else {\n    if (opt_suffix) {\n      symbol += opt_suffix;\n    }\n    if (opt_useSeparator) {\n      separator = ' ';\n    }\n  }\n  var ex = Math.pow(10, goog.isDef(opt_decimals) ? opt_decimals : 2);\n  return Math.round(orig_val / scale * ex) / ex + separator + symbol;\n};\n\n\n/**\n * Regular expression for detecting scaling units, such as K, M, G, etc. for\n * converting a string representation to a numeric value.\n *\n * Also allow 'k' to be aliased to 'K'.  These could be used for SI (powers\n * of 1000) or Binary (powers of 1024) conversions.\n *\n * Also allow final 'B' to be interpreted as byte-count, implicitly triggering\n * binary conversion (e.g., '10.2MB').\n *\n * @type {RegExp}\n * @private\n */\ngoog.format.SCALED_NUMERIC_RE_ =\n    /^([-]?\\d+\\.?\\d*)([K,M,G,T,P,E,Z,Y,k,m,u,n]?)[B]?$/;\n\n\n/**\n * Ordered list of scaling prefixes in decreasing order.\n * @private {Array<string>}\n */\ngoog.format.NUMERIC_SCALE_PREFIXES_ =\n    ['Y', 'Z', 'E', 'P', 'T', 'G', 'M', 'K', '', 'm', 'u', 'n'];\n\n\n/**\n * Scaling factors for conversion of numeric value to string.  SI conversion.\n * @type {Object}\n * @private\n */\ngoog.format.NUMERIC_SCALES_SI_ = {\n  '': 1,\n  'n': 1e-9,\n  'u': 1e-6,\n  'm': 1e-3,\n  'k': 1e3,\n  'K': 1e3,\n  'M': 1e6,\n  'G': 1e9,\n  'T': 1e12,\n  'P': 1e15,\n  'E': 1e18,\n  'Z': 1e21,\n  'Y': 1e24\n};\n\n\n/**\n * Scaling factors for conversion of numeric value to string.  Binary\n * conversion.\n * @type {Object}\n * @private\n */\ngoog.format.NUMERIC_SCALES_BINARY_ = {\n  '': 1,\n  'n': Math.pow(1024, -3),\n  'u': Math.pow(1024, -2),\n  'm': 1.0 / 1024,\n  'k': 1024,\n  'K': 1024,\n  'M': Math.pow(1024, 2),\n  'G': Math.pow(1024, 3),\n  'T': Math.pow(1024, 4),\n  'P': Math.pow(1024, 5),\n  'E': Math.pow(1024, 6),\n  'Z': Math.pow(1024, 7),\n  'Y': Math.pow(1024, 8)\n};\n\n\n/**\n * First Unicode code point that has the Mark property.\n * @type {number}\n * @private\n */\ngoog.format.FIRST_GRAPHEME_EXTEND_ = 0x300;\n\n\n/**\n * Returns true if and only if given character should be treated as a breaking\n * space. All ASCII control characters, the main Unicode range of spacing\n * characters (U+2000 to U+200B inclusive except for U+2007), and several other\n * Unicode space characters are treated as breaking spaces.\n * @param {number} charCode The character code under consideration.\n * @return {boolean} True if the character is a breaking space.\n * @private\n */\ngoog.format.isTreatedAsBreakingSpace_ = function(charCode) {\n  return (charCode <= goog.format.WbrToken_.SPACE) ||\n      (charCode >= 0x1000 &&\n       ((charCode >= 0x2000 && charCode <= 0x2006) ||\n        (charCode >= 0x2008 && charCode <= 0x200B) || charCode == 0x1680 ||\n        charCode == 0x180E || charCode == 0x2028 || charCode == 0x2029 ||\n        charCode == 0x205f || charCode == 0x3000));\n};\n\n\n/**\n * Returns true if and only if given character is an invisible formatting\n * character.\n * @param {number} charCode The character code under consideration.\n * @return {boolean} True if the character is an invisible formatting character.\n * @private\n */\ngoog.format.isInvisibleFormattingCharacter_ = function(charCode) {\n  // See: http://unicode.org/charts/PDF/U2000.pdf\n  return (charCode >= 0x200C && charCode <= 0x200F) ||\n      (charCode >= 0x202A && charCode <= 0x202E);\n};\n\n\n/**\n * Inserts word breaks into an HTML string at a given interval.  The counter is\n * reset if a space or a character which behaves like a space is encountered,\n * but it isn't incremented if an invisible formatting character is encountered.\n * WBRs aren't inserted into HTML tags or entities.  Entities count towards the\n * character count, HTML tags do not.\n *\n * With common strings aliased, objects allocations are constant based on the\n * length of the string: N + 3. This guarantee does not hold if the string\n * contains an element >= U+0300 and hasGraphemeBreak is non-trivial.\n *\n * @param {string} str HTML to insert word breaks into.\n * @param {function(number, number, boolean): boolean} hasGraphemeBreak A\n *     function determining if there is a grapheme break between two characters,\n *     in the same signature as goog.i18n.GraphemeBreak.hasGraphemeBreak.\n * @param {number=} opt_maxlen Maximum length after which to ensure\n *     there is a break.  Default is 10 characters.\n * @return {string} The string including word breaks.\n * @private\n */\ngoog.format.insertWordBreaksGeneric_ = function(\n    str, hasGraphemeBreak, opt_maxlen) {\n  var maxlen = opt_maxlen || 10;\n  if (maxlen > str.length) return str;\n\n  var rv = [];\n  var n = 0;  // The length of the current token\n\n  // This will contain the ampersand or less-than character if one of the\n  // two has been seen; otherwise, the value is zero.\n  var nestingCharCode = 0;\n\n  // First character position from input string that has not been outputted.\n  var lastDumpPosition = 0;\n\n  var charCode = 0;\n  for (var i = 0; i < str.length; i++) {\n    // Using charCodeAt versus charAt avoids allocating new string objects.\n    var lastCharCode = charCode;\n    charCode = str.charCodeAt(i);\n\n    // Don't add a WBR before characters that might be grapheme extending.\n    var isPotentiallyGraphemeExtending =\n        charCode >= goog.format.FIRST_GRAPHEME_EXTEND_ &&\n        !hasGraphemeBreak(lastCharCode, charCode, true);\n\n    // Don't add a WBR at the end of a word. For the purposes of determining\n    // work breaks, all ASCII control characters and some commonly encountered\n    // Unicode spacing characters are treated as breaking spaces.\n    if (n >= maxlen && !goog.format.isTreatedAsBreakingSpace_(charCode) &&\n        !isPotentiallyGraphemeExtending) {\n      // Flush everything seen so far, and append a word break.\n      rv.push(str.substring(lastDumpPosition, i), goog.format.WORD_BREAK_HTML);\n      lastDumpPosition = i;\n      n = 0;\n    }\n\n    if (!nestingCharCode) {\n      // Not currently within an HTML tag or entity\n\n      if (charCode == goog.format.WbrToken_.LT ||\n          charCode == goog.format.WbrToken_.AMP) {\n        // Entering an HTML Entity '&' or open tag '<'\n        nestingCharCode = charCode;\n      } else if (goog.format.isTreatedAsBreakingSpace_(charCode)) {\n        // A space or control character -- reset the token length\n        n = 0;\n      } else if (!goog.format.isInvisibleFormattingCharacter_(charCode)) {\n        // A normal flow character - increment.  For grapheme extending\n        // characters, this is not *technically* a new character.  However,\n        // since the grapheme break detector might be overly conservative,\n        // we have to continue incrementing, or else we won't even be able\n        // to add breaks when we get to things like punctuation.  For the\n        // case where we have a full grapheme break detector, it is okay if\n        // we occasionally break slightly early.\n        n++;\n      }\n    } else if (\n        charCode == goog.format.WbrToken_.GT &&\n        nestingCharCode == goog.format.WbrToken_.LT) {\n      // Leaving an HTML tag, treat the tag as zero-length\n      nestingCharCode = 0;\n    } else if (\n        charCode == goog.format.WbrToken_.SEMI_COLON &&\n        nestingCharCode == goog.format.WbrToken_.AMP) {\n      // Leaving an HTML entity, treat it as length one\n      nestingCharCode = 0;\n      n++;\n    }\n  }\n\n  // Take care of anything we haven't flushed so far.\n  rv.push(str.substr(lastDumpPosition));\n\n  return rv.join('');\n};\n\n\n/**\n * Inserts word breaks into an HTML string at a given interval.\n *\n * This method is as aggressive as possible, using a full table of Unicode\n * characters where it is legal to insert word breaks; however, this table\n * comes at a 2.5k pre-gzip (~1k post-gzip) size cost.  Consider using\n * insertWordBreaksBasic to minimize the size impact.\n *\n * @param {string} str HTML to insert word breaks into.\n * @param {number=} opt_maxlen Maximum length after which to ensure there is a\n *     break.  Default is 10 characters.\n * @return {string} The string including word breaks.\n * @deprecated Prefer wrapping with CSS word-wrap: break-word.\n */\ngoog.format.insertWordBreaks = function(str, opt_maxlen) {\n  return goog.format.insertWordBreaksGeneric_(\n      str, goog.i18n.GraphemeBreak.hasGraphemeBreak, opt_maxlen);\n};\n\n\n/**\n * Determines conservatively if a character has a Grapheme break.\n *\n * Conforms to a similar signature as goog.i18n.GraphemeBreak, but is overly\n * conservative, returning true only for characters in common scripts that\n * are simple to account for.\n *\n * @param {number} lastCharCode The previous character code.  Ignored.\n * @param {number} charCode The character code under consideration.  It must be\n *     at least \\u0300 as a precondition -- this case is covered by\n *     insertWordBreaksGeneric_.\n * @param {boolean=} opt_extended Ignored, to conform with the interface.\n * @return {boolean} Whether it is one of the recognized subsets of characters\n *     with a grapheme break.\n * @private\n */\ngoog.format.conservativelyHasGraphemeBreak_ = function(\n    lastCharCode, charCode, opt_extended) {\n  // Return false for everything except the most common Cyrillic characters.\n  // Don't worry about Latin characters, because insertWordBreaksGeneric_\n  // itself already handles those.\n  // TODO(gboyer): Also account for Greek, Armenian, and Georgian if it is\n  // simple to do so.\n  return charCode >= 0x400 && charCode < 0x523;\n};\n\n\n// TODO(gboyer): Consider using a compile-time flag to switch implementations\n// rather than relying on the developers to toggle implementations.\n/**\n * Inserts word breaks into an HTML string at a given interval.\n *\n * This method is less aggressive than insertWordBreaks, only inserting\n * breaks next to punctuation and between Latin or Cyrillic characters.\n * However, this is good enough for the common case of URLs.  It also\n * works for all Latin and Cyrillic languages, plus CJK has no need for word\n * breaks.  When this method is used, goog.i18n.GraphemeBreak may be dead\n * code eliminated.\n *\n * @param {string} str HTML to insert word breaks into.\n * @param {number=} opt_maxlen Maximum length after which to ensure there is a\n *     break.  Default is 10 characters.\n * @return {string} The string including word breaks.\n * @deprecated Prefer wrapping with CSS word-wrap: break-word.\n */\ngoog.format.insertWordBreaksBasic = function(str, opt_maxlen) {\n  return goog.format.insertWordBreaksGeneric_(\n      str, goog.format.conservativelyHasGraphemeBreak_, opt_maxlen);\n};\n\n\n/**\n * True iff the current userAgent is IE8 or above.\n * @type {boolean}\n * @private\n */\ngoog.format.IS_IE8_OR_ABOVE_ =\n    goog.userAgent.IE && goog.userAgent.isVersionOrHigher(8);\n\n\n/**\n * Constant for the WBR replacement used by insertWordBreaks.  Safari requires\n * <wbr></wbr>, Opera needs the &shy; entity, though this will give a visible\n * hyphen at breaks.  IE8 uses a zero width space.\n * Other browsers just use <wbr>.\n * @type {string}\n */\ngoog.format.WORD_BREAK_HTML =\n    goog.userAgent.WEBKIT ? '<wbr></wbr>' : goog.userAgent.OPERA ?\n                            '&shy;' :\n                            goog.format.IS_IE8_OR_ABOVE_ ? '&#8203;' : '<wbr>';\n\n\n/**\n * Tokens used within insertWordBreaks.\n * @private\n * @enum {number}\n */\ngoog.format.WbrToken_ = {\n  LT: 60,          // '<'.charCodeAt(0)\n  GT: 62,          // '>'.charCodeAt(0)\n  AMP: 38,         // '&'.charCodeAt(0)\n  SEMI_COLON: 59,  // ';'.charCodeAt(0)\n  SPACE: 32        // ' '.charCodeAt(0)\n};\n","// Copyright 2009 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview Utility for formatting text for display in a potentially\n * opposite-directionality context without garbling.\n * Mostly a port of http://go/formatter.cc.\n */\n\n\ngoog.provide('goog.i18n.BidiFormatter');\n\ngoog.require('goog.html.SafeHtml');\ngoog.require('goog.i18n.bidi');\ngoog.require('goog.i18n.bidi.Dir');\ngoog.require('goog.i18n.bidi.Format');\n\n\n\n/**\n * Utility class for formatting text for display in a potentially\n * opposite-directionality context without garbling. Provides the following\n * functionality:\n *\n * 1. BiDi Wrapping\n * When text in one language is mixed into a document in another, opposite-\n * directionality language, e.g. when an English business name is embedded in a\n * Hebrew web page, both the inserted string and the text following it may be\n * displayed incorrectly unless the inserted string is explicitly separated\n * from the surrounding text in a \"wrapper\" that declares its directionality at\n * the start and then resets it back at the end. This wrapping can be done in\n * HTML mark-up (e.g. a 'span dir=\"rtl\"' tag) or - only in contexts where\n * mark-up can not be used - in Unicode BiDi formatting codes (LRE|RLE and PDF).\n * Providing such wrapping services is the basic purpose of the BiDi formatter.\n *\n * 2. Directionality estimation\n * How does one know whether a string about to be inserted into surrounding\n * text has the same directionality? Well, in many cases, one knows that this\n * must be the case when writing the code doing the insertion, e.g. when a\n * localized message is inserted into a localized page. In such cases there is\n * no need to involve the BiDi formatter at all. In the remaining cases, e.g.\n * when the string is user-entered or comes from a database, the language of\n * the string (and thus its directionality) is not known a priori, and must be\n * estimated at run-time. The BiDi formatter does this automatically.\n *\n * 3. Escaping\n * When wrapping plain text - i.e. text that is not already HTML or HTML-\n * escaped - in HTML mark-up, the text must first be HTML-escaped to prevent XSS\n * attacks and other nasty business. This of course is always true, but the\n * escaping can not be done after the string has already been wrapped in\n * mark-up, so the BiDi formatter also serves as a last chance and includes\n * escaping services.\n *\n * Thus, in a single call, the formatter will escape the input string as\n * specified, determine its directionality, and wrap it as necessary. It is\n * then up to the caller to insert the return value in the output.\n *\n * See http://wiki/Main/TemplatesAndBiDi for more information.\n *\n * @param {goog.i18n.bidi.Dir|number|boolean|null} contextDir The context\n *     directionality, in one of the following formats:\n *     1. A goog.i18n.bidi.Dir constant. NEUTRAL is treated the same as null,\n *        i.e. unknown, for backward compatibility with legacy calls.\n *     2. A number (positive = LTR, negative = RTL, 0 = unknown).\n *     3. A boolean (true = RTL, false = LTR).\n *     4. A null for unknown directionality.\n * @param {boolean=} opt_alwaysSpan Whether {@link #spanWrap} should always\n *     use a 'span' tag, even when the input directionality is neutral or\n *     matches the context, so that the DOM structure of the output does not\n *     depend on the combination of directionalities. Default: false.\n * @constructor\n * @final\n */\ngoog.i18n.BidiFormatter = function(contextDir, opt_alwaysSpan) {\n  /**\n   * The overall directionality of the context in which the formatter is being\n   * used.\n   * @type {?goog.i18n.bidi.Dir}\n   * @private\n   */\n  this.contextDir_ = goog.i18n.bidi.toDir(contextDir, true /* opt_noNeutral */);\n\n  /**\n   * Whether {@link #spanWrap} and similar methods should always use the same\n   * span structure, regardless of the combination of directionalities, for a\n   * stable DOM structure.\n   * @type {boolean}\n   * @private\n   */\n  this.alwaysSpan_ = !!opt_alwaysSpan;\n};\n\n\n/**\n * @return {?goog.i18n.bidi.Dir} The context directionality.\n */\ngoog.i18n.BidiFormatter.prototype.getContextDir = function() {\n  return this.contextDir_;\n};\n\n\n/**\n * @return {boolean} Whether alwaysSpan is set.\n */\ngoog.i18n.BidiFormatter.prototype.getAlwaysSpan = function() {\n  return this.alwaysSpan_;\n};\n\n\n/**\n * @param {goog.i18n.bidi.Dir|number|boolean|null} contextDir The context\n *     directionality, in one of the following formats:\n *     1. A goog.i18n.bidi.Dir constant. NEUTRAL is treated the same as null,\n *        i.e. unknown.\n *     2. A number (positive = LTR, negative = RTL, 0 = unknown).\n *     3. A boolean (true = RTL, false = LTR).\n *     4. A null for unknown directionality.\n */\ngoog.i18n.BidiFormatter.prototype.setContextDir = function(contextDir) {\n  this.contextDir_ = goog.i18n.bidi.toDir(contextDir, true /* opt_noNeutral */);\n};\n\n\n/**\n * @param {boolean} alwaysSpan Whether {@link #spanWrap} should always use a\n *     'span' tag, even when the input directionality is neutral or matches the\n *     context, so that the DOM structure of the output does not depend on the\n *     combination of directionalities.\n */\ngoog.i18n.BidiFormatter.prototype.setAlwaysSpan = function(alwaysSpan) {\n  this.alwaysSpan_ = alwaysSpan;\n};\n\n\n/**\n * Returns the directionality of input argument `str`.\n * Identical to {@link goog.i18n.bidi.estimateDirection}.\n *\n * @param {string} str The input text.\n * @param {boolean=} opt_isHtml Whether `str` is HTML / HTML-escaped.\n *     Default: false.\n * @return {goog.i18n.bidi.Dir} Estimated overall directionality of `str`.\n */\ngoog.i18n.BidiFormatter.prototype.estimateDirection =\n    goog.i18n.bidi.estimateDirection;\n\n\n/**\n * Returns true if two given directionalities are opposite.\n * Note: the implementation is based on the numeric values of the Dir enum.\n *\n * @param {?goog.i18n.bidi.Dir} dir1 1st directionality.\n * @param {?goog.i18n.bidi.Dir} dir2 2nd directionality.\n * @return {boolean} Whether the directionalities are opposite.\n * @private\n */\ngoog.i18n.BidiFormatter.prototype.areDirectionalitiesOpposite_ = function(\n    dir1, dir2) {\n  return Number(dir1) * Number(dir2) < 0;\n};\n\n\n/**\n * Returns a unicode BiDi mark matching the context directionality (LRM or\n * RLM) if `opt_dirReset`, and if either the directionality or the exit\n * directionality of `str` is opposite to the context directionality.\n * Otherwise returns the empty string.\n *\n * @param {string} str The input text.\n * @param {goog.i18n.bidi.Dir} dir `str`'s overall directionality.\n * @param {boolean=} opt_isHtml Whether `str` is HTML / HTML-escaped.\n *     Default: false.\n * @param {boolean=} opt_dirReset Whether to perform the reset. Default: false.\n * @return {string} A unicode BiDi mark or the empty string.\n * @private\n */\ngoog.i18n.BidiFormatter.prototype.dirResetIfNeeded_ = function(\n    str, dir, opt_isHtml, opt_dirReset) {\n  // endsWithRtl and endsWithLtr are called only if needed (short-circuit).\n  if (opt_dirReset &&\n      (this.areDirectionalitiesOpposite_(dir, this.contextDir_) ||\n       (this.contextDir_ == goog.i18n.bidi.Dir.LTR &&\n        goog.i18n.bidi.endsWithRtl(str, opt_isHtml)) ||\n       (this.contextDir_ == goog.i18n.bidi.Dir.RTL &&\n        goog.i18n.bidi.endsWithLtr(str, opt_isHtml)))) {\n    return this.contextDir_ == goog.i18n.bidi.Dir.LTR ?\n        goog.i18n.bidi.Format.LRM :\n        goog.i18n.bidi.Format.RLM;\n  } else {\n    return '';\n  }\n};\n\n\n/**\n * Returns \"rtl\" if `str`'s estimated directionality is RTL, and \"ltr\" if\n * it is LTR. In case it's NEUTRAL, returns \"rtl\" if the context directionality\n * is RTL, and \"ltr\" otherwise.\n * Needed for GXP, which can't handle dirAttr.\n * Example use case:\n * &lt;td expr:dir='bidiFormatter.dirAttrValue(foo)'&gt;\n *   &lt;gxp:eval expr='foo'&gt;\n * &lt;/td&gt;\n *\n * @param {string} str Text whose directionality is to be estimated.\n * @param {boolean=} opt_isHtml Whether `str` is HTML / HTML-escaped.\n *     Default: false.\n * @return {string} \"rtl\" or \"ltr\", according to the logic described above.\n */\ngoog.i18n.BidiFormatter.prototype.dirAttrValue = function(str, opt_isHtml) {\n  return this.knownDirAttrValue(this.estimateDirection(str, opt_isHtml));\n};\n\n\n/**\n * Returns \"rtl\" if the given directionality is RTL, and \"ltr\" if it is LTR. In\n * case it's NEUTRAL, returns \"rtl\" if the context directionality is RTL, and\n * \"ltr\" otherwise.\n *\n * @param {goog.i18n.bidi.Dir} dir A directionality.\n * @return {string} \"rtl\" or \"ltr\", according to the logic described above.\n */\ngoog.i18n.BidiFormatter.prototype.knownDirAttrValue = function(dir) {\n  var resolvedDir = dir == goog.i18n.bidi.Dir.NEUTRAL ? this.contextDir_ : dir;\n  return resolvedDir == goog.i18n.bidi.Dir.RTL ? 'rtl' : 'ltr';\n};\n\n\n/**\n * Returns 'dir=\"ltr\"' or 'dir=\"rtl\"', depending on `str`'s estimated\n * directionality, if it is not the same as the context directionality.\n * Otherwise, returns the empty string.\n *\n * @param {string} str Text whose directionality is to be estimated.\n * @param {boolean=} opt_isHtml Whether `str` is HTML / HTML-escaped.\n *     Default: false.\n * @return {string} 'dir=\"rtl\"' for RTL text in non-RTL context; 'dir=\"ltr\"' for\n *     LTR text in non-LTR context; else, the empty string.\n */\ngoog.i18n.BidiFormatter.prototype.dirAttr = function(str, opt_isHtml) {\n  return this.knownDirAttr(this.estimateDirection(str, opt_isHtml));\n};\n\n\n/**\n * Returns 'dir=\"ltr\"' or 'dir=\"rtl\"', depending on the given directionality, if\n * it is not the same as the context directionality. Otherwise, returns the\n * empty string.\n *\n * @param {goog.i18n.bidi.Dir} dir A directionality.\n * @return {string} 'dir=\"rtl\"' for RTL text in non-RTL context; 'dir=\"ltr\"' for\n *     LTR text in non-LTR context; else, the empty string.\n */\ngoog.i18n.BidiFormatter.prototype.knownDirAttr = function(dir) {\n  if (dir != this.contextDir_) {\n    return dir == goog.i18n.bidi.Dir.RTL ?\n        'dir=\"rtl\"' :\n        dir == goog.i18n.bidi.Dir.LTR ? 'dir=\"ltr\"' : '';\n  }\n  return '';\n};\n\n\n/**\n * Formats a string of unknown directionality for use in HTML output of the\n * context directionality, so an opposite-directionality string is neither\n * garbled nor garbles what follows it.\n * The algorithm: estimates the directionality of input argument `html`.\n * In case its directionality doesn't match the context directionality, wraps it\n * with a 'span' tag and adds a \"dir\" attribute (either 'dir=\"rtl\"' or\n * 'dir=\"ltr\"'). If setAlwaysSpan(true) was used, the input is always wrapped\n * with 'span', skipping just the dir attribute when it's not needed.\n *\n * If `opt_dirReset`, and if the overall directionality or the exit\n * directionality of `str` are opposite to the context directionality, a\n * trailing unicode BiDi mark matching the context directionality is appened\n * (LRM or RLM).\n *\n * @param {!goog.html.SafeHtml} html The input HTML.\n * @param {boolean=} opt_dirReset Whether to append a trailing unicode bidi mark\n *     matching the context directionality, when needed, to prevent the possible\n *     garbling of whatever may follow `html`. Default: true.\n * @return {!goog.html.SafeHtml} Input text after applying the processing.\n */\ngoog.i18n.BidiFormatter.prototype.spanWrapSafeHtml = function(\n    html, opt_dirReset) {\n  return this.spanWrapSafeHtmlWithKnownDir(null, html, opt_dirReset);\n};\n\n\n/**\n * Formats a string of given directionality for use in HTML output of the\n * context directionality, so an opposite-directionality string is neither\n * garbled nor garbles what follows it.\n * The algorithm: If `dir` doesn't match the context directionality, wraps\n * `html` with a 'span' tag and adds a \"dir\" attribute (either 'dir=\"rtl\"'\n * or 'dir=\"ltr\"'). If setAlwaysSpan(true) was used, the input is always wrapped\n * with 'span', skipping just the dir attribute when it's not needed.\n *\n * If `opt_dirReset`, and if `dir` or the exit directionality of\n * `html` are opposite to the context directionality, a trailing unicode\n * BiDi mark matching the context directionality is appened (LRM or RLM).\n *\n * @param {?goog.i18n.bidi.Dir} dir `html`'s overall directionality, or\n *     null if unknown and needs to be estimated.\n * @param {!goog.html.SafeHtml} html The input HTML.\n * @param {boolean=} opt_dirReset Whether to append a trailing unicode bidi mark\n *     matching the context directionality, when needed, to prevent the possible\n *     garbling of whatever may follow `html`. Default: true.\n * @return {!goog.html.SafeHtml} Input text after applying the processing.\n */\ngoog.i18n.BidiFormatter.prototype.spanWrapSafeHtmlWithKnownDir = function(\n    dir, html, opt_dirReset) {\n  if (dir == null) {\n    dir = this.estimateDirection(goog.html.SafeHtml.unwrap(html), true);\n  }\n  return this.spanWrapWithKnownDir_(dir, html, opt_dirReset);\n};\n\n\n/**\n * The internal implementation of spanWrapSafeHtmlWithKnownDir for non-null dir,\n * to help the compiler optimize.\n *\n * @param {goog.i18n.bidi.Dir} dir `str`'s overall directionality.\n * @param {!goog.html.SafeHtml} html The input HTML.\n * @param {boolean=} opt_dirReset Whether to append a trailing unicode bidi mark\n *     matching the context directionality, when needed, to prevent the possible\n *     garbling of whatever may follow `str`. Default: true.\n * @return {!goog.html.SafeHtml} Input text after applying the above processing.\n * @private\n */\ngoog.i18n.BidiFormatter.prototype.spanWrapWithKnownDir_ = function(\n    dir, html, opt_dirReset) {\n  opt_dirReset = opt_dirReset || (opt_dirReset == undefined);\n\n  var result;\n  // Whether to add the \"dir\" attribute.\n  var dirCondition =\n      dir != goog.i18n.bidi.Dir.NEUTRAL && dir != this.contextDir_;\n  if (this.alwaysSpan_ || dirCondition) {  // Wrap is needed\n    var dirAttribute;\n    if (dirCondition) {\n      dirAttribute = dir == goog.i18n.bidi.Dir.RTL ? 'rtl' : 'ltr';\n    }\n    result = goog.html.SafeHtml.create('span', {'dir': dirAttribute}, html);\n  } else {\n    result = html;\n  }\n  var str = goog.html.SafeHtml.unwrap(html);\n  result = goog.html.SafeHtml.concatWithDir(\n      goog.i18n.bidi.Dir.NEUTRAL, result,\n      this.dirResetIfNeeded_(str, dir, true, opt_dirReset));\n  return result;\n};\n\n\n/**\n * Formats a string of unknown directionality for use in plain-text output of\n * the context directionality, so an opposite-directionality string is neither\n * garbled nor garbles what follows it.\n * As opposed to {@link #spanWrap}, this makes use of unicode BiDi formatting\n * characters. In HTML, its *only* valid use is inside of elements that do not\n * allow mark-up, e.g. an 'option' tag.\n * The algorithm: estimates the directionality of input argument `str`.\n * In case it doesn't match  the context directionality, wraps it with Unicode\n * BiDi formatting characters: RLE`str`PDF for RTL text, and\n * LRE`str`PDF for LTR text.\n *\n * If `opt_dirReset`, and if the overall directionality or the exit\n * directionality of `str` are opposite to the context directionality, a\n * trailing unicode BiDi mark matching the context directionality is appended\n * (LRM or RLM).\n *\n * Does *not* do HTML-escaping regardless of the value of `opt_isHtml`.\n * The return value can be HTML-escaped as necessary.\n *\n * @param {string} str The input text.\n * @param {boolean=} opt_isHtml Whether `str` is HTML / HTML-escaped.\n *     Default: false.\n * @param {boolean=} opt_dirReset Whether to append a trailing unicode bidi mark\n *     matching the context directionality, when needed, to prevent the possible\n *     garbling of whatever may follow `str`. Default: true.\n * @return {string} Input text after applying the above processing.\n */\ngoog.i18n.BidiFormatter.prototype.unicodeWrap = function(\n    str, opt_isHtml, opt_dirReset) {\n  return this.unicodeWrapWithKnownDir(null, str, opt_isHtml, opt_dirReset);\n};\n\n\n/**\n * Formats a string of given directionality for use in plain-text output of the\n * context directionality, so an opposite-directionality string is neither\n * garbled nor garbles what follows it.\n * As opposed to {@link #spanWrapWithKnownDir}, makes use of unicode BiDi\n * formatting characters. In HTML, its *only* valid use is inside of elements\n * that do not allow mark-up, e.g. an 'option' tag.\n * The algorithm: If `dir` doesn't match the context directionality, wraps\n * `str` with Unicode BiDi formatting characters: RLE`str`PDF for\n * RTL text, and LRE`str`PDF for LTR text.\n *\n * If `opt_dirReset`, and if the overall directionality or the exit\n * directionality of `str` are opposite to the context directionality, a\n * trailing unicode BiDi mark matching the context directionality is appended\n * (LRM or RLM).\n *\n * Does *not* do HTML-escaping regardless of the value of `opt_isHtml`.\n * The return value can be HTML-escaped as necessary.\n *\n * @param {?goog.i18n.bidi.Dir} dir `str`'s overall directionality, or\n *     null if unknown and needs to be estimated.\n * @param {string} str The input text.\n * @param {boolean=} opt_isHtml Whether `str` is HTML / HTML-escaped.\n *     Default: false.\n * @param {boolean=} opt_dirReset Whether to append a trailing unicode bidi mark\n *     matching the context directionality, when needed, to prevent the possible\n *     garbling of whatever may follow `str`. Default: true.\n * @return {string} Input text after applying the above processing.\n */\ngoog.i18n.BidiFormatter.prototype.unicodeWrapWithKnownDir = function(\n    dir, str, opt_isHtml, opt_dirReset) {\n  if (dir == null) {\n    dir = this.estimateDirection(str, opt_isHtml);\n  }\n  return this.unicodeWrapWithKnownDir_(dir, str, opt_isHtml, opt_dirReset);\n};\n\n\n/**\n * The internal implementation of unicodeWrapWithKnownDir for non-null dir, to\n * help the compiler optimize.\n *\n * @param {goog.i18n.bidi.Dir} dir `str`'s overall directionality.\n * @param {string} str The input text.\n * @param {boolean=} opt_isHtml Whether `str` is HTML / HTML-escaped.\n *     Default: false.\n * @param {boolean=} opt_dirReset Whether to append a trailing unicode bidi mark\n *     matching the context directionality, when needed, to prevent the possible\n *     garbling of whatever may follow `str`. Default: true.\n * @return {string} Input text after applying the above processing.\n * @private\n */\ngoog.i18n.BidiFormatter.prototype.unicodeWrapWithKnownDir_ = function(\n    dir, str, opt_isHtml, opt_dirReset) {\n  opt_dirReset = opt_dirReset || (opt_dirReset == undefined);\n  var result = [];\n  if (dir != goog.i18n.bidi.Dir.NEUTRAL && dir != this.contextDir_) {\n    result.push(\n        dir == goog.i18n.bidi.Dir.RTL ? goog.i18n.bidi.Format.RLE :\n                                        goog.i18n.bidi.Format.LRE);\n    result.push(str);\n    result.push(goog.i18n.bidi.Format.PDF);\n  } else {\n    result.push(str);\n  }\n\n  result.push(this.dirResetIfNeeded_(str, dir, opt_isHtml, opt_dirReset));\n  return result.join('');\n};\n\n\n/**\n * Returns a Unicode BiDi mark matching the context directionality (LRM or RLM)\n * if the directionality or the exit directionality of `str` are opposite\n * to the context directionality. Otherwise returns the empty string.\n *\n * @param {string} str The input text.\n * @param {boolean=} opt_isHtml Whether `str` is HTML / HTML-escaped.\n *     Default: false.\n * @return {string} A Unicode bidi mark matching the global directionality or\n *     the empty string.\n */\ngoog.i18n.BidiFormatter.prototype.markAfter = function(str, opt_isHtml) {\n  return this.markAfterKnownDir(null, str, opt_isHtml);\n};\n\n\n/**\n * Returns a Unicode BiDi mark matching the context directionality (LRM or RLM)\n * if the given directionality or the exit directionality of `str` are\n * opposite to the context directionality. Otherwise returns the empty string.\n *\n * @param {?goog.i18n.bidi.Dir} dir `str`'s overall directionality, or\n *     null if unknown and needs to be estimated.\n * @param {string} str The input text.\n * @param {boolean=} opt_isHtml Whether `str` is HTML / HTML-escaped.\n *     Default: false.\n * @return {string} A Unicode bidi mark matching the global directionality or\n *     the empty string.\n */\ngoog.i18n.BidiFormatter.prototype.markAfterKnownDir = function(\n    dir, str, opt_isHtml) {\n  if (dir == null) {\n    dir = this.estimateDirection(str, opt_isHtml);\n  }\n  return this.dirResetIfNeeded_(str, dir, opt_isHtml, true);\n};\n\n\n/**\n * Returns the Unicode BiDi mark matching the context directionality (LRM for\n * LTR context directionality, RLM for RTL context directionality), or the\n * empty string for neutral / unknown context directionality.\n *\n * @return {string} LRM for LTR context directionality and RLM for RTL context\n *     directionality.\n */\ngoog.i18n.BidiFormatter.prototype.mark = function() {\n  switch (this.contextDir_) {\n    case (goog.i18n.bidi.Dir.LTR):\n      return goog.i18n.bidi.Format.LRM;\n    case (goog.i18n.bidi.Dir.RTL):\n      return goog.i18n.bidi.Format.RLM;\n    default:\n      return '';\n  }\n};\n\n\n/**\n * Returns 'right' for RTL context directionality. Otherwise (LTR or neutral /\n * unknown context directionality) returns 'left'.\n *\n * @return {string} 'right' for RTL context directionality and 'left' for other\n *     context directionality.\n */\ngoog.i18n.BidiFormatter.prototype.startEdge = function() {\n  return this.contextDir_ == goog.i18n.bidi.Dir.RTL ? goog.i18n.bidi.RIGHT :\n                                                      goog.i18n.bidi.LEFT;\n};\n\n\n/**\n * Returns 'left' for RTL context directionality. Otherwise (LTR or neutral /\n * unknown context directionality) returns 'right'.\n *\n * @return {string} 'left' for RTL context directionality and 'right' for other\n *     context directionality.\n */\ngoog.i18n.BidiFormatter.prototype.endEdge = function() {\n  return this.contextDir_ == goog.i18n.bidi.Dir.RTL ? goog.i18n.bidi.LEFT :\n                                                      goog.i18n.bidi.RIGHT;\n};\n","/*\n * Copyright 2008 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @fileoverview\n * Utility functions and classes for Soy gencode\n *\n * <p>\n * This file contains utilities that should only be called by Soy-generated\n * JS code. Please do not use these functions directly from\n * your hand-written code. Their names all start with '$$', or exist within the\n * soydata.VERY_UNSAFE namespace.\n *\n * <p>TODO(lukes): ensure that the above pattern is actually followed\n * consistently.\n *\n */\ngoog.provide('soy');\ngoog.provide('soy.asserts');\ngoog.provide('soy.esc');\ngoog.provide('soydata');\ngoog.provide('soydata.SanitizedHtml');\ngoog.provide('soydata.VERY_UNSAFE');\n\ngoog.require('goog.array');\ngoog.require('goog.asserts');\ngoog.require('goog.debug');\ngoog.require('goog.format');\ngoog.require('goog.html.SafeHtml');\ngoog.require('goog.html.SafeScript');\ngoog.require('goog.html.SafeStyle');\ngoog.require('goog.html.SafeStyleSheet');\ngoog.require('goog.html.SafeUrl');\ngoog.require('goog.html.TrustedResourceUrl');\ngoog.require('goog.html.uncheckedconversions');\ngoog.require('goog.i18n.BidiFormatter');\ngoog.require('goog.i18n.bidi');\ngoog.require('goog.object');\ngoog.require('goog.soy.data.SanitizedContent');\ngoog.require('goog.soy.data.SanitizedContentKind');\ngoog.require('goog.soy.data.SanitizedCss');\ngoog.require('goog.soy.data.SanitizedHtml');\ngoog.require('goog.soy.data.SanitizedHtmlAttribute');\ngoog.require('goog.soy.data.SanitizedJs');\ngoog.require('goog.soy.data.SanitizedStyle');\ngoog.require('goog.soy.data.SanitizedTrustedResourceUri');\ngoog.require('goog.soy.data.SanitizedUri');\ngoog.require('goog.soy.data.UnsanitizedText');\ngoog.require('goog.string');\ngoog.require('goog.string.Const');\n\n// -----------------------------------------------------------------------------\n// soydata: Defines typed strings, e.g. an HTML string {@code \"a<b>c\"} is\n// semantically distinct from the plain text string {@code \"a<b>c\"} and smart\n// templates can take that distinction into account.\n\n/**\n * Checks whether a given value is of a given content kind.\n *\n * @param {*} value The value to be examined.\n * @param {goog.soy.data.SanitizedContentKind} contentKind The desired content\n *     kind.\n * @return {boolean} Whether the given value is of the given kind.\n * @private\n */\nsoydata.isContentKind_ = function(value, contentKind) {\n  // TODO(user): This function should really include the assert on\n  // value.constructor that is currently sprinkled at most of the call sites.\n  // Unfortunately, that would require a (debug-mode-only) switch statement.\n  // TODO(user): Perhaps we should get rid of the contentKind property\n  // altogether and only at the constructor.\n  return value != null && value.contentKind === contentKind;\n};\n\n\n/**\n * Returns a given value's contentDir property, constrained to a\n * goog.i18n.bidi.Dir value or null. Returns null if the value is null,\n * undefined, a primitive or does not have a contentDir property, or the\n * property's value is not 1 (for LTR), -1 (for RTL), or 0 (for neutral).\n *\n * @param {*} value The value whose contentDir property, if any, is to\n *     be returned.\n * @return {?goog.i18n.bidi.Dir} The contentDir property.\n */\nsoydata.getContentDir = function(value) {\n  if (value != null) {\n    switch (value.contentDir) {\n      case goog.i18n.bidi.Dir.LTR:\n        return goog.i18n.bidi.Dir.LTR;\n      case goog.i18n.bidi.Dir.RTL:\n        return goog.i18n.bidi.Dir.RTL;\n      case goog.i18n.bidi.Dir.NEUTRAL:\n        return goog.i18n.bidi.Dir.NEUTRAL;\n    }\n  }\n  return null;\n};\n\n\n/**\n * This class is only a holder for `soydata.SanitizedHtml.from`. Do not\n * instantiate or extend it. Use `goog.soy.data.SanitizedHtml` instead.\n *\n * @constructor\n * @extends {goog.soy.data.SanitizedHtml}\n * @abstract\n */\nsoydata.SanitizedHtml = function() {\n  soydata.SanitizedHtml.base(this, 'constructor');  // Throws an exception.\n};\ngoog.inherits(soydata.SanitizedHtml, goog.soy.data.SanitizedHtml);\n\n/**\n * Returns a SanitizedHtml object for a particular value. The content direction\n * is preserved.\n *\n * This HTML-escapes the value unless it is already SanitizedHtml or SafeHtml.\n *\n * @param {*} value The value to convert. If it is already a SanitizedHtml\n *     object, it is left alone.\n * @return {!goog.soy.data.SanitizedHtml} A SanitizedHtml object derived from\n *     the stringified value. It is escaped unless the input is SanitizedHtml or\n *     SafeHtml.\n */\nsoydata.SanitizedHtml.from = function(value) {\n  // The check is soydata.isContentKind_() inlined for performance.\n  if (value != null &&\n      value.contentKind === goog.soy.data.SanitizedContentKind.HTML) {\n    goog.asserts.assert(value.constructor === goog.soy.data.SanitizedHtml);\n    return /** @type {!goog.soy.data.SanitizedHtml} */ (value);\n  }\n  if (value instanceof goog.html.SafeHtml) {\n    return soydata.VERY_UNSAFE.ordainSanitizedHtml(\n        goog.html.SafeHtml.unwrap(value), value.getDirection());\n  }\n  return soydata.VERY_UNSAFE.ordainSanitizedHtml(\n      soy.esc.$$escapeHtmlHelper(String(value)), soydata.getContentDir(value));\n};\n\n\n/**\n * Empty string, used as a type in Soy templates.\n * @enum {string}\n * @private\n */\nsoydata.$$EMPTY_STRING_ = {\n  VALUE: ''\n};\n\n\n/**\n * Creates a factory for SanitizedContent types.\n *\n * This is a hack so that the soydata.VERY_UNSAFE.ordainSanitized* can\n * instantiate Sanitized* classes, without making the Sanitized* constructors\n * publicly usable. Requiring all construction to use the VERY_UNSAFE names\n * helps callers and their reviewers easily tell that creating SanitizedContent\n * is not always safe and calls for careful review.\n *\n * @param {function(new: T)} ctor A constructor.\n * @return {function(*, ?goog.i18n.bidi.Dir=): T} A factory that takes\n *     content and an optional content direction and returns a new instance. If\n *     the content direction is undefined, ctor.prototype.contentDir is used.\n * @template T\n * @private\n */\nsoydata.$$makeSanitizedContentFactory_ = function(ctor) {\n  /**\n   * @param {string} content\n   * @constructor\n   * @extends {goog.soy.data.SanitizedContent}\n   */\n  function InstantiableCtor(content) {\n    /** @override */\n    this.content = content;\n  }\n  InstantiableCtor.prototype = ctor.prototype;\n  /**\n   * Creates a ctor-type SanitizedContent instance.\n   *\n   * @param {*} content The content to put in the instance.\n   * @param {?goog.i18n.bidi.Dir=} opt_contentDir The content direction. If\n   *     undefined, ctor.prototype.contentDir is used.\n   * @return {!goog.soy.data.SanitizedContent} The new instance. It is actually\n   *     of type T above (ctor's type, a descendant of SanitizedContent), but\n   *     there is no way to express that here.\n   */\n  function sanitizedContentFactory(content, opt_contentDir) {\n    var result = new InstantiableCtor(String(content));\n    if (opt_contentDir !== undefined) {\n      result.contentDir = opt_contentDir;\n    }\n    return result;\n  }\n  return sanitizedContentFactory;\n};\n\n\n/**\n * Creates a factory for SanitizedContent types that should always have their\n * default directionality.\n *\n * This is a hack so that the soydata.VERY_UNSAFE.ordainSanitized* can\n * instantiate Sanitized* classes, without making the Sanitized* constructors\n * publicly usable. Requiring all construction to use the VERY_UNSAFE names\n * helps callers and their reviewers easily tell that creating SanitizedContent\n * is not always safe and calls for careful review.\n *\n * @param {function(new: T, string)} ctor A constructor.\n * @return {function(*): T} A factory that takes content and returns a new\n *     instance (with default directionality, i.e. ctor.prototype.contentDir).\n * @template T\n * @private\n */\nsoydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_ = function(ctor) {\n  /**\n   * @param {string} content\n   * @constructor\n   * @extends {goog.soy.data.SanitizedContent}\n   */\n  function InstantiableCtor(content) {\n    /** @override */\n    this.content = content;\n  }\n  InstantiableCtor.prototype = ctor.prototype;\n  /**\n   * Creates a ctor-type SanitizedContent instance.\n   *\n   * @param {*} content The content to put in the instance.\n   * @return {!goog.soy.data.SanitizedContent} The new instance. It is actually\n   *     of type T above (ctor's type, a descendant of SanitizedContent), but\n   *     there is no way to express that here.\n   */\n  function sanitizedContentFactory(content) {\n    var result = new InstantiableCtor(String(content));\n    return result;\n  }\n  return sanitizedContentFactory;\n};\n\n\n// -----------------------------------------------------------------------------\n// Sanitized content ordainers. Please use these with extreme caution (with the\n// exception of markUnsanitizedText). A good recommendation is to limit usage\n// of these to just a handful of files in your source tree where usages can be\n// carefully audited.\n\n\n/**\n * Protects a string from being used in an noAutoescaped context.\n *\n * This is useful for content where there is significant risk of accidental\n * unescaped usage in a Soy template. A great case is for user-controlled\n * data that has historically been a source of vulernabilities.\n *\n * @param {*} content Text to protect.\n * @param {?goog.i18n.bidi.Dir=} opt_contentDir The content direction; null if\n *     unknown and thus to be estimated when necessary. Default: null.\n * @return {!goog.soy.data.UnsanitizedText} A wrapper that is rejected by the\n *     Soy noAutoescape print directive.\n */\nsoydata.markUnsanitizedText = function(content, opt_contentDir) {\n  return new goog.soy.data.UnsanitizedText(content, opt_contentDir);\n};\n\n\n/**\n * Takes a leap of faith that the provided content is \"safe\" HTML.\n *\n * @param {*} content A string of HTML that can safely be embedded in\n *     a PCDATA context in your app. If you would be surprised to find that an\n *     HTML sanitizer produced `s` (e.g. it runs code or fetches bad URLs)\n *     and you wouldn't write a template that produces `s` on security or\n *     privacy grounds, then don't pass `s` here.\n * @param {?goog.i18n.bidi.Dir=} opt_contentDir The content direction; null if\n *     unknown and thus to be estimated when necessary. Default: null.\n * @return {!goog.soy.data.SanitizedHtml} Sanitized content wrapper that\n *     indicates to Soy not to escape when printed as HTML.\n */\nsoydata.VERY_UNSAFE.ordainSanitizedHtml =\n    soydata.$$makeSanitizedContentFactory_(goog.soy.data.SanitizedHtml);\n\n\n/**\n * Takes a leap of faith that the provided content is \"safe\" (non-attacker-\n * controlled, XSS-free) Javascript.\n *\n * @param {*} content Javascript source that when evaluated does not\n *     execute any attacker-controlled scripts.\n * @return {!goog.soy.data.SanitizedJs} Sanitized content wrapper that indicates\n *     to Soy not to escape when printed as Javascript source.\n */\nsoydata.VERY_UNSAFE.ordainSanitizedJs =\n    soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(\n        goog.soy.data.SanitizedJs);\n\n\n/**\n * Takes a leap of faith that the provided content is \"safe\" to use as a URI\n * in a Soy template.\n *\n * This creates a Soy SanitizedContent object which indicates to Soy there is\n * no need to escape it when printed as a URI (e.g. in an href or src\n * attribute), such as if it's already been encoded or  if it's a Javascript:\n * URI.\n *\n * @param {*} content A chunk of URI that the caller knows is safe to\n *     emit in a template.\n * @return {!goog.soy.data.SanitizedUri} Sanitized content wrapper that\n *     indicates to Soy not to escape or filter when printed in URI context.\n */\nsoydata.VERY_UNSAFE.ordainSanitizedUri =\n    soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(\n        goog.soy.data.SanitizedUri);\n\n\n/**\n * Takes a leap of faith that the provided content is \"safe\" to use as a\n * TrustedResourceUri in a Soy template.\n *\n * This creates a Soy SanitizedContent object which indicates to Soy there is\n * no need to filter it when printed as a TrustedResourceUri.\n *\n * @param {*} content A chunk of TrustedResourceUri such as that the caller\n *     knows is safe to emit in a template.\n * @return {!goog.soy.data.SanitizedTrustedResourceUri} Sanitized content\n *     wrapper that indicates to Soy not to escape or filter when printed in\n *     TrustedResourceUri context.\n */\nsoydata.VERY_UNSAFE.ordainSanitizedTrustedResourceUri =\n    soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(\n        goog.soy.data.SanitizedTrustedResourceUri);\n\n\n/**\n * Takes a leap of faith that the provided content is \"safe\" to use as an\n * HTML attribute.\n *\n * @param {*} content An attribute name and value, such as\n *     {@code dir=\"ltr\"}.\n * @return {!goog.soy.data.SanitizedHtmlAttribute} Sanitized content wrapper\n *     that indicates to Soy not to escape when printed as an HTML attribute.\n */\nsoydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute =\n    soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(\n        goog.soy.data.SanitizedHtmlAttribute);\n\n\n/**\n * Takes a leap of faith that the provided content is \"safe\" to use as STYLE\n * in a style attribute.\n *\n * @param {*} content CSS, such as `color:#c3d9ff`.\n * @return {!goog.soy.data.SanitizedStyle} Sanitized style wrapper that\n *     indicates to Soy there is no need to escape or filter when printed in CSS\n *     context.\n */\nsoydata.VERY_UNSAFE.ordainSanitizedStyle =\n    soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(\n        goog.soy.data.SanitizedStyle);\n\n\n/**\n * Takes a leap of faith that the provided content is \"safe\" to use as CSS\n * in a style block.\n *\n * @param {*} content CSS, such as `color:#c3d9ff`.\n * @return {!goog.soy.data.SanitizedCss} Sanitized CSS wrapper that indicates to\n *     Soy there is no need to escape or filter when printed in CSS context.\n */\nsoydata.VERY_UNSAFE.ordainSanitizedCss =\n    soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(\n        goog.soy.data.SanitizedCss);\n\n\n// -----------------------------------------------------------------------------\n// Soy-generated utilities in the soy namespace.  Contains implementations for\n// common soyfunctions (e.g. keys()) and escaping/print directives.\n\n\n/**\n * Whether the locale is right-to-left.\n *\n * @type {boolean}\n */\nsoy.$$IS_LOCALE_RTL = goog.i18n.bidi.IS_RTL;\n\n\n/**\n * Builds an augmented map. The returned map will contain mappings from both\n * the base map and the additional map. If the same key appears in both, then\n * the value from the additional map will be visible, while the value from the\n * base map will be hidden. The base map will be used, but not modified.\n *\n * @param {!Object} baseMap The original map to augment.\n * @param {!Object} additionalMap A map containing the additional mappings.\n * @return {!Object} An augmented map containing both the original and\n *     additional mappings.\n */\nsoy.$$augmentMap = function(baseMap, additionalMap) {\n  return soy.$$assignDefaults(soy.$$assignDefaults({}, additionalMap), baseMap);\n};\n\n\n/**\n * Copies extra properties into an object if they do not already exist. The\n * destination object is mutated in the process.\n *\n * @param {!Object} obj The destination object to update.\n * @param {!Object} defaults An object with default properties to apply.\n * @return {!Object} The destination object for convenience.\n */\nsoy.$$assignDefaults = function(obj, defaults) {\n  for (var key in defaults) {\n    if (!(key in obj)) {\n      obj[key] = defaults[key];\n    }\n  }\n\n  return obj;\n};\n\n\n/**\n * Checks that the given map key is a string.\n *\n * <p>This is used to validate keys for legacy object map literals.\n *\n * @param {*} key Key to check.\n * @return {string} The given key.\n */\nsoy.$$checkLegacyObjectMapLiteralKey = function(key) {\n  if ((typeof key) != 'string') {\n    throw Error(\n        'Map literal\\'s key expression must evaluate to string' +\n        ' (encountered type \"' + (typeof key) + '\").');\n  }\n  return key;\n};\n\n\n/**\n * Gets the keys in a map as an array. There are no guarantees on the order.\n * @param {Object} map The map to get the keys of.\n * @return {!Array<string>} The array of keys in the given map.\n */\nsoy.$$getMapKeys = function(map) {\n  var mapKeys = [];\n  for (var key in map) {\n    mapKeys.push(key);\n  }\n  return mapKeys;\n};\n\n\n/**\n * Returns the argument if it is not null.\n *\n * @param {T} val The value to check\n * @return {T} val if is isn't null\n * @template T\n */\nsoy.$$checkNotNull = function(val) {\n  if (val == null) {\n    throw Error('unexpected null value');\n  }\n  return val;\n};\n\n\n/**\n * Parses the given string into a base 10 integer. Returns null if parse is\n * unsuccessful.\n * @param {string} str The string to parse\n * @return {?number} The string parsed as a base 10 integer, or null if\n * unsuccessful\n */\nsoy.$$parseInt = function(str) {\n  var parsed = parseInt(str, 10);\n  return isNaN(parsed) ? null : parsed;\n};\n\n\n/**\n * Parses the given string into a float. Returns null if parse is unsuccessful.\n * @param {string} str The string to parse\n * @return {?number} The string parsed as a float, or null if unsuccessful.\n */\nsoy.$$parseFloat = function(str) {\n  var parsed = parseFloat(str);\n  return isNaN(parsed) ? null : parsed;\n};\n\n\n/**\n * Gets a consistent unique id for the given delegate template name. Two calls\n * to this function will return the same id if and only if the input names are\n * the same.\n *\n * <p> Important: This function must always be called with a string constant.\n *\n * <p> If Closure Compiler is not being used, then this is just this identity\n * function. If Closure Compiler is being used, then each call to this function\n * will be replaced with a short string constant, which will be consistent per\n * input name.\n *\n * @param {string} delTemplateName The delegate template name for which to get a\n *     consistent unique id.\n * @return {string} A unique id that is consistent per input name.\n *\n * @idGenerator {consistent}\n */\nsoy.$$getDelTemplateId = function(delTemplateName) {\n  return delTemplateName;\n};\n\n\n/**\n * Map from registered delegate template key to the priority of the\n * implementation.\n * @type {Object}\n * @private\n */\nsoy.$$DELEGATE_REGISTRY_PRIORITIES_ = {};\n\n/**\n * Map from registered delegate template key to the implementation function.\n * @type {Object}\n * @private\n */\nsoy.$$DELEGATE_REGISTRY_FUNCTIONS_ = {};\n\n\n/**\n * Registers a delegate implementation. If the same delegate template key (id\n * and variant) has been registered previously, then priority values are\n * compared and only the higher priority implementation is stored (if\n * priorities are equal, an error is thrown).\n *\n * @param {string} delTemplateId The delegate template id.\n * @param {string} delTemplateVariant The delegate template variant (can be\n *     empty string).\n * @param {number} delPriority The implementation's priority value.\n * @param {Function} delFn The implementation function.\n */\nsoy.$$registerDelegateFn = function(\n    delTemplateId, delTemplateVariant, delPriority, delFn) {\n\n  var mapKey = 'key_' + delTemplateId + ':' + delTemplateVariant;\n  var currPriority = soy.$$DELEGATE_REGISTRY_PRIORITIES_[mapKey];\n  if (currPriority === undefined || delPriority > currPriority) {\n    // Registering new or higher-priority function: replace registry entry.\n    soy.$$DELEGATE_REGISTRY_PRIORITIES_[mapKey] = delPriority;\n    soy.$$DELEGATE_REGISTRY_FUNCTIONS_[mapKey] = delFn;\n  } else if (delPriority == currPriority) {\n    // Registering same-priority function: error.\n    throw Error(\n        'Encountered two active delegates with the same priority (\"' +\n            delTemplateId + ':' + delTemplateVariant + '\").');\n  } else {\n    // Registering lower-priority function: do nothing.\n  }\n};\n\n\n/**\n * Retrieves the (highest-priority) implementation that has been registered for\n * a given delegate template key (id and variant). If no implementation has\n * been registered for the key, then the fallback is the same id with empty\n * variant. If the fallback is also not registered, and allowsEmptyDefault is\n * true, then returns an implementation that is equivalent to an empty template\n * (i.e. rendered output would be empty string).\n *\n * @param {string} delTemplateId The delegate template id.\n * @param {string} delTemplateVariant The delegate template variant (can be\n *     empty string).\n * @param {boolean} allowsEmptyDefault Whether to default to the empty template\n *     function if there's no active implementation.\n * @return {Function} The retrieved implementation function.\n */\nsoy.$$getDelegateFn = function(\n    delTemplateId, delTemplateVariant, allowsEmptyDefault) {\n\n  var delFn = soy.$$DELEGATE_REGISTRY_FUNCTIONS_[\n      'key_' + delTemplateId + ':' + delTemplateVariant];\n  if (! delFn && delTemplateVariant != '') {\n    // Fallback to empty variant.\n    delFn = soy.$$DELEGATE_REGISTRY_FUNCTIONS_['key_' + delTemplateId + ':'];\n  }\n\n  if (delFn) {\n    return delFn;\n  } else if (allowsEmptyDefault) {\n    return soy.$$EMPTY_TEMPLATE_FN_;\n  } else {\n    throw Error(\n        'Found no active impl for delegate call to \"' + delTemplateId +\n        (delTemplateVariant ? ':' + delTemplateVariant : '') +\n        '\" (and delcall does not set allowemptydefault=\"true\").');\n  }\n};\n\n\n/**\n * Private helper soy.$$getDelegateFn(). This is the empty template function\n * that is returned whenever there's no delegate implementation found.\n *\n * @param {Object<string, *>=} opt_data\n * @param {Object<string, *>=} opt_ijData\n * @param {Object<string, *>=} opt_ijData_deprecated TODO(b/36644846): remove\n * @return {string}\n * @private\n */\nsoy.$$EMPTY_TEMPLATE_FN_ = function(\n    opt_data, opt_ijData, opt_ijData_deprecated) {\n  return '';\n};\n\n\n// -----------------------------------------------------------------------------\n// Internal sanitized content wrappers.\n\n\n/**\n * Creates a SanitizedContent factory for SanitizedContent types for internal\n * Soy let and param blocks.\n *\n * This is a hack within Soy so that SanitizedContent objects created via let\n * and param blocks will truth-test as false if they are empty string.\n * Tricking the Javascript runtime to treat empty SanitizedContent as falsey is\n * not possible, and changing the Soy compiler to wrap every boolean statement\n * for just this purpose is impractical.  Instead, we just avoid wrapping empty\n * string as SanitizedContent, since it's a no-op for empty strings anyways.\n *\n * @param {function(new: T)} ctor A constructor.\n * @return {function(*, ?goog.i18n.bidi.Dir=): (T|soydata.$$EMPTY_STRING_)}\n *     A factory that takes content and an optional content direction and\n *     returns a new instance, or an empty string. If the content direction is\n *     undefined, ctor.prototype.contentDir is used.\n * @template T\n * @private\n */\nsoydata.$$makeSanitizedContentFactoryForInternalBlocks_ = function(ctor) {\n  /**\n   * @param {string} content\n   * @constructor\n   * @extends {goog.soy.data.SanitizedContent}\n   */\n  function InstantiableCtor(content) {\n    /** @override */\n    this.content = content;\n  }\n  InstantiableCtor.prototype = ctor.prototype;\n  /**\n   * Creates a ctor-type SanitizedContent instance.\n   *\n   * @param {*} content The content to put in the instance.\n   * @param {?goog.i18n.bidi.Dir=} opt_contentDir The content direction. If\n   *     undefined, ctor.prototype.contentDir is used.\n   * @return {!goog.soy.data.SanitizedContent|soydata.$$EMPTY_STRING_} The new\n   *     instance, or an empty string. A new instance is actually of type T\n   *     above (ctor's type, a descendant of SanitizedContent), but there's no\n   *     way to express that here.\n   */\n  function sanitizedContentFactory(content, opt_contentDir) {\n    var contentString = String(content);\n    if (!contentString) {\n      return soydata.$$EMPTY_STRING_.VALUE;\n    }\n    var result = new InstantiableCtor(contentString);\n    if (opt_contentDir !== undefined) {\n      result.contentDir = opt_contentDir;\n    }\n    return result;\n  }\n  return sanitizedContentFactory;\n};\n\n\n/**\n * Creates a SanitizedContent factory for SanitizedContent types that should\n * always have their default directionality for internal Soy let and param\n * blocks.\n *\n * This is a hack within Soy so that SanitizedContent objects created via let\n * and param blocks will truth-test as false if they are empty string.\n * Tricking the Javascript runtime to treat empty SanitizedContent as falsey is\n * not possible, and changing the Soy compiler to wrap every boolean statement\n * for just this purpose is impractical.  Instead, we just avoid wrapping empty\n * string as SanitizedContent, since it's a no-op for empty strings anyways.\n *\n * @param {function(new: T)} ctor A constructor.\n * @return {function(*): (T|soydata.$$EMPTY_STRING_)} A\n *     factory that takes content and returns a\n *     new instance (with default directionality, i.e.\n *     ctor.prototype.contentDir), or an empty string.\n * @template T\n * @private\n */\nsoydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_ =\n    function(ctor) {\n  /**\n   * @param {string} content\n   * @constructor\n   * @extends {goog.soy.data.SanitizedContent}\n   */\n  function InstantiableCtor(content) {\n    /** @override */\n    this.content = content;\n  }\n  InstantiableCtor.prototype = ctor.prototype;\n  /**\n   * Creates a ctor-type SanitizedContent instance.\n   *\n   * @param {*} content The content to put in the instance.\n   * @return {!goog.soy.data.SanitizedContent|soydata.$$EMPTY_STRING_} The new\n   *     instance, or an empty string. A new instance is actually of type T\n   *     above (ctor's type, a descendant of SanitizedContent), but there's no\n   *     way to express that here.\n   */\n  function sanitizedContentFactory(content) {\n    var contentString = String(content);\n    if (!contentString) {\n      return soydata.$$EMPTY_STRING_.VALUE;\n    }\n    var result = new InstantiableCtor(contentString);\n    return result;\n  }\n  return sanitizedContentFactory;\n};\n\n\n/**\n * Creates kind=\"text\" block contents (internal use only).\n *\n * @param {*} content Text.\n * @param {?goog.i18n.bidi.Dir=} opt_contentDir The content direction; null if\n *     unknown and thus to be estimated when necessary. Default: null.\n * @return {!goog.soy.data.UnsanitizedText|soydata.$$EMPTY_STRING_} Wrapped result.\n */\nsoydata.$$markUnsanitizedTextForInternalBlocks = function(\n    content, opt_contentDir) {\n  var contentString = String(content);\n  if (!contentString) {\n    return soydata.$$EMPTY_STRING_.VALUE;\n  }\n  return new goog.soy.data.UnsanitizedText(contentString, opt_contentDir);\n};\n\n\n/**\n * Creates kind=\"html\" block contents (internal use only).\n *\n * @param {*} content Text.\n * @param {?goog.i18n.bidi.Dir=} opt_contentDir The content direction; null if\n *     unknown and thus to be estimated when necessary. Default: null.\n * @return {!goog.soy.data.SanitizedHtml|soydata.$$EMPTY_STRING_} Wrapped\n *     result.\n */\nsoydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks =\n    soydata.$$makeSanitizedContentFactoryForInternalBlocks_(\n        goog.soy.data.SanitizedHtml);\n\n\n/**\n * Creates kind=\"js\" block contents (internal use only).\n *\n * @param {*} content Text.\n * @return {!goog.soy.data.SanitizedJs|soydata.$$EMPTY_STRING_} Wrapped result.\n */\nsoydata.VERY_UNSAFE.$$ordainSanitizedJsForInternalBlocks =\n    soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(\n        goog.soy.data.SanitizedJs);\n\n\n/**\n * Creates kind=\"trustedResourceUri\" block contents (internal use only).\n *\n * @param {*} content Text.\n * @return {goog.soy.data.SanitizedTrustedResourceUri|soydata.$$EMPTY_STRING_}\n *     Wrapped result.\n */\nsoydata.VERY_UNSAFE.$$ordainSanitizedTrustedResourceUriForInternalBlocks =\n    soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(\n        goog.soy.data.SanitizedTrustedResourceUri);\n\n\n/**\n * Creates kind=\"uri\" block contents (internal use only).\n *\n * @param {*} content Text.\n * @return {goog.soy.data.SanitizedUri|soydata.$$EMPTY_STRING_} Wrapped result.\n */\nsoydata.VERY_UNSAFE.$$ordainSanitizedUriForInternalBlocks =\n    soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(\n        goog.soy.data.SanitizedUri);\n\n\n/**\n * Creates kind=\"attributes\" block contents (internal use only).\n *\n * @param {*} content Text.\n * @return {goog.soy.data.SanitizedHtmlAttribute|soydata.$$EMPTY_STRING_}\n *     Wrapped result.\n */\nsoydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks =\n    soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(\n        goog.soy.data.SanitizedHtmlAttribute);\n\n\n/**\n * Creates kind=\"style\" block contents (internal use only).\n *\n * @param {*} content Text.\n * @return {goog.soy.data.SanitizedStyle|soydata.$$EMPTY_STRING_} Wrapped\n *     result.\n */\nsoydata.VERY_UNSAFE.$$ordainSanitizedStyleForInternalBlocks =\n    soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(\n        goog.soy.data.SanitizedStyle);\n\n\n/**\n * Creates kind=\"css\" block contents (internal use only).\n *\n * @param {*} content Text.\n * @return {goog.soy.data.SanitizedCss|soydata.$$EMPTY_STRING_} Wrapped result.\n */\nsoydata.VERY_UNSAFE.$$ordainSanitizedCssForInternalBlocks =\n    soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(\n        goog.soy.data.SanitizedCss);\n\n\n// -----------------------------------------------------------------------------\n// Escape/filter/normalize.\n\n\n/**\n * Returns a SanitizedHtml object for a particular value. The content direction\n * is preserved.\n *\n * This HTML-escapes the value unless it is already SanitizedHtml. Escapes\n * double quote '\"' in addition to '&', '<', and '>' so that a string can be\n * included in an HTML tag attribute value within double quotes.\n *\n * @param {*} value The value to convert. If it is already a SanitizedHtml\n *     object, it is left alone.\n * @return {!goog.soy.data.SanitizedHtml} An escaped version of value.\n */\nsoy.$$escapeHtml = function(value) {\n  return soydata.SanitizedHtml.from(value);\n};\n\n\n/**\n * Strips unsafe tags to convert a string of untrusted HTML into HTML that\n * is safe to embed. The content direction is preserved.\n *\n * @param {?} value The string-like value to be escaped. May not be a string,\n *     but the value will be coerced to a string.\n * @param {Array<string>=} opt_safeTags Additional tag names to whitelist.\n * @return {!goog.soy.data.SanitizedHtml} A sanitized and normalized version of\n *     value.\n */\nsoy.$$cleanHtml = function(value, opt_safeTags) {\n  if (soydata.isContentKind_(value, goog.soy.data.SanitizedContentKind.HTML)) {\n    goog.asserts.assert(value.constructor === goog.soy.data.SanitizedHtml);\n    return /** @type {!goog.soy.data.SanitizedHtml} */ (value);\n  }\n  var tagWhitelist;\n  if (opt_safeTags) {\n    tagWhitelist = goog.object.createSet(opt_safeTags);\n    goog.object.extend(tagWhitelist, soy.esc.$$SAFE_TAG_WHITELIST_);\n  } else {\n    tagWhitelist = soy.esc.$$SAFE_TAG_WHITELIST_;\n  }\n  return soydata.VERY_UNSAFE.ordainSanitizedHtml(\n      soy.$$stripHtmlTags(value, tagWhitelist), soydata.getContentDir(value));\n};\n\n\n/**\n * Escapes HTML, except preserves entities.\n *\n * Used mainly internally for escaping message strings in attribute and rcdata\n * context, where we explicitly want to preserve any existing entities.\n *\n * @param {*} value Value to normalize.\n * @return {string} A value safe to insert in HTML without any quotes or angle\n *     brackets.\n */\nsoy.$$normalizeHtml = function(value) {\n  return soy.esc.$$normalizeHtmlHelper(value);\n};\n\n\n/**\n * Escapes HTML special characters in a string so that it can be embedded in\n * RCDATA.\n * <p>\n * Escapes HTML special characters so that the value will not prematurely end\n * the body of a tag like {@code <textarea>} or {@code <title>}. RCDATA tags\n * cannot contain other HTML entities, so it is not strictly necessary to escape\n * HTML special characters except when part of that text looks like an HTML\n * entity or like a close tag : {@code </textarea>}.\n * <p>\n * Will normalize known safe HTML to make sure that sanitized HTML (which could\n * contain an innocuous {@code </textarea>} don't prematurely end an RCDATA\n * element.\n *\n * @param {?} value The string-like value to be escaped. May not be a string,\n *     but the value will be coerced to a string.\n * @return {string} An escaped version of value.\n */\nsoy.$$escapeHtmlRcdata = function(value) {\n  if (soydata.isContentKind_(value, goog.soy.data.SanitizedContentKind.HTML)) {\n    goog.asserts.assert(value.constructor === goog.soy.data.SanitizedHtml);\n    return soy.esc.$$normalizeHtmlHelper(value.getContent());\n  }\n  return soy.esc.$$escapeHtmlHelper(value);\n};\n\n\n/**\n * Matches any/only HTML5 void elements' start tags.\n * See http://www.w3.org/TR/html-markup/syntax.html#syntax-elements\n * @type {RegExp}\n * @private\n */\nsoy.$$HTML5_VOID_ELEMENTS_ = new RegExp(\n    '^<(?:area|base|br|col|command|embed|hr|img|input' +\n    '|keygen|link|meta|param|source|track|wbr)\\\\b');\n\n\n/**\n * Removes HTML tags from a string of known safe HTML.\n * If opt_tagWhitelist is not specified or is empty, then\n * the result can be used as an attribute value.\n *\n * @param {*} value The HTML to be escaped. May not be a string, but the\n *     value will be coerced to a string.\n * @param {Object<string, boolean>=} opt_tagWhitelist Has an own property whose\n *     name is a lower-case tag name and whose value is `1` for\n *     each element that is allowed in the output.\n * @return {string} A representation of value without disallowed tags,\n *     HTML comments, or other non-text content.\n */\nsoy.$$stripHtmlTags = function(value, opt_tagWhitelist) {\n  if (!opt_tagWhitelist) {\n    // If we have no white-list, then use a fast track which elides all tags.\n    return String(value).replace(soy.esc.$$HTML_TAG_REGEX_, '')\n        // This is just paranoia since callers should normalize the result\n        // anyway, but if they didn't, it would be necessary to ensure that\n        // after the first replace non-tag uses of < do not recombine into\n        // tags as in \"<<foo>script>alert(1337)</<foo>script>\".\n        .replace(soy.esc.$$LT_REGEX_, '&lt;');\n  }\n\n  // Escapes '[' so that we can use [123] below to mark places where tags\n  // have been removed.\n  var html = String(value).replace(/\\[/g, '&#91;');\n\n  // Consider all uses of '<' and replace whitelisted tags with markers like\n  // [1] which are indices into a list of approved tag names.\n  // Replace all other uses of < and > with entities.\n  var tags = [];\n  var attrs = [];\n  html = html.replace(\n    soy.esc.$$HTML_TAG_REGEX_,\n    function(tok, tagName) {\n      if (tagName) {\n        tagName = tagName.toLowerCase();\n        if (opt_tagWhitelist.hasOwnProperty(tagName) &&\n            opt_tagWhitelist[tagName]) {\n          var isClose = tok.charAt(1) == '/';\n          var index = tags.length;\n          var start = '</';\n          var attributes = '';\n          if (!isClose) {\n            start = '<';\n            var match;\n            while ((match = soy.esc.$$HTML_ATTRIBUTE_REGEX_.exec(tok))) {\n              if (match[1] && match[1].toLowerCase() == 'dir') {\n                var dir = match[2];\n                if (dir) {\n                  if (dir.charAt(0) == '\\'' || dir.charAt(0) == '\"') {\n                    dir = dir.substr(1, dir.length - 2);\n                  }\n                  dir = dir.toLowerCase();\n                  if (dir == 'ltr' || dir == 'rtl' || dir == 'auto') {\n                    attributes = ' dir=\"' + dir + '\"';\n                  }\n                }\n                break;\n              }\n            }\n            soy.esc.$$HTML_ATTRIBUTE_REGEX_.lastIndex = 0;\n          }\n          tags[index] = start + tagName + '>';\n          attrs[index] = attributes;\n          return '[' + index + ']';\n        }\n      }\n      return '';\n    });\n\n  // Escape HTML special characters. Now there are no '<' in html that could\n  // start a tag.\n  html = soy.esc.$$normalizeHtmlHelper(html);\n\n  var finalCloseTags = soy.$$balanceTags_(tags);\n\n  // Now html contains no tags or less-than characters that could become\n  // part of a tag via a replacement operation and tags only contains\n  // approved tags.\n  // Reinsert the white-listed tags.\n  html = html.replace(/\\[(\\d+)\\]/g, function(_, index) {\n    if (attrs[index] && tags[index]) {\n      return tags[index].substr(0, tags[index].length - 1) + attrs[index] + '>';\n    }\n    return tags[index];\n  });\n\n  // Close any still open tags.\n  // This prevents unclosed formatting elements like <ol> and <table> from\n  // breaking the layout of containing HTML.\n  return html + finalCloseTags;\n};\n\n\n/**\n * Make sure that tag boundaries are not broken by Safe CSS when embedded in a\n * {@code <style>} element.\n * @param {string} css\n * @return {string}\n * @private\n */\nsoy.$$embedCssIntoHtml_ = function(css) {\n  // Port of a method of the same name in\n  // com.google.template.soy.shared.restricted.Sanitizers\n  return css.replace(/<\\//g, '<\\\\/').replace(/\\]\\]>/g, ']]\\\\>');\n};\n\n\n/**\n * Throw out any close tags that don't correspond to start tags.\n * If {@code <table>} is used for formatting, embedded HTML shouldn't be able\n * to use a mismatched {@code </table>} to break page layout.\n *\n * @param {Array<string>} tags Array of open/close tags (e.g. '<p>', '</p>')\n *    that will be modified in place to be either an open tag, one or more close\n *    tags concatenated, or the empty string.\n * @return {string} zero or more closed tags that close all elements that are\n *    opened in tags but not closed.\n * @private\n */\nsoy.$$balanceTags_ = function(tags) {\n  var open = [];\n  for (var i = 0, n = tags.length; i < n; ++i) {\n    var tag = tags[i];\n    if (tag.charAt(1) == '/') {\n      var openTagIndex = goog.array.lastIndexOf(open, tag);\n      if (openTagIndex < 0) {\n        tags[i] = '';  // Drop close tag with no corresponding open tag.\n      } else {\n        tags[i] = open.slice(openTagIndex).reverse().join('');\n        open.length = openTagIndex;\n      }\n    } else if (tag == '<li>' &&\n        goog.array.lastIndexOf(open, '</ol>') < 0 &&\n        goog.array.lastIndexOf(open, '</ul>') < 0) {\n      // Drop <li> if it isn't nested in a parent <ol> or <ul>.\n      tags[i] = '';\n    } else if (!soy.$$HTML5_VOID_ELEMENTS_.test(tag)) {\n      open.push('</' + tag.substring(1));\n    }\n  }\n  return open.reverse().join('');\n};\n\n\n/**\n * Escapes HTML special characters in an HTML attribute value.\n *\n * @param {?} value The HTML to be escaped. May not be a string, but the\n *     value will be coerced to a string.\n * @return {string} An escaped version of value.\n */\nsoy.$$escapeHtmlAttribute = function(value) {\n  // NOTE: We don't accept ATTRIBUTES here because ATTRIBUTES is actually not\n  // the attribute value context, but instead k/v pairs.\n  if (soydata.isContentKind_(value, goog.soy.data.SanitizedContentKind.HTML)) {\n    // NOTE: After removing tags, we also escape quotes (\"normalize\") so that\n    // the HTML can be embedded in attribute context.\n    goog.asserts.assert(value.constructor === goog.soy.data.SanitizedHtml);\n    return soy.esc.$$normalizeHtmlHelper(\n        soy.$$stripHtmlTags(value.getContent()));\n  }\n  return soy.esc.$$escapeHtmlHelper(value);\n};\n\n\n/**\n * Escapes HTML special characters in a string including space and other\n * characters that can end an unquoted HTML attribute value.\n *\n * @param {?} value The HTML to be escaped. May not be a string, but the\n *     value will be coerced to a string.\n * @return {string} An escaped version of value.\n */\nsoy.$$escapeHtmlAttributeNospace = function(value) {\n  if (soydata.isContentKind_(value, goog.soy.data.SanitizedContentKind.HTML)) {\n    goog.asserts.assert(value.constructor === goog.soy.data.SanitizedHtml);\n    return soy.esc.$$normalizeHtmlNospaceHelper(\n        soy.$$stripHtmlTags(value.getContent()));\n  }\n  return soy.esc.$$escapeHtmlNospaceHelper(value);\n};\n\n\n/**\n * Filters out strings that cannot be a substring of a valid HTML attribute.\n *\n * Note the input is expected to be key=value pairs.\n *\n * @param {?} value The value to escape. May not be a string, but the value\n *     will be coerced to a string.\n * @return {string} A valid HTML attribute name part or name/value pair.\n *     {@code \"zSoyz\"} if the input is invalid.\n */\nsoy.$$filterHtmlAttributes = function(value) {\n  // NOTE: Explicitly no support for SanitizedContentKind.HTML, since that is\n  // meaningless in this context, which is generally *between* html attributes.\n  if (soydata.isContentKind_(\n    value, goog.soy.data.SanitizedContentKind.ATTRIBUTES)) {\n    goog.asserts.assert(\n        value.constructor === goog.soy.data.SanitizedHtmlAttribute);\n    // Add a space at the end to ensure this won't get merged into following\n    // attributes, unless the interpretation is unambiguous (ending with quotes\n    // or a space).\n    return value.getContent().replace(/([^\"'\\s])$/, '$1 ');\n  }\n  // TODO: Dynamically inserting attributes that aren't marked as trusted is\n  // probably unnecessary.  Any filtering done here will either be inadequate\n  // for security or not flexible enough.  Having clients use kind=\"attributes\"\n  // in parameters seems like a wiser idea.\n  return soy.esc.$$filterHtmlAttributesHelper(value);\n};\n\n\n/**\n * Filters out strings that cannot be a substring of a valid HTML element name.\n *\n * @param {*} value The value to escape. May not be a string, but the value\n *     will be coerced to a string.\n * @return {string} A valid HTML element name part.\n *     {@code \"zSoyz\"} if the input is invalid.\n */\nsoy.$$filterHtmlElementName = function(value) {\n  // NOTE: We don't accept any SanitizedContent here. HTML indicates valid\n  // PCDATA, not tag names. A sloppy developer shouldn't be able to cause an\n  // exploit:\n  // ... {let userInput}script src=http://evil.com/evil.js{/let} ...\n  // ... {param tagName kind=\"html\"}{$userInput}{/param} ...\n  // ... <{$tagName}>Hello World</{$tagName}>\n  return soy.esc.$$filterHtmlElementNameHelper(value);\n};\n\n\n/**\n * Escapes characters in the value to make it valid content for a JS string\n * literal.\n *\n * @param {*} value The value to escape. May not be a string, but the value\n *     will be coerced to a string.\n * @return {string} An escaped version of value.\n */\nsoy.$$escapeJsString = function(value) {\n  return soy.esc.$$escapeJsStringHelper(value);\n};\n\n\n/**\n * Encodes a value as a JavaScript literal.\n *\n * @param {*} value The value to escape. May not be a string, but the value\n *     will be coerced to a string.\n * @return {string} A JavaScript code representation of the input.\n */\nsoy.$$escapeJsValue = function(value) {\n  // We surround values with spaces so that they can't be interpolated into\n  // identifiers by accident.\n  // We could use parentheses but those might be interpreted as a function call.\n  if (value == null) {  // Intentionally matches undefined.\n    // Java returns null from maps where there is no corresponding key while\n    // JS returns undefined.\n    // We always output null for compatibility with Java which does not have a\n    // distinct undefined value.\n    return ' null ';\n  }\n  if (soydata.isContentKind_(value, goog.soy.data.SanitizedContentKind.JS)) {\n    goog.asserts.assert(value.constructor === goog.soy.data.SanitizedJs);\n    return value.getContent();\n  }\n  if (value instanceof goog.html.SafeScript) {\n    return goog.html.SafeScript.unwrap(value);\n  }\n  switch (typeof value) {\n    case 'boolean': case 'number':\n      return ' ' + value + ' ';\n    default:\n      return \"'\" + soy.esc.$$escapeJsStringHelper(String(value)) + \"'\";\n  }\n};\n\n\n/**\n * Escapes characters in the string to make it valid content for a JS regular\n * expression literal.\n *\n * @param {*} value The value to escape. May not be a string, but the value\n *     will be coerced to a string.\n * @return {string} An escaped version of value.\n */\nsoy.$$escapeJsRegex = function(value) {\n  return soy.esc.$$escapeJsRegexHelper(value);\n};\n\n\n/**\n * Matches all URI mark characters that conflict with HTML attribute delimiters\n * or that cannot appear in a CSS uri.\n * From <a href=\"http://www.w3.org/TR/CSS2/grammar.html\">G.2: CSS grammar</a>\n * <pre>\n *     url        ([!#$%&*-~]|{nonascii}|{escape})*\n * </pre>\n *\n * @type {RegExp}\n * @private\n */\nsoy.$$problematicUriMarks_ = /['()]/g;\n\n/**\n * @param {string} ch A single character in {@link soy.$$problematicUriMarks_}.\n * @return {string}\n * @private\n */\nsoy.$$pctEncode_ = function(ch) {\n  return '%' + ch.charCodeAt(0).toString(16);\n};\n\n/**\n * Escapes a string so that it can be safely included in a URI.\n *\n * @param {*} value The value to escape. May not be a string, but the value\n *     will be coerced to a string.\n * @return {string} An escaped version of value.\n */\nsoy.$$escapeUri = function(value) {\n  // NOTE: We don't check for SanitizedUri or SafeUri, because just because\n  // something is already a valid complete URL doesn't mean we don't want to\n  // encode it as a component.  For example, it would be bad if\n  // ?redirect={$url} didn't escape ampersands, because in that template, the\n  // continue URL should be treated as a single unit.\n\n  // Apostophes and parentheses are not matched by encodeURIComponent.\n  // They are technically special in URIs, but only appear in the obsolete mark\n  // production in Appendix D.2 of RFC 3986, so can be encoded without changing\n  // semantics.\n  var encoded = soy.esc.$$escapeUriHelper(value);\n  soy.$$problematicUriMarks_.lastIndex = 0;\n  if (soy.$$problematicUriMarks_.test(encoded)) {\n    return encoded.replace(soy.$$problematicUriMarks_, soy.$$pctEncode_);\n  }\n  return encoded;\n};\n\n\n/**\n * Removes rough edges from a URI by escaping any raw HTML/JS string delimiters.\n *\n * @param {*} value The value to escape. May not be a string, but the value\n *     will be coerced to a string.\n * @return {string} An escaped version of value.\n */\nsoy.$$normalizeUri = function(value) {\n  return soy.esc.$$normalizeUriHelper(value);\n};\n\n\n/**\n * Vets a URI's protocol and removes rough edges from a URI by escaping\n * any raw HTML/JS string delimiters.\n *\n * @param {?} value The value to escape. May not be a string, but the value\n *     will be coerced to a string.\n * @return {string} An escaped version of value.\n */\nsoy.$$filterNormalizeUri = function(value) {\n  if (soydata.isContentKind_(value, goog.soy.data.SanitizedContentKind.URI)) {\n    goog.asserts.assert(value.constructor === goog.soy.data.SanitizedUri);\n    return soy.$$normalizeUri(value);\n  }\n  if (soydata.isContentKind_(value,\n      goog.soy.data.SanitizedContentKind.TRUSTED_RESOURCE_URI)) {\n    goog.asserts.assert(\n        value.constructor === goog.soy.data.SanitizedTrustedResourceUri);\n    return soy.$$normalizeUri(value);\n  }\n  if (value instanceof goog.html.SafeUrl) {\n    return soy.$$normalizeUri(goog.html.SafeUrl.unwrap(value));\n  }\n  if (value instanceof goog.html.TrustedResourceUrl) {\n    return soy.$$normalizeUri(goog.html.TrustedResourceUrl.unwrap(value));\n  }\n  return soy.esc.$$filterNormalizeUriHelper(value);\n};\n\n\n/**\n * Vets a URI for usage as an image source.\n *\n * @param {?} value The value to filter. Might not be a string, but the value\n *     will be coerced to a string.\n * @return {string} An escaped version of value.\n */\nsoy.$$filterNormalizeMediaUri = function(value) {\n  // Image URIs are filtered strictly more loosely than other types of URIs.\n  // TODO(shwetakarwa): Add tests for this in soyutils_test_helper while adding\n  // tests for filterTrustedResourceUri.\n  if (soydata.isContentKind_(value, goog.soy.data.SanitizedContentKind.URI)) {\n    goog.asserts.assert(value.constructor === goog.soy.data.SanitizedUri);\n    return soy.$$normalizeUri(value);\n  }\n  if (soydata.isContentKind_(value,\n      goog.soy.data.SanitizedContentKind.TRUSTED_RESOURCE_URI)) {\n    goog.asserts.assert(\n        value.constructor === goog.soy.data.SanitizedTrustedResourceUri);\n    return soy.$$normalizeUri(value);\n  }\n  if (value instanceof goog.html.SafeUrl) {\n    return soy.$$normalizeUri(goog.html.SafeUrl.unwrap(value));\n  }\n  if (value instanceof goog.html.TrustedResourceUrl) {\n    return soy.$$normalizeUri(goog.html.TrustedResourceUrl.unwrap(value));\n  }\n  return soy.esc.$$filterNormalizeMediaUriHelper(value);\n};\n\n\n/**\n * Vets a URI for usage as a resource. Makes sure the input value is a compile\n * time constant or a TrustedResouce not in attacker's control.\n *\n * @param {?} value The value to filter.\n * @return {string} The value content.\n */\nsoy.$$filterTrustedResourceUri = function(value) {\n  if (soydata.isContentKind_(value,\n      goog.soy.data.SanitizedContentKind.TRUSTED_RESOURCE_URI)) {\n    goog.asserts.assert(\n        value.constructor === goog.soy.data.SanitizedTrustedResourceUri);\n    return value.getContent();\n  }\n  if (value instanceof goog.html.TrustedResourceUrl) {\n    return goog.html.TrustedResourceUrl.unwrap(value);\n  }\n  goog.asserts.fail('Bad value `%s` for |filterTrustedResourceUri',\n      [String(value)]);\n  return 'about:invalid#zSoyz';\n};\n\n\n/**\n * For any resource string/variable which has\n * |blessStringAsTrustedResuorceUrlForLegacy directive return the value as is.\n *\n * @param {*} value The value to be blessed. Might not be a string\n * @return {*} value Return current value.\n */\nsoy.$$blessStringAsTrustedResourceUrlForLegacy = function(value) {\n  return value;\n};\n\n\n/**\n * Allows only data-protocol image URI's.\n *\n * @param {*} value The value to process. May not be a string, but the value\n *     will be coerced to a string.\n * @return {!goog.soy.data.SanitizedUri} An escaped version of value.\n */\nsoy.$$filterImageDataUri = function(value) {\n  // NOTE: Even if it's a SanitizedUri, we will still filter it.\n  return soydata.VERY_UNSAFE.ordainSanitizedUri(\n      soy.esc.$$filterImageDataUriHelper(value));\n};\n\n\n/**\n * Allows only sip URIs.\n *\n * @param {*} value The value to process. May not be a string, but the value\n *     will be coerced to a string.\n * @return {!goog.soy.data.SanitizedUri} An escaped version of value.\n */\nsoy.$$filterSipUri = function(value) {\n  // NOTE: Even if it's a SanitizedUri, we will still filter it.\n  return soydata.VERY_UNSAFE.ordainSanitizedUri(\n      soy.esc.$$filterSipUriHelper(value));\n};\n\n\n/**\n * Allows only tel URIs.\n *\n * @param {*} value The value to process. May not be a string, but the value\n *     will be coerced to a string.\n * @return {!goog.soy.data.SanitizedUri} An escaped version of value.\n */\nsoy.$$filterTelUri = function(value) {\n  // NOTE: Even if it's a SanitizedUri, we will still filter it.\n  return soydata.VERY_UNSAFE.ordainSanitizedUri(\n      soy.esc.$$filterTelUriHelper(value));\n};\n\n\n/**\n * Escapes a string so it can safely be included inside a quoted CSS string.\n *\n * @param {*} value The value to escape. May not be a string, but the value\n *     will be coerced to a string.\n * @return {string} An escaped version of value.\n */\nsoy.$$escapeCssString = function(value) {\n  return soy.esc.$$escapeCssStringHelper(value);\n};\n\n\n/**\n * Encodes a value as a CSS identifier part, keyword, or quantity.\n *\n * @param {?} value The value to escape. May not be a string, but the value\n *     will be coerced to a string.\n * @return {string} A safe CSS identifier part, keyword, or quanitity.\n */\nsoy.$$filterCssValue = function(value) {\n  if (soydata.isContentKind_(value, goog.soy.data.SanitizedContentKind.CSS)) {\n    goog.asserts.assertInstanceof(value, goog.soy.data.SanitizedCss);\n    return soy.$$embedCssIntoHtml_(value.getContent());\n  }\n  // Uses == to intentionally match null and undefined for Java compatibility.\n  if (value == null) {\n    return '';\n  }\n  if (value instanceof goog.html.SafeStyle) {\n    return soy.$$embedCssIntoHtml_(goog.html.SafeStyle.unwrap(value));\n  }\n  // Note: SoyToJsSrcCompiler uses soy.$$filterCssValue both for the contents of\n  // <style> (list of rules) and for the contents of style=\"\" (one set of\n  // declarations). We support SafeStyleSheet here to be used inside <style> but\n  // it also wrongly allows it inside style=\"\". We should instead change\n  // SoyToJsSrcCompiler to use a different function inside <style>.\n  if (value instanceof goog.html.SafeStyleSheet) {\n    return soy.$$embedCssIntoHtml_(goog.html.SafeStyleSheet.unwrap(value));\n  }\n  return soy.esc.$$filterCssValueHelper(value);\n};\n\n\n/**\n * Sanity-checks noAutoescape input for explicitly tainted content.\n *\n * SanitizedContentKind.TEXT is used to explicitly mark input that was never\n * meant to be used unescaped.\n *\n * @param {?} value The value to filter.\n * @return {*} The value, that we dearly hope will not cause an attack.\n */\nsoy.$$filterNoAutoescape = function(value) {\n  if (soydata.isContentKind_(value, goog.soy.data.SanitizedContentKind.TEXT)) {\n    // Fail in development mode.\n    goog.asserts.fail(\n        'Tainted SanitizedContentKind.TEXT for |noAutoescape: `%s`',\n        [value.getContent()]);\n    // Return innocuous data in production.\n    return 'zSoyz';\n  }\n\n  return value;\n};\n\n\n// -----------------------------------------------------------------------------\n// Basic directives/functions.\n\n\n/**\n * Converts \\r\\n, \\r, and \\n to <br>s\n * @param {*} value The string in which to convert newlines.\n * @return {string|!goog.soy.data.SanitizedHtml} A copy of `value` with\n *     converted newlines. If `value` is SanitizedHtml, the return value\n *     is also SanitizedHtml, of the same known directionality.\n */\nsoy.$$changeNewlineToBr = function(value) {\n  var result = goog.string.newLineToBr(String(value), false);\n  if (soydata.isContentKind_(value, goog.soy.data.SanitizedContentKind.HTML)) {\n    return soydata.VERY_UNSAFE.ordainSanitizedHtml(\n        result, soydata.getContentDir(value));\n  }\n  return result;\n};\n\n\n/**\n * Inserts word breaks ('wbr' tags) into a HTML string at a given interval. The\n * counter is reset if a space is encountered. Word breaks aren't inserted into\n * HTML tags or entities. Entites count towards the character count; HTML tags\n * do not.\n *\n * @param {*} value The HTML string to insert word breaks into. Can be other\n *     types, but the value will be coerced to a string.\n * @param {number} maxCharsBetweenWordBreaks Maximum number of non-space\n *     characters to allow before adding a word break.\n * @return {string|!goog.soy.data.SanitizedHtml} The string including word\n *     breaks. If `value` is SanitizedHtml, the return value\n *     is also SanitizedHtml, of the same known directionality.\n * @deprecated The |insertWordBreaks directive is deprecated.\n *     Prefer wrapping with CSS white-space: break-word.\n */\nsoy.$$insertWordBreaks = function(value, maxCharsBetweenWordBreaks) {\n  var result = goog.format.insertWordBreaks(\n      String(value), maxCharsBetweenWordBreaks);\n  if (soydata.isContentKind_(value, goog.soy.data.SanitizedContentKind.HTML)) {\n    return soydata.VERY_UNSAFE.ordainSanitizedHtml(\n        result, soydata.getContentDir(value));\n  }\n  return result;\n};\n\n\n/**\n * Truncates a string to a given max length (if it's currently longer),\n * optionally adding ellipsis at the end.\n *\n * @param {*} str The string to truncate. Can be other types, but the value will\n *     be coerced to a string.\n * @param {number} maxLen The maximum length of the string after truncation\n *     (including ellipsis, if applicable).\n * @param {boolean} doAddEllipsis Whether to add ellipsis if the string needs\n *     truncation.\n * @return {string} The string after truncation.\n */\nsoy.$$truncate = function(str, maxLen, doAddEllipsis) {\n\n  str = String(str);\n  if (str.length <= maxLen) {\n    return str;  // no need to truncate\n  }\n\n  // If doAddEllipsis, either reduce maxLen to compensate, or else if maxLen is\n  // too small, just turn off doAddEllipsis.\n  if (doAddEllipsis) {\n    if (maxLen > 3) {\n      maxLen -= 3;\n    } else {\n      doAddEllipsis = false;\n    }\n  }\n\n  // Make sure truncating at maxLen doesn't cut up a unicode surrogate pair.\n  if (soy.$$isHighSurrogate_(str.charCodeAt(maxLen - 1)) &&\n      soy.$$isLowSurrogate_(str.charCodeAt(maxLen))) {\n    maxLen -= 1;\n  }\n\n  // Truncate.\n  str = str.substring(0, maxLen);\n\n  // Add ellipsis.\n  if (doAddEllipsis) {\n    str += '...';\n  }\n\n  return str;\n};\n\n/**\n * Private helper for $$truncate() to check whether a char is a high surrogate.\n * @param {number} cc The codepoint to check.\n * @return {boolean} Whether the given codepoint is a unicode high surrogate.\n * @private\n */\nsoy.$$isHighSurrogate_ = function(cc) {\n  return 0xD800 <= cc && cc <= 0xDBFF;\n};\n\n/**\n * Private helper for $$truncate() to check whether a char is a low surrogate.\n * @param {number} cc The codepoint to check.\n * @return {boolean} Whether the given codepoint is a unicode low surrogate.\n * @private\n */\nsoy.$$isLowSurrogate_ = function(cc) {\n  return 0xDC00 <= cc && cc <= 0xDFFF;\n};\n\n\n// -----------------------------------------------------------------------------\n// Bidi directives/functions.\n\n\n/**\n * Cache of bidi formatter by context directionality, so we don't keep on\n * creating new objects.\n * @type {!Object<!goog.i18n.BidiFormatter>}\n * @private\n */\nsoy.$$bidiFormatterCache_ = {};\n\n\n/**\n * Returns cached bidi formatter for bidiGlobalDir, or creates a new one.\n * @param {number} bidiGlobalDir The global directionality context: 1 if ltr, -1\n *     if rtl, 0 if unknown.\n * @return {!goog.i18n.BidiFormatter} A formatter for bidiGlobalDir.\n * @private\n */\nsoy.$$getBidiFormatterInstance_ = function(bidiGlobalDir) {\n  return soy.$$bidiFormatterCache_[bidiGlobalDir] ||\n         (soy.$$bidiFormatterCache_[bidiGlobalDir] =\n             new goog.i18n.BidiFormatter(bidiGlobalDir));\n};\n\n\n/**\n * Estimate the overall directionality of text. If opt_isHtml, makes sure to\n * ignore the LTR nature of the mark-up and escapes in text, making the logic\n * suitable for HTML and HTML-escaped text.\n * If text has a goog.i18n.bidi.Dir-valued contentDir, this is used instead of\n * estimating the directionality.\n *\n * @param {*} text The content whose directionality is to be estimated.\n * @param {boolean=} opt_isHtml Whether text is HTML/HTML-escaped.\n *     Default: false.\n * @return {number} 1 if text is LTR, -1 if it is RTL, and 0 if it is neutral.\n */\nsoy.$$bidiTextDir = function(text, opt_isHtml) {\n  var contentDir = soydata.getContentDir(text);\n  if (contentDir != null) {\n    return contentDir;\n  }\n  var isHtml = opt_isHtml ||\n      soydata.isContentKind_(text, goog.soy.data.SanitizedContentKind.HTML);\n  return goog.i18n.bidi.estimateDirection(text + '', isHtml);\n};\n\n\n/**\n * Returns 'dir=\"ltr\"' or 'dir=\"rtl\"', depending on text's estimated\n * directionality, if it is not the same as bidiGlobalDir.\n * Otherwise, returns the empty string.\n * If opt_isHtml, makes sure to ignore the LTR nature of the mark-up and escapes\n * in text, making the logic suitable for HTML and HTML-escaped text.\n * If text has a goog.i18n.bidi.Dir-valued contentDir, this is used instead of\n * estimating the directionality.\n *\n * @param {number} bidiGlobalDir The global directionality context: 1 if ltr, -1\n *     if rtl, 0 if unknown.\n * @param {*} text The content whose directionality is to be estimated.\n * @param {boolean=} opt_isHtml Whether text is HTML/HTML-escaped.\n *     Default: false.\n * @return {!goog.soy.data.SanitizedHtmlAttribute} 'dir=\"rtl\"' for RTL text in\n *     non-RTL context; 'dir=\"ltr\"' for LTR text in non-LTR context;\n *     else, the empty string.\n */\nsoy.$$bidiDirAttr = function(bidiGlobalDir, text, opt_isHtml) {\n  var formatter = soy.$$getBidiFormatterInstance_(bidiGlobalDir);\n  var contentDir = soydata.getContentDir(text);\n  if (contentDir == null) {\n    var isHtml = opt_isHtml ||\n        soydata.isContentKind_(text, goog.soy.data.SanitizedContentKind.HTML);\n    contentDir = goog.i18n.bidi.estimateDirection(text + '', isHtml);\n  }\n  return soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute(\n      formatter.knownDirAttr(contentDir));\n};\n\n\n/**\n * Returns a Unicode BiDi mark matching bidiGlobalDir (LRM or RLM) if the\n * directionality or the exit directionality of text are opposite to\n * bidiGlobalDir. Otherwise returns the empty string.\n * If opt_isHtml, makes sure to ignore the LTR nature of the mark-up and escapes\n * in text, making the logic suitable for HTML and HTML-escaped text.\n * If text has a goog.i18n.bidi.Dir-valued contentDir, this is used instead of\n * estimating the directionality.\n *\n * @param {number} bidiGlobalDir The global directionality context: 1 if ltr, -1\n *     if rtl, 0 if unknown.\n * @param {*} text The content whose directionality is to be estimated.\n * @param {boolean=} opt_isHtml Whether text is HTML/HTML-escaped.\n *     Default: false.\n * @return {string} A Unicode bidi mark matching bidiGlobalDir, or the empty\n *     string when text's overall and exit directionalities both match\n *     bidiGlobalDir, or bidiGlobalDir is 0 (unknown).\n */\nsoy.$$bidiMarkAfter = function(bidiGlobalDir, text, opt_isHtml) {\n  var formatter = soy.$$getBidiFormatterInstance_(bidiGlobalDir);\n  var isHtml = opt_isHtml ||\n      soydata.isContentKind_(text, goog.soy.data.SanitizedContentKind.HTML);\n  return formatter.markAfterKnownDir(soydata.getContentDir(text), text + '',\n      isHtml);\n};\n\n\n/**\n * Returns text wrapped in a <span dir=\"ltr|rtl\"> according to its\n * directionality - but only if that is neither neutral nor the same as the\n * global context. Otherwise, returns text unchanged.\n * Always treats text as HTML/HTML-escaped, i.e. ignores mark-up and escapes\n * when estimating text's directionality.\n * If text has a goog.i18n.bidi.Dir-valued contentDir, this is used instead of\n * estimating the directionality.\n *\n * @param {number} bidiGlobalDir The global directionality context: 1 if ltr, -1\n *     if rtl, 0 if unknown.\n * @param {*} text The string to be wrapped. Can be other types, but the value\n *     will be coerced to a string.\n * @return {!goog.soy.data.SanitizedContent|string} The wrapped text.\n */\nsoy.$$bidiSpanWrap = function(bidiGlobalDir, text) {\n  var formatter = soy.$$getBidiFormatterInstance_(bidiGlobalDir);\n\n  // We always treat the value as HTML, because span-wrapping is only useful\n  // when its output will be treated as HTML (without escaping), and because\n  // |bidiSpanWrap is not itself specified to do HTML escaping in Soy. (Both\n  // explicit and automatic HTML escaping, if any, is done before calling\n  // |bidiSpanWrap because the BidiSpanWrapDirective Java class implements\n  // SanitizedContentOperator, but this does not mean that the input has to be\n  // HTML SanitizedContent. In legacy usage, a string that is not\n  // SanitizedContent is often printed in an autoescape=\"false\" template or by\n  // a print with a |noAutoescape, in which case our input is just SoyData.) If\n  // the output will be treated as HTML, the input had better be safe\n  // HTML/HTML-escaped (even if it isn't HTML SanitizedData), or we have an XSS\n  // opportunity and a much bigger problem than bidi garbling.\n  var html = goog.html.uncheckedconversions.\n      safeHtmlFromStringKnownToSatisfyTypeContract(\n          goog.string.Const.from(\n              'Soy |bidiSpanWrap is applied on an autoescaped text.'),\n          String(text));\n  var wrappedHtml = formatter.spanWrapSafeHtmlWithKnownDir(\n      soydata.getContentDir(text), html);\n\n  // Like other directives whose Java class implements SanitizedContentOperator,\n  // |bidiSpanWrap is called after the escaping (if any) has already been done,\n  // and thus there is no need for it to produce actual SanitizedContent.\n  return goog.html.SafeHtml.unwrap(wrappedHtml);\n};\n\n\n/**\n * Returns text wrapped in Unicode BiDi formatting characters according to its\n * directionality, i.e. either LRE or RLE at the beginning and PDF at the end -\n * but only if text's directionality is neither neutral nor the same as the\n * global context. Otherwise, returns text unchanged.\n * Only treats SanitizedHtml as HTML/HTML-escaped, i.e. ignores mark-up\n * and escapes when estimating text's directionality.\n * If text has a goog.i18n.bidi.Dir-valued contentDir, this is used instead of\n * estimating the directionality.\n *\n * @param {number} bidiGlobalDir The global directionality context: 1 if ltr, -1\n *     if rtl, 0 if unknown.\n * @param {*} text The string to be wrapped. Can be other types, but the value\n *     will be coerced to a string.\n * @return {!goog.soy.data.SanitizedContent|string} The wrapped string.\n */\nsoy.$$bidiUnicodeWrap = function(bidiGlobalDir, text) {\n  var formatter = soy.$$getBidiFormatterInstance_(bidiGlobalDir);\n\n  // We treat the value as HTML if and only if it says it's HTML, even though in\n  // legacy usage, we sometimes have an HTML string (not SanitizedContent) that\n  // is passed to an autoescape=\"false\" template or a {print $foo|noAutoescape},\n  // with the output going into an HTML context without escaping. We simply have\n  // no way of knowing if this is what is happening when we get\n  // non-SanitizedContent input, and most of the time it isn't.\n  var isHtml =\n      soydata.isContentKind_(text, goog.soy.data.SanitizedContentKind.HTML);\n  var wrappedText = formatter.unicodeWrapWithKnownDir(\n      soydata.getContentDir(text), text + '', isHtml);\n\n  // Bidi-wrapping a value converts it to the context directionality. Since it\n  // does not cost us anything, we will indicate this known direction in the\n  // output SanitizedContent, even though the intended consumer of that\n  // information - a bidi wrapping directive - has already been run.\n  var wrappedTextDir = formatter.getContextDir();\n\n  // Unicode-wrapping UnsanitizedText gives UnsanitizedText.\n  // Unicode-wrapping safe HTML or JS string data gives valid, safe HTML or JS\n  // string data.\n  // ATTENTION: Do these need to be ...ForInternalBlocks()?\n  if (soydata.isContentKind_(text, goog.soy.data.SanitizedContentKind.TEXT)) {\n    return new goog.soy.data.UnsanitizedText(wrappedText, wrappedTextDir);\n  }\n  if (isHtml) {\n    return soydata.VERY_UNSAFE.ordainSanitizedHtml(wrappedText, wrappedTextDir);\n  }\n\n  // Unicode-wrapping does not conform to the syntax of the other types of\n  // content. For lack of anything better to do, we we do not declare a content\n  // kind at all by falling through to the non-SanitizedContent case below.\n  // TODO(user): Consider throwing a runtime error on receipt of\n  // SanitizedContent other than TEXT, HTML, or JS_STR_CHARS.\n\n  // The input was not SanitizedContent, so our output isn't SanitizedContent\n  // either.\n  return wrappedText;\n};\n\n// -----------------------------------------------------------------------------\n// Assertion methods used by runtime.\n\n/**\n * Checks if the type assertion is true if goog.asserts.ENABLE_ASSERTS is\n * true. Report errors on runtime types if goog.DEBUG is true.\n * @param {boolean} condition The type check condition.\n * @param {string} paramName The Soy name of the parameter.\n * @param {?} param The JS object for the parameter.\n * @param {string} jsDocTypeStr SoyDoc type str.\n * @return {?} the param value\n * @throws {goog.asserts.AssertionError} When the condition evaluates to false.\n */\nsoy.asserts.assertType = function(condition, paramName, param, jsDocTypeStr) {\n  if (goog.asserts.ENABLE_ASSERTS && !condition) {\n    var msg = 'expected param ' + paramName + ' of type ' + jsDocTypeStr +\n        (goog.DEBUG ? (', but got ' + goog.debug.runtimeType(param)) : '') +\n        '.';\n    goog.asserts.fail(msg);\n  }\n  return param;\n};\n\n\n// -----------------------------------------------------------------------------\n// Used for inspecting Soy template information from rendered pages.\n\n/**\n * Whether we should generate additional HTML comments.\n * @type {boolean}\n */\nsoy.$$debugSoyTemplateInfo = false;\n\nif (goog.DEBUG) {\n  /**\n   * Configures whether we should generate additional HTML comments for\n   * inspecting Soy template information from rendered pages.\n   * @param {boolean} debugSoyTemplateInfo\n   */\n  soy.setDebugSoyTemplateInfo = function(debugSoyTemplateInfo) {\n    soy.$$debugSoyTemplateInfo = debugSoyTemplateInfo;\n  };\n}\n\n// -----------------------------------------------------------------------------\n// Generated code.\n\n\n// START GENERATED CODE FOR ESCAPERS.\n\n/**\n * @type {function (*) : string}\n */\nsoy.esc.$$escapeHtmlHelper = function(v) {\n  return goog.string.htmlEscape(String(v));\n};\n\n/**\n * @type {function (*) : string}\n */\nsoy.esc.$$escapeUriHelper = function(v) {\n  return goog.string.urlEncode(String(v));\n};\n\n/**\n * Maps characters to the escaped versions for the named escape directives.\n * @private {!Object<string, string>}\n */\nsoy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_ = {\n  '\\x00': '\\x26#0;',\n  '\\x09': '\\x26#9;',\n  '\\x0a': '\\x26#10;',\n  '\\x0b': '\\x26#11;',\n  '\\x0c': '\\x26#12;',\n  '\\x0d': '\\x26#13;',\n  ' ': '\\x26#32;',\n  '\\x22': '\\x26quot;',\n  '\\x26': '\\x26amp;',\n  '\\x27': '\\x26#39;',\n  '-': '\\x26#45;',\n  '\\/': '\\x26#47;',\n  '\\x3c': '\\x26lt;',\n  '\\x3d': '\\x26#61;',\n  '\\x3e': '\\x26gt;',\n  '`': '\\x26#96;',\n  '\\x85': '\\x26#133;',\n  '\\xa0': '\\x26#160;',\n  '\\u2028': '\\x26#8232;',\n  '\\u2029': '\\x26#8233;'\n};\n\n/**\n * A function that can be used with String.replace.\n * @param {string} ch A single character matched by a compatible matcher.\n * @return {string} A token in the output language.\n * @private\n */\nsoy.esc.$$REPLACER_FOR_NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_ = function(ch) {\n  return soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_[ch];\n};\n\n/**\n * Maps characters to the escaped versions for the named escape directives.\n * @private {!Object<string, string>}\n */\nsoy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_ = {\n  '\\x00': '\\\\x00',\n  '\\x08': '\\\\x08',\n  '\\x09': '\\\\t',\n  '\\x0a': '\\\\n',\n  '\\x0b': '\\\\x0b',\n  '\\x0c': '\\\\f',\n  '\\x0d': '\\\\r',\n  '\\x22': '\\\\x22',\n  '$': '\\\\x24',\n  '\\x26': '\\\\x26',\n  '\\x27': '\\\\x27',\n  '(': '\\\\x28',\n  ')': '\\\\x29',\n  '*': '\\\\x2a',\n  '+': '\\\\x2b',\n  ',': '\\\\x2c',\n  '-': '\\\\x2d',\n  '.': '\\\\x2e',\n  '\\/': '\\\\\\/',\n  ':': '\\\\x3a',\n  '\\x3c': '\\\\x3c',\n  '\\x3d': '\\\\x3d',\n  '\\x3e': '\\\\x3e',\n  '?': '\\\\x3f',\n  '\\x5b': '\\\\x5b',\n  '\\\\': '\\\\\\\\',\n  '\\x5d': '\\\\x5d',\n  '^': '\\\\x5e',\n  '\\x7b': '\\\\x7b',\n  '|': '\\\\x7c',\n  '\\x7d': '\\\\x7d',\n  '\\x85': '\\\\x85',\n  '\\u2028': '\\\\u2028',\n  '\\u2029': '\\\\u2029'\n};\n\n/**\n * A function that can be used with String.replace.\n * @param {string} ch A single character matched by a compatible matcher.\n * @return {string} A token in the output language.\n * @private\n */\nsoy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_ = function(ch) {\n  return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_[ch];\n};\n\n/**\n * Maps characters to the escaped versions for the named escape directives.\n * @private {!Object<string, string>}\n */\nsoy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_ = {\n  '\\x00': '\\\\0 ',\n  '\\x08': '\\\\8 ',\n  '\\x09': '\\\\9 ',\n  '\\x0a': '\\\\a ',\n  '\\x0b': '\\\\b ',\n  '\\x0c': '\\\\c ',\n  '\\x0d': '\\\\d ',\n  '\\x22': '\\\\22 ',\n  '\\x26': '\\\\26 ',\n  '\\x27': '\\\\27 ',\n  '(': '\\\\28 ',\n  ')': '\\\\29 ',\n  '*': '\\\\2a ',\n  '\\/': '\\\\2f ',\n  ':': '\\\\3a ',\n  ';': '\\\\3b ',\n  '\\x3c': '\\\\3c ',\n  '\\x3d': '\\\\3d ',\n  '\\x3e': '\\\\3e ',\n  '@': '\\\\40 ',\n  '\\\\': '\\\\5c ',\n  '\\x7b': '\\\\7b ',\n  '\\x7d': '\\\\7d ',\n  '\\x85': '\\\\85 ',\n  '\\xa0': '\\\\a0 ',\n  '\\u2028': '\\\\2028 ',\n  '\\u2029': '\\\\2029 '\n};\n\n/**\n * A function that can be used with String.replace.\n * @param {string} ch A single character matched by a compatible matcher.\n * @return {string} A token in the output language.\n * @private\n */\nsoy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_ = function(ch) {\n  return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_[ch];\n};\n\n/**\n * Maps characters to the escaped versions for the named escape directives.\n * @private {!Object<string, string>}\n */\nsoy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_ = {\n  '\\x00': '%00',\n  '\\x01': '%01',\n  '\\x02': '%02',\n  '\\x03': '%03',\n  '\\x04': '%04',\n  '\\x05': '%05',\n  '\\x06': '%06',\n  '\\x07': '%07',\n  '\\x08': '%08',\n  '\\x09': '%09',\n  '\\x0a': '%0A',\n  '\\x0b': '%0B',\n  '\\x0c': '%0C',\n  '\\x0d': '%0D',\n  '\\x0e': '%0E',\n  '\\x0f': '%0F',\n  '\\x10': '%10',\n  '\\x11': '%11',\n  '\\x12': '%12',\n  '\\x13': '%13',\n  '\\x14': '%14',\n  '\\x15': '%15',\n  '\\x16': '%16',\n  '\\x17': '%17',\n  '\\x18': '%18',\n  '\\x19': '%19',\n  '\\x1a': '%1A',\n  '\\x1b': '%1B',\n  '\\x1c': '%1C',\n  '\\x1d': '%1D',\n  '\\x1e': '%1E',\n  '\\x1f': '%1F',\n  ' ': '%20',\n  '\\x22': '%22',\n  '\\x27': '%27',\n  '(': '%28',\n  ')': '%29',\n  '\\x3c': '%3C',\n  '\\x3e': '%3E',\n  '\\\\': '%5C',\n  '\\x7b': '%7B',\n  '\\x7d': '%7D',\n  '\\x7f': '%7F',\n  '\\x85': '%C2%85',\n  '\\xa0': '%C2%A0',\n  '\\u2028': '%E2%80%A8',\n  '\\u2029': '%E2%80%A9',\n  '\\uff01': '%EF%BC%81',\n  '\\uff03': '%EF%BC%83',\n  '\\uff04': '%EF%BC%84',\n  '\\uff06': '%EF%BC%86',\n  '\\uff07': '%EF%BC%87',\n  '\\uff08': '%EF%BC%88',\n  '\\uff09': '%EF%BC%89',\n  '\\uff0a': '%EF%BC%8A',\n  '\\uff0b': '%EF%BC%8B',\n  '\\uff0c': '%EF%BC%8C',\n  '\\uff0f': '%EF%BC%8F',\n  '\\uff1a': '%EF%BC%9A',\n  '\\uff1b': '%EF%BC%9B',\n  '\\uff1d': '%EF%BC%9D',\n  '\\uff1f': '%EF%BC%9F',\n  '\\uff20': '%EF%BC%A0',\n  '\\uff3b': '%EF%BC%BB',\n  '\\uff3d': '%EF%BC%BD'\n};\n\n/**\n * A function that can be used with String.replace.\n * @param {string} ch A single character matched by a compatible matcher.\n * @return {string} A token in the output language.\n * @private\n */\nsoy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_ = function(ch) {\n  return soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_[ch];\n};\n\n/**\n * Matches characters that need to be escaped for the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$MATCHER_FOR_NORMALIZE_HTML_ = /[\\x00\\x22\\x27\\x3c\\x3e]/g;\n\n/**\n * Matches characters that need to be escaped for the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_ = /[\\x00\\x09-\\x0d \\x22\\x26\\x27\\x2d\\/\\x3c-\\x3e`\\x85\\xa0\\u2028\\u2029]/g;\n\n/**\n * Matches characters that need to be escaped for the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_ = /[\\x00\\x09-\\x0d \\x22\\x27\\x2d\\/\\x3c-\\x3e`\\x85\\xa0\\u2028\\u2029]/g;\n\n/**\n * Matches characters that need to be escaped for the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_ = /[\\x00\\x08-\\x0d\\x22\\x26\\x27\\/\\x3c-\\x3e\\x5b-\\x5d\\x7b\\x7d\\x85\\u2028\\u2029]/g;\n\n/**\n * Matches characters that need to be escaped for the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_ = /[\\x00\\x08-\\x0d\\x22\\x24\\x26-\\/\\x3a\\x3c-\\x3f\\x5b-\\x5e\\x7b-\\x7d\\x85\\u2028\\u2029]/g;\n\n/**\n * Matches characters that need to be escaped for the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_ = /[\\x00\\x08-\\x0d\\x22\\x26-\\x2a\\/\\x3a-\\x3e@\\\\\\x7b\\x7d\\x85\\xa0\\u2028\\u2029]/g;\n\n/**\n * Matches characters that need to be escaped for the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_ = /[\\x00- \\x22\\x27-\\x29\\x3c\\x3e\\\\\\x7b\\x7d\\x7f\\x85\\xa0\\u2028\\u2029\\uff01\\uff03\\uff04\\uff06-\\uff0c\\uff0f\\uff1a\\uff1b\\uff1d\\uff1f\\uff20\\uff3b\\uff3d]/g;\n\n/**\n * A pattern that vets values produced by the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_ = /^(?!-*(?:expression|(?:moz-)?binding))(?!\\s+)(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|(?:rgb|hsl)a?\\([0-9.%,\\u0020]+\\)|-?(?:[0-9]+(?:\\.[0-9]*)?|\\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|\\s+)*$/i;\n\n/**\n * A pattern that vets values produced by the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_ = /^(?![^#?]*\\/(?:\\.|%2E){2}(?:[\\/?#]|$))(?:(?:https?|mailto):|[^&:\\/?#]*(?:[\\/?#]|$))/i;\n\n/**\n * A pattern that vets values produced by the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$FILTER_FOR_FILTER_NORMALIZE_MEDIA_URI_ = /^[^&:\\/?#]*(?:[\\/?#]|$)|^https?:|^data:image\\/[a-z0-9+]+;base64,[a-z0-9+\\/]+=*$|^blob:/i;\n\n/**\n * A pattern that vets values produced by the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_ = /^data:image\\/(?:bmp|gif|jpe?g|png|tiff|webp);base64,[a-z0-9+\\/]+=*$/i;\n\n/**\n * A pattern that vets values produced by the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$FILTER_FOR_FILTER_SIP_URI_ = /^sip:[0-9a-z;=\\-+._!~*'\\u0020\\/():&$#?@,]+$/i;\n\n/**\n * A pattern that vets values produced by the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$FILTER_FOR_FILTER_TEL_URI_ = /^tel:[0-9a-z;=\\-+._!~*'\\u0020\\/():&$#?@,]+$/i;\n\n/**\n * A pattern that vets values produced by the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_ = /^(?!on|src|(?:style|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|usemap)\\s*$)(?:[a-z0-9_$:-]*)$/i;\n\n/**\n * A pattern that vets values produced by the named directives.\n * @private {!RegExp}\n */\nsoy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_ = /^(?!base|iframe|link|no|script|style|textarea|title|xmp)[a-z0-9_$:-]*$/i;\n\n/**\n * A helper for the Soy directive |normalizeHtml\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$normalizeHtmlHelper = function(value) {\n  var str = String(value);\n  return str.replace(\n      soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_,\n      soy.esc.$$REPLACER_FOR_NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_);\n};\n\n/**\n * A helper for the Soy directive |escapeHtmlNospace\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$escapeHtmlNospaceHelper = function(value) {\n  var str = String(value);\n  return str.replace(\n      soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_,\n      soy.esc.$$REPLACER_FOR_NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_);\n};\n\n/**\n * A helper for the Soy directive |normalizeHtmlNospace\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$normalizeHtmlNospaceHelper = function(value) {\n  var str = String(value);\n  return str.replace(\n      soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_,\n      soy.esc.$$REPLACER_FOR_NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_);\n};\n\n/**\n * A helper for the Soy directive |escapeJsString\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$escapeJsStringHelper = function(value) {\n  var str = String(value);\n  return str.replace(\n      soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_,\n      soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_);\n};\n\n/**\n * A helper for the Soy directive |escapeJsRegex\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$escapeJsRegexHelper = function(value) {\n  var str = String(value);\n  return str.replace(\n      soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_,\n      soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_);\n};\n\n/**\n * A helper for the Soy directive |escapeCssString\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$escapeCssStringHelper = function(value) {\n  var str = String(value);\n  return str.replace(\n      soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_,\n      soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_);\n};\n\n/**\n * A helper for the Soy directive |filterCssValue\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$filterCssValueHelper = function(value) {\n  var str = String(value);\n  if (!soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_.test(str)) {\n    goog.asserts.fail('Bad value `%s` for |filterCssValue', [str]);\n    return 'zSoyz';\n  }\n  return str;\n};\n\n/**\n * A helper for the Soy directive |normalizeUri\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$normalizeUriHelper = function(value) {\n  var str = String(value);\n  return str.replace(\n      soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_,\n      soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_);\n};\n\n/**\n * A helper for the Soy directive |filterNormalizeUri\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$filterNormalizeUriHelper = function(value) {\n  var str = String(value);\n  if (!soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_.test(str)) {\n    goog.asserts.fail('Bad value `%s` for |filterNormalizeUri', [str]);\n    return 'about:invalid#zSoyz';\n  }\n  return str.replace(\n      soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_,\n      soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_);\n};\n\n/**\n * A helper for the Soy directive |filterNormalizeMediaUri\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$filterNormalizeMediaUriHelper = function(value) {\n  var str = String(value);\n  if (!soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_MEDIA_URI_.test(str)) {\n    goog.asserts.fail('Bad value `%s` for |filterNormalizeMediaUri', [str]);\n    return 'about:invalid#zSoyz';\n  }\n  return str.replace(\n      soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_,\n      soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_);\n};\n\n/**\n * A helper for the Soy directive |filterImageDataUri\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$filterImageDataUriHelper = function(value) {\n  var str = String(value);\n  if (!soy.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_.test(str)) {\n    goog.asserts.fail('Bad value `%s` for |filterImageDataUri', [str]);\n    return 'data:image/gif;base64,zSoyz';\n  }\n  return str;\n};\n\n/**\n * A helper for the Soy directive |filterSipUri\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$filterSipUriHelper = function(value) {\n  var str = String(value);\n  if (!soy.esc.$$FILTER_FOR_FILTER_SIP_URI_.test(str)) {\n    goog.asserts.fail('Bad value `%s` for |filterSipUri', [str]);\n    return 'about:invalid#zSoyz';\n  }\n  return str;\n};\n\n/**\n * A helper for the Soy directive |filterTelUri\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$filterTelUriHelper = function(value) {\n  var str = String(value);\n  if (!soy.esc.$$FILTER_FOR_FILTER_TEL_URI_.test(str)) {\n    goog.asserts.fail('Bad value `%s` for |filterTelUri', [str]);\n    return 'about:invalid#zSoyz';\n  }\n  return str;\n};\n\n/**\n * A helper for the Soy directive |filterHtmlAttributes\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$filterHtmlAttributesHelper = function(value) {\n  var str = String(value);\n  if (!soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_.test(str)) {\n    goog.asserts.fail('Bad value `%s` for |filterHtmlAttributes', [str]);\n    return 'zSoyz';\n  }\n  return str;\n};\n\n/**\n * A helper for the Soy directive |filterHtmlElementName\n * @param {*} value Can be of any type but will be coerced to a string.\n * @return {string} The escaped text.\n */\nsoy.esc.$$filterHtmlElementNameHelper = function(value) {\n  var str = String(value);\n  if (!soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_.test(str)) {\n    goog.asserts.fail('Bad value `%s` for |filterHtmlElementName', [str]);\n    return 'zSoyz';\n  }\n  return str;\n};\n\n/**\n * Matches all tags, HTML comments, and DOCTYPEs in tag soup HTML.\n * By removing these, and replacing any '<' or '>' characters with\n * entities we guarantee that the result can be embedded into a\n * an attribute without introducing a tag boundary.\n *\n * @private {!RegExp}\n */\nsoy.esc.$$HTML_TAG_REGEX_ = /<(?:!|\\/?([a-zA-Z][a-zA-Z0-9:\\-]*))(?:[^>'\"]|\"[^\"]*\"|'[^']*')*>/g;\n\n/**\n * Matches all occurrences of '<'.\n *\n * @private {!RegExp}\n */\nsoy.esc.$$LT_REGEX_ = /</g;\n\n/**\n * Maps lower-case names of innocuous tags to true.\n *\n * @private {!Object<string, boolean>}\n */\nsoy.esc.$$SAFE_TAG_WHITELIST_ = {'b': true, 'br': true, 'em': true, 'i': true, 's': true, 'strong': true, 'sub': true, 'sup': true, 'u': true};\n\n/**\n * Pattern for matching attribute name and value, where value is single-quoted\n * or double-quoted.\n * See http://www.w3.org/TR/2011/WD-html5-20110525/syntax.html#attributes-0\n *\n * @private {!RegExp}\n */\nsoy.esc.$$HTML_ATTRIBUTE_REGEX_ = /([a-zA-Z][a-zA-Z0-9:\\-]*)[\\t\\n\\r\\u0020]*=[\\t\\n\\r\\u0020]*(\"[^\"]*\"|'[^']*')/g;\n\n// END GENERATED CODE\n","// This file was automatically generated from core_elements.soy.\n// Please don't edit this file by hand.\n\n/**\n * @fileoverview Templates in namespace annotorious.templates.\n */\n\ngoog.provide('annotorious.templates');\n\ngoog.require('soy');\ngoog.require('soydata');\n\n\n/**\n * @param {Object.<string, *>=} opt_data\n * @param {(null|undefined)=} opt_ignored\n * @return {string}\n * @suppress {checkTypes|uselessCode}\n */\nannotorious.templates.popup = function(opt_data, opt_ignored) {\n  return '<div class=\"annotorious-popup top-left\" style=\"position:absolute;z-index:1\"><div class=\"annotorious-popup-buttons\"><a class=\"annotorious-popup-button annotorious-popup-button-edit\" title=\"Edit\" href=\"javascript:void(0);\">EDIT</a><a class=\"annotorious-popup-button annotorious-popup-button-delete\" title=\"Delete\" href=\"javascript:void(0);\">DELETE</a></div><span class=\"annotorious-popup-text\"></span></div>';\n};\nif (goog.DEBUG) {\n  annotorious.templates.popup.soyTemplateName = 'annotorious.templates.popup';\n}\n\n\n/**\n * @param {Object.<string, *>=} opt_data\n * @param {(null|undefined)=} opt_ignored\n * @return {string}\n * @suppress {checkTypes|uselessCode}\n */\nannotorious.templates.editform = function(opt_data, opt_ignored) {\n  return '<div class=\"annotorious-editor\" style=\"position:absolute;z-index:1\"><form><textarea class=\"annotorious-editor-text\" placeholder=\"Add a Comment...\" tabindex=\"1\"></textarea><div class=\"annotorious-editor-button-container\"><a class=\"annotorious-editor-button annotorious-editor-button-cancel\" href=\"javascript:void(0);\" tabindex=\"3\">Cancel</a><a class=\"annotorious-editor-button annotorious-editor-button-save\" href=\"javascript:void(0);\" tabindex=\"2\">Save</a></div></form></div>';\n};\nif (goog.DEBUG) {\n  annotorious.templates.editform.soyTemplateName = 'annotorious.templates.editform';\n}\n","goog.provide('annotorious.Editor');\r\n\r\ngoog.require('goog.dom');\r\ngoog.require('goog.soy');\r\ngoog.require('goog.html.sanitizer.HtmlSanitizer');\r\ngoog.require('goog.style');\r\ngoog.require('goog.ui.Textarea');\r\n\r\ngoog.require('annotorious.Annotation');\r\ngoog.require('annotorious.templates');\r\n\r\n/**\r\n * Annotation edit form.\r\n * @param {Object} annotator reference to the annotator\r\n * @constructor\r\n */\r\nannotorious.Editor = function(annotator) {\r\n  this.element = goog.soy.renderAsElement(annotorious.templates.editform);\r\n  \r\n  /** @private **/\r\n  this._annotator = annotator;\r\n\r\n  /** @private **/\r\n  this._item = annotator.getItem();\r\n  \r\n  /** @private **/\r\n  this._original_annotation;\r\n\r\n  /** @private **/\r\n  this._current_annotation;\r\n\r\n  /** @private **/\r\n  this._textarea = new goog.ui.Textarea('');\r\n\r\n  /** @private **/\r\n  this._btnCancel = this.element.querySelector('.annotorious-editor-button-cancel');\r\n\r\n  /** @private **/\r\n  this._btnSave = this.element.querySelector('.annotorious-editor-button-save');\r\n\r\n  /** @private **/\r\n  this._btnContainer = goog.dom.getParentElement(this._btnSave);\r\n\r\n  /** @private **/\r\n  this._extraFields = [];\r\n\r\n  /** @private **/\r\n  this.htmlSanitizer = new goog.html.sanitizer.HtmlSanitizer.Builder()\r\n  .withCustomNetworkRequestUrlPolicy(goog.html.SafeUrl.sanitize)\r\n  .build();\r\n\r\n  var self = this;\r\n  goog.events.listen(this._btnCancel, goog.events.EventType.CLICK, function(event) {\r\n    event.preventDefault();\r\n    annotator.stopSelection(self._original_annotation);\r\n    self.close();\r\n  });\r\n\r\n  goog.events.listen(this._btnSave, goog.events.EventType.CLICK, function(event) {\r\n    event.preventDefault();\r\n    var annotation = self.getAnnotation();\r\n    annotator.addAnnotation(annotation);\r\n    annotator.stopSelection();\r\n\r\n    if (self._original_annotation)\r\n      annotator.fireEvent(annotorious.events.EventType.ANNOTATION_UPDATED, annotation, annotator.getItem());\r\n    else\r\n      annotator.fireEvent(annotorious.events.EventType.ANNOTATION_CREATED, annotation, annotator.getItem());      \r\n    self.close();\r\n  });\r\n \r\n  goog.style.showElement(this.element, false);\r\n  goog.dom.appendChild(annotator.element, this.element);\r\n  this._textarea.decorate(this.element.querySelector('.annotorious-editor-text'));\r\n  annotorious.dom.makeHResizable(this.element, function() { self._textarea.resize(); });\r\n}\r\n\r\n/**\r\n * Adds a field to the editor GUI widget. A field can be either an (HTML) string, or\r\n * a function that takes an Annotation as argument and returns an (HTML) string or\r\n * a DOM element.\r\n * @param {string | Function} field the field\r\n */\r\nannotorious.Editor.prototype.addField = function(field) {\r\n  var fieldEl = goog.dom.createDom('div', 'annotorious-editor-field');\r\n  \r\n  if (goog.isString(field))  {\r\n    fieldEl.innerHTML = field;\r\n  } else if (goog.isFunction(field)) {\r\n    this._extraFields.push({el: fieldEl, fn: field});\r\n  } else if (goog.dom.isElement(field)) {\r\n    goog.dom.appendChild(fieldEl, field);\r\n  }\r\n\r\n  goog.dom.insertSiblingBefore(fieldEl, this._btnContainer);\r\n}\r\n\r\n/**\r\n * Opens the edit form with an annotation.\r\n * @param {annotorious.Annotation} opt_annotation the annotation to edit (or undefined)\r\n * @param {Object=} opt_event the event, if any \r\n */\r\nannotorious.Editor.prototype.open = function(opt_annotation, opt_event) {\r\n  this._annotator.fireEvent(annotorious.events.EventType.BEFORE_EDITOR_SHOWN, opt_annotation);\r\n\r\n  this._original_annotation = opt_annotation;\r\n  this._current_annotation = opt_annotation;\r\n\r\n  if (opt_annotation)\r\n    this._textarea.setValue(opt_annotation.text);\r\n\r\n  goog.style.showElement(this.element, true);\r\n  this._textarea.getElement().focus();\r\n  \r\n  // Update extra fields (if any)\r\n  goog.array.forEach(this._extraFields, function(field) {\r\n    var f = field.fn(opt_annotation);\r\n    if (goog.isString(f))  {\r\n      field.el.innerHTML = f;\r\n    } else if (goog.dom.isElement(f)) {\r\n      goog.dom.removeChildren(field.el);\r\n      goog.dom.appendChild(field.el, f);\r\n    }\r\n  });\r\n  this._annotator.fireEvent(annotorious.events.EventType.EDITOR_SHOWN, opt_annotation);\r\n}\r\n\r\n/**\r\n * Closes the editor.\r\n */\r\nannotorious.Editor.prototype.close = function() {\r\n  goog.style.showElement(this.element, false);\r\n  this._textarea.setValue('');\r\n}\r\n\r\n/**\r\n * Sets the position (i.e. CSS left/top value) of the editor element.\r\n * @param {annotorious.shape.geom.Point} xy the viewport coordinate\r\n */\r\nannotorious.Editor.prototype.setPosition = function(xy) {\r\n  goog.style.setPosition(this.element, xy.x, xy.y);\r\n}\r\n\r\n/**\r\n * Returns the annotation that is the current state of the editor.\r\n * @return {annotorious.Annotation} the annotation\r\n */\r\nannotorious.Editor.prototype.getAnnotation = function() {\r\n  var sanitized = this.htmlSanitizer.sanitize(this._textarea.getValue()).getTypedStringValue();\r\n\r\n  if (this._current_annotation) {\r\n    this._current_annotation.text = sanitized;\r\n  } else {\r\n    this._current_annotation = \r\n      new annotorious.Annotation(this._item.src, sanitized, this._annotator.getActiveSelector().getShape());  \r\n  }\r\n\r\n  return this._current_annotation;\r\n}\r\n\r\n/** API exports **/\r\nannotorious.Editor.prototype['addField'] = annotorious.Editor.prototype.addField;\r\nannotorious.Editor.prototype['getAnnotation'] = annotorious.Editor.prototype.getAnnotation;\r\n","goog.provide('annotorious.Hint');\r\n\r\ngoog.require('goog.events');\r\ngoog.require('goog.soy');\r\ngoog.require('goog.style');\r\n\r\n/** \r\n * The 'hint' GUI element.\r\n * @param {Object} annotator the annotator\r\n * @param {Element} parent the parent DOM element\r\n * @param {string=} opt_msg the message to display as hint\r\n * @constructor\r\n */\r\nannotorious.Hint = function(annotator, parent, opt_msg) {\r\n  var self = this;\r\n\r\n  if (!opt_msg)\r\n    opt_msg = 'Click and Drag to Annotate';\r\n\r\n  this.element = goog.soy.renderAsElement(annotorious.templates.image.hint, { msg: opt_msg });\r\n\r\n  /** @private **/\r\n  this._annotator = annotator;\r\n\r\n  /** @private **/\r\n  this._message = this.element.querySelector('.annotorious-hint-msg');\r\n\r\n\r\n  /** @private **/\r\n  this._icon = this.element.querySelector('.annotorious-hint-icon');\r\n\r\n  /** @private **/\r\n  this._hideTimer;\r\n\r\n  /** @private **/\r\n  this._mouseOverListener;\r\n\r\n  /** @private **/\r\n  this._mouseOutListener;\r\n\r\n  /** @private **/\r\n  this._overItemHandler = function() {\r\n    self.show();\r\n  };\r\n\r\n  /** @private **/\r\n  this._outOfItemHandler = function() {\r\n    self.hide();\r\n  };\r\n\r\n  this._attachListeners();\r\n  this.hide();\r\n  goog.dom.appendChild(parent, this.element);\r\n}\r\n\r\n/**\r\n * Attaches MOUSEOVER and MOUSEOUT listeners to the icon, and MOUSE_OVER_ANNOTATABLE_ITEM\r\n * and MOUSE_OUT_OF_ANNOTATABLE_ITEM handlers to the annototator instance.\r\n * @private\r\n */\r\nannotorious.Hint.prototype._attachListeners = function() {\r\n  var self = this;\r\n\r\n  this._mouseOverListener = goog.events.listen(this._icon, goog.events.EventType.MOUSEOVER, function(event) {\r\n    self.show();\r\n    window.clearTimeout(self._hideTimer);\r\n  });\r\n\r\n  this._mouseOutListener = goog.events.listen(this._icon, goog.events.EventType.MOUSEOUT, function(event) {\r\n    self.hide();\r\n  });\r\n\r\n  this._annotator.addHandler(annotorious.events.EventType.MOUSE_OVER_ANNOTATABLE_ITEM, this._overItemHandler);\r\n\r\n  this._annotator.addHandler(annotorious.events.EventType.MOUSE_OUT_OF_ANNOTATABLE_ITEM, this._outOfItemHandler);\r\n}\r\n\r\n/**\r\n * Detaches MOUSEUP and MOUSEMOVE listeners from the editing canvas.\r\n * @private\r\n */\r\nannotorious.Hint.prototype._detachListeners = function() {\r\n  goog.events.unlistenByKey(this._mouseOverListener);\r\n  goog.events.unlistenByKey(this._mouseOutListener);\r\n  this._annotator.removeHandler(annotorious.events.EventType.MOUSE_OVER_ANNOTATABLE_ITEM, this._overItemHandler);\r\n  this._annotator.removeHandler(annotorious.events.EventType.MOUSE_OUT_OF_ANNOTATABLE_ITEM, this._outOfItemHandler);\r\n}\r\n\r\n/**\r\n * Shows the hint.\r\n */\r\nannotorious.Hint.prototype.show = function() {\r\n  window.clearTimeout(this._hideTimer);\r\n  goog.style.setOpacity(this._message, 0.8);\r\n\r\n  var self = this;\r\n  this._hideTimer = window.setTimeout(function() {\r\n    self.hide();\r\n  }, 3000);\r\n}\r\n\r\n/**\r\n * Hides the hint, leaving only the Annotorious feather icon.\r\n */\r\nannotorious.Hint.prototype.hide = function() {\r\n  window.clearTimeout(this._hideTimer);\r\n  goog.style.setOpacity(this._message, 0);\r\n}\r\n\r\n/**\r\n * Destroys the hint element, removing it from the DOM.\r\n */\r\nannotorious.Hint.prototype.destroy = function() {\r\n  this._detachListeners();\r\n  delete this._mouseOverListener;\r\n  delete this._mouseOutListener;\r\n  delete this._overItemHandler;\r\n  delete this._outOfItemHandler;\r\n  goog.dom.removeNode(this.element);\r\n}\r\n","goog.provide('annotorious.Popup');\r\n\r\ngoog.require('goog.dom');\r\ngoog.require('goog.dom.classes');\r\ngoog.require('goog.style');\r\ngoog.require('goog.math.Coordinate');\r\n\r\n/**\r\n * A popup bubble widget to show annotation details.\r\n * @param {Object} annotator reference to the annotator\r\n * @constructor\r\n */\r\nannotorious.Popup = function(annotator) {\r\n  this.element = goog.soy.renderAsElement(annotorious.templates.popup);\r\n\r\n  /** @private **/\r\n  this._annotator = annotator;  \r\n    \r\n  /** @private **/\r\n  this._currentAnnotation;\r\n\r\n  /** @private **/\r\n  this._text = this.element.querySelector('.annotorious-popup-text');\r\n\r\n  /** @private **/\r\n  this._buttons = this.element.querySelector('.annotorious-popup-buttons');\r\n  \r\n  /** @private **/\r\n  this._popupHideTimer;\r\n  \r\n  /** @private **/\r\n  this._buttonHideTimer;\r\n\r\n  /** @private **/\r\n  this._cancelHide = false;\r\n\r\n  /** @private **/\r\n  this._extraFields = [];\r\n\r\n  var btnEdit = this.element.querySelector('.annotorious-popup-button-edit');\r\n  var btnDelete = this.element.querySelector('.annotorious-popup-button-delete');\r\n\r\n  var self = this;  \r\n  goog.events.listen(btnEdit, goog.events.EventType.MOUSEOVER, function(event) {\r\n    goog.dom.classes.add(btnEdit, 'annotorious-popup-button-active');\r\n  });\r\n\r\n  goog.events.listen(btnEdit, goog.events.EventType.MOUSEOUT, function() {\r\n    goog.dom.classes.remove(btnEdit, 'annotorious-popup-button-active');\r\n  });\r\n\r\n  goog.events.listen(btnEdit, goog.events.EventType.CLICK, function(event) {\r\n    goog.style.setOpacity(self.element, 0);\r\n    goog.style.setStyle(self.element, 'pointer-events', 'none');\r\n    annotator.editAnnotation(self._currentAnnotation); \r\n  });\r\n\r\n  goog.events.listen(btnDelete, goog.events.EventType.MOUSEOVER, function(event) {\r\n    goog.dom.classes.add(btnDelete, 'annotorious-popup-button-active');\r\n  });\r\n  \r\n  goog.events.listen(btnDelete, goog.events.EventType.MOUSEOUT, function() {\r\n    goog.dom.classes.remove(btnDelete, 'annotorious-popup-button-active');\r\n  });\r\n\r\n  goog.events.listen(btnDelete, goog.events.EventType.CLICK, function(event) {\r\n    var cancelEvent = annotator.fireEvent(annotorious.events.EventType.BEFORE_ANNOTATION_REMOVED, self._currentAnnotation);\r\n    if (!cancelEvent) {\r\n      goog.style.setOpacity(self.element, 0);\r\n      goog.style.setStyle(self.element, 'pointer-events', 'none');\r\n      annotator.removeAnnotation(self._currentAnnotation);\r\n      annotator.fireEvent(annotorious.events.EventType.ANNOTATION_REMOVED, self._currentAnnotation);\r\n    }\r\n  });\r\n\r\n  if (annotorious.events.ui.hasMouse) {  \r\n    goog.events.listen(this.element, goog.events.EventType.MOUSEOVER, function(event) {\r\n      window.clearTimeout(self._buttonHideTimer);\r\n      if (goog.style.getStyle(self._buttons, 'opacity') < 0.9)\r\n        goog.style.setOpacity(self._buttons, 0.9);\r\n      self.clearHideTimer();\r\n    });\r\n  \r\n    goog.events.listen(this.element, goog.events.EventType.MOUSEOUT, function(event) {\r\n      goog.style.setOpacity(self._buttons, 0);\r\n      self.startHideTimer();\r\n    });\r\n\r\n    annotator.addHandler(annotorious.events.EventType.MOUSE_OUT_OF_ANNOTATABLE_ITEM, function(event) {\r\n      self.startHideTimer();\r\n    });\r\n  }\r\n    \r\n  goog.style.setOpacity(this._buttons, 0);\r\n  goog.style.setOpacity(this.element, 0);\r\n  goog.style.setStyle(this.element, 'pointer-events', 'none');\r\n  goog.dom.appendChild(annotator.element, this.element);\r\n}\r\n\r\n/**\r\n * Adds a field to the popup GUI widget. A field can be either an (HTML) string, or\r\n * a function that takes an Annotation as argument and returns an (HTML) string or\r\n * a DOM element.\r\n * @param {string | Function} field the field\r\n */\r\nannotorious.Popup.prototype.addField = function(field) {\r\n  var fieldEl = goog.dom.createDom('div', 'annotorious-popup-field');\r\n  \r\n  if (goog.isString(field))  {\r\n    fieldEl.innerHTML = field;\r\n  } else if (goog.isFunction(field)) {\r\n    this._extraFields.push({el: fieldEl, fn: field});\r\n  } else if (goog.dom.isElement(field)) {\r\n    goog.dom.appendChild(fieldEl, field);\r\n  }\r\n\r\n  goog.dom.appendChild(this.element, fieldEl);\r\n}\r\n\r\n/**\r\n * Start the popup hide timer.\r\n */\r\nannotorious.Popup.prototype.startHideTimer = function() {\r\n  this._cancelHide = false;\r\n  if (!this._popupHideTimer) {\r\n    var self = this;\r\n    this._popupHideTimer = window.setTimeout(function() {\r\n      self._annotator.fireEvent(annotorious.events.EventType.BEFORE_POPUP_HIDE, self);\r\n      if (!self._cancelHide) {\r\n        goog.style.setOpacity(self.element, 0.0);\r\n        goog.style.setStyle(self.element, 'pointer-events', 'none');\r\n        goog.style.setOpacity(self._buttons, 0.9);\r\n        delete self._popupHideTimer;\r\n      }\r\n    }, 150);\r\n  }\r\n}\r\n\r\n/**\r\n * Clear the popup hide timer.\r\n */\r\nannotorious.Popup.prototype.clearHideTimer = function() {\r\n  this._cancelHide = true;\r\n  if (this._popupHideTimer) {\r\n    window.clearTimeout(this._popupHideTimer);\r\n    delete this._popupHideTimer;\r\n  }\r\n}\r\n\r\n/**\r\n * Show the popup, loaded with the specified annotation, at the specified coordinates.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n * @param {annotorious.shape.geom.Point} xy the viewport coordinate\r\n */\r\nannotorious.Popup.prototype.show = function(annotation, xy) {\r\n  this.clearHideTimer();\r\n\r\n  if (xy)\r\n    this.setPosition(xy);\r\n\r\n  if (annotation)\r\n    this.setAnnotation(annotation);\r\n\r\n  if (this._buttonHideTimer)\r\n    window.clearTimeout(this._buttonHideTimer);\r\n      \r\n  goog.style.setOpacity(this._buttons, 0.9);\r\n\r\n  if (annotorious.events.ui.hasMouse) {\r\n    var self = this;\r\n    this._buttonHideTimer = window.setTimeout(function() {\r\n      goog.style.setOpacity(self._buttons, 0);\r\n    }, 1000);\r\n  }\r\n  \r\n  goog.style.setOpacity(this.element, 0.9);\r\n  goog.style.setStyle(this.element, 'pointer-events', 'auto');\r\n  this._annotator.fireEvent(annotorious.events.EventType.POPUP_SHOWN, this._currentAnnotation);\r\n}\r\n\r\n/**\r\n * Set the position of the popup.\r\n * @param {annotorious.shape.geom.Point} xy the viewport coordinate\r\n */\r\nannotorious.Popup.prototype.setPosition = function(xy) {\r\n  goog.style.setPosition(this.element, new goog.math.Coordinate(xy.x, xy.y));\r\n}\r\n\r\n/**\r\n * Set the annotation for the popup.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n */\r\nannotorious.Popup.prototype.setAnnotation = function(annotation) {\r\n  this._currentAnnotation = annotation;\r\n  if (annotation.text)\r\n    this._text.innerHTML = annotation.text.replace(/\\n/g, '<br/>');\r\n  else\r\n    this._text.innerHTML = '<span class=\"annotorious-popup-empty\">No comment</span>';\r\n\r\n  if (('editable' in annotation) && annotation.editable == false)\r\n    goog.style.showElement(this._buttons, false);\r\n  else\r\n    goog.style.showElement(this._buttons, true);\r\n  \r\n  // Update extra fields (if any)\r\n  goog.array.forEach(this._extraFields, function(field) {\r\n    var f = field.fn(annotation);\r\n    if (goog.isString(f))  {\r\n      field.el.innerHTML = f;\r\n    } else if (goog.dom.isElement(f)) {\r\n      goog.dom.removeChildren(field.el);\r\n      goog.dom.appendChild(field.el, f);\r\n    }\r\n  });\r\n}\r\n\r\n/** API exports **/\r\nannotorious.Popup.prototype['addField'] = annotorious.Popup.prototype.addField;\r\n","goog.provide('annotorious.mediatypes.Annotator');\r\n\r\n/**\r\n * A base class for Annotorious Annotator implementations.\r\n * @constructor\r\n */\r\nannotorious.mediatypes.Annotator = function() { }\r\n\r\nannotorious.mediatypes.Annotator.prototype.addAnnotation = function(annotation, opt_replace) {\r\n  this._viewer.addAnnotation(annotation, opt_replace);\r\n}\r\n\r\nannotorious.mediatypes.Annotator.prototype.addHandler = function(type, handler) {\r\n  this._eventBroker.addHandler(type, handler);  \r\n}\r\n\r\nannotorious.mediatypes.Annotator.prototype.removeHandler = function(type) {\r\n  this._eventBroker.removeHandler(type);  \r\n}\r\n\r\nannotorious.mediatypes.Annotator.prototype.fireEvent = function(type, event, opt_extra) {\r\n  return this._eventBroker.fireEvent(type, event, opt_extra);\r\n}\r\n\r\nannotorious.mediatypes.Annotator.prototype.getActiveSelector = function() {\r\n  return this._currentSelector;\r\n}\r\n\r\nannotorious.mediatypes.Annotator.prototype.highlightAnnotation = function(annotation) {\r\n  this._viewer.highlightAnnotation(annotation);\r\n}\r\n\r\nannotorious.mediatypes.Annotator.prototype.removeAnnotation = function(annotation) {\r\n  this._viewer.removeAnnotation(annotation);\r\n}\r\n\r\nannotorious.mediatypes.Annotator.prototype.removeHandler = function(type, handler) {\r\n  this._eventBroker.removeHandler(type, handler);\r\n}\r\n\r\nannotorious.mediatypes.Annotator.prototype.stopSelection = function(original_annotation) {\r\n  if (annotorious.events.ui.hasMouse)\r\n    goog.style.showElement(this._editCanvas, false);\r\n    \r\n  if (this._stop_selection_callback) {\r\n    this._stop_selection_callback();\r\n    delete this._stop_selection_callback;\r\n  }\r\n\r\n  this._currentSelector.stopSelection();\r\n   \r\n  // If this was an edit of an annotation (rather than creation of a new one) re-add to viewer!\r\n  if (original_annotation)\r\n    this._viewer.addAnnotation(original_annotation);\r\n}\r\n\r\nannotorious.mediatypes.Annotator.prototype._attachListener = function(activeCanvas) {\r\n  var self = this;\r\n  goog.events.listen(activeCanvas, annotorious.events.ui.EventType.DOWN, function(event) {\r\n    console.log('start selection event');\r\n    console.log(event);\r\n    var coords = annotorious.events.ui.sanitizeCoordinates(event, activeCanvas);\r\n    self._viewer.highlightAnnotation(false);\r\n\t\tif (self._selectionEnabled) {\r\n      goog.style.showElement(self._editCanvas, true);      \r\n      self._currentSelector.startSelection(coords.x, coords.y);\r\n\t\t} else {\r\n\t\t\tvar annotations = self._viewer.getAnnotationsAt(coords.x, coords.y);\r\n\t\t\tif (annotations.length > 0)\r\n\t\t\t\tself._viewer.highlightAnnotation(annotations[0]);\r\n\t\t}\r\n\t});\r\n}\r\n","goog.provide('annotorious.mediatypes.image.Viewer');\r\n\r\ngoog.require('annotorious.events');\r\ngoog.require('annotorious.shape.geom.Point');\r\n\r\n/**\r\n * The image viewer - the central entity that manages annotations \r\n * displayed for one image.\r\n * @param {Element} canvas the canvas element \r\n * @param {annotorious.mediatypes.image.ImageAnnotator} annotator reference to the annotator\r\n * @constructor\r\n */\r\nannotorious.mediatypes.image.Viewer = function(canvas, annotator) {\r\n  /** @private **/\r\n  this._canvas = canvas;\r\n  \r\n  /** @private **/\r\n  this._annotator = annotator;\r\n\r\n  /** @private **/\r\n  this._annotations = [];\r\n\r\n  /** @private **/\r\n  this._shapes = [];\r\n\r\n  /** @private **/\r\n  this._g2d = this._canvas.getContext('2d');\r\n\r\n  /** @private **/\r\n  this._currentAnnotation;\r\n\r\n  /** @private **/\r\n  this._eventsEnabled = true;\r\n\r\n  /** @private **/\r\n  this._cachedMouseEvent;\r\n\r\n  /** @private **/\r\n  this._keepHighlighted = false;\r\n\r\n  var self = this; \r\n  goog.events.listen(this._canvas, annotorious.events.ui.EventType.MOVE, function(event) {\r\n    if (self._eventsEnabled) {\r\n      self._onMouseMove(event);\r\n    } else {\r\n      self._cachedMouseEvent = event;\r\n    }\r\n  });\r\n\r\n    goog.events.listen(this._canvas, annotorious.events.ui.EventType.DOWN, function(event) {\r\n      if(self._currentAnnotation !== undefined && self._currentAnnotation != false){\r\n        self._annotator.fireEvent(annotorious.events.EventType.ANNOTATION_CLICKED, self._currentAnnotation);\r\n      }\r\n  });\r\n\r\n  annotator.addHandler(annotorious.events.EventType.MOUSE_OUT_OF_ANNOTATABLE_ITEM, function(event) {\r\n    delete self._currentAnnotation;\r\n    self._eventsEnabled = true;\r\n  });\r\n\r\n  annotator.addHandler(annotorious.events.EventType.BEFORE_POPUP_HIDE, function() {\r\n    if (!self._eventsEnabled && self._cachedMouseEvent) {\r\n      var mouseX = self._cachedMouseEvent.offsetX;\r\n      var mouseY = self._cachedMouseEvent.offsetY;\r\n            \r\n      var previousAnnotation = self._currentAnnotation;\r\n      self._currentAnnotation = self.topAnnotationAt(mouseX, mouseY);\r\n      \r\n      self._eventsEnabled = true;\r\n          \r\n      if (previousAnnotation != self._currentAnnotation) {\r\n        // Annotation under mouse has changed in the mean time - redraw\r\n        self.redraw();\r\n        self._annotator.fireEvent(annotorious.events.EventType.MOUSE_OUT_OF_ANNOTATION,\r\n          { annotation: previousAnnotation, mouseEvent: self._cachedMouseEvent });\r\n  \r\n        self._annotator.fireEvent(annotorious.events.EventType.MOUSE_OVER_ANNOTATION,\r\n          { annotation: self._currentAnnotation, mouseEvent: self._cachedMouseEvent });\r\n      } else {\r\n        if (self._currentAnnotation) {\r\n          // Annotation under mouse is the same - just keep showing the popup\r\n          self._annotator.popup.clearHideTimer();\r\n        }\r\n      }\r\n    } else {\r\n      // Popup is hiding and mouse events are enabled? Must be because \r\n      // the mouse is outside the annotatable media! Redraw.\r\n      self.redraw();\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Adds an annotation to the viewer.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n * @param {annotorious.Annotation=} opt_replace optionally, an existing annotation to replace\r\n */\r\nannotorious.mediatypes.image.Viewer.prototype.addAnnotation = function(annotation, opt_replace) {\r\n  // Remove opt_replace, if specified\r\n  if (opt_replace) {\r\n    if (opt_replace == this._currentAnnotation)\r\n      delete this._currentAnnotation;\r\n   \r\n      goog.array.remove(this._annotations, opt_replace);\r\n      delete this._shapes[annotorious.shape.hashCode(opt_replace.shapes[0])];\r\n  }\r\n\r\n  this._annotations.push(annotation);\r\n  \r\n  // The viewer always operates in pixel coordinates for efficiency reasons\r\n  var shape = annotation.shapes[0];\r\n  if (shape.units == annotorious.shape.Units.PIXEL) {\r\n    this._shapes[annotorious.shape.hashCode(annotation.shapes[0])] = shape;     \r\n  } else {\r\n    var self = this;\r\n    var viewportShape = annotorious.shape.transform(shape, function(xy) {\r\n      return self._annotator.fromItemCoordinates(xy); \r\n    });\r\n    this._shapes[annotorious.shape.hashCode(annotation.shapes[0])] = viewportShape;\r\n  }\r\n\r\n  this.redraw();\r\n}\r\n\r\n/**\r\n * Removes an annotation from the viewer.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n */\r\nannotorious.mediatypes.image.Viewer.prototype.removeAnnotation = function(annotation) {\r\n  if (annotation == this._currentAnnotation)\r\n    delete this._currentAnnotation;\r\n   \r\n  goog.array.remove(this._annotations, annotation);\r\n  delete this._shapes[annotorious.shape.hashCode(annotation.shapes[0])];\r\n  this.redraw();\r\n}\r\n\r\n/**\r\n * Returns all annotations in this viewer.\r\n * @return {Array.<annotorious.Annotation>} the annotations\r\n */\r\nannotorious.mediatypes.image.Viewer.prototype.getAnnotations = function() {\r\n  return goog.array.clone(this._annotations) \r\n}\r\n\r\n/**\r\n * Highlights a particular annotation in the viewer, or de-highlights (if that's a\r\n * word...) all, if no annotation is passed to the method.\r\n * @param {annotorious.Annotation | undefined} opt_annotation the annotation\r\n */\r\nannotorious.mediatypes.image.Viewer.prototype.highlightAnnotation = function(opt_annotation) {\r\n  this._currentAnnotation = opt_annotation;\r\n  if (opt_annotation)\r\n    this._keepHighlighted = true;\r\n  else\r\n    this._annotator.popup.startHideTimer();\r\n\r\n  this.redraw();\r\n  this._eventsEnabled = true;\r\n}\r\n\r\n/**\r\n * Returns the currently highlighted annotation (or 'undefined' if none).\r\n * @returns {Object} the currently highlighted annotation\r\n */\r\nannotorious.mediatypes.image.Viewer.prototype.getHighlightedAnnotation = function() {\r\n  return this._currentAnnotation;\r\n}\r\n\r\n/**\r\n * Convenience method returing only the top-most annotation at the specified coordinates.\r\n * @param {number} px the X coordinate\r\n * @param {number} py the Y coordinates\r\n */\r\nannotorious.mediatypes.image.Viewer.prototype.topAnnotationAt = function(px, py) {\r\n  var annotations = this.getAnnotationsAt(px, py);\r\n  if (annotations.length > 0) {\r\n    return annotations[0];\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the annotations at the specified X/Y coordinates.\r\n * @param {number} px the X coordinate\r\n * @param {number} py the Y coordinate\r\n * @return {Array.<annotorious.Annotation>} the annotations sorted by size, smallest first\r\n */\r\nannotorious.mediatypes.image.Viewer.prototype.getAnnotationsAt = function(px, py) {\r\n  // TODO for large numbers of annotations, we can optimize this\r\n  // using a tree- or grid-like data structure instead of a list\r\n  var intersectedAnnotations = [];\r\n\r\n  var self = this;\r\n  goog.array.forEach(this._annotations, function(annotation) {\r\n    if (annotorious.shape.intersects(self._shapes[annotorious.shape.hashCode(annotation.shapes[0])], px, py)) {\r\n      intersectedAnnotations.push(annotation);\r\n    }\r\n  });\r\n\r\n  goog.array.sort(intersectedAnnotations, function(a, b) {\r\n    var shape_a = self._shapes[annotorious.shape.hashCode(a.shapes[0])];\r\n    var shape_b = self._shapes[annotorious.shape.hashCode(b.shapes[0])];\r\n    return  annotorious.shape.getSize(shape_a) - annotorious.shape.getSize(shape_b);\r\n  });\r\n  \r\n  return intersectedAnnotations;\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nannotorious.mediatypes.image.Viewer.prototype._onMouseMove = function(event) {\r\n  var topAnnotation = this.topAnnotationAt(event.offsetX, event.offsetY);\r\n    \r\n  // TODO remove code duplication\r\n\r\n  var self = this;\r\n  if (topAnnotation) {\r\n    this._keepHighlighted = this._keepHighlighted && (topAnnotation == this._currentAnnotation);\r\n\r\n    if (!this._currentAnnotation) {\r\n      // Mouse moved into annotation from empty space - highlight immediately\r\n      this._currentAnnotation = topAnnotation;\r\n      this.redraw();\r\n      this._annotator.fireEvent(annotorious.events.EventType.MOUSE_OVER_ANNOTATION,\r\n        { annotation: this._currentAnnotation, mouseEvent: event });   \r\n    } else if (this._currentAnnotation != topAnnotation) {\r\n      // Mouse changed from one annotation to another one\r\n      this._eventsEnabled = false;\r\n      this._annotator.popup.startHideTimer();\r\n    }\r\n  } else if (!this._keepHighlighted) {\r\n    if (this._currentAnnotation) {\r\n      // Mouse moved out of an annotation, into empty space  \r\n      this._eventsEnabled = false;\r\n      this._annotator.popup.startHideTimer();\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @param {annotorious.shape.Shape} shape the shape\r\n * @param {boolean=} highlight set true to highlight the shape\r\n * @private\r\n */\r\nannotorious.mediatypes.image.Viewer.prototype._draw = function(shape, highlight) {\r\n  var selector = goog.array.find(this._annotator.getAvailableSelectors(), function(selector) {\r\n    return selector.getSupportedShapeType() == shape.type;\r\n  });  \r\n\r\n  if (selector)\r\n    selector.drawShape(this._g2d, shape, highlight);\r\n  else\r\n    console.log('WARNING unsupported shape type: ' + shape.type);\r\n}\r\n\r\n/**\r\n * @private\r\n */\r\nannotorious.mediatypes.image.Viewer.prototype.redraw = function() {\r\n  this._g2d.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n\r\n  var self = this;\r\n  goog.array.forEach(this._annotations, function(annotation) {\r\n\tif (annotation != self._currentAnnotation)\r\n      self._draw(self._shapes[annotorious.shape.hashCode(annotation.shapes[0])]);\r\n  });\r\n   \r\n  if (this._currentAnnotation) {\r\n    var shape = this._shapes[annotorious.shape.hashCode(this._currentAnnotation.shapes[0])];\r\n    this._draw(shape, true);\r\n    var bbox = annotorious.shape.getBoundingRect(shape).geometry;\r\n    this._annotator.popup.show(this._currentAnnotation, new annotorious.shape.geom.Point(bbox.x, bbox.y + bbox.height + 5));\r\n\r\n    // TODO Orientation check - what if the popup would be outside the viewport?\r\n  }\r\n}\r\n","goog.provide('annotorious.events.ui');\r\n\r\ngoog.require('goog.dom');\r\ngoog.require('goog.dom.classes');\r\ngoog.require('goog.events.EventType');\r\n\r\nannotorious.events.ui.hasTouch = 'ontouchstart' in window;\r\n\r\nannotorious.events.ui.hasMouse = !annotorious.events.ui.hasTouch; // Just for readability\r\n\r\n/**\r\n * Human interface events.\r\n * @enum {string}\r\n */\r\nannotorious.events.ui.EventType = {\r\n\r\n  DOWN:  (annotorious.events.ui.hasTouch) ? goog.events.EventType.TOUCHSTART : goog.events.EventType.MOUSEDOWN,\r\n\r\n  OVER:  (annotorious.events.ui.hasTouch) ? \"touchenter\" : goog.events.EventType.MOUSEOVER,\r\n\r\n  MOVE:  (annotorious.events.ui.hasTouch) ? goog.events.EventType.TOUCHMOVE : goog.events.EventType.MOUSEMOVE,\r\n\r\n  UP:    (annotorious.events.ui.hasTouch) ? goog.events.EventType.TOUCHEND : goog.events.EventType.MOUSEUP,\r\n\r\n  OUT:   (annotorious.events.ui.hasTouch) ? \"touchleave\" : goog.events.EventType.MOUSEOUT,\r\n\r\n  CLICK: (annotorious.events.ui.hasTouch) ? goog.events.EventType.TOUCHEND : goog.events.EventType.CLICK\r\n\r\n}\r\n\r\n/**\r\n  * To get screen coordinates while taking into consideration mobile and the offset of the screen\r\n  * @param {Object} event the DOM Event object\r\n  * @param {Element} parent the parent element that triggers the event\r\n  */\r\nannotorious.events.ui.sanitizeCoordinates = function(event, parent) {\r\n  var points = false;\r\n  var offset = annotorious.dom.getOffset;\r\n  \r\n  // Dirty hack - Google Maps?\r\n  event.offsetX = (event.offsetX) ? event.offsetX : false;\r\n  event.offsetY = (event.offsetY) ? event.offsetY : false;\r\n  \r\n  if ((!event.offsetX || !event.offsetY) && event.event_.changedTouches) {\r\n    points = {\r\n      x: event.event_.changedTouches[0].clientX - offset(parent).left,\r\n      y: event.event_.changedTouches[0].clientY - offset(parent).top\r\n    };\r\n  } else {\r\n    points = {\r\n      x: event.offsetX,\r\n      y: event.offsetY\r\n    };\r\n  }\r\n  \r\n  return points;\r\n};\r\n","goog.provide('annotorious.plugins.selection.RectDragSelector');\r\n\r\ngoog.require('goog.events');\r\n\r\ngoog.require('annotorious.shape.geom.Point');\r\ngoog.require('annotorious.shape');\r\ngoog.require('annotorious.events.ui');\r\n\r\n/**\r\n * The default selector: a simple click-and-drag rectangle selection tool.\r\n * @constructor\r\n */\r\nannotorious.plugins.selection.RectDragSelector = function() { }\r\n\r\n/**\r\n * Initializes the selector.\r\n * @param {Element} canvas the canvas to draw on\r\n * @param {Object} annotator reference to the annotator\r\n */\r\nannotorious.plugins.selection.RectDragSelector.prototype.init = function(annotator, canvas) {\r\n  /** @private **/\r\n  this._OUTLINE = '#000000';\r\n\r\n  /** @private **/\r\n  this._STROKE = '#ffffff';\r\n  \r\n  /** @private **/\r\n  this._FILL = false;\r\n  \r\n  /** @private **/\r\n  this._HI_OUTLINE = '#000000';\r\n\r\n  /** @private **/\r\n  this._HI_STROKE = '#fff000';\r\n  \r\n  /** @private **/\r\n  this._HI_FILL = false;\r\n\r\n  /** @private **/\r\n  this._OUTLINE_WIDTH = 1;\r\n\r\n  /** @private **/\r\n  this._STROKE_WIDTH = 1;\r\n\r\n  /** @private **/\r\n  this._HI_OUTLINE_WIDTH = 1;\r\n\r\n  /** @private **/\r\n  this._HI_STROKE_WIDTH = 1.2;\r\n\t\r\n  /** @private **/\r\n  this._canvas = canvas;\r\n  \r\n  /** @private **/\r\n  this._annotator = annotator;\r\n\r\n  /** @private **/\r\n  this._g2d = canvas.getContext('2d');\r\n  this._g2d.lineWidth = 1;\r\n \r\n  /** @private **/\r\n  this._anchor;\r\n  \r\n  /** @private **/\r\n  this._opposite;\r\n\r\n  /** @private **/\r\n  this._enabled = false;\r\n\r\n  /** @private **/\r\n  this._mouseMoveListener;\r\n\r\n  /** @private **/\r\n  this._mouseUpListener;\r\n}\r\n\r\n/**\r\n * Attaches MOUSEUP and MOUSEMOVE listeners to the editing canvas.\r\n * @private\r\n */\r\nannotorious.plugins.selection.RectDragSelector.prototype._attachListeners = function(startPoint) {\r\n  var self = this;  \r\n  var canvas = this._canvas;\r\n  \r\n  this._mouseMoveListener = goog.events.listen(this._canvas, annotorious.events.ui.EventType.MOVE, function(event) {\r\n    var points = annotorious.events.ui.sanitizeCoordinates(event, canvas);\r\n    if (self._enabled) {\r\n      self._opposite = { x: points.x, y: points.y };\r\n\r\n      self._g2d.clearRect(0, 0, canvas.width, canvas.height);\r\n      \r\n      var width = self._opposite.x - self._anchor.x;\r\n      var height = self._opposite.y - self._anchor.y;\r\n\r\n      self.drawShape(self._g2d, {\r\n        type: annotorious.shape.ShapeType.RECTANGLE,\r\n        geometry: {\r\n          x: width > 0 ? self._anchor.x : self._opposite.x,\r\n          y: height > 0 ? self._anchor.y : self._opposite.y,\r\n          width: Math.abs(width),\r\n          height: Math.abs(height)\r\n        },\r\n        style: {}\r\n      });\r\n    }\r\n  });\r\n\r\n  this._mouseUpListener = goog.events.listen(canvas, annotorious.events.ui.EventType.UP, function(event) {\r\n    var points = annotorious.events.ui.sanitizeCoordinates(event, canvas);\r\n    var shape = self.getShape();\r\n    event = (event.event_) ? event.event_ : event;\r\n    \r\n    self._enabled = false;\r\n    if (shape) {\r\n      self._detachListeners();\r\n      self._annotator.fireEvent(annotorious.events.EventType.SELECTION_COMPLETED,\r\n        { mouseEvent: event, shape: shape, viewportBounds: self.getViewportBounds() }); \r\n    } else {\r\n      self._annotator.fireEvent(annotorious.events.EventType.SELECTION_CANCELED);\r\n\r\n      // On cancel, we \"relay\" the selection event to the annotator\r\n      var annotations = self._annotator.getAnnotationsAt(points.x, points.y);\r\n      if (annotations.length > 0)\r\n        self._annotator.highlightAnnotation(annotations[0]);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Detaches MOUSEUP and MOUSEMOVE listeners from the editing canvas.\r\n * @private\r\n */\r\nannotorious.plugins.selection.RectDragSelector.prototype._detachListeners = function() {\r\n  if (this._mouseMoveListener) {\r\n    goog.events.unlistenByKey(this._mouseMoveListener);\r\n    delete this._mouseMoveListener;\r\n  }\r\n\r\n  if (this._mouseUpListener) {\r\n    goog.events.unlistenByKey(this._mouseUpListener);\r\n    delete this._mouseUpListener;\r\n  }\r\n}\r\n\r\n/**\r\n * Selector API method: returns the selector name.\r\n * @returns the selector name\r\n */\r\nannotorious.plugins.selection.RectDragSelector.prototype.getName = function() {\r\n  return 'rect_drag';\r\n}\r\n\r\n/**\r\n * Selector API method: returns the supported shape type.\r\n *\r\n * TODO support for multiple shape types?\r\n *\r\n * @return the supported shape type\r\n */\r\nannotorious.plugins.selection.RectDragSelector.prototype.getSupportedShapeType = function() {\r\n  return annotorious.shape.ShapeType.RECTANGLE;\r\n}\r\n\r\n/**\r\n * Sets the properties on this selector.\r\n */\r\nannotorious.plugins.selection.RectDragSelector.prototype.setProperties = function(props) {  \r\n  if (props.hasOwnProperty('outline'))\r\n    this._OUTLINE = props['outline'];\r\n\r\n  if (props.hasOwnProperty('stroke'))\r\n    this._STROKE = props['stroke'];\r\n \r\n  if (props.hasOwnProperty('fill'))\r\n    this._FILL = props['fill'];\r\n\r\n  if (props.hasOwnProperty('hi_outline'))\r\n    this._HI_OUTLINE = props['hi_outline'];\r\n\r\n  if (props.hasOwnProperty('hi_stroke'))\r\n    this._HI_STROKE = props['hi_stroke'];\r\n\r\n  if (props.hasOwnProperty('hi_fill'))\r\n    this._HI_FILL = props['hi_fill'];\r\n\r\n  if (props.hasOwnProperty('outline_width'))\r\n    this._OUTLINE_WIDTH = props['outline_width'];\r\n\r\n  if (props.hasOwnProperty('stroke_width'))\r\n    this._STROKE_WIDTH = props['stroke_width'];\r\n\r\n  if (props.hasOwnProperty('hi_outline_width'))\r\n    this._HI_OUTLINE_WIDTH = props['hi_outline_width'];\r\n\r\n  if (props.hasOwnProperty('hi_stroke_width'))\r\n    this._HI_STROKE_WIDTH = props['hi_stroke_width'];\r\n}\r\n\r\n/**\r\n * Selector API method: starts the selection at the specified coordinates.\r\n * @param {number} x the X coordinate\r\n * @param {number} y the Y coordinate\r\n */\r\nannotorious.plugins.selection.RectDragSelector.prototype.startSelection = function(x, y) {\r\n  var startPoint = {\r\n    x: x,\r\n    y: y\r\n  };\r\n  this._enabled = true;\r\n  this._attachListeners(startPoint);\r\n  this._anchor = new annotorious.shape.geom.Point(x, y);\r\n  this._annotator.fireEvent(annotorious.events.EventType.SELECTION_STARTED, {\r\n    offsetX: x, offsetY: y});\r\n  \r\n  goog.style.setStyle(document.body, '-webkit-user-select', 'none');\r\n}\r\n\r\n/**\r\n * Selector API method: stops the selection.\r\n */\r\nannotorious.plugins.selection.RectDragSelector.prototype.stopSelection = function() {\r\n  this._detachListeners();\r\n  this._g2d.clearRect(0, 0, this._canvas.width, this._canvas.height);\r\n  goog.style.setStyle(document.body, '-webkit-user-select', 'auto');\r\n  delete this._opposite;\r\n}\r\n\r\n/**\r\n * Selector API method: returns the currently edited shape.\r\n * @return {annotorious.shape.Shape | undefined} the shape\r\n */\r\nannotorious.plugins.selection.RectDragSelector.prototype.getShape = function() {\r\n  if (this._opposite && \r\n     (Math.abs(this._opposite.x - this._anchor.x) > 3) && \r\n     (Math.abs(this._opposite.y - this._anchor.y) > 3)) {\r\n       \r\n    var viewportBounds = this.getViewportBounds();\r\n    // var item_anchor = this._annotator.toItemCoordinates({x: viewportBounds.left, y: viewportBounds.top});\r\n    // var item_opposite = this._annotator.toItemCoordinates({x: viewportBounds.right, y: viewportBounds.bottom});\r\n \r\n    /*\r\n    var rect = new annotorious.shape.geom.Rectangle(\r\n      item_anchor.x,\r\n      item_anchor.y,\r\n      item_opposite.x - item_anchor.x,\r\n      item_opposite.y - item_anchor.y\r\n    );*/\r\n    var rect = this._annotator.toItemCoordinates({\r\n      x: viewportBounds.left,\r\n      y: viewportBounds.top,\r\n      width: viewportBounds.right - viewportBounds.left,\r\n      height: viewportBounds.bottom - viewportBounds.top\r\n    });\r\n\r\n    return new annotorious.shape.Shape(annotorious.shape.ShapeType.RECTANGLE, rect);\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Selector API method: returns the bounds of the selected shape, in viewport (= pixel) coordinates.\r\n * @returns {Object} the shape viewport bounds\r\n */\r\nannotorious.plugins.selection.RectDragSelector.prototype.getViewportBounds = function() {\r\n  var right, left;\r\n  if (this._opposite.x > this._anchor.x) {\r\n    right = this._opposite.x;\r\n    left = this._anchor.x;\r\n  } else {\r\n    right = this._anchor.x;\r\n    left = this._opposite.x;    \r\n  }\r\n  \r\n  var top, bottom;\r\n  if (this._opposite.y > this._anchor.y) {\r\n    top = this._anchor.y;\r\n    bottom = this._opposite.y;\r\n  } else {\r\n    top = this._opposite.y;\r\n    bottom = this._anchor.y;    \r\n  }\r\n  \r\n  return {top: top, right: right, bottom: bottom, left: left};\r\n}\r\n\r\n/**\r\n * TODO not sure if this is really the best way/architecture to handle viewer shape drawing\r\n * @param {Object} g2d graphics context\r\n * @param {annotorious.shape.Shape} shape the shape to draw\r\n * @param {boolean=} highlight if true, shape will be drawn highlighted\r\n */\r\nannotorious.plugins.selection.RectDragSelector.prototype.drawShape = function(g2d, shape, highlight) {\r\n  var geom, stroke, fill, outline, outline_width, stroke_width;\r\n\r\n  if (!shape.style) shape.style = {};\r\n  \r\n  if (shape.type == annotorious.shape.ShapeType.RECTANGLE) {\r\n    if (highlight) {\r\n      fill = shape.style.hi_fill || this._HI_FILL;\r\n      stroke = shape.style.hi_stroke || this._HI_STROKE;\r\n      outline = shape.style.hi_outline || this._HI_OUTLINE;\r\n      outline_width = shape.style.hi_outline_width || this._HI_OUTLINE_WIDTH;\r\n      stroke_width = shape.style.hi_stroke_width || this._HI_STROKE_WIDTH;\r\n    } else {\r\n      fill = shape.style.fill || this._FILL;\r\n      stroke = shape.style.stroke || this._STROKE;\r\n      outline = shape.style.outline || this._OUTLINE;\r\n      outline_width = shape.style.outline_width || this._OUTLINE_WIDTH;\r\n      stroke_width = shape.style.stroke_width || this._STROKE_WIDTH;\r\n    }\r\n\r\n    geom = shape.geometry;\r\n\r\n    // Outline\r\n    if (outline) {\r\n        g2d.lineJoin = \"round\";\r\n        g2d.lineWidth = outline_width;\r\n        g2d.strokeStyle = outline;\r\n        g2d.strokeRect(\r\n          geom.x + outline_width/2, \r\n          geom.y + outline_width/2, \r\n          geom.width - outline_width, \r\n          geom.height - outline_width\r\n        );\r\n    }\r\n\r\n    // Stroke\r\n    if (stroke) {\r\n      g2d.lineJoin = \"miter\";\r\n      g2d.lineWidth = stroke_width;\r\n      g2d.strokeStyle = stroke;\r\n      g2d.strokeRect(\r\n        geom.x + outline_width + stroke_width/2, \r\n        geom.y + outline_width + stroke_width/2, \r\n        geom.width - outline_width*2 - stroke_width, \r\n        geom.height - outline_width*2 - stroke_width\r\n      );\r\n    }\r\n\r\n    // Fill   \r\n    if (fill) {\r\n      g2d.lineJoin = \"miter\";\r\n      g2d.lineWidth = stroke_width;\r\n      g2d.fillStyle = fill;\r\n      g2d.fillRect(\r\n        geom.x + outline_width + stroke_width/2, \r\n        geom.y + outline_width + stroke_width/2, \r\n        geom.width - outline_width*2 - stroke_width, \r\n        geom.height - outline_width*2 - stroke_width\r\n      );\r\n    }\r\n  }\r\n}\r\n","// This file was automatically generated from image_elements.soy.\n// Please don't edit this file by hand.\n\n/**\n * @fileoverview Templates in namespace annotorious.templates.image.\n */\n\ngoog.provide('annotorious.templates.image');\n\ngoog.require('soy');\ngoog.require('soydata');\n\n\n/**\n * @param {Object.<string, *>=} opt_data\n * @param {(null|undefined)=} opt_ignored\n * @return {string}\n * @suppress {checkTypes|uselessCode}\n */\nannotorious.templates.image.canvas = function(opt_data, opt_ignored) {\n  return '<canvas class=\"annotorious-item annotorious-opacity-fade\" style=\"position:absolute; top:0px; left:0px; width:' + soy.$$escapeHtml(opt_data.width) + 'px; height:' + soy.$$escapeHtml(opt_data.height) + 'px; z-index:0\" width=\"' + soy.$$escapeHtml(opt_data.width) + '\" height=\"' + soy.$$escapeHtml(opt_data.height) + '\"></canvas>';\n};\nif (goog.DEBUG) {\n  annotorious.templates.image.canvas.soyTemplateName = 'annotorious.templates.image.canvas';\n}\n\n\n/**\n * @param {Object.<string, *>=} opt_data\n * @param {(null|undefined)=} opt_ignored\n * @return {string}\n * @suppress {checkTypes|uselessCode}\n */\nannotorious.templates.image.hint = function(opt_data, opt_ignored) {\n  return '<div class=\"annotorious-hint\" style=\"white-space:nowrap; position:absolute; top:0px; left:0px; pointer-events:none;\"><div class=\"annotorious-hint-msg annotorious-opacity-fade\">' + soy.$$escapeHtml(opt_data.msg) + '</div><div class=\"annotorious-hint-icon\" style=\"pointer-events:auto\"></div></div>';\n};\nif (goog.DEBUG) {\n  annotorious.templates.image.hint.soyTemplateName = 'annotorious.templates.image.hint';\n}\n","goog.provide('annotorious.mediatypes.image.ImageAnnotator');\r\n\r\ngoog.require('goog.dom');\r\ngoog.require('goog.dom.classes');\r\ngoog.require('goog.events');\r\ngoog.require('goog.math');\r\ngoog.require('goog.soy');\r\ngoog.require('goog.style');\r\n\r\ngoog.require('annotorious.events');\r\ngoog.require('annotorious.Editor');\r\ngoog.require('annotorious.Hint');\r\ngoog.require('annotorious.Popup');\r\ngoog.require('annotorious.shape.geom.Point');\r\ngoog.require('annotorious.mediatypes.Annotator');\r\ngoog.require('annotorious.mediatypes.image.Viewer');\r\ngoog.require('annotorious.plugins.selection.RectDragSelector');\r\ngoog.require('annotorious.templates.image');\r\n\r\n/**\r\n * The ImageAnnotator is responsible for one image in the page.\r\n * @param {Element} item the image DOM element\r\n * @param {annotorious.Popup=} opt_popup a popup implementation to use instead of the default one\r\n * @constructor\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator = function(item, opt_popup) {\r\n  annotorious.mediatypes.Annotator.call();\r\n\r\n  var hint;\r\n  \r\n  /** The container DOM element (DIV) for the annotation layer **/\r\n  this.element;\r\n  \r\n  /** The editor for this annotator (public for use by plugins) **/\r\n  this.editor;\r\n\r\n  /** The popup for this annotator (public for use by plugins) **/\r\n  this.popup;\r\n\r\n  /** @private **/\r\n  this._image = item;\r\n\r\n  /** @private **/\r\n  this._original_bufferspace = { padding: item.style.padding, margin: item.style.margin }\r\n  \r\n  /** @private **/\r\n  this._viewer;\r\n  \r\n  /** @private **/\r\n  this._editCanvas;\r\n  \r\n  /** @private **/\r\n  this._hint;\r\n  \r\n  /** @private **/\r\n  this._eventBroker = new annotorious.events.EventBroker();\r\n\r\n  /** @private **/\r\n  this._selectors = [];\r\n  \r\n  /** @private **/\r\n  this._currentSelector;\r\n\r\n  /** @private **/\r\n  this._selectionEnabled = true;\r\n\r\n  this.element = goog.dom.createDom('div', 'annotorious-annotationlayer');\r\n  goog.style.setStyle(this.element, 'position', 'relative');\r\n  goog.style.setStyle(this.element, 'display', 'inline-block');\r\n  this._transferStyles(item, this.element);\r\n\r\n  goog.dom.replaceNode(this.element, item);\r\n  goog.dom.appendChild(this.element, item);\r\n\r\n  var img_bounds = goog.style.getBounds(item);  \r\n  this._viewCanvas = goog.soy.renderAsElement(annotorious.templates.image.canvas,\r\n    { width:img_bounds.width, height:img_bounds.height });\r\n  if (annotorious.events.ui.hasMouse)\r\n    goog.dom.classes.add(this._viewCanvas, 'annotorious-item-unfocus');\r\n  goog.dom.appendChild(this.element, this._viewCanvas);   \r\n\r\n  this._editCanvas = goog.soy.renderAsElement(annotorious.templates.image.canvas, \r\n    { width:img_bounds.width, height:img_bounds.height });\r\n\r\n  if (annotorious.events.ui.hasMouse)\r\n    goog.style.showElement(this._editCanvas, false); \r\n  goog.dom.appendChild(this.element, this._editCanvas);\r\n\r\n  if (opt_popup)\r\n    this.popup = opt_popup;\r\n  else\r\n    this.popup = new annotorious.Popup(this);\r\n\r\n  var default_selector = new annotorious.plugins.selection.RectDragSelector();\r\n  default_selector.init(this, this._editCanvas); \r\n  this._selectors.push(default_selector);\r\n  this._currentSelector = default_selector;\r\n\r\n  this.editor = new annotorious.Editor(this);\r\n  this._viewer = new annotorious.mediatypes.image.Viewer(this._viewCanvas, this); \r\n  this._hint = new annotorious.Hint(this, this.element);\r\n  \r\n  var self = this;\r\n\r\n  if (annotorious.events.ui.hasMouse) {\r\n    goog.events.listen(this.element, annotorious.events.ui.EventType.OVER, function(event) {\r\n      var relatedTarget = event.relatedTarget;\r\n      if (!relatedTarget || !goog.dom.contains(self.element, relatedTarget)) {\r\n        self._eventBroker.fireEvent(annotorious.events.EventType.MOUSE_OVER_ANNOTATABLE_ITEM);\r\n        goog.dom.classes.addRemove(self._viewCanvas, 'annotorious-item-unfocus', 'annotorious-item-focus');\r\n      }\r\n    });\r\n  \r\n    goog.events.listen(this.element, annotorious.events.ui.EventType.OUT, function(event) {\r\n      var relatedTarget = event.relatedTarget;\r\n      if (!relatedTarget || !goog.dom.contains(self.element, relatedTarget)) {\r\n        self._eventBroker.fireEvent(annotorious.events.EventType.MOUSE_OUT_OF_ANNOTATABLE_ITEM);\r\n        goog.dom.classes.addRemove(self._viewCanvas, 'annotorious-item-focus', 'annotorious-item-unfocus');\r\n      }\r\n    });\r\n  }\r\n\r\n  var activeCanvas = (annotorious.events.ui.hasTouch) ? this._editCanvas : this._viewCanvas;\r\n  this._attachListener(activeCanvas);\r\n\r\n  this._eventBroker.addHandler(annotorious.events.EventType.SELECTION_COMPLETED, function(event) {\r\n    var bounds = event.viewportBounds;\r\n    self.editor.setPosition(new annotorious.shape.geom.Point(bounds.left + self._image.offsetLeft,\r\n                                                            bounds.bottom + 4 + self._image.offsetTop));\r\n    self.editor.open(false, event);\r\n  });\r\n  \r\n  this._eventBroker.addHandler(annotorious.events.EventType.SELECTION_CANCELED, function() {\r\n    if (annotorious.events.ui.hasMouse)\r\n      goog.style.showElement(self._editCanvas, false);\r\n    self._currentSelector.stopSelection();\r\n  });\r\n}\r\ngoog.inherits(annotorious.mediatypes.image.ImageAnnotator, annotorious.mediatypes.Annotator);\r\n\r\n/**\r\n * Helper function to transfer relevant styles from the <img> to the annotation layer <div> element.\r\n * @private\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype._transferStyles = function(image, annotationLayer) {\r\n  var transferMargin = function(direction, value) {\r\n    goog.style.setStyle(annotationLayer, 'margin-' + direction, value + 'px'); \r\n    goog.style.setStyle(image, 'margin-' + direction, 0);\r\n    goog.style.setStyle(image, 'padding-' + direction, 0);\r\n  }\r\n\r\n  var margin = goog.style.getMarginBox(image);\r\n  var padding = goog.style.getPaddingBox(image);\r\n  \r\n  if (margin.top != 0 || padding.top != 0)\r\n    transferMargin('top', margin.top + padding.top);\r\n\r\n  if (margin.right != 0 || padding.right != 0)\r\n    transferMargin('right', margin.right + padding.right);\r\n\r\n  if (margin.bottom != 0 || padding.bottom != 0)\r\n    transferMargin('bottom', margin.bottom + padding.bottom);\r\n \r\n  if (margin.left != 0 || padding.left != 0)\r\n    transferMargin('left', margin.left + padding.left);\r\n}\r\n\r\n/**\r\n * NOT NEEDED/SUPPORTED on ImageAnnotator.\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.activateSelector = function(callback) { }\r\n\r\n/**\r\n * Adds a selector\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.addSelector = function(selector) {\r\n  selector.init(this, this._editCanvas); \r\n  this._selectors.push(selector);\r\n}\r\n\r\n/**\r\n * Destroys this annotator instance.\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.destroy = function() {\r\n  var img = this._image;\r\n  img.style.margin = this._original_bufferspace.margin;\r\n  img.style.padding = this._original_bufferspace.padding;\r\n  goog.dom.replaceNode(img, this.element);\r\n}\r\n\r\n/**\r\n * Edits the specified existing annotation.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.editAnnotation = function(annotation) {\r\n  // Step 1 - remove from viewer\r\n  this._viewer.removeAnnotation(annotation);\r\n  \r\n  // Step 2 - find a suitable selector for the shape\r\n  var selector = goog.array.find(this._selectors, function(selector) {\r\n    return selector.getSupportedShapeType() == annotation.shapes[0].type;\r\n  });\r\n  \r\n  // Step 3 - open annotation in editor\r\n  if (selector) {\r\n    goog.style.showElement(this._editCanvas, true);\r\n    this._viewer.highlightAnnotation(false);\r\n    \r\n    // TODO make editable - not just draw (selector implementation required)\r\n    var g2d = this._editCanvas.getContext('2d');\r\n    var shape = annotation.shapes[0];\r\n    \r\n    var self = this;\r\n    var viewportShape = (shape.units == 'pixel') ? shape : annotorious.shape.transform(shape, function(xy) { return self.fromItemCoordinates(xy); }) ;\r\n    selector.drawShape(g2d, viewportShape);\r\n  }\r\n  \r\n  var bounds = annotorious.shape.getBoundingRect(annotation.shapes[0]).geometry;\r\n  var anchor = (annotation.shapes[0].units == 'pixel') ?\r\n    new annotorious.shape.geom.Point(bounds.x, bounds.y + bounds.height) :\r\n    this.fromItemCoordinates(new annotorious.shape.geom.Point(bounds.x, bounds.y + bounds.height));   \r\n  \r\n  this.editor.setPosition(new annotorious.shape.geom.Point(anchor.x + this._image.offsetLeft,\r\n                                                           anchor.y + 4 + this._image.offsetTop));\r\n  this.editor.open(annotation);  \r\n}\r\n\r\n/**\r\n * Converts the specified viewport coordinate to the\r\n * coordinate system used by the annotatable item.\r\n * @param {annotorious.shape.geom.Point} xy the viewport coordinate\r\n * @returns the corresponding item coordinate\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.fromItemCoordinates = function(xy_wh) {\r\n  var imgSize = goog.style.getSize(this._image);\r\n  if (xy_wh.width) {\r\n    return { x: xy_wh.x * imgSize.width, y: xy_wh.y * imgSize.height, width: xy_wh.width * imgSize.width,  height: xy_wh.height * imgSize.height };\r\n  } else {\r\n    return { x: xy_wh.x * imgSize.width, y: xy_wh.y * imgSize.height };\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the currently active selector.\r\n * @returns {Object} the currently active selector\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.getActiveSelector = function() {\r\n  return this._currentSelector;\r\n}\r\n\r\n/**\r\n * Returns all annotations on the annotatable media.\r\n * @returns {Array.<annotorious.Annotation>} the annotations\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.getAnnotations = function() {\r\n  return this._viewer.getAnnotations();\r\n}\r\n\r\n/**\r\n * Returns the annotations at the specified client X/Y coordinates.\r\n * @param {number} cx the client X coordinate\r\n * @param {number} cy the client Y coordinate\r\n * @return {Array.<annotorious.Annotation>} the annotations sorted by size, smallest first\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.getAnnotationsAt = function(cx, cy) {\r\n  return goog.array.clone(this._viewer.getAnnotationsAt(cx, cy));\r\n}\r\n\r\n/**\r\n * Returns the available selectors for this item.\r\n * @returns {Array.<Object>} the list of selectors\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.getAvailableSelectors = function() {\r\n  return this._selectors;\r\n}\r\n\r\n/**\r\n * Returns the image that this annotator is responsible for.\r\n * @returns {Object} the image\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.getItem = function() { \r\n  return { src: annotorious.mediatypes.image.ImageAnnotator.getItemURL(this._image), element: this._image };\r\n}\r\n\r\n/**\r\n * Helper function that returns the 'URL' of the image. Normally, this will be the\r\n * 'src' attribute of the <img> tag. But to provide more flexiblity, it is possible to \r\n * override this value using the 'data-original' attribute. Only if this attribute \r\n * does not exist, the real 'src' will be returned.\r\n * @param {Element} item the image DOM element\r\n * @return {string} the URL\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.getItemURL = function(item) {\r\n  var src = item.getAttribute('data-original');\r\n  if (src)\r\n    return src;\r\n  else\r\n    return item.src;\r\n}\r\n\r\n/**\r\n * Hides annotations (and all other Annotorious elements).\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.hideAnnotations = function() {\r\n  goog.style.showElement(this._viewCanvas, false);\r\n}\r\n\r\n/**\r\n * Hides the selection widget, thus preventing users from creating new annotations.\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.hideSelectionWidget = function() {\r\n  this._selectionEnabled = false;\r\n  if (this._hint) {\r\n    this._hint.destroy();\r\n    delete this._hint;\r\n  }\r\n}\r\n\r\n/**\r\n * Sets the active selector for this item to the specified selector.\r\n * @param {Object} selector the selector object\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.setCurrentSelector = function(selector) {\r\n  this._currentSelector = goog.array.find(this._selectors, function(sel) {\r\n    return sel.getName() == selector;\r\n  });\r\n\r\n  if (!this._currentSelector)\r\n    console.log('WARNING: selector \"' + selector + '\" not available'); \r\n}\r\n\r\n/**\r\n * Set the properties on this annotator. (Currently, we only have properties\r\n * affecting the selectors).\r\n * @param {Object} props the properties object\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.setProperties = function(props) {\r\n  goog.array.forEach(this._selectors, function(selector) {\r\n    selector.setProperties(props);\r\n  });\r\n  this._viewer.redraw();\r\n}\r\n\r\n/**\r\n * Shows annotations (and all other Annotorious elements).\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.showAnnotations = function() {\r\n  goog.style.showElement(this._viewCanvas, true);\r\n}\r\n\r\n/**\r\n * Shows the selection widget, thus enabling users to create new annotations.\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.showSelectionWidget = function() {\r\n  this._selectionEnabled = true;  \r\n  if (!this._hint)\r\n    this._hint = new annotorious.Hint(this, this.element);\r\n}\r\n\r\n/**\r\n * Stops the selection (if any).\r\n * @param {annotorious.Annotation=} opt_original_annotation the original annotation being edited (if any)\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.stopSelection = function(opt_original_annotation) {\r\n   if (annotorious.events.ui.hasMouse)\r\n     goog.style.showElement(this._editCanvas, false);\r\n\r\n   this._currentSelector.stopSelection();\r\n   \r\n   // If this was an edit of an annotation (rather than creation of a new one) re-add to viewer!\r\n   if (opt_original_annotation)\r\n     this._viewer.addAnnotation(opt_original_annotation);\r\n}\r\n\r\n/**\r\n * Converts the specified coordinate from the\r\n * coordinate system used by the annotatable item to viewport coordinates.\r\n * @param {annotorious.shape.geom.Point} xy the item coordinate\r\n * @returns the corresponding viewport coordinate\r\n */\r\nannotorious.mediatypes.image.ImageAnnotator.prototype.toItemCoordinates = function(xy_wh) {\r\n  var imgSize = goog.style.getSize(this._image);  \r\n  if (xy_wh.width) {\r\n    return { x: xy_wh.x / imgSize.width, y: xy_wh.y / imgSize.height, width: xy_wh.width / imgSize.width, height: xy_wh.height /imgSize.height }; \r\n  } else {\r\n    return { x: xy_wh.x / imgSize.width, y: xy_wh.y / imgSize.height };\r\n  }\r\n}\r\n\r\n/** API exports **/\r\nannotorious.mediatypes.image.ImageAnnotator.prototype['addSelector'] = annotorious.mediatypes.image.ImageAnnotator.prototype.addSelector;\r\nannotorious.mediatypes.image.ImageAnnotator.prototype['fireEvent'] = annotorious.mediatypes.image.ImageAnnotator.prototype.fireEvent;\r\nannotorious.mediatypes.image.ImageAnnotator.prototype['setCurrentSelector'] = annotorious.mediatypes.image.ImageAnnotator.prototype.setCurrentSelector;\r\nannotorious.mediatypes.image.ImageAnnotator.prototype['toItemCoordinates'] = annotorious.mediatypes.image.ImageAnnotator.prototype.toItemCoordinates;\r\n","goog.provide('annotorious.mediatypes.image.ImageModule');\r\n\r\ngoog.require('annotorious.mediatypes.Module');\r\ngoog.require('annotorious.mediatypes.image.ImageAnnotator');\r\n\r\n/**\r\n * The Image Module implements annotation functionality for <IMG>\r\n * elements. On page load, it also scans the page for images marked\r\n * with an 'annotatable' CSS class, and makes those annotatable automatically.\r\n * @constructor\r\n * @extends annotorious.mediatypes.Module\r\n */\r\nannotorious.mediatypes.image.ImageModule = function() { \r\n  annotorious.mediatypes.Module.call();\r\n  this._initFields(function() {\r\n    return document.querySelectorAll('img.annotatable');\r\n  });\r\n}\r\ngoog.inherits(annotorious.mediatypes.image.ImageModule, annotorious.mediatypes.Module);\r\n  \r\n/** @inheritDoc **/\r\nannotorious.mediatypes.image.ImageModule.prototype.getItemURL = function(item) {\r\n  return annotorious.mediatypes.image.ImageAnnotator.getItemURL(item);\r\n}\r\n\r\n/** @inheritDoc **/\r\nannotorious.mediatypes.image.ImageModule.prototype.newAnnotator = function(item) {\r\n  return new annotorious.mediatypes.image.ImageAnnotator(item);\r\n}\r\n\r\n/** @inheritDoc **/\r\nannotorious.mediatypes.image.ImageModule.prototype.supports = function(item) {\r\n  if (goog.dom.isElement(item))\r\n    return (item.tagName == 'IMG');\r\n  else\r\n    return false;\r\n}\r\n","// This file was automatically generated from openlayers_elements.soy.\n// Please don't edit this file by hand.\n\n/**\n * @fileoverview Templates in namespace annotorious.templates.openlayers.\n */\n\ngoog.provide('annotorious.templates.openlayers');\n\ngoog.require('soy');\ngoog.require('soydata');\n\n\n/**\n * @param {Object.<string, *>=} opt_data\n * @param {(null|undefined)=} opt_ignored\n * @return {string}\n * @suppress {checkTypes|uselessCode}\n */\nannotorious.templates.openlayers.secondaryHint = function(opt_data, opt_ignored) {\n  return '<div class=\"annotorious-opacity-fade\" style=\"white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;\"><div class=\"annotorious-ol-hint\" style=\"width: 400px; margin:0px auto;\">' + soy.$$escapeHtml(opt_data.msg) + '</div></div>';\n};\nif (goog.DEBUG) {\n  annotorious.templates.openlayers.secondaryHint.soyTemplateName = 'annotorious.templates.openlayers.secondaryHint';\n}\n","// Copyright 2006 The Closure Library Authors. All Rights Reserved.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS-IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n/**\n * @fileoverview This event wrapper will dispatch an event when the user uses\n * the mouse wheel to scroll an element. You can get the direction by checking\n * the deltaX and deltaY properties of the event.\n *\n * This class aims to smooth out inconsistencies between browser platforms with\n * regards to mousewheel events, but we do not cover every possible\n * software/hardware combination out there, some of which occasionally produce\n * very large deltas in mousewheel events. If your application wants to guard\n * against extremely large deltas, use the setMaxDeltaX and setMaxDeltaY APIs\n * to set maximum values that make sense for your application.\n *\n * @author arv@google.com (Erik Arvidsson)\n * @see ../demos/mousewheelhandler.html\n */\n\ngoog.provide('goog.events.MouseWheelEvent');\ngoog.provide('goog.events.MouseWheelHandler');\ngoog.provide('goog.events.MouseWheelHandler.EventType');\n\ngoog.require('goog.dom');\ngoog.require('goog.events');\ngoog.require('goog.events.BrowserEvent');\ngoog.require('goog.events.EventTarget');\ngoog.require('goog.math');\ngoog.require('goog.style');\ngoog.require('goog.userAgent');\n\n\n\n/**\n * This event handler allows you to catch mouse wheel events in a consistent\n * manner.\n * @param {Element|Document} element The element to listen to the mouse wheel\n *     event on.\n * @param {boolean=} opt_capture Whether to handle the mouse wheel event in\n *     capture phase.\n * @constructor\n * @extends {goog.events.EventTarget}\n */\ngoog.events.MouseWheelHandler = function(element, opt_capture) {\n  goog.events.EventTarget.call(this);\n\n  /**\n   * This is the element that we will listen to the real mouse wheel events on.\n   * @type {Element|Document}\n   * @private\n   */\n  this.element_ = element;\n\n  var rtlElement = goog.dom.isElement(this.element_) ?\n      /** @type {Element} */ (this.element_) :\n                             (this.element_ ?\n                                  /** @type {Document} */ (this.element_).body :\n                                  null);\n\n  /**\n   * True if the element exists and is RTL, false otherwise.\n   * @type {boolean}\n   * @private\n   */\n  this.isRtl_ = !!rtlElement && goog.style.isRightToLeft(rtlElement);\n\n  var type = goog.userAgent.GECKO ? 'DOMMouseScroll' : 'mousewheel';\n\n  /**\n   * The key returned from the goog.events.listen.\n   * @type {goog.events.Key}\n   * @private\n   */\n  this.listenKey_ = goog.events.listen(this.element_, type, this, opt_capture);\n};\ngoog.inherits(goog.events.MouseWheelHandler, goog.events.EventTarget);\n\n\n/**\n * Enum type for the events fired by the mouse wheel handler.\n * @enum {string}\n */\ngoog.events.MouseWheelHandler.EventType = {\n  MOUSEWHEEL: 'mousewheel'\n};\n\n\n/**\n * Optional maximum magnitude for x delta on each mousewheel event.\n * @type {number|undefined}\n * @private\n */\ngoog.events.MouseWheelHandler.prototype.maxDeltaX_;\n\n\n/**\n * Optional maximum magnitude for y delta on each mousewheel event.\n * @type {number|undefined}\n * @private\n */\ngoog.events.MouseWheelHandler.prototype.maxDeltaY_;\n\n\n/**\n * @param {number} maxDeltaX Maximum magnitude for x delta on each mousewheel\n *     event. Should be non-negative.\n */\ngoog.events.MouseWheelHandler.prototype.setMaxDeltaX = function(maxDeltaX) {\n  this.maxDeltaX_ = maxDeltaX;\n};\n\n\n/**\n * @param {number} maxDeltaY Maximum magnitude for y delta on each mousewheel\n *     event. Should be non-negative.\n */\ngoog.events.MouseWheelHandler.prototype.setMaxDeltaY = function(maxDeltaY) {\n  this.maxDeltaY_ = maxDeltaY;\n};\n\n\n/**\n * Handles the events on the element.\n * @param {goog.events.BrowserEvent} e The underlying browser event.\n */\ngoog.events.MouseWheelHandler.prototype.handleEvent = function(e) {\n  var deltaX = 0;\n  var deltaY = 0;\n  var detail = 0;\n  var be = e.getBrowserEvent();\n  if (be.type == 'mousewheel') {\n    // In IE we get a multiple of 120; we adjust to a multiple of 3 to\n    // represent number of lines scrolled (like Gecko).\n    // Newer versions of Webkit match IE behavior, and WebKit on\n    // Windows also matches IE behavior.\n    // See bug https://bugs.webkit.org/show_bug.cgi?id=24368\n    var wheelDeltaScaleFactor = 40;\n\n    detail = goog.events.MouseWheelHandler.smartScale_(\n        -be.wheelDelta, wheelDeltaScaleFactor);\n    if (goog.isDef(be.wheelDeltaX)) {\n      // Webkit has two properties to indicate directional scroll, and\n      // can scroll both directions at once.\n      deltaX = goog.events.MouseWheelHandler.smartScale_(\n          -be.wheelDeltaX, wheelDeltaScaleFactor);\n      deltaY = goog.events.MouseWheelHandler.smartScale_(\n          -be.wheelDeltaY, wheelDeltaScaleFactor);\n    } else {\n      deltaY = detail;\n    }\n\n    // Historical note: Opera (pre 9.5) used to negate the detail value.\n  } else {  // Gecko\n    // Gecko returns multiple of 3 (representing the number of lines scrolled)\n    detail = be.detail;\n\n    // Gecko sometimes returns really big values if the user changes settings to\n    // scroll a whole page per scroll\n    if (detail > 100) {\n      detail = 3;\n    } else if (detail < -100) {\n      detail = -3;\n    }\n\n    // Firefox 3.1 adds an axis field to the event to indicate direction of\n    // scroll.  See https://developer.mozilla.org/en/Gecko-Specific_DOM_Events\n    if (goog.isDef(be.axis) && be.axis === be.HORIZONTAL_AXIS) {\n      deltaX = detail;\n    } else {\n      deltaY = detail;\n    }\n  }\n\n  if (goog.isNumber(this.maxDeltaX_)) {\n    deltaX = goog.math.clamp(deltaX, -this.maxDeltaX_, this.maxDeltaX_);\n  }\n  if (goog.isNumber(this.maxDeltaY_)) {\n    deltaY = goog.math.clamp(deltaY, -this.maxDeltaY_, this.maxDeltaY_);\n  }\n  // Don't clamp 'detail', since it could be ambiguous which axis it refers to\n  // and because it's informally deprecated anyways.\n\n  // For horizontal scrolling we need to flip the value for RTL grids.\n  if (this.isRtl_) {\n    deltaX = -deltaX;\n  }\n  var newEvent = new goog.events.MouseWheelEvent(detail, be, deltaX, deltaY);\n  this.dispatchEvent(newEvent);\n};\n\n\n/**\n * Helper for scaling down a mousewheel delta by a scale factor, if appropriate.\n * @param {number} mouseWheelDelta Delta from a mouse wheel event. Expected to\n *     be an integer.\n * @param {number} scaleFactor Factor to scale the delta down by. Expected to\n *     be an integer.\n * @return {number} Scaled-down delta value, or the original delta if the\n *     scaleFactor does not appear to be applicable.\n * @private\n */\ngoog.events.MouseWheelHandler.smartScale_ = function(\n    mouseWheelDelta, scaleFactor) {\n  // The basic problem here is that in Webkit on Mac and Linux, we can get two\n  // very different types of mousewheel events: from continuous devices\n  // (touchpads, Mighty Mouse) or non-continuous devices (normal wheel mice).\n  //\n  // Non-continuous devices in Webkit get their wheel deltas scaled up to\n  // behave like IE. Continuous devices return much smaller unscaled values\n  // (which most of the time will not be cleanly divisible by the IE scale\n  // factor), so we should not try to normalize them down.\n  //\n  // Detailed discussion:\n  //   https://bugs.webkit.org/show_bug.cgi?id=29601\n  //   http://trac.webkit.org/browser/trunk/WebKit/chromium/src/mac/WebInputEventFactory.mm#L1063\n  if (goog.userAgent.WEBKIT && (goog.userAgent.MAC || goog.userAgent.LINUX) &&\n      (mouseWheelDelta % scaleFactor) != 0) {\n    return mouseWheelDelta;\n  } else {\n    return mouseWheelDelta / scaleFactor;\n  }\n};\n\n\n/** @override */\ngoog.events.MouseWheelHandler.prototype.disposeInternal = function() {\n  goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this);\n  goog.events.unlistenByKey(this.listenKey_);\n  this.listenKey_ = null;\n};\n\n\n\n/**\n * A base class for mouse wheel events. This is used with the\n * MouseWheelHandler.\n *\n * @param {number} detail The number of rows the user scrolled.\n * @param {Event} browserEvent Browser event object.\n * @param {number} deltaX The number of rows the user scrolled in the X\n *     direction.\n * @param {number} deltaY The number of rows the user scrolled in the Y\n *     direction.\n * @constructor\n * @extends {goog.events.BrowserEvent}\n * @final\n */\ngoog.events.MouseWheelEvent = function(detail, browserEvent, deltaX, deltaY) {\n  goog.events.BrowserEvent.call(this, browserEvent);\n\n  this.type = goog.events.MouseWheelHandler.EventType.MOUSEWHEEL;\n\n  /**\n   * The number of lines the user scrolled\n   * @type {number}\n   * NOTE: Informally deprecated. Use deltaX and deltaY instead, they provide\n   * more information.\n   */\n  this.detail = detail;\n\n  /**\n   * The number of \"lines\" scrolled in the X direction.\n   *\n   * Note that not all browsers provide enough information to distinguish\n   * horizontal and vertical scroll events, so for these unsupported browsers,\n   * we will always have a deltaX of 0, even if the user scrolled their mouse\n   * wheel or trackpad sideways.\n   *\n   * Currently supported browsers are Webkit and Firefox 3.1 or later.\n   *\n   * @type {number}\n   */\n  this.deltaX = deltaX;\n\n  /**\n   * The number of lines scrolled in the Y direction.\n   * @type {number}\n   */\n  this.deltaY = deltaY;\n};\ngoog.inherits(goog.events.MouseWheelEvent, goog.events.BrowserEvent);\n","goog.provide('annotorious.mediatypes.openlayers.Viewer');\r\n\r\ngoog.require('goog.events.MouseWheelHandler');\r\n\r\n/**\r\n * The OpenLayers viewer wraps an OpenLayers Box Marker layer to display annotations inside\r\n * of Box markers.\r\n * @param {Object} map the OpenLayers map\r\n * @param {annotorious.mediatypes.openlayers.OpenLayersAnnotator} annotator reference to the annotator\r\n * @constructor\r\n */\r\nannotorious.mediatypes.openlayers.Viewer = function(map, annotator) {\r\n  /** @private **/\r\n  this._map = map;\r\n\r\n  /** @private **/\r\n  this._annotator = annotator;\r\n\r\n  /** @private **/\r\n  this._map_bounds = goog.style.getBounds(annotator.element);\r\n\r\n  /** @private **/\r\n  this._popup = annotator.popup;\r\n  goog.style.setStyle(this._popup.element, 'z-index', 99000);\r\n\r\n  /** @private **/\r\n  this._overlays = [];\r\n\r\n  /** @private **/\r\n  this._shapes = [];\r\n\r\n  /** @private **/\r\n  this._currentlyHighlightedOverlay;\r\n\r\n  /** @private **/\r\n  this._lastHoveredOverlay;\r\n\r\n  /** @private **/\r\n  this._boxesLayer = new OpenLayers.Layer.Boxes('Annotorious'); // TODO make configurable\r\n  this._map.addLayer(this._boxesLayer);\r\n  \r\n  var self = this;\r\n  this._map.events.register('move', this._map, function() {\r\n    if (self._currentlyHighlightedOverlay)\r\n      self._place_popup();\r\n  });\r\n\r\n  annotator.addHandler(annotorious.events.EventType.BEFORE_POPUP_HIDE, function() {\r\n    if (self._lastHoveredOverlay == self._currentlyHighlightedOverlay)\r\n      self._popup.clearHideTimer();\r\n    else\r\n      self._updateHighlight(self._lastHoveredOverlay, self._currentlyHighlightedOverlay);\r\n  });\r\n}\r\n\r\nannotorious.mediatypes.openlayers.Viewer.prototype.destroy = function() {\r\n  this._boxesLayer.destroy();\r\n}\r\n\r\n/**\r\n * Resets the position of the popup, without changing the annotation.\r\n */\r\nannotorious.mediatypes.openlayers.Viewer.prototype._place_popup = function() {\r\n  // Compute correct annotation bounds, relative to map\r\n  var annotation_div = this._currentlyHighlightedOverlay.marker.div;\r\n  var annotation_dim = goog.style.getBounds(annotation_div);\r\n  var annotation_pos = goog.style.getRelativePosition(annotation_div, this._map.div);\r\n  var annotation_bounds = { top: annotation_pos.y, \r\n                            left: annotation_pos.x, \r\n                            width: annotation_dim.width, \r\n                            height: annotation_dim.height };\r\n\r\n  // Popup width & height\r\n  var popup_bounds = goog.style.getBounds(this._popup.element);\r\n\r\n  var popup_pos = { y: annotation_bounds.top + annotation_bounds.height + 5 };\r\n  if (annotation_bounds.left + popup_bounds.width > this._map_bounds.width) {\r\n    goog.dom.classes.addRemove(this._popup.element, 'top-left', 'top-right');\r\n    popup_pos.x = (annotation_bounds.left + annotation_bounds.width) - popup_bounds.width;\r\n  } else {\r\n    goog.dom.classes.addRemove(this._popup.element, 'top-right', 'top-left');\r\n    popup_pos.x = annotation_bounds.left;\r\n  }\r\n\r\n  if (popup_pos.x < 0)\r\n    popup_pos.x = 0;\r\n\r\n  if (popup_pos.x + popup_bounds.width > this._map_bounds.width)\r\n    popup_pos.x = this._map_bounds.width - popup_bounds.width;\r\n     \r\n  if (popup_pos.y + popup_bounds.height > this._map_bounds.height)\r\n    popup_pos.y = this._map_bounds.height - popup_bounds.height;\r\n\r\n  this._popup.setPosition(popup_pos);    \r\n}\r\n\r\n/**\r\n * Shows the popup with a new annotation.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n */\r\nannotorious.mediatypes.openlayers.Viewer.prototype._show_popup = function(annotation) {\r\n  this._popup.setAnnotation(annotation);\r\n  this._place_popup();\r\n  this._popup.show();\r\n}\r\n\r\n/**\r\n * @param {Object=} new_highlight the overlay to highlight\r\n * @param {Object=} previous_highlight the overlay previously highlighted\r\n */\r\nannotorious.mediatypes.openlayers.Viewer.prototype._updateHighlight = function(new_highlight, previous_highlight) {\r\n  if (new_highlight) {\r\n    var pos = goog.style.getRelativePosition(new_highlight.marker.div, this._map.div);\r\n    var height = parseInt(goog.style.getStyle(new_highlight.marker.div, 'height'), 10);\r\n    goog.style.setStyle(new_highlight.inner, 'border-color', '#fff000');\r\n    this._currentlyHighlightedOverlay = new_highlight;\r\n    this._show_popup(new_highlight.annotation);\r\n  } else {\r\n    delete this._currentlyHighlightedOverlay;\r\n  }\r\n\r\n  if (previous_highlight) {\r\n    goog.style.setStyle(previous_highlight.inner, 'border-color', '#fff');\r\n  }\r\n}\r\n\r\n/**\r\n * Adds an annotation to the viewer.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n */\r\nannotorious.mediatypes.openlayers.Viewer.prototype.addAnnotation = function(annotation) {\r\n  var geometry = annotation.shapes[0].geometry;\r\n  var marker =\r\n    new OpenLayers.Marker.Box(new OpenLayers.Bounds(geometry.x, geometry.y, geometry.x + geometry.width, geometry.y + geometry.height));\r\n  goog.dom.classes.add(marker.div, 'annotorious-ol-boxmarker-outer');\r\n  goog.style.setStyle(marker.div, 'border', null);\r\n  \r\n  var inner = goog.dom.createDom('div', 'annotorious-ol-boxmarker-inner');\r\n  goog.style.setSize(inner, '100%', '100%');\r\n  goog.dom.appendChild(marker.div, inner);\r\n\r\n  var overlay = {annotation: annotation, marker: marker, inner: inner};\r\n\r\n  var self = this;\r\n  goog.events.listen(inner, goog.events.EventType.MOUSEOVER, function(event) {\r\n    if (!self._currentlyHighlightedOverlay)\r\n      self._updateHighlight(overlay);\r\n\r\n    self._lastHoveredOverlay = overlay;\r\n  });\r\n  \r\n  goog.events.listen(inner, goog.events.EventType.MOUSEOUT, function(event) {\r\n    delete self._lastHoveredOverlay;\r\n    self._popup.startHideTimer();\r\n  });\r\n  \r\n  this._overlays.push(overlay);\r\n\r\n  // The viewer always operates in pixel coordinates for efficiency reasons\r\n  var shape = annotation.shapes[0];\r\n  if (shape.units == annotorious.shape.Units.PIXEL) {\r\n    this._shapes[annotorious.shape.hashCode(annotation.shapes[0])] = shape;\r\n  } else {\r\n    var viewportShape = annotorious.shape.transform(shape, function(xy) {\r\n      return self._annotator.fromItemCoordinates(xy);\r\n    });\r\n    this._shapes[annotorious.shape.hashCode(annotation.shapes[0])] = viewportShape;\r\n  }\r\n\r\n  goog.array.sort(this._overlays, function(a, b) {\r\n    var shapeA = a.annotation.shapes[0];\r\n    var shapeB = b.annotation.shapes[0];\r\n    return annotorious.shape.getSize(shapeB) - annotorious.shape.getSize(shapeA);\r\n  });\r\n \r\n  var zIndex = 10000;\r\n  goog.array.forEach(this._overlays, function(overlay) {\r\n    goog.style.setStyle(overlay.marker.div, 'z-index', zIndex);\r\n    zIndex++;\r\n  });\r\n\r\n  this._boxesLayer.addMarker(marker);\r\n}\r\n\r\n/**\r\n * Removes an annotation from the viewer.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n */\r\nannotorious.mediatypes.openlayers.Viewer.prototype.removeAnnotation = function(annotation) {\r\n  var overlay = goog.array.find(this._overlays, function(overlay) {\r\n    return overlay.annotation == annotation;\r\n  }); \r\n\r\n  if (overlay) {\r\n    goog.array.remove(this._overlays, overlay);\r\n    this._boxesLayer.removeMarker(overlay.marker);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns all annotations in this viewer.\r\n * @return {Array.<annotorious.Annotation>} the annotations\r\n */\r\nannotorious.mediatypes.openlayers.Viewer.prototype.getAnnotations = function() {\r\n  return goog.array.map(this._overlays, function(overlay) {\r\n    return overlay.annotation;\r\n  });\r\n}\r\n\r\n/**\r\n * Highlights a particular annotation in the viewer, or de-highlights (if that's a\r\n * word...) all, if no annotation is passed to the method.\r\n * @param {annotorious.Annotation | undefined} opt_annotation the annotation\r\n */\r\nannotorious.mediatypes.openlayers.Viewer.prototype.highlightAnnotation = function(opt_annotation) {\r\n  if (opt_annotation) {\r\n    // TODO\r\n  } else {\r\n    this._popup.startHideTimer();\r\n  }\r\n}\r\n\r\n/**\r\n * Convenience method returing only the top-most annotation at the specified coordinates.\r\n * @param {number} px the X coordinate\r\n * @param {number} py the Y coordinates\r\n */\r\nannotorious.mediatypes.openlayers.Viewer.prototype.topAnnotationAt = function(px, py) {\r\n  var annotations = this.getAnnotationsAt(px, py);\r\n  if (annotations.length > 0) {\r\n    return annotations[0];\r\n  } else {\r\n    return undefined;\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the annotations at the specified X/Y coordinates.\r\n * @param {number} px the X coordinate\r\n * @param {number} py the Y coordinate\r\n * @return {Array.<annotorious.Annotation>} the annotations sorted by size, smallest first\r\n */\r\nannotorious.mediatypes.openlayers.Viewer.prototype.getAnnotationsAt = function(px, py) {\r\n  // TODO for large numbers of annotations, we can optimize this\r\n  // using a tree- or grid-like data structure instead of a list\r\n  var intersectedAnnotations = [];\r\n\r\n  var self = this;\r\n  goog.array.forEach(this._overlays, function(overlay) {\r\n    var annotation = overlay.annotation;\r\n    if (annotorious.shape.intersects(self._shapes[annotorious.shape.hashCode(annotation.shapes[0])], px, py)) {\r\n      intersectedAnnotations.push(annotation);\r\n    }\r\n  });\r\n\r\n  goog.array.sort(intersectedAnnotations, function(a, b) {\r\n    var shape_a = self._shapes[annotorious.shape.hashCode(a.shapes[0])];\r\n    var shape_b = self._shapes[annotorious.shape.hashCode(b.shapes[0])];\r\n    return annotorious.shape.getSize(shape_a) - annotorious.shape.getSize(shape_b);\r\n  });\r\n\r\n  return intersectedAnnotations;\r\n}\r\n","goog.provide('annotorious.mediatypes.openlayers.OpenLayersAnnotator');\r\n\r\ngoog.require('annotorious.mediatypes.Annotator');\r\ngoog.require('annotorious.templates.openlayers');\r\ngoog.require('annotorious.mediatypes.openlayers.Viewer');\r\ngoog.require('annotorious.Editor');\r\ngoog.require('annotorious.Popup');\r\ngoog.require('annotorious.events');\r\ngoog.require('annotorious.plugins.selection.RectDragSelector');\r\ngoog.require('annotorious.shape.geom.Point');\r\n\r\n/**\r\n * The OpenLayersAnnotator is responsible for handling annotation functionality\r\n * on one OpenLayers map in the page.\r\n * @param {OpenLayers.Map} map the OpenLayers map\r\n * @constructor\r\n */\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator = function(map) {\r\n  annotorious.mediatypes.Annotator.call();\r\n  \r\n  /** @private **/\r\n  this._map = map;\r\n  \r\n  /** @private **/\r\n  this.element = map.div;\r\n  \r\n  // We need to constrain the dimension of the canvas by the size of the map.\r\n  // Therefore the map enclosing DIV needs to have position 'absolute' or\r\n  // 'relative' set!\r\n  var pos = goog.style.getStyle(this.element, 'position');\r\n  if (pos != 'absolute' && pos != 'relative')\r\n    goog.style.setStyle(this.element, 'position', 'relative');\r\n  \r\n  /** @private **/\r\n  this._eventBroker = new annotorious.events.EventBroker();\r\n  \r\n  /** @private **/\r\n  this._secondaryHint = goog.soy.renderAsElement(annotorious.templates.openlayers.secondaryHint, {msg: 'Click and Drag'});\r\n  goog.style.setStyle(this._secondaryHint, 'z-index', 9998);\r\n  goog.style.setOpacity(this._secondaryHint, 0); \r\n  goog.dom.appendChild(this.element, this._secondaryHint);\r\n  \r\n  /** @private **/\r\n  this.popup = new annotorious.Popup(this);\r\n\r\n  /** @private **/\r\n  this._viewer = new annotorious.mediatypes.openlayers.Viewer(map, this);\r\n\r\n  /** @private **/\r\n  this._editCanvas = goog.soy.renderAsElement(annotorious.templates.image.canvas, \r\n    { width:'0', height:'0' });\r\n  goog.style.showElement(this._editCanvas, false);\r\n  goog.style.setStyle(this._editCanvas, 'position', 'absolute');\r\n  goog.style.setStyle(this._editCanvas, 'top', '0px');\r\n  goog.style.setStyle(this._editCanvas, 'z-index', 9999);\r\n\r\n  goog.dom.appendChild(this.element, this._editCanvas);  \r\n  \r\n  var self = this,\r\n      updateCanvasSize = function() {\r\n        var width = parseInt(goog.style.getComputedStyle(self.element, 'width'), 10),\r\n            height = parseInt(goog.style.getComputedStyle(self.element, 'height'), 10);\r\n\r\n        goog.style.setSize(self._editCanvas, width, height);\r\n        self._editCanvas.width = width;\r\n        self._editCanvas.height = height;\r\n      };\r\n  \r\n  updateCanvasSize();\r\n\r\n  /** @private **/\r\n  this._currentSelector = new annotorious.plugins.selection.RectDragSelector();\r\n  this._currentSelector.init(this, this._editCanvas); \r\n    \r\n  /** @private **/\r\n  this._stop_selection_callback = undefined;\r\n\r\n  /** @private **/\r\n  this.editor = new annotorious.Editor(this);\r\n  goog.style.setStyle(this.editor.element, 'z-index', 10000);\r\n\r\n  if (window.addEventListener)\r\n    window.addEventListener('resize', updateCanvasSize, false);\r\n  else if (window.attachEvent) \r\n    window.attachEvent('onresize', updateCanvasSize);  \r\n\r\n  goog.events.listen(this.element, goog.events.EventType.MOUSEOVER, function(event) {\r\n    var relatedTarget = event.relatedTarget;\r\n    if (!relatedTarget || !goog.dom.contains(self.element, relatedTarget))\r\n      self._eventBroker.fireEvent(annotorious.events.EventType.MOUSE_OVER_ANNOTATABLE_ITEM);\r\n  });\r\n  \r\n  goog.events.listen(this.element, goog.events.EventType.MOUSEOUT, function(event) {\r\n    var relatedTarget = event.relatedTarget;\r\n    if (!relatedTarget || !goog.dom.contains(self.element, relatedTarget))\r\n      self._eventBroker.fireEvent(annotorious.events.EventType.MOUSE_OUT_OF_ANNOTATABLE_ITEM);\r\n  });\r\n  \r\n  goog.events.listen(this._editCanvas, goog.events.EventType.MOUSEDOWN, function(event) {\r\n    var offset = goog.style.getClientPosition(self.element);\r\n    self._currentSelector.startSelection(event.clientX - offset.x, event.clientY - offset.y);\r\n  });\r\n  \r\n  this._eventBroker.addHandler(annotorious.events.EventType.SELECTION_COMPLETED, function(event) {\r\n    goog.style.setStyle(self._editCanvas, 'pointer-events', 'none');\r\n\r\n    var bounds = event.viewportBounds;\r\n    self.editor.setPosition(new annotorious.shape.geom.Point(bounds.left /* + self.element.offsetLeft */,\r\n                                                             bounds.bottom + 4 /* + self.element.offsetTop */));\r\n    self.editor.open();    \r\n  });\r\n\r\n  this._eventBroker.addHandler(annotorious.events.EventType.SELECTION_CANCELED, function(event) {\r\n    self.stopSelection();    \r\n  });\r\n}\r\ngoog.inherits(annotorious.mediatypes.openlayers.OpenLayersAnnotator, annotorious.mediatypes.Annotator);\r\n\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.showSelectionWidget = function() {\r\n  // Does not have any effect at the moment\r\n}\r\n\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.hideSelectionWidget = function() {\r\n  // Does not have any effect at the moment\r\n}\r\n\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.activateSelector = function(callback) {\r\n  goog.style.setStyle(this._editCanvas, 'pointer-events', 'auto');\r\n\r\n  var self = this;\r\n  goog.style.showElement(this._editCanvas, true);\r\n  goog.style.setOpacity(this._secondaryHint, 0.8); \r\n  window.setTimeout(function() {\r\n    goog.style.setOpacity(self._secondaryHint, 0);\r\n  }, 2000);\r\n\r\n  if (callback)\r\n    this._stop_selection_callback = callback;\r\n}\r\n\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.destroy = function() {\r\n  this._viewer.destroy();\r\n  goog.dom.removeNode(this._secondaryHint);  \r\n  goog.dom.removeNode(this._editCanvas);  \r\n}\r\n\r\n/**\r\n * Standard Annotator method: addSelector\r\n */\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.addSelector = function(selector) {\r\n\r\n}\r\n\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.editAnnotation = function(annotation) {\r\n  // Step 1 - remove from viewer\r\n  this._viewer.removeAnnotation(annotation);\r\n\r\n  // Step 2 - TODO find a suitable selector for the shape\r\n  var selector = this._currentSelector;\r\n\r\n  // Step 3 - open annotation in editor\r\n  var self = this;\r\n  if (selector) {\r\n    goog.style.showElement(this._editCanvas, true);\r\n    this._viewer.highlightAnnotation(undefined);\r\n    \r\n    // TODO make editable - not just draw (selector implementation required)\r\n    var g2d = this._editCanvas.getContext('2d');\r\n    var shape = annotation.shapes[0];\r\n    var viewportShape = annotorious.shape.transform(shape, function(xy) { return self.fromItemCoordinates(xy); });\r\n    console.log(viewportShape);\r\n    selector.drawShape(g2d, viewportShape);\r\n\r\n    var viewportBounds = annotorious.shape.getBoundingRect(viewportShape).geometry;\r\n    this.editor.setPosition(new annotorious.shape.geom.Point(viewportBounds.x, viewportBounds.y + viewportBounds.height));\r\n    this.editor.open(annotation);   \r\n  }\r\n}\r\n\r\n/**\r\n * Standard Annotator method: fromItemCoordinates\r\n */\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.fromItemCoordinates = function(itemCoords) {\r\n  var pxCoords = this._map.getViewPortPxFromLonLat(new OpenLayers.LonLat(itemCoords.x, itemCoords.y));\r\n  var pxOpposite = (itemCoords.width) ?\r\n    this._map.getViewPortPxFromLonLat(new OpenLayers.LonLat(itemCoords.x + itemCoords.width, itemCoords.y + itemCoords.height)) : \r\n    false;\r\n    \r\n  if (pxOpposite) {\r\n    return { x: pxCoords.x, y: pxOpposite.y, width: pxOpposite.x - pxCoords.x + 2, height: pxCoords.y - pxOpposite.y + 2};\r\n  } else {\r\n    return { x: pxCoords.x, y: pxCoords.y };\r\n  }\r\n}\r\n\r\n/**\r\n * Standard Annotator method: getAnnotations\r\n */\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.getAnnotations = function() {\r\n  return this._viewer.getAnnotations();\r\n}\r\n\r\n/**\r\n * Returns the annotations at the specified client X/Y coordinates.\r\n * @param {number} cx the client X coordinate\r\n * @param {number} cy the client Y coordinate\r\n * @return {Array.<annotorious.Annotation>} the annotations sorted by size, smallest first\r\n */\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.getAnnotationsAt = function(cx, cy) {\r\n  return goog.array.clone(this._viewer.getAnnotationsAt(cx, cy));\r\n}\r\n\r\n/**\r\n * Standard Annotator method: getAvailableSelectors\r\n */\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.getAvailableSelectors = function() {\r\n\r\n}\r\n\r\n/**\r\n * Standard Annotator method: getItem\r\n */\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.getItem = function() {\r\n  // TODO implement something decent!\r\n  return {src: \"map://openlayers/something\"};\r\n}\r\n\r\n/**\r\n * Standard Annotator method: setActiveSelector\r\n */\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.setActiveSelector = function(selector) {\r\n\r\n}\r\n\r\n/**\r\n * Standard Annotator method: toItemCoordinates\r\n */\r\nannotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.toItemCoordinates = function(xy) {\r\n  var itemCoords = this._map.getLonLatFromPixel(new OpenLayers.Pixel(xy.x, xy.y));\r\n  var opposite = (xy.width) ? new OpenLayers.Pixel(xy.x + xy.width - 2, xy.y + xy.height - 2) : false;\r\n  \r\n  if (opposite) {\r\n  \tvar itemOpposite = this._map.getLonLatFromPixel(opposite);\r\n\t  var foo = { x: itemCoords.lon, y: itemOpposite.lat, \r\n\t           width: itemOpposite.lon - itemCoords.lon,\r\n\t           height: itemCoords.lat - itemOpposite.lat };\r\n             \r\n    console.log(foo);\r\n    return foo;\r\n  } else {\r\n    return { x: itemCoords.lon, y: itemCoords.lat };\r\n  }\r\n}\r\n","goog.provide('annotorious.mediatypes.openlayers.OpenLayersModule');\r\n\r\ngoog.require('annotorious.mediatypes.Module');\r\ngoog.require('annotorious.mediatypes.openlayers.OpenLayersAnnotator');\r\n\r\n/**\r\n * The OpenLayers Module provides annotation functionality for embedded\r\n * Web maps built with the OpenLayers Web mapping framework.\r\n * @constructor\r\n * @extends annotorious.mediatypes.Module\r\n */\r\nannotorious.mediatypes.openlayers.OpenLayersModule = function() { \r\n  annotorious.mediatypes.Module.call();\r\n  this._initFields();\r\n}\r\ngoog.inherits(annotorious.mediatypes.openlayers.OpenLayersModule, annotorious.mediatypes.Module);\r\n\r\n/** @inheritDoc **/\r\nannotorious.mediatypes.openlayers.OpenLayersModule.prototype.getItemURL = function(item) {\r\n  // TODO implement something decent!\r\n  return 'map://openlayers/something';\r\n}\r\n\r\n/** @inheritDoc **/\r\nannotorious.mediatypes.openlayers.OpenLayersModule.prototype.newAnnotator = function(item) {\r\n  return new annotorious.mediatypes.openlayers.OpenLayersAnnotator(item);\r\n}\r\n\r\n/** @inheritDoc **/\r\nannotorious.mediatypes.openlayers.OpenLayersModule.prototype.supports = function(item) {\r\n  return (item instanceof OpenLayers.Map);\r\n} \r\n\r\n\r\n\r\n","goog.provide('annotorious.mediatypes.openseadragon.Viewer');\r\n\r\ngoog.require('goog.events.MouseWheelHandler');\r\n\r\n/**\r\n * The OpenSeadragon viewer uses the OpenSeadragon overlay API to display annotation shapes.\r\n * @param {Object} osdViewer the OpenSeadragon viewer object\r\n * @param {annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator} annotator reference to the annotator\r\n * @constructor\r\n */\r\nannotorious.mediatypes.openseadragon.Viewer = function(osdViewer, annotator) {\r\n  /** @private **/\r\n  this._osdViewer = osdViewer;\r\n\r\n  /** @private **/\r\n  this._annotator = annotator;\r\n  \r\n  /** @private **/  \r\n  this._map_bounds = goog.style.getBounds(osdViewer.element);\r\n  \r\n  /** @private **/\r\n  this._popup = annotator.popup;\r\n  goog.style.setStyle(this._popup.element, 'z-index', 99000);\r\n  \r\n  /** @private **/\r\n  this._overlays = [];\r\n\r\n  /** @private **/\r\n  this._currentlyHighlightedOverlay;\r\n\r\n  /** @private **/\r\n  this._lastHoveredOverlay;\r\n  \r\n  var self = this;\r\n\r\n  this._osdViewer.addHandler('animation', function() {\r\n    if (self._currentlyHighlightedOverlay)\r\n      self._place_popup();\r\n  });\r\n\r\n  annotator.addHandler(annotorious.events.EventType.POPUP_SHOWN, function(target) {\r\n    if (self._currentlyHighlightedOverlay !== undefined && self._currentlyHighlightedOverlay != false) {\r\n      self._annotator.fireEvent(annotorious.events.EventType.MOUSE_OVER_ANNOTATION, self._currentlyHighlightedOverlay.annotation);\r\n    }\r\n  });\r\n    \r\n  annotator.addHandler(annotorious.events.EventType.BEFORE_POPUP_HIDE, function() {\r\n    if (self._lastHoveredOverlay == self._currentlyHighlightedOverlay) {\r\n      self._popup.clearHideTimer();\r\n    } else {\r\n      self._annotator.fireEvent(annotorious.events.EventType.MOUSE_OUT_OF_ANNOTATION, self._currentlyHighlightedOverlay.annotation);\r\n      self._updateHighlight(self._lastHoveredOverlay, self._currentlyHighlightedOverlay);\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * Resets the position of the popup, without changing the annotation.\r\n */\r\nannotorious.mediatypes.openseadragon.Viewer.prototype._place_popup = function() {\r\n  var viewportEl = this._osdViewer['element'];\r\n  \r\n  // Compute correct annotation bounds, relative to map\r\n  var annotation_div = this._currentlyHighlightedOverlay.outer;\r\n  var annotation_dim = goog.style.getBounds(annotation_div);\r\n  var annotation_pos = goog.style.getRelativePosition(annotation_div, viewportEl);\r\n  var annotation_bounds = { top: annotation_pos.y, \r\n                            left: annotation_pos.x, \r\n                            width: annotation_dim.width, \r\n                            height: annotation_dim.height };\r\n\r\n  // Popup width & height\r\n  var popup_bounds = goog.style.getBounds(this._popup.element);\r\n  var popup_pos = { x: annotation_bounds.left, y: annotation_bounds.top + annotation_bounds.height + 12 };\r\n  goog.dom.classes.addRemove(this._popup.element, 'top-right', 'top-left');\r\n\r\n  // Don't fix position in full-page mode    \r\n  if (!this._osdViewer.isFullPage()) {\r\n    if (annotation_bounds.left + popup_bounds.width > this._map_bounds.width) {\r\n      goog.dom.classes.addRemove(this._popup.element, 'top-left', 'top-right');\r\n      popup_pos.x = (annotation_bounds.left + annotation_bounds.width) - popup_bounds.width;\r\n    } else {\r\n      \r\n    }\r\n\r\n    if (popup_pos.x < 0)\r\n      popup_pos.x = 0;\r\n\r\n    if (popup_pos.x + popup_bounds.width > this._map_bounds.width)\r\n      popup_pos.x = this._map_bounds.width - popup_bounds.width;\r\n     \r\n    if (popup_pos.y + popup_bounds.height > this._map_bounds.height)\r\n      popup_pos.y = this._map_bounds.height - popup_bounds.height;\r\n  }\r\n  \r\n  this._popup.setPosition(popup_pos);    \r\n}\r\n\r\n/**\r\n * Shows the popup with a new annotation.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n */\r\nannotorious.mediatypes.openseadragon.Viewer.prototype._show_popup = function(annotation) {\r\n  this._popup.setAnnotation(annotation);\r\n  this._place_popup();\r\n  this._popup.show();\r\n}\r\n\r\n/**\r\n * @param {Object=} new_highlight the overlay to highlight\r\n * @param {Object=} previous_highlight the overlay previously highlighted\r\n */\r\nannotorious.mediatypes.openseadragon.Viewer.prototype._updateHighlight = function(new_highlight, previous_highlight) {\r\n  if (new_highlight) {\r\n    goog.style.setStyle(new_highlight.inner, 'border-color', '#fff000');\r\n    this._currentlyHighlightedOverlay = new_highlight;\r\n    this._show_popup(new_highlight.annotation);\r\n  } else {\r\n    delete this._currentlyHighlightedOverlay;\r\n  }\r\n\r\n  if (previous_highlight) {\r\n    goog.style.setStyle(previous_highlight.inner, 'border-color', '#fff');\r\n  }\r\n}\r\n\r\n/**\r\n * Adds an annotation to the viewer.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n */\r\nannotorious.mediatypes.openseadragon.Viewer.prototype.addAnnotation = function(annotation) {\r\n  var geometry = annotation.shapes[0].geometry;\r\n  var outer = goog.dom.createDom('div', 'annotorious-ol-boxmarker-outer');\r\n  var inner = goog.dom.createDom('div', 'annotorious-ol-boxmarker-inner');\r\n  goog.style.setSize(inner, '100%', '100%');\r\n  goog.dom.appendChild(outer, inner);\r\n  \r\n  var rect = new OpenSeadragon.Rect(geometry.x, geometry.y, geometry.width, geometry.height);\r\n  \r\n  var overlay = {annotation: annotation, outer: outer, inner: inner};\r\n  \r\n  var self = this;\r\n  goog.events.listen(inner, goog.events.EventType.MOUSEOVER, function(event) {\r\n    if (!self._currentlyHighlightedOverlay)\r\n      self._updateHighlight(overlay);\r\n\r\n    self._lastHoveredOverlay = overlay;\r\n  });\r\n  \r\n  goog.events.listen(inner, goog.events.EventType.MOUSEOUT, function(event) {\r\n    delete self._lastHoveredOverlay;\r\n    self._popup.startHideTimer();\r\n  });\r\n  \r\n  this._overlays.push(overlay);\r\n  \r\n  goog.array.sort(this._overlays, function(a, b) {\r\n    var shapeA = a.annotation.shapes[0];\r\n    var shapeB = b.annotation.shapes[0];\r\n    return annotorious.shape.getSize(shapeB) - annotorious.shape.getSize(shapeA);\r\n  });\r\n \r\n  var zIndex = 1;\r\n  goog.array.forEach(this._overlays, function(overlay) {\r\n    goog.style.setStyle(overlay.outer, 'z-index', zIndex);\r\n    zIndex++;\r\n  });\r\n\r\n  this._osdViewer.addOverlay(outer, rect);\r\n}\r\n\r\n/**\r\n * Removes an annotation from the viewer.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n */\r\nannotorious.mediatypes.openseadragon.Viewer.prototype.removeAnnotation = function(annotation) {\r\n  var overlay = goog.array.find(this._overlays, function(overlay) {\r\n    return overlay.annotation == annotation;\r\n  });\r\n\r\n  if (overlay) {\r\n    goog.array.remove(this._overlays, overlay);\r\n    this._osdViewer.removeOverlay(overlay.outer);\r\n  }\r\n}\r\n\r\n/**\r\n * Returns all annotations in this viewer.\r\n * @return {Array.<annotorious.Annotation>} the annotations\r\n */\r\nannotorious.mediatypes.openseadragon.Viewer.prototype.getAnnotations = function() {\r\n  return goog.array.map(this._overlays, function(overlay) {  \r\n\t  console.log(overlay);\r\n\t  return overlay.annotation; \r\n  });\r\n}\r\n\r\n/**\r\n * Highlights a particular annotation in the viewer, or de-highlights (if that's a\r\n * word...) all, if no annotation is passed to the method.\r\n * @param {annotorious.Annotation | undefined} opt_annotation the annotation\r\n */\r\nannotorious.mediatypes.openseadragon.Viewer.prototype.highlightAnnotation = function(opt_annotation) {\r\n var that = this;\r\n if (opt_annotation) {\r\n   goog.array.forEach(this._overlays, function(overlay) {\r\n     if (overlay.annotation == opt_annotation) {\r\n       if (that._currentlyHighlightedOverlay &&\r\n            that._currentlyHighlightedOverlay != overlay) {\r\n         that._updateHighlight(overlay, that._currentlyHighlightedOverlay);\r\n         } else {\r\n           that._updateHighlight(overlay);\r\n       }\r\n     }\r\n   });\r\n   } else {\r\n     this._popup.startHideTimer();\r\n }\r\n}\r\n\r\nannotorious.mediatypes.openseadragon.Viewer.prototype.destroy = function () {\r\n var that = this;\r\n goog.array.forEach(this._overlays, function (overlay) {\r\n   that._osdViewer.removeOverlay(overlay.outer);\r\n  });\r\n  this._overlays = [];\r\n}\r\n","goog.provide('annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator');\r\n\r\ngoog.require('annotorious.mediatypes.Annotator');\r\ngoog.require('annotorious.mediatypes.openseadragon.Viewer');\r\ngoog.require('annotorious.Editor');\r\ngoog.require('annotorious.Popup');\r\ngoog.require('annotorious.plugins.selection.RectDragSelector');\r\ngoog.require('annotorious.events');\r\ngoog.require('annotorious.shape.geom.Point');\r\n\r\n/**\r\n * The OpenSeadragonAnnotator is responsible for handling annotation functionality\r\n * on one OpenSeadragon imagein the page.\r\n * \r\n * FIXME there is lots of code duplication in here - refactor into a common annotator base class,\r\n * shared across image & OpenSeadragon\r\n * \r\n * @param {Object} osdViewer the OpenSeadragon viewer\r\n * @constructor\r\n */\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator = function(osdViewer) {\r\n  annotorious.mediatypes.Annotator.call();\r\n  \r\n  /** @private **/\r\n  this.element = osdViewer.element;\r\n  // Hacky: Normalize the z-index of openseadragon-container\r\n  goog.style.setStyle(goog.dom.getElementByClass(\"openseadragon-container\"), 'z-index', 0);\r\n  \r\n  /** The editor for this annotator (public for use by plugins) **/\r\n  this.editor;\r\n  \r\n  /** @private **/   \r\n  this._osdViewer = osdViewer; \r\n    \r\n  /** @private **/\r\n  this._eventBroker = new annotorious.events.EventBroker();\r\n  \r\n  /** @private **/\r\n  this._selectors = [];\r\n  \r\n  /** @private **/\r\n  this._currentSelector;\r\n  \r\n  /** @private **/\r\n  this._selectionEnabled = true;\r\n  \r\n  /** @private **/\r\n  this._secondaryHint = goog.soy.renderAsElement(annotorious.templates.openlayers.secondaryHint, {msg: 'Click and Drag'});\r\n  //goog.style.setStyle(this._secondaryHint, 'z-index', 9998);\r\n  goog.style.setOpacity(this._secondaryHint, 0); \r\n  goog.dom.appendChild(this.element, this._secondaryHint);\r\n  \r\n  /** @private **/\r\n  this.popup = new annotorious.Popup(this);\r\n\r\n  /** @private **/\r\n  this._viewer = new annotorious.mediatypes.openseadragon.Viewer(osdViewer, this);\r\n\r\n  /** @private **/\r\n  this._editCanvas = goog.soy.renderAsElement(annotorious.templates.image.canvas, \r\n    { width:'0', height:'0' });\r\n  goog.style.showElement(this._editCanvas, false);\r\n\r\n  goog.dom.appendChild(this.element, this._editCanvas); \r\n  \r\n  var self = this,\r\n      updateCanvasSize = function() {\r\n        var width = parseInt(goog.style.getComputedStyle(self.element, 'width'), 10),\r\n            height = parseInt(goog.style.getComputedStyle(self.element, 'height'), 10);\r\n\r\n        goog.style.setSize(self._editCanvas, width, height);\r\n        self._editCanvas.width = width;\r\n        self._editCanvas.height = height;\r\n      };\r\n      \r\n  updateCanvasSize();\r\n  \r\n  var default_selector = new annotorious.plugins.selection.RectDragSelector();\r\n  default_selector.init(this, this._editCanvas); \r\n  this._selectors.push(default_selector);\r\n  this._currentSelector = default_selector;\r\n  \r\n  this.editor = new annotorious.Editor(this);\r\n  \r\n  /** Note - this code is duplicate across image, OpenLayers and OpenSeadragon & really needs to go into its own class **/\r\n  this._attachListener(this._editCanvas);\r\n  \r\n  this._eventBroker.addHandler(annotorious.events.EventType.SELECTION_COMPLETED, function(event) {\r\n    //goog.style.setStyle(self._editCanvas, 'pointer-events', 'none');\r\n\r\n    var bounds = event.viewportBounds;\r\n    self.editor.setPosition(new annotorious.shape.geom.Point(bounds.left, bounds.bottom + 4));\r\n    self.editor.open();    \r\n  });\r\n\r\n  this._eventBroker.addHandler(annotorious.events.EventType.SELECTION_CANCELED, function(event) {\r\n    self.stopSelection();    \r\n  });\r\n  \r\n  /** End of possible dupplicated code **/ \r\n}\r\ngoog.inherits(annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator, annotorious.mediatypes.Annotator);\r\n\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.showSelectionWidget = function() {\r\n  // Does not have any effect at the moment\r\n}\r\n\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.hideSelectionWidget = function() {\r\n  // Does not have any effect at the moment\r\n}\r\n\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.destroy = function () {\r\n\tthis._viewer.destroy();\r\n\tdelete this._viewer;\r\n}\r\n\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.activateSelector = function(callback) {\r\n  goog.style.setStyle(this._editCanvas, 'pointer-events', 'auto');\r\n\r\n  var self = this;\r\n  goog.style.showElement(this._editCanvas, true);\r\n  goog.style.setOpacity(this._secondaryHint, 0.8); \r\n  window.setTimeout(function() {\r\n    goog.style.setOpacity(self._secondaryHint, 0);\r\n  }, 2000);\r\n\r\n  if (callback)\r\n    this._stop_selection_callback = callback;\r\n}\r\n\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.editAnnotation = function(annotation) {\r\n  // Step 1 - remove from viewer\r\n  this._viewer.removeAnnotation(annotation);\r\n\r\n  // Step 2 - TODO find a suitable selector for the shape\r\n  var selector = this._currentSelector;\r\n\r\n  // Step 3 - open annotation in editor\r\n  var self = this;\r\n  if (selector) {\r\n    goog.style.showElement(this._editCanvas, true);\r\n    this._viewer.highlightAnnotation(undefined);\r\n    \r\n    // TODO make editable - not just draw (selector implementation required)\r\n    var g2d = this._editCanvas.getContext('2d');\r\n    var shape = annotation.shapes[0];\r\n    var viewportShape = annotorious.shape.transform(shape, function(xy) { return self.fromItemCoordinates(xy); });\r\n    selector.drawShape(g2d, viewportShape);\r\n\r\n    var viewportBounds = annotorious.shape.getBoundingRect(viewportShape).geometry;\r\n    this.editor.setPosition(new annotorious.shape.geom.Point(viewportBounds.x, viewportBounds.y + viewportBounds.height + 4));\r\n    this.editor.open(annotation);   \r\n  }\r\n}\r\n\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.fromItemCoordinates = function(itemCoords) {\r\n  var offset = annotorious.dom.getOffset(this.element); \r\n  offset.top += window.pageYOffset;\r\n  offset.left += window.pageXOffset;\r\n  \r\n  var viewportPoint = new OpenSeadragon.Point(itemCoords.x, itemCoords.y);\r\n  var viewportOpposite = (itemCoords.width) ? new OpenSeadragon.Point(itemCoords.x + itemCoords.width, itemCoords.y + itemCoords.height) : false; \r\n  var windowPoint = this._osdViewer.viewport.viewportToWindowCoordinates(viewportPoint); \r\n \r\n  if (viewportOpposite) {\r\n    var windowOpposite = this._osdViewer.viewport.viewportToWindowCoordinates(viewportOpposite);\r\n    return { x: windowPoint.x - offset.left, y: windowPoint.y - offset.top, width: windowOpposite.x - windowPoint.x + 2, height: windowOpposite.y - windowPoint.y + 2 };    \r\n  } else {\r\n    return windowPoint;\r\n  }  \r\n}\r\n\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.getAnnotations = function() {\r\n  return this._viewer.getAnnotations();\r\n}\r\n\r\n\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.getAvailableSelectors = function() {\r\n\r\n}\r\n\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.getItem = function() {\r\n  // TODO implement something decent!\r\n  return { src: \"dzi://openseadragon/something\" };\r\n}\r\n\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.setActiveSelector = function(selector) {\r\n\r\n}\r\n\r\n/**\r\n * Returns the currently active selector.\r\n * @returns {Object} the currently active selector\r\n */\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.getActiveSelector = function() {\r\n  return this._currentSelector;\r\n}\r\n\r\n\r\nannotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.toItemCoordinates = function(xy) {\r\n  var offset = annotorious.dom.getOffset(this.element); \r\n  offset.top += window.pageYOffset;\r\n  offset.left += window.pageXOffset;\r\n  \r\n  var viewportPoint = new OpenSeadragon.Point(xy.x + offset.left, xy.y + offset.top);\r\n  var viewportOpposite = (xy.width) ? new OpenSeadragon.Point(xy.x + offset.left + xy.width - 2, xy.y + offset.top + xy.height - 2) : false;\r\n  var viewElementPoint = this._osdViewer.viewport.windowToViewportCoordinates(viewportPoint); \r\n  \r\n  if (viewportOpposite) {\r\n    var viewElementOpposite = this._osdViewer.viewport.windowToViewportCoordinates(viewportOpposite);\r\n    return { x: viewElementPoint.x, y: viewElementPoint.y, \r\n             width: viewElementOpposite.x - viewElementPoint.x, \r\n             height: viewElementOpposite.y - viewElementPoint.y };\r\n  } else {\r\n    return viewElementPoint;\r\n  }\r\n}\r\n","goog.provide('annotorious.mediatypes.openseadragon.OpenSeadragonModule');\r\n\r\ngoog.require('annotorious.mediatypes.Module');\r\ngoog.require('annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator');\r\n\r\n/**\r\n * The OpenSeadragon Module provides annotation functionality for embedded\r\n * zoomable images displayed with the OpenSeadragon viewer.\r\n * @constructor\r\n * @extends annotorious.mediatypes.Module\r\n */\r\nannotorious.mediatypes.openseadragon.OpenSeadragonModule = function() { \r\n  annotorious.mediatypes.Module.call();\r\n  this._initFields();\r\n}\r\ngoog.inherits(annotorious.mediatypes.openseadragon.OpenSeadragonModule, annotorious.mediatypes.Module);\r\n\r\n/** @inheritDoc **/\r\nannotorious.mediatypes.openseadragon.OpenSeadragonModule.prototype.getItemURL = function(item) {\r\n  // TODO implement something decent!\r\n  return 'dzi://openseadragon/something';\r\n}\r\n\r\n/** @inheritDoc **/\r\nannotorious.mediatypes.openseadragon.OpenSeadragonModule.prototype.newAnnotator = function(item) {\r\n  return new annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator(item);\r\n}\r\n\r\n/** @inheritDoc **/\r\nannotorious.mediatypes.openseadragon.OpenSeadragonModule.prototype.supports = function(item) {\r\n  return item instanceof OpenSeadragon.Viewer;\r\n} \r\n\r\n\r\n\r\n","goog.require('goog.array');\r\ngoog.require('goog.dom');\r\n\r\ngoog.require('annotorious.dom');\r\ngoog.require('annotorious.events');\r\ngoog.require('annotorious.mediatypes.Module');\r\ngoog.require('annotorious.mediatypes.image.ImageModule');\r\ngoog.require('annotorious.mediatypes.openlayers.OpenLayersModule');\r\ngoog.require('annotorious.mediatypes.openseadragon.OpenSeadragonModule');\r\n\r\ngoog.provide('annotorious.Annotorious');\r\n/**\r\n * The main entrypoint to the application. The Annotorious class is instantiated exactly once,\r\n * and added to the global window object as 'window.anno'. It exposes the external JavaScript API\r\n * and internally manages the 'modules'. (Each module is responsible for one particular media\r\n * type - image, OpenLayers, etc.)  \r\n * @constructor\r\n */\r\nannotorious.Annotorious = function() {\r\n  /** @private **/\r\n  this._isInitialized = false;\r\n  \r\n  /** @private **/\r\n  this._modules = [ new annotorious.mediatypes.image.ImageModule() ];\r\n  \r\n  if (window['OpenLayers'])\r\n    this._modules.push(new annotorious.mediatypes.openlayers.OpenLayersModule());\r\n    \r\n  if (window['OpenSeadragon'])\r\n    this._modules.push(new annotorious.mediatypes.openseadragon.OpenSeadragonModule());\r\n  \r\n  /** @private **/\r\n  this._plugins = [];\r\n\r\n  var self = this;\r\n  annotorious.dom.addOnLoadHandler(function() { self._init(); });\r\n}\r\n\r\nannotorious.Annotorious.prototype._init = function() {\r\n  if (this._isInitialized)\r\n    return;\r\n  \r\n  var self = this;\r\n  goog.array.forEach(this._modules, function(module) {\r\n    module.init();\r\n  });\r\n\r\n  goog.array.forEach(this._plugins, function(plugin) {\r\n    if (plugin.initPlugin)\r\n      plugin.initPlugin(self);\r\n        \r\n    goog.array.forEach(self._modules, function(module) {\r\n      module.addPlugin(plugin);\r\n    });\r\n  });\r\n  \r\n  this._isInitialized = true;\r\n}\r\n\r\n/**\r\n * Returns the module that is in charge of handling the item with the specified\r\n * URL or null, if no responsible module is found.\r\n * @param {string} item_src the URL of the annotatable item \r\n * @return {Object | null}\r\n * @private\r\n */\r\nannotorious.Annotorious.prototype._getModuleForItemSrc = function(item_src) {\r\n  return goog.array.find(this._modules, function(module) {\r\n    return module.annotatesItem(item_src);\r\n  });\r\n}\r\n\r\n/**\r\n * 'Manually' actives the selector, bypassing the selection widget. Note: this also\r\n * works when the selection widget is hidden. Primary use case for this is for developers\r\n * who want to build their own selector widgets or 'Create Annotation' buttons.\r\n * The selector can be activated on a specific item or globally, on all items (which \r\n * serves mainly as a shortcut for pages where there is only one annotatable item).\r\n * The function can take a callback function as parameter, which will be called when the\r\n * selector is deactivated again.\r\n * @param {string | Function} opt_item_url_or_callback the URL of the item, or a callback function\r\n * @param {Function} opt_callback a callback function (if the first parameter was a URL)\r\n */\r\nannotorious.Annotorious.prototype.activateSelector = function(opt_item_url_or_callback, opt_callback) {\r\n  var item_url = undefined,\r\n      callback = undefined;\r\n\r\n  if (goog.isString(opt_item_url_or_callback)) {\r\n    item_url = opt_item_url_or_callback;\r\n    callback = opt_callback;\r\n  } else if (goog.isFunction(opt_item_url_or_callback)) {\r\n    callback = opt_item_url_or_callback;\r\n  }\r\n\r\n  if (item_url) {\r\n    var module = this._getModuleForItemSrc(item_url);\r\n    if (module)\r\n      module.activateSelector(item_url, callback);\r\n  } else {\r\n    goog.array.forEach(this._modules, function(module) {\r\n      module.activateSelector(callback);\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Adds an annotation to an item on the page.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n * @param {annotorious.Annotation} opt_replace optionally, an existing annotation to replace\r\n */\r\nannotorious.Annotorious.prototype.addAnnotation = function(annotation, opt_replace) {  \r\n  annotation.src = annotorious.dom.toAbsoluteURL(annotation.src);\r\n  var module = this._getModuleForItemSrc(annotation.src); \r\n  if (module)\r\n    module.addAnnotation(annotation, opt_replace);\r\n}\r\n\r\n/**\r\n * Adds an event handler to Annotorious.\r\n * @param {annotorious.events.EventType} type the event type\r\n * @param {Function} handler the handler function\r\n */\r\nannotorious.Annotorious.prototype.addHandler = function(type, handler) {\r\n  goog.array.forEach(this._modules, function(module) {\r\n    module.addHandler(type, handler);\r\n  });\r\n}\r\n\r\n/**\r\n * Removes an event handler to Annotorious.\r\n * @param {annotorious.events.EventType} type the event type\r\n * @param {Function} handler the handler function\r\n */\r\nannotorious.Annotorious.prototype.removeHandler = function(type, handler) {\r\n  goog.array.forEach(this._modules, function(module) {\r\n    module.removeHandler(type, handler);\r\n  });\r\n}\r\n\r\n/**\r\n * Adds a plugin to Annotorious.\r\n * @param {string} plugin_name the plugin name\r\n * @param {Object} opt_config_options an optional object literal with plugin config options\r\n */\r\nannotorious.Annotorious.prototype.addPlugin = function(plugin_name, opt_config_options) {\r\n  try {\r\n    var plugin = new window['annotorious']['plugin'][plugin_name](opt_config_options);\r\n\r\n    if (document.readyState == 'complete') {\r\n      // Document loaded -- init immediately\r\n      if (plugin.initPlugin)\r\n        plugin.initPlugin(this);\r\n        \r\n      goog.array.forEach(this._modules, function(module) {\r\n        module.addPlugin(plugin);\r\n      });      \r\n    } else {\r\n      // Document not loaded yet -- defer init\r\n      this._plugins.push(plugin);  \r\n    }\r\n  } catch (error) {\r\n    console.log('Could not load plugin: ' + plugin_name);\r\n  }\r\n}\r\n\r\n/**\r\n * Destroys annotation functionality on an item, or all items on the page. Note\r\n * that this method differs from anno.reset() in so far as class=\"annotatable\"\r\n * attributes are not re-evaluated! What is destroyed, stays destroyed - until\r\n * made annotatable again via anno.makeAnnotatable().\r\n * @param {string=} opt_item_url the URL of the item on which to destroy annotation functionality\r\n */\r\nannotorious.Annotorious.prototype.destroy = function(opt_item_url) {\r\n  if (opt_item_url) {\r\n    var module = this._getModuleForItemSrc(opt_item_url);\r\n    if (module)\r\n      module.destroy(opt_item_url);\r\n  } else {\r\n    goog.array.forEach(this._modules, function(module) {\r\n      module.destroy();\r\n    });\r\n  }  \r\n}\r\n\r\n/**\r\n * Returns the name of the selector that is currently activated on a \r\n * particular item.\r\n * @param {string} item_url the URL of the item to query for the active selector\r\n */\r\nannotorious.Annotorious.prototype.getActiveSelector = function(item_url) {\r\n  var module = this._getModuleForItemSrc(item_url);\r\n  if (module)\r\n    return module.getActiveSelector(item_url);\r\n  else\r\n    return undefined;\r\n}\r\n\r\n/**\r\n * Returns all annotations on the annotatable item with the specified URL, or\r\n * all annotations on the page in case no URL is specified.\r\n * @param {string | undefined} opt_item_url an item URL (optional)\r\n * @return {Array.<annotorious.Annotation>} the annotations\r\n */\r\nannotorious.Annotorious.prototype.getAnnotations = function(opt_item_url) {\r\n  if (opt_item_url) {\r\n    var module = this._getModuleForItemSrc(opt_item_url);\r\n    if (module)\r\n      return module.getAnnotations(opt_item_url);\r\n    else\r\n      return [];\r\n  } else {\r\n    var annotations = [];\r\n    goog.array.forEach(this._modules, function(module) {\r\n      goog.array.extend(annotations, module.getAnnotations());\r\n    });\r\n    return annotations;\r\n  }\r\n}\r\n\r\n/**\r\n * Returns the list of available shape selectors for a particular item.\r\n * @param {string} item_url the URL of the item to query for available selectors\r\n * @returns {Array.<string>} the list of selector names\r\n */\r\nannotorious.Annotorious.prototype.getAvailableSelectors = function(item_url) {\r\n  var module = this._getModuleForItemSrc(item_url);\r\n  if (module)\r\n    return module.getAvailableSelectors(item_url);\r\n  else\r\n    return [];\r\n}\r\n\r\n/**\r\n * Hides existing annotations on all, or a specific item.\r\n * @param {string} opt_item_url the URL of the item\r\n */\r\nannotorious.Annotorious.prototype.hideAnnotations = function(opt_item_url) {\r\n  if (opt_item_url) {\r\n    var module = this._getModuleForItemSrc(opt_item_url);\r\n    if (module)\r\n      module.hideAnnotations(opt_item_url);\r\n  } else {\r\n    goog.array.forEach(this._modules, function(module) {\r\n      module.hideAnnotations();\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Hides the selection widget, thus preventing users from creating new annotations.\r\n * The selection widget can be hidden on a specific item or globally, on all annotatable\r\n * items on the page.\r\n * @param {string | undefined} opt_item_url the URL of the item on which to hide the selection widget\r\n */\r\nannotorious.Annotorious.prototype.hideSelectionWidget = function(opt_item_url) {\r\n  if (opt_item_url) {\r\n    var module = this._getModuleForItemSrc(opt_item_url);\r\n    if (module)\r\n      module.hideSelectionWidget(opt_item_url);\r\n  } else {\r\n    goog.array.forEach(this._modules, function(module) {\r\n      module.hideSelectionWidget();\r\n    });\r\n  }\r\n}\r\n\r\nannotorious.Annotorious.prototype.stopSelection = function(opt_item_url) {\r\n  if (opt_item_url) {\r\n    var module = this._getModuleForItemSrc(opt_item_url);\r\n    if (module)\r\n      module.stopSelection(opt_item_url);\r\n  } else {\r\n    goog.array.forEach(this._modules, function(module) {\r\n      module.stopSelection();\r\n    });\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * Highlights the specified annotation.\r\n * @param {annotorious.Annotation} annotation the annotation\r\n */\r\nannotorious.Annotorious.prototype.highlightAnnotation = function(annotation) {\r\n  if (annotation) {\r\n    var module = this._getModuleForItemSrc(annotation.src);\r\n\r\n    if (module)\r\n      module.highlightAnnotation(annotation);\r\n  } else {\r\n    goog.array.forEach(this._modules, function(module) {\r\n      module.highlightAnnotation();\r\n    });\r\n  }\r\n}\r\n\r\n/**\r\n * Makes an item annotatable, if there is a module that supports the item type.\r\n * @param {Object} item the annotatable item\r\n */\r\nannotorious.Annotorious.prototype.makeAnnotatable = function(item) {\r\n  // Be sure to init if the load handler hasn't already taken care of it\r\n  this._init();\r\n  \r\n  var module = goog.array.find(this._modules, function(module) {\r\n    return module.supports(item);\r\n  });\r\n\r\n  if (module)\r\n    module.makeAnnotatable(item);\r\n  else\r\n    throw('Error: Annotorious does not support this media type in the current version or build configuration.');\r\n}\r\n\r\n/**\r\n * Removes all annotations. If the optional parameter opt_item_url is set,\r\n * only the annotations on the specified item will be removed. Otherwise all\r\n * annotations on all items on the page will be removed.\r\n * @param {string} opt_item_url the src URL of the item\r\n */\r\nannotorious.Annotorious.prototype.removeAll = function(opt_item_url) {\r\n  // TODO this could be optimized a lot by adding a .removeAll method\r\n  // to modules and annotators!\r\n  var self = this;\r\n  goog.array.forEach(this.getAnnotations(opt_item_url), function(annotation) {\r\n    self.removeAnnotation(annotation);    \r\n  });\r\n}\r\n\r\n/**\r\n * Removes an annotation from an item on the page.\r\n * @param {annotorious.Annotation} annotation the annotation to remove\r\n */\r\nannotorious.Annotorious.prototype.removeAnnotation = function(annotation) {\r\n  var module = this._getModuleForItemSrc(annotation.src);\r\n  if (module)\r\n    module.removeAnnotation(annotation);\r\n}\r\n\r\n/**\r\n * Resets annotation functionality on this page. After the reset, annotation\r\n * functionality will be reomved from all items. Images with the 'annotatable'\r\n * CSS class will have been re-initialized (i.e. they will be annotatable, with\r\n * a fresh annotator).\r\n */\r\nannotorious.Annotorious.prototype.reset = function(annotation) {\r\n  goog.array.forEach(this._modules, function(module) {\r\n    module.destroy();\r\n    module.init();\r\n  });\r\n}\r\n\r\n/**\r\n * Sets a specific selector on a particular item.\r\n * @param {string} item_url the URL of the item on which to set the selector\r\n * @param {string} selector the name of the selector to set on the item\r\n */\r\nannotorious.Annotorious.prototype.setActiveSelector = function(item_url, selector) {\r\n  var module = this._getModuleForItemSrc(item_url);\r\n  if (module)\r\n    module.setActiveSelector(item_url, selector);  \r\n}\r\n \r\n/**\r\n * Sets system-wide properties. The 'props' object is a key/value hash and\r\n * supports the following properties:\r\n *\r\n * outline: outline color for annotation and selection shapes \r\n * stroke: stroke color for annotation and selection shapes\r\n * fill: fill color for annotation and selection shapes\r\n * hi_stroke: stroke color for highlighted annotation shapes\r\n * hi_fill: fill color for highlighted annotation shapes\r\n * \r\n * @param {Object} props the properties object\r\n */\r\nannotorious.Annotorious.prototype.setProperties = function(props) {\r\n  goog.array.forEach(this._modules, function(module) {\r\n    module.setProperties(props);\r\n  });  \r\n}\r\n\r\n/**\r\n * Enables (or disables) the ability to create new annotations on an annotatable item.\r\n * @param {boolean} enabled if true, new annotations can be created\r\n *\r\n * !!!!\r\n * @deprecated will be removed in v1.0!\r\n * !!!!\r\n */\r\nannotorious.Annotorious.prototype.setSelectionEnabled = function(enabled) {\r\n  if (enabled)\r\n    this.showSelectionWidget(undefined);\r\n  else\r\n    this.hideSelectionWidget(undefined);\r\n}\r\n\r\n/**\r\n * Shows existing annotations on all, or a specific item.\r\n * @param {string} opt_item_url the URL of the item\r\n */\r\nannotorious.Annotorious.prototype.showAnnotations = function(opt_item_url) {\r\n  if (opt_item_url) {\r\n    var module = this._getModuleForItemSrc(opt_item_url);\r\n    if (module)\r\n      module.showAnnotations(opt_item_url);\r\n  } else {\r\n    goog.array.forEach(this._modules, function(module) {\r\n      module.showAnnotations();\r\n    });\r\n  } \r\n}\r\n\r\n/**\r\n * Shows the selection widget, thus enabling users to create new annotations.\r\n * The selection widget can be made visible on a specific item or globally, on all\r\n * annotatable items on the page.\r\n * @param {string | undefined} opt_item_url the URL of the item on which to show the selection widget \r\n */\r\nannotorious.Annotorious.prototype.showSelectionWidget = function(opt_item_url) {\r\n  if (opt_item_url) {\r\n    var module = this._getModuleForItemSrc(opt_item_url);\r\n    if (module)\r\n      module.showSelectionWidget(opt_item_url);\r\n  } else {\r\n    goog.array.forEach(this._modules, function(module) {\r\n      module.showSelectionWidget();\r\n    });\r\n  }\r\n}\r\n\r\nwindow['anno'] = new annotorious.Annotorious();\r\n"],
"names":["COMPILED","goog","global","isDef","goog.isDef","val","isString","goog.isString","isBoolean","goog.isBoolean","isNumber","goog.isNumber","exportPath_","goog.exportPath_","name","opt_object","opt_objectToExportTo","parts","split","cur","execScript","part","length","shift","Object","prototype","define","goog.define","defaultValue","uncompiledDefines","CLOSURE_UNCOMPILED_DEFINES","defines","CLOSURE_DEFINES","undefined","nodeType","hasOwnProperty","call","value","DEBUG","provide","goog.provide","isInModuleLoader_","Error","isProvided_","constructNamespace_","goog.constructNamespace_","opt_obj","implicitNamespaces_","namespace","substring","lastIndexOf","getObjectByName","getScriptNonce","goog.getScriptNonce","cspNonce_","getScriptNonce_","document","NONCE_PATTERN_","goog.getScriptNonce_","doc","script","querySelector","nonce","getAttribute","test","VALID_MODULE_RE_","module","goog.module","search","isInGoogModuleLoader_","moduleLoaderState_","moduleName","get","goog.module.get","getInternal_","goog.module.getInternal_","loadedModules_","exports","ns","ModuleType","ES6","GOOG","goog.isInModuleLoader_","isInEs6ModuleLoader_","goog.isInGoogModuleLoader_","type","goog.isInEs6ModuleLoader_","jscomp","getCurrentModulePath","declareLegacyNamespace","goog.module.declareLegacyNamespace","declareNamespace","goog.module.declareNamespace","require","moduleId","setTestOnly","goog.setTestOnly","opt_message","DISALLOW_TEST_ONLY_CODE","forwardDeclare","goog.forwardDeclare","goog.isProvided_","isDefAndNotNull","goog.getObjectByName","i","globalize","goog.globalize","obj","opt_global","x","addDependency","goog.addDependency","relPath","provides","requires","opt_loadFlags","DEPENDENCIES_ENABLED","debugLoader_","logToConsole_","goog.logToConsole_","msg","console","goog.require","ENABLE_DEBUG_LOADER","requested","moduleLoaderState","load_","basePath","nullFunction","goog.nullFunction","abstractMethod","goog.abstractMethod","addSingletonGetter","goog.addSingletonGetter","ctor","instance_","getInstance","ctor.getInstance","instantiatedSingletons_","hasBadLetScoping","useSafari10Workaround","goog.useSafari10Workaround","eval","e","workaroundSafari10EvalBug","goog.workaroundSafari10EvalBug","moduleDef","loadModule","goog.loadModule","previousState","isFunction","loadModuleFromSource_","SEAL_MODULE_EXPORTS","seal","data","normalizePath_","goog.normalizePath_","path","components","splice","join","loadFileSync_","goog.loadFileSync_","src","CLOSURE_LOAD_FILE_SYNC","xhr","open","send","status","responseText","err","transpile_","goog.transpile_","code","transpile","transpilerPath","TRANSPILER","transpilerCode","JSON","stringify","jscomp.transpile","suffix","typeOf","goog.typeOf","s","Array","className","toString","propertyIsEnumerable","isNull","goog.isNull","goog.isDefAndNotNull","isArray","goog.isArray","isArrayLike","goog.isArrayLike","isDateLike","goog.isDateLike","isObject","getFullYear","goog.isFunction","goog.isObject","getUid","goog.getUid","UID_PROPERTY_","uidCounter_","hasUid","goog.hasUid","removeUid","goog.removeUid","removeAttribute","ex","Math","random","getHashCode","removeHashCode","cloneObject","goog.cloneObject","clone","key","bindNative_","goog.bindNative_","fn","selfObj","var_args","apply","bind","arguments","bindJs_","goog.bindJs_","boundArgs","slice","newArgs","unshift","goog.bind","Function","indexOf","partial","goog.partial","args","push","mixin","goog.mixin","target","source","now","TRUSTED_SITE","Date","globalEval","goog.globalEval","evalWorksForGlobals_","ignore","scriptElt","createElement","defer","appendChild","createTextNode","head","removeChild","getCssName","goog.getCssName","opt_modifier","String","charAt","getMapping","cssName","cssNameMapping_","renameByParts","mapped","rename","cssNameMappingStyle_","a","result","CLOSURE_CSS_NAME_MAP_FN","setCssNameMapping","goog.setCssNameMapping","mapping","opt_style","CLOSURE_CSS_NAME_MAPPING","getMsg","goog.getMsg","str","opt_values","replace","match","getMsgWithFallback","goog.getMsgWithFallback","b","exportSymbol","goog.exportSymbol","publicPath","object","exportProperty","goog.exportProperty","publicName","symbol","inherits","goog.inherits","childCtor","parentCtor","tempCtor","superClass_","constructor","base","childCtor.base","me","methodName","goog.base","opt_methodName","caller","callee","STRICT_MODE_COMPATIBLE","ctorArgs","foundCaller","scope","goog.scope","defineClass","goog.defineClass","superClass","def","statics","cls","createSealingConstructor_","applyProperties_","goog.defineClass.createSealingConstructor_","ctr","SEAL_CLASS_INSTANCES","superclassSealable","isUnsealable_","wrappedCtr","instance","goog.defineClass.isUnsealable_","UNSEALABLE_CONSTRUCTOR_PROPERTY_","OBJECT_PROTOTYPE_FIELDS_","goog.defineClass.applyProperties_","tagUnsealableClass","goog.tagUnsealableClass","inHtmlDocument_","goog.inHtmlDocument_","isDocumentLoading_","goog.isDocumentLoading_","attachEvent","readyState","findBasePath_","goog.findBasePath_","CLOSURE_BASE_PATH","currentScript","scripts","getElementsByTagName","qmark","l","substr","Transpiler","goog.Transpiler","requiresTranspilation_","createRequiresTranspilation_","goog.Transpiler.prototype.createRequiresTranspilation_","addNewerLanguageTranspilationCheck","modeName","isSupported","transpilationRequiredForAllLaterModes","requiresTranspilation","evalCheck","ignored","userAgent","navigator","edgeUserAgent","re","Number","needsTranspile","goog.Transpiler.prototype.needsTranspile","lang","TRANSPILE","goog.Transpiler.prototype.transpile","transpiler_","protectScriptTag_","goog.protectScriptTag_","DebugLoader_","goog.DebugLoader_","dependencies_","idToPath_","written_","loadingDeps_","depsToLoad_","paused_","factory_","DependencyFactory","deferredCallbacks_","deferredQueue_","bootstrap","goog.DebugLoader_.prototype.bootstrap","namespaces","callback","resolve","cb","setTimeout","deps","getPathFromDeps_","loaded","onLoad","loadClosureDeps","goog.DebugLoader_.prototype.loadClosureDeps","createDependency","loadDeps_","goog.DebugLoader_.prototype.requested","absPathOrId","opt_force","areDepsLoaded_","setDependencyFactory","goog.DebugLoader_.prototype.setDependencyFactory","factory","goog.DebugLoader_.prototype.load_","loader","visit","dep","wasLoading","concat","errorMessage","goog.DebugLoader_.prototype.loadDeps_","paused","loadCallDone","loading_","controller","pause","resume","resume_","loaded_","pending","setModuleState","registerEs6ModuleExports","opt_closureNamespace","registerGoogModuleExports","clearModuleState","defer_","areDepsLoaded","load","pause_","goog.DebugLoader_.prototype.pause_","goog.DebugLoader_.prototype.resume_","goog.DebugLoader_.prototype.loading_","goog.DebugLoader_.prototype.loaded_","goog.DebugLoader_.prototype.areDepsLoaded_","pathsOrIds","goog.DebugLoader_.prototype.getPathFromDeps_","goog.DebugLoader_.prototype.defer_","dependency","LoadController","goog.LoadController","goog.LoadController.prototype.pause","goog.LoadController.prototype.resume","goog.LoadController.prototype.loaded","goog.LoadController.prototype.pending","goog.LoadController.prototype.registerEs6ModuleExports","goog.LoadController.prototype.setModuleState","goog.LoadController.prototype.clearModuleState","goog.LoadController.prototype.defer","goog.LoadController.prototype.areDepsLoaded","Dependency","goog.Dependency","relativePath","loadFlags","loadCallbacks_","goog.Dependency.prototype.onLoad","goog.Dependency.prototype.loaded","callbacks","callbackMap_","registerCallback_","goog.Dependency.registerCallback_","unregisterCallback_","goog.Dependency.unregisterCallback_","callback_","goog.Dependency.callback_","goog.Dependency.prototype.load","CLOSURE_IMPORT_SCRIPT","ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING","isDeps","IS_OLD_IE_","nonceAttr","write","event","scriptEl","async","setAttribute","onreadystatechange","scriptEl.onreadystatechange","onload","scriptEl.onload","Es6ModuleDependency","goog.Es6ModuleDependency","goog.Es6ModuleDependency.base","goog.Es6ModuleDependency.prototype.load","contents","append","textContent","create","beforeKey","registerKey","afterKey","TransformedDependency","goog.TransformedDependency","goog.TransformedDependency.base","contents_","goog.TransformedDependency.prototype.load","fetch","transform","isEs6","fetchInOwnScriptThenLoad","anythingElsePending","useOldIeWorkAround","needsAsyncLoading","oldCallback","doc.onreadystatechange","goog.TransformedDependency.prototype.transform","TranspiledDependency","goog.TranspiledDependency","transpiler","goog.TranspiledDependency.base","goog.TranspiledDependency.prototype.transform","GoogModuleDependency","goog.GoogModuleDependency","goog.GoogModuleDependency.base","needsTranspile_","goog.GoogModuleDependency.prototype.transform","LOAD_MODULE_USING_EVAL","atob","all","goog.DebugLoader_.prototype.addDependency","goog.DependencyFactory","goog.DependencyFactory.prototype.createDependency","goog.loadClosureDeps","goog.setDependencyFactory","CLOSURE_NO_DEPS","goog.bootstrap","goog.debug","debug","goog.debug.Error","opt_msg","captureStackTrace","stack","message","reportErrorToServer","goog.dom","dom","NodeType","ELEMENT","ATTRIBUTE","TEXT","CDATA_SECTION","ENTITY_REFERENCE","ENTITY","PROCESSING_INSTRUCTION","COMMENT","DOCUMENT","DOCUMENT_TYPE","DOCUMENT_FRAGMENT","NOTATION","goog.asserts","asserts","AssertionError","goog.asserts.AssertionError","messagePattern","messageArgs","subs_","DEFAULT_ERROR_HANDLER","goog.asserts.DEFAULT_ERROR_HANDLER","errorHandler_","goog.asserts.subs_","pattern","subs","splitParts","returnString","subLast","sub","doAssertFailure_","goog.asserts.doAssertFailure_","defaultMessage","defaultArgs","givenMessage","givenArgs","setErrorHandler","goog.asserts.setErrorHandler","errorHandler","ENABLE_ASSERTS","assert","goog.asserts.assert","condition","fail","goog.asserts.fail","assertNumber","goog.asserts.assertNumber","assertString","goog.asserts.assertString","assertFunction","goog.asserts.assertFunction","assertObject","goog.asserts.assertObject","assertArray","goog.asserts.assertArray","assertBoolean","goog.asserts.assertBoolean","assertElement","goog.asserts.assertElement","assertInstanceof","goog.asserts.assertInstanceof","getType_","assertFinite","goog.asserts.assertFinite","isFinite","assertObjectPrototypeIsIntact","goog.asserts.assertObjectPrototypeIsIntact","goog.asserts.getType_","displayName","goog.array","array","peek","goog.array.peek","last","NATIVE_ARRAY_PROTOTYPES","ASSUME_NATIVE_FUNCTIONS","arr","opt_fromIndex","fromIndex","max","forEach","f","arr2","forEachRight","goog.array.forEachRight","filter","res","resLength","map","reduce","rval","index","reduceRight","some","every","count","goog.array.count","element","find","goog.array.find","findIndex","goog.array.findIndex","findRight","goog.array.findRight","findIndexRight","goog.array.findIndexRight","contains","goog.array.contains","isEmpty","goog.array.isEmpty","clear","goog.array.clear","insert","goog.array.insert","insertAt","goog.array.insertAt","opt_i","insertArrayAt","goog.array.insertArrayAt","elementsToAdd","insertBefore","goog.array.insertBefore","opt_obj2","remove","goog.array.remove","rv","removeAt","removeLast","goog.array.removeLast","goog.array.removeAt","removeIf","goog.array.removeIf","removeAllIf","goog.array.removeAllIf","removedCount","goog.array.concat","goog.array.join","toArray","goog.array.toArray","extend","goog.array.extend","arr1","len1","len2","j","goog.array.splice","howMany","goog.array.slice","start","opt_end","removeDuplicates","goog.array.removeDuplicates","opt_rv","opt_hashFn","returnArray","defaultHashFn","item","hashFn","seen","cursorInsert","cursorRead","current","binarySearch","goog.array.binarySearch","opt_compareFn","binarySearch_","defaultCompare","binarySelect","goog.array.binarySelect","evaluator","goog.array.binarySearch_","compareFn","isEvaluator","opt_target","opt_selfObj","left","right","found","middle","compareResult","sort","goog.array.sort","stableSort","goog.array.stableSort","compArr","valueCompareFn","stableCompareFn","obj1","obj2","sortByKey","goog.array.sortByKey","keyFn","keyCompareFn","sortObjectsByKey","goog.array.sortObjectsByKey","isSorted","goog.array.isSorted","opt_strict","compare","equals","goog.array.equals","opt_equalsFn","equalsFn","defaultCompareEquality","compare3","goog.array.compare3","min","goog.array.defaultCompare","inverseDefaultCompare","goog.array.inverseDefaultCompare","goog.array.defaultCompareEquality","binaryInsert","goog.array.binaryInsert","binaryRemove","goog.array.binaryRemove","bucket","goog.array.bucket","sorter","buckets","toObject","goog.array.toObject","keyFunc","ret","range","goog.array.range","startOrEnd","opt_step","end","step","repeat","goog.array.repeat","n","flatten","goog.array.flatten","c","CHUNK_SIZE","chunk","recurseResult","r","rotate","goog.array.rotate","moveItem","goog.array.moveItem","toIndex","removedItems","zip","goog.array.zip","minLen","shuffle","goog.array.shuffle","opt_randFn","randFn","floor","tmp","copyByIndex","goog.array.copyByIndex","index_arr","concatMap","goog.array.concatMap","goog.string","string","Unicode","NBSP","startsWith","goog.string.startsWith","prefix","endsWith","goog.string.endsWith","caseInsensitiveStartsWith","goog.string.caseInsensitiveStartsWith","caseInsensitiveCompare","caseInsensitiveEndsWith","goog.string.caseInsensitiveEndsWith","caseInsensitiveEquals","goog.string.caseInsensitiveEquals","str1","str2","toLowerCase","goog.string.subs","subsArguments","collapseWhitespace","goog.string.collapseWhitespace","isEmptyOrWhitespace","goog.string.isEmptyOrWhitespace","isEmptyString","goog.string.isEmptyString","isEmptyOrWhitespaceSafe","goog.string.isEmptyOrWhitespaceSafe","makeSafe","isEmptySafe","isBreakingWhitespace","goog.string.isBreakingWhitespace","isAlpha","goog.string.isAlpha","isNumeric","goog.string.isNumeric","isAlphaNumeric","goog.string.isAlphaNumeric","isSpace","goog.string.isSpace","ch","isUnicodeChar","goog.string.isUnicodeChar","stripNewlines","goog.string.stripNewlines","canonicalizeNewlines","goog.string.canonicalizeNewlines","normalizeWhitespace","goog.string.normalizeWhitespace","normalizeSpaces","goog.string.normalizeSpaces","collapseBreakingSpaces","goog.string.collapseBreakingSpaces","trim","exec","trimLeft","goog.string.trimLeft","trimRight","goog.string.trimRight","goog.string.caseInsensitiveCompare","test1","test2","numberAwareCompare_","goog.string.numberAwareCompare_","tokenizerRegExp","tokens1","tokens2","num1","parseInt","isNaN","num2","intAwareCompare","goog.string.intAwareCompare","floatAwareCompare","goog.string.floatAwareCompare","numerateCompare","urlEncode","goog.string.urlEncode","encodeURIComponent","urlDecode","goog.string.urlDecode","decodeURIComponent","newLineToBr","goog.string.newLineToBr","opt_xml","htmlEscape","goog.string.htmlEscape","opt_isLikelyToContainHtmlChars","AMP_RE_","LT_RE_","GT_RE_","QUOT_RE_","SINGLE_QUOTE_RE_","NULL_RE_","DETECT_DOUBLE_ESCAPING","E_RE_","ALL_RE_","unescapeEntities","goog.string.unescapeEntities","FORCE_NON_DOM_HTML_UNESCAPING","unescapeEntitiesUsingDom_","unescapePureXmlEntities_","unescapeEntitiesWithDocument","goog.string.unescapeEntitiesWithDocument","goog.string.unescapeEntitiesUsingDom_","opt_document","div","HTML_ENTITY_PATTERN_","entity","fromCharCode","innerHTML","firstChild","nodeValue","goog.string.unescapePureXmlEntities_","whitespaceEscape","goog.string.whitespaceEscape","preserveSpaces","goog.string.preserveSpaces","stripQuotes","goog.string.stripQuotes","quoteChars","quoteChar","truncate","goog.string.truncate","chars","opt_protectEscapedCharacters","truncateMiddle","goog.string.truncateMiddle","opt_trailingChars","endPoint","half","endPos","specialEscapeChars_","jsEscapeCache_","quote","goog.string.quote","sb","cc","charCodeAt","escapeChar","escapeString","goog.string.escapeString","goog.string.escapeChar","toUpperCase","goog.string.contains","subString","caseInsensitiveContains","goog.string.caseInsensitiveContains","countOf","goog.string.countOf","ss","goog.string.removeAt","stringLength","resultStr","goog.string.remove","removeAll","goog.string.removeAll","RegExp","regExpEscape","replaceAll","goog.string.replaceAll","replacement","goog.string.regExpEscape","padNumber","goog.string.padNumber","num","opt_precision","toFixed","goog.string.makeSafe","buildString","goog.string.buildString","getRandomString","goog.string.getRandomString","abs","compareVersions","goog.string.compareVersions","version1","version2","order","v1Subs","v2Subs","subCount","subIdx","v1Sub","v2Sub","v1Comp","v2Comp","v1CompNum","v2CompNum","compareElements_","goog.string.compareElements_","hashCode","goog.string.hashCode","uniqueStringCounter_","createUniqueString","goog.string.createUniqueString","toNumber","goog.string.toNumber","NaN","isLowerCamelCase","goog.string.isLowerCamelCase","isUpperCamelCase","goog.string.isUpperCamelCase","toCamelCase","goog.string.toCamelCase","toSelectorCase","goog.string.toSelectorCase","toTitleCase","goog.string.toTitleCase","opt_delimiters","delimiters","regexp","p1","p2","capitalize","goog.string.capitalize","goog.string.parseInt","splitLimit","goog.string.splitLimit","separator","limit","returnVal","lastComponent","goog.string.lastComponent","separators","lastSeparatorIndex","currentSeparatorIndex","editDistance","goog.string.editDistance","v0","v1","cost","goog.labs","goog.labs.userAgent","goog.labs.userAgent.util","labs","util","getNativeUserAgentString_","goog.labs.userAgent.util.getNativeUserAgentString_","getNavigator_","goog.labs.userAgent.util.getNavigator_","userAgent_","setUserAgent","goog.labs.userAgent.util.setUserAgent","opt_userAgent","getUserAgent","goog.labs.userAgent.util.getUserAgent","matchUserAgent","goog.labs.userAgent.util.matchUserAgent","matchUserAgentIgnoreCase","goog.labs.userAgent.util.matchUserAgentIgnoreCase","extractVersionTuples","goog.labs.userAgent.util.extractVersionTuples","versionRegExp","goog.object","is","goog.object.is","v","v2","goog.object.forEach","goog.object.filter","goog.object.map","goog.object.some","goog.object.every","getCount","goog.object.getCount","getAnyKey","goog.object.getAnyKey","getAnyValue","goog.object.getAnyValue","goog.object.contains","containsValue","getValues","goog.object.getValues","getKeys","goog.object.getKeys","getValueByKeys","goog.object.getValueByKeys","keys","containsKey","goog.object.containsKey","goog.object.containsValue","findKey","goog.object.findKey","opt_this","findValue","goog.object.findValue","goog.object.isEmpty","goog.object.clear","goog.object.remove","add","goog.object.add","set","goog.object.get","opt_val","goog.object.set","setIfUndefined","goog.object.setIfUndefined","setWithReturnValueIfNotSet","goog.object.setWithReturnValueIfNotSet","goog.object.equals","k","goog.object.clone","unsafeClone","goog.object.unsafeClone","transpose","goog.object.transpose","transposed","PROTOTYPE_FIELDS_","goog.object.extend","goog.object.create","argLength","createSet","goog.object.createSet","createImmutableView","goog.object.createImmutableView","isFrozen","freeze","isImmutableView","goog.object.isImmutableView","getAllPropertyNames","goog.object.getAllPropertyNames","opt_includeObjectPrototype","opt_includeFunctionPrototype","getOwnPropertyNames","getPrototypeOf","visitedSet","proto","names","goog.labs.userAgent.browser","browser","matchOpera_","goog.labs.userAgent.browser.matchOpera_","matchIE_","goog.labs.userAgent.browser.matchIE_","matchEdge_","goog.labs.userAgent.browser.matchEdge_","matchFirefox_","goog.labs.userAgent.browser.matchFirefox_","matchSafari_","goog.labs.userAgent.browser.matchSafari_","matchChrome_","matchCoast_","isSilk","goog.labs.userAgent.browser.matchCoast_","matchIosWebview_","goog.labs.userAgent.browser.matchIosWebview_","goog.labs.userAgent.browser.matchChrome_","matchAndroidBrowser_","goog.labs.userAgent.browser.matchAndroidBrowser_","isChrome","isFirefox","isOpera","isIE","isEdge","isSafari","isCoast","isIosWebview","isAndroidBrowser","goog.labs.userAgent.browser.isSilk","getVersion","goog.labs.userAgent.browser.getVersion","lookUpValueWithKeys","versionMapHasKey","versionMap","userAgentString","getIEVersion_","versionTuples","tuple","isVersionOrHigher","goog.labs.userAgent.browser.isVersionOrHigher","version","goog.labs.userAgent.browser.getIEVersion_","msie","tridentVersion","goog.labs.userAgent.engine","engine","isPresto","goog.labs.userAgent.engine.isPresto","isTrident","goog.labs.userAgent.engine.isTrident","goog.labs.userAgent.engine.isEdge","isWebKit","goog.labs.userAgent.engine.isWebKit","isGecko","goog.labs.userAgent.engine.isGecko","goog.labs.userAgent.engine.getVersion","tuples","engineTuple","getEngineTuple_","getVersionForKey_","browserTuple","info","goog.labs.userAgent.engine.getEngineTuple_","goog.labs.userAgent.engine.isVersionOrHigher","goog.labs.userAgent.engine.getVersionForKey_","pair","goog.labs.userAgent.platform","platform","isAndroid","goog.labs.userAgent.platform.isAndroid","isIpod","goog.labs.userAgent.platform.isIpod","isIphone","goog.labs.userAgent.platform.isIphone","isIpad","goog.labs.userAgent.platform.isIpad","isIos","goog.labs.userAgent.platform.isIos","isMacintosh","goog.labs.userAgent.platform.isMacintosh","isLinux","goog.labs.userAgent.platform.isLinux","isWindows","goog.labs.userAgent.platform.isWindows","isChromeOS","goog.labs.userAgent.platform.isChromeOS","isChromecast","goog.labs.userAgent.platform.isChromecast","goog.labs.userAgent.platform.getVersion","goog.labs.userAgent.platform.isVersionOrHigher","goog.reflect","reflect","goog.reflect.object","objectProperty","goog.reflect.objectProperty","prop","sinkValue","goog.reflect.sinkValue","canAccessProperty","goog.reflect.canAccessProperty","cache","goog.reflect.cache","cacheObj","valueFn","opt_keyFn","storedKey","goog.userAgent","BROWSER_KNOWN_","ASSUME_IE","ASSUME_EDGE","ASSUME_GECKO","ASSUME_MOBILE_WEBKIT","ASSUME_WEBKIT","ASSUME_OPERA","getUserAgentString","goog.userAgent.getUserAgentString","getNavigatorTyped","goog.userAgent.getNavigatorTyped","getNavigator","goog.userAgent.getNavigator","OPERA","IE","EDGE","EDGE_OR_IE","GECKO","WEBKIT","isMobile_","goog.userAgent.isMobile_","MOBILE","SAFARI","determinePlatform_","goog.userAgent.determinePlatform_","PLATFORM","PLATFORM_KNOWN_","ASSUME_MAC","ASSUME_WINDOWS","ASSUME_LINUX","ASSUME_X11","ASSUME_ANDROID","ASSUME_IPHONE","ASSUME_IPAD","ASSUME_IPOD","MAC","WINDOWS","isLegacyLinux_","goog.userAgent.isLegacyLinux_","LINUX","isX11_","goog.userAgent.isX11_","X11","ANDROID","IPHONE","IPAD","IPOD","IOS","determineVersion_","goog.userAgent.determineVersion_","getVersionRegexResult_","docMode","getDocumentMode_","parseFloat","goog.userAgent.getVersionRegexResult_","goog.userAgent.getDocumentMode_","VERSION","goog.userAgent.compare","isVersionOrHigherCache_","goog.userAgent.isVersionOrHigher","ASSUME_ANY_VERSION","isVersion","isDocumentModeOrHigher","goog.userAgent.isDocumentModeOrHigher","documentMode","DOCUMENT_MODE","isDocumentMode","mode","BrowserFeature","CAN_ADD_NAME_OR_TYPE_ATTRIBUTES","CAN_USE_CHILDREN_ATTRIBUTE","CAN_USE_INNER_TEXT","CAN_USE_PARENT_ELEMENT_PROPERTY","INNER_HTML_NEEDS_SCOPED_ELEMENT","LEGACY_IE_RANGES","HtmlElement","goog.dom.HtmlElement","TagName","goog.dom.TagName","tagName","tagName_","goog.dom.TagName.prototype.toString","A","ABBR","ACRONYM","ADDRESS","APPLET","AREA","ARTICLE","ASIDE","AUDIO","B","BASE","BASEFONT","BDI","BDO","BIG","BLOCKQUOTE","BODY","BR","BUTTON","CANVAS","CAPTION","CENTER","CITE","CODE","COL","COLGROUP","COMMAND","DATA","DATALIST","DD","DEL","DETAILS","DFN","DIALOG","DIR","DIV","DL","DT","EM","EMBED","FIELDSET","FIGCAPTION","FIGURE","FONT","FOOTER","FORM","FRAME","FRAMESET","H1","H2","H3","H4","H5","H6","HEAD","HEADER","HGROUP","HR","HTML","I","IFRAME","IMG","INPUT","INS","ISINDEX","KBD","KEYGEN","LABEL","LEGEND","LI","LINK","MAIN","MAP","MARK","MATH","MENU","MENUITEM","META","METER","NAV","NOFRAMES","NOSCRIPT","OBJECT","OL","OPTGROUP","OPTION","OUTPUT","P","PARAM","PICTURE","PRE","PROGRESS","Q","RP","RT","RTC","RUBY","S","SAMP","SCRIPT","SECTION","SELECT","SMALL","SOURCE","SPAN","STRIKE","STRONG","STYLE","SUB","SUMMARY","SUP","SVG","TABLE","TBODY","TD","TEMPLATE","TEXTAREA","TFOOT","TH","THEAD","TIME","TITLE","TR","TRACK","TT","U","UL","VAR","VIDEO","WBR","goog.dom.asserts","assertIsLocation","goog.dom.asserts.assertIsLocation","o","win","getWindow_","Location","Element","debugStringForType_","assertIsElementType_","goog.dom.asserts.assertIsElementType_","typename","assertIsHTMLAnchorElement","goog.dom.asserts.assertIsHTMLAnchorElement","assertIsHTMLButtonElement","goog.dom.asserts.assertIsHTMLButtonElement","assertIsHTMLLinkElement","goog.dom.asserts.assertIsHTMLLinkElement","assertIsHTMLImageElement","goog.dom.asserts.assertIsHTMLImageElement","assertIsHTMLVideoElement","goog.dom.asserts.assertIsHTMLVideoElement","assertIsHTMLInputElement","goog.dom.asserts.assertIsHTMLInputElement","assertIsHTMLEmbedElement","goog.dom.asserts.assertIsHTMLEmbedElement","assertIsHTMLFormElement","goog.dom.asserts.assertIsHTMLFormElement","assertIsHTMLFrameElement","goog.dom.asserts.assertIsHTMLFrameElement","assertIsHTMLIFrameElement","goog.dom.asserts.assertIsHTMLIFrameElement","assertIsHTMLObjectElement","goog.dom.asserts.assertIsHTMLObjectElement","assertIsHTMLScriptElement","goog.dom.asserts.assertIsHTMLScriptElement","goog.dom.asserts.debugStringForType_","goog.dom.asserts.getWindow_","ownerDocument","defaultView","parentWindow","goog.dom.tags","tags","VOID_TAGS_","isVoidTag","goog.dom.tags.isVoidTag","TypedString","goog.string.TypedString","Const","goog.string.Const","stringConstValueWithSecurityContract__googStringSecurityPrivate_","STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_","TYPE_MARKER_","implementsGoogStringTypedString","getTypedStringValue","goog.string.Const.prototype.getTypedStringValue","goog.string.Const.prototype.toString","unwrap","goog.string.Const.unwrap","stringConst","from","goog.string.Const.from","create__googStringSecurityPrivate_","goog.string.Const.create__googStringSecurityPrivate_","EMPTY","goog.html","html","SafeScript","goog.html.SafeScript","privateDoNotAccessOrElseSafeScriptWrappedValue_","SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_","TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_","fromConstant","goog.html.SafeScript.fromConstant","scriptString","createSafeScriptSecurityPrivateDoNotAccessOrElse","fromConstantAndArgs","goog.html.SafeScript.fromConstantAndArgs","stringify_","goog.html.SafeScript.prototype.getTypedStringValue","goog.html.SafeScript.prototype.toString","goog.html.SafeScript.unwrap","safeScript","goog.html.SafeScript.stringify_","json","goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse","initSecurityPrivateDoNotAccessOrElse_","goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_","goog.fs","goog.fs.url","fs","url","createObjectUrl","goog.fs.url.createObjectUrl","blob","getUrlObject_","createObjectURL","revokeObjectUrl","goog.fs.url.revokeObjectUrl","revokeObjectURL","goog.fs.url.getUrlObject_","urlObject","findUrlObject_","goog.fs.url.findUrlObject_","URL","webkitURL","browserSupportsObjectUrls","goog.fs.url.browserSupportsObjectUrls","goog.i18n","goog.i18n.bidi","i18n","bidi","IS_RTL","FORCE_RTL","LOCALE","Format","LRE","RLE","PDF","LRM","RLM","Dir","LTR","RTL","NEUTRAL","RIGHT","LEFT","I18N_RIGHT","I18N_LEFT","toDir","goog.i18n.bidi.toDir","givenDir","opt_noNeutral","ltrChars_","rtlChars_","htmlSkipReg_","stripHtmlIfNeeded_","goog.i18n.bidi.stripHtmlIfNeeded_","opt_isStripNeeded","rtlCharReg_","ltrCharReg_","hasAnyRtl","goog.i18n.bidi.hasAnyRtl","opt_isHtml","hasRtlChar","hasAnyLtr","goog.i18n.bidi.hasAnyLtr","ltrRe_","rtlRe_","isRtlChar","goog.i18n.bidi.isRtlChar","isLtrChar","goog.i18n.bidi.isLtrChar","isNeutralChar","goog.i18n.bidi.isNeutralChar","ltrDirCheckRe_","rtlDirCheckRe_","startsWithRtl","goog.i18n.bidi.startsWithRtl","isRtlText","startsWithLtr","goog.i18n.bidi.startsWithLtr","isLtrText","isRequiredLtrRe_","isNeutralText","goog.i18n.bidi.isNeutralText","ltrExitDirCheckRe_","rtlExitDirCheckRe_","endsWithLtr","goog.i18n.bidi.endsWithLtr","isLtrExitText","endsWithRtl","goog.i18n.bidi.endsWithRtl","isRtlExitText","rtlLocalesRe_","isRtlLanguage","goog.i18n.bidi.isRtlLanguage","bracketGuardTextRe_","guardBracketInText","goog.i18n.bidi.guardBracketInText","opt_isRtlContext","mark","useRtl","enforceRtlInHtml","goog.i18n.bidi.enforceRtlInHtml","enforceRtlInText","goog.i18n.bidi.enforceRtlInText","text","enforceLtrInHtml","goog.i18n.bidi.enforceLtrInHtml","enforceLtrInText","goog.i18n.bidi.enforceLtrInText","dimensionsRe_","leftRe_","rightRe_","tempRe_","mirrorCSS","goog.i18n.bidi.mirrorCSS","cssStr","doubleQuoteSubstituteRe_","singleQuoteSubstituteRe_","normalizeHebrewQuote","goog.i18n.bidi.normalizeHebrewQuote","wordSeparatorRe_","hasNumeralsRe_","rtlDetectionThreshold_","estimateDirection","goog.i18n.bidi.estimateDirection","rtlCount","totalCount","hasWeaklyLtr","tokens","token","detectRtlDirectionality","goog.i18n.bidi.detectRtlDirectionality","setElementDirAndAlign","goog.i18n.bidi.setElementDirAndAlign","dir","style","textAlign","setElementDirByTextDirectionality","goog.i18n.bidi.setElementDirByTextDirectionality","DirectionalString","goog.i18n.bidi.DirectionalString","TrustedResourceUrl","goog.html.TrustedResourceUrl","privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_","TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_","goog.html.TrustedResourceUrl.prototype.getTypedStringValue","implementsGoogI18nBidiDirectionalString","getDirection","goog.html.TrustedResourceUrl.prototype.getDirection","cloneWithParams","goog.html.TrustedResourceUrl.prototype.cloneWithParams","params","values","createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse","goog.html.TrustedResourceUrl.prototype.toString","goog.html.TrustedResourceUrl.unwrap","trustedResourceUrl","format","goog.html.TrustedResourceUrl.format","formatStr","BASE_URL_","FORMAT_MARKER_","id","arg","formatWithParams","goog.html.TrustedResourceUrl.formatWithParams","goog.html.TrustedResourceUrl.fromConstant","fromConstants","goog.html.TrustedResourceUrl.fromConstants","unwrapped","goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse","SafeUrl","goog.html.SafeUrl","privateDoNotAccessOrElseSafeHtmlWrappedValue_","SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_","INNOCUOUS_STRING","goog.html.SafeUrl.prototype.getTypedStringValue","goog.html.SafeUrl.prototype.getDirection","goog.html.SafeUrl.prototype.toString","goog.html.SafeUrl.unwrap","safeUrl","goog.html.SafeUrl.fromConstant","createSafeUrlSecurityPrivateDoNotAccessOrElse","SAFE_MIME_TYPE_PATTERN_","fromBlob","goog.html.SafeUrl.fromBlob","DATA_URL_PATTERN_","fromDataUrl","goog.html.SafeUrl.fromDataUrl","dataUrl","valid","fromTelUrl","goog.html.SafeUrl.fromTelUrl","telUrl","fromTrustedResourceUrl","goog.html.SafeUrl.fromTrustedResourceUrl","SAFE_URL_PATTERN_","sanitize","goog.html.SafeUrl.sanitize","sanitizeAssertUnchanged","goog.html.SafeUrl.sanitizeAssertUnchanged","goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse","ABOUT_BLANK","SafeStyle","goog.html.SafeStyle","privateDoNotAccessOrElseSafeStyleWrappedValue_","SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_","goog.html.SafeStyle.fromConstant","styleString","checkStyle_","createSafeStyleSecurityPrivateDoNotAccessOrElse","goog.html.SafeStyle.checkStyle_","goog.html.SafeStyle.prototype.getTypedStringValue","goog.html.SafeStyle.prototype.toString","goog.html.SafeStyle.unwrap","safeStyle","goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse","goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_","goog.html.SafeStyle.create","sanitizePropertyValue_","goog.html.SafeStyle.sanitizePropertyValue_","sanitizePropertyValueString_","goog.html.SafeStyle.sanitizePropertyValueString_","valueWithoutFunctions","FUNCTIONS_RE_","URL_RE_","VALUE_RE_","hasBalancedQuotes_","sanitizeUrl_","VALUE_ALLOWED_CHARS_","goog.html.SafeStyle.hasBalancedQuotes_","outsideSingle","outsideDouble","goog.html.SafeStyle.sanitizeUrl_","before","after","inside","sanitized","goog.html.SafeStyle.concat","addArgument","argument","SafeStyleSheet","goog.html.SafeStyleSheet","privateDoNotAccessOrElseSafeStyleSheetWrappedValue_","SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_","createRule","goog.html.SafeStyleSheet.createRule","selector","selectorToCheck","hasBalancedBrackets_","styleSheet","createSafeStyleSheetSecurityPrivateDoNotAccessOrElse","goog.html.SafeStyleSheet.hasBalancedBrackets_","brackets","expectedBrackets","pop","goog.html.SafeStyleSheet.concat","goog.html.SafeStyleSheet.fromConstant","styleSheetString","goog.html.SafeStyleSheet.prototype.getTypedStringValue","goog.html.SafeStyleSheet.prototype.toString","goog.html.SafeStyleSheet.unwrap","safeStyleSheet","goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse","goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_","SafeHtml","goog.html.SafeHtml","SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_","dir_","goog.html.SafeHtml.prototype.getDirection","goog.html.SafeHtml.prototype.getTypedStringValue","goog.html.SafeHtml.prototype.toString","goog.html.SafeHtml.unwrap","safeHtml","goog.html.SafeHtml.htmlEscape","textOrHtml","textAsString","createSafeHtmlSecurityPrivateDoNotAccessOrElse","htmlEscapePreservingNewlines","goog.html.SafeHtml.htmlEscapePreservingNewlines","htmlEscapePreservingNewlinesAndSpaces","goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces","VALID_NAMES_IN_TAG_","URL_ATTRIBUTES_","NOT_ALLOWED_TAG_NAMES_","goog.html.SafeHtml.create","opt_attributes","opt_content","verifyTagName","createSafeHtmlTagSecurityPrivateDoNotAccessOrElse","goog.html.SafeHtml.verifyTagName","createIframe","goog.html.SafeHtml.createIframe","opt_src","opt_srcdoc","fixedAttributes","attributes","combineAttributes","defaultAttributes","createSandboxIframe","goog.html.SafeHtml.createSandboxIframe","canUseSandboxIframe","goog.html.SafeHtml.canUseSandboxIframe","createScriptSrc","goog.html.SafeHtml.createScriptSrc","createScript","goog.html.SafeHtml.createScript","attr","attrLower","content","htmlContent","createStyle","goog.html.SafeHtml.createStyle","createMetaRefresh","goog.html.SafeHtml.createMetaRefresh","opt_secs","unwrappedUrl","getAttrNameAndValue_","goog.html.SafeHtml.getAttrNameAndValue_","getStyleValue_","goog.html.SafeHtml.getStyleValue_","createWithDir","goog.html.SafeHtml.createWithDir","goog.html.SafeHtml.concat","htmlDir","concatWithDir","goog.html.SafeHtml.concatWithDir","goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse","goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_","goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse","stringifyAttributes","dirAttribute","goog.html.SafeHtml.stringifyAttributes","goog.html.SafeHtml.combineAttributes","combinedAttributes","nameLower","DOCTYPE_HTML","goog.dom.safe","safe","InsertAdjacentHtmlPosition","AFTERBEGIN","AFTEREND","BEFOREBEGIN","BEFOREEND","insertAdjacentHtml","goog.dom.safe.insertAdjacentHtml","node","position","insertAdjacentHTML","SET_INNER_HTML_DISALLOWED_TAGS_","setInnerHtml","goog.dom.safe.setInnerHtml","elem","setOuterHtml","goog.dom.safe.setOuterHtml","outerHTML","setFormElementAction","goog.dom.safe.setFormElementAction","form","action","setButtonFormAction","goog.dom.safe.setButtonFormAction","button","formAction","setInputFormAction","goog.dom.safe.setInputFormAction","input","setStyle","goog.dom.safe.setStyle","cssText","documentWrite","goog.dom.safe.documentWrite","setAnchorHref","goog.dom.safe.setAnchorHref","anchor","href","setImageSrc","goog.dom.safe.setImageSrc","imageElement","setVideoSrc","goog.dom.safe.setVideoSrc","videoElement","setEmbedSrc","goog.dom.safe.setEmbedSrc","embed","setFrameSrc","goog.dom.safe.setFrameSrc","frame","setIframeSrc","goog.dom.safe.setIframeSrc","iframe","setIframeSrcdoc","goog.dom.safe.setIframeSrcdoc","srcdoc","setLinkHrefAndRel","goog.dom.safe.setLinkHrefAndRel","link","rel","setObjectData","goog.dom.safe.setObjectData","setScriptSrc","goog.dom.safe.setScriptSrc","setScriptContent","goog.dom.safe.setScriptContent","setLocationHref","goog.dom.safe.setLocationHref","loc","replaceLocation","goog.dom.safe.replaceLocation","openInWindow","goog.dom.safe.openInWindow","opt_openerWin","opt_name","opt_specs","opt_replace","window","goog.html.uncheckedconversions","uncheckedconversions","safeHtmlFromStringKnownToSatisfyTypeContract","goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract","justification","opt_dir","safeScriptFromStringKnownToSatisfyTypeContract","goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract","safeStyleFromStringKnownToSatisfyTypeContract","goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract","safeStyleSheetFromStringKnownToSatisfyTypeContract","goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract","safeUrlFromStringKnownToSatisfyTypeContract","goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract","trustedResourceUrlFromStringKnownToSatisfyTypeContract","goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract","goog.math","math","randomInt","goog.math.randomInt","uniformRandom","goog.math.uniformRandom","clamp","goog.math.clamp","modulo","goog.math.modulo","lerp","goog.math.lerp","nearlyEquals","goog.math.nearlyEquals","opt_tolerance","standardAngle","goog.math.standardAngle","angle","standardAngleInRadians","goog.math.standardAngleInRadians","PI","toRadians","goog.math.toRadians","angleDegrees","toDegrees","goog.math.toDegrees","angleRadians","angleDx","goog.math.angleDx","degrees","radius","cos","angleDy","goog.math.angleDy","sin","goog.math.angle","x1","y1","x2","y2","atan2","angleDifference","goog.math.angleDifference","startAngle","endAngle","d","sign","goog.math.sign","longestCommonSubsequence","goog.math.longestCommonSubsequence","array1","array2","opt_collectorFn","collect","i1","i2","length1","length2","sum","goog.math.sum","average","goog.math.average","sampleVariance","goog.math.sampleVariance","sampleSize","mean","pow","standardDeviation","goog.math.standardDeviation","sqrt","isInt","goog.math.isInt","isFiniteNumber","goog.math.isFiniteNumber","isNegativeZero","goog.math.isNegativeZero","log10Floor","goog.math.log10Floor","round","log","LOG10E","Infinity","safeFloor","goog.math.safeFloor","opt_epsilon","safeCeil","goog.math.safeCeil","ceil","Coordinate","goog.math.Coordinate","opt_x","opt_y","y","goog.math.Coordinate.prototype.clone","goog.math.Coordinate.prototype.toString","goog.math.Coordinate.prototype.equals","other","goog.math.Coordinate.equals","distance","goog.math.Coordinate.distance","dx","dy","magnitude","goog.math.Coordinate.magnitude","azimuth","goog.math.Coordinate.azimuth","squaredDistance","goog.math.Coordinate.squaredDistance","difference","goog.math.Coordinate.difference","goog.math.Coordinate.sum","goog.math.Coordinate.prototype.ceil","goog.math.Coordinate.prototype.floor","goog.math.Coordinate.prototype.round","translate","goog.math.Coordinate.prototype.translate","tx","opt_ty","scale","goog.math.Coordinate.prototype.scale","sx","opt_sy","sy","rotateRadians","goog.math.Coordinate.prototype.rotateRadians","radians","opt_center","center","rotateDegrees","goog.math.Coordinate.prototype.rotateDegrees","Size","goog.math.Size","width","height","goog.math.Size.equals","goog.math.Size.prototype.clone","goog.math.Size.prototype.toString","getLongest","goog.math.Size.prototype.getLongest","getShortest","goog.math.Size.prototype.getShortest","area","goog.math.Size.prototype.area","perimeter","goog.math.Size.prototype.perimeter","aspectRatio","goog.math.Size.prototype.aspectRatio","goog.math.Size.prototype.isEmpty","goog.math.Size.prototype.ceil","fitsInside","goog.math.Size.prototype.fitsInside","goog.math.Size.prototype.floor","goog.math.Size.prototype.round","goog.math.Size.prototype.scale","scaleToCover","goog.math.Size.prototype.scaleToCover","scaleToFit","goog.math.Size.prototype.scaleToFit","COMPAT_MODE_KNOWN_","ASSUME_QUIRKS_MODE","ASSUME_STANDARDS_MODE","getDomHelper","goog.dom.getDomHelper","opt_element","DomHelper","getOwnerDocument","defaultDomHelper_","getDocument","goog.dom.getDocument","getElement","goog.dom.getElement","getElementHelper_","goog.dom.getElementHelper_","getElementById","getRequiredElement","goog.dom.getRequiredElement","getRequiredElementHelper_","goog.dom.getRequiredElementHelper_","$","goog.dom.getElementsByTagName","opt_parent","getElementsByTagNameAndClass","goog.dom.getElementsByTagNameAndClass","opt_tag","opt_class","opt_el","getElementsByTagNameAndClass_","getElementByTagNameAndClass","goog.dom.getElementByTagNameAndClass","getElementByTagNameAndClass_","getElementsByClass","goog.dom.getElementsByClass","parent","canUseQuerySelector_","querySelectorAll","getElementByClass","goog.dom.getElementByClass","getElementsByClassName","retVal","getRequiredElementByClass","goog.dom.getRequiredElementByClass","opt_root","retValue","goog.dom.canUseQuerySelector_","goog.dom.getElementsByTagNameAndClass_","els","arrayLike","len","el","nodeName","goog.dom.getElementByTagNameAndClass_","tag","elements","$$","setProperties","goog.dom.setProperties","properties","htmlFor","DIRECT_ATTRIBUTE_MAP_","getViewportSize","goog.dom.getViewportSize","opt_window","getViewportSize_","goog.dom.getViewportSize_","isCss1CompatMode_","documentElement","body","clientWidth","clientHeight","getDocumentHeight","goog.dom.getDocumentHeight","getDocumentHeight_","getDocumentHeightForWindow","goog.dom.getDocumentHeightForWindow","goog.dom.getDocumentHeight_","docEl","vh","scrollHeight","offsetHeight","sh","oh","getPageScroll","goog.dom.getPageScroll","getDocumentScroll","goog.dom.getDocumentScroll","getDocumentScroll_","goog.dom.getDocumentScroll_","getDocumentScrollElement_","pageYOffset","scrollTop","scrollLeft","pageXOffset","getDocumentScrollElement","goog.dom.getDocumentScrollElement","goog.dom.getDocumentScrollElement_","scrollingElement","getWindow","goog.dom.getWindow","opt_doc","goog.dom.getWindow_","createDom","goog.dom.createDom","createDom_","goog.dom.createDom_","tagNameArr","append_","goog.dom.append_","startIndex","childHandler","child","isNodeLike","isNodeList","$dom","goog.dom.createElement","createElement_","goog.dom.createElement_","goog.dom.createTextNode","createTable","goog.dom.createTable","rows","columns","opt_fillWithNbsp","createTable_","goog.dom.createTable_","fillWithNbsp","table","tbody","tr","td","setTextContent","constHtmlToNode","goog.dom.constHtmlToNode","stringArray","safeHtmlToNode","goog.dom.safeHtmlToNode","safeHtmlToNode_","goog.dom.safeHtmlToNode_","tempDiv","childrenToNode_","goog.dom.childrenToNode_","childNodes","fragment","createDocumentFragment","isCss1CompatMode","goog.dom.isCss1CompatMode","goog.dom.isCss1CompatMode_","compatMode","canHaveChildren","goog.dom.canHaveChildren","goog.dom.appendChild","goog.dom.append","removeChildren","goog.dom.removeChildren","insertSiblingBefore","goog.dom.insertSiblingBefore","newNode","refNode","parentNode","insertSiblingAfter","goog.dom.insertSiblingAfter","nextSibling","insertChildAt","goog.dom.insertChildAt","removeNode","goog.dom.removeNode","replaceNode","goog.dom.replaceNode","oldNode","replaceChild","flattenElement","goog.dom.flattenElement","getChildren","goog.dom.getChildren","children","getFirstElementChild","goog.dom.getFirstElementChild","firstElementChild","getNextElementNode_","getLastElementChild","goog.dom.getLastElementChild","lastElementChild","lastChild","getNextElementSibling","goog.dom.getNextElementSibling","nextElementSibling","getPreviousElementSibling","goog.dom.getPreviousElementSibling","previousElementSibling","previousSibling","goog.dom.getNextElementNode_","forward","getNextNode","goog.dom.getNextNode","getPreviousNode","goog.dom.getPreviousNode","goog.dom.isNodeLike","isElement","goog.dom.isElement","isWindow","goog.dom.isWindow","getParentElement","goog.dom.getParentElement","parentElement","goog.dom.contains","descendant","compareDocumentPosition","compareNodeOrder","goog.dom.compareNodeOrder","node1","node2","isElement1","isElement2","sourceIndex","parent1","parent2","compareSiblingOrder_","compareParentsDescendantNodeIe_","range1","createRange","selectNode","collapse","range2","compareBoundaryPoints","START_TO_END","goog.dom.compareParentsDescendantNodeIe_","textNode","sibling","goog.dom.compareSiblingOrder_","findCommonAncestor","goog.dom.findCommonAncestor","paths","minLength","ancestors","output","first","goog.dom.getOwnerDocument","getFrameContentDocument","goog.dom.getFrameContentDocument","contentDocument","contentWindow","getFrameContentWindow","goog.dom.getFrameContentWindow","goog.dom.setTextContent","getOuterHtml","goog.dom.getOuterHtml","cloneNode","findNode","goog.dom.findNode","root","p","findNodes_","findNodes","goog.dom.findNodes","goog.dom.findNodes_","findOne","TAGS_TO_IGNORE_","PREDEFINED_TAG_VALUES_","isFocusableTabIndex","goog.dom.isFocusableTabIndex","hasSpecifiedTabIndex_","isTabIndexFocusable_","setFocusableTabIndex","goog.dom.setFocusableTabIndex","enable","tabIndex","isFocusable","goog.dom.isFocusable","focusable","nativelySupportsFocus_","disabled","hasNonZeroBoundingRect_","goog.dom.hasSpecifiedTabIndex_","attrNode","getAttributeNode","specified","hasAttribute","goog.dom.isTabIndexFocusable_","goog.dom.nativelySupportsFocus_","goog.dom.hasNonZeroBoundingRect_","rect","offsetWidth","getBoundingClientRect","getTextContent","goog.dom.getTextContent","innerText","buf","getTextContent_","getRawTextContent","goog.dom.getRawTextContent","goog.dom.getTextContent_","getNodeTextLength","goog.dom.getNodeTextLength","getNodeTextOffset","goog.dom.getNodeTextOffset","opt_offsetParent","getNodeAtOffset","goog.dom.getNodeAtOffset","offset","opt_result","pos","remainder","goog.dom.isNodeList","getAncestorByTagNameAndClass","goog.dom.getAncestorByTagNameAndClass","opt_maxSearchSteps","getAncestor","getAncestorByClass","goog.dom.getAncestorByClass","goog.dom.getAncestor","matcher","opt_includeNode","steps","getActiveElement","goog.dom.getActiveElement","activeElement","getPixelRatio","goog.dom.getPixelRatio","devicePixelRatio","matchMedia","matchesPixelRatio_","goog.dom.matchesPixelRatio_","pixelRatio","dpiPerDppx","matches","getCanvasContext2D","goog.dom.getCanvasContext2D","canvas","getContext","goog.dom.DomHelper","document_","setDocument","goog.dom.DomHelper.prototype.setDocument","goog.dom.DomHelper.prototype.getDocument","goog.dom.DomHelper.prototype.getElement","goog.dom.DomHelper.prototype.getRequiredElement","goog.dom.DomHelper.prototype.getElementsByTagName","goog.dom.DomHelper.prototype.getElementsByTagNameAndClass","goog.dom.DomHelper.prototype.getElementByTagNameAndClass","goog.dom.DomHelper.prototype.getElementsByClass","goog.dom.DomHelper.prototype.getElementByClass","goog.dom.DomHelper.prototype.getRequiredElementByClass","goog.dom.DomHelper.prototype.getViewportSize","goog.dom.DomHelper.prototype.getDocumentHeight","goog.dom.DomHelper.prototype.createDom","goog.dom.DomHelper.prototype.createElement","goog.dom.DomHelper.prototype.createTextNode","goog.dom.DomHelper.prototype.createTable","goog.dom.DomHelper.prototype.safeHtmlToNode","goog.dom.DomHelper.prototype.isCss1CompatMode","goog.dom.DomHelper.prototype.getWindow","goog.dom.DomHelper.prototype.getDocumentScrollElement","goog.dom.DomHelper.prototype.getDocumentScroll","goog.dom.DomHelper.prototype.getActiveElement","Box","goog.math.Box","top","bottom","boundingBox","goog.math.Box.boundingBox","box","expandToIncludeCoordinate","getWidth","goog.math.Box.prototype.getWidth","getHeight","goog.math.Box.prototype.getHeight","goog.math.Box.prototype.clone","goog.math.Box.prototype.toString","goog.math.Box.prototype.contains","expand","goog.math.Box.prototype.expand","opt_right","opt_bottom","opt_left","expandToInclude","goog.math.Box.prototype.expandToInclude","goog.math.Box.prototype.expandToIncludeCoordinate","coord","goog.math.Box.equals","goog.math.Box.contains","relativePositionX","goog.math.Box.relativePositionX","relativePositionY","goog.math.Box.relativePositionY","goog.math.Box.distance","intersects","goog.math.Box.intersects","intersectsWithPadding","goog.math.Box.intersectsWithPadding","padding","goog.math.Box.prototype.ceil","goog.math.Box.prototype.floor","goog.math.Box.prototype.round","goog.math.Box.prototype.translate","goog.math.Box.prototype.scale","IRect","goog.math.IRect","Rect","goog.math.Rect","w","h","goog.math.Rect.prototype.clone","toBox","goog.math.Rect.prototype.toBox","createFromPositionAndSize","goog.math.Rect.createFromPositionAndSize","size","createFromBox","goog.math.Rect.createFromBox","goog.math.Rect.prototype.toString","goog.math.Rect.equals","intersection","goog.math.Rect.prototype.intersection","x0","y0","goog.math.Rect.intersection","goog.math.Rect.intersects","goog.math.Rect.prototype.intersects","goog.math.Rect.difference","ar","ab","br","bb","goog.math.Rect.prototype.difference","boundingRect","goog.math.Rect.prototype.boundingRect","goog.math.Rect.boundingRect","newRect","goog.math.Rect.prototype.contains","another","goog.math.Rect.prototype.squaredDistance","point","goog.math.Rect.prototype.distance","getSize","goog.math.Rect.prototype.getSize","getTopLeft","goog.math.Rect.prototype.getTopLeft","getCenter","goog.math.Rect.prototype.getCenter","getBottomRight","goog.math.Rect.prototype.getBottomRight","goog.math.Rect.prototype.ceil","goog.math.Rect.prototype.floor","goog.math.Rect.prototype.round","goog.math.Rect.prototype.translate","goog.math.Rect.prototype.scale","goog.debug.entryPointRegistry","EntryPointMonitor","goog.debug.EntryPointMonitor","entryPointRegistry","refList_","monitors_","monitorsMayExist_","register","goog.debug.entryPointRegistry.register","monitors","wrap","monitorAll","goog.debug.entryPointRegistry.monitorAll","monitor","transformer","unmonitorAllIfPossible","goog.debug.entryPointRegistry.unmonitorAllIfPossible","goog.debug.errorcontext","errorcontext","addErrorContext","goog.debug.errorcontext.addErrorContext","contextKey","contextValue","CONTEXT_KEY_","getErrorContext","goog.debug.errorcontext.getErrorContext","catchErrors","goog.debug.catchErrors","logFunc","opt_cancel","oldErrorHandler","onerror","target.onerror","line","opt_col","opt_error","fileName","lineNumber","col","error","expose","goog.debug.expose","opt_showFn","deepExpose","goog.debug.deepExpose","uidsToCleanup","ancestorUids","helper","space","nestspace","uid","exposeArray","goog.debug.exposeArray","normalizeErrorObject","goog.debug.normalizeErrorObject","threwError","filename","sourceURL","enhanceError","goog.debug.enhanceError","getStacktrace","enhanceErrorWithContext","goog.debug.enhanceErrorWithContext","opt_context","getStacktraceSimple","goog.debug.getStacktraceSimple","opt_depth","FORCE_SLOPPY_STACKS","getNativeStackTrace_","depth","getFunctionName","MAX_STACK_DEPTH","goog.debug.getNativeStackTrace_","tempErr","goog.debug.getStacktrace","getStacktraceHelper_","goog.debug.getStacktraceHelper_","visited","argDesc","setFunctionResolver","goog.debug.setFunctionResolver","resolver","fnNameResolver_","goog.debug.getFunctionName","fnNameCache_","functionSource","method","makeWhitespaceVisible","goog.debug.makeWhitespaceVisible","runtimeType","goog.debug.runtimeType","freezeInternal_","goog.debug.freeze","goog.events","purify","valueOf","events","HAS_W3C_BUTTON","HAS_W3C_EVENT_SUPPORT","SET_KEY_CODE_TO_PREVENT_DEFAULT","HAS_NAVIGATOR_ONLINE_PROPERTY","HAS_HTML5_NETWORK_EVENT_SUPPORT","HTML5_NETWORK_EVENTS_FIRE_ON_BODY","TOUCH_ENABLED","POINTER_EVENTS","MSPOINTER_EVENTS","PASSIVE_EVENTS","addEventListener","defineProperty","passive","options","removeEventListener","goog.disposable","disposable","IDisposable","goog.disposable.IDisposable","dispose","isDisposed","Disposable","goog.Disposable","MONITORING_MODE","MonitoringMode","OFF","INCLUDE_STACK_ON_CREATION","creationStack","instances_","disposed_","onDisposeCallbacks_","PERMANENT","INTERACTIVE","getUndisposedObjects","goog.Disposable.getUndisposedObjects","clearUndisposedObjects","goog.Disposable.clearUndisposedObjects","goog.Disposable.prototype.isDisposed","getDisposed","goog.Disposable.prototype.dispose","disposeInternal","registerDisposable","goog.Disposable.prototype.registerDisposable","addOnDisposeCallback","goog.Disposable.prototype.addOnDisposeCallback","opt_scope","goog.Disposable.prototype.disposeInternal","goog.Disposable.isDisposed","goog.dispose","disposeAll","goog.disposeAll","EventId","goog.events.EventId","eventId","goog.events.EventId.prototype.toString","Event","goog.events.Event","currentTarget","defaultPrevented","propagationStopped_","returnValue_","stopPropagation","goog.events.Event.prototype.stopPropagation","preventDefault","goog.events.Event.prototype.preventDefault","goog.events.Event.stopPropagation","goog.events.Event.preventDefault","getVendorPrefixedName_","goog.events.getVendorPrefixedName_","eventName","EventType","CLICK","RIGHTCLICK","DBLCLICK","MOUSEDOWN","MOUSEUP","MOUSEOVER","MOUSEOUT","MOUSEMOVE","MOUSEENTER","MOUSELEAVE","MOUSECANCEL","SELECTIONCHANGE","SELECTSTART","WHEEL","KEYPRESS","KEYDOWN","KEYUP","BLUR","FOCUS","DEACTIVATE","FOCUSIN","FOCUSOUT","CHANGE","RESET","SUBMIT","PROPERTYCHANGE","DRAGSTART","DRAG","DRAGENTER","DRAGOVER","DRAGLEAVE","DROP","DRAGEND","TOUCHSTART","TOUCHMOVE","TOUCHEND","TOUCHCANCEL","BEFOREUNLOAD","CONSOLEMESSAGE","CONTEXTMENU","DEVICECHANGE","DEVICEMOTION","DEVICEORIENTATION","DOMCONTENTLOADED","ERROR","HELP","LOAD","LOSECAPTURE","ORIENTATIONCHANGE","READYSTATECHANGE","RESIZE","SCROLL","UNLOAD","CANPLAY","CANPLAYTHROUGH","DURATIONCHANGE","EMPTIED","ENDED","LOADEDDATA","LOADEDMETADATA","PAUSE","PLAY","PLAYING","RATECHANGE","SEEKED","SEEKING","STALLED","SUSPEND","TIMEUPDATE","VOLUMECHANGE","WAITING","SOURCEOPEN","SOURCEENDED","SOURCECLOSED","ABORT","UPDATE","UPDATESTART","UPDATEEND","HASHCHANGE","PAGEHIDE","PAGESHOW","POPSTATE","COPY","PASTE","CUT","BEFORECOPY","BEFORECUT","BEFOREPASTE","ONLINE","OFFLINE","MESSAGE","CONNECT","INSTALL","ACTIVATE","FETCH","FOREIGNFETCH","MESSAGEERROR","STATECHANGE","UPDATEFOUND","CONTROLLERCHANGE","ANIMATIONSTART","ANIMATIONEND","ANIMATIONITERATION","TRANSITIONEND","POINTERDOWN","POINTERUP","POINTERCANCEL","POINTERMOVE","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","GOTPOINTERCAPTURE","LOSTPOINTERCAPTURE","MSGESTURECHANGE","MSGESTUREEND","MSGESTUREHOLD","MSGESTURESTART","MSGESTURETAP","MSGOTPOINTERCAPTURE","MSINERTIASTART","MSLOSTPOINTERCAPTURE","MSPOINTERCANCEL","MSPOINTERDOWN","MSPOINTERENTER","MSPOINTERHOVER","MSPOINTERLEAVE","MSPOINTERMOVE","MSPOINTEROUT","MSPOINTEROVER","MSPOINTERUP","TEXTINPUT","COMPOSITIONSTART","COMPOSITIONUPDATE","COMPOSITIONEND","BEFOREINPUT","EXIT","LOADABORT","LOADCOMMIT","LOADREDIRECT","LOADSTART","LOADSTOP","RESPONSIVE","SIZECHANGED","UNRESPONSIVE","VISIBILITYCHANGE","STORAGE","DOMSUBTREEMODIFIED","DOMNODEINSERTED","DOMNODEREMOVED","DOMNODEREMOVEDFROMDOCUMENT","DOMNODEINSERTEDINTODOCUMENT","DOMATTRMODIFIED","DOMCHARACTERDATAMODIFIED","BEFOREPRINT","AFTERPRINT","BEFOREINSTALLPROMPT","APPINSTALLED","getPointerFallbackEventName_","goog.events.getPointerFallbackEventName_","pointerEventName","msPointerEventName","mouseEventName","PointerFallbackEventType","PointerAsMouseEventType","BrowserEvent","goog.events.BrowserEvent","opt_e","opt_currentTarget","goog.events.BrowserEvent.base","relatedTarget","screenY","screenX","clientY","clientX","offsetY","offsetX","charCode","keyCode","metaKey","shiftKey","altKey","ctrlKey","state","platformModifierKey","pointerId","pointerType","event_","init","MouseButton","MIDDLE","PointerType","MOUSE","PEN","TOUCH","IEButtonMap","IE_BUTTON_MAP","IE_POINTER_TYPE_MAP","goog.events.BrowserEvent.prototype.init","relevantTouch","changedTouches","srcElement","fromElement","toElement","layerX","layerY","pageX","pageY","getPointerType_","isButton","goog.events.BrowserEvent.prototype.isButton","isMouseActionButton","goog.events.BrowserEvent.prototype.isMouseActionButton","goog.events.BrowserEvent.prototype.stopPropagation","cancelBubble","goog.events.BrowserEvent.prototype.preventDefault","be","returnValue","VK_F1","VK_F12","getBrowserEvent","goog.events.BrowserEvent.prototype.getBrowserEvent","goog.events.BrowserEvent.getPointerType_","Listenable","goog.events.Listenable","IMPLEMENTED_BY_PROP","addImplementation","goog.events.Listenable.addImplementation","isImplementedBy","goog.events.Listenable.isImplementedBy","ListenableKey","goog.events.ListenableKey","counter_","reserveKey","goog.events.ListenableKey.reserveKey","Listener","goog.events.Listener","listener","proxy","capture","opt_handler","ENABLE_MONITORING","handler","removed","callOnce","markAsRemoved","goog.events.Listener.prototype.markAsRemoved","ListenerMap","goog.events.ListenerMap","listeners","typeCount_","getTypeCount","goog.events.ListenerMap.prototype.getTypeCount","getListenerCount","goog.events.ListenerMap.prototype.getListenerCount","goog.events.ListenerMap.prototype.add","opt_useCapture","opt_listenerScope","typeStr","listenerArray","findListenerIndex_","listenerObj","goog.events.ListenerMap.prototype.remove","removeByKey","goog.events.ListenerMap.prototype.removeByKey","goog.events.ListenerMap.prototype.removeAll","opt_type","getListeners","goog.events.ListenerMap.prototype.getListeners","getListener","goog.events.ListenerMap.prototype.getListener","hasListener","goog.events.ListenerMap.prototype.hasListener","opt_capture","hasType","hasCapture","goog.events.ListenerMap.findListenerIndex_","LISTENER_MAP_PROP_","onString_","onStringMap_","CaptureSimulationMode","OFF_AND_FAIL","OFF_AND_SILENT","ON","listenerCountEstimate_","listen","goog.events.listen","opt_options","once","listenOnce","wrapListener","listen_","goog.events.listen_","CAPTURE_SIMULATION_MODE","listenerMap","getListenerMap_","getProxy","getOnString_","addListener","removeListener","goog.events.getProxy","proxyCallbackFunction","handleBrowserEvent_","eventObject","goog.events.listenOnce","listenWithWrapper","goog.events.listenWithWrapper","wrapper","opt_capt","unlisten","goog.events.unlisten","unlistenByKey","goog.events.unlistenByKey","detachEvent","unlistenWithWrapper","goog.events.unlistenWithWrapper","goog.events.removeAll","removeAllListeners","goog.events.getListeners","goog.events.getListener","goog.events.hasListener","goog.events.expose","goog.events.getOnString_","fireListeners","goog.events.fireListeners","fireListeners_","goog.events.fireListeners_","retval","fireListener","goog.events.fireListener","listenerFn","listenerHandler","getTotalListenerCount","goog.events.getTotalListenerCount","dispatchEvent","goog.events.dispatchEvent","protectBrowserEventEntryPoint","goog.events.protectBrowserEventEntryPoint","protectEntryPoint","goog.events.handleBrowserEvent_","opt_evt","ieEvent","evt","isMarkedIeEvent_","markIeEvent_","goog.events.markIeEvent_","useReturnValue","goog.events.isMarkedIeEvent_","uniqueIdCounter_","getUniqueId","goog.events.getUniqueId","identifier","goog.events.getListenerMap_","LISTENER_WRAPPER_PROP_","goog.events.wrapListener","handleEvent","EventHandler","goog.events.EventHandler","handler_","keys_","typeArray_","goog.events.EventHandler.prototype.listen","opt_fn","self","listenWithScope","goog.events.EventHandler.prototype.listenWithScope","goog.events.EventHandler.prototype.listen_","goog.events.EventHandler.prototype.listenOnce","listenOnce_","listenOnceWithScope","goog.events.EventHandler.prototype.listenOnceWithScope","goog.events.EventHandler.prototype.listenOnce_","goog.events.EventHandler.prototype.listenWithWrapper","listenWithWrapper_","listenWithWrapperAndScope","goog.events.EventHandler.prototype.listenWithWrapperAndScope","goog.events.EventHandler.prototype.listenWithWrapper_","goog.events.EventHandler.prototype.getListenerCount","goog.events.EventHandler.prototype.unlisten","goog.events.EventHandler.prototype.unlistenWithWrapper","goog.events.EventHandler.prototype.removeAll","goog.events.EventHandler.prototype.disposeInternal","goog.events.EventHandler.prototype.handleEvent","EventTarget","goog.events.EventTarget","eventTargetListeners_","actualEventTarget_","parentEventTarget_","MAX_ANCESTORS_","getParentEventTarget","goog.events.EventTarget.prototype.getParentEventTarget","setParentEventTarget","goog.events.EventTarget.prototype.setParentEventTarget","goog.events.EventTarget.prototype.addEventListener","opt_handlerScope","goog.events.EventTarget.prototype.removeEventListener","goog.events.EventTarget.prototype.dispatchEvent","assertInitialized_","ancestor","ancestorsTree","ancestorCount","dispatchEventInternal_","goog.events.EventTarget.prototype.disposeInternal","goog.events.EventTarget.prototype.listen","goog.events.EventTarget.prototype.listenOnce","goog.events.EventTarget.prototype.unlisten","goog.events.EventTarget.prototype.unlistenByKey","goog.events.EventTarget.prototype.removeAllListeners","goog.events.EventTarget.prototype.fireListeners","goog.events.EventTarget.prototype.getListeners","goog.events.EventTarget.prototype.getListener","goog.events.EventTarget.prototype.hasListener","setTargetForTesting","goog.events.EventTarget.prototype.setTargetForTesting","goog.events.EventTarget.prototype.assertInitialized_","goog.events.EventTarget.dispatchEventInternal_","opt_ancestorsTree","oldEvent","goog.dom.vendor","vendor","getVendorJsPrefix","goog.dom.vendor.getVendorJsPrefix","getVendorPrefix","goog.dom.vendor.getVendorPrefix","getPrefixedPropertyName","goog.dom.vendor.getPrefixedPropertyName","propertyName","prefixedPropertyName","getPrefixedEventType","goog.dom.vendor.getPrefixedEventType","eventType","goog.style","goog.style.setStyle","opt_value","setStyle_","goog.style.setStyle_","getVendorJsStyleName_","styleNameCache_","goog.style.getVendorJsStyleName_","camelStyle","prefixedStyle","getVendorStyleName_","goog.style.getVendorStyleName_","getStyle","goog.style.getStyle","property","styleValue","getComputedStyle","goog.style.getComputedStyle","styles","getPropertyValue","getCascadedStyle","goog.style.getCascadedStyle","currentStyle","getStyle_","goog.style.getStyle_","getComputedBoxSizing","goog.style.getComputedBoxSizing","getComputedPosition","goog.style.getComputedPosition","getBackgroundColor","goog.style.getBackgroundColor","getComputedOverflowX","goog.style.getComputedOverflowX","getComputedOverflowY","goog.style.getComputedOverflowY","getComputedZIndex","goog.style.getComputedZIndex","getComputedTextAlign","goog.style.getComputedTextAlign","getComputedCursor","goog.style.getComputedCursor","getComputedTransform","goog.style.getComputedTransform","setPosition","goog.style.setPosition","arg1","opt_arg2","getPixelStyleValue_","getPosition","goog.style.getPosition","offsetLeft","offsetTop","getClientViewportElement","goog.style.getClientViewportElement","opt_node","getViewportPageOffset","goog.style.getViewportPageOffset","getBoundingClientRect_","goog.style.getBoundingClientRect_","clientLeft","clientTop","getOffsetParent","goog.style.getOffsetParent","offsetParent","positionStyle","skipStatic","host","scrollWidth","getVisibleRectForElement","goog.style.getVisibleRectForElement","visibleRect","scrollEl","getPageOffset","client","getClientLeftTop","scrollX","scrollY","winSize","getContainerOffsetToScrollInto","goog.style.getContainerOffsetToScrollInto","opt_container","container","elementPos","containerPos","containerBorder","getBorderBox","relX","relY","elementSize","getSizeWithDisplay_","spaceX","spaceY","scrollIntoContainerView","goog.style.scrollIntoContainerView","goog.style.getClientLeftTop","goog.style.getPageOffset","viewportElement","scrollCoord","getPageOffsetLeft","goog.style.getPageOffsetLeft","getPageOffsetTop","goog.style.getPageOffsetTop","getFramedPageOffset","goog.style.getFramedPageOffset","relativeWin","currentWin","currentEl","getClientPositionForElement_","frameElement","translateRectForAnotherFrame","goog.style.translateRectForAnotherFrame","origBase","newBase","getRelativePosition","goog.style.getRelativePosition","ap","getClientPosition","bp","goog.style.getClientPositionForElement_","goog.style.getClientPosition","targetEvent","setPageOffset","goog.style.setPageOffset","setSize","goog.style.setSize","opt_h","setWidth","setHeight","goog.style.getPixelStyleValue_","goog.style.setHeight","goog.style.setWidth","goog.style.getSize","evaluateWithTemporaryDisplay_","goog.style.evaluateWithTemporaryDisplay_","originalDisplay","display","originalVisibility","visibility","originalPosition","goog.style.getSizeWithDisplay_","webkitOffsetsZero","clientRect","getTransformedSize","goog.style.getTransformedSize","getBounds","goog.style.getBounds","goog.style.toCamelCase","goog.style.toSelectorCase","getOpacity","goog.style.getOpacity","opacity","MozOpacity","setOpacity","goog.style.setOpacity","alpha","setTransparentBackgroundImage","goog.style.setTransparentBackgroundImage","backgroundImage","backgroundPosition","backgroundRepeat","clearTransparentBackgroundImage","goog.style.clearTransparentBackgroundImage","showElement","goog.style.showElement","setElementShown","goog.style.setElementShown","isShown","isElementShown","goog.style.isElementShown","installSafeStyleSheet","goog.style.installSafeStyleSheet","dh","createStyleSheet","setSafeStyleSheet","uninstallStyles","goog.style.uninstallStyles","ownerNode","owningElement","goog.style.setSafeStyleSheet","stylesString","setPreWrap","goog.style.setPreWrap","whiteSpace","wordWrap","setInlineBlock","goog.style.setInlineBlock","zoom","isRightToLeft","goog.style.isRightToLeft","unselectableStyle_","isUnselectable","goog.style.isUnselectable","setUnselectable","goog.style.setUnselectable","unselectable","opt_noRecurse","descendants","getBorderBoxSize","goog.style.getBorderBoxSize","setBorderBoxSize","goog.style.setBorderBoxSize","setBoxSizingSize_","paddingBox","getPaddingBox","borderBox","pixelWidth","pixelHeight","getContentBoxSize","goog.style.getContentBoxSize","ieCurrentStyle","boxSizing","getIePixelValue_","borderBoxSize","setContentBoxSize","goog.style.setContentBoxSize","goog.style.setBoxSizingSize_","MozBoxSizing","WebkitBoxSizing","goog.style.getIePixelValue_","pixelName","oldStyleValue","oldRuntimeValue","runtimeStyle","pixelValue","getIePixelDistance_","goog.style.getIePixelDistance_","propName","getBox_","goog.style.getBox_","stylePrefix","goog.style.getPaddingBox","getMarginBox","goog.style.getMarginBox","ieBorderWidthKeywords_","getIePixelBorder_","goog.style.getIePixelBorder_","goog.style.getBorderBox","getFontFamily","goog.style.getFontFamily","font","createTextRange","moveToElementText","queryCommandValue","fontsArray","lengthUnitRegex_","getLengthUnits","goog.style.getLengthUnits","units","ABSOLUTE_CSS_LENGTH_UNITS_","CONVERTIBLE_RELATIVE_CSS_UNITS_","getFontSize","goog.style.getFontSize","fontSize","sizeUnits","parentSize","sizeElement","parseStyleAttribute","goog.style.parseStyleAttribute","keyValue","styleName","toStyleAttribute","goog.style.toStyleAttribute","buffer","setFloat","goog.style.setFloat","getFloat","goog.style.getFloat","getScrollbarWidth","goog.style.getScrollbarWidth","opt_className","outerDiv","innerDiv","MATRIX_TRANSLATION_REGEX_","getCssTranslation","goog.style.getCssTranslation","goog.userAgent.platform","goog.userAgent.platform.determineVersion_","goog.userAgent.platform.isVersion","goog.userAgent.product","product","PRODUCT_KNOWN_","ASSUME_FIREFOX","ASSUME_CHROME","ASSUME_SAFARI","FIREFOX","isIphoneOrIpod_","goog.userAgent.product.isIphoneOrIpod_","CHROME","isSafariDesktop_","goog.userAgent.product.isSafariDesktop_","goog.userAgent.product.determineVersion_","getFirstRegExpGroup_","execRegExp_","goog.userAgent.product.getFirstRegExpGroup_","goog.userAgent.product.execRegExp_","goog.userAgent.product.isVersion","goog.style.bidi","getScrollLeft","goog.style.bidi.getScrollLeft","isRtl","usesNegativeScrollLeftInRtl_","overflowX","getOffsetStart","goog.style.bidi.getOffsetStart","offsetLeftForReal","bestParent","borderWidths","setScrollOffset","goog.style.bidi.setScrollOffset","offsetStart","goog.style.bidi.usesNegativeScrollLeftInRtl_","isSafari10Plus","isIOS10Plus","goog.style.bidi.setPosition","goog.fx","fx","Dragger","goog.fx.Dragger","opt_handle","opt_limits","goog.fx.Dragger.base","handle","limits","eventHandler_","deltaY","deltaX","startY","startX","enabled_","dragging_","preventMouseDown_","hysteresisDistanceSquared_","useRightPositioningForRtl_","ieDragStartCancellingOn_","startDrag","useSetCapture_","HAS_SET_CAPTURE_","setCapture","releaseCapture","goog.fx.Dragger.cloneNode","sourceEl","clonedEl","origTexts","dragTexts","EARLY_CANCEL","START","BEFOREDRAG","END","setAllowSetCapture","goog.fx.Dragger.prototype.setAllowSetCapture","allow","enableRightPositioningForRtl","goog.fx.Dragger.prototype.enableRightPositioningForRtl","useRightPositioningForRtl","getHandler","goog.fx.Dragger.prototype.getHandler","setLimits","goog.fx.Dragger.prototype.setLimits","setHysteresis","goog.fx.Dragger.prototype.setHysteresis","getHysteresis","goog.fx.Dragger.prototype.getHysteresis","setScrollTarget","goog.fx.Dragger.prototype.setScrollTarget","scrollTarget","scrollTarget_","setCancelIeDragStart","goog.fx.Dragger.prototype.setCancelIeDragStart","cancelIeDragStart","getEnabled","goog.fx.Dragger.prototype.getEnabled","setEnabled","goog.fx.Dragger.prototype.setEnabled","enabled","setPreventMouseDown","goog.fx.Dragger.prototype.setPreventMouseDown","preventMouseDown","goog.fx.Dragger.prototype.disposeInternal","cleanUpAfterDragging_","isRightToLeft_","goog.fx.Dragger.prototype.isRightToLeft_","rightToLeft_","goog.fx.Dragger.prototype.startDrag","isMouseDown","fireDragStart_","setupDragHandlers","computeInitialPosition","pageScroll","goog.fx.Dragger.prototype.setupDragHandlers","useCapture","handleMove_","endDrag","onScroll_","goog.fx.Dragger.prototype.fireDragStart_","DragEvent","goog.fx.Dragger.prototype.cleanUpAfterDragging_","goog.fx.Dragger.prototype.endDrag","opt_dragCanceled","limitX","limitY","endDragCancel","goog.fx.Dragger.prototype.endDragCancel","goog.fx.Dragger.prototype.handleMove_","diffX","diffY","calculatePosition_","doDrag","goog.fx.Dragger.prototype.calculatePosition_","goog.fx.Dragger.prototype.onScroll_","goog.fx.Dragger.prototype.doDrag","dragFromScroll","defaultAction","goog.fx.Dragger.prototype.limitX","maxX","minX","goog.fx.Dragger.prototype.limitY","maxY","minY","goog.fx.Dragger.prototype.computeInitialPosition","goog.fx.Dragger.prototype.defaultAction","isDragging","goog.fx.Dragger.prototype.isDragging","goog.fx.DragEvent","dragobj","browserEvent","opt_actX","opt_actY","dragger","dragCanceled","annotorious","getOffset","annotorious.dom.getOffset","_x","_y","isInViewport","annotorious.dom.isInViewport","innerHeight","innerWidth","addOnLoadHandler","annotorious.dom.addOnLoadHandler","makeHResizable","annotorious.dom.makeHResizable","opt_callback","div_border","width_limit","dragger.defaultAction","toAbsoluteURL","annotorious.dom.toAbsoluteURL","protocol","pathname","annotorious.events","EventBroker","annotorious.events.EventBroker","_handlers","addHandler","annotorious.events.EventBroker.prototype.addHandler","removeHandler","annotorious.events.EventBroker.prototype.removeHandler","handlers","fireEvent","annotorious.events.EventBroker.prototype.fireEvent","opt_event","opt_extra","cancelEvent","idx","MOUSE_OVER_ANNOTATABLE_ITEM","MOUSE_OUT_OF_ANNOTATABLE_ITEM","MOUSE_OVER_ANNOTATION","MOUSE_OUT_OF_ANNOTATION","SELECTION_STARTED","SELECTION_CANCELED","SELECTION_COMPLETED","SELECTION_CHANGED","BEFORE_EDITOR_SHOWN","EDITOR_SHOWN","POPUP_SHOWN","BEFORE_POPUP_HIDE","BEFORE_ANNOTATION_REMOVED","ANNOTATION_REMOVED","ANNOTATION_CREATED","ANNOTATION_UPDATED","ANNOTATION_CLICKED","goog.functions","functions","constant","goog.functions.constant","FALSE","TRUE","NULL","identity","goog.functions.identity","opt_returnValue","goog.functions.error","goog.functions.fail","lock","goog.functions.lock","opt_numArgs","nth","goog.functions.nth","partialRight","goog.functions.partialRight","rightArgs","withReturnValue","goog.functions.withReturnValue","sequence","equalTo","goog.functions.equalTo","opt_useLooseComparison","compose","goog.functions.compose","goog.functions.sequence","and","goog.functions.and","or","goog.functions.or","not","goog.functions.not","goog.functions.create","temp","cacheReturnValue","goog.functions.cacheReturnValue","called","CACHE_RETURN_VALUE","goog.functions.once","inner","debounce","goog.functions.debounce","interval","timeout","clearTimeout","throttle","goog.functions.throttle","shouldFire","handleTimeout","fire","rateLimit","goog.functions.rateLimit","goog.iter","iter","StopIteration","Iterator","goog.iter.Iterator","next","goog.iter.Iterator.prototype.next","__iterator__","goog.iter.Iterator.prototype.__iterator__","opt_keys","toIterator","goog.iter.toIterator","iterable","newIter","newIter.next","goog.iter.forEach","goog.iter.filter","iterator","filterFalse","goog.iter.filterFalse","goog.iter.range","startOrStop","opt_stop","stop","goog.iter.join","deliminator","goog.iter.map","goog.iter.reduce","goog.iter.some","goog.iter.every","chain","goog.iter.chain","chainFromIterable","goog.iter.chainFromIterable","iter.next","it","dropWhile","goog.iter.dropWhile","dropping","takeWhile","goog.iter.takeWhile","goog.iter.toArray","goog.iter.equals","iterable1","iterable2","pairs","zipLongest","fillValue","nextOrValue","goog.iter.nextOrValue","goog.iter.product","someArrayEmpty","arrays","indicies","valueIndex","arrayIndex","cycle","goog.iter.cycle","baseIterator","cacheIndex","useCache","returnElement","goog.iter.count","opt_start","counter","goog.iter.repeat","accumulate","goog.iter.accumulate","total","goog.iter.zip","iterators","goog.iter.zipLongest","iteratorsHaveValues","compress","goog.iter.compress","selectors","selectorIterator","GroupByIterator_","goog.iter.GroupByIterator_","opt_keyFunc","goog.iter.GroupByIterator_.prototype.next","currentKey","targetKey","currentValue","groupItems_","goog.iter.GroupByIterator_.prototype.groupItems_","groupBy","goog.iter.groupBy","starMap","goog.iter.starMap","tee","goog.iter.tee","opt_num","buffers","addNextIteratorValueToBuffers","createIterator","enumerate","goog.iter.enumerate","goog.iter.limit","limitSize","remaining","consume","goog.iter.consume","goog.iter.slice","hasDuplicates_","goog.iter.hasDuplicates_","deduped","permutations","goog.iter.permutations","opt_length","sets","combinations","goog.iter.combinations","getIndexFromElements","indexes","indexIterator","sortedIndexIterator","combinationsWithReplacement","goog.iter.combinationsWithReplacement","goog.structs","structs","Map","goog.structs.Map","opt_map","map_","version_","count_","addAll","goog.structs.Map.prototype.getCount","goog.structs.Map.prototype.getValues","cleanupKeysArray_","goog.structs.Map.prototype.getKeys","goog.structs.Map.prototype.containsKey","hasKey_","goog.structs.Map.prototype.containsValue","goog.structs.Map.prototype.equals","otherMap","opt_equalityFn","equalityFn","defaultEquals","goog.structs.Map.defaultEquals","goog.structs.Map.prototype.isEmpty","goog.structs.Map.prototype.clear","goog.structs.Map.prototype.remove","goog.structs.Map.prototype.cleanupKeysArray_","srcIndex","destIndex","goog.structs.Map.prototype.get","goog.structs.Map.prototype.set","goog.structs.Map.prototype.addAll","goog.structs.Map.prototype.forEach","goog.structs.Map.prototype.clone","goog.structs.Map.prototype.transpose","goog.structs.Map.prototype.toObject","getKeyIterator","goog.structs.Map.prototype.getKeyIterator","getValueIterator","goog.structs.Map.prototype.getValueIterator","goog.structs.Map.prototype.__iterator__","goog.structs.Map.hasKey_","crypto","msCrypto","module.exports","bytes","getRandomValues","Uint8Array","annotorious.shape","annotorious.shape.geom","shape","geom","Point","annotorious.shape.geom.Point","Polygon","annotorious.shape.geom.Polygon","points","computeArea","annotorious.shape.geom.Polygon.computeArea","isClockwise","annotorious.shape.geom.Polygon.isClockwise","computeCentroid","annotorious.shape.geom.Polygon.computeCentroid","_expandTriangle","annotorious.shape.geom.Polygon._expandTriangle","delta","shiftAlongAxis","px","centroid","sign_delta","expanded","expandPolygon","annotorious.shape.geom.Polygon.expandPolygon","prev","expTriangle","Rectangle","annotorious.shape.geom.Rectangle","nanoid","Shape","annotorious.shape.Shape","geometry","ShapeType","POINT","RECTANGLE","POLYGON","Units","PIXEL","FRACTION","annotorious.shape.intersects","py","annotorious.shape.getSize","getBoundingRect","annotorious.shape.getBoundingRect","getCentroid","annotorious.shape.getCentroid","annotorious.shape.expand","annotorious.shape.transform","transformationFn","transformed","transformedPoints","pt","annotorious.shape.hashCode","uuid","Annotation","annotorious.Annotation","shapes","annotorious.mediatypes","mediatypes","Module","annotorious.mediatypes.Module","_initFields","annotorious.mediatypes.Module.prototype._initFields","opt_preload_fn","_annotators","_eventHandlers","_plugins","_itemsToLoad","_bufferedForAdding","_bufferedForRemoval","_cachedGlobalSettings","hide_selection_widget","hide_annotations","_cachedItemSettings","_cachedProperties","_preLoad","_getSettings","annotorious.mediatypes.Module.prototype._getSettings","item_url","settings","_initAnnotator","annotorious.mediatypes.Module.prototype._initAnnotator","item_src","getItemURL","annotator","newAnnotator","addedAnnotations","removedAnnotations","eventHandler","plugin","_initPlugin","annotation","addAnnotation","removeAnnotation","hideSelectionWidget","hideAnnotations","annotorious.mediatypes.Module.prototype._initPlugin","onInitAnnotator","_lazyLoad","annotorious.mediatypes.Module.prototype._lazyLoad","_setAnnotationVisibility","annotorious.mediatypes.Module.prototype._setAnnotationVisibility","opt_item_url","showAnnotations","_setSelectionWidgetVisibility","annotorious.mediatypes.Module.prototype._setSelectionWidgetVisibility","showSelectionWidget","activateSelector","annotorious.mediatypes.Module.prototype.activateSelector","opt_item_url_or_callback","stopSelection","annotorious.mediatypes.Module.prototype.stopSelection","annotorious.mediatypes.Module.prototype.addAnnotation","annotatesItem","annotorious.mediatypes.Module.prototype.addHandler","annotorious.mediatypes.Module.prototype.removeHandler","addPlugin","annotorious.mediatypes.Module.prototype.addPlugin","annotorious.mediatypes.Module.prototype.annotatesItem","destroy","annotorious.mediatypes.Module.prototype.destroy","getActiveSelector","annotorious.mediatypes.Module.prototype.getActiveSelector","getName","getAnnotations","annotorious.mediatypes.Module.prototype.getAnnotations","annotations","getAvailableSelectors","annotorious.mediatypes.Module.prototype.getAvailableSelectors","annotorious.mediatypes.Module.prototype.hideAnnotations","annotorious.mediatypes.Module.prototype.hideSelectionWidget","highlightAnnotation","annotorious.mediatypes.Module.prototype.highlightAnnotation","annotorious.mediatypes.Module.prototype.init","makeAnnotatable","annotorious.mediatypes.Module.prototype.makeAnnotatable","supports","annotorious.mediatypes.Module.prototype.removeAnnotation","setActiveSelector","annotorious.mediatypes.Module.prototype.setActiveSelector","setCurrentSelector","annotorious.mediatypes.Module.prototype.setProperties","props","annotorious.mediatypes.Module.prototype.showAnnotations","annotorious.mediatypes.Module.prototype.showSelectionWidget","goog.dom.classes","classes","goog.dom.classes.set","goog.dom.classes.get","goog.dom.classes.add","expectedCount","add_","goog.dom.classes.remove","newClasses","getDifference_","goog.dom.classes.add_","goog.dom.classes.getDifference_","swap","goog.dom.classes.swap","fromClass","toClass","addRemove","goog.dom.classes.addRemove","classesToRemove","classesToAdd","has","goog.dom.classes.has","goog.dom.classes.enable","toggle","goog.dom.classes.toggle","goog.html.legacyconversions","legacyconversions","safeHtmlFromString","goog.html.legacyconversions.safeHtmlFromString","reportCallback_","safeScriptFromString","goog.html.legacyconversions.safeScriptFromString","safeStyleFromString","goog.html.legacyconversions.safeStyleFromString","safeStyleSheetFromString","goog.html.legacyconversions.safeStyleSheetFromString","safeUrlFromString","goog.html.legacyconversions.safeUrlFromString","trustedResourceUrlFromString","goog.html.legacyconversions.trustedResourceUrlFromString","setReportCallback","goog.html.legacyconversions.setReportCallback","goog.structs.getCount","goog.structs.getValues","goog.structs.getKeys","goog.structs.contains","goog.structs.isEmpty","goog.structs.clear","goog.structs.forEach","goog.structs.filter","goog.structs.map","goog.structs.some","goog.structs.every","goog.uri","goog.uri.utils","uri","utils","CharCode_","AMPERSAND","EQUAL","HASH","QUESTION","buildFromEncodedParts","goog.uri.utils.buildFromEncodedParts","opt_scheme","opt_userInfo","opt_domain","opt_port","opt_path","opt_queryData","opt_fragment","out","splitRe_","ComponentIndex","SCHEME","USER_INFO","DOMAIN","PORT","PATH","QUERY_DATA","FRAGMENT","goog.uri.utils.split","decodeIfPossible_","goog.uri.utils.decodeIfPossible_","opt_preserveReserved","decodeURI","getComponentByIndex_","goog.uri.utils.getComponentByIndex_","componentIndex","getScheme","goog.uri.utils.getScheme","getEffectiveScheme","goog.uri.utils.getEffectiveScheme","scheme","location","getUserInfoEncoded","goog.uri.utils.getUserInfoEncoded","getUserInfo","goog.uri.utils.getUserInfo","getDomainEncoded","goog.uri.utils.getDomainEncoded","getDomain","goog.uri.utils.getDomain","getPort","goog.uri.utils.getPort","getPathEncoded","goog.uri.utils.getPathEncoded","getPath","goog.uri.utils.getPath","getQueryData","goog.uri.utils.getQueryData","getFragmentEncoded","goog.uri.utils.getFragmentEncoded","hashIndex","setFragmentEncoded","goog.uri.utils.setFragmentEncoded","removeFragment","getFragment","goog.uri.utils.getFragment","getHost","goog.uri.utils.getHost","pieces","getOrigin","goog.uri.utils.getOrigin","getPathAndAfter","goog.uri.utils.getPathAndAfter","goog.uri.utils.removeFragment","haveSameDomain","goog.uri.utils.haveSameDomain","uri1","uri2","pieces1","pieces2","assertNoFragmentsOrQueries_","goog.uri.utils.assertNoFragmentsOrQueries_","parseQueryData","goog.uri.utils.parseQueryData","encodedQuery","indexOfEquals","splitQueryData_","goog.uri.utils.splitQueryData_","questionIndex","queryData","joinQueryData_","goog.uri.utils.joinQueryData_","appendQueryData_","goog.uri.utils.appendQueryData_","newData","appendQueryDataToUri_","goog.uri.utils.appendQueryDataToUri_","appendKeyValuePairs_","goog.uri.utils.appendKeyValuePairs_","buildQueryData","goog.uri.utils.buildQueryData","keysAndValues","opt_startIndex","buildQueryDataFromMap","goog.uri.utils.buildQueryDataFromMap","appendParams","goog.uri.utils.appendParams","appendParamsFromMap","goog.uri.utils.appendParamsFromMap","appendParam","goog.uri.utils.appendParam","findParam_","goog.uri.utils.findParam_","keyEncoded","hashOrEndIndex","keyLength","precedingChar","followingChar","hashOrEndRe_","hasParam","goog.uri.utils.hasParam","getParamValue","goog.uri.utils.getParamValue","foundIndex","endPosition","getParamValues","goog.uri.utils.getParamValues","trailingQueryPunctuationRe_","removeParam","goog.uri.utils.removeParam","setParam","goog.uri.utils.setParam","setParamsFromMap","goog.uri.utils.setParamsFromMap","appendPath","goog.uri.utils.appendPath","baseUri","setPath","goog.uri.utils.setPath","StandardQueryParam","RANDOM","makeUnique","goog.uri.utils.makeUnique","Uri","goog.Uri","opt_uri","opt_ignoreCase","domain_","userInfo_","scheme_","port_","fragment_","path_","ignoreCase_","isReadOnly_","m","getIgnoreCase","setScheme","setUserInfo","setDomain","setPort","setQueryData","setFragment","queryData_","QueryData","RANDOM_PARAM","goog.Uri.prototype.toString","encodeSpecialChars_","reDisallowedInSchemeOrUserInfo_","domain","userInfo","removeDoubleEncoding_","port","hasDomain","reDisallowedInAbsolutePath_","reDisallowedInRelativePath_","query","getEncodedQuery","reDisallowedInFragment_","goog.Uri.prototype.resolve","relativeUri","absoluteUri","overridden","hasScheme","hasUserInfo","hasPort","hasPath","lastSlashIndex","removeDotSegments","hasQuery","hasFragment","goog.Uri.prototype.clone","goog.Uri.prototype.getScheme","goog.Uri.prototype.setScheme","newScheme","opt_decode","enforceReadOnly","decodeOrEmpty_","goog.Uri.prototype.hasScheme","goog.Uri.prototype.getUserInfo","goog.Uri.prototype.setUserInfo","newUserInfo","goog.Uri.prototype.hasUserInfo","goog.Uri.prototype.getDomain","goog.Uri.prototype.setDomain","newDomain","goog.Uri.prototype.hasDomain","goog.Uri.prototype.getPort","goog.Uri.prototype.setPort","newPort","goog.Uri.prototype.hasPort","goog.Uri.prototype.getPath","goog.Uri.prototype.setPath","newPath","goog.Uri.prototype.hasPath","goog.Uri.prototype.hasQuery","goog.Uri.prototype.setQueryData","setIgnoreCase","reDisallowedInQuery_","setQuery","goog.Uri.prototype.setQuery","newQuery","goog.Uri.prototype.getEncodedQuery","getDecodedQuery","goog.Uri.prototype.getDecodedQuery","toDecodedString","goog.Uri.prototype.getQueryData","getQuery","goog.Uri.prototype.getQuery","setParameterValue","goog.Uri.prototype.setParameterValue","setParameterValues","goog.Uri.prototype.setParameterValues","setValues","getParameterValues","goog.Uri.prototype.getParameterValues","getParameterValue","goog.Uri.prototype.getParameterValue","paramName","goog.Uri.prototype.getFragment","goog.Uri.prototype.setFragment","newFragment","goog.Uri.prototype.hasFragment","hasSameDomainAs","goog.Uri.prototype.hasSameDomainAs","goog.Uri.prototype.makeUnique","removeParameter","goog.Uri.prototype.removeParameter","setReadOnly","goog.Uri.prototype.setReadOnly","isReadOnly","goog.Uri.prototype.isReadOnly","goog.Uri.prototype.enforceReadOnly","goog.Uri.prototype.setIgnoreCase","ignoreCase","goog.Uri.prototype.getIgnoreCase","parse","goog.Uri.parse","goog.Uri.create","opt_query","goog.Uri.resolve","goog.Uri.removeDotSegments","leadingSlash","segments","segment","goog.Uri.decodeOrEmpty_","goog.Uri.encodeSpecialChars_","unescapedPart","extra","opt_removeDoubleEncoding","encoded","encodeURI","encodeChar_","goog.Uri.encodeChar_","goog.Uri.removeDoubleEncoding_","doubleEncodedString","goog.Uri.haveSameDomain","uri1String","uri2String","goog.Uri.QueryData","keyMap_","encodedQuery_","ensureKeyMapInitialized_","goog.Uri.QueryData.prototype.ensureKeyMapInitialized_","createFromMap","goog.Uri.QueryData.createFromMap","createFromKeysValues","goog.Uri.QueryData.createFromKeysValues","goog.Uri.QueryData.prototype.getCount","goog.Uri.QueryData.prototype.add","invalidateCache_","getKeyName_","goog.Uri.QueryData.prototype.remove","goog.Uri.QueryData.prototype.clear","goog.Uri.QueryData.prototype.isEmpty","goog.Uri.QueryData.prototype.containsKey","goog.Uri.QueryData.prototype.containsValue","vals","goog.Uri.QueryData.prototype.forEach","goog.Uri.QueryData.prototype.getKeys","goog.Uri.QueryData.prototype.getValues","opt_key","goog.Uri.QueryData.prototype.set","goog.Uri.QueryData.prototype.get","opt_default","goog.Uri.QueryData.prototype.setValues","goog.Uri.QueryData.prototype.toString","encodedKey","param","goog.Uri.QueryData.prototype.toDecodedString","goog.Uri.QueryData.prototype.invalidateCache_","filterKeys","goog.Uri.QueryData.prototype.filterKeys","goog.Uri.QueryData.prototype.clone","goog.Uri.QueryData.prototype.getKeyName_","keyName","goog.Uri.QueryData.prototype.setIgnoreCase","lowerCase","goog.Uri.QueryData.prototype.extend","goog.soy","goog.soy.data","soy","SanitizedContentKind","sanitizedContentKindHtml","JS","sanitizedContentJsChars","URI","sanitizedContentUri","TRUSTED_RESOURCE_URI","sanitizedContentTrustedResourceUri","ATTRIBUTES","sanitizedContentHtmlAttribute","sanitizedContentStyle","CSS","sanitizedContentCss","sanitizedContentKindText","SanitizedContent","goog.soy.data.SanitizedContent","contentDir","getContent","goog.soy.data.SanitizedContent.prototype.getContent","goog.soy.data.SanitizedContent.prototype.toString","toSafeHtml","goog.soy.data.SanitizedContent.prototype.toSafeHtml","contentKind","toSafeUrl","goog.soy.data.SanitizedContent.prototype.toSafeUrl","UnsanitizedText","goog.soy.data.UnsanitizedText","opt_contentDir","SanitizedHtml","goog.soy.data.SanitizedHtml","goog.soy.data.SanitizedHtml.base","isCompatibleWith","goog.soy.data.SanitizedHtml.isCompatibleWith","SanitizedJs","goog.soy.data.SanitizedJs","goog.soy.data.SanitizedJs.base","goog.soy.data.SanitizedJs.isCompatibleWith","SanitizedUri","goog.soy.data.SanitizedUri","goog.soy.data.SanitizedUri.base","goog.soy.data.SanitizedUri.isCompatibleWith","SanitizedTrustedResourceUri","goog.soy.data.SanitizedTrustedResourceUri","goog.soy.data.SanitizedTrustedResourceUri.base","toTrustedResourceUrl","goog.soy.data.SanitizedTrustedResourceUri.prototype.toTrustedResourceUrl","goog.soy.data.SanitizedTrustedResourceUri.isCompatibleWith","SanitizedHtmlAttribute","goog.soy.data.SanitizedHtmlAttribute","goog.soy.data.SanitizedHtmlAttribute.base","goog.soy.data.SanitizedHtmlAttribute.isCompatibleWith","SanitizedStyle","goog.soy.data.SanitizedStyle","goog.soy.data.SanitizedStyle.base","goog.soy.data.SanitizedStyle.isCompatibleWith","SanitizedCss","goog.soy.data.SanitizedCss","goog.soy.data.SanitizedCss.base","goog.soy.data.SanitizedCss.isCompatibleWith","toSafeStyleSheet","goog.soy.data.SanitizedCss.prototype.toSafeStyleSheet","renderHtml","goog.soy.renderHtml","templateResult","ensureTemplateOutputHtml_","renderElement","goog.soy.renderElement","template","opt_templateData","opt_injectedData","defaultTemplateData_","renderAsFragment","goog.soy.renderAsFragment","opt_domHelper","assertFirstTagValid_","renderAsElement","goog.soy.renderAsElement","convertToElement_","convertToElement","goog.soy.convertToElement","goog.soy.convertToElement_","goog.soy.ensureTemplateOutputHtml_","REQUIRE_STRICT_AUTOESCAPE","ContentKind","goog.soy.assertFirstTagValid_","INVALID_TAG_TO_RENDER_","goog.html.sanitizer","sanitizer","AttributeWhitelist","AttributeSanitizedWhitelist","goog.html.CssSpecificity","specificityCache","getSpecificity","userAgentProduct","specificity","calculateSpecificity","replaceWithEmptyText","regex","typeIndex","replaceWithPlainText","escapeHexadecimalRegex","escapeHexadecimalRegex2","escapeSpecialCharacter","pseudoClassWithNotRegex","rulesRegex","attributeRegex","idRegex","classRegex","pseudoElementRegex","pseudoClassWithBracketsRegex","pseudoClassRegex","elementRegex","goog.html.sanitizer.noclobber","getterOrNull","descriptor","getOwnPropertyDescriptor","prototypeMethodOrNull","Methods","ATTRIBUTES_GETTER","HAS_ATTRIBUTE","GET_ATTRIBUTE","SET_ATTRIBUTE","REMOVE_ATTRIBUTE","INNER_HTML_GETTER","GET_ELEMENTS_BY_TAG_NAME","MATCHES","NODE_NAME_GETTER","NODE_TYPE_GETTER","PARENT_NODE_GETTER","CHILD_NODES_GETTER","APPEND_CHILD","STYLE_GETTER","SHEET_GETTER","GET_PROPERTY_VALUE","SET_PROPERTY","genericPropertyGet","fallbackPropertyName","fallbackTest","propertyValue","genericMethodCall","fallbackMethodName","getElementAttributes","NamedNodeMap","hasElementAttribute","attrName","getElementAttribute","setElementAttribute","removeElementAttribute","getElementInnerHTML","getElementStyle","assertHTMLElement","CSSStyleDeclaration","googAsserts","HTMLElement","getElementStyleSheet","sheet","CSSStyleSheet","elementMatches","assertNodeIsElement","isNodeElement","getNodeType","getNodeName","getParentNode","getChildNodes","NodeList","appendNodeChild","getCssPropertyValue","cssStyle","setCssProperty","sanitizedValue","setProperty","goog.html.sanitizer.CssSanitizer","CssSanitizer","NORM_URL_REGEXP_","NORM_URL_REPLACEMENTS_","SELECTOR_REGEX_","normalizeUrlChar_","goog.html.sanitizer.CssSanitizer.normalizeUrlChar_","getSafeUri_","goog.html.sanitizer.CssSanitizer.getSafeUri_","uriRewriter","safeUri","FUNCTION_ARGUMENTS_BEGIN_","FUNCTION_ARGUMENTS_END_","ALLOWED_FUNCTIONS_","withoutVendorPrefix_","goog.html.sanitizer.CssSanitizer.withoutVendorPrefix_","sanitizeProperty_","goog.html.sanitizer.CssSanitizer.sanitizeProperty_","propValue","opt_uriRewriter","outputPropValue","sanitizeStyleSheet_","goog.html.sanitizer.CssSanitizer.sanitizeStyleSheet_","cssStyleSheet","containerId","sanitizedRules","cssRules","getOnlyStyleRules_","cssRule","selectorText","scopedSelector","sanitizeInlineStyle","goog.html.sanitizer.CssSanitizer.getOnlyStyleRules_","CSSStyleRule","CSSRule","STYLE_RULE","sanitizeStyleSheetString","goog.html.sanitizer.CssSanitizer.sanitizeStyleSheetString","opt_containerId","styleTag","safeParseHtmlAndGetInertElement","goog.html.sanitizer.CssSanitizer.safeParseHtmlAndGetInertElement","DOMParser","parseFromString","parser","goog.html.sanitizer.CssSanitizer.sanitizeInlineStyle","cleanCssStyle","cssPropNames","getCssPropNames_","isDisallowedPropertyName_","sanitizeInlineStyleString","goog.html.sanitizer.CssSanitizer.sanitizeInlineStyleString","createInertDocument_","inlineStyleRules","goog.html.sanitizer.CssSanitizer.inlineStyleRules","styleTags","aSpecificity","bSpecificity","subTreeWalker","createTreeWalker","NodeFilter","SHOW_ELEMENT","currentElement","nextNode","rule","mergeStyleDeclarations_","goog.html.sanitizer.CssSanitizer.mergeStyleDeclarations_","styleDeclaration","existingPropNames","newPropNames","goog.html.sanitizer.CssSanitizer.createInertDocument_","HTMLTemplateElement","implementation","createHTMLDocument","goog.html.sanitizer.CssSanitizer.getCssPropNames_","propNames","goog.html.sanitizer.CssSanitizer.isDisallowedPropertyName_","NATIVE_WEAKMAP_SUPPORTED","WeakMap","DATA_ATTRIBUTE_NAME_PREFIX","weakMapCount","ElementWeakMap","values_","dataAttributeName_","ElementWeakMap.prototype.set","elementKey","itemIndex","ElementWeakMap.prototype.get","ElementWeakMap.prototype.clear","newWeakMap","ElementWeakMap.newWeakMap","LogRecord","goog.debug.LogRecord","level","loggerName","opt_time","opt_sequenceNumber","reset","sequenceNumber_","exception_","nextSequenceNumber_","goog.debug.LogRecord.prototype.reset","ENABLE_SEQUENCE_NUMBERS","time_","level_","msg_","loggerName_","getLoggerName","goog.debug.LogRecord.prototype.getLoggerName","getException","goog.debug.LogRecord.prototype.getException","setException","goog.debug.LogRecord.prototype.setException","exception","setLoggerName","goog.debug.LogRecord.prototype.setLoggerName","getLevel","goog.debug.LogRecord.prototype.getLevel","setLevel","goog.debug.LogRecord.prototype.setLevel","getMessage","goog.debug.LogRecord.prototype.getMessage","setMessage","goog.debug.LogRecord.prototype.setMessage","getMillis","goog.debug.LogRecord.prototype.getMillis","setMillis","goog.debug.LogRecord.prototype.setMillis","time","getSequenceNumber","goog.debug.LogRecord.prototype.getSequenceNumber","LogBuffer","goog.debug.LogBuffer","isBufferingEnabled","goog.debug.LogBuffer.getInstance","addRecord","goog.debug.LogBuffer.prototype.addRecord","curIndex","curIndex_","CAPACITY","isFull_","buffer_","goog.debug.LogBuffer.isBufferingEnabled","goog.debug.LogBuffer.prototype.clear","forEachRecord","goog.debug.LogBuffer.prototype.forEachRecord","func","Logger","goog.debug.Logger","name_","handlers_","children_","parent_","ROOT_LOGGER_NAME","ENABLE_HIERARCHY","rootHandlers_","Level","goog.debug.Logger.Level","goog.debug.Logger.Level.prototype.toString","SHOUT","SEVERE","WARNING","INFO","CONFIG","FINE","FINER","FINEST","ALL","PREDEFINED_LEVELS","predefinedLevelsCache_","createPredefinedLevelsCache_","goog.debug.Logger.Level.createPredefinedLevelsCache_","getPredefinedLevel","goog.debug.Logger.Level.getPredefinedLevel","getPredefinedLevelByValue","goog.debug.Logger.Level.getPredefinedLevelByValue","getLogger","goog.debug.Logger.getLogger","LogManager","logToProfilers","goog.debug.Logger.logToProfilers","ENABLE_PROFILER_LOGGING","msWriteProfilerMark","goog.debug.Logger.prototype.getName","goog.debug.Logger.prototype.addHandler","LOGGING_ENABLED","goog.debug.Logger.prototype.removeHandler","getParent","goog.debug.Logger.prototype.getParent","goog.debug.Logger.prototype.getChildren","goog.debug.Logger.prototype.setLevel","rootLevel_","goog.debug.Logger.prototype.getLevel","getEffectiveLevel","goog.debug.Logger.prototype.getEffectiveLevel","isLoggable","goog.debug.Logger.prototype.isLoggable","goog.debug.Logger.prototype.log","opt_exception","doLogRecord_","getLogRecord","goog.debug.Logger.prototype.getLogRecord","logRecord","shout","goog.debug.Logger.prototype.shout","severe","goog.debug.Logger.prototype.severe","warning","goog.debug.Logger.prototype.warning","goog.debug.Logger.prototype.info","config","goog.debug.Logger.prototype.config","fine","goog.debug.Logger.prototype.fine","finer","goog.debug.Logger.prototype.finer","finest","goog.debug.Logger.prototype.finest","goog.debug.Logger.prototype.logRecord","goog.debug.Logger.prototype.doLogRecord_","callPublish_","goog.debug.Logger.prototype.callPublish_","setParent_","goog.debug.Logger.prototype.setParent_","addChild_","goog.debug.Logger.prototype.addChild_","logger","loggers_","rootLogger_","initialize","goog.debug.LogManager.initialize","getLoggers","goog.debug.LogManager.getLoggers","getRoot","goog.debug.LogManager.getRoot","goog.debug.LogManager.getLogger","createLogger_","createFunctionForCatchErrors","goog.debug.LogManager.createFunctionForCatchErrors","opt_logger","goog.debug.LogManager.createLogger_","lastDotIndex","parentName","leafName","parentLogger","goog.log","goog.log.getLogger","opt_level","ENABLED","goog.log.addHandler","goog.log.removeHandler","goog.log.log","goog.log.error","goog.log.warning","goog.log.info","goog.log.fine","googLog","SAFE_PARSING_SUPPORTED","getDomTreeWalker","templateElement","iteratorParent","SHOW_TEXT","SafeDomTreeProcessor","processToString","SafeDomTreeProcessor.prototype.processToString","newTree","processToTree","newRoot","googDom","serializedNewTree","serializeToString","XMLSerializer","SafeDomTreeProcessor.prototype.processToTree","processRoot","preProcessHtml","originalTreeWalker","elementMap","originalNode","createNode_","originalParent","isParentRoot","originalParentNodeType","originalParentNodeName","originalGrandParent","dirtyGreatGrandParent","newParent","SafeDomTreeProcessor.prototype.processRoot","SafeDomTreeProcessor.prototype.preProcessHtml","SafeDomTreeProcessor.prototype.createNode_","SafeDomTreeProcessor.prototype.createTextNode","SafeDomTreeProcessor.prototype.createElement_","originalElement","newElement","createElementWithoutAttributes","processElementAttributes_","SafeDomTreeProcessor.prototype.createElementWithoutAttributes","SafeDomTreeProcessor.prototype.processElementAttributes_","attribute","newValue","processElementAttribute","SafeDomTreeProcessor.prototype.processElementAttribute","TagBlacklist","TagWhitelist","HTML_SANITIZER_TEMPLATE_SUPPORTED","HTML_SANITIZER_BOOKKEEPING_PREFIX_","HTML_SANITIZER_SANITIZED_ATTR_NAME_","RANDOM_CONTAINER_","HtmlSanitizer","goog.html.sanitizer.HtmlSanitizer","opt_builder","builder","Builder","installPolicies_","attributeHandlers_","attributeWhitelist_","tagBlacklist_","tagWhitelist_","shouldAddOriginalTagNames_","dataAttributeWhitelist_","dataAttr","cleanUpAttribute_","networkRequestUrlPolicy_","styleContainerId_","currentStyleContainerId_","inlineStyleRules_","wrapUrlPolicy_","goog.html.sanitizer.HtmlSanitizer.wrapUrlPolicy_","urlPolicy","policyHints","trimmed","goog.html.sanitizer.HtmlSanitizer.Builder","wl","attributeOverrideList_","urlPolicy_","defaultUrlPolicy_","defaultNetworkRequestUrlPolicy_","namePolicy_","defaultNamePolicy_","tokenPolicy_","defaultTokenPolicy_","sanitizeInlineCssPolicy_","policiesInstalled_","allowDataAttributes","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.allowDataAttributes","dataAttributeWhitelist","allowFormTag","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.allowFormTag","allowStyleTag","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.allowStyleTag","withStyleContainer","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.withStyleContainer","opt_styleContainer","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.inlineStyleRules","allowCssStyles","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.allowCssStyles","sanitizeCssDeclarationList_","alsoAllowTagsPrivateDoNotAccessOrElse","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.alsoAllowTagsPrivateDoNotAccessOrElse","alsoAllowAttributesPrivateDoNotAccessOrElse","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.alsoAllowAttributesPrivateDoNotAccessOrElse","attrs","attributeName","policy","handlerName","attrIdentifier_","onlyAllowTags","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.onlyAllowTags","tagWhitelist","onlyAllowAttributes","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.onlyAllowAttributes","attrWhitelist","oldWhitelist","addOriginalTagNames","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.addOriginalTagNames","withCustomNetworkRequestUrlPolicy","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.withCustomNetworkRequestUrlPolicy","customNetworkReqUrlPolicy","withCustomUrlPolicy","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.withCustomUrlPolicy","customUrlPolicy","withCustomNamePolicy","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.withCustomNamePolicy","customNamePolicy","withCustomTokenPolicy","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.withCustomTokenPolicy","customTokenPolicy","wrapPolicy_","goog.html.sanitizer.HtmlSanitizer.wrapPolicy_","customPolicy","defaultPolicy","hints","ctx","installDefaultPolicy_","goog.html.sanitizer.HtmlSanitizer.installDefaultPolicy_","whitelist","overrideList","build","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.build","goog.html.sanitizer.HtmlSanitizer.Builder.prototype.installPolicies_","installPolicy","sanitizeUrlFragment_","urlAttributes","networkRequestUrlPolicy","networkUrlAttributes","nameAttributes","sanitizeName_","allowedAttributeValues_","sanitizeClasses_","sanitizeId_","goog.html.sanitizer.HtmlSanitizer.attrIdentifier_","goog.html.sanitizer.HtmlSanitizer.sanitizeCssDeclarationList_","policySanitizeUrl","attrValue","policyContext","sanitizedStyle","naiveUriRewriter","cssProperty","sanitizedUrl","goog.html.sanitizer.HtmlSanitizer.cleanUpAttribute_","goog.html.sanitizer.HtmlSanitizer.allowedAttributeValues_","allowedValues","goog.html.sanitizer.HtmlSanitizer.sanitizeUrlFragment_","urlFragment","goog.html.sanitizer.HtmlSanitizer.sanitizeName_","namePolicy","goog.html.sanitizer.HtmlSanitizer.sanitizeClasses_","tokenPolicy","sanitizedClasses","sanitizedClass","goog.html.sanitizer.HtmlSanitizer.sanitizeId_","getContext_","goog.html.sanitizer.HtmlSanitizer.getContext_","dirtyElement","goog.html.sanitizer.HtmlSanitizer.prototype.sanitize","unsanitizedHtml","getStyleContainerId_","sanitizedString","sanitizeToDomNode","goog.html.sanitizer.HtmlSanitizer.prototype.sanitizeToDomNode","goog.html.sanitizer.HtmlSanitizer.prototype.processRoot","goog.html.sanitizer.HtmlSanitizer.prototype.preProcessHtml","inertUnsanitizedDom","goog.html.sanitizer.HtmlSanitizer.prototype.getStyleContainerId_","randomStyleContainmentNecessary","goog.html.sanitizer.HtmlSanitizer.prototype.createTextNode","dirtyNode","dirtyParent","goog.html.sanitizer.HtmlSanitizer.prototype.createElementWithoutAttributes","dirtyName","spanElement","goog.html.sanitizer.HtmlSanitizer.prototype.processElementAttribute","elementName","unsanitizedAttrValue","tagHandlerIndex","genericHandlerIndex","goog.html.sanitizer.HtmlSanitizer.sanitize","goog.dom.classlist","classlist","goog.dom.classlist.get","ALWAYS_USE_DOM_TOKEN_LIST","classList","goog.dom.classlist.set","goog.dom.classlist.contains","goog.dom.classlist.add","goog.dom.classlist.addAll","classMap","goog.dom.classlist.remove","goog.dom.classlist.removeAll","goog.dom.classlist.enable","enableAll","goog.dom.classlist.enableAll","classesToEnable","goog.dom.classlist.swap","goog.dom.classlist.toggle","goog.dom.classlist.addRemove","classToRemove","classToAdd","KeyCodes","WIN_KEY_FF_LINUX","MAC_ENTER","BACKSPACE","TAB","NUM_CENTER","ENTER","SHIFT","CTRL","ALT","CAPS_LOCK","ESC","SPACE","PAGE_UP","PAGE_DOWN","HOME","UP","DOWN","PLUS_SIGN","PRINT_SCREEN","INSERT","DELETE","ZERO","ONE","TWO","THREE","FOUR","FIVE","SIX","SEVEN","EIGHT","NINE","FF_SEMICOLON","FF_EQUALS","FF_DASH","QUESTION_MARK","AT_SIGN","C","D","E","F","G","H","J","K","L","M","N","O","R","T","V","W","X","Y","Z","WIN_KEY_RIGHT","CONTEXT_MENU","NUM_ZERO","NUM_ONE","NUM_TWO","NUM_THREE","NUM_FOUR","NUM_FIVE","NUM_SIX","NUM_SEVEN","NUM_EIGHT","NUM_NINE","NUM_MULTIPLY","NUM_PLUS","NUM_MINUS","NUM_PERIOD","NUM_DIVISION","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","NUMLOCK","SCROLL_LOCK","FIRST_MEDIA_KEY","LAST_MEDIA_KEY","SEMICOLON","DASH","EQUALS","COMMA","PERIOD","SLASH","APOSTROPHE","TILDE","SINGLE_QUOTE","OPEN_SQUARE_BRACKET","BACKSLASH","CLOSE_SQUARE_BRACKET","WIN_KEY","MAC_FF_META","MAC_WK_CMD_LEFT","MAC_WK_CMD_RIGHT","WIN_IME","VK_NONAME","PHANTOM","isTextModifyingKeyEvent","goog.events.KeyCodes.isTextModifyingKeyEvent","firesKeyPressEvent","goog.events.KeyCodes.firesKeyPressEvent","opt_heldKeyCode","opt_shiftKey","opt_ctrlKey","opt_altKey","opt_metaKey","isCharacterKey","normalizeKeyCode","heldKeyIsModifier","modifiedShiftKey","goog.events.KeyCodes.isCharacterKey","goog.events.KeyCodes.normalizeKeyCode","normalizeGeckoKeyCode","normalizeMacWebKitKeyCode","goog.events.KeyCodes.normalizeGeckoKeyCode","goog.events.KeyCodes.normalizeMacWebKitKeyCode","KeyHandler","goog.events.KeyHandler","attach","element_","keyPressKey_","keyDownKey_","keyUpKey_","lastKey_","keyCode_","altKey_","KEY","safariKey_","keyIdentifier_","USES_KEYDOWN_","SAVE_ALT_FOR_KEYPRESS_","handleKeyDown_","goog.events.KeyHandler.prototype.handleKeyDown_","resetState","goog.events.KeyHandler.prototype.resetState","handleKeyup_","goog.events.KeyHandler.prototype.handleKeyup_","goog.events.KeyHandler.prototype.handleEvent","keyIdentifier","KeyEvent","goog.events.KeyHandler.prototype.getElement","goog.events.KeyHandler.prototype.attach","detach","goog.events.KeyHandler.prototype.detach","goog.events.KeyHandler.prototype.disposeInternal","goog.events.KeyEvent","goog.ui","ui","IdGenerator","goog.ui.IdGenerator","nextId_","getNextUniqueId","goog.ui.IdGenerator.prototype.getNextUniqueId","Component","goog.ui.Component","dom_","defaultRightToLeft_","id_","inDocument_","googUiComponentHandler_","childIndex_","model_","pointerEventsEnabled_","wasDecorated_","idGenerator_","DEFAULT_BIDI_DIR","BEFORE_SHOW","SHOW","HIDE","DISABLE","ENABLE","HIGHLIGHT","UNHIGHLIGHT","UNSELECT","CHECK","UNCHECK","OPEN","CLOSE","LEAVE","ACTION","NOT_SUPPORTED","DECORATE_INVALID","ALREADY_RENDERED","PARENT_UNABLE_TO_BE_SET","CHILD_INDEX_OUT_OF_BOUNDS","NOT_OUR_CHILD","NOT_IN_DOCUMENT","STATE_INVALID","State","DISABLED","HOVER","ACTIVE","SELECTED","CHECKED","FOCUSED","OPENED","getStateTransitionEvent","goog.ui.Component.getStateTransitionEvent","isEntering","setDefaultRightToLeft","goog.ui.Component.setDefaultRightToLeft","rightToLeft","getId","goog.ui.Component.prototype.getId","setId","goog.ui.Component.prototype.setId","goog.ui.Component.prototype.getElement","getElementStrict","goog.ui.Component.prototype.getElementStrict","setElementInternal","goog.ui.Component.prototype.setElementInternal","goog.ui.Component.prototype.getElementsByClass","goog.ui.Component.prototype.getElementByClass","goog.ui.Component.prototype.getRequiredElementByClass","goog.ui.Component.prototype.getHandler","setParent","goog.ui.Component.prototype.setParent","getChild","goog.ui.Component.prototype.getParent","goog.ui.Component.prototype.setParentEventTarget","goog.ui.Component.prototype.getDomHelper","isInDocument","goog.ui.Component.prototype.isInDocument","goog.ui.Component.prototype.createDom","render","goog.ui.Component.prototype.render","opt_parentElement","render_","renderBefore","goog.ui.Component.prototype.renderBefore","goog.ui.Component.prototype.render_","opt_beforeNode","enterDocument","decorate","goog.ui.Component.prototype.decorate","canDecorate","decorateInternal","ALLOW_DETACHED_DECORATION","goog.ui.Component.prototype.canDecorate","wasDecorated","goog.ui.Component.prototype.wasDecorated","goog.ui.Component.prototype.decorateInternal","goog.ui.Component.prototype.enterDocument","forEachChild","exitDocument","goog.ui.Component.prototype.exitDocument","goog.ui.Component.prototype.disposeInternal","makeId","goog.ui.Component.prototype.makeId","idFragment","makeIds","goog.ui.Component.prototype.makeIds","ids","getModel","goog.ui.Component.prototype.getModel","setModel","goog.ui.Component.prototype.setModel","getFragmentFromId","goog.ui.Component.prototype.getFragmentFromId","getElementByFragment","goog.ui.Component.prototype.getElementByFragment","addChild","goog.ui.Component.prototype.addChild","opt_render","addChildAt","getChildCount","goog.ui.Component.prototype.addChildAt","contentElement","getContentElement","insertBeforeElement","getChildAt","goog.ui.Component.prototype.getContentElement","goog.ui.Component.prototype.isRightToLeft","setRightToLeft","goog.ui.Component.prototype.setRightToLeft","hasChildren","goog.ui.Component.prototype.hasChildren","goog.ui.Component.prototype.getChildCount","getChildIds","goog.ui.Component.prototype.getChildIds","goog.ui.Component.prototype.getChild","goog.ui.Component.prototype.getChildAt","goog.ui.Component.prototype.forEachChild","indexOfChild","goog.ui.Component.prototype.indexOfChild","goog.ui.Component.prototype.removeChild","opt_unrender","removeChildAt","goog.ui.Component.prototype.removeChildAt","goog.ui.Component.prototype.removeChildren","removedChildren","pointerEventsEnabled","goog.ui.Component.prototype.pointerEventsEnabled","setPointerEventsEnabled","goog.ui.Component.prototype.setPointerEventsEnabled","goog.ui.ComponentUtil","ComponentUtil","getMouseEventType","goog.ui.ComponentUtil.getMouseEventType","component","goog.a11y","goog.a11y.aria","a11y","aria","Role","ALERT","ALERTDIALOG","APPLICATION","BANNER","CHECKBOX","COLUMNHEADER","COMBOBOX","COMPLEMENTARY","CONTENTINFO","DEFINITION","DIRECTORY","GRID","GRIDCELL","GROUP","HEADING","LIST","LISTBOX","LISTITEM","LOG","MARQUEE","MENUBAR","MENU_ITEM","MENU_ITEM_CHECKBOX","MENU_ITEM_RADIO","NAVIGATION","NOTE","PRESENTATION","PROGRESSBAR","RADIO","RADIOGROUP","REGION","ROW","ROWGROUP","ROWHEADER","SCROLLBAR","SEARCH","SEPARATOR","SLIDER","SPINBUTTON","STATUS","TAB_LIST","TAB_PANEL","TEXTBOX","TEXTINFO","TIMER","TOOLBAR","TOOLTIP","TREE","TREEGRID","TREEITEM","ACTIVEDESCENDANT","ATOMIC","AUTOCOMPLETE","BUSY","COLINDEX","CONTROLS","DESCRIBEDBY","DROPEFFECT","EXPANDED","FLOWTO","GRABBED","HASPOPUP","HIDDEN","INVALID","LABELLEDBY","LEVEL","LIVE","MULTILINE","MULTISELECTABLE","ORIENTATION","OWNS","POSINSET","PRESSED","READONLY","RELEVANT","REQUIRED","ROWINDEX","SETSIZE","SORT","VALUEMAX","VALUEMIN","VALUENOW","VALUETEXT","AutoCompleteValues","INLINE","BOTH","NONE","DropEffectValues","MOVE","EXECUTE","POPUP","LivePriority","POLITE","ASSERTIVE","OrientationValues","VERTICAL","HORIZONTAL","RelevantValues","ADDITIONS","REMOVALS","SortValues","ASCENDING","DESCENDING","OTHER","CheckedValues","MIXED","UNDEFINED","ExpandedValues","GrabbedValues","InvalidValues","GRAMMAR","SPELLING","PressedValues","SelectedValues","goog.a11y.aria.datatables","datatables","getDefaultValuesMap","goog.a11y.aria.datatables.getDefaultValuesMap","DefaultStateValueMap_","ARIA_PREFIX_","ROLE_ATTRIBUTE_","TAGS_WITH_ASSUMED_ROLES_","CONTAINER_ROLES_","setRole","goog.a11y.aria.setRole","roleName","removeRole","getRole","goog.a11y.aria.getRole","role","goog.a11y.aria.removeRole","setState","goog.a11y.aria.setState","stateName","attrStateName","getAriaAttributeName_","defaultValueMap","toggleState","goog.a11y.aria.toggleState","getState","removeState","goog.a11y.aria.removeState","goog.a11y.aria.getState","getActiveDescendant","goog.a11y.aria.getActiveDescendant","setActiveDescendant","goog.a11y.aria.setActiveDescendant","getLabel","goog.a11y.aria.getLabel","setLabel","goog.a11y.aria.setLabel","label","assertRoleIsSetInternalUtil","goog.a11y.aria.assertRoleIsSetInternalUtil","allowedRoles","elementRole","getStateBoolean","goog.a11y.aria.getStateBoolean","getStateNumber","goog.a11y.aria.getStateNumber","getStateString","goog.a11y.aria.getStateString","getStringArrayStateInternalUtil","goog.a11y.aria.getStringArrayStateInternalUtil","splitStringOnWhitespace_","hasState","goog.a11y.aria.hasState","isContainerRole","goog.a11y.aria.isContainerRole","goog.a11y.aria.splitStringOnWhitespace_","stringValue","goog.a11y.aria.getAriaAttributeName_","ariaName","ControlRenderer","goog.ui.ControlRenderer","getCustomRenderer","goog.ui.ControlRenderer.getCustomRenderer","cssClassName","renderer","getCssClass","renderer.getCssClass","CSS_CLASS","IE6_CLASS_COMBINATIONS","TOGGLE_ARIA_STATE_MAP_","getAriaRole","goog.ui.ControlRenderer.prototype.getAriaRole","goog.ui.ControlRenderer.prototype.createDom","control","getClassNames","goog.ui.ControlRenderer.prototype.getContentElement","enableClassName","goog.ui.ControlRenderer.prototype.enableClassName","classNames","getAppliedCombinedClassNames_","enableExtraClassName","goog.ui.ControlRenderer.prototype.enableExtraClassName","goog.ui.ControlRenderer.prototype.canDecorate","goog.ui.ControlRenderer.prototype.decorate","contentElem","setContentInternal","rendererClassName","structuralClassName","getStructuralCssClass","hasRendererClassName","hasStructuralClassName","hasCombinedClassName","getStateFromClass","setStateInternal","extraClassNames","getExtraClassNames","combinedClasses","initializeDom","goog.ui.ControlRenderer.prototype.initializeDom","isEnabled","setFocusable","isVisible","setAriaRole","goog.ui.ControlRenderer.prototype.setAriaRole","opt_preferredRole","ariaRole","currentRole","setAriaStates","goog.ui.ControlRenderer.prototype.setAriaStates","ariaLabel","getAriaLabel","setAriaLabel","updateAriaState","isSupportedState","isSelected","isChecked","isOpen","goog.ui.ControlRenderer.prototype.setAriaLabel","setAllowTextSelection","goog.ui.ControlRenderer.prototype.setAllowTextSelection","goog.ui.ControlRenderer.prototype.setRightToLeft","goog.ui.ControlRenderer.prototype.isFocusable","keyTarget","getKeyEventTarget","goog.ui.ControlRenderer.prototype.setFocusable","isFocused","blur","handleBlur","setVisible","goog.ui.ControlRenderer.prototype.setVisible","visible","goog.ui.ControlRenderer.prototype.setState","getClassForState","goog.ui.ControlRenderer.prototype.updateAriaState","ariaAttributeMap_","ariaAttr","getAriaStateForAriaRole_","goog.ui.ControlRenderer.getAriaStateForAriaRole_","matchAttr","isAriaState_","goog.ui.ControlRenderer.isAriaState_","setContent","goog.ui.ControlRenderer.prototype.setContent","goog.ui.ControlRenderer.prototype.getKeyEventTarget","goog.ui.ControlRenderer.prototype.getCssClass","getIe6ClassCombinations","goog.ui.ControlRenderer.prototype.getIe6ClassCombinations","goog.ui.ControlRenderer.prototype.getStructuralCssClass","goog.ui.ControlRenderer.prototype.getClassNames","cssClass","structuralCssClass","classNamesForState","getClassNamesForState","goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_","opt_includedClass","toAdd","combo","goog.ui.ControlRenderer.prototype.getClassNamesForState","mask","goog.ui.ControlRenderer.prototype.getClassForState","classByState_","createClassByStateMap_","goog.ui.ControlRenderer.prototype.getStateFromClass","stateByClass_","createStateByClassMap_","goog.ui.ControlRenderer.prototype.createClassByStateMap_","baseClass","isValidClassName","goog.ui.ControlRenderer.prototype.createStateByClassMap_","goog.ui.registry","registry","getDefaultRenderer","goog.ui.registry.getDefaultRenderer","componentCtor","rendererCtor","defaultRenderers_","setDefaultRenderer","goog.ui.registry.setDefaultRenderer","getDecoratorByClassName","goog.ui.registry.getDecoratorByClassName","decoratorFunctions_","setDecoratorByClassName","goog.ui.registry.setDecoratorByClassName","decoratorFn","getDecorator","goog.ui.registry.getDecorator","decorator","goog.ui.registry.reset","Control","goog.ui.Control","opt_renderer","renderer_","ariaLabel_","registerDecorator","content_","state_","supportedStates_","autoStates_","statesWithTransitionEvents_","visible_","extraClassNames_","handleMouseEvents_","allowTextSelection_","preferredAriaRole_","isHandleMouseEvents","goog.ui.Control.prototype.isHandleMouseEvents","setHandleMouseEvents","goog.ui.Control.prototype.setHandleMouseEvents","enableMouseEventHandling_","goog.ui.Control.prototype.getKeyEventTarget","getKeyHandler","goog.ui.Control.prototype.getKeyHandler","keyHandler_","getRenderer","goog.ui.Control.prototype.getRenderer","setRenderer","goog.ui.Control.prototype.setRenderer","goog.ui.Control.prototype.getExtraClassNames","addClassName","goog.ui.Control.prototype.addClassName","removeClassName","goog.ui.Control.prototype.removeClassName","goog.ui.Control.prototype.enableClassName","goog.ui.Control.prototype.createDom","getPreferredAriaRole","isAllowTextSelection","goog.ui.Control.prototype.getPreferredAriaRole","setPreferredAriaRole","goog.ui.Control.prototype.setPreferredAriaRole","goog.ui.Control.prototype.getAriaLabel","goog.ui.Control.prototype.setAriaLabel","goog.ui.Control.prototype.getContentElement","goog.ui.Control.prototype.canDecorate","goog.ui.Control.prototype.decorateInternal","goog.ui.Control.prototype.enterDocument","keyHandler","handleKeyEvent","handleFocus","goog.ui.Control.prototype.enableMouseEventHandling_","MouseEventType","handleMouseOver","handleMouseDown","handleMouseUp","handleMouseOut","preventPointerCapture_","handleContextMenu","handleDblClick","ieMouseEventSequenceSimulator_","IeMouseEventSequenceSimulator_","goog.ui.Control.prototype.exitDocument","goog.ui.Control.prototype.disposeInternal","goog.ui.Control.prototype.getContent","goog.ui.Control.prototype.setContent","goog.ui.Control.prototype.setContentInternal","getCaption","goog.ui.Control.prototype.getCaption","caption","setCaption","goog.ui.Control.prototype.setCaption","goog.ui.Control.prototype.setRightToLeft","goog.ui.Control.prototype.isAllowTextSelection","goog.ui.Control.prototype.setAllowTextSelection","goog.ui.Control.prototype.isVisible","goog.ui.Control.prototype.setVisible","goog.ui.Control.prototype.isEnabled","isParentDisabled_","goog.ui.Control.prototype.isParentDisabled_","goog.ui.Control.prototype.setEnabled","isTransitionAllowed","setActive","setHighlighted","isHighlighted","goog.ui.Control.prototype.isHighlighted","goog.ui.Control.prototype.setHighlighted","highlight","isActive","goog.ui.Control.prototype.isActive","goog.ui.Control.prototype.setActive","active","goog.ui.Control.prototype.isSelected","setSelected","goog.ui.Control.prototype.setSelected","select","goog.ui.Control.prototype.isChecked","setChecked","goog.ui.Control.prototype.setChecked","check","goog.ui.Control.prototype.isFocused","setFocused","goog.ui.Control.prototype.setFocused","focused","goog.ui.Control.prototype.isOpen","setOpen","goog.ui.Control.prototype.setOpen","goog.ui.Control.prototype.getState","goog.ui.Control.prototype.hasState","goog.ui.Control.prototype.setState","opt_calledFrom","goog.ui.Control.prototype.setStateInternal","goog.ui.Control.prototype.isSupportedState","setSupportedState","goog.ui.Control.prototype.setSupportedState","support","isAutoState","goog.ui.Control.prototype.isAutoState","setAutoStates","goog.ui.Control.prototype.setAutoStates","states","isDispatchTransitionEvents","goog.ui.Control.prototype.isDispatchTransitionEvents","setDispatchTransitionEvents","goog.ui.Control.prototype.setDispatchTransitionEvents","goog.ui.Control.prototype.isTransitionAllowed","goog.ui.Control.prototype.handleMouseOver","isMouseEventWithinElement_","goog.ui.Control.prototype.handleMouseOut","goog.ui.Control.prototype.preventPointerCapture_","releasePointerCapture","goog.ui.Control.isMouseEventWithinElement_","goog.ui.Control.prototype.handleMouseDown","focus","goog.ui.Control.prototype.handleMouseUp","performActionInternal","goog.ui.Control.prototype.handleDblClick","goog.ui.Control.prototype.performActionInternal","actionEvent","goog.ui.Control.prototype.handleFocus","goog.ui.Control.prototype.handleBlur","goog.ui.Control.prototype.handleKeyEvent","handleKeyEventInternal","goog.ui.Control.prototype.handleKeyEventInternal","goog.ui.Control.IeMouseEventSequenceSimulator_","goog.ui.Control.IeMouseEventSequenceSimulator_.base","control_","clickExpected_","handleMouseDown_","handleMouseUp_","handleClick_","SYNTHETIC_EVENTS_","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseDown_","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleMouseUp_","makeLeftMouseEvent_","goog.ui.Control.IeMouseEventSequenceSimulator_.makeLeftMouseEvent_","typeArg","createEvent","initMouseEvent","bubbles","cancelable","view","detail","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.handleClick_","origEventButton","origEventType","down","up","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal","goog.ui.Control.IeMouseEventSequenceSimulator_.prototype.disposeInternal.base","TextareaRenderer","goog.ui.TextareaRenderer","goog.ui.TextareaRenderer.prototype.getAriaRole","goog.ui.TextareaRenderer.prototype.decorate","setUpTextarea_","goog.ui.TextareaRenderer.prototype.createDom","textarea","goog.ui.TextareaRenderer.prototype.canDecorate","goog.ui.TextareaRenderer.prototype.isFocusable","goog.ui.TextareaRenderer.prototype.setState","goog.ui.TextareaRenderer.prototype.setUpTextarea_","goog.ui.TextareaRenderer.prototype.setContent","goog.ui.TextareaRenderer.prototype.getCssClass","Textarea","goog.ui.Textarea","hasUserInput_","NEEDS_HELP_SHRINKING_","isResizing_","hasFocusForPlaceholder_","height_","maxHeight_","minHeight_","hasDiscoveredTextareaCharacteristics_","needsPaddingBorderFix_","scrollHeightIncludesPadding_","scrollHeightIncludesBorder_","placeholderText_","setPlaceholder","goog.ui.Textarea.prototype.setPlaceholder","restorePlaceholder_","getPaddingBorderBoxHeight_","goog.ui.Textarea.prototype.getPaddingBorderBoxHeight_","paddingBox_","borderBox_","getMinHeight","goog.ui.Textarea.prototype.getMinHeight","getMinHeight_","goog.ui.Textarea.prototype.getMinHeight_","minHeight","setMinHeight","goog.ui.Textarea.prototype.setMinHeight","resize","getMaxHeight","goog.ui.Textarea.prototype.getMaxHeight","getMaxHeight_","goog.ui.Textarea.prototype.getMaxHeight_","maxHeight","setMaxHeight","goog.ui.Textarea.prototype.setMaxHeight","setValue","goog.ui.Textarea.prototype.setValue","getValue","goog.ui.Textarea.prototype.getValue","supportsNativePlaceholder_","goog.ui.Textarea.prototype.setContent","goog.ui.Textarea.prototype.setEnabled","goog.ui.Textarea.prototype.resize","grow_","goog.ui.Textarea.prototype.supportsNativePlaceholder_","goog.ui.Textarea.prototype.restorePlaceholder_","placeholder","TEXTAREA_PLACEHOLDER_CLASS","goog.ui.Textarea.prototype.enterDocument","goog.ui.Textarea.prototype.enterDocument.base","mouseUpListener_","blur_","getHeight_","goog.ui.Textarea.prototype.getHeight_","discoverTextareaCharacteristics_","getHorizontalScrollBarHeight_","setHeight_","goog.ui.Textarea.prototype.setHeight_","setHeightToEstimate_","goog.ui.Textarea.prototype.setHeightToEstimate_","newlines","goog.ui.Textarea.prototype.getHorizontalScrollBarHeight_","goog.ui.Textarea.prototype.discoverTextareaCharacteristics_","initialScrollHeight","paddingScrollHeight","borderWidth","goog.ui.Textarea.prototype.blur_","goog.ui.Textarea.prototype.grow_","shouldCallShrink","oldHeight","newHeight","currentHeight","overflowY","shrink_","goog.ui.Textarea.prototype.shrink_","paddingBottom","heightAfterNudge","shrinkToHeight","goog.ui.Textarea.prototype.mouseUpListener_","dropShadow","goog.i18n.uChar","uChar","SUPPLEMENTARY_CODE_POINT_MIN_VALUE_","CODE_POINT_MAX_VALUE_","LEAD_SURROGATE_MIN_VALUE_","LEAD_SURROGATE_MAX_VALUE_","TRAIL_SURROGATE_MIN_VALUE_","TRAIL_SURROGATE_MAX_VALUE_","TRAIL_SURROGATE_BIT_COUNT_","toHexString","goog.i18n.uChar.toHexString","chCode","toCharCode","padString_","goog.i18n.uChar.padString_","goog.i18n.uChar.toCharCode","getCodePointAround","goog.i18n.uChar.fromCharCode","isSupplementaryCodePoint","trailCodePoint","goog.i18n.uChar.getCodePointAround","isLeadSurrogateCodePoint","trail","isTrailSurrogateCodePoint","buildSupplementaryCodePoint","lead","codepoint","charCount","goog.i18n.uChar.charCount","codePoint","goog.i18n.uChar.isSupplementaryCodePoint","goog.i18n.uChar.isLeadSurrogateCodePoint","goog.i18n.uChar.isTrailSurrogateCodePoint","goog.i18n.uChar.buildSupplementaryCodePoint","InversionMap","goog.structs.InversionMap","rangeArray","valueArray","opt_delta","storeInversion_","goog.structs.InversionMap.prototype.storeInversion_","spliceInversion","goog.structs.InversionMap.prototype.spliceInversion","startRange","endRange","startSplice","getLeast","endSplice","at","goog.structs.InversionMap.prototype.at","intKey","goog.structs.InversionMap.prototype.getLeast","low","high","mid","goog.i18n.GraphemeBreak","GraphemeBreak","CONTROL","EXTEND","PREPEND","SPACING_MARK","INDIC_LETTER","VIRAMA","LV","LVT","CR","LF","REGIONAL_INDICATOR","ZWJ","E_BASE","GLUE_AFTER_ZWJ","E_MODIFIER","E_BASE_GAZ","inversions_","applyBreakRules_","goog.i18n.GraphemeBreak.applyBreakRules_","extended","aCode","getCodePoint_","bCode","aProp","getBreakProp_","bProp","codePointProp","aStr","numberOfRi","goog.i18n.GraphemeBreak.getBreakProp_","goog.i18n.GraphemeBreak.getCodePoint_","hasGraphemeBreak","goog.i18n.GraphemeBreak.hasGraphemeBreak","opt_extended","hasGraphemeBreakStrings","goog.i18n.GraphemeBreak.hasGraphemeBreakStrings","goog.format","fileSize","goog.format.fileSize","opt_decimals","numBytesToString","isConvertableScaledNumber","goog.format.isConvertableScaledNumber","SCALED_NUMERIC_RE_","stringToNumericValue","goog.format.stringToNumericValue","stringToNumericValue_","NUMERIC_SCALES_BINARY_","NUMERIC_SCALES_SI_","stringToNumBytes","goog.format.stringToNumBytes","numericValueToString","goog.format.numericValueToString","numericValueToString_","goog.format.numBytesToString","opt_suffix","opt_useSeparator","goog.format.stringToNumericValue_","conversion","goog.format.numericValueToString_","prefixes","NUMERIC_SCALE_PREFIXES_","orig_val","unit","FIRST_GRAPHEME_EXTEND_","isTreatedAsBreakingSpace_","goog.format.isTreatedAsBreakingSpace_","WbrToken_","isInvisibleFormattingCharacter_","goog.format.isInvisibleFormattingCharacter_","insertWordBreaksGeneric_","goog.format.insertWordBreaksGeneric_","opt_maxlen","maxlen","nestingCharCode","lastDumpPosition","lastCharCode","isPotentiallyGraphemeExtending","WORD_BREAK_HTML","GT","LT","SEMI_COLON","AMP","insertWordBreaks","goog.format.insertWordBreaks","conservativelyHasGraphemeBreak_","goog.format.conservativelyHasGraphemeBreak_","insertWordBreaksBasic","goog.format.insertWordBreaksBasic","IS_IE8_OR_ABOVE_","BidiFormatter","goog.i18n.BidiFormatter","contextDir","opt_alwaysSpan","contextDir_","alwaysSpan_","getContextDir","goog.i18n.BidiFormatter.prototype.getContextDir","getAlwaysSpan","goog.i18n.BidiFormatter.prototype.getAlwaysSpan","setContextDir","goog.i18n.BidiFormatter.prototype.setContextDir","setAlwaysSpan","goog.i18n.BidiFormatter.prototype.setAlwaysSpan","alwaysSpan","areDirectionalitiesOpposite_","goog.i18n.BidiFormatter.prototype.areDirectionalitiesOpposite_","dir1","dir2","dirResetIfNeeded_","goog.i18n.BidiFormatter.prototype.dirResetIfNeeded_","opt_dirReset","dirAttrValue","goog.i18n.BidiFormatter.prototype.dirAttrValue","knownDirAttrValue","goog.i18n.BidiFormatter.prototype.knownDirAttrValue","resolvedDir","dirAttr","goog.i18n.BidiFormatter.prototype.dirAttr","knownDirAttr","goog.i18n.BidiFormatter.prototype.knownDirAttr","spanWrapSafeHtml","goog.i18n.BidiFormatter.prototype.spanWrapSafeHtml","spanWrapSafeHtmlWithKnownDir","goog.i18n.BidiFormatter.prototype.spanWrapSafeHtmlWithKnownDir","spanWrapWithKnownDir_","goog.i18n.BidiFormatter.prototype.spanWrapWithKnownDir_","dirCondition","unicodeWrap","goog.i18n.BidiFormatter.prototype.unicodeWrap","unicodeWrapWithKnownDir","goog.i18n.BidiFormatter.prototype.unicodeWrapWithKnownDir","unicodeWrapWithKnownDir_","goog.i18n.BidiFormatter.prototype.unicodeWrapWithKnownDir_","markAfter","goog.i18n.BidiFormatter.prototype.markAfter","markAfterKnownDir","goog.i18n.BidiFormatter.prototype.markAfterKnownDir","goog.i18n.BidiFormatter.prototype.mark","startEdge","goog.i18n.BidiFormatter.prototype.startEdge","endEdge","goog.i18n.BidiFormatter.prototype.endEdge","soydata.isContentKind_","soydata.getContentDir","soydata.SanitizedHtml","soydata.SanitizedHtml.base","soydata","soydata.SanitizedHtml.from","VERY_UNSAFE","ordainSanitizedHtml","esc","$$escapeHtmlHelper","getContentDir","$$EMPTY_STRING_","VALUE","$$makeSanitizedContentFactory_","soydata.$$makeSanitizedContentFactory_","InstantiableCtor","sanitizedContentFactory","$$makeSanitizedContentFactoryWithDefaultDirOnly_","soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_","markUnsanitizedText","soydata.markUnsanitizedText","ordainSanitizedJs","ordainSanitizedUri","ordainSanitizedTrustedResourceUri","ordainSanitizedHtmlAttribute","ordainSanitizedStyle","ordainSanitizedCss","$$IS_LOCALE_RTL","$$augmentMap","soy.$$augmentMap","baseMap","additionalMap","$$assignDefaults","soy.$$assignDefaults","defaults","$$checkLegacyObjectMapLiteralKey","soy.$$checkLegacyObjectMapLiteralKey","$$getMapKeys","soy.$$getMapKeys","mapKeys","$$checkNotNull","soy.$$checkNotNull","$$parseInt","soy.$$parseInt","parsed","$$parseFloat","soy.$$parseFloat","$$getDelTemplateId","soy.$$getDelTemplateId","delTemplateName","$$DELEGATE_REGISTRY_PRIORITIES_","$$DELEGATE_REGISTRY_FUNCTIONS_","$$registerDelegateFn","soy.$$registerDelegateFn","delTemplateId","delTemplateVariant","delPriority","delFn","mapKey","currPriority","$$getDelegateFn","soy.$$getDelegateFn","allowsEmptyDefault","$$EMPTY_TEMPLATE_FN_","soy.$$EMPTY_TEMPLATE_FN_","opt_data","opt_ijData","opt_ijData_deprecated","$$makeSanitizedContentFactoryForInternalBlocks_","soydata.$$makeSanitizedContentFactoryForInternalBlocks_","contentString","$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_","soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_","$$markUnsanitizedTextForInternalBlocks","soydata.$$markUnsanitizedTextForInternalBlocks","$$ordainSanitizedHtmlForInternalBlocks","$$ordainSanitizedJsForInternalBlocks","$$ordainSanitizedTrustedResourceUriForInternalBlocks","$$ordainSanitizedUriForInternalBlocks","$$ordainSanitizedAttributesForInternalBlocks","$$ordainSanitizedStyleForInternalBlocks","$$ordainSanitizedCssForInternalBlocks","$$escapeHtml","soy.$$escapeHtml","$$cleanHtml","soy.$$cleanHtml","opt_safeTags","isContentKind_","$$SAFE_TAG_WHITELIST_","$$stripHtmlTags","$$normalizeHtml","soy.$$normalizeHtml","$$normalizeHtmlHelper","$$escapeHtmlRcdata","soy.$$escapeHtmlRcdata","$$HTML5_VOID_ELEMENTS_","soy.$$stripHtmlTags","opt_tagWhitelist","$$HTML_TAG_REGEX_","$$LT_REGEX_","tok","isClose","$$HTML_ATTRIBUTE_REGEX_","lastIndex","finalCloseTags","$$balanceTags_","_","$$embedCssIntoHtml_","soy.$$embedCssIntoHtml_","css","soy.$$balanceTags_","openTagIndex","reverse","$$escapeHtmlAttribute","soy.$$escapeHtmlAttribute","$$escapeHtmlAttributeNospace","soy.$$escapeHtmlAttributeNospace","$$normalizeHtmlNospaceHelper","$$escapeHtmlNospaceHelper","$$filterHtmlAttributes","soy.$$filterHtmlAttributes","$$filterHtmlAttributesHelper","$$filterHtmlElementName","soy.$$filterHtmlElementName","$$filterHtmlElementNameHelper","$$escapeJsString","soy.$$escapeJsString","$$escapeJsStringHelper","$$escapeJsValue","soy.$$escapeJsValue","$$escapeJsRegex","soy.$$escapeJsRegex","$$escapeJsRegexHelper","$$problematicUriMarks_","$$pctEncode_","soy.$$pctEncode_","$$escapeUri","soy.$$escapeUri","$$escapeUriHelper","$$normalizeUri","soy.$$normalizeUri","$$normalizeUriHelper","$$filterNormalizeUri","soy.$$filterNormalizeUri","$$filterNormalizeUriHelper","$$filterNormalizeMediaUri","soy.$$filterNormalizeMediaUri","$$filterNormalizeMediaUriHelper","$$filterTrustedResourceUri","soy.$$filterTrustedResourceUri","$$blessStringAsTrustedResourceUrlForLegacy","soy.$$blessStringAsTrustedResourceUrlForLegacy","$$filterImageDataUri","soy.$$filterImageDataUri","$$filterImageDataUriHelper","$$filterSipUri","soy.$$filterSipUri","$$filterSipUriHelper","$$filterTelUri","soy.$$filterTelUri","$$filterTelUriHelper","$$escapeCssString","soy.$$escapeCssString","$$escapeCssStringHelper","$$filterCssValue","soy.$$filterCssValue","$$filterCssValueHelper","$$filterNoAutoescape","soy.$$filterNoAutoescape","$$changeNewlineToBr","soy.$$changeNewlineToBr","$$insertWordBreaks","soy.$$insertWordBreaks","maxCharsBetweenWordBreaks","$$truncate","soy.$$truncate","maxLen","doAddEllipsis","$$isHighSurrogate_","$$isLowSurrogate_","soy.$$isHighSurrogate_","soy.$$isLowSurrogate_","$$bidiFormatterCache_","$$getBidiFormatterInstance_","soy.$$getBidiFormatterInstance_","bidiGlobalDir","$$bidiTextDir","soy.$$bidiTextDir","isHtml","$$bidiDirAttr","soy.$$bidiDirAttr","formatter","$$bidiMarkAfter","soy.$$bidiMarkAfter","$$bidiSpanWrap","soy.$$bidiSpanWrap","wrappedHtml","$$bidiUnicodeWrap","soy.$$bidiUnicodeWrap","wrappedText","wrappedTextDir","assertType","soy.asserts.assertType","jsDocTypeStr","$$debugSoyTemplateInfo","setDebugSoyTemplateInfo","soy.setDebugSoyTemplateInfo","debugSoyTemplateInfo","soy.esc.$$escapeHtmlHelper","soy.esc.$$escapeUriHelper","$$ESCAPE_MAP_FOR_NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_","$$REPLACER_FOR_NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_","soy.esc.$$REPLACER_FOR_NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_","$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_","$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_","soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_","$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_","$$REPLACER_FOR_ESCAPE_CSS_STRING_","soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_","$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_","$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_","soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_","$$MATCHER_FOR_NORMALIZE_HTML_","$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_","$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_","$$MATCHER_FOR_ESCAPE_JS_STRING_","$$MATCHER_FOR_ESCAPE_JS_REGEX_","$$MATCHER_FOR_ESCAPE_CSS_STRING_","$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI__AND__FILTER_NORMALIZE_MEDIA_URI_","$$FILTER_FOR_FILTER_CSS_VALUE_","$$FILTER_FOR_FILTER_NORMALIZE_URI_","$$FILTER_FOR_FILTER_NORMALIZE_MEDIA_URI_","$$FILTER_FOR_FILTER_IMAGE_DATA_URI_","$$FILTER_FOR_FILTER_SIP_URI_","$$FILTER_FOR_FILTER_TEL_URI_","$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_","$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_","soy.esc.$$normalizeHtmlHelper","soy.esc.$$escapeHtmlNospaceHelper","soy.esc.$$normalizeHtmlNospaceHelper","soy.esc.$$escapeJsStringHelper","soy.esc.$$escapeJsRegexHelper","soy.esc.$$escapeCssStringHelper","soy.esc.$$filterCssValueHelper","soy.esc.$$normalizeUriHelper","soy.esc.$$filterNormalizeUriHelper","soy.esc.$$filterNormalizeMediaUriHelper","soy.esc.$$filterImageDataUriHelper","soy.esc.$$filterSipUriHelper","soy.esc.$$filterTelUriHelper","soy.esc.$$filterHtmlAttributesHelper","soy.esc.$$filterHtmlElementNameHelper","annotorious.templates","templates","popup","annotorious.templates.popup","opt_ignored","soyTemplateName","editform","annotorious.templates.editform","Editor","annotorious.Editor","_annotator","_item","getItem","_textarea","_btnCancel","_btnSave","_btnContainer","_extraFields","htmlSanitizer","_original_annotation","close","getAnnotation","addField","annotorious.Editor.prototype.addField","field","fieldEl","annotorious.Editor.prototype.open","opt_annotation","_current_annotation","annotorious.Editor.prototype.close","annotorious.Editor.prototype.setPosition","xy","annotorious.Editor.prototype.getAnnotation","getShape","Hint","annotorious.Hint","image","hint","_message","_icon","_overItemHandler","this._overItemHandler","show","_outOfItemHandler","this._outOfItemHandler","hide","_attachListeners","annotorious.Hint.prototype._attachListeners","_mouseOverListener","_hideTimer","_mouseOutListener","_detachListeners","annotorious.Hint.prototype._detachListeners","annotorious.Hint.prototype.show","annotorious.Hint.prototype.hide","annotorious.Hint.prototype.destroy","Popup","annotorious.Popup","_text","_buttons","_cancelHide","btnEdit","btnDelete","editAnnotation","_currentAnnotation","hasMouse","_buttonHideTimer","clearHideTimer","startHideTimer","annotorious.Popup.prototype.addField","annotorious.Popup.prototype.startHideTimer","_popupHideTimer","annotorious.Popup.prototype.clearHideTimer","annotorious.Popup.prototype.show","setAnnotation","annotorious.Popup.prototype.setPosition","annotorious.Popup.prototype.setAnnotation","editable","Annotator","annotorious.mediatypes.Annotator","annotorious.mediatypes.Annotator.prototype.addAnnotation","_viewer","annotorious.mediatypes.Annotator.prototype.addHandler","_eventBroker","annotorious.mediatypes.Annotator.prototype.removeHandler","annotorious.mediatypes.Annotator.prototype.fireEvent","annotorious.mediatypes.Annotator.prototype.getActiveSelector","_currentSelector","annotorious.mediatypes.Annotator.prototype.highlightAnnotation","annotorious.mediatypes.Annotator.prototype.removeAnnotation","annotorious.mediatypes.Annotator.prototype.stopSelection","original_annotation","_editCanvas","_stop_selection_callback","_attachListener","annotorious.mediatypes.Annotator.prototype._attachListener","activeCanvas","coords","sanitizeCoordinates","_selectionEnabled","startSelection","getAnnotationsAt","annotorious.mediatypes.image","Viewer","annotorious.mediatypes.image.Viewer","_canvas","_annotations","_shapes","_g2d","_eventsEnabled","_keepHighlighted","_onMouseMove","_cachedMouseEvent","previousAnnotation","topAnnotationAt","redraw","mouseEvent","annotorious.mediatypes.image.Viewer.prototype.addAnnotation","viewportShape","fromItemCoordinates","annotorious.mediatypes.image.Viewer.prototype.removeAnnotation","annotorious.mediatypes.image.Viewer.prototype.getAnnotations","annotorious.mediatypes.image.Viewer.prototype.highlightAnnotation","getHighlightedAnnotation","annotorious.mediatypes.image.Viewer.prototype.getHighlightedAnnotation","annotorious.mediatypes.image.Viewer.prototype.topAnnotationAt","annotorious.mediatypes.image.Viewer.prototype.getAnnotationsAt","intersectedAnnotations","shape_a","shape_b","annotorious.mediatypes.image.Viewer.prototype._onMouseMove","topAnnotation","_draw","annotorious.mediatypes.image.Viewer.prototype._draw","getSupportedShapeType","drawShape","annotorious.mediatypes.image.Viewer.prototype.redraw","clearRect","bbox","annotorious.events.ui","hasTouch","OVER","OUT","annotorious.events.ui.sanitizeCoordinates","annotorious.plugins","annotorious.plugins.selection","plugins","selection","RectDragSelector","annotorious.plugins.selection.RectDragSelector","annotorious.plugins.selection.RectDragSelector.prototype.init","_OUTLINE","_STROKE","_FILL","_HI_OUTLINE","_HI_STROKE","_HI_FILL","_HI_OUTLINE_WIDTH","_STROKE_WIDTH","_OUTLINE_WIDTH","_HI_STROKE_WIDTH","lineWidth","_enabled","annotorious.plugins.selection.RectDragSelector.prototype._attachListeners","startPoint","_mouseMoveListener","_opposite","_anchor","_mouseUpListener","viewportBounds","getViewportBounds","annotorious.plugins.selection.RectDragSelector.prototype._detachListeners","annotorious.plugins.selection.RectDragSelector.prototype.getName","annotorious.plugins.selection.RectDragSelector.prototype.getSupportedShapeType","annotorious.plugins.selection.RectDragSelector.prototype.setProperties","annotorious.plugins.selection.RectDragSelector.prototype.startSelection","annotorious.plugins.selection.RectDragSelector.prototype.stopSelection","annotorious.plugins.selection.RectDragSelector.prototype.getShape","toItemCoordinates","annotorious.plugins.selection.RectDragSelector.prototype.getViewportBounds","annotorious.plugins.selection.RectDragSelector.prototype.drawShape","g2d","fill","hi_fill","stroke","hi_stroke","outline","hi_outline","outline_width","hi_outline_width","stroke_width","hi_stroke_width","lineJoin","strokeStyle","strokeRect","fillStyle","fillRect","annotorious.templates.image","annotorious.templates.image.canvas","annotorious.templates.image.hint","ImageAnnotator","annotorious.mediatypes.image.ImageAnnotator","opt_popup","_image","_original_bufferspace","margin","_selectors","_transferStyles","img_bounds","_viewCanvas","default_selector","editor","_hint","bounds","annotorious.mediatypes.image.ImageAnnotator.prototype._transferStyles","annotationLayer","transferMargin","direction","annotorious.mediatypes.image.ImageAnnotator.prototype.activateSelector","addSelector","annotorious.mediatypes.image.ImageAnnotator.prototype.addSelector","annotorious.mediatypes.image.ImageAnnotator.prototype.destroy","img","annotorious.mediatypes.image.ImageAnnotator.prototype.editAnnotation","annotorious.mediatypes.image.ImageAnnotator.prototype.fromItemCoordinates","xy_wh","imgSize","annotorious.mediatypes.image.ImageAnnotator.prototype.getActiveSelector","annotorious.mediatypes.image.ImageAnnotator.prototype.getAnnotations","annotorious.mediatypes.image.ImageAnnotator.prototype.getAnnotationsAt","cx","cy","annotorious.mediatypes.image.ImageAnnotator.prototype.getAvailableSelectors","annotorious.mediatypes.image.ImageAnnotator.prototype.getItem","annotorious.mediatypes.image.ImageAnnotator.getItemURL","annotorious.mediatypes.image.ImageAnnotator.prototype.hideAnnotations","annotorious.mediatypes.image.ImageAnnotator.prototype.hideSelectionWidget","annotorious.mediatypes.image.ImageAnnotator.prototype.setCurrentSelector","sel","annotorious.mediatypes.image.ImageAnnotator.prototype.setProperties","annotorious.mediatypes.image.ImageAnnotator.prototype.showAnnotations","annotorious.mediatypes.image.ImageAnnotator.prototype.showSelectionWidget","annotorious.mediatypes.image.ImageAnnotator.prototype.stopSelection","opt_original_annotation","annotorious.mediatypes.image.ImageAnnotator.prototype.toItemCoordinates","ImageModule","annotorious.mediatypes.image.ImageModule","annotorious.mediatypes.image.ImageModule.prototype.getItemURL","annotorious.mediatypes.image.ImageModule.prototype.newAnnotator","annotorious.mediatypes.image.ImageModule.prototype.supports","annotorious.templates.openlayers","openlayers","secondaryHint","annotorious.templates.openlayers.secondaryHint","MouseWheelHandler","goog.events.MouseWheelHandler","rtlElement","isRtl_","listenKey_","MOUSEWHEEL","setMaxDeltaX","goog.events.MouseWheelHandler.prototype.setMaxDeltaX","maxDeltaX","maxDeltaX_","setMaxDeltaY","goog.events.MouseWheelHandler.prototype.setMaxDeltaY","maxDeltaY","maxDeltaY_","goog.events.MouseWheelHandler.prototype.handleEvent","smartScale_","wheelDelta","wheelDeltaScaleFactor","wheelDeltaX","wheelDeltaY","axis","HORIZONTAL_AXIS","newEvent","MouseWheelEvent","goog.events.MouseWheelHandler.smartScale_","mouseWheelDelta","scaleFactor","goog.events.MouseWheelHandler.prototype.disposeInternal","goog.events.MouseWheelEvent","annotorious.mediatypes.openlayers","annotorious.mediatypes.openlayers.Viewer","_map","_map_bounds","_popup","_overlays","_boxesLayer","OpenLayers","Layer","Boxes","addLayer","_currentlyHighlightedOverlay","_place_popup","_lastHoveredOverlay","_updateHighlight","annotorious.mediatypes.openlayers.Viewer.prototype.destroy","annotorious.mediatypes.openlayers.Viewer.prototype._place_popup","annotation_div","marker","annotation_dim","annotation_pos","popup_bounds","popup_pos","_show_popup","annotorious.mediatypes.openlayers.Viewer.prototype._show_popup","annotorious.mediatypes.openlayers.Viewer.prototype._updateHighlight","new_highlight","previous_highlight","annotorious.mediatypes.openlayers.Viewer.prototype.addAnnotation","Marker","Bounds","overlay","shapeA","shapeB","zIndex","addMarker","annotorious.mediatypes.openlayers.Viewer.prototype.removeAnnotation","removeMarker","annotorious.mediatypes.openlayers.Viewer.prototype.getAnnotations","annotorious.mediatypes.openlayers.Viewer.prototype.highlightAnnotation","annotorious.mediatypes.openlayers.Viewer.prototype.topAnnotationAt","annotorious.mediatypes.openlayers.Viewer.prototype.getAnnotationsAt","OpenLayersAnnotator","annotorious.mediatypes.openlayers.OpenLayersAnnotator","_secondaryHint","updateCanvasSize","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.showSelectionWidget","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.hideSelectionWidget","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.activateSelector","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.destroy","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.addSelector","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.editAnnotation","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.fromItemCoordinates","itemCoords","pxCoords","getViewPortPxFromLonLat","LonLat","pxOpposite","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.getAnnotations","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.getAnnotationsAt","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.getAvailableSelectors","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.getItem","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.setActiveSelector","annotorious.mediatypes.openlayers.OpenLayersAnnotator.prototype.toItemCoordinates","getLonLatFromPixel","Pixel","opposite","itemOpposite","foo","lon","lat","OpenLayersModule","annotorious.mediatypes.openlayers.OpenLayersModule","annotorious.mediatypes.openlayers.OpenLayersModule.prototype.getItemURL","annotorious.mediatypes.openlayers.OpenLayersModule.prototype.newAnnotator","annotorious.mediatypes.openlayers.OpenLayersModule.prototype.supports","annotorious.mediatypes.openseadragon","openseadragon","annotorious.mediatypes.openseadragon.Viewer","osdViewer","_osdViewer","annotorious.mediatypes.openseadragon.Viewer.prototype._place_popup","viewportEl","outer","isFullPage","annotorious.mediatypes.openseadragon.Viewer.prototype._show_popup","annotorious.mediatypes.openseadragon.Viewer.prototype._updateHighlight","annotorious.mediatypes.openseadragon.Viewer.prototype.addAnnotation","OpenSeadragon","addOverlay","annotorious.mediatypes.openseadragon.Viewer.prototype.removeAnnotation","removeOverlay","annotorious.mediatypes.openseadragon.Viewer.prototype.getAnnotations","annotorious.mediatypes.openseadragon.Viewer.prototype.highlightAnnotation","that","annotorious.mediatypes.openseadragon.Viewer.prototype.destroy","OpenSeadragonAnnotator","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.showSelectionWidget","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.hideSelectionWidget","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.destroy","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.activateSelector","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.editAnnotation","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.fromItemCoordinates","viewportPoint","viewportOpposite","windowPoint","viewport","viewportToWindowCoordinates","windowOpposite","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.getAnnotations","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.getAvailableSelectors","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.getItem","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.setActiveSelector","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.getActiveSelector","annotorious.mediatypes.openseadragon.OpenSeadragonAnnotator.prototype.toItemCoordinates","viewElementPoint","windowToViewportCoordinates","viewElementOpposite","OpenSeadragonModule","annotorious.mediatypes.openseadragon.OpenSeadragonModule","annotorious.mediatypes.openseadragon.OpenSeadragonModule.prototype.getItemURL","annotorious.mediatypes.openseadragon.OpenSeadragonModule.prototype.newAnnotator","annotorious.mediatypes.openseadragon.OpenSeadragonModule.prototype.supports","Annotorious","annotorious.Annotorious","_isInitialized","_modules","_init","annotorious.Annotorious.prototype._init","initPlugin","_getModuleForItemSrc","annotorious.Annotorious.prototype._getModuleForItemSrc","annotorious.Annotorious.prototype.activateSelector","annotorious.Annotorious.prototype.addAnnotation","annotorious.Annotorious.prototype.addHandler","annotorious.Annotorious.prototype.removeHandler","annotorious.Annotorious.prototype.addPlugin","plugin_name","opt_config_options","annotorious.Annotorious.prototype.destroy","annotorious.Annotorious.prototype.getActiveSelector","annotorious.Annotorious.prototype.getAnnotations","annotorious.Annotorious.prototype.getAvailableSelectors","annotorious.Annotorious.prototype.hideAnnotations","annotorious.Annotorious.prototype.hideSelectionWidget","annotorious.Annotorious.prototype.stopSelection","annotorious.Annotorious.prototype.highlightAnnotation","annotorious.Annotorious.prototype.makeAnnotatable","annotorious.Annotorious.prototype.removeAll","annotorious.Annotorious.prototype.removeAnnotation","annotorious.Annotorious.prototype.reset","annotorious.Annotorious.prototype.setActiveSelector","annotorious.Annotorious.prototype.setProperties","setSelectionEnabled","annotorious.Annotorious.prototype.setSelectionEnabled","annotorious.Annotorious.prototype.showAnnotations","annotorious.Annotorious.prototype.showSelectionWidget"]
}

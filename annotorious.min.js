function i(a){throw a;}var k=void 0,m=!0,p=null,q=!1;function s(){return function(){}}function u(a){return function(){return this[a]}}function aa(a){return function(){return a}}var v,ba=this;function ca(a,c){var d=a.split("."),e=ba;!(d[0]in e)&&e.execScript&&e.execScript("var "+d[0]);for(var f;d.length&&(f=d.shift());)!d.length&&da(c)?e[f]=c:e=e[f]?e[f]:e[f]={}}function ea(){}function fa(a){a.qb=function(){return a.wd?a.wd:a.wd=new a}}
function ga(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var d=Object.prototype.toString.call(a);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c}function da(a){return a!==k}function ha(a){return"array"==ga(a)}function ia(a){var c=ga(a);return"array"==c||"object"==c&&"number"==typeof a.length}function w(a){return"string"==typeof a}function x(a){return"function"==ga(a)}function ja(a){var c=typeof a;return"object"==c&&a!=p||"function"==c}function ka(a){return a[la]||(a[la]=++ma)}var la="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ma=0;
function na(a,c,d){return a.call.apply(a.bind,arguments)}function oa(a,c,d){a||i(Error());if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,e);return a.apply(c,d)}}return function(){return a.apply(c,arguments)}}function pa(a,c,d){pa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?na:oa;return pa.apply(p,arguments)}
function qa(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);c.unshift.apply(c,d);return a.apply(this,c)}}var ra=Date.now||function(){return+new Date};function y(a,c){function d(){}d.prototype=c.prototype;a.K=c.prototype;a.prototype=new d;a.prototype.constructor=a};function sa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function ta(a){if(!ua.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(va,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(wa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(xa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(ya,"&quot;"));return a}var va=/&/g,wa=/</g,xa=/>/g,ya=/\"/g,ua=/[&<>\"]/;function za(a){return String(a).replace(/\-([a-z])/g,function(a,d){return d.toUpperCase()})};var C=Array.prototype,Aa=C.indexOf?function(a,c,d){return C.indexOf.call(a,c,d)}:function(a,c,d){d=d==p?0:0>d?Math.max(0,a.length+d):d;if(w(a))return!w(c)||1!=c.length?-1:a.indexOf(c,d);for(;d<a.length;d++)if(d in a&&a[d]===c)return d;return-1},E=C.forEach?function(a,c,d){C.forEach.call(a,c,d)}:function(a,c,d){for(var e=a.length,f=w(a)?a.split(""):a,h=0;h<e;h++)h in f&&c.call(d,f[h],h,a)},Ba=C.filter?function(a,c,d){return C.filter.call(a,c,d)}:function(a,c,d){for(var e=a.length,f=[],h=0,j=w(a)?a.split(""):
a,l=0;l<e;l++)if(l in j){var n=j[l];c.call(d,n,l,a)&&(f[h++]=n)}return f},Ca=C.map?function(a,c,d){return C.map.call(a,c,d)}:function(a,c,d){for(var e=a.length,f=Array(e),h=w(a)?a.split(""):a,j=0;j<e;j++)j in h&&(f[j]=c.call(d,h[j],j,a));return f},Da=C.every?function(a,c,d){return C.every.call(a,c,d)}:function(a,c,d){for(var e=a.length,f=w(a)?a.split(""):a,h=0;h<e;h++)if(h in f&&!c.call(d,f[h],h,a))return q;return m};
function Ea(a,c){var d;a:{d=a.length;for(var e=w(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&c.call(k,e[f],f,a)){d=f;break a}d=-1}return 0>d?p:w(a)?a.charAt(d):a[d]}function Fa(a,c){return 0<=Aa(a,c)}function F(a,c){var d=Aa(a,c);0<=d&&C.splice.call(a,d,1)}function Ga(a){var c=a.length;if(0<c){for(var d=Array(c),e=0;e<c;e++)d[e]=a[e];return d}return[]}
function Ha(a,c){for(var d=1;d<arguments.length;d++){var e=arguments[d],f;if(ha(e)||(f=ia(e))&&e.hasOwnProperty("callee"))a.push.apply(a,e);else if(f)for(var h=a.length,j=e.length,l=0;l<j;l++)a[h+l]=e[l];else a.push(e)}}function Ia(a,c,d){return 2>=arguments.length?C.slice.call(a,c):C.slice.call(a,c,d)}function Ja(a,c){return a>c?1:a<c?-1:0};var Ka,La,Ma,Na,Oa;function Pa(){return ba.navigator?ba.navigator.userAgent:p}function Qa(){return ba.navigator}Na=Ma=La=Ka=q;var Ra;if(Ra=Pa()){var Sa=Qa();Ka=0==Ra.indexOf("Opera");La=!Ka&&-1!=Ra.indexOf("MSIE");Ma=!Ka&&-1!=Ra.indexOf("WebKit");Na=!Ka&&!Ma&&"Gecko"==Sa.product}var Ta=Ka,G=La,H=Na,I=Ma,Ua=Qa();Oa=-1!=(Ua&&Ua.platform||"").indexOf("Mac");var Va=!!Qa()&&-1!=(Qa().appVersion||"").indexOf("X11"),Wa;
a:{var Xa="",Ya;if(Ta&&ba.opera)var Za=ba.opera.version,Xa="function"==typeof Za?Za():Za;else if(H?Ya=/rv\:([^\);]+)(\)|;)/:G?Ya=/MSIE\s+([^\);]+)(\)|;)/:I&&(Ya=/WebKit\/(\S+)/),Ya)var $a=Ya.exec(Pa()),Xa=$a?$a[1]:"";if(G){var ab,bb=ba.document;ab=bb?bb.documentMode:k;if(ab>parseFloat(Xa)){Wa=String(ab);break a}}Wa=Xa}var cb={};
function K(a){var c;if(!(c=cb[a])){c=0;for(var d=sa(String(Wa)).split("."),e=sa(String(a)).split("."),f=Math.max(d.length,e.length),h=0;0==c&&h<f;h++){var j=d[h]||"",l=e[h]||"",n=RegExp("(\\d*)(\\D*)","g"),t=RegExp("(\\d*)(\\D*)","g");do{var z=n.exec(j)||["","",""],B=t.exec(l)||["","",""];if(0==z[0].length&&0==B[0].length)break;c=((0==z[1].length?0:parseInt(z[1],10))<(0==B[1].length?0:parseInt(B[1],10))?-1:(0==z[1].length?0:parseInt(z[1],10))>(0==B[1].length?0:parseInt(B[1],10))?1:0)||((0==z[2].length)<
(0==B[2].length)?-1:(0==z[2].length)>(0==B[2].length)?1:0)||(z[2]<B[2]?-1:z[2]>B[2]?1:0)}while(0==c)}c=cb[a]=0<=c}return c}var db={};function eb(a){return db[a]||(db[a]=G&&!!document.documentMode&&document.documentMode>=a)};var fb,gb=!G||eb(9);!H&&!G||G&&eb(9)||H&&K("1.9.1");G&&K("9");var hb=G||Ta||I;function ib(a){a=a.className;return w(a)&&a.match(/\S+/g)||[]}function jb(a,c){var d=ib(a),e=Ia(arguments,1),f=d.length+e.length;kb(d,e);a.className=d.join(" ");return d.length==f}function lb(a,c){var d=ib(a),e=Ia(arguments,1),f=mb(d,e);a.className=f.join(" ");return f.length==d.length-e.length}function kb(a,c){for(var d=0;d<c.length;d++)Fa(a,c[d])||a.push(c[d])}function mb(a,c){return Ba(a,function(a){return!Fa(c,a)})}
function nb(a,c,d){var e=ib(a);w(c)?F(e,c):ha(c)&&(e=mb(e,c));w(d)&&!Fa(e,d)?e.push(d):ha(d)&&kb(e,d);a.className=e.join(" ")};function L(a,c){this.x=da(a)?a:0;this.y=da(c)?c:0};function ob(a,c){this.width=a;this.height=c}ob.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};ob.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function pb(a,c){for(var d in a)c.call(k,a[d],d,a)}var qb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rb(a,c){for(var d,e,f=1;f<arguments.length;f++){e=arguments[f];for(d in e)a[d]=e[d];for(var h=0;h<qb.length;h++)d=qb[h],Object.prototype.hasOwnProperty.call(e,d)&&(a[d]=e[d])}};function sb(a){return a?new tb(ub(a)):fb||(fb=new tb)}function vb(){var a,c,d,e;a=document;if(a.querySelectorAll&&a.querySelector)return a.querySelectorAll(".openseadragon-container");if(a.getElementsByClassName){var f=a.getElementsByClassName("openseadragon-container");return f}f=a.getElementsByTagName("*");e={};for(c=d=0;a=f[c];c++){var h=a.className;"function"==typeof h.split&&Fa(h.split(/\s+/),"openseadragon-container")&&(e[d++]=a)}e.length=d;return e}
function wb(a,c){pb(c,function(c,e){"style"==e?a.style.cssText=c:"class"==e?a.className=c:"for"==e?a.htmlFor=c:e in xb?a.setAttribute(xb[e],c):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?a.setAttribute(e,c):a[e]=c})}var xb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function yb(a,c,d){var e=arguments,f=document,h=e[0],j=e[1];if(!gb&&j&&(j.name||j.type)){h=["<",h];j.name&&h.push(' name="',ta(j.name),'"');if(j.type){h.push(' type="',ta(j.type),'"');var l={};rb(l,j);delete l.type;j=l}h.push(">");h=h.join("")}h=f.createElement(h);j&&(w(j)?h.className=j:ha(j)?jb.apply(p,[h].concat(j)):wb(h,j));2<e.length&&zb(f,h,e,2);return h}
function zb(a,c,d,e){function f(d){d&&c.appendChild(w(d)?a.createTextNode(d):d)}for(;e<d.length;e++){var h=d[e];if(ia(h)&&!(ja(h)&&0<h.nodeType)){var j;a:{if(h&&"number"==typeof h.length){if(ja(h)){j="function"==typeof h.item||"string"==typeof h.item;break a}if(x(h)){j="function"==typeof h.item;break a}}j=q}E(j?Ga(h):h,f)}else f(h)}}function Ab(a){for(var c;c=a.firstChild;)a.removeChild(c)}function Bb(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Cb(a){return ja(a)&&1==a.nodeType}
function Db(a,c){if(a.contains&&1==c.nodeType)return a==c||a.contains(c);if("undefined"!=typeof a.compareDocumentPosition)return a==c||Boolean(a.compareDocumentPosition(c)&16);for(;c&&a!=c;)c=c.parentNode;return c==a}function ub(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Eb(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?(a=a.tabIndex,"number"==typeof a&&0<=a&&32768>a):q}function tb(a){this.N=a||ba.document||document}v=tb.prototype;v.kd=sb;
v.d=function(a){return w(a)?this.N.getElementById(a):a};v.ja=wb;v.createElement=function(a){return this.N.createElement(a)};v.createTextNode=function(a){return this.N.createTextNode(a)};function Fb(a){var c=a.N,a=!I?c.documentElement:c.body,c=c.parentWindow||c.defaultView;return new L(c.pageXOffset||a.scrollLeft,c.pageYOffset||a.scrollTop)}v.appendChild=function(a,c){a.appendChild(c)};v.append=function(a,c){zb(ub(a),a,arguments,1)};v.contains=Db;var Gb;Gb=aa(m);/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

The "New" BSD License:

Copyright (c) 2005-2009, The Dojo Foundation
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
    may be used to endorse or promote products derived from this software
    without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function Hb(a,c){var d=c||[];a&&d.push(a);return d}var Ib=I&&"BackCompat"==document.compatMode,Jb=document.firstChild.children?"children":"childNodes",Kb=q;
function Lb(a){function c(){0<=t&&(A.id=d(t,D).replace(/\\/g,""),t=-1);if(0<=z){var a=z==D?p:d(z,D);0>">~+".indexOf(a)?A.H=a:A.Qb=a;z=-1}0<=n&&(A.da.push(d(n+1,D).replace(/\\/g,"")),n=-1)}function d(c,d){return sa(a.slice(c,d))}for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",e=[],f=-1,h=-1,j=-1,l=-1,n=-1,t=-1,z=-1,B="",J="",X,D=0,Oe=a.length,A=p,R=p;B=J,J=a.charAt(D),D<Oe;D++)if("\\"!=B)if(A||(X=D,A={Xa:p,Ea:[],Bb:[],da:[],H:p,Qb:p,id:p,wc:function(){return Kb?this.de:this.H}},z=D),0<=f)if("]"==
J){R.rc?R.Dc=d(j||f+1,D):R.rc=d(f+1,D);if((f=R.Dc)&&('"'==f.charAt(0)||"'"==f.charAt(0)))R.Dc=f.slice(1,-1);A.Bb.push(R);R=p;f=j=-1}else"="==J&&(j=0<="|~^$*".indexOf(B)?B:"",R.type=j+J,R.rc=d(f+1,D-j.length),j=D+1);else 0<=h?")"==J&&(0<=l&&(R.value=d(h+1,D)),l=h=-1):"#"==J?(c(),t=D+1):"."==J?(c(),n=D):":"==J?(c(),l=D):"["==J?(c(),f=D,R={}):"("==J?(0<=l&&(R={name:d(l+1,D),value:p},A.Ea.push(R)),h=D):" "==J&&B!=J&&(c(),0<=l&&A.Ea.push({name:d(l+1,D)}),A.zd=A.Ea.length||A.Bb.length||A.da.length,A.ue=
A.Xa=d(X,D),A.de=A.H=A.Qb?p:A.H||"*",A.H&&(A.H=A.H.toUpperCase()),e.length&&e[e.length-1].Qb&&(A.vd=e.pop(),A.Xa=A.vd.Xa+" "+A.Xa),e.push(A),A=p);return e}function Mb(a,c){return!a?c:!c?a:function(){return a.apply(window,arguments)&&c.apply(window,arguments)}}function Nb(a){return 1==a.nodeType}function Ob(a,c){return!a?"":"class"==c?a.className||"":"for"==c?a.htmlFor||"":"style"==c?a.style.cssText||"":(Kb?a.getAttribute(c):a.getAttribute(c,2))||""}
var Pb={"*=":function(a,c){return function(d){return 0<=Ob(d,a).indexOf(c)}},"^=":function(a,c){return function(d){return 0==Ob(d,a).indexOf(c)}},"$=":function(a,c){return function(d){d=" "+Ob(d,a);return d.lastIndexOf(c)==d.length-c.length}},"~=":function(a,c){var d=" "+c+" ";return function(c){return 0<=(" "+Ob(c,a)+" ").indexOf(d)}},"|=":function(a,c){c=" "+c;return function(d){d=" "+Ob(d,a);return d==c||0==d.indexOf(c+"-")}},"=":function(a,c){return function(d){return Ob(d,a)==c}}},Qb="undefined"==
typeof document.firstChild.nextElementSibling,Rb=!Qb?"nextElementSibling":"nextSibling",Sb=!Qb?"previousElementSibling":"previousSibling",Tb=Qb?Nb:Gb;function Ub(a){for(;a=a[Sb];)if(Tb(a))return q;return m}function Vb(a){for(;a=a[Rb];)if(Tb(a))return q;return m}function Wb(a){var c=a.parentNode,d=0,e=c[Jb],f=a._i||-1,h=c._l||-1;if(!e)return-1;e=e.length;if(h==e&&0<=f&&0<=h)return f;c._l=e;f=-1;for(c=c.firstElementChild||c.firstChild;c;c=c[Rb])Tb(c)&&(c._i=++d,a===c&&(f=d));return f}
function Xb(a){return!(Wb(a)%2)}function Yb(a){return Wb(a)%2}
var $b={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return Ub},"last-child":function(){return Vb},"only-child":function(){return function(a){return!Ub(a)||!Vb(a)?q:m}},empty:function(){return function(a){for(var c=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var d=c[a].nodeType;if(1===d||3==d)return q}return m}},contains:function(a,c){var d=c.charAt(0);if('"'==d||"'"==d)c=c.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(c)}},
not:function(a,c){var d=Lb(c)[0],e={D:1};"*"!=d.H&&(e.H=1);d.da.length||(e.da=1);var f=Zb(d,e);return function(a){return!f(a)}},"nth-child":function(a,c){if("odd"==c)return Yb;if("even"==c)return Xb;if(-1!=c.indexOf("n")){var d=c.split("n",2),e=d[0]?"-"==d[0]?-1:parseInt(d[0],10):1,f=d[1]?parseInt(d[1],10):0,h=0,j=-1;0<e?0>f?f=f%e&&e+f%e:0<f&&(f>=e&&(h=f-f%e),f%=e):0>e&&(e*=-1,0<f&&(j=f,f%=e));if(0<e)return function(a){a=Wb(a);return a>=h&&(0>j||a<=j)&&a%e==f};c=f}var l=parseInt(c,10);return function(a){return Wb(a)==
l}}},ac=G?function(a){var c=a.toLowerCase();"class"==c&&(a="className");return function(d){return Kb?d.getAttribute(a):d[a]||d[c]}}:function(a){return function(c){return c&&c.getAttribute&&c.hasAttribute(a)}};
function Zb(a,c){if(!a)return Gb;var c=c||{},d=p;c.D||(d=Mb(d,Nb));c.H||"*"!=a.H&&(d=Mb(d,function(c){return c&&c.tagName==a.wc()}));c.da||E(a.da,function(a,c){var h=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");d=Mb(d,function(a){return h.test(a.className)});d.count=c});c.Ea||E(a.Ea,function(a){var c=a.name;$b[c]&&(d=Mb(d,$b[c](c,a.value)))});c.Bb||E(a.Bb,function(a){var c,h=a.rc;a.type&&Pb[a.type]?c=Pb[a.type](h,a.Dc):h.length&&(c=ac(h));c&&(d=Mb(d,c))});c.id||a.id&&(d=Mb(d,function(c){return!!c&&c.id==a.id}));
d||"default"in c||(d=Gb);return d}var bc={};
function cc(a){var c=bc[a.Xa];if(c)return c;var d=a.vd,d=d?d.Qb:"",e=Zb(a,{D:1}),f="*"==a.H,h=document.getElementsByClassName;if(d)if(h={D:1},f&&(h.H=1),e=Zb(a,h),"+"==d)var j=e,c=function(a,c,d){for(;a=a[Rb];)if(!Qb||Nb(a)){(!d||dc(a,d))&&j(a)&&c.push(a);break}return c};else if("~"==d)var l=e,c=function(a,c,d){for(a=a[Rb];a;){if(Tb(a)){if(d&&!dc(a,d))break;l(a)&&c.push(a)}a=a[Rb]}return c};else{if(">"==d)var n=e,n=n||Gb,c=function(a,c,d){for(var e=0,f=a[Jb];a=f[e++];)Tb(a)&&((!d||dc(a,d))&&n(a,e))&&
c.push(a);return c}}else if(a.id)e=!a.zd&&f?Gb:Zb(a,{D:1,id:1}),c=function(c,d){var f=sb(c).d(a.id),h;if(h=f&&e(f))if(!(h=9==c.nodeType)){for(h=f.parentNode;h&&h!=c;)h=h.parentNode;h=!!h}if(h)return Hb(f,d)};else if(h&&/\{\s*\[native code\]\s*\}/.test(String(h))&&a.da.length&&!Ib)var e=Zb(a,{D:1,da:1,id:1}),t=a.da.join(" "),c=function(a,c){for(var d=Hb(0,c),f,h=0,j=a.getElementsByClassName(t);f=j[h++];)e(f,a)&&d.push(f);return d};else!f&&!a.zd?c=function(c,d){for(var e=Hb(0,d),f,h=0,j=c.getElementsByTagName(a.wc());f=
j[h++];)e.push(f);return e}:(e=Zb(a,{D:1,H:1,id:1}),c=function(c,d){for(var f=Hb(0,d),h,j=0,l=c.getElementsByTagName(a.wc());h=l[j++];)e(h,c)&&f.push(h);return f});return bc[a.Xa]=c}var ec={},fc={};function gc(a){var c=Lb(sa(a));if(1==c.length){var d=cc(c[0]);return function(a){if(a=d(a,[]))a.Pb=m;return a}}return function(a){for(var a=Hb(a),d,h,j=c.length,l,n,t=0;t<j;t++){n=[];d=c[t];h=a.length-1;0<h&&(l={},n.Pb=m);h=cc(d);for(var z=0;d=a[z];z++)h(d,n,l);if(!n.length)break;a=n}return n}}
var hc=!!document.querySelectorAll&&(!I||K("526"));
function ic(a,c){if(hc){var d=fc[a];if(d&&!c)return d}if(d=ec[a])return d;var d=a.charAt(0),e=-1==a.indexOf(" ");0<=a.indexOf("#")&&e&&(c=m);if(hc&&!c&&-1==">~+".indexOf(d)&&(!G||-1==a.indexOf(":"))&&!(Ib&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf("|=")){var f=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return fc[a]=function(c){try{9==c.nodeType||e||i("");var d=c.querySelectorAll(f);G?d.Pd=m:d.Pb=m;return d}catch(h){return ic(a,m)(c)}}}var h=a.split(/\s*,\s*/);return ec[a]=
2>h.length?gc(a):function(a){for(var c=0,d=[],e;e=h[c++];)d=d.concat(gc(e)(a));return d}}var jc=0,kc=G?function(a){return Kb?a.getAttribute("_uid")||a.setAttribute("_uid",++jc)||jc:a.uniqueID}:function(a){return a._uid||(a._uid=++jc)};function dc(a,c){if(!c)return 1;var d=kc(a);return!c[d]?c[d]=1:0}
function lc(a){if(a&&a.Pb)return a;var c=[];if(!a||!a.length)return c;a[0]&&c.push(a[0]);if(2>a.length)return c;jc++;if(G&&Kb){var d=jc+"";a[0].setAttribute("_zipIdx",d);for(var e=1,f;f=a[e];e++)a[e].getAttribute("_zipIdx")!=d&&c.push(f),f.setAttribute("_zipIdx",d)}else if(G&&a.Pd)try{for(e=1;f=a[e];e++)Nb(f)&&c.push(f)}catch(h){}else{a[0]&&(a[0]._zipIdx=jc);for(e=1;f=a[e];e++)a[e]._zipIdx!=jc&&c.push(f),f._zipIdx=jc}return c}
function mc(a,c){if(!a)return[];if(a.constructor==Array)return a;if(!w(a))return[a];if(w(c)&&(c=w(c)?document.getElementById(c):c,!c))return[];var c=c||document,d=c.ownerDocument||c.documentElement;Kb=c.contentType&&"application/xml"==c.contentType||Ta&&(c.doctype||"[object XMLDocument]"==d.toString())||!!d&&(G?d.xml:c.xmlVersion||d.xmlVersion);return(d=ic(a)(c))&&d.Pb?d:lc(d)}mc.Ea=$b;ca("goog.dom.query",mc);ca("goog.dom.query.pseudos",mc.Ea);var nc=!G||eb(9),oc=!G||eb(9),pc=G&&!K("9");!I||K("528");H&&K("1.9b")||G&&K("8")||Ta&&K("9.5")||I&&K("528");H&&!K("8")||G&&K("9");function qc(){0!=rc&&(this.oe=Error().stack,ka(this))}var rc=0;qc.prototype.fd=q;function sc(a,c){this.type=a;this.currentTarget=this.target=c}v=sc.prototype;v.Da=q;v.defaultPrevented=q;v.Tb=m;v.stopPropagation=function(){this.Da=m};v.preventDefault=function(){this.defaultPrevented=m;this.Tb=q};function tc(a){a.preventDefault()};function uc(a){uc[" "](a);return a}uc[" "]=ea;function vc(a,c){a&&this.init(a,c)}y(vc,sc);var wc=[1,4,2];v=vc.prototype;v.target=p;v.relatedTarget=p;v.offsetX=0;v.offsetY=0;v.clientX=0;v.clientY=0;v.screenX=0;v.screenY=0;v.button=0;v.keyCode=0;v.charCode=0;v.ctrlKey=q;v.altKey=q;v.shiftKey=q;v.metaKey=q;v.Hc=q;v.n=p;
v.init=function(a,c){var d=this.type=a.type;sc.call(this,d);this.target=a.target||a.srcElement;this.currentTarget=c;var e=a.relatedTarget;if(e){if(H){var f;a:{try{uc(e.nodeName);f=m;break a}catch(h){}f=q}f||(e=p)}}else"mouseover"==d?e=a.fromElement:"mouseout"==d&&(e=a.toElement);this.relatedTarget=e;this.offsetX=I||a.offsetX!==k?a.offsetX:a.layerX;this.offsetY=I||a.offsetY!==k?a.offsetY:a.layerY;this.clientX=a.clientX!==k?a.clientX:a.pageX;this.clientY=a.clientY!==k?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==d?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Hc=Oa?a.metaKey:a.ctrlKey;this.state=a.state;this.n=a;a.defaultPrevented&&this.preventDefault();delete this.Da};function xc(a){return(nc?0==a.n.button:"click"==a.type?m:!!(a.n.button&wc[0]))&&!(I&&Oa&&a.ctrlKey)}
v.stopPropagation=function(){vc.K.stopPropagation.call(this);this.n.stopPropagation?this.n.stopPropagation():this.n.cancelBubble=m};v.preventDefault=function(){vc.K.preventDefault.call(this);var a=this.n;if(a.preventDefault)a.preventDefault();else if(a.returnValue=q,pc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(c){}};v.Qd=u("n");function yc(){}var zc=0;v=yc.prototype;v.key=0;v.Fa=q;v.Zc=q;v.init=function(a,c,d,e,f,h){x(a)?this.yd=m:a&&a.handleEvent&&x(a.handleEvent)?this.yd=q:i(Error("Invalid listener argument"));this.Wa=a;this.Dd=c;this.src=d;this.type=e;this.capture=!!f;this.Sa=h;this.Zc=q;this.key=++zc;this.Fa=q};v.handleEvent=function(a){return this.yd?this.Wa.call(this.Sa||this.src,a):this.Wa.handleEvent.call(this.Wa,a)};var Ac={},M={},Bc={},Cc={};
function N(a,c,d,e,f){if(c){if(ha(c)){for(var h=0;h<c.length;h++)N(a,c[h],d,e,f);return p}var e=!!e,j=M;c in j||(j[c]={m:0,P:0});j=j[c];e in j||(j[e]={m:0,P:0},j.m++);var j=j[e],l=ka(a),n;j.P++;if(j[l]){n=j[l];for(h=0;h<n.length;h++)if(j=n[h],j.Wa==d&&j.Sa==f){if(j.Fa)break;return n[h].key}}else n=j[l]=[],j.m++;var t=Dc,z=oc?function(a){return t.call(z.src,z.key,a)}:function(a){a=t.call(z.src,z.key,a);if(!a)return a},h=z;h.src=a;j=new yc;j.init(d,h,a,c,e,f);d=j.key;h.key=d;n.push(j);Ac[d]=j;Bc[l]||
(Bc[l]=[]);Bc[l].push(j);a.addEventListener?(a==ba||!a.bd)&&a.addEventListener(c,h,e):a.attachEvent(c in Cc?Cc[c]:Cc[c]="on"+c,h);return d}i(Error("Invalid event type"))}function Ec(a,c,d,e,f){if(ha(c))for(var h=0;h<c.length;h++)Ec(a,c[h],d,e,f);else if(e=!!e,a=Fc(a,c,e))for(h=0;h<a.length;h++)if(a[h].Wa==d&&a[h].capture==e&&a[h].Sa==f){Gc(a[h].key);break}}
function Gc(a){if(!Ac[a])return q;var c=Ac[a];if(c.Fa)return q;var d=c.src,e=c.type,f=c.Dd,h=c.capture;d.removeEventListener?(d==ba||!d.bd)&&d.removeEventListener(e,f,h):d.detachEvent&&d.detachEvent(e in Cc?Cc[e]:Cc[e]="on"+e,f);d=ka(d);Bc[d]&&(f=Bc[d],F(f,c),0==f.length&&delete Bc[d]);c.Fa=m;if(c=M[e][h][d])c.Cd=m,Hc(e,h,d,c);delete Ac[a];return m}
function Hc(a,c,d,e){if(!e.Lb&&e.Cd){for(var f=0,h=0;f<e.length;f++)e[f].Fa?e[f].Dd.src=p:(f!=h&&(e[h]=e[f]),h++);e.length=h;e.Cd=q;0==h&&(delete M[a][c][d],M[a][c].m--,0==M[a][c].m&&(delete M[a][c],M[a].m--),0==M[a].m&&delete M[a])}}function Fc(a,c,d){var e=M;return c in e&&(e=e[c],d in e&&(e=e[d],a=ka(a),e[a]))?e[a]:p}
function Ic(a,c,d,e,f){var h=1,c=ka(c);if(a[c]){a.P--;a=a[c];a.Lb?a.Lb++:a.Lb=1;try{for(var j=a.length,l=0;l<j;l++){var n=a[l];n&&!n.Fa&&(h&=Jc(n,f)!==q)}}finally{a.Lb--,Hc(d,e,c,a)}}return Boolean(h)}function Jc(a,c){a.Zc&&Gc(a.key);return a.handleEvent(c)}
function Dc(a,c){if(!Ac[a])return m;var d=Ac[a],e=d.type,f=M;if(!(e in f))return m;var f=f[e],h,j;if(!oc){var l;if(!(l=c))a:{l=["window","event"];for(var n=ba;h=l.shift();)if(n[h]!=p)n=n[h];else{l=p;break a}l=n}h=l;l=m in f;n=q in f;if(l){if(0>h.keyCode||h.returnValue!=k)return m;a:{var t=q;if(0==h.keyCode)try{h.keyCode=-1;break a}catch(z){t=m}if(t||h.returnValue==k)h.returnValue=m}}t=new vc;t.init(h,this);h=m;try{if(l){for(var B=[],J=t.currentTarget;J;J=J.parentNode)B.push(J);j=f[m];j.P=j.m;for(var X=
B.length-1;!t.Da&&0<=X&&j.P;X--)t.currentTarget=B[X],h&=Ic(j,B[X],e,m,t);if(n){j=f[q];j.P=j.m;for(X=0;!t.Da&&X<B.length&&j.P;X++)t.currentTarget=B[X],h&=Ic(j,B[X],e,q,t)}}else h=Jc(d,t)}finally{B&&(B.length=0)}return h}e=new vc(c,this);return h=Jc(d,e)};function Kc(a){qc.call(this);this.rd=a;this.j=[]}y(Kc,qc);var Lc=[];function O(a,c,d,e,f){ha(d)||(Lc[0]=d,d=Lc);for(var h=0;h<d.length;h++){var j=N(c,d[h],e||a,f||q,a.rd||a);a.j.push(j)}return a}function Mc(a,c,d,e,f,h){if(ha(d))for(var j=0;j<d.length;j++)Mc(a,c,d[j],e,f,h);else{a:{e=e||a;h=h||a.rd||a;f=!!f;if(c=Fc(c,d,f))for(d=0;d<c.length;d++)if(!c[d].Fa&&c[d].Wa==e&&c[d].capture==f&&c[d].Sa==h){c=c[d];break a}c=p}c&&(c=c.key,Gc(c),F(a.j,c))}return a}
Kc.prototype.Sb=function(){E(this.j,Gc);this.j.length=0};Kc.prototype.handleEvent=function(){i(Error("EventHandler.handleEvent not implemented"))};function Nc(){qc.call(this)}y(Nc,qc);v=Nc.prototype;v.bd=m;v.Gc=p;v.Mc=function(a){this.Gc=a};v.addEventListener=function(a,c,d,e){N(this,a,c,d,e)};v.removeEventListener=function(a,c,d,e){Ec(this,a,c,d,e)};
v.dispatchEvent=function(a){var c=a.type||a,d=M;if(c in d){if(w(a))a=new sc(a,this);else if(a instanceof sc)a.target=a.target||this;else{var e=a,a=new sc(c,this);rb(a,e)}var e=1,f,d=d[c],c=m in d,h;if(c){f=[];for(h=this;h;h=h.Gc)f.push(h);h=d[m];h.P=h.m;for(var j=f.length-1;!a.Da&&0<=j&&h.P;j--)a.currentTarget=f[j],e&=Ic(h,f[j],a.type,m,a)&&a.Tb!=q}if(q in d)if(h=d[q],h.P=h.m,c)for(j=0;!a.Da&&j<f.length&&h.P;j++)a.currentTarget=f[j],e&=Ic(h,f[j],a.type,q,a)&&a.Tb!=q;else for(f=this;!a.Da&&f&&h.P;f=
f.Gc)a.currentTarget=f,e&=Ic(h,f,a.type,q,a)&&a.Tb!=q;a=Boolean(e)}else a=m;return a};function Oc(a,c,d,e){this.top=a;this.right=c;this.bottom=d;this.left=e}Oc.prototype.contains=function(a){return!this||!a?q:a instanceof Oc?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Pc(a,c,d,e){this.left=a;this.top=c;this.width=d;this.height=e}Pc.prototype.contains=function(a){return a instanceof Pc?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function P(a,c,d){w(c)?Qc(a,d,c):pb(c,qa(Qc,a))}function Qc(a,c,d){a.style[za(d)]=c}function Q(a,c){var d=ub(a);return d.defaultView&&d.defaultView.getComputedStyle&&(d=d.defaultView.getComputedStyle(a,p))?d[c]||d.getPropertyValue(c)||"":""}function Rc(a,c){return a.currentStyle?a.currentStyle[c]:p}function Sc(a,c){return Q(a,c)||Rc(a,c)||a.style&&a.style[c]}function Tc(a,c,d){var e,f=H&&(Oa||Va)&&K("1.9");c instanceof L?(e=c.x,c=c.y):(e=c,c=d);a.style.left=Uc(e,f);a.style.top=Uc(c,f)}
function Vc(a){var c=a.getBoundingClientRect();G&&(a=a.ownerDocument,c.left-=a.documentElement.clientLeft+a.body.clientLeft,c.top-=a.documentElement.clientTop+a.body.clientTop);return c}
function Wc(a){if(G&&!eb(8))return a.offsetParent;for(var c=ub(a),d=Sc(a,"position"),e="fixed"==d||"absolute"==d,a=a.parentNode;a&&a!=c;a=a.parentNode)if(d=Sc(a,"position"),e=e&&"static"==d&&a!=c.documentElement&&a!=c.body,!e&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==d||"absolute"==d||"relative"==d))return a;return p}
function Xc(a){var c,d=ub(a),e=Sc(a,"position"),f=H&&d.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==e&&(c=d.getBoxObjectFor(a))&&(0>c.screenX||0>c.screenY),h=new L(0,0),j;c=d?ub(d):document;if(j=G)if(j=!eb(9))sb(c),j=q;j=j?c.body:c.documentElement;if(a==j)return h;if(a.getBoundingClientRect)c=Vc(a),a=Fb(sb(d)),h.x=c.left+a.x,h.y=c.top+a.y;else if(d.getBoxObjectFor&&!f)c=d.getBoxObjectFor(a),a=d.getBoxObjectFor(j),h.x=c.screenX-a.screenX,h.y=c.screenY-a.screenY;else{f=a;do{h.x+=f.offsetLeft;
h.y+=f.offsetTop;f!=a&&(h.x+=f.clientLeft||0,h.y+=f.clientTop||0);if(I&&"fixed"==Sc(f,"position")){h.x+=d.body.scrollLeft;h.y+=d.body.scrollTop;break}f=f.offsetParent}while(f&&f!=a);if(Ta||I&&"absolute"==e)h.y-=d.body.offsetTop;for(f=a;(f=Wc(f))&&f!=d.body&&f!=j;)if(h.x-=f.scrollLeft,!Ta||"TR"!=f.tagName)h.y-=f.scrollTop}return h}function Yc(a,c){var d=Zc(a),e=Zc(c);return new L(d.x-e.x,d.y-e.y)}
function Zc(a){var c=new L;if(1==a.nodeType){if(a.getBoundingClientRect){var d=Vc(a);c.x=d.left;c.y=d.top}else{var d=Fb(sb(a)),e=Xc(a);c.x=e.x-d.x;c.y=e.y-d.y}if(H&&!K(12)){var f;G?f="-ms-transform":I?f="-webkit-transform":Ta?f="-o-transform":H&&(f="-moz-transform");var h;f&&(h=Sc(a,f));h||(h=Sc(a,"transform"));h?(a=h.match($c),a=!a?new L(0,0):new L(parseFloat(a[1]),parseFloat(a[2]))):a=new L(0,0);c=new L(c.x+a.x,c.y+a.y)}}else f=x(a.Qd),h=a,a.targetTouches?h=a.targetTouches[0]:f&&a.n.targetTouches&&
(h=a.n.targetTouches[0]),c.x=h.clientX,c.y=h.clientY;return c}function ad(a,c,d){c instanceof ob?(d=c.height,c=c.width):d==k&&i(Error("missing height argument"));a.style.width=Uc(c,m);a.style.height=Uc(d,m)}function Uc(a,c){"number"==typeof a&&(a=(c?Math.round(a):a)+"px");return a}
function bd(a){if("none"!=Sc(a,"display"))return cd(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=cd(a);c.display=d;c.position=f;c.visibility=e;return a}function cd(a){var c=a.offsetWidth,d=a.offsetHeight,e=I&&!c&&!d;return(!da(c)||e)&&a.getBoundingClientRect?(a=Vc(a),new ob(a.right-a.left,a.bottom-a.top)):new ob(c,d)}function dd(a){var c=Xc(a),a=bd(a);return new Pc(c.x,c.y,a.width,a.height)}
function S(a,c){var d=a.style;"opacity"in d?d.opacity=c:"MozOpacity"in d?d.MozOpacity=c:"filter"in d&&(d.filter=""===c?"":"alpha(opacity="+100*c+")")}function T(a,c){a.style.display=c?"":"none"}function ed(a){return"rtl"==Sc(a,"direction")}var fd=H?"MozUserSelect":I?"WebkitUserSelect":p;
function gd(a,c){if(/^\d+px?$/.test(c))return parseInt(c,10);var d=a.style.left,e=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=c;var f=a.style.pixelLeft;a.style.left=d;a.runtimeStyle.left=e;return f}
function hd(a,c){if(G){var d=gd(a,Rc(a,c+"Left")),e=gd(a,Rc(a,c+"Right")),f=gd(a,Rc(a,c+"Top")),h=gd(a,Rc(a,c+"Bottom"));return new Oc(f,e,h,d)}d=Q(a,c+"Left");e=Q(a,c+"Right");f=Q(a,c+"Top");h=Q(a,c+"Bottom");return new Oc(parseFloat(f),parseFloat(e),parseFloat(h),parseFloat(d))}var id={thin:2,medium:4,thick:6};function jd(a,c){if("none"==Rc(a,c+"Style"))return 0;var d=Rc(a,c+"Width");return d in id?id[d]:gd(a,d)}
function kd(a){if(G){var c=jd(a,"borderLeft"),d=jd(a,"borderRight"),e=jd(a,"borderTop"),a=jd(a,"borderBottom");return new Oc(e,d,a,c)}c=Q(a,"borderLeftWidth");d=Q(a,"borderRightWidth");e=Q(a,"borderTopWidth");a=Q(a,"borderBottomWidth");return new Oc(parseFloat(e),parseFloat(d),parseFloat(a),parseFloat(c))}var $c=/matrix\([0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, [0-9\.\-]+, ([0-9\.\-]+)p?x?, ([0-9\.\-]+)p?x?\)/;function ld(a,c,d){qc.call(this);this.target=a;this.handle=c||a;this.Bc=d||new Pc(NaN,NaN,NaN,NaN);this.N=ub(a);this.oa=new Kc(this);N(this.handle,["touchstart","mousedown"],this.he,q,this)}y(ld,Nc);var md=G||H&&K("1.9.3");v=ld.prototype;v.clientX=0;v.clientY=0;v.screenX=0;v.screenY=0;v.Hd=0;v.Id=0;v.Ma=0;v.Na=0;v.gd=m;v.Aa=q;v.ud=0;v.$d=0;v.Xd=q;v.Nc=q;v.Fb=u("oa");function nd(a){da(a.va)||(a.va=ed(a.target));return a.va}
v.he=function(a){var c="mousedown"==a.type;if(this.gd&&!this.Aa&&(!c||xc(a))){od(a);if(0==this.ud)if(this.dispatchEvent(new pd("start",this,a.clientX,a.clientY,a)))this.Aa=m,a.preventDefault();else return;else a.preventDefault();var c=this.N,d=c.documentElement,e=!md;O(this.oa,c,["touchmove","mousemove"],this.Vd,e);O(this.oa,c,["touchend","mouseup"],this.Db,e);md?(d.setCapture(q),O(this.oa,d,"losecapture",this.Db)):O(this.oa,c?c.parentWindow||c.defaultView:window,"blur",this.Db);G&&this.Xd&&O(this.oa,
c,"dragstart",tc);this.fe&&O(this.oa,this.fe,"scroll",this.ce,e);this.clientX=this.Hd=a.clientX;this.clientY=this.Id=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.Nc?(a=this.target,c=a.offsetLeft,d=a.offsetParent,!d&&"fixed"==Sc(a,"position")&&(d=ub(a).documentElement),d?(H?(e=kd(d),c+=e.left):eb(8)&&(e=kd(d),c-=e.left),a=ed(d)?d.clientWidth-(c+a.offsetWidth):c):a=c):a=this.target.offsetLeft;this.Ma=a;this.Na=this.target.offsetTop;this.Fc=Fb(sb(this.N));this.$d=ra()}else this.dispatchEvent("earlycancel")};
v.Db=function(a,c){this.oa.Sb();md&&this.N.releaseCapture();if(this.Aa){od(a);this.Aa=q;var d=qd(this,this.Ma),e=rd(this,this.Na);this.dispatchEvent(new pd("end",this,a.clientX,a.clientY,a,d,e,c||"touchcancel"==a.type))}else this.dispatchEvent("earlycancel");("touchend"==a.type||"touchcancel"==a.type)&&a.preventDefault()};
function od(a){var c=a.type;"touchstart"==c||"touchmove"==c?a.init(a.n.targetTouches[0],a.currentTarget):("touchend"==c||"touchcancel"==c)&&a.init(a.n.changedTouches[0],a.currentTarget)}
v.Vd=function(a){if(this.gd){od(a);var c=(this.Nc&&nd(this)?-1:1)*(a.clientX-this.clientX),d=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.Aa){var e=this.Hd-this.clientX,f=this.Id-this.clientY;if(e*e+f*f>this.ud)if(this.dispatchEvent(new pd("start",this,a.clientX,a.clientY,a)))this.Aa=m;else{this.fd||this.Db(a);return}}d=sd(this,c,d);c=d.x;d=d.y;this.Aa&&this.dispatchEvent(new pd("beforedrag",this,a.clientX,a.clientY,a,
c,d))&&(td(this,a,c,d),a.preventDefault())}};function sd(a,c,d){var e=Fb(sb(a.N)),c=c+(e.x-a.Fc.x),d=d+(e.y-a.Fc.y);a.Fc=e;a.Ma+=c;a.Na+=d;c=qd(a,a.Ma);a=rd(a,a.Na);return new L(c,a)}v.ce=function(a){var c=sd(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;td(this,a,c.x,c.y)};function td(a,c,d,e){a.ed(d,e);a.dispatchEvent(new pd("drag",a,c.clientX,c.clientY,c,d,e))}
function qd(a,c){var d=a.Bc,e=!isNaN(d.left)?d.left:p,d=!isNaN(d.width)?d.width:0;return Math.min(e!=p?e+d:Infinity,Math.max(e!=p?e:-Infinity,c))}function rd(a,c){var d=a.Bc,e=!isNaN(d.top)?d.top:p,d=!isNaN(d.height)?d.height:0;return Math.min(e!=p?e+d:Infinity,Math.max(e!=p?e:-Infinity,c))}v.ed=function(a,c){this.Nc&&nd(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=c+"px"};
function pd(a,c,d,e,f,h,j,l){sc.call(this,a);this.clientX=d;this.clientY=e;this.me=f;this.left=da(h)?h:c.Ma;this.top=da(j)?j:c.Na;this.qe=c;this.pe=!!l}y(pd,sc);function ud(a){for(var c=0,d=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)c+=a.offsetLeft-a.scrollLeft,d+=a.offsetTop-a.scrollTop,a=a.offsetParent;return{top:d,left:c}};function vd(){this.yb=[]}vd.prototype.addHandler=function(a,c){this.yb[a]||(this.yb[a]=[]);this.yb[a].push(c)};vd.prototype.fireEvent=function(a,c,d){var e=q;(a=this.yb[a])&&E(a,function(a){a=a(c,d);da(a)&&!a&&(e=m)});return e};function wd(a,c){this.$={};this.j=[];var d=arguments.length;if(1<d){d%2&&i(Error("Uneven number of arguments"));for(var e=0;e<d;e+=2)this.set(arguments[e],arguments[e+1])}else if(a){var f;if(a instanceof wd)xd(a),f=a.j.concat(),e=U(a);else{var d=[],h=0;for(f in a)d[h++]=f;f=d;d=[];h=0;for(e in a)d[h++]=a[e];e=d}for(d=0;d<f.length;d++)this.set(f[d],e[d])}}v=wd.prototype;v.m=0;v.Oc=0;function U(a){xd(a);for(var c=[],d=0;d<a.j.length;d++)c.push(a.$[a.j[d]]);return c}
v.clear=function(){this.$={};this.Oc=this.m=this.j.length=0};v.remove=function(a){return yd(this.$,a)?(delete this.$[a],this.m--,this.Oc++,this.j.length>2*this.m&&xd(this),m):q};function xd(a){if(a.m!=a.j.length){for(var c=0,d=0;c<a.j.length;){var e=a.j[c];yd(a.$,e)&&(a.j[d++]=e);c++}a.j.length=d}if(a.m!=a.j.length){for(var f={},d=c=0;c<a.j.length;)e=a.j[c],yd(f,e)||(a.j[d++]=e,f[e]=1),c++;a.j.length=d}}v.get=function(a,c){return yd(this.$,a)?this.$[a]:c};
v.set=function(a,c){yd(this.$,a)||(this.m++,this.j.push(a),this.Oc++);this.$[a]=c};function yd(a,c){return Object.prototype.hasOwnProperty.call(a,c)};function zd(a,c){this.x=a;this.y=c};function Ad(a){this.points=a}function Bd(a){for(var c=0,d=a.length-1,e=0;e<a.length;e++)c+=(a[d].x+a[e].x)*(a[d].y-a[e].y),d=e;return c/2}
function Cd(a,c){for(var d,e=d=0,f,h=a.length-1,j=0;j<a.length;j++)f=a[j].x*a[h].y-a[h].x*a[j].y,d+=(a[j].x+a[h].x)*f,e+=(a[j].y+a[h].y)*f,h=j;f=6*Bd(a);d=new zd(Math.abs(d/f),Math.abs(e/f));e=[];for(f=0;f<a.length;f++){var h=a[f],l=(0>Bd(a)?-1:1)*c,j=h.x-d.x,n=h.y-d.y,t=0<l?1:0>l?-1:0,l=Math.sqrt(Math.pow(l,2)/(1+Math.pow(j/n,2)));e.push({x:h.x+Math.abs(j/n*l)*(0<j?1:0>j?-1:0)*t,y:h.y+Math.abs(l)*(0<n?1:0>n?-1:0)*t})}return e};function Dd(a,c,d,e){0<d?(this.x=a,this.width=d):(this.x=a+d,this.width=-d);0<e?(this.y=c,this.height=e):(this.y=c+e,this.height=-e)};function Ed(a,c,d,e){this.type=a;this.geometry=c;d&&(this.units=d);this.style=e?e:{}}function Fd(a){return"rect"==a.type?a.geometry.width*a.geometry.height:"polygon"==a.type?Math.abs(Bd(a.geometry.points)):0}function Gd(a){if("rect"==a.type)return a;if("polygon"==a.type){for(var c=a.geometry.points,d=c[0].x,e=c[0].x,f=c[0].y,h=c[0].y,j=1;j<c.length;j++)c[j].x>e&&(e=c[j].x),c[j].x<d&&(d=c[j].x),c[j].y>h&&(h=c[j].y),c[j].y<f&&(f=c[j].y);return new Ed("rect",new Dd(d,f,e-d,h-f),q,a.style)}}
function Hd(a,c){var d;d=a.geometry.points;var e=0>Bd(d)?-1:1;if(4>d.length)d=Cd(d,e*c);else{for(var f=d.length-1,h=1,j=[],l=0;l<d.length;l++)f=Cd([d[f],d[l],d[h]],e*c),j.push(f[1]),f=l,h++,h>d.length-1&&(h=0);d=j}return new Ed("polygon",new Ad(d),q,a.style)}function Id(a,c){if("rect"==a.type){var d=c(a.geometry);return new Ed("rect",d,q,a.style)}if("polygon"==a.type){var e=[];E(a.geometry.points,function(a){e.push(c(a))});return new Ed("polygon",new Ad(e),q,a.style)}}
function Jd(a){return JSON.stringify(a.geometry)};function Kd(a,c,d){this.src=a;this.text=c;this.shapes=[d];this.context=document.URL};function Ld(){}function Md(a,c){a.h=new wd;a.ub=new wd;a.Rc=[];a.cb=[];a.Ja=[];a.Ha=[];a.gc=[];a.wb={Ua:q,Ta:q};a.Ia=new wd;a.ic=k;a.Wc=c}function Nd(a,c){var d=a.Ia.get(c);d||(d={Ua:q,Ta:q},a.Ia.set(c,d));return d}
function Od(a,c){var d=a.Gb(c),e=c.id;if(!("undefined"!==typeof e&&a.ub.get(e))){var f=a.Ec(c);if("undefined"===typeof e||""===e)e=a.ub.m+1,c.setAttribute("id","annotorious_"+e.toString());a.ub.set(e,f);var h=[],j=[];E(a.Rc,function(a){f.addHandler(a.type,a.Sa)});E(a.cb,function(a){if(a.onInitAnnotator)a.onInitAnnotator(f)});E(a.Ha,function(a){a.src==d&&(f.J(a),h.push(a))});E(a.gc,function(a){a.src==d&&(f.A(a),j.push(a))});E(h,function(c){F(a.Ha,c)});E(j,function(c){F(a.gc,c)});(e=a.Ia.get(d))?(e.Ua&&
f.O(),e.Ta&&f.ha(),a.Ia.remove(d)):(a.wb.Ua&&f.O(),a.wb.Ta&&f.ha());a.ic&&f.ja(a.ic);a.h.set(d,f);F(a.Ja,c)}}function Pd(a){var c,d;for(d=a.Ja.length;0<d;d--){for(var e=c=a.Ja[d-1],f=e.offsetTop,h=e.offsetLeft,j=e.offsetWidth,l=e.offsetHeight;e.offsetParent;)e=e.offsetParent,f+=e.offsetTop,h+=e.offsetLeft;f<window.pageYOffset+window.innerHeight&&(h<window.pageXOffset+window.innerWidth&&f+l>window.pageYOffset&&h+j>window.pageXOffset)&&Od(a,c)}}
function Qd(a,c,d){if(c){var e=a.h.get(c);e?d?e.Ga():e.ha():Nd(a,c).Ta=d}else E(U(a.h),function(a){d?a.Ga():a.ha()}),a.wb.Ta=!d,E(U(a.Ia),function(a){a.Ta=!d})}function Rd(a,c,d){if(c){var e=a.h.get(c);e?d?e.aa():e.O():Nd(a,c).Ua=d}else E(U(a.h),function(a){d?a.aa():a.O()}),a.wb.Ua=!d,E(U(a.Ia),function(a){a.Ua=!d})}v=Ld.prototype;v.ca=function(a,c){var d=k,e=k;w(a)?(d=a,e=c):x(a)&&(e=a);d?(d=this.h.get(d))&&d.ca(e):E(U(this.h),function(a){a.ca(e)})};
v.J=function(a,c){if(Sd(this,a.src)){var d=this.h.get(a.src);d?d.J(a,c):(this.Ha.push(a),c&&F(this.Ha,c))}};v.addHandler=function(a,c){E(U(this.h),function(d){d.addHandler(a,c)});this.Rc.push({type:a,Sa:c})};v.Ab=function(a){this.cb.push(a);E(U(this.h),function(c){if(a.onInitAnnotator)a.onInitAnnotator(c)})};function Sd(a,c){return yd(a.h.$,c)?m:Ea(a.Ja,function(d){return a.Gb(d)==c})!=p}v.vc=function(){E(U(this.ub),function(a){console.log(a)})};
v.destroy=function(a){if(a){var c=this.h.get(a);c&&(c.destroy(),this.h.remove(a))}else E(U(this.h),function(a){a.destroy()}),this.h.clear()};v.pa=function(a){if(Sd(this,a)&&(a=this.h.get(a)))return a.pa().getName()};v.v=function(a){if(a){var c=this.h.get(a);return c?c.v():Ba(this.Ha,function(c){return c.src==a})}var d=[];E(U(this.h),function(a){Ha(d,a.v())});Ha(d,this.Ha);return d};v.fa=function(a){if(a){if(a=this.h.get(a))return a.fa()}else{var c=[];E(U(this.h),function(a){Ha(c,a.fa())});return c}};
v.ga=function(a){if(Sd(this,a)&&(a=this.h.get(a)))return Ca(a.ga(),function(a){return a.getName()})};v.ha=function(a){Qd(this,a,q)};v.O=function(a){Rd(this,a,q)};v.r=function(a){if(a){if(Sd(this,a.src)){var c=this.h.get(a.src);c&&c.r(a)}}else E(U(this.h),function(a){a.r()})};v.init=function(){this.Wc&&Ha(this.Ja,this.Wc());Pd(this);var a=this,c=N(window,"scroll",function(){0<a.Ja.length?Pd(a):Gc(c)})};v.Cc=function(a){this.Vb(a)&&Od(this,a)};
v.A=function(a){if(Sd(this,a.src)){var c=this.h.get(a.src);c?c.A(a):this.gc.push(a)}};v.Ic=function(a){this.h.get(a).stopSelection()};v.tb=function(a,c){if(Sd(this,a)){var d=this.h.get(a);d&&d.Fd(c)}};v.ja=function(a){this.ic=a;E(U(this.h),function(c){c.ja(a)})};v.ua=function(a,c){if(a){var d=this.h.get(a);d&&d.ua(c)}};v.Ga=function(a){Qd(this,a,m)};v.aa=function(a){Rd(this,a,m)};function Td(a,c){var d=sb().createElement("DIV");d.innerHTML=a(c||Ud,k,k);if(1==d.childNodes.length){var e=d.firstChild;if(1==e.nodeType)return e}return d}var Ud={};function Vd(a,c){a!=p&&this.append.apply(this,arguments)}v=Vd.prototype;v.za="";v.set=function(a){this.za=""+a};v.append=function(a,c,d){this.za+=a;if(c!=p)for(var e=1;e<arguments.length;e++)this.za+=arguments[e];return this};v.clear=function(){this.za=""};v.toString=u("za");/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

*/
function Wd(){}
var Xd={se:"<",re:">",ke:"&",te:"\u00a0",ve:'"',le:"'"},Yd={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:20,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,
ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:20,select:0,small:0,span:0,strike:0,strong:0,style:20,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},Zd=/&/g,$d=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,ae=/</g,be=/>/g,ce=/\"/g,de=/=/g,ee=/\0/g,fe=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,ge=/^#(\d+)$/,he=/^#x([0-9A-Fa-f]+)$/,ie=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[^a-z\\s>]+)",
"i"),je=RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<[!]--[\\s\\S]*?--\>|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");
Wd.prototype.parse=function(a,c){var d=p,e=q,f=[],h,j,l;a.R=[];for(a.ra=q;c;){var n=c.match(e?ie:je),c=c.substring(n[0].length);if(e)if(n[1]){var t=n[1].toLowerCase();if(n[2]){n=n[3];switch(n.charCodeAt(0)){case 34:case 39:n=n.substring(1,n.length-1)}n=n.replace(ee,"").replace(fe,pa(this.Yd,this))}else n=t;f.push(t,n)}else n[4]&&(j!==k&&(l?a.Gd&&a.Gd(h,f):a.hd&&a.hd(h)),l&&j&12&&(d=d===p?c.toLowerCase():d.substring(d.length-c.length),e=d.indexOf("</"+h),0>e&&(e=c.length),j&4?a.$c&&a.$c(c.substring(0,
e)):a.Ed&&a.Ed(c.substring(0,e).replace($d,"&amp;$1").replace(ae,"&lt;").replace(be,"&gt;")),c=c.substring(e)),h=j=l=k,f.length=0,e=q);else if(n[1])ke(a,n[0]);else if(n[3])l=!n[2],e=m,h=n[3].toLowerCase(),j=Yd.hasOwnProperty(h)?Yd[h]:k;else if(n[4])ke(a,n[4]);else if(n[5])switch(n[5]){case "<":ke(a,"&lt;");break;case ">":ke(a,"&gt;");break;default:ke(a,"&amp;")}}for(d=a.R.length;0<=--d;)a.ka.append("</",a.R[d],">");a.R.length=0};
Wd.prototype.Yd=function(a){a=a.toLowerCase();if(Xd.hasOwnProperty(a))return Xd[a];var c=a.match(ge);return c?String.fromCharCode(parseInt(c[1],10)):(c=a.match(he))?String.fromCharCode(parseInt(c[1],16)):""};function le(){};/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

// Copyright (C) 2006 Google Inc.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

*/
function me(a,c,d){this.ka=a;this.R=[];this.ra=q;this.Kd=c;this.Ob=d}y(me,le);
var ne={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"*::accesskey":0,"*::tabindex":0,"*::onfocus":2,"*::onblur":2,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,
"area::href":1,"area::nohref":0,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,
"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,
"img::hspace":0,"img::ismap":0,"img::longdesc":1,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::autocomplete":0,"input::align":0,"input::alt":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,
"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,
"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,
"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,
"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};
me.prototype.Gd=function(a,c){if(!this.ra&&Yd.hasOwnProperty(a)){var d=Yd[a];if(!(d&32))if(d&16)this.ra=!(d&2);else{for(var e=c,f=0;f<e.length;f+=2){var h=e[f],j=e[f+1],l=p,n;if((n=a+"::"+h,ne.hasOwnProperty(n))||(n="*::"+h,ne.hasOwnProperty(n)))l=ne[n];if(l!==p)switch(l){case 0:break;case 2:case 3:j=p;break;case 4:case 5:case 6:case 7:case 8:case 9:j=this.Ob?this.Ob(j):j;break;case 1:j=this.Kd&&this.Kd(j);break;case 11:j&&"#"===j.charAt(0)?(j=this.Ob?this.Ob(j):j)&&(j="#"+j):j=p;break;default:j=
p}else j=p;e[f+1]=j}if(c=e){d&2||this.R.push(a);this.ka.append("<",a);d=0;for(e=c.length;d<e;d+=2)f=c[d],h=c[d+1],h!==p&&h!==k&&this.ka.append(" ",f,'="',h.replace(Zd,"&amp;").replace(ae,"&lt;").replace(be,"&gt;").replace(ce,"&#34;").replace(de,"&#61;"),'"');this.ka.append(">")}}}};
me.prototype.hd=function(a){if(this.ra)this.ra=q;else if(Yd.hasOwnProperty(a)){var c=Yd[a];if(!(c&50)){if(c&1)for(c=this.R.length;0<=--c;){var d=this.R[c];if(d===a)break;if(!(Yd[d]&1))return}else for(c=this.R.length;0<=--c&&this.R[c]!==a;);if(!(0>c)){for(var e=this.R.length;--e>c;)d=this.R[e],Yd[d]&1||this.ka.append("</",d,">");this.R.length=c;this.ka.append("</",a,">")}}}};function ke(a,c){a.ra||a.ka.append(c)}me.prototype.Ed=function(a){this.ra||this.ka.append(a)};
me.prototype.$c=function(a){this.ra||this.ka.append(a)};function oe(a,c,d,e,f){if(!G&&(!I||!K("525")))return m;if(Oa&&f)return pe(a);if(f&&!e||!d&&(17==c||18==c)||G&&e&&c==a)return q;switch(a){case 13:return!(G&&eb(9));case 27:return!I}return pe(a)}function pe(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||I&&0==a)return m;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return m;default:return q}}
function qe(a){switch(a){case 61:return 187;case 59:return 186;case 224:return 91;case 0:return 224;default:return a}};function re(a,c){qc.call(this);a&&se(this,a,c)}y(re,Nc);v=re.prototype;v.F=p;v.Jb=p;v.zc=p;v.Kb=p;v.ta=-1;v.sa=-1;v.qc=q;
var te={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},ue={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},ve=G||I&&K("525"),we=Oa&&H;v=re.prototype;
v.Sd=function(a){if(I&&(17==this.ta&&!a.ctrlKey||18==this.ta&&!a.altKey))this.sa=this.ta=-1;ve&&!oe(a.keyCode,this.ta,a.shiftKey,a.ctrlKey,a.altKey)?this.handleEvent(a):(this.sa=H?qe(a.keyCode):a.keyCode,we&&(this.qc=a.altKey))};v.Ud=function(a){this.sa=this.ta=-1;this.qc=a.altKey};
v.handleEvent=function(a){var c=a.n,d,e,f=c.altKey;G&&"keypress"==a.type?(d=this.sa,e=13!=d&&27!=d?c.keyCode:0):I&&"keypress"==a.type?(d=this.sa,e=0<=c.charCode&&63232>c.charCode&&pe(d)?c.charCode:0):Ta?(d=this.sa,e=pe(d)?c.keyCode:0):(d=c.keyCode||this.sa,e=c.charCode||0,we&&(f=this.qc),Oa&&(63==e&&224==d)&&(d=191));var h=d,j=c.keyIdentifier;d?63232<=d&&d in te?h=te[d]:25==d&&a.shiftKey&&(h=9):j&&j in ue&&(h=ue[j]);a=h==this.ta;this.ta=h;c=new xe(h,e,a,c);c.altKey=f;this.dispatchEvent(c)};v.d=u("F");
function se(a,c,d){a.Kb&&a.detach();a.F=c;a.Jb=N(a.F,"keypress",a,d);a.zc=N(a.F,"keydown",a.Sd,d,a);a.Kb=N(a.F,"keyup",a.Ud,d,a)}v.detach=function(){this.Jb&&(Gc(this.Jb),Gc(this.zc),Gc(this.Kb),this.Kb=this.zc=this.Jb=p);this.F=p;this.sa=this.ta=-1};function xe(a,c,d,e){e&&this.init(e,k);this.type="key";this.keyCode=a;this.charCode=c;this.repeat=d}y(xe,vc);function ye(){}fa(ye);ye.prototype.be=0;ye.qb();function ze(a){qc.call(this);this.mb=a||sb();this.va=Ae}y(ze,Nc);ze.prototype.Wd=ye.qb();var Ae=p;function Be(a,c){switch(a){case 1:return c?"disable":"enable";case 2:return c?"highlight":"unhighlight";case 4:return c?"activate":"deactivate";case 8:return c?"select":"unselect";case 16:return c?"check":"uncheck";case 32:return c?"focus":"blur";case 64:return c?"open":"close"}i(Error("Invalid component state"))}v=ze.prototype;v.Ib=p;v.ia=q;v.F=p;v.va=p;v.Ca=p;v.jb=p;v.La=p;v.je=q;v.d=u("F");
v.Fb=function(){return this.xc||(this.xc=new Kc(this))};v.Mc=function(a){this.Ca&&this.Ca!=a&&i(Error("Method not supported"));ze.K.Mc.call(this,a)};v.kd=u("mb");v.lb=function(a){this.ia&&i(Error("Component already rendered"));if(a&&this.ib(a)){this.je=m;if(!this.mb||this.mb.N!=ub(a))this.mb=sb(a);this.cd(a);this.Oa()}else i(Error("Invalid element to decorate"))};v.ib=aa(m);v.cd=function(a){this.F=a};v.Oa=function(){function a(a){!a.ia&&a.d()&&a.Oa()}this.ia=m;this.jb&&E(this.jb,a,k)};
v.Eb=function(){function a(a){a.ia&&a.Eb()}this.jb&&E(this.jb,a,k);this.xc&&this.xc.Sb();this.ia=q};v.ob=u("F");v.Ya=function(a){this.ia&&i(Error("Component already rendered"));this.va=a};
v.removeChild=function(a,c){if(a){var d=w(a)?a:a.Ib||(a.Ib=":"+(a.Wd.be++).toString(36)),e;this.La&&d?(e=this.La,e=(d in e?e[d]:k)||p):e=p;a=e;d&&a&&(e=this.La,d in e&&delete e[d],F(this.jb,a),c&&(a.Eb(),a.F&&Bb(a.F)),d=a,d==p&&i(Error("Unable to set parent component")),d.Ca=p,ze.K.Mc.call(d,p))}a||i(Error("Child is not in parent component"));return a};function Ce(){}var De;fa(Ce);v=Ce.prototype;v.ob=function(a){return a};v.nb=function(a,c,d){if(a=a.d?a.d():a)if(G&&!K("7")){var e=Ee(ib(a),c);e.push(c);qa(d?jb:lb,a).apply(p,e)}else d?jb(a,c):lb(a,c)};v.ib=aa(m);
v.lb=function(a,c){if(c.id){var d=c.id;if(a.Ca&&a.Ca.La){var e=a.Ca.La,f=a.Ib;f in e&&delete e[f];e=a.Ca.La;d in e&&i(Error('The object already contains the key "'+d+'"'));e[d]=a}a.Ib=d}(d=this.ob(c))&&d.firstChild?(d=d.firstChild.nextSibling?Ga(d.childNodes):d.firstChild,a.kb=d):a.kb=p;var h=0,j=this.pb(),l=this.pb(),n=q,t=q,d=q,e=ib(c);E(e,function(a){if(!n&&a==j)n=m,l==j&&(t=m);else if(!t&&a==l)t=m;else{var c=h;if(!this.Jd){this.Cb||Fe(this);var d=this.Cb,e={},f;for(f in d)e[d[f]]=f;this.Jd=e}a=
parseInt(this.Jd[a],10);h=c|(isNaN(a)?0:a)}},this);a.t=h;n||(e.push(j),l==j&&(t=m));t||e.push(l);(f=a.ea)&&e.push.apply(e,f);if(G&&!K("7")){var z=Ee(e);0<z.length&&(e.push.apply(e,z),d=m)}if(!n||!t||f||d)c.className=e.join(" ");a.isEnabled()||this.Za(c,1,m);a.t&8&&this.Za(c,8,m);a.W&16&&this.Za(c,16,!!(a.t&16));a.W&64&&this.Za(c,64,!!(a.t&64));return c};
v.Ub=function(a,c){var d=!c,e=G||Ta?a.getElementsByTagName("*"):p;if(fd){if(d=d?"none":"",a.style[fd]=d,e)for(var f=0,h;h=e[f];f++)h.style[fd]=d}else if(G||Ta)if(d=d?"on":"",a.setAttribute("unselectable",d),e)for(f=0;h=e[f];f++)h.setAttribute("unselectable",d)};v.Ya=function(a,c){this.nb(a,this.pb()+"-rtl",c)};v.xd=function(a){var c;return a.W&32&&(c=a.Qa())?Eb(c):q};
v.Lc=function(a,c){var d;if(a.W&32&&(d=a.Qa())){if(!c&&a.t&32){try{d.blur()}catch(e){}a.t&32&&a.ld()}Eb(d)!=c&&(c?d.tabIndex=0:(d.tabIndex=-1,d.removeAttribute("tabIndex")))}};v.Q=function(a,c,d){var e=a.d();if(e){var f;this.Cb||Fe(this);(f=this.Cb[c])&&this.nb(a,f,d);this.Za(e,c,d)}};v.Za=function(a,c,d){De||(De={1:"disabled",8:"selected",16:"checked",64:"expanded"});(c=De[c])&&a.setAttribute("aria-"+c,d)};
v.wa=function(a,c){var d=this.ob(a);if(d&&(Ab(d),c))if(w(c))if("textContent"in d)d.textContent=c;else if(d.firstChild&&3==d.firstChild.nodeType){for(;d.lastChild!=d.firstChild;)d.removeChild(d.lastChild);d.firstChild.data=c}else Ab(d),d.appendChild(ub(d).createTextNode(c));else{var e=function(a){if(a){var c=ub(d);d.appendChild(w(a)?c.createTextNode(a):a)}};ha(c)?E(c,e):ia(c)&&!("nodeType"in c)?E(Ga(c),e):e(c)}};v.Qa=function(a){return a.d()};v.pb=aa("goog-control");
function Ee(a,c){var d=[];c&&(a=a.concat([c]));E([],function(e){Da(e,qa(Fa,a))&&(!c||Fa(e,c))&&d.push(e.join("_"))});return d}function Fe(a){var c=a.pb();a.Cb={1:c+"-disabled",2:c+"-hover",4:c+"-active",8:c+"-selected",16:c+"-checked",32:c+"-focused",64:c+"-open"}};var Ge={};function He(a,c,d){ze.call(this,d);if(!c){for(var c=this.constructor,e;c;){e=ka(c);if(e=Ge[e])break;c=c.K?c.K.constructor:p}c=e?x(e.qb)?e.qb():new e:p}this.G=c;this.kb=a}y(He,ze);v=He.prototype;v.kb=p;v.t=0;v.W=39;v.sc=255;v.ie=0;v.Xb=m;v.ea=p;v.yc=m;v.pc=q;v.ee=p;function Ie(a){a.ia&&q!=a.yc&&Je(a,q);a.yc=q}v.Qa=function(){return this.G.Qa(this)};
v.nb=function(a,c){c?a&&(this.ea?Fa(this.ea,a)||this.ea.push(a):this.ea=[a],this.G.nb(this,a,m)):a&&this.ea&&(F(this.ea,a),0==this.ea.length&&(this.ea=p),this.G.nb(this,a,q))};v.ob=function(){return this.G.ob(this.d())};v.ib=function(a){return this.G.ib(a)};v.cd=function(a){this.F=a=this.G.lb(this,a);var c=this.ee||k;c&&a.setAttribute("role",c);this.pc||this.G.Ub(a,q);this.Xb="none"!=a.style.display};
v.Oa=function(){He.K.Oa.call(this);var a=this.G;this.va==p&&(this.va=ed(this.ia?this.F:this.mb.N.body));this.va&&a.Ya(this.d(),m);this.isEnabled()&&a.Lc(this,this.Xb);if(this.W&-2&&(this.yc&&Je(this,m),this.W&32&&(a=this.Qa()))){var c=this.Ac||(this.Ac=new re);se(c,a);O(O(O(this.Fb(),c,"key",this.Td),a,"focus",this.Rd),a,"blur",this.ld)}};
function Je(a,c){var d=a.Fb(),e=a.d();c?(O(O(O(O(d,e,"mouseover",a.pd),e,"mousedown",a.nd),e,"mouseup",a.qd),e,"mouseout",a.od),a.Hb!=ea&&O(d,e,"contextmenu",a.Hb),G&&O(d,e,"dblclick",a.md)):(Mc(Mc(Mc(Mc(d,e,"mouseover",a.pd),e,"mousedown",a.nd),e,"mouseup",a.qd),e,"mouseout",a.od),a.Hb!=ea&&Mc(d,e,"contextmenu",a.Hb),G&&Mc(d,e,"dblclick",a.md))}v.Eb=function(){He.K.Eb.call(this);this.Ac&&this.Ac.detach();this.Xb&&this.isEnabled()&&this.G.Lc(this,q)};
v.wa=function(a){this.G.wa(this.d(),a);this.kb=a};v.Ya=function(a){He.K.Ya.call(this,a);var c=this.d();c&&this.G.Ya(c,a)};v.Ub=function(a){this.pc=a;var c=this.d();c&&this.G.Ub(c,a)};v.isEnabled=function(){return!(this.t&1)};function Ke(a,c){Le(a,2,c)&&a.Q(2,c)}v.setActive=function(a){Le(this,4,a)&&this.Q(4,a)};v.Q=function(a,c){this.W&a&&c!=!!(this.t&a)&&(this.G.Q(this,a,c),this.t=c?this.t|a:this.t&~a)};function V(a,c){return!!(a.sc&c)&&!!(a.W&c)}
function Le(a,c,d){return!!(a.W&c)&&!!(a.t&c)!=d&&(!(a.ie&c)||a.dispatchEvent(Be(c,d)))&&!a.fd}v.pd=function(a){(!a.relatedTarget||!Db(this.d(),a.relatedTarget))&&(this.dispatchEvent("enter")&&this.isEnabled()&&V(this,2))&&Ke(this,m)};v.od=function(a){if((!a.relatedTarget||!Db(this.d(),a.relatedTarget))&&this.dispatchEvent("leave"))V(this,4)&&this.setActive(q),V(this,2)&&Ke(this,q)};v.Hb=ea;
v.nd=function(a){this.isEnabled()&&(V(this,2)&&Ke(this,m),xc(a)&&(V(this,4)&&this.setActive(m),this.G.xd(this)&&this.Qa().focus()));!this.pc&&xc(a)&&a.preventDefault()};v.qd=function(a){this.isEnabled()&&(V(this,2)&&Ke(this,m),this.t&4&&(Me(this,a)&&V(this,4))&&this.setActive(q))};v.md=function(a){this.isEnabled()&&Me(this,a)};
function Me(a,c){if(V(a,16)){var d=!(a.t&16);Le(a,16,d)&&a.Q(16,d)}V(a,8)&&Le(a,8,m)&&a.Q(8,m);V(a,64)&&(d=!(a.t&64),Le(a,64,d)&&a.Q(64,d));d=new sc("action",a);c&&(d.altKey=c.altKey,d.ctrlKey=c.ctrlKey,d.metaKey=c.metaKey,d.shiftKey=c.shiftKey,d.Hc=c.Hc);return a.dispatchEvent(d)}v.Rd=function(){V(this,32)&&Le(this,32,m)&&this.Q(32,m)};v.ld=function(){V(this,4)&&this.setActive(q);V(this,32)&&Le(this,32,q)&&this.Q(32,q)};
v.Td=function(a){return this.Xb&&this.isEnabled()&&13==a.keyCode&&Me(this,a)?(a.preventDefault(),a.stopPropagation(),m):q};x(He)||i(Error("Invalid component class "+He));x(Ce)||i(Error("Invalid renderer class "+Ce));var Ne=ka(He);Ge[Ne]=Ce;function Pe(){return new He(p)}x(Pe)||i(Error("Invalid decorator function "+Pe));function Qe(){}y(Qe,Ce);fa(Qe);v=Qe.prototype;v.lb=function(a,c){Ie(a);a.sc&=-256;a.ia&&a.t&32&&i(Error("Component already rendered"));a.t&32&&a.Q(32,q);a.W&=-33;Qe.K.lb.call(this,a,c);a.wa(c.value);return c};v.ib=function(a){return"TEXTAREA"==a.tagName};v.Ya=ea;v.xd=function(a){return a.isEnabled()};v.Lc=ea;v.Q=function(a,c,d){Qe.K.Q.call(this,a,c,d);if((a=a.d())&&1==c)a.disabled=d};v.Za=ea;v.wa=function(a,c){a&&(a.value=c)};v.pb=aa("goog-textarea");function Re(a,c,d){He.call(this,a,c||Qe.qb(),d);Ie(this);this.Ub(m);a||(this.kb="")}y(Re,He);var Se=H||I;v=Re.prototype;v.Va=q;v.qa=0;v.Zd=0;v.Ad=0;v.sd=q;v.Nb=q;v.Kc=q;v.Jc=q;function Te(a){return a.sb.top+a.sb.bottom+a.Yc.top+a.Yc.bottom}function Ue(a){var c=a.Ad,d=a.d();c&&(d&&a.Nb)&&(c-=Te(a));return c}function Ve(a){var c=a.Zd,d=a.d();c&&(d&&a.Nb)&&(c-=Te(a));return c}v.wa=function(a){Re.K.wa.call(this,a);this.d()&&this.Ra()};
v.Oa=function(){Re.K.Oa.call(this);var a=this.d();P(a,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});this.sb=hd(a,"padding");this.Yc=kd(a);O(O(O(O(this.Fb(),a,"scroll",this.Ra),a,"focus",this.Ra),a,"keyup",this.Ra),a,"mouseup",this.ae);this.d()&&this.Ra()};
function We(a){if(!a.sd){var c=a.d().cloneNode(q);P(c,{position:"absolute",height:"auto",top:"-9999px",margin:"0",padding:"1px",border:"1px solid #000",overflow:"hidden"});a.kd().N.body.appendChild(c);var d=c.scrollHeight;c.style.padding="10px";var e=c.scrollHeight;a.Kc=e>d;c.style.borderWidth="10px";a.Jc=c.scrollHeight>e;c.style.height="100px";100!=c.offsetHeight&&(a.Nb=m);Bb(c);a.sd=m}var c=a.d(),d=a.d().scrollHeight,f=a.d(),e=f.offsetHeight-f.clientHeight;if(!a.Kc)var h=a.sb,e=e-(h.top+h.bottom);
a.Jc||(f=kd(f),e-=f.top+f.bottom);d+=0<e?e:0;a.Nb?d-=Te(a):(a.Kc||(e=a.sb,d+=e.top+e.bottom),a.Jc||(a=kd(c),d+=a.top+a.bottom));return d}function Xe(a,c){a.qa!=c&&(a.qa=c,a.d().style.height=c+"px")}function Ye(a){a=a.d();a.style.height="auto";var c=a.value.match(/\n/g)||[];a.rows=c.length+1}
v.Ra=function(){if(!this.Va){var a=q;this.Va=m;var c=this.d(),d=this.qa;if(c.scrollHeight){var e=q,f=q,h=We(this),j=c.offsetHeight,l=Ue(this),n=Ve(this);l&&h<l?(Xe(this,l),e=m):n&&h>n?(Xe(this,n),c.style.overflowY="",f=m):j!=h?Xe(this,h):this.qa||(this.qa=h);!e&&(!f&&Se)&&(a=m)}else Ye(this);this.Va=q;a&&(a=this.d(),this.Va||(this.Va=m,c=q,a.value||(a.value=" ",c=m),(f=a.scrollHeight)?(h=We(this),e=Ue(this),j=Ve(this),!(e&&h<=e)&&!(j&&h>=j)&&(j=this.sb,a.style.paddingBottom=j.bottom+1+"px",We(this)==
h&&(a.style.paddingBottom=j.bottom+f+"px",a.scrollTop=0,f=We(this)-f,f>=e?Xe(this,f):Xe(this,e)),a.style.paddingBottom=j.bottom+"px")):Ye(this),c&&(a.value=""),this.Va=q));d!=this.qa&&this.dispatchEvent("resize")}};v.ae=function(){var a=this.d(),c=a.offsetHeight;a.filters&&a.filters.length&&(a=a.filters.item("DXImageTransform.Microsoft.DropShadow"))&&(c-=a.offX);c!=this.qa&&(this.qa=this.Ad=c)};G&&K(8);function Ze(a){return"object"===typeof a&&a&&0===a.ne?a.content:String(a).replace($e,af)}var bf={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\f":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function af(a){return bf[a]}var $e=/[\x00\x22\x26\x27\x3c\x3e]/g;function cf(){return'<div class="annotorious-popup top-left" style="position:absolute;z-index:1"><div class="annotorious-popup-buttons"><a class="annotorious-popup-button annotorious-popup-button-edit" title="Edit" href="javascript:void(0);">EDIT</a><a class="annotorious-popup-button annotorious-popup-button-delete" title="Delete" href="javascript:void(0);">DELETE</a></div><span class="annotorious-popup-text"></span></div>'}
function df(){return'<div class="annotorious-editor" style="position:absolute;z-index:1"><form><textarea class="annotorious-editor-text" placeholder="Add a Comment..." tabindex="1"></textarea><div class="annotorious-editor-button-container"><a class="annotorious-editor-button annotorious-editor-button-save" href="javascript:void(0);" tabindex="2">Save</a><a class="annotorious-editor-button annotorious-editor-button-cancel" href="javascript:void(0);" tabindex="3">Cancel</a></div></form></div>'};function ef(a){function c(){var a=e.Ka;a.d()&&a.Ra()}this.element=Td(df);this.e=a;this.Nd=a.getItem();this.Ka=new Re("");this.Ld=mc(".annotorious-editor-button-cancel",this.element)[0];this.Qc=mc(".annotorious-editor-button-save",this.element)[0];var d;d=this.Qc;hb?d=d.parentElement:(d=d.parentNode,d=Cb(d)?d:p);this.Md=d;this.ab=[];var e=this;N(this.Ld,"click",function(c){c.preventDefault();a.stopSelection(e.Uc);e.close()});N(this.Qc,"click",function(c){c.preventDefault();c=e.jd();a.J(c);a.stopSelection();
e.Uc?a.fireEvent("onAnnotationUpdated",c,a.getItem()):a.fireEvent("onAnnotationCreated",c,a.getItem());e.close()});T(this.element,q);a.element.appendChild(this.element);this.Ka.lb(mc(".annotorious-editor-text",this.element)[0]);var f=this.element;d=document.createElement("div");P(d,"position","absolute");P(d,"top","0px");P(d,"right","0px");P(d,"width","5px");P(d,"height","100%");P(d,"cursor","e-resize");f.appendChild(d);var h=kd(f),h=dd(f).width-h.right-h.left;d=new ld(d);d.Bc=new Pc(h,0,800,0)||
new Pc(NaN,NaN,NaN,NaN);d.ed=function(a){P(f,"width",a+"px");c&&c()}}v=ef.prototype;v.oc=function(a){var c=yb("div","annotorious-editor-field");w(a)?c.innerHTML=a:x(a)?this.ab.push({D:c,uc:a}):Cb(a)&&c.appendChild(a);a=this.Md;a.parentNode&&a.parentNode.insertBefore(c,a)};
v.open=function(a){(this.xb=this.Uc=a)&&this.Ka.wa(String(a.text));T(this.element,m);this.Ka.d().focus();E(this.ab,function(c){var d=c.uc(a);w(d)?c.D.innerHTML=d:Cb(d)&&(Ab(c.D),c.D.appendChild(d))});this.e.fireEvent("onEditorShown",a)};v.close=function(){T(this.element,q);this.Ka.wa("")};v.setPosition=function(a){Tc(this.element,a.x,a.y)};
v.jd=function(){var a;a=this.Ka.d().value;var c=new Vd;(new Wd).parse(new me(c,function(a){return a},k),a);a=c.toString();this.xb?this.xb.text=a:this.xb=new Kd(this.Nd.src,a,this.e.pa().getShape());return this.xb};ef.prototype.addField=ef.prototype.oc;ef.prototype.getAnnotation=ef.prototype.jd;function ff(a){this.element=Td(cf);this.e=a;this.Od=mc(".annotorious-popup-text",this.element)[0];this.S=mc(".annotorious-popup-buttons",this.element)[0];this.jc=q;this.ab=[];var c=mc(".annotorious-popup-button-edit",this.S)[0],d=mc(".annotorious-popup-button-delete",this.S)[0],e=this;N(c,"mouseover",function(){jb(c,"annotorious-popup-button-active")});N(c,"mouseout",function(){lb(c,"annotorious-popup-button-active")});N(c,"click",function(){S(e.element,0);P(e.element,"pointer-events","none");a.tc(e.g)});
N(d,"mouseover",function(){jb(d,"annotorious-popup-button-active")});N(d,"mouseout",function(){lb(d,"annotorious-popup-button-active")});N(d,"click",function(){a.fireEvent("beforeAnnotationRemoved",e.g)||(S(e.element,0),P(e.element,"pointer-events","none"),a.A(e.g),a.fireEvent("onAnnotationRemoved",e.g))});gf&&(N(this.element,"mouseover",function(){window.clearTimeout(e.hc);0.9>(e.S.style[za("opacity")]||"")&&S(e.S,0.9);e.clearHideTimer()}),N(this.element,"mouseout",function(){S(e.S,0);e.startHideTimer()}),
a.addHandler("onMouseOutOfItem",function(){e.startHideTimer()}));S(this.S,0);S(this.element,0);P(this.element,"pointer-events","none");a.element.appendChild(this.element)}v=ff.prototype;v.oc=function(a){var c=yb("div","annotorious-popup-field");w(a)?c.innerHTML=a:x(a)?this.ab.push({D:c,uc:a}):Cb(a)&&c.appendChild(a);this.element.appendChild(c)};
v.startHideTimer=function(){this.jc=q;if(!this.eb){var a=this;this.eb=window.setTimeout(function(){a.e.fireEvent("beforePopupHide",a);a.jc||(S(a.element,0),P(a.element,"pointer-events","none"),S(a.S,0.9),delete a.eb)},150)}};v.clearHideTimer=function(){this.jc=m;this.eb&&(window.clearTimeout(this.eb),delete this.eb)};
v.show=function(a,c){this.clearHideTimer();c&&this.setPosition(c);a&&this.setAnnotation(a);this.hc&&window.clearTimeout(this.hc);S(this.S,0.9);if(gf){var d=this;this.hc=window.setTimeout(function(){S(d.S,0)},1E3)}S(this.element,0.9);P(this.element,"pointer-events","auto");this.e.fireEvent("onPopupShown",this.g)};v.setPosition=function(a){var c=this.e.ba.width,c=-(198-(c-a.x)-Math.floor((window.innerWidth-c)/2));0>c?Tc(this.element,new L(a.x+c,a.y)):Tc(this.element,new L(a.x,a.y))};
v.setAnnotation=function(a){this.g=a;this.Od.innerHTML=a.text?a.text.replace(/\n/g,"<br/>"):'<span class="annotorious-popup-empty">No comment</span>';console.log(a);"editable"in a&&a.editable==q?(T(this.S,q),a.text||T(this.element,q)):(T(this.S,m),T(this.element,m));E(this.ab,function(c){var d=c.uc(a);w(d)?c.D.innerHTML=d:Cb(d)&&(Ab(c.D),c.D.appendChild(d))})};ff.prototype.addField=ff.prototype.oc;function hf(){}v=hf.prototype;v.J=function(a,c){this.f.J(a,c)};v.addHandler=function(a,c){this.z.addHandler(a,c)};v.fireEvent=function(a,c,d){return this.z.fireEvent(a,c,d)};v.pa=u("w");v.r=function(a){this.f.r(a)};v.A=function(a){this.f.A(a)};v.stopSelection=function(a){gf&&T(this.c,q);this.gb&&(this.gb(),delete this.gb);this.w.stopSelection();a&&this.f.J(a)};
function jf(a,c){a.ad=p;N(c,kf,function(){clearTimeout(this.ad)});N(c,lf,function(d){d=mf(d,c);a.f.r(q);var e=a.f.Pa(d.x,d.y);a.fb&&0===e.length?(T(a.c,m),a.w.startSelection(d.x,d.y)):(e=a.f.Pa(d.x,d.y),0<e.length&&a.f.r(e[0]));gf||(-1==ib(a.f.o).indexOf("annotorious-item-focus")?nb(a.f.o,"annotorious-item-unfocus","annotorious-item-focus"):0==e.length&&nb(a.f.o,"annotorious-item-focus","annotorious-item-unfocus"));0!==e.length&&!gf&&(this.ad=setTimeout(function(){a.f.e.z.fireEvent("onAnnotationClickedLong",
e[0])},200))})};function nf(a,c){this.o=a;this.e=c;this.la=[];this.Z=[];this.ma=this.o.getContext("2d");this.xa=m;this.zb=q;var d=this;N(this.o,of,function(a){if(d.xa){var c=pf(d,a.offsetX,a.offsetY);c?(d.zb=d.zb&&c==d.g,d.g?d.g!=c&&(d.xa=q,d.e.popup.startHideTimer()):(d.g=c,qf(d),d.e.fireEvent("onMouseOverAnnotation",{annotation:d.g,mouseEvent:a}))):!d.zb&&d.g&&(d.xa=q,d.e.popup.startHideTimer())}else d.$a=a});N(this.o,rf,function(){d.g!==k&&d.g!=q?d.e.fireEvent("onAnnotationClicked",d.g):d.e.fb||d.e.fireEvent("onNonAnnotationNonEditableClicked",
d.e)});c.addHandler("onMouseOutOfItem",function(){delete d.g;d.xa=m});c.addHandler("beforePopupHide",function(){if(!d.xa&&d.$a){var a=d.g;d.g=pf(d,d.$a.offsetX,d.$a.offsetY);d.xa=m;a!=d.g?(qf(d),d.e.fireEvent("onMouseOutOfAnnotation",{M:a,mouseEvent:d.$a}),d.e.fireEvent("onMouseOverAnnotation",{M:d.g,mouseEvent:d.$a})):d.g&&d.e.popup.clearHideTimer()}else qf(d)})}v=nf.prototype;
v.J=function(a,c){c&&(c==this.g&&delete this.g,F(this.la,c),delete this.Z[Jd(c.shapes[0])]);this.la.push(a);var d=a.shapes[0];if("pixel"!=d.units)var e=this,d=Id(d,function(a){return e.e.Ba(a)});this.Z[Jd(a.shapes[0])]=d;qf(this)};v.A=function(a){a==this.g&&delete this.g;F(this.la,a);delete this.Z[Jd(a.shapes[0])];qf(this)};v.v=function(){return Ga(this.la)};
v.fa=function(){var a=[];E(this.la,function(c){var c=c.shapes[0].geometry,d=document.createElement("section");d.className="annotText";d.style.borderWidth="1px";d.style.width=(100*c.width).toString()+"%";d.style.height=(100*c.height).toString()+"%";d.style.top=(100*c.y).toString()+"%";d.style.left=(100*c.x).toString()+"%";d.style.position="absolute";Ha(a,d)});return a};v.r=function(a){(this.g=a)?this.zb=m:this.e.popup.startHideTimer();qf(this);this.xa=m};
function pf(a,c,d){a=a.Pa(c,d);if(0<a.length)return a[0]}
v.Pa=function(a,c){var d=[],e=this;E(this.la,function(f){var h;h=e.Z[Jd(f.shapes[0])];if("rect"==h.type)h=a<h.geometry.x||c<h.geometry.y||a>h.geometry.x+h.geometry.width||c>h.geometry.y+h.geometry.height?q:m;else if("polygon"==h.type){h=h.geometry.points;for(var j=q,l=h.length-1,n=0;n<h.length;n++)h[n].y>c!=h[l].y>c&&a<(h[l].x-h[n].x)*(c-h[n].y)/(h[l].y-h[n].y)+h[n].x&&(j=!j),l=n;h=j}else h=q;h&&d.push(f)});C.sort.call(d,function(a,c){var d=e.Z[Jd(a.shapes[0])],l=e.Z[Jd(c.shapes[0])];return Fd(d)-
Fd(l)}||Ja);return d};function sf(a,c,d){var e=Ea(a.e.ga(),function(a){return a.getSupportedShapeType()==c.type});e?e.drawShape(a.ma,c,d):console.log("WARNING unsupported shape type: "+c.type)}function qf(a){a.ma.clearRect(0,0,a.o.width,a.o.height);E(a.la,function(c){c!=a.g&&sf(a,a.Z[Jd(c.shapes[0])])});if(a.g){var c=a.Z[Jd(a.g.shapes[0])];sf(a,c,m);c=Gd(c).geometry;a.e.popup.show(a.g,new zd(c.x,c.y+c.height+5))}}
v.ua=function(a){var c=this,d=[];E(this.la,function(a){d.push(c.Z[Jd(a.shapes[0])])});if(0<d.length){var e=function(){if(t){g2d.clearRect(0,0,f.o.width,f.o.height);for(var a=d.length-1;0<=a;a--)geom=d[a].geometry,g2d.beginPath(),g2d.lineJoin="miter",g2d.lineWidth=h.stroke_width,g2d.strokeStyle="rgb(255,255,255)",g2d.strokeRect(geom.x+h.outline_width+h.stroke_width/2,geom.y+h.outline_width+h.stroke_width/2,geom.width-2*h.outline_width-h.stroke_width,geom.height-2*h.outline_width-h.stroke_width),g2d.fillStyle=
"rgba("+colour_in_rgb[0]+","+colour_in_rgb[1]+","+colour_in_rgb[2]+","+l+")",g2d.fillRect(geom.x+h.outline_width+h.hi_stroke_width/2,geom.y+h.outline_width+h.hi_stroke_width/2,geom.width-2*h.outline_width-h.hi_stroke_width,geom.height-2*h.outline_width-h.hi_stroke_width),g2d.closePath();l=n?l+0.005:l-0.005;0>=l?n=m:0.26<=l&&(n=q);requestAnimationFrame(e)}};g2d=c.ma;var f=c,h,j=Ea(c.e.ga(),function(a){return a.getSupportedShapeType()==d[0].type});h={outline:j.cc,stroke:j.ec,fill:j.Pc,hi_outline:j.Zb,
hi_stroke:j.ac,hi_fill:j.Yb,outline_width:j.dc,stroke_width:j.fc,hi_outline_width:j.$b,hi_stroke_width:j.bc};var l=0,n=m,t=m;nb(f.o,"annotorious-item-unglow","annotorious-item-glow");setTimeout(function(){t=q;qf(f);nb(f.o,"annotorious-item-glow","annotorious-item-unglow")},a);a=h.hi_fill;a=a.replace("#","");r=parseInt(a.substring(0,2),16);g=parseInt(a.substring(2,4),16);b=parseInt(a.substring(4,6),16);colour_in_rgb=result=[r,g,b];requestAnimationFrame(e)}};var tf=navigator.userAgent&&-1<navigator.userAgent.indexOf("Win")&&-1<navigator.userAgent.indexOf("Chrome")?q:"ontouchstart"in window,gf=!tf,lf=tf?"touchstart":"mousedown",uf=tf?"touchenter":"mouseover",of=tf?"touchmove":"mousemove",kf=tf?"touchend":"mouseup",vf=tf?"touchleave":"mouseout",rf=tf?"touchend":"click";
function mf(a,c){var d=q;a.offsetX=a.offsetX?a.offsetX:q;a.offsetY=a.offsetY?a.offsetY:q;return d=(!a.offsetX||!a.offsetY)&&a.n.changedTouches?{x:a.n.changedTouches[0].clientX-ud(c).left,y:a.n.changedTouches[0].clientY-ud(c).top}:{x:a.offsetX,y:a.offsetY}};function wf(){}v=wf.prototype;v.init=function(a,c){this.cc="#111111";this.ec="#ffffff";this.Pc=q;this.Zb="#111111";this.ac="#ffffff";this.Yb="#FFDC00";this.$b=this.fc=this.dc=1;this.bc=1.2;this.o=c;this.e=a;this.ma=c.getContext("2d");this.ma.lineWidth=1;this.kc=q};function xf(a){a.lc&&(Gc(a.lc),delete a.lc);a.mc&&(Gc(a.mc),delete a.mc)}v.getName=aa("rect_drag");v.getSupportedShapeType=aa("rect");
v.ja=function(a){a.hasOwnProperty("outline")&&(this.cc=a.outline);a.hasOwnProperty("stroke")&&(this.ec=a.stroke);a.hasOwnProperty("fill")&&(this.Pc=a.fill);a.hasOwnProperty("hi_outline")&&(this.Zb=a.hi_outline);a.hasOwnProperty("hi_stroke")&&(this.ac=a.hi_stroke);a.hasOwnProperty("hi_fill")&&(this.Yb=a.hi_fill);a.hasOwnProperty("outline_width")&&(this.dc=a.outline_width);a.hasOwnProperty("stroke_width")&&(this.fc=a.stroke_width);a.hasOwnProperty("hi_outline_width")&&(this.$b=a.hi_outline_width);a.hasOwnProperty("hi_stroke_width")&&
(this.bc=a.hi_stroke_width)};
v.startSelection=function(a,c){var d=8*Math.round(a/8),e=8*Math.round(c/8);this.kc=m;var f=this,h=this.o;this.lc=N(this.o,of,function(a){var c=mf(a,h),a=8*Math.round(c.x/8),c=8*Math.round(c.y/8);f.kc&&(f.B={x:a,y:c},f.ma.clearRect(0,0,h.width,h.height),a=f.B.x-f.L.x,c=f.B.y-f.L.y,f.drawShape(f.ma,{type:"rect",geometry:{x:0<a?f.L.x:f.B.x,y:0<c?f.L.y:f.B.y,width:Math.abs(a),height:Math.abs(c)},style:{}}))});this.mc=N(h,kf,function(a){var c=mf(a,h),d=f.getShape(),a=a.n?a.n:a;f.kc=q;d?(xf(f),f.e.fireEvent("onSelectionCompleted",
{mouseEvent:a,shape:d,viewportBounds:f.getViewportBounds(),annotorious:f.e,image:f.e.X})):(f.e.fireEvent("onSelectionCanceled"),a=f.e.Pa(c.x,c.y),0<a.length&&f.e.r(a[0]))});this.L=new zd(d,e);this.e.fireEvent("onSelectionStarted",{offsetX:d,offsetY:e});P(document.body,"-webkit-user-select","none")};v.stopSelection=function(){xf(this);this.ma.clearRect(0,0,this.o.width,this.o.height);P(document.body,"-webkit-user-select","auto");delete this.B};
v.getShape=function(){if(this.B&&3<Math.abs(this.B.x-this.L.x)&&3<Math.abs(this.B.y-this.L.y)){var a=this.getViewportBounds(),a=this.e.Wb({x:a.left,y:a.top,width:a.right-a.left,height:a.bottom-a.top});return new Ed("rect",a)}};v.getViewportBounds=function(){var a,c;this.B.x>this.L.x?(a=this.B.x,c=this.L.x):(a=this.L.x,c=this.B.x);var d,e;this.B.y>this.L.y?(d=this.L.y,e=this.B.y):(d=this.B.y,e=this.L.y);return{top:d,right:a,bottom:e,left:c}};
v.drawShape=function(a,c,d){var e,f,h,j,l;c.style||(c.style={});"rect"==c.type&&(d?(f=c.style.hi_stroke||this.ac,h=c.style.hi_outline||this.Zb,j=c.style.hi_outline_width||this.$b,l=c.style.hi_stroke_width||this.bc):(f=c.style.stroke||this.ec,h=c.style.outline||this.cc,j=c.style.outline_width||this.dc,l=c.style.stroke_width||this.fc),e=c.geometry,h&&(a.lineJoin="round",a.lineWidth=j,a.strokeStyle=h),c=c.style.hi_fill||this.Yb,c=c.replace("#",""),r=parseInt(c.substring(0,2),16),g=parseInt(c.substring(2,
4),16),b=parseInt(c.substring(4,6),16),fill_color=result=[r,g,b],f&&(a.lineJoin="miter",a.lineWidth=l,a.strokeStyle=f,a.fillStyle=d?"rgba("+fill_color[0]+","+fill_color[1]+","+fill_color[2]+",0.26)":"rgba("+fill_color[0]+","+fill_color[1]+","+fill_color[2]+",0.15)",a.strokeRect(e.x+j+l/2,e.y+j+l/2,e.width-2*j-l,e.height-2*j-l),a.fillRect(e.x+j+l/2,e.y+j+l/2,e.width-2*j-l,e.height-2*j-l)))};function yf(a){return'<canvas class="annotorious-item annotorious-opacity-fade" style="position:absolute; top:0px; left:0px; width:'+Ze(a.width)+"px; height:"+Ze(a.height)+'px; z-index:0" width="'+Ze(a.width)+'" height="'+Ze(a.height)+'"></canvas>'};function W(a,c){function d(c,d){P(e,"margin-"+c,d+"px");P(a,"margin-"+c,0);P(a,"padding-"+c,0)}this.X=a;this.Vc={padding:a.style.padding,margin:a.style.margin};this.z=new vd;this.na=[];this.fb=m;this.element=yb("div","annotorious-annotationlayer");P(this.element,"position","relative");P(this.element,"display","inline-block");var e=this.element,f=hd(a,"margin"),h=hd(a,"padding");(0!=f.top||0!=h.top)&&d("top",f.top+h.top);(0!=f.right||0!=h.right)&&d("right",f.right+h.right);(0!=f.bottom||0!=h.bottom)&&
d("bottom",f.bottom+h.bottom);(0!=f.left||0!=h.left)&&d("left",f.left+h.left);(f=a.parentNode)&&f.replaceChild(this.element,a);this.element.appendChild(a);f=dd(a);this.ba=Td(yf,{width:f.width,height:f.height});gf&&jb(this.ba,"annotorious-item-unfocus");this.element.appendChild(this.ba);this.c=Td(yf,{width:f.width,height:f.height});gf&&T(this.c,q);this.element.appendChild(this.c);this.popup=c?c:new ff(this);f=new wf;f.init(this,this.c);this.na.push(f);this.w=f;this.editor=new ef(this);this.f=new nf(this.ba,
this);var j=this;gf&&(N(this.element,uf,function(a){a=a.relatedTarget;if(!a||!Db(j.element,a))j.z.fireEvent("onMouseOverItem"),nb(j.ba,"annotorious-item-unfocus","annotorious-item-focus")}),N(this.element,vf,function(a){a=a.relatedTarget;if(!a||!Db(j.element,a))j.z.fireEvent("onMouseOutOfItem"),nb(j.ba,"annotorious-item-focus","annotorious-item-unfocus")}));jf(this,tf?this.c:this.ba);this.z.addHandler("onSelectionCompleted",function(a){a=a.viewportBounds;j.editor.setPosition(new zd(a.left+j.X.offsetLeft,
a.bottom+4+j.X.offsetTop))});this.z.addHandler("onSelectionCanceled",function(){gf&&T(j.c,q);j.w.stopSelection()})}y(W,hf);v=W.prototype;v.ca=s();v.Xc=function(a){a.init(this,this.c);this.na.push(a)};v.destroy=function(){var a=this.X;a.style.margin=this.Vc.margin;a.style.padding=this.Vc.padding;var c=this.element,d=c.parentNode;d&&d.replaceChild(a,c)};
v.tc=function(a){this.f.A(a);var c=Ea(this.na,function(c){return c.getSupportedShapeType()==a.shapes[0].type});if(c){T(this.c,m);this.f.r(q);var d=this.c.getContext("2d"),e=a.shapes[0],f=this,e="pixel"==e.units?e:Id(e,function(a){return f.Ba(a)});c.drawShape(d,e)}c=Gd(a.shapes[0]).geometry;c="pixel"==a.shapes[0].units?new zd(c.x,c.y+c.height):this.Ba(new zd(c.x,c.y+c.height));this.editor.setPosition(new zd(c.x+this.X.offsetLeft,c.y+4+this.X.offsetTop));this.editor.open(a)};
v.Ba=function(a){var c=bd(this.X);return a.width?{x:a.x*c.width,y:a.y*c.height,width:a.width*c.width,height:a.height*c.height}:{x:a.x*c.width,y:a.y*c.height}};v.pa=u("w");v.v=function(){return this.f.v()};v.fa=function(){return this.f.fa()};v.Pa=function(a,c){return Ga(this.f.Pa(a,c))};v.ga=u("na");v.getItem=function(){return{src:zf(this.X),element:this.X}};function zf(a){var c=a.getAttribute("data-original");return c?c:a.src}v.ha=function(){T(this.ba,q)};
v.O=function(){this.fb=q;this.Sc&&(this.Sc.destroy(),delete this.Sc)};v.Fd=function(a){(this.w=Ea(this.na,function(c){return c.getName()==a}))||console.log('WARNING: selector "'+a+'" not available')};v.ja=function(a){E(this.na,function(c){c.ja(a)});qf(this.f)};v.Ga=function(){T(this.ba,m)};v.aa=function(){this.fb=m};v.stopSelection=function(a){gf&&T(this.c,q);this.w.stopSelection();a&&this.f.J(a)};
v.Wb=function(a){var c=bd(this.X);return a.width?{x:a.x/c.width,y:a.y/c.height,width:a.width/c.width,height:a.height/c.height}:{x:a.x/c.width,y:a.y/c.height}};v.ua=function(a){this.f.ua(a)};W.prototype.redrawGlow=W.prototype.ua;W.prototype.addSelector=W.prototype.Xc;W.prototype.stopSelection=W.prototype.stopSelection;W.prototype.fireEvent=W.prototype.fireEvent;W.prototype.setCurrentSelector=W.prototype.Fd;W.prototype.toItemCoordinates=W.prototype.Wb;function Af(){Md(this,function(){return mc("img.annotatable",document)})}y(Af,Ld);Af.prototype.Gb=function(a){return zf(a)};Af.prototype.Ec=function(a){return new W(a)};Af.prototype.Vb=function(a){return Cb(a)?"IMG"==a.tagName||"CANVAS"==a.tagName:q};function Bf(a){return'<div class="annotorious-opacity-fade" style="white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"><div class="annotorious-ol-hint" style="width: 400px; margin:0px auto;">'+Ze(a.Bd)+"</dvi></div>"};function Cf(a,c){this.Y=a;this.T=dd(c.element);this.l=c.popup;P(this.l.element,"z-index",99E3);this.C=[];this.vb=new OpenLayers.Layer.Boxes("Annotorious");this.Y.addLayer(this.vb);var d=this;this.Y.events.register("move",this.Y,function(){d.I&&d.bb()});c.addHandler("beforePopupHide",function(){d.ya==d.I?d.l.clearHideTimer():d.hb(d.ya,d.I)})}v=Cf.prototype;v.destroy=function(){this.vb.destroy()};
v.bb=function(){var a=this.I.Mb.div,c=dd(a),d=Yc(a,this.Y.div),a=d.y,d=d.x,e=c.width,f=c.height,c=dd(this.l.element),a={y:a+f+5};d+c.width>this.T.width?(nb(this.l.element,"top-left","top-right"),a.x=d+e-c.width):(nb(this.l.element,"top-right","top-left"),a.x=d);0>a.x&&(a.x=0);a.x+c.width>this.T.width&&(a.x=this.T.width-c.width);a.y+c.height>this.T.height&&(a.y=this.T.height-c.height);this.l.setPosition(a)};v.nc=function(a){this.l.setAnnotation(a);this.bb();this.l.show()};
v.hb=function(a,c){a?(Yc(a.Mb.div,this.Y.div),za("height"),P(a.rb,"border-color","#fff000"),this.I=a,this.nc(a.M)):delete this.I;c&&P(c.rb,"border-color","#fff")};
v.J=function(a){var c=a.shapes[0].geometry,c=new OpenLayers.Marker.Box(new OpenLayers.Bounds(c.x,c.y,c.x+c.width,c.y+c.height));jb(c.div,"annotorious-ol-boxmarker-outer");P(c.div,"border",p);var d=yb("div","annotorious-ol-boxmarker-inner");ad(d,"100%","100%");c.div.appendChild(d);var e={M:a,Mb:c,rb:d},f=this;N(d,"mouseover",function(){f.I||f.hb(e);f.ya=e});N(d,"mouseout",function(){delete f.ya;f.l.startHideTimer()});this.C.push(e);C.sort.call(this.C,function(a,c){return Fd(c.M.shapes[0])-Fd(a.M.shapes[0])}||
Ja);var h=1E4;E(this.C,function(a){P(a.Mb.div,"z-index",h);h++});this.vb.addMarker(c)};v.A=function(a){var c=Ea(this.C,function(c){return c.M==a});c&&(F(this.C,c),this.vb.removeMarker(c.Mb))};v.v=s();v.r=function(a){a||this.l.startHideTimer()};function Df(a){function c(){var a=parseInt(Q(e.element,"width"),10),c=parseInt(Q(e.element,"height"),10);ad(e.c,a,c);e.c.width=a;e.c.height=c}this.Y=a;this.element=a.div;var d=this.element.style[za("position")]||"";"absolute"!=d&&"relative"!=d&&P(this.element,"position","relative");this.z=new vd;this.V=Td(Bf,{Bd:"Click and Drag"});P(this.V,"z-index",9998);S(this.V,0);this.element.appendChild(this.V);this.popup=new ff(this);this.f=new Cf(a,this);this.c=Td(yf,{width:"0",height:"0"});T(this.c,q);P(this.c,
"position","absolute");P(this.c,"top","0px");P(this.c,"z-index",9999);this.element.appendChild(this.c);var e=this;c();this.w=new wf;this.w.init(this,this.c);this.gb=k;this.editor=new ef(this);P(this.editor.element,"z-index",1E4);window.addEventListener?window.addEventListener("resize",c,q):window.attachEvent&&window.attachEvent("onresize",c);N(this.element,"mouseover",function(a){a=a.relatedTarget;(!a||!Db(e.element,a))&&e.z.fireEvent("onMouseOverItem")});N(this.element,"mouseout",function(a){a=a.relatedTarget;
(!a||!Db(e.element,a))&&e.z.fireEvent("onMouseOutOfItem")});N(this.c,"mousedown",function(a){var c=Zc(e.element);e.w.startSelection(a.clientX-c.x,a.clientY-c.y)});this.z.addHandler("onSelectionCompleted",function(a){P(e.c,"pointer-events","none");a=a.viewportBounds;e.editor.setPosition(new zd(a.left,a.bottom+4));e.editor.open()});this.z.addHandler("onSelectionCanceled",function(){e.stopSelection()})}y(Df,hf);v=Df.prototype;v.aa=s();v.O=s();
v.ca=function(a){P(this.c,"pointer-events","auto");var c=this;T(this.c,m);S(this.V,0.8);window.setTimeout(function(){S(c.V,0)},2E3);a&&(this.gb=a)};v.destroy=function(){this.f.destroy();Bb(this.V);Bb(this.c)};v.Xc=s();v.tc=function(a){this.f.A(a);var c=this.w,d=this;if(c){T(this.c,m);this.f.r(k);var e=this.c.getContext("2d"),f=Id(a.shapes[0],function(a){return d.Ba(a)});console.log(f);c.drawShape(e,f);c=Gd(f).geometry;this.editor.setPosition(new zd(c.x,c.y+c.height));this.editor.open(a)}};
v.Ba=function(a){var c=this.Y.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x,a.y));return(a=a.width?this.Y.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x+a.width,a.y+a.height)):q)?{x:c.x,y:a.y,width:a.x-c.x+2,height:c.y-a.y+2}:{x:c.x,y:c.y}};v.v=function(){return this.f.v()};v.ga=s();v.getItem=function(){return{src:"map://openlayers/something"}};v.tb=s();
v.Wb=function(a){var c=this.Y.getLonLatFromPixel(new OpenLayers.Pixel(a.x,a.y));return(a=a.width?new OpenLayers.Pixel(a.x+a.width-2,a.y+a.height-2):q)?(a=this.Y.getLonLatFromPixel(a),c={x:c.lon,y:a.lat,width:a.lon-c.lon,height:c.lat-a.lat},console.log(c),c):{x:c.lon,y:c.lat}};function Ef(){Md(this)}y(Ef,Ld);Ef.prototype.Gb=aa("map://openlayers/something");Ef.prototype.Ec=function(a){return new Df(a)};Ef.prototype.Vb=function(a){return a instanceof OpenLayers.Map};function Ff(a,c){this.U=a;this.T=dd(a.element);this.l=c.popup;P(this.l.element,"z-index",99E3);this.C=[];var d=this;this.U.addHandler("animation",function(){d.I&&d.bb()});c.addHandler("beforePopupHide",function(){d.ya==d.I?d.l.clearHideTimer():d.hb(d.ya,d.I)})}v=Ff.prototype;
v.bb=function(){var a=this.U.element,c=this.I.Rb,d=dd(c),c=Yc(c,a),a=c.y,c=c.x,e=d.width,f=d.height,d=dd(this.l.element),a={x:c,y:a+f+12};nb(this.l.element,"top-right","top-left");this.U.isFullPage()||(c+d.width>this.T.width&&(nb(this.l.element,"top-left","top-right"),a.x=c+e-d.width),0>a.x&&(a.x=0),a.x+d.width>this.T.width&&(a.x=this.T.width-d.width),a.y+d.height>this.T.height&&(a.y=this.T.height-d.height));this.l.setPosition(a)};v.nc=function(a){this.l.setAnnotation(a);this.bb();this.l.show()};
v.hb=function(a,c){a?(P(a.rb,"border-color","#fff000"),this.I=a,this.nc(a.M)):delete this.I;c&&P(c.rb,"border-color","#fff")};
v.J=function(a){var c=a.shapes[0].geometry,d=yb("div","annotorious-ol-boxmarker-outer"),e=yb("div","annotorious-ol-boxmarker-inner");ad(e,"100%","100%");d.appendChild(e);var c=new OpenSeadragon.Rect(c.x,c.y,c.width,c.height),f={M:a,Rb:d,rb:e},h=this;N(e,"mouseover",function(){h.I||h.hb(f);h.ya=f});N(e,"mouseout",function(){delete h.ya;h.l.startHideTimer()});this.C.push(f);C.sort.call(this.C,function(a,c){return Fd(c.M.shapes[0])-Fd(a.M.shapes[0])}||Ja);var j=1;E(this.C,function(a){P(a.Rb,"z-index",
j);j++});this.U.drawer.addOverlay(d,c)};v.A=function(a){var c=Ea(this.C,function(c){return c.M==a});c&&(F(this.C,c),this.U.drawer.removeOverlay(c.Rb))};v.v=function(){return Ca(this.C,function(a){console.log(a);return a.M})};v.r=s();v.destroy=function(){var a=this;E(this.C,function(c){a.U.removeOverlay(c.Rb)});this.C=[]};function Gf(a){this.element=a.element;var c=document;c.querySelectorAll&&c.querySelector?c=c.querySelector(".openseadragon-container"):(c=document,c=(c.querySelectorAll&&c.querySelector?c.querySelectorAll(".openseadragon-container"):c.getElementsByClassName?c.getElementsByClassName("openseadragon-container"):vb())[0]);P(c||p,"z-index",0);this.U=a;this.z=new vd;this.na=[];this.fb=m;this.V=Td(Bf,{Bd:"Click and Drag"});S(this.V,0);this.element.appendChild(this.V);this.popup=new ff(this);this.f=new Ff(a,
this);this.c=Td(yf,{width:"0",height:"0"});T(this.c,q);this.element.appendChild(this.c);var d=this,a=parseInt(Q(d.element,"width"),10),c=parseInt(Q(d.element,"height"),10);ad(d.c,a,c);d.c.width=a;d.c.height=c;a=new wf;a.init(this,this.c);this.na.push(a);this.w=a;this.editor=new ef(this);jf(this,this.c);this.z.addHandler("onSelectionCompleted",function(a){a=a.viewportBounds;d.editor.setPosition(new zd(a.left,a.bottom+4));d.editor.open()});this.z.addHandler("onSelectionCanceled",function(){d.stopSelection()})}
y(Gf,hf);v=Gf.prototype;v.aa=s();v.O=s();v.destroy=function(){this.f.destroy();delete this.f};v.ca=function(a){P(this.c,"pointer-events","auto");var c=this;T(this.c,m);S(this.V,0.8);window.setTimeout(function(){S(c.V,0)},2E3);a&&(this.gb=a)};v.tc=function(a){this.f.A(a);var c=this.w,d=this;if(c){T(this.c,m);this.f.r(k);var e=this.c.getContext("2d"),f=Id(a.shapes[0],function(a){return d.Ba(a)});c.drawShape(e,f);c=Gd(f).geometry;this.editor.setPosition(new zd(c.x,c.y+c.height+4));this.editor.open(a)}};
v.Ba=function(a){var c=ud(this.element);c.top+=window.pageYOffset;c.left+=window.pageXOffset;var d=new OpenSeadragon.Point(a.x,a.y),a=a.width?new OpenSeadragon.Point(a.x+a.width,a.y+a.height):q,d=this.U.viewport.viewportToWindowCoordinates(d);return a?(a=this.U.viewport.viewportToWindowCoordinates(a),{x:d.x-c.left,y:d.y-c.top,width:a.x-d.x+2,height:a.y-d.y+2}):d};v.v=function(){return this.f.v()};v.ga=s();v.getItem=function(){return{src:"dzi://openseadragon/something"}};v.tb=s();v.pa=u("w");
v.Wb=function(a){var c=ud(this.element);c.top+=window.pageYOffset;c.left+=window.pageXOffset;var d=new OpenSeadragon.Point(a.x+c.left,a.y+c.top),a=a.width?new OpenSeadragon.Point(a.x+c.left+a.width-2,a.y+c.top+a.height-2):q,d=this.U.viewport.windowToViewportCoordinates(d);return a?(a=this.U.viewport.windowToViewportCoordinates(a),{x:d.x,y:d.y,width:a.x-d.x,height:a.y-d.y}):d};function Hf(){Md(this)}y(Hf,Ld);Hf.prototype.Gb=aa("dzi://openseadragon/something");Hf.prototype.Ec=function(a){return new Gf(a)};Hf.prototype.Vb=function(a){return!a.id||0!=a.id.indexOf("openseadragon")||!a.hasOwnProperty("drawer")?q:m};function Y(){function a(){If(c)}this.Tc=q;this.k=[new Af];window.OpenLayers&&this.k.push(new Ef);window.OpenSeadragon&&this.k.push(new Hf);this.cb=[];var c=this;window.addEventListener?window.addEventListener("load",a,q):window.attachEvent&&window.attachEvent("onload",a)}function If(a){a.Tc||(E(a.k,function(a){a.init()}),E(a.cb,function(c){c.initPlugin&&c.initPlugin(a);E(a.k,function(a){a.Ab(c)})}),a.Tc=m)}function Z(a,c){return Ea(a.k,function(a){return Sd(a,c)})}v=Y.prototype;
v.ca=function(a,c){var d=k,e=k;w(a)?(d=a,e=c):x(a)&&(e=a);if(d){var f=Z(this,d);f&&f.ca(d,e)}else E(this.k,function(a){a.ca(e)})};v.J=function(a,c){var d=Z(this,a.src);d&&d.J(a,c)};v.addHandler=function(a,c){E(this.k,function(d){d.addHandler(a,c)})};v.Ab=function(a,c){try{var d=new window.annotorious.plugin[a](c);"complete"==document.readyState?(d.initPlugin&&d.initPlugin(this),E(this.k,function(a){a.Ab(d)})):this.cb.push(d)}catch(e){console.log("Could not load plugin: "+a)}};
v.vc=function(){E(this.k,function(a){a.vc()})};v.destroy=function(a){if(a){var c=Z(this,a);c&&c.destroy(a)}else E(this.k,function(a){a.destroy()})};v.pa=function(a){var c=Z(this,a);if(c)return c.pa(a)};v.v=function(a){if(a){var c=Z(this,a);return c?c.v(a):[]}var d=[];E(this.k,function(a){Ha(d,a.v())});return d};v.fa=function(a){if(a){var c=Z(this,a);return c?c.fa(a):[]}var d=[];E(this.k,function(a){Ha(d,a.fa())});return d};v.ga=function(a){var c=Z(this,a);return c?c.ga(a):[]};
v.ha=function(a){if(a){var c=Z(this,a);c&&c.ha(a)}else E(this.k,function(a){a.ha()})};v.O=function(a){if(a){var c=Z(this,a);c&&c.O(a)}else E(this.k,function(a){a.O()})};v.r=function(a){if(a){var c=Z(this,a.src);c&&c.r(a)}else E(this.k,function(a){a.r()})};v.Cc=function(a){If(this);var c=Ea(this.k,function(c){return c.Vb(a)});c?c.Cc(a):i("Error: Annotorious does not support this media type in the current version or build configuration.")};v.Sb=function(a){var c=this;E(this.v(a),function(a){c.A(a)})};
v.A=function(a){var c=Z(this,a.src);c&&c.A(a)};v.Ic=function(a){var c=k;w(a)&&(c=a);c&&(c=Z(this,c))&&c.Ic(a)};v.reset=function(){E(this.k,function(a){a.destroy();a.init()})};v.tb=function(a,c){var d=Z(this,a);d&&d.tb(a,c)};v.ja=function(a){E(this.k,function(c){c.ja(a)})};v.ua=function(a,c){if(a){var d=Z(this,a);d&&d.ua(a,c)}};v.ge=function(a){a?this.aa(k):this.O(k)};v.Ga=function(a){if(a){var c=Z(this,a);c&&c.Ga(a)}else E(this.k,function(a){a.Ga()})};
v.aa=function(a){if(a){var c=Z(this,a);c&&c.aa(a)}else E(this.k,function(a){a.aa()})};window.anno=new Y;Y.prototype.activateSelector=Y.prototype.ca;Y.prototype.addAnnotation=Y.prototype.J;Y.prototype.addHandler=Y.prototype.addHandler;Y.prototype.addPlugin=Y.prototype.Ab;Y.prototype.getItems=Y.prototype.vc;Y.prototype.destroy=Y.prototype.destroy;Y.prototype.getActiveSelector=Y.prototype.pa;Y.prototype.getAnnotations=Y.prototype.v;Y.prototype.getAnnotationsAsDOM=Y.prototype.fa;Y.prototype.getAvailableSelectors=Y.prototype.ga;Y.prototype.hideAnnotations=Y.prototype.ha;Y.prototype.hideSelectionWidget=Y.prototype.O;
Y.prototype.highlightAnnotation=Y.prototype.r;Y.prototype.makeAnnotatable=Y.prototype.Cc;Y.prototype.removeAll=Y.prototype.Sb;Y.prototype.removeAnnotation=Y.prototype.A;Y.prototype.removeCurrentSelection=Y.prototype.Ic;Y.prototype.reset=Y.prototype.reset;Y.prototype.setActiveSelector=Y.prototype.tb;Y.prototype.setProperties=Y.prototype.ja;Y.prototype.showAnnotations=Y.prototype.Ga;Y.prototype.showSelectionWidget=Y.prototype.aa;Y.prototype.redrawGlow=Y.prototype.ua;
window.annotorious||(window.annotorious={});window.annotorious.plugin||(window.annotorious.plugin={});window.annotorious.geometry||(window.annotorious.geometry={},window.annotorious.geometry.expand=Hd,window.annotorious.geometry.getBoundingRect=Gd);Y.prototype.setSelectionEnabled=Y.prototype.ge;
